<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Introduction to Oracle Java Message Service</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Queuing User's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Queuing User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96511-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="aq-operations-using-pl-sql.html" title="Previous" type="text/html">
      <link rel="next" href="jms-basic-operation.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Database Advanced Queuing">
    <meta name="dcterms.isVersionOf" content="ADQUE">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="aq-operations-using-pl-sql.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="jms-basic-operation.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Queuing User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Introduction to Oracle Java Message Service</li>
            </ol>
            <a id="GUID-6A777116-92A8-4C49-92E2-10CCF558E58E" name="GUID-6A777116-92A8-4C49-92E2-10CCF558E58E"></a><a id="ADQUE1100"></a>
            
            <h2 id="ADQUE-GUID-6A777116-92A8-4C49-92E2-10CCF558E58E" class="sect2"><span class="enumeration_chapter">11 </span> Introduction to Oracle Java Message Service
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The following topics describe the Oracle <a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java Message Service</span></a> (JMS) interface to Oracle Database Advanced Queuing (AQ). 
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="jms-introduction.html#GUID-1AC3E0F3-4641-495F-82C4-9E8D67C67FF3">General Features of JMS and Oracle JMS</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-555A7DAB-4117-4B7F-9A68-3716C83F9F7C">Structured Payload/Message Types in JMS</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F">Buffered Messaging in JMS</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA">JMS Point-to-Point Model Features</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-C6B0D221-741E-4C66-82D9-EBCCD870B339">JMS Publish/Subscribe Model Features</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-14D8B416-BEC1-4C58-83C1-D6FD16B6961D">JMS Message Producer Features</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-4A309A42-7301-4B28-8B0B-A59D75DF9ECE">JMS Message Consumer Features</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-9453B830-327C-46F2-8F0F-BFD8897B8A5E">JMS Propagation</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-B91F9B8D-0600-47AC-ABE2-F984676B5DFB">Message Transformation with JMS AQ</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-3C01DF53-88AE-4A33-986A-5C259230491F">JMS Streaming</a></p>
                  </li>
                  <li>
                     <p><a href="jms-introduction.html#GUID-7D8D9257-574D-4378-B580-DA656D2F0511">Java EE Compliance</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE2858"></a><div class="props_rev_3"><a id="GUID-1AC3E0F3-4641-495F-82C4-9E8D67C67FF3" name="GUID-1AC3E0F3-4641-495F-82C4-9E8D67C67FF3"></a><h3 id="ADQUE-GUID-1AC3E0F3-4641-495F-82C4-9E8D67C67FF3" class="sect3"><span class="enumeration_section">11.1 </span>General Features of JMS and Oracle JMS
               </h3>
               <div>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="jms-introduction.html#GUID-0EC8127B-2B2F-4767-A027-F8B0F298EDEA">JMS Connection and Session</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-03A2BF32-F7F3-469E-A5EB-1ED60985C6C2">JMS Destination</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-04C64423-595C-42F2-A86A-E7FE04BDC72E">System-Level Access Control in JMS</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-7EDEBA8C-1543-4ED0-A5A6-96E303CE3502">Destination-Level Access Control in JMS</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-9A30E012-E54F-44E2-92C6-8EC75FEB15BC">Retention and Message History in JMS</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-170E2DC8-7418-44D9-9AA8-4303DE60453F">Supporting Oracle Real Application Clusters in JMS</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-E00A2653-462B-4158-B2B1-90348E19D0CB">Supporting Statistics Views in JMS</a> 
                        </p>
                     </li>
                  </ul>
               </div><a id="ADQUE2859"></a><div class="props_rev_3"><a id="GUID-0EC8127B-2B2F-4767-A027-F8B0F298EDEA" name="GUID-0EC8127B-2B2F-4767-A027-F8B0F298EDEA"></a><h4 id="ADQUE-GUID-0EC8127B-2B2F-4767-A027-F8B0F298EDEA" class="sect4"><span class="enumeration_section">11.1.1 </span>JMS Connection and Session
                  </h4>
                  <div>
                     <p>This section contains these topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="jms-introduction.html#GUID-9912D681-B4FE-4086-8F4E-FE2F4144D020">ConnectionFactory Objects</a></p>
                        </li>
                        <li>
                           <p><a href="jms-introduction.html#GUID-111B6378-1EA4-424C-AAF0-1C943C9530D5">Using AQjmsFactory to Obtain ConnectionFactory Objects</a></p>
                        </li>
                        <li>
                           <p><a href="jms-introduction.html#GUID-DFA37C65-C451-41FA-9E71-ECE8A3B1F35C">Using JNDI to Look Up ConnectionFactory Objects</a></p>
                        </li>
                        <li>
                           <p><a href="jms-introduction.html#GUID-E635265C-6771-4CC1-8C32-FF3DA9716879">JMS Connection</a></p>
                        </li>
                        <li>
                           <p><a href="jms-introduction.html#GUID-0ACF176D-A419-4EE2-AF2B-3321A167E104">JMS Session</a></p>
                        </li>
                     </ul>
                  </div><a id="ADQUE2860"></a><div class="props_rev_3"><a id="GUID-9912D681-B4FE-4086-8F4E-FE2F4144D020" name="GUID-9912D681-B4FE-4086-8F4E-FE2F4144D020"></a><h5 id="ADQUE-GUID-9912D681-B4FE-4086-8F4E-FE2F4144D020" class="sect5"><span class="enumeration_section">11.1.1.1 </span>ConnectionFactory Objects
                     </h5>
                     <div>
                        <p>A <code class="codeph">ConnectionFactory</code> encapsulates a set of connection configuration parameters that has been defined by an administrator. A client uses it to create a connection with a JMS provider. In this case Oracle JMS, part of Oracle Database, is the JMS provider.
                        </p>
                        <p>The three types of <code class="codeph">ConnectionFactory</code> objects are:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ConnectionFactory</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">QueueConnectionFactory</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">TopicConnectionFactory</code> 
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADQUE2861"></a><div class="props_rev_3"><a id="GUID-111B6378-1EA4-424C-AAF0-1C943C9530D5" name="GUID-111B6378-1EA4-424C-AAF0-1C943C9530D5"></a><h5 id="ADQUE-GUID-111B6378-1EA4-424C-AAF0-1C943C9530D5" class="sect5"><span class="enumeration_section">11.1.1.2 </span>Using AQjmsFactory to Obtain ConnectionFactory Objects
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can use the <code class="codeph">AQjmsFactory</code> class to obtain a handle to a <code class="codeph">ConnectionFactory</code>, <code class="codeph">QueueConnectionFactory</code>, or <code class="codeph">TopicConnectionFactory</code> object. 
                           </p>
                           <p>To obtain a <code class="codeph">ConnectionFactory</code>, which supports both point-to-point and publish/subscribe operations, use <code class="codeph">AQjmsFactory.getConnectionFactory()</code>. To obtain a <code class="codeph">QueueConnectionFactory</code>, use <code class="codeph">AQjmsFactory.getQueueConnectionFactory()</code>. To obtain a <code class="codeph">TopicConnectionFactory</code>, use <code class="codeph">AQjmsFactory.getTopicConnectionFactory()</code>.
                           </p>
                           <p>The <code class="codeph">ConnectionFactory</code>, <code class="codeph">QueueConnectionFactory</code>, or <code class="codeph">TopicConnectionFactory</code> can be created using hostname, port number, and SID driver or by using JDBC URL and properties.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADQUE2863"></a><a id="ADQUE2862"></a><div class="props_rev_3"><a id="GUID-DFA37C65-C451-41FA-9E71-ECE8A3B1F35C" name="GUID-DFA37C65-C451-41FA-9E71-ECE8A3B1F35C"></a><h5 id="ADQUE-GUID-DFA37C65-C451-41FA-9E71-ECE8A3B1F35C" class="sect5"><span class="enumeration_section">11.1.1.3 </span>Using JNDI to Look Up ConnectionFactory Objects
                     </h5>
                     <div>
                        <div class="section">
                           <p>A JMS administrator can register <code class="codeph">ConnectionFactory</code> objects in a <a href="glossary.html#GUID-6BF3485C-E98F-4344-A7DE-64950BCCE160"><span class="xrefglossterm">Lightweight Directory Access Protocol</span></a> (LDAP) server. The following setup is required to enable <a href="glossary.html#GUID-73476CA0-7AD9-41B9-97E6-7A34F0D4161F"><span class="xrefglossterm">Java Naming and Directory Interface</span></a> (JNDI) lookup in JMS:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Register Database</span><div>
                                 <p>When the Oracle Database server is installed, the database must be registered with the LDAP server. This can be accomplished using the <a href="glossary.html#GUID-B4030090-6D19-4654-8DE8-DF067ABBC2B5"><span class="xrefglossterm">Database Configuration Assistant</span></a> (DBCA). <a href="jms-introduction.html#GUID-DFA37C65-C451-41FA-9E71-ECE8A3B1F35C__CIAIHEII">Figure 11-1</a> shows the structure of Oracle Database Advanced Queuing entries in the LDAP server. <code class="codeph">ConnectionFactory</code> information is stored under <code class="codeph">&lt;cn=OracleDBConnections&gt;</code>, while topics and queues are stored under <code class="codeph">&lt;cn=OracleDBQueues&gt;</code>.
                                 </p>
                                 <div class="figure" id="GUID-DFA37C65-C451-41FA-9E71-ECE8A3B1F35C__CIAIHEII">
                                    <p class="titleinfigure">Figure 11-1 Structure of Oracle Database Advanced Queuing Entries in LDAP Server</p><img width="496" src="img/adque446.gif" alt="Description of Figure 11-1 follows" title="Description of Figure 11-1 follows" longdesc="img_text/adque446.html"><br><a href="img_text/adque446.html">Description of "Figure 11-1 Structure of Oracle Database Advanced Queuing Entries in LDAP Server"</a></div>
                                 <!-- class="figure" -->
                              </div>
                           </li>
                           <li class="stepexpand"><span>Set Parameter <code class="codeph">GLOBAL_TOPIC_ENABLED</code>.</span><div>
                                 <p>The <code class="codeph">GLOBAL_TOPIC_ENABLED</code> system parameter for the database must be set to <code class="codeph">TRUE</code>. This ensures that all queues and topics created in Oracle Database Advanced Queuing are automatically registered with the LDAP server. This parameter can be set by using <code class="codeph">ALTER SYSTEM SET GLOBAL_TOPIC_ENABLED = TRUE</code>.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Register <code class="codeph">ConnectionFactory</code> Objects</span><div>
                                 <p>After the database has been set up to use an LDAP server, the JMS administrator can register <code class="codeph">ConnectionFactory</code>, <code class="codeph">QueueConnectionFactory</code>, and <code class="codeph">TopicConnectionFactory</code> objects in LDAP by using <code class="codeph">AQjmsFactory.registerConnectionFactory()</code>.
                                 </p>
                                 <p>The registration can be accomplished in one of the following ways:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Connect directly to the LDAP server</p>
                                       <p><a id="d64698e585" class="indexterm-anchor"></a><a id="d64698e589" class="indexterm-anchor"></a>The user must have the <code class="codeph">GLOBAL_AQ_USER_ROLE</code> to register connection factories in LDAP.
                                       </p>
                                       <p>To connect directly to LDAP, the parameters for the <code class="codeph">registerConnectionFactory</code> method include the LDAP context, the name of the <code class="codeph">ConnectionFactory</code>, <code class="codeph">QueueConnectionFactory</code>, or <code class="codeph">TopicConnectionFactory</code>, hostname, database SID, port number, <a href="glossary.html#GUID-F112AB6B-FC1B-48D6-8E40-1CB9BAE724EF"><span class="xrefglossterm">JDBC driver</span></a> (thin or oci8) and factory type (queue or topic).
                                       </p>
                                    </li>
                                    <li>
                                       <p>Connect to LDAP through the database server</p>
                                       <p><a id="d64698e619" class="indexterm-anchor"></a><a id="d64698e623" class="indexterm-anchor"></a>The user can log on to Oracle Database first and then have the database update the LDAP entry. The user that logs on to the database must have the <code class="codeph">AQ_ADMINISTRATOR_ROLE</code> to perform this operation.
                                       </p>
                                       <p>To connect to LDAP through the database server, the parameters for the <code class="codeph">registerConnectionFactory</code> method include a JDBC connection (to a user having <code class="codeph">AQ_ADMINISTRATOR_ROLE</code>), the name of the <code class="codeph">ConnectionFactory</code>, <code class="codeph">QueueConnectionFactory</code>, or <code class="codeph">TopicConnectionFactory</code>, hostname, database SID, port number, JDBC driver (thin or oci8) and factory type (queue or topic).
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADQUE2864"></a><div class="props_rev_3"><a id="GUID-E635265C-6771-4CC1-8C32-FF3DA9716879" name="GUID-E635265C-6771-4CC1-8C32-FF3DA9716879"></a><h5 id="ADQUE-GUID-E635265C-6771-4CC1-8C32-FF3DA9716879" class="sect5"><span class="enumeration_section">11.1.1.4 </span>JMS Connection
                     </h5>
                     <div>
                        <p>A JMS <code class="codeph">Connection</code> is an active connection between a client and its JMS provider. A JMS <code class="codeph">Connection</code> performs several critical services:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Encapsulates either an open connection or a pool of connections with a JMS provider</p>
                           </li>
                           <li>
                              <p>Typically represents an open TCP/IP socket (or a set of open sockets) between a client and a provider's service daemon</p>
                           </li>
                           <li>
                              <p>Provides a structure for authenticating clients at the time of its creation</p>
                           </li>
                           <li>
                              <p>Creates <code class="codeph">Sessions</code></p>
                           </li>
                           <li>
                              <p>Provides connection metadata</p>
                           </li>
                           <li>
                              <p>Supports an optional <code class="codeph">ExceptionListener</code></p>
                           </li>
                        </ul>
                        <p>A JMS <code class="codeph">Connection</code> to the database can be created by invoking <code class="codeph">createConnection()</code>, <code class="codeph">createQueueConnection()</code>, or <code class="codeph">createTopicConnection()</code> and passing the parameters <code class="codeph">username</code> and <code class="codeph">password</code> on the <code class="codeph">ConnectionFactory</code>, <code class="codeph">QueueConnectionFactory</code>, or <code class="codeph">TopicConnectionFactory</code> object respectively.
                        </p>
                        <p>Some of the methods that are supported on the <code class="codeph">Connection</code> object are 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">start()</code> 
                              </p>
                              <p>This method starts or restart delivery of incoming messages.</p>
                           </li>
                           <li>
                              <p><code class="codeph">stop()</code></p>
                              <p>This method temporarily stops delivery of incoming messages. When a <code class="codeph">Connection</code> object is stopped, delivery to all of its message consumers is inhibited. Also, <a href="glossary.html#GUID-BC2328C0-3548-45D1-9B5C-64DB4573984C"><span class="xrefglossterm">synchronous</span></a> receive's block and messages are not delivered to message listener.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">close()</code></p>
                              <p>This method closes the <a href="glossary.html#GUID-F7331CE7-BF82-4FA0-81B3-42D454068F03"><span class="xrefglossterm">JMS session</span></a> and releases all associated resources.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">createSession(true, 0)</code></p>
                              <p>This method creates a JMS <code class="codeph">Session</code> using a JMS <code class="codeph">Connection</code> instance.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">createQueueSession(true,</code> <code class="codeph">0)</code></p>
                              <p>This method creates a <code class="codeph">QueueSession</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">createTopicSession(true,</code> <code class="codeph">0</code>)
                              </p>
                              <p>This method creates a <code class="codeph">TopicSession</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">setExceptionListener(ExceptionListener)</code></p>
                              <p>This method sets an exception listener for the <code class="codeph">Connection</code>. This allows a client to be notified of a problem asynchronously. If a <code class="codeph">Connection</code> only consumes messages, then it has no other way to learn it has failed. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">getExceptionListener()</code></p>
                              <p>This method gets the <code class="codeph">ExceptionListener</code> for this <code class="codeph">Connection</code>.
                              </p>
                           </li>
                        </ul>
                        <p>A JMS client typically creates a <code class="codeph">Connection</code>, a <code class="codeph">Session</code> and several <code class="codeph">MessageProducer</code> and <code class="codeph">MessageConsumer</code> objects. In the current version only one open <code class="codeph">Session</code> for each <code class="codeph">Connection</code> is allowed, except in the following cases:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the JDBC oci8 driver is used to create the <a href="glossary.html#GUID-D081F8A3-08E7-4621-B4EA-5AFD8BD61745"><span class="xrefglossterm">JMS connection</span></a></p>
                           </li>
                           <li>
                              <p>If the user provides an <code class="codeph">OracleOCIConnectionPool</code> instance during JMS connection creation
                              </p>
                           </li>
                        </ul>
                        <p>When a <code class="codeph">Connection</code> is created it is in stopped mode. In this state no messages can be delivered to it. It is typical to leave the <code class="codeph">Connection</code> in stopped mode until setup is complete. At that point the <code class="codeph">Connection</code> <code class="codeph">start()</code> method is called and messages begin arriving at the <code class="codeph">Connection</code> consumers. This setup convention minimizes any client confusion that can result from <a href="glossary.html#GUID-2869CF65-0641-4E97-9203-3BD8ED03F8D0"><span class="xrefglossterm">asynchronous</span></a> message delivery while the client is still in the process of setup.
                        </p>
                        <p>It is possible to start a <code class="codeph">Connection</code> and to perform setup subsequently. Clients that do this must be prepared to handle asynchronous message delivery while they are still in the process of setting up. A <code class="codeph">MessageProducer</code> can <a href="glossary.html#GUID-23702F6A-28F1-42D5-BBF6-CCFAACD2B784"><span class="xrefglossterm">send</span></a> messages while a <code class="codeph">Connection</code> is stopped. 
                        </p>
                     </div>
                  </div><a id="ADQUE2865"></a><div class="props_rev_3"><a id="GUID-0ACF176D-A419-4EE2-AF2B-3321A167E104" name="GUID-0ACF176D-A419-4EE2-AF2B-3321A167E104"></a><h5 id="ADQUE-GUID-0ACF176D-A419-4EE2-AF2B-3321A167E104" class="sect5"><span class="enumeration_section">11.1.1.5 </span>JMS Session
                     </h5>
                     <div>
                        <p>A JMS <code class="codeph">Session</code> is a single threaded context for producing and consuming messages. Although it can allocate provider resources outside the <a href="glossary.html#GUID-A164150F-BD11-449E-9BDC-28E2A1D9CD52"><span class="xrefglossterm">Java Virtual Machine</span></a> (JVM), it is considered a lightweight JMS object. 
                        </p>
                        <p>A <code class="codeph">Session</code> serves several purposes:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Constitutes a factory for <code class="codeph">MessageProducer</code> and <code class="codeph">MessageConsumer</code> objects
                              </p>
                           </li>
                           <li>
                              <p>Provides a way to get a handle to destination objects (queues/topics)</p>
                           </li>
                           <li>
                              <p>Supplies provider-optimized message factories</p>
                           </li>
                           <li>
                              <p>Supports a single series of transactions that combines work spanning session <code class="codeph">MessageProducer</code> and <code class="codeph">MessageConsumer</code> objects, organizing these into units
                              </p>
                           </li>
                           <li>
                              <p>Defines a serial order for the messages it consumes and the messages it produces</p>
                           </li>
                           <li>
                              <p>Serializes execution of <code class="codeph">MessageListener</code> objects registered with it
                              </p>
                           </li>
                        </ul>
                        <p>In Oracle Database 10<span class="italic">g</span>, you can create as many JMS <code class="codeph">Sessions</code> as resources allow using a single JMS <code class="codeph">Connection</code>, when using either JDBC thin or JDBC thick (OCI) drivers. 
                        </p>
                        <p>Because a provider can allocate some resources on behalf of a <code class="codeph">Session</code> outside the JVM, clients should close them when they are not needed. Relying on garbage collection to eventually reclaim these resources may not be timely enough. The same is true for <code class="codeph">MessageProducer</code> and <code class="codeph">MessageConsumer</code> objects created by a <code class="codeph">Session</code>.
                        </p>
                        <p>Methods on the <code class="codeph">Session</code> object include: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">commit()</code></p>
                              <p>This method commits all messages performed in the transaction and releases locks currently held.</p>
                           </li>
                           <li>
                              <p><code class="codeph">rollback()</code></p>
                              <p>This method rolls back any messages accomplished in the transaction and release locks currently held.</p>
                           </li>
                           <li>
                              <p><code class="codeph">close()</code></p>
                              <p>This method closes the <code class="codeph">Session</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">getDBConnection()</code></p>
                              <p>This method gets a handle to the underlying JDBC connection. This handle can be used to perform other SQL <a href="glossary.html#GUID-86C2F323-8484-41FB-8E51-BF0462F041DF"><span class="xrefglossterm">DML</span></a> operations as part of the same <code class="codeph">Session</code>. The method is specific to Oracle JMS.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">acknowledge()</code></p>
                              <p>This method acknowledges message receipt in a nontransactional session.</p>
                           </li>
                           <li>
                              <p><code class="codeph">recover()</code></p>
                              <p>This method restarts message delivery in a nontransactional session. In effect, the series of delivered messages in the session is reset to the point after the last acknowledged message.</p>
                           </li>
                        </ul>
                        <p>The following are some Oracle JMS extensions: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">createQueueTable()</code> 
                              </p>
                              <p>This method creates a <a href="glossary.html#GUID-45894F1F-4871-4A00-9171-2743821BAD3A"><span class="xrefglossterm">queue table</span></a>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">getQueueTable()</code></p>
                              <p>This method gets a handle to an existing queue table.</p>
                           </li>
                           <li>
                              <p><code class="codeph">createQueue()</code></p>
                              <p>This method creates a queue.</p>
                           </li>
                           <li>
                              <p><code class="codeph">getQueue()</code></p>
                              <p>This method gets a handle to an existing queue.</p>
                           </li>
                           <li>
                              <p><code class="codeph">createTopic()</code></p>
                              <p>This method creates a topic.</p>
                           </li>
                           <li>
                              <p><code class="codeph">getTopic()</code></p>
                              <p>This method gets a handle to an existing topic.</p>
                           </li>
                        </ul>
                        <p>The <code class="codeph">Session</code> object must be cast to <code class="codeph">AQjmsSession</code> to use any of the extensions.
                        </p>
                        <div class="infoboxnote" id="GUID-0ACF176D-A419-4EE2-AF2B-3321A167E104__GUID-24E3913D-81D9-4086-9043-DFB6E08A79DC">
                           <p class="notep1">Note:</p>
                           <p>The JMS specification expects providers to return null messages when receives are accomplished on a JMS <code class="codeph">Connection</code> instance that has not been started. 
                           </p>
                           <p>After you create a <code class="codeph">javax.jms.Connection</code> instance, you must call the <code class="codeph">start()</code> method on it before you can receive messages. If you add a line like <code class="codeph">t_conn.start();</code> any time after the connection has been created, but before the actual receive, then you can receive your messages.
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADQUE2866"></a><div class="props_rev_3"><a id="GUID-03A2BF32-F7F3-469E-A5EB-1ED60985C6C2" name="GUID-03A2BF32-F7F3-469E-A5EB-1ED60985C6C2"></a><h4 id="ADQUE-GUID-03A2BF32-F7F3-469E-A5EB-1ED60985C6C2" class="sect4"><span class="enumeration_section">11.1.2 </span>JMS Destination
                  </h4>
                  <div>
                     <p>A <code class="codeph">Destination</code> is an object a client uses to specify the destination where it sends messages, and the source from which it receives messages. A <code class="codeph">Destination</code> object can be a <code class="codeph">Queue</code> or a <code class="codeph">Topic</code>. In Oracle Database Advanced Queuing, these map to a <span class="italic"><code class="codeph">schema.queue</code></span> at a specific database. <code class="codeph">Queue</code> maps to a single-consumer queue, and <code class="codeph">Topic</code> maps to a multiconsumer queue. 
                     </p>
                  </div><a id="ADQUE2867"></a><div class="props_rev_3"><a id="GUID-18E9ED1C-059B-428C-8DD5-67A63671C563" name="GUID-18E9ED1C-059B-428C-8DD5-67A63671C563"></a><h5 id="ADQUE-GUID-18E9ED1C-059B-428C-8DD5-67A63671C563" class="sect5"><span class="enumeration_section">11.1.2.1 </span>Using a JMS Session to Obtain Destination Objects
                     </h5>
                     <div>
                        <p><code class="codeph">Destination</code> objects are created from a <code class="codeph">Session</code> object using the following domain-specific <code class="codeph">Session</code> methods: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">AQjmsSession.getQueue(queue_owner, queue_name)</code> 
                              </p>
                              <p>This method gets a handle to a JMS queue.</p>
                           </li>
                           <li>
                              <p><code class="codeph">AQjmsSession.getTopic(topic_owner, topic_name)</code></p>
                              <p>This method gets a handle to a <a href="glossary.html#GUID-F601025D-262D-4ECD-A274-1E1F92D9D4EA"><span class="xrefglossterm">JMS topic</span></a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADQUE2868"></a><div class="props_rev_3"><a id="GUID-462C000B-FFFC-4568-97CD-9D1F079E6618" name="GUID-462C000B-FFFC-4568-97CD-9D1F079E6618"></a><h5 id="ADQUE-GUID-462C000B-FFFC-4568-97CD-9D1F079E6618" class="sect5"><span class="enumeration_section">11.1.2.2 </span>Using JNDI to Look Up Destination Objects
                     </h5>
                     <div>
                        <p>The database can be configured to register <a href="glossary.html#GUID-CBE1EC43-DFD2-4701-B758-DCE2C98C277A"><span class="xrefglossterm">schema</span></a> objects with an LDAP server. If a database has been configured to use LDAP and the GLOBAL_TOPIC_ENABLED parameter has been set to TRUE, then all JMS queues and topics are automatically registered with the LDAP server when they are created. The administrator can also create aliases to the queues and topics registered in LDAP. Queues and topics that are registered in LDAP can be looked up through JNDI using the name or alias of the queue or topic.
                        </p>
                        <div class="infoboxnotealso" id="GUID-462C000B-FFFC-4568-97CD-9D1F079E6618__GUID-5FA4C2B7-8F4D-4533-8602-CA793D4EC5CC">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="aq-administrative-interface.html#GUID-05DCD3B5-48BF-42B4-9D88-A54D9127F61F" title="DBMS_AQADM.ADD_ALIAS_TO_LDAP adds an alias to the LDAP server.">Adding an Alias to the LDAP Server</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="ADQUE2869"></a><div class="props_rev_3"><a id="GUID-E789D407-83BE-492E-A9C1-22FC2206A533" name="GUID-E789D407-83BE-492E-A9C1-22FC2206A533"></a><h5 id="ADQUE-GUID-E789D407-83BE-492E-A9C1-22FC2206A533" class="sect5"><span class="enumeration_section">11.1.2.3 </span>JMS Destination Methods
                     </h5>
                     <div>
                        <p>Methods on the <code class="codeph">Destination</code> object include: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">alter()</code></p>
                              <p>This method alters a <code class="codeph">Queue</code> or a <code class="codeph">Topic</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">schedulePropagation()</code></p>
                              <p>This method schedules <a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">propagation</span></a> from a source to a destination.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">unschedulePropagation()</code> 
                              </p>
                              <p>This method unschedules a previously scheduled propagation.</p>
                           </li>
                           <li>
                              <p><code class="codeph">enablePropagationSchedule()</code></p>
                              <p>This method enables a propagation schedule.</p>
                           </li>
                           <li>
                              <p><code class="codeph">disablePropagationSchedule()</code></p>
                              <p>This method disables a propagation schedule.</p>
                           </li>
                           <li>
                              <p><code class="codeph">start()</code></p>
                              <p>This method starts a <code class="codeph">Queue</code> or a <code class="codeph">Topic</code>. The queue can be started for enqueue or <a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">dequeue</span></a>. The topic can be started for publish or subscribe.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">stop()</code></p>
                              <p>This method stops a <code class="codeph">Queue</code> or a <code class="codeph">Topic</code>. The queue is stopped for enqueue or dequeue. The topic is stopped for publish or subscribe.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">drop()</code></p>
                              <p>This method drops a <code class="codeph">Queue</code> or a <code class="codeph">Topic</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADQUE2870"></a><div class="props_rev_3"><a id="GUID-04C64423-595C-42F2-A86A-E7FE04BDC72E" name="GUID-04C64423-595C-42F2-A86A-E7FE04BDC72E"></a><h4 id="ADQUE-GUID-04C64423-595C-42F2-A86A-E7FE04BDC72E" class="sect4"><span class="enumeration_section">11.1.3 </span>System-Level Access Control in JMS
                  </h4>
                  <div>
                     <p>Oracle8<span class="italic">i</span> or higher supports system-level access control for all queuing operations. This feature allows an application designer or DBA to create users as queue administrators. A queue administrator can invoke administrative and operational JMS interfaces on any queue in the database. This simplifies administrative work, because all administrative scripts for the queues in a database can be managed under one schema.
                     </p>
                     <p>When messages arrive at the destination queues, sessions based on the source queue schema name are used for enqueuing the newly arrived messages into the destination queues. This means that you must grant enqueue privileges for the destination queues to schemas of the source queues.</p>
                     <p>To propagate to a remote destination queue, the login user (specified in the database link in the address field of the agent structure) should either be granted the <code class="codeph">ENQUEUE_ANY</code> privilege, or be granted the rights to enqueue to the destination queue. However, you are not required to grant any explicit privileges if the login user in the database link also owns the queue tables at the destination. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-04C64423-595C-42F2-A86A-E7FE04BDC72E__GUID-E6E5D40D-3223-4DC7-AF29-92BA67C6E53B">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="managing-aq.html#GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623" title="Oracle Enterprise Manager supports most of the administrative functions of Oracle Database Advanced Queuing. Oracle Database Advanced Queuing functions are found under the Distributed node in the navigation tree of the Enterprise Manager console.">Oracle Enterprise Manager Support</a>"</span></p>
                     </div>
                  </div>
               </div><a id="ADQUE2871"></a><div class="props_rev_3"><a id="GUID-7EDEBA8C-1543-4ED0-A5A6-96E303CE3502" name="GUID-7EDEBA8C-1543-4ED0-A5A6-96E303CE3502"></a><h4 id="ADQUE-GUID-7EDEBA8C-1543-4ED0-A5A6-96E303CE3502" class="sect4"><span class="enumeration_section">11.1.4 </span>Destination-Level Access Control in JMS
                  </h4>
                  <div>
                     <p>Oracle8<span class="italic">i</span> or higher supports access control for enqueue and dequeue operations at the queue or topic level. This feature allows the application designer to protect queues and topics created in one schema from applications running in other schemas. You can grant only minimal access privileges to the applications that run outside the schema of the queue or topic. The supported access privileges on a queue or topic are <code class="codeph">ENQUEUE</code>, <code class="codeph">DEQUEUE</code> and <code class="codeph">ALL</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-7EDEBA8C-1543-4ED0-A5A6-96E303CE3502__GUID-DFD16C7E-EE09-488A-A37E-2AD17B7BCF74">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="managing-aq.html#GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623" title="Oracle Enterprise Manager supports most of the administrative functions of Oracle Database Advanced Queuing. Oracle Database Advanced Queuing functions are found under the Distributed node in the navigation tree of the Enterprise Manager console.">Oracle Enterprise Manager Support</a>"</span></p>
                     </div>
                  </div>
               </div><a id="ADQUE2872"></a><div class="props_rev_3"><a id="GUID-9A30E012-E54F-44E2-92C6-8EC75FEB15BC" name="GUID-9A30E012-E54F-44E2-92C6-8EC75FEB15BC"></a><h4 id="ADQUE-GUID-9A30E012-E54F-44E2-92C6-8EC75FEB15BC" class="sect4"><span class="enumeration_section">11.1.5 </span>Retention and Message History in JMS
                  </h4>
                  <div>
                     <p>Messages are often related to each other. For example, if a message is produced as a result of the consumption of another message, then the two are related. As the application designer, you may want to keep track of such relationships. Oracle Database Advanced Queuing allows users to retain messages in the queue table, which can then be queried in SQL for analysis. </p>
                     <p>Along with retention and message identifiers, Oracle Database Advanced Queuing lets you automatically create message journals, also called tracking journals or event journals. Taken together, retention, message identifiers and SQL queries make it possible to build powerful message warehouses.</p>
                  </div>
               </div><a id="ADQUE2873"></a><div class="props_rev_3"><a id="GUID-170E2DC8-7418-44D9-9AA8-4303DE60453F" name="GUID-170E2DC8-7418-44D9-9AA8-4303DE60453F"></a><h4 id="ADQUE-GUID-170E2DC8-7418-44D9-9AA8-4303DE60453F" class="sect4"><span class="enumeration_section">11.1.6 </span>Supporting Oracle Real Application Clusters in JMS
                  </h4>
                  <div>
                     <p>In Oracle Database 12<span class="italic">c</span> Release 1 (12.1), Advanced Queuing introduces high performing and scalable JMS Sharded Queues. A sharded queue is a single logical queue that is divided into multiple, independent, physical queues through system-maintained partitioning. Sharded queues are the preferred JMS queues for queues used across Oracle RAC instances, for queues with high enqueue or dequeue rates, or for queues with many subscribers. See <span class="q">"<a href="aq-performance-scalability.html#GUID-1B18AD7E-2F02-4208-A059-6B4531586C75">Sharded Queues and Oracle Real Application Clusters (Oracle RAC)</a>"</span> for more information.
                     </p>
                     <p>For non-sharded queues, Oracle Real Application Clusters (Oracle RAC) can be used to improve Oracle Database Advanced Queuing performance by allowing different queues to be managed by different instances. You do this by specifying different instance affinities (preferences) for the queue tables that store the queues. This allows queue operations (enqueue/dequeue) or topic operations (<a href="glossary.html#GUID-C1099A1A-C20D-4C9C-AD73-BBF6BC8939B5"><span class="xrefglossterm">publish/subscribe</span></a>) on different queues or topics to occur in parallel. 
                     </p>
                     <p>The Oracle Database Advanced Queuing queue monitor process continuously monitors the instance affinities of the queue tables. The queue monitor assigns ownership of a queue table to the specified primary instance if it is available, failing which it assigns it to the specified secondary instance. </p>
                     <p>If the owner instance of a queue table terminates, then the queue monitor changes ownership to a suitable instance such as the secondary instance. </p>
                     <p>Oracle Database Advanced Queuing propagation can make use of Oracle Real Application Clusters, although it is transparent to the user. The affinities for jobs submitted on behalf of the propagation schedules are set to the same values as that of the affinities of the respective queue tables. Thus, a <code class="codeph">job_queue_process</code> associated with the owner instance of a queue table is handling the propagation from queues stored in that queue table, thereby minimizing pinging. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-170E2DC8-7418-44D9-9AA8-4303DE60453F__GUID-0C1C687A-30DC-4592-A0D1-A910A2D1E1AD">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="aq-performance-scalability.html#GUID-30265296-1110-47C0-B949-D22520D04197" title="An application can decide the way messages are sharded in the sharded queue. In such cases, the application explicitly specifies to enqueue a message in a specific shard.">Sharded Queues</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="aq-administrative-interface.html#GUID-3B8E1DFE-0A6A-4CF2-8069-8DAECB5359A2" title="DBMS_AQADM.SCHEDULE_PROPAGATION schedules propagation of messages.">Scheduling a Queue Propagation</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../racad/introduction-to-oracle-rac.html#RACAD1111" target="_blank"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADQUE2874"></a><div class="props_rev_3"><a id="GUID-E00A2653-462B-4158-B2B1-90348E19D0CB" name="GUID-E00A2653-462B-4158-B2B1-90348E19D0CB"></a><h4 id="ADQUE-GUID-E00A2653-462B-4158-B2B1-90348E19D0CB" class="sect4"><span class="enumeration_section">11.1.7 </span>Supporting Statistics Views in JMS
                  </h4>
                  <div>
                     <p>Each instance keeps its own Oracle Database Advanced Queuing statistics information in its own <a href="glossary.html#GUID-F71A41B0-927F-45BF-97D6-18B4BBCADFB4"><span class="xrefglossterm">System Global Area</span></a> (SGA), and does not have knowledge of the statistics gathered by other instances. Then, when a <code class="codeph">GV$AQ</code> view is queried by an instance, all other instances funnel their statistics information to the instance issuing the query. 
                     </p>
                     <p>The <code class="codeph">GV$AQ</code> view can be queried at any time to see the number of messages in waiting, ready or expired state. The view also displays the average number of seconds messages have been waiting to be processed.
                     </p>
                     <div class="infoboxnotealso" id="GUID-E00A2653-462B-4158-B2B1-90348E19D0CB__GUID-5C33433C-8166-4DC8-91D5-AC41382F9B25">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="aq-messaging-gateway-views.html#GUID-E0673077-05DC-41AC-B796-DC408DBE8C7F" title="The V$AQ view provides information about the number of messages in different states for the whole database.">V$AQ: Number of Messages in Different States in Database</a>"</span></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2875"></a><div class="props_rev_3"><a id="GUID-555A7DAB-4117-4B7F-9A68-3716C83F9F7C" name="GUID-555A7DAB-4117-4B7F-9A68-3716C83F9F7C"></a><h3 id="ADQUE-GUID-555A7DAB-4117-4B7F-9A68-3716C83F9F7C" class="sect3"><span class="enumeration_section">11.2 </span>Structured Payload/Message Types in JMS
               </h3>
               <div>
                  <p>JMS messages are composed of a header, properties, and a body.</p>
                  <p>The header consists of header fields, which contain values used by both clients and providers to identify and route messages. All messages support the same set of header fields.</p>
                  <p>Properties are optional header fields. In addition to standard properties defined by JMS, there can be provider-specific and application-specific properties. </p>
                  <p>The body is the message payload. JMS defines various types of message payloads, and a type that can store JMS messages of any or all JMS-specified message types.</p>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="jms-introduction.html#GUID-ECCD89DD-CDB3-4455-AA9E-28ABA53488FC">JMS Message Headers</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-2A32B19E-DA83-4BF9-80CF-EAB04B08CD66">JMS Message Properties</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-E857403A-614C-41D3-9F72-0B5D5D8698F7">JMS Message Bodies</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-4119D22E-DA5F-4842-862D-01935994548B">Using Message Properties with Different Message Types</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B">Buffered Messaging with Oracle JMS</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2876"></a><div class="props_rev_3"><a id="GUID-ECCD89DD-CDB3-4455-AA9E-28ABA53488FC" name="GUID-ECCD89DD-CDB3-4455-AA9E-28ABA53488FC"></a><h4 id="ADQUE-GUID-ECCD89DD-CDB3-4455-AA9E-28ABA53488FC" class="sect4"><span class="enumeration_section">11.2.1 </span>JMS Message Headers
                  </h4>
                  <div>
                     <p>A JMS message header contains the following fields:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">JMSDestination</code> 
                           </p>
                           <p>This field contains the destination to which the message is sent. In Oracle Database Advanced Queuing this corresponds to the destination queue/topic. It is a <code class="codeph">Destination</code> type set by JMS after the <code class="codeph">Send</code> method has completed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSDeliveryMode</code> 
                           </p>
                           <p>This field determines whether the message is logged or not. JMS supports <code class="codeph">PERSISTENT</code> delivery (where messages are logged to stable storage) and <code class="codeph">NONPERSISTENT</code> delivery (messages not logged). It is a <code class="codeph">INTEGER</code> set by JMS after the <code class="codeph">Send</code> method has completed. JMS permits an administrator to configure JMS to override the client-specified value for <code class="codeph">JMSDeliveryMode</code>.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSMessageID</code> 
                           </p>
                           <p>This field uniquely identifies a message in a provider. All message IDs must begin with the string <code class="codeph">ID:</code>. It is a <code class="codeph">String</code> type set by JMS after the <code class="codeph">Send</code> method has completed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSTimeStamp</code></p>
                           <p>This field contains the time the message was handed over to the provider to be sent. This maps to Oracle Database Advanced Queuing message enqueue time. It is a <code class="codeph">Long</code> type set by JMS after the <code class="codeph">Send</code> method has completed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSCorrelationID</code></p>
                           <p>This field can be used by a client to link one message with another. It is a <code class="codeph">String</code> type set by the JMS client.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSReplyTo</code></p>
                           <p>This field contains a <code class="codeph">Destination</code> type supplied by a client when a message is sent. Clients can use <code class="codeph">oracle.jms.AQjmsAgent</code>; <code class="codeph">javax.jms.Queue</code>; or <code class="codeph">javax.jms.Topic</code>.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSType</code></p>
                           <p>This field contains a message type identifier supplied by a client at send time. It is a <code class="codeph">String</code> type. For portability Oracle recommends that the <code class="codeph">JMSType</code> be symbolic values.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSExpiration</code></p>
                           <p>This field is the sum of the enqueue time and the <code class="codeph">TimeToLive</code> in non-Java EE compliance mode. In compliant mode, the <code class="codeph">JMSExpiration</code> header value in a dequeued message is the sum of <code class="codeph">JMSTimeStamp</code> when the message was enqueued (Greenwich Mean Time, in milliseconds) and the <code class="codeph">TimeToLive</code> (in milliseconds). It is a <code class="codeph">Long</code> type set by JMS after the <code class="codeph">Send</code> method has completed. JMS permits an administrator to configure JMS to override the client-specified value for <code class="codeph">JMSExpiration</code>.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSPriority</code></p>
                           <p>This field contains the priority of the message. It is a <code class="codeph">INTEGER</code> set by JMS after the <code class="codeph">Send</code> method has completed. In Java EE-compliance mode, the permitted values for priority are <code class="codeph">0</code>&#x2013;<code class="codeph">9</code>, with <code class="codeph">9</code> the highest priority and <code class="codeph">4</code> the default, in conformance with the Sun Microsystem JMS 1.1 standard. Noncompliant mode is the default. JMS permits an administrator to configure JMS to override the client-specified value for <code class="codeph">JMSPriority</code>.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSRedelivered</code> 
                           </p>
                           <p>This field is a Boolean set by the JMS provider.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-ECCD89DD-CDB3-4455-AA9E-28ABA53488FC__GUID-591DB427-9906-445C-A5BC-118577B9FDEA">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="jms-introduction.html#GUID-7D8D9257-574D-4378-B580-DA656D2F0511">Java EE Compliance</a>"</span></p>
                     </div>
                  </div>
               </div><a id="ADQUE2877"></a><div class="props_rev_3"><a id="GUID-2A32B19E-DA83-4BF9-80CF-EAB04B08CD66" name="GUID-2A32B19E-DA83-4BF9-80CF-EAB04B08CD66"></a><h4 id="ADQUE-GUID-2A32B19E-DA83-4BF9-80CF-EAB04B08CD66" class="sect4"><span class="enumeration_section">11.2.2 </span>JMS Message Properties
                  </h4>
                  <div>
                     <p>JMS properties are set either explicitly by the client or automatically by the JMS provider (these are generally read-only). Some JMS properties are set using the parameters specified in <code class="codeph">Send</code> and <code class="codeph">Receive</code> operations.
                     </p>
                     <p>Properties add optional header fields to a message. Properties allow a client, using a <code class="codeph">messageSelector</code>, to have a JMS provider select messages on its behalf using application-specific criteria. Property names are strings and values can be: <code class="codeph">Boolean</code>, <code class="codeph">byte</code>, <code class="codeph">short</code>, <code class="codeph">int</code>, <code class="codeph">long</code>, <code class="codeph">float</code>, <code class="codeph">double</code>, and <code class="codeph">string</code>.
                     </p>
                     <p>JMS-defined properties, which all begin with <code class="codeph">"JMSX"</code>, include the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">JMSXUserID</code></p>
                           <p>This field is the identity of the user sending the message. It is a <code class="codeph">String</code> type set by JMS after the <code class="codeph">Send</code> method has completed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXAppID</code></p>
                           <p>This field is the identity of the application sending the message. It is a <code class="codeph">String</code> type set by JMS after the <code class="codeph">Send</code> method has completed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXDeliveryCount</code></p>
                           <p>This field is the number of message delivery attempts. It is an <code class="codeph">Integer</code> set by JMS after the <code class="codeph">Send</code> method has completed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXGroupid</code></p>
                           <p>This field is the identity of the message group that this message belongs to. It is a <code class="codeph">String</code> type set by the JMS client. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXGroupSeq</code></p>
                           <p>This field is the sequence number of a message within a group. It is an <code class="codeph">Integer</code> set by the JMS client.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXRcvTimeStamp</code></p>
                           <p>This field is the time the message was delivered to the consumer (dequeue time). It is a <code class="codeph">String</code> type set by JMS after the <code class="codeph">Receive</code> method has completed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXState</code></p>
                           <p>This field is the message state, set by the provider. The message state can be <code class="codeph">WAITING</code>, <code class="codeph">READY</code>, <code class="codeph">EXPIRED</code>, or <code class="codeph">RETAINED</code>.
                           </p>
                        </li>
                     </ul>
                     <p>Oracle-specific JMS properties, which all begin with <code class="codeph">JMS_Oracle</code>, include the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">JMS_OracleExcpQ</code></p>
                           <p>This field is the queue name to send the message to if it cannot be delivered to the original destination. It is a <code class="codeph">String</code> type set by the JMS client. Only destinations of type <code class="codeph">EXCEPTION</code> can be specified in the <code class="codeph">JMS_OracleExcpQ</code> property.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMS_OracleDelay</code></p>
                           <p>This field is the time in seconds to delay the delivery of the message. It is an <code class="codeph">Integer</code> set by the JMS client. This can affect the order of message delivery.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMS_OracleOriginalMessageId</code></p>
                           <p>This field is set to the message identifier of the message in the source if the message is propagated from one destination to another. It is a <code class="codeph">String</code> type set by the JMS provider. If the message is not propagated, then this property has the same value as <code class="codeph">JMSMessageId</code>.
                           </p>
                        </li>
                     </ul>
                     <p>A client can add additional header fields to a message by defining properties. These properties can then be used in a <code class="codeph">messageSelector</code> to select specific messages.
                     </p>
                  </div>
               </div><a id="ADQUE2878"></a><div class="props_rev_3"><a id="GUID-E857403A-614C-41D3-9F72-0B5D5D8698F7" name="GUID-E857403A-614C-41D3-9F72-0B5D5D8698F7"></a><h4 id="ADQUE-GUID-E857403A-614C-41D3-9F72-0B5D5D8698F7" class="sect4"><span class="enumeration_section">11.2.3 </span>JMS Message Bodies
                  </h4>
                  <div>
                     <p>JMS provides five forms of message body:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="jms-introduction.html#GUID-D10737AD-7143-4A27-8BE2-E8E931F63C7D">StreamMessage</a></p>
                        </li>
                        <li>
                           <p><a href="jms-introduction.html#GUID-5465D000-FF48-4244-A404-E9F51BB7F847">BytesMessage</a></p>
                        </li>
                        <li>
                           <p><a href="jms-introduction.html#GUID-54C9B48C-99B0-46B1-A647-796F1A874A23">MapMessage</a></p>
                        </li>
                        <li>
                           <p><a href="jms-introduction.html#GUID-95727DD7-873B-4B3D-8933-BA0A15F42CD3">TextMessage</a></p>
                        </li>
                        <li>
                           <p><a href="jms-introduction.html#GUID-689A3D3E-8019-4CBD-AD32-87F2D0CC2B3C">ObjectMessage</a></p>
                        </li>
                        <li>
                           <p><a href="jms-introduction.html#GUID-D6751C95-0290-47AF-B7C8-7D77E3AF6FC9">AdtMessage</a></p>
                        </li>
                     </ul>
                  </div><a id="ADQUE2880"></a><a id="ADQUE2879"></a><div class="props_rev_3"><a id="GUID-D10737AD-7143-4A27-8BE2-E8E931F63C7D" name="GUID-D10737AD-7143-4A27-8BE2-E8E931F63C7D"></a><h5 id="ADQUE-GUID-D10737AD-7143-4A27-8BE2-E8E931F63C7D" class="sect5"><span class="enumeration_section">11.2.3.1 </span>StreamMessage
                     </h5>
                     <div>
                        <p> A <code class="codeph">StreamMessage</code> object is used to send a stream of Java primitives. It is filled and read sequentially. It inherits from <code class="codeph">Message</code> and adds a <code class="codeph">StreamMessage</code> body. Its methods are based largely on those found in <code class="codeph">java.io.DataInputStream</code> and <code class="codeph">java.io.DataOutputStream</code>.
                        </p>
                        <p>The primitive types can be read or written explicitly using methods for each type. They can also be read or written generically as objects. To use <code class="codeph">StreamMessage</code> objects, create the queue table with the <code class="codeph">SYS.AQ$_JMS_STREAM_MESSAGE</code> or <code class="codeph">AQ$_JMS_MESSAGE</code> payload types.
                        </p>
                        <p><code class="codeph">StreamMessage</code> objects support the conversions shown in <a href="jms-introduction.html#GUID-D10737AD-7143-4A27-8BE2-E8E931F63C7D__CACEJAJJ" title="Rows are input message types, and columns are output message types. An "X" indicates that an input type can be converted to the corresponding output type; a "-" indicates it cannot.">Table 11-1</a>. A value written as the row type can be read as the column type. 
                        </p>
                        <div class="tblformalwide" id="GUID-D10737AD-7143-4A27-8BE2-E8E931F63C7D__CACEJAJJ">
                           <p class="titleintable">Table 11-1 StreamMessage Conversion</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="StreamMessage Conversion" summary="Rows are input message types, and columns are output message types. An "X" indicates that an input type can be converted to the corresponding output type; a "-" indicates it cannot." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="11%" id="d64698e2680">Input</th>
                                    <th align="left" valign="bottom" width="10%" id="d64698e2683">Boolean</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e2686">byte</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e2689">short</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e2692">char</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e2695">int</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e2698">long</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e2701">float</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e2704">double</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e2707">String</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e2710">byte[]</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e2715" headers="d64698e2680 ">
                                       <p><code class="codeph">Boolean</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e2715 d64698e2683 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2715 d64698e2686 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2715 d64698e2689 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2715 d64698e2692 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2715 d64698e2695 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2715 d64698e2698 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2715 d64698e2701 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2715 d64698e2704 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2715 d64698e2707 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2715 d64698e2710 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e2751" headers="d64698e2680 ">
                                       <p><code class="codeph">byte</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e2751 d64698e2683 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2751 d64698e2686 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2751 d64698e2689 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2751 d64698e2692 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2751 d64698e2695 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2751 d64698e2698 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2751 d64698e2701 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2751 d64698e2704 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2751 d64698e2707 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2751 d64698e2710 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e2787" headers="d64698e2680 ">
                                       <p><code class="codeph">short</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e2787 d64698e2683 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2787 d64698e2686 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2787 d64698e2689 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2787 d64698e2692 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2787 d64698e2695 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2787 d64698e2698 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2787 d64698e2701 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2787 d64698e2704 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2787 d64698e2707 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2787 d64698e2710 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e2823" headers="d64698e2680 ">
                                       <p><code class="codeph">char</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e2823 d64698e2683 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2823 d64698e2686 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2823 d64698e2689 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2823 d64698e2692 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2823 d64698e2695 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2823 d64698e2698 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2823 d64698e2701 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2823 d64698e2704 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2823 d64698e2707 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2823 d64698e2710 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e2859" headers="d64698e2680 ">
                                       <p><code class="codeph">int</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e2859 d64698e2683 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2859 d64698e2686 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2859 d64698e2689 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2859 d64698e2692 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2859 d64698e2695 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2859 d64698e2698 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2859 d64698e2701 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2859 d64698e2704 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2859 d64698e2707 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2859 d64698e2710 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e2895" headers="d64698e2680 ">
                                       <p><code class="codeph">long</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e2895 d64698e2683 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2895 d64698e2686 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2895 d64698e2689 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2895 d64698e2692 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2895 d64698e2695 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2895 d64698e2698 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2895 d64698e2701 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2895 d64698e2704 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2895 d64698e2707 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2895 d64698e2710 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e2931" headers="d64698e2680 ">
                                       <p><code class="codeph">float</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e2931 d64698e2683 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2931 d64698e2686 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2931 d64698e2689 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2931 d64698e2692 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2931 d64698e2695 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2931 d64698e2698 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2931 d64698e2701 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2931 d64698e2704 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2931 d64698e2707 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2931 d64698e2710 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e2967" headers="d64698e2680 ">
                                       <p><code class="codeph">double</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e2967 d64698e2683 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2967 d64698e2686 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2967 d64698e2689 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2967 d64698e2692 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2967 d64698e2695 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2967 d64698e2698 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2967 d64698e2701 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2967 d64698e2704 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2967 d64698e2707 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e2967 d64698e2710 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3003" headers="d64698e2680 ">
                                       <p><code class="codeph">string</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3003 d64698e2683 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3003 d64698e2686 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3003 d64698e2689 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3003 d64698e2692 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3003 d64698e2695 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3003 d64698e2698 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3003 d64698e2701 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3003 d64698e2704 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3003 d64698e2707 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3003 d64698e2710 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3039" headers="d64698e2680 ">
                                       <p><code class="codeph">byte[]</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3039 d64698e2683 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3039 d64698e2686 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3039 d64698e2689 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3039 d64698e2692 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3039 d64698e2695 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3039 d64698e2698 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3039 d64698e2701 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3039 d64698e2704 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3039 d64698e2707 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3039 d64698e2710 ">
                                       <p>X</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="ADQUE2881"></a><div class="props_rev_3"><a id="GUID-5465D000-FF48-4244-A404-E9F51BB7F847" name="GUID-5465D000-FF48-4244-A404-E9F51BB7F847"></a><h5 id="ADQUE-GUID-5465D000-FF48-4244-A404-E9F51BB7F847" class="sect5"><span class="enumeration_section">11.2.3.2 </span>BytesMessage
                     </h5>
                     <div>
                        <p>A <code class="codeph">BytesMessage</code> object is used to send a message containing a stream of uninterpreted bytes. It inherits <code class="codeph">Message</code> and adds a <code class="codeph">BytesMessage</code> body. The receiver of the message interprets the bytes. Its methods are based largely on those found in <code class="codeph">java.io.DataInputStream</code> and <code class="codeph">java.io.DataOutputStream</code>. 
                        </p>
                        <p>This message type is for client encoding of existing message formats. If possible, one of the other self-defining message types should be used instead. </p>
                        <p>The primitive types can be written explicitly using methods for each type. They can also be written generically as objects. To use <code class="codeph">BytesMessage</code> objects, create the queue table with <code class="codeph">SYS.AQ$_JMS_BYTES_MESSAGE</code> or <code class="codeph">AQ$_JMS_MESSAGE</code> payload types.
                        </p>
                     </div>
                  </div><a id="ADQUE2883"></a><a id="ADQUE2882"></a><div class="props_rev_3"><a id="GUID-54C9B48C-99B0-46B1-A647-796F1A874A23" name="GUID-54C9B48C-99B0-46B1-A647-796F1A874A23"></a><h5 id="ADQUE-GUID-54C9B48C-99B0-46B1-A647-796F1A874A23" class="sect5"><span class="enumeration_section">11.2.3.3 </span>MapMessage
                     </h5>
                     <div>
                        <p>A <code class="codeph">MapMessage</code> object is used to send a set of name-value pairs where the names are <code class="codeph">String</code> types, and the values are Java primitive types. The entries can be accessed sequentially or randomly by name. The order of the entries is undefined. It inherits from <code class="codeph">Message</code> and adds a <code class="codeph">MapMessage</code> body. The primitive types can be read or written explicitly using methods for each type. They can also be read or written generically as objects.
                        </p>
                        <p>To use <code class="codeph">MapMessage</code> objects, create the queue table with the <code class="codeph">SYS.AQ$_JMS_MAP_MESSAGE</code> or <code class="codeph">AQ$_JMS_MESSAGE</code> payload types. <code class="codeph">MapMessage</code> objects support the conversions shown in <a href="jms-introduction.html#GUID-54C9B48C-99B0-46B1-A647-796F1A874A23__CACBFIDD" title="Rows are input message types, and columns are output message types. An "X" indicates that an input type can be converted to the corresponding output type; a "-" indicates it cannot.">Table 11-2</a>. An "X" in the table means that a value written as the row type can be read as the column type.
                        </p>
                        <div class="tblformalwide" id="GUID-54C9B48C-99B0-46B1-A647-796F1A874A23__CACBFIDD">
                           <p class="titleintable">Table 11-2 MapMessage Conversion</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="MapMessage Conversion" summary="Rows are input message types, and columns are output message types. An "X" indicates that an input type can be converted to the corresponding output type; a "-" indicates it cannot." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="11%" id="d64698e3265">Input</th>
                                    <th align="left" valign="bottom" width="10%" id="d64698e3268">Boolean</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e3271">byte</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e3274">short</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e3277">char</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e3280">int</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e3283">long</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e3286">float</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e3289">double</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e3292">String</th>
                                    <th align="left" valign="bottom" width="9%" id="d64698e3295">byte[]</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3300" headers="d64698e3265 ">
                                       <p><code class="codeph">Boolean</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3300 d64698e3268 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3300 d64698e3271 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3300 d64698e3274 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3300 d64698e3277 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3300 d64698e3280 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3300 d64698e3283 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3300 d64698e3286 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3300 d64698e3289 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3300 d64698e3292 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3300 d64698e3295 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3336" headers="d64698e3265 ">
                                       <p><code class="codeph">byte</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3336 d64698e3268 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3336 d64698e3271 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3336 d64698e3274 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3336 d64698e3277 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3336 d64698e3280 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3336 d64698e3283 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3336 d64698e3286 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3336 d64698e3289 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3336 d64698e3292 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3336 d64698e3295 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3372" headers="d64698e3265 ">
                                       <p><code class="codeph">short</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3372 d64698e3268 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3372 d64698e3271 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3372 d64698e3274 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3372 d64698e3277 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3372 d64698e3280 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3372 d64698e3283 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3372 d64698e3286 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3372 d64698e3289 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3372 d64698e3292 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3372 d64698e3295 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3408" headers="d64698e3265 ">
                                       <p><code class="codeph">char</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3408 d64698e3268 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3408 d64698e3271 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3408 d64698e3274 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3408 d64698e3277 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3408 d64698e3280 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3408 d64698e3283 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3408 d64698e3286 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3408 d64698e3289 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3408 d64698e3292 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3408 d64698e3295 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3444" headers="d64698e3265 ">
                                       <p><code class="codeph">int</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3444 d64698e3268 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3444 d64698e3271 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3444 d64698e3274 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3444 d64698e3277 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3444 d64698e3280 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3444 d64698e3283 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3444 d64698e3286 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3444 d64698e3289 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3444 d64698e3292 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3444 d64698e3295 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3480" headers="d64698e3265 ">
                                       <p><code class="codeph">long</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3480 d64698e3268 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3480 d64698e3271 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3480 d64698e3274 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3480 d64698e3277 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3480 d64698e3280 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3480 d64698e3283 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3480 d64698e3286 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3480 d64698e3289 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3480 d64698e3292 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3480 d64698e3295 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3516" headers="d64698e3265 ">
                                       <p><code class="codeph">float</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3516 d64698e3268 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3516 d64698e3271 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3516 d64698e3274 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3516 d64698e3277 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3516 d64698e3280 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3516 d64698e3283 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3516 d64698e3286 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3516 d64698e3289 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3516 d64698e3292 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3516 d64698e3295 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3552" headers="d64698e3265 ">
                                       <p><code class="codeph">double</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3552 d64698e3268 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3552 d64698e3271 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3552 d64698e3274 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3552 d64698e3277 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3552 d64698e3280 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3552 d64698e3283 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3552 d64698e3286 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3552 d64698e3289 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3552 d64698e3292 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3552 d64698e3295 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3588" headers="d64698e3265 ">
                                       <p><code class="codeph">string</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3588 d64698e3268 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3588 d64698e3271 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3588 d64698e3274 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3588 d64698e3277 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3588 d64698e3280 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3588 d64698e3283 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3588 d64698e3286 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3588 d64698e3289 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3588 d64698e3292 ">
                                       <p>X</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3588 d64698e3295 ">
                                       <p>-</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d64698e3624" headers="d64698e3265 ">
                                       <p><code class="codeph">byte[]</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d64698e3624 d64698e3268 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3624 d64698e3271 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3624 d64698e3274 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3624 d64698e3277 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3624 d64698e3280 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3624 d64698e3283 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3624 d64698e3286 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3624 d64698e3289 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3624 d64698e3292 ">
                                       <p>-</p>
                                    </td>
                                    <td align="left" valign="top" width="9%" headers="d64698e3624 d64698e3295 ">
                                       <p>X</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="ADQUE2884"></a><div class="props_rev_3"><a id="GUID-95727DD7-873B-4B3D-8933-BA0A15F42CD3" name="GUID-95727DD7-873B-4B3D-8933-BA0A15F42CD3"></a><h5 id="ADQUE-GUID-95727DD7-873B-4B3D-8933-BA0A15F42CD3" class="sect5"><span class="enumeration_section">11.2.3.4 </span>TextMessage
                     </h5>
                     <div>
                        <p>A <code class="codeph">TextMessage</code> object is used to send a message containing a <code class="codeph">java.lang.StringBuffer</code>. It inherits from <code class="codeph">Message</code> and adds a <code class="codeph">TextMessage</code> body. The text information can be read or written using methods <code class="codeph">getText()</code> and <code class="codeph">setText(</code>...<code class="codeph">)</code>. To use <code class="codeph">TextMessage</code> objects, create the queue table with the <code class="codeph">SYS.AQ$_JMS_TEXT_MESSAGE</code> or <code class="codeph">AQ$_JMS_MESSAGE</code> payload types.
                        </p>
                     </div>
                  </div><a id="ADQUE2885"></a><div class="props_rev_3"><a id="GUID-689A3D3E-8019-4CBD-AD32-87F2D0CC2B3C" name="GUID-689A3D3E-8019-4CBD-AD32-87F2D0CC2B3C"></a><h5 id="ADQUE-GUID-689A3D3E-8019-4CBD-AD32-87F2D0CC2B3C" class="sect5"><span class="enumeration_section">11.2.3.5 </span>ObjectMessage
                     </h5>
                     <div>
                        <p>An <code class="codeph">ObjectMessage</code> object is used to send a message that contains a serializable Java object. It inherits from Message and adds a body containing a single Java reference. Only serializable Java objects can be used. If a collection of Java objects must be sent, then one of the collection classes provided in JDK 1.4 can be used. The objects can be read or written using the methods <code class="codeph">getObject()</code> and <code class="codeph">setObject(</code>...<code class="codeph">)</code>.To use <code class="codeph">ObjectMessage</code> objects, create the queue table with the <code class="codeph">SYS.AQ$_JMS_OBJECT_MESSAGE</code> or <code class="codeph">AQ$_JMS_MESSAGE</code> payload types.
                        </p>
                     </div>
                  </div><a id="ADQUE2886"></a><div class="props_rev_3"><a id="GUID-D6751C95-0290-47AF-B7C8-7D77E3AF6FC9" name="GUID-D6751C95-0290-47AF-B7C8-7D77E3AF6FC9"></a><h5 id="ADQUE-GUID-D6751C95-0290-47AF-B7C8-7D77E3AF6FC9" class="sect5"><span class="enumeration_section">11.2.3.6 </span>AdtMessage
                     </h5>
                     <div>
                        <p>An <code class="codeph">AdtMessage</code> object is used to send a message that contains a Java object that maps to an Oracle object type. These objects inherit from <code class="codeph">Message</code> and add a body containing a Java object that implements the <code class="codeph">CustomDatum</code> or <code class="codeph">ORAData</code> interface.
                        </p>
                        <p>To use <code class="codeph">AdtMessage</code> objects, create the queue table with payload type as the Oracle object type. The <code class="codeph">AdtMessage</code> payload can be read and written using the <code class="codeph">getAdtPayload</code> and <code class="codeph">setAdtPayload</code> methods.
                        </p>
                        <p>You can also use an <code class="codeph">AdtMessage</code> object to send messages to queues of type <code class="codeph">SYS.XMLType</code>. You must use the <code class="codeph">oracle.xdb.XMLType</code> class to create the message.
                        </p>
                        <p>For <code class="codeph">AdtMessage</code> objects, the client can get:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">JMSXDeliveryCount</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">JMSXRecvTimeStamp</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">JMSXState</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">JMS_OracleExcpQ</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">JMS_OracleDelay</code> 
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-D6751C95-0290-47AF-B7C8-7D77E3AF6FC9__GUID-E4986693-AA7F-43AC-AB0A-279AA466134D">
                           <p class="notep1">See Also:</p>
                           <p><a href="../jjdev/Java-overview.html#JJDEV01100" target="_blank"><span class="italic">Oracle Database Java Developer's Guide</span></a> for information about the <code class="codeph">CustomDatum</code> and <code class="codeph">ORAData</code> interfaces
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADQUE2887"></a><div class="props_rev_3"><a id="GUID-4119D22E-DA5F-4842-862D-01935994548B" name="GUID-4119D22E-DA5F-4842-862D-01935994548B"></a><h4 id="ADQUE-GUID-4119D22E-DA5F-4842-862D-01935994548B" class="sect4"><span class="enumeration_section">11.2.4 </span>Using Message Properties with Different Message Types
                  </h4>
                  <div>
                     <p>The following message properties can be set by the client using the <code class="codeph">setProperty</code> call. For <code class="codeph">StreamMessage</code>, <code class="codeph">BytesMessage</code>, <code class="codeph">ObjectMessage</code>, <code class="codeph">TextMessage</code>, and <code class="codeph">MapMessage</code> objects, the client can set:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">JMSXAppID</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXGroupID</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXGroupSeq</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMS_OracleExcpQ</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMS_OracleDelay</code> 
                           </p>
                        </li>
                     </ul>
                     <p>For <code class="codeph">AdtMessage</code> objects, the client can set:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">JMS_OracleExcpQ</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMS_OracleDelay</code> 
                           </p>
                        </li>
                     </ul>
                     <p>The following message properties can be obtained by the client using the <code class="codeph">getProperty</code> call. For <code class="codeph">StreamMessage</code>, <code class="codeph">BytesMessage</code>, <code class="codeph">ObjectMessage</code>, <code class="codeph">TextMessage</code>, and <code class="codeph">MapMessage</code> objects, the client can get:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">JMSXuserID</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXAppID</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXDeliveryCount</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXGroupID</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXGroupSeq</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXRecvTimeStamp</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMSXState</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMS_OracleExcpQ</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMS_OracleDelay</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">JMS_OracleOriginalMessageID</code> 
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2889"></a><a id="ADQUE2890"></a><a id="ADQUE2891"></a><a id="ADQUE2892"></a><a id="ADQUE2893"></a><a id="ADQUE2888"></a><div class="props_rev_3"><a id="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B" name="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B"></a><h4 id="ADQUE-GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B" class="sect4"><span class="enumeration_section">11.2.5 </span>Buffered Messaging with Oracle JMS
                  </h4>
                  <div>
                     <p>Users can send a nonpersistent JMS message by specifying the <code class="codeph">deliveryMode</code> to be <code class="codeph">NON_PERSISTENT</code> when sending a message. JMS nonpersistent messages are not required to be logged to stable storage, so they can be lost after a JMS system failure. JMS nonpersistent messages are similar to the buffered messages available in Oracle Database Advanced Queuing, but there are also important differences between the two.
                     </p>
                     <div class="infoboxnote" id="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B__GUID-2DF95CA4-FD4C-4DF9-82BD-1911DAA02EB5">
                        <p class="notep1">Note:</p>
                        <p>Do not confuse Oracle JMS nonpersistent messages with Oracle Database Advanced Queuing nonpersistent queues, which are deprecated in Oracle Database 10<span class="italic">g</span> Release 2 (10.2).
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B__GUID-9C719FBC-2EE2-425D-80D2-ADE55D113A52">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="aq-introduction.html#GUID-E87DA98A-4188-4E5A-9984-7311F4C3BA27" title="Buffered messaging combines the rich functionality that this product has always offered with a much faster queuing implementation. Buffered messaging is ideal for applications that do not require the reliability and transaction support of Oracle Database Advanced Queuing persistent messaging.">Buffered Messaging</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="non-persistent-queues.html#GUID-53FA8763-D0CA-4EE4-A3B2-606CE01AE702"> Nonpersistent Queues</a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B__GUID-A2B1DE41-4F6B-4ADE-B371-96251A3AB8E5">Transaction Commits and Client Acknowledgments</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The JMS <code class="codeph">deliveryMode</code> is orthogonal to the transaction attribute of a message. JMS nonpersistent messages can be sent and received by either a transacted session or a nontransacted session. If a JMS nonpersistent message is sent and received by a transacted session, then the effect of the JMS operation is only visible after the transacted session commits. If it is received by a nontransacted session with <code class="codeph">CLIENT_ACKNOWLEDGE</code> acknowledgment mode, then the effect of receiving this message is only visible after the client acknowledges the message. Without the acknowledgment, the message is not removed and will be redelivered if the client calls <code class="codeph">Session.recover</code>. 
                        </p>
                        <p>Oracle Database Advanced Queuing buffered messages, however, do not support these transaction or acknowledgment concepts. Both sending and receiving a buffered message must be in the <code class="codeph">IMMEDIATE</code> visibility mode. The effects of the sending and receiving operations are therefore visible to the user immediately, no matter whether the session is committed or the messages are acknowledged. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B__GUID-F534C745-B00B-4F40-B3B4-C4BA2C647469">Different APIs</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messages sent with the regular JMS send and publish methods are treated by Oracle Database Advanced Queuing as persistent messages. The regular JMS receive methods receive only AQ persistent messages. 	To send and receive buffered messages, you must use the Oracle extension APIs <code class="codeph">bufferSend</code>, <code class="codeph">bufferPublish</code>, and <code class="codeph">bufferReceive</code>. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B__GUID-27E5C783-A539-4CEB-83B9-CC01A2AD535D">
                           <p class="notep1">See Also:</p>
                           <p><a href="../jajms/index.html" target="_blank"><span class="italic">Oracle Database Advanced Queuing Java API Reference</span></a> for more information on <code class="codeph">bufferSend</code>, <code class="codeph">bufferPublish</code>, and <code class="codeph">bufferReceive</code></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B__GUID-52641433-C2D5-424D-9D54-698D59EEB46A">Payload Limits</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The Oracle Database Advanced Queuing implementation of buffered messages does not support <code class="codeph">LOB</code> attributes. This places limits on the payloads for the five types of standard JMS messages:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>JMS <code class="codeph">TextMessage</code> payloads cannot exceed 4000 bytes. 
                              </p>
                              <p>This limit might be even lower with some database character sets, because during the Oracle JMS character set conversion, Oracle JMS sometimes must make a conservative choice of using <code class="codeph">CLOB</code> instead of <code class="codeph">VARCHAR</code> to store the text payload in the database. 
                              </p>
                           </li>
                           <li>
                              <p>JMS <code class="codeph">BytesMessage</code> payloads cannot exceed 2000 bytes.
                              </p>
                           </li>
                           <li>
                              <p>	JMS <code class="codeph">ObjectMessage</code>, <code class="codeph">StreamMessage</code>, and <code class="codeph">MapMessage</code> data serialized by JAVA cannot exceed 2000 bytes.
                              </p>
                           </li>
                           <li>
                              <p>For all other Oracle JMS ADT messages, the corresponding Oracle database ADT cannot contain <code class="codeph">LOB</code> attributes.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B__GUID-0AD913F0-DC4D-4522-B51B-43F14447C3C6">Different Constants</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The Oracle Database Advanced Queuing and Oracle JMS APIs use different numerical values to designate buffered and persistent messages, as shown in <a href="jms-introduction.html#GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B__CIAHFDBG" title="This table shows buffered messaging constants for Oracle Streams AQ and Oracle JMS. The first column is the API, the second column is the persistent constant, and the third column is the buffered constant.">Table 11-3</a>. 
                        </p>
                        <div class="tblformal" id="GUID-FA74C4F3-7F5C-47A2-B2AE-472640EB799B__CIAHFDBG">
                           <p class="titleintable">Table 11-3 Oracle Database AQ and Oracle JMS Buffered Messaging Constants</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle Database AQ and Oracle JMS Buffered Messaging Constants" summary="This table shows buffered messaging constants for Oracle Streams AQ and Oracle JMS. The first column is the API, the second column is the persistent constant, and the third column is the buffered constant." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d64698e4356">API</th>
                                    <th align="left" valign="bottom" width="35%" id="d64698e4359">Persistent Message</th>
                                    <th align="left" valign="bottom" width="36%" id="d64698e4362">Buffered Message</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d64698e4367" headers="d64698e4356 ">
                                       <p>Oracle Database Advanced Queuing</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d64698e4367 d64698e4359 ">
                                       <p><code class="codeph">PERSISTENT := 1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d64698e4367 d64698e4362 ">
                                       <p><code class="codeph">BUFFERED :=2</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d64698e4379" headers="d64698e4356 ">
                                       <p>Oracle JMS</p>
                                    </td>
                                    <td align="left" valign="top" width="35%" headers="d64698e4379 d64698e4359 ">
                                       <p><code class="codeph">PERSISTENT := 2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d64698e4379 d64698e4362 ">
                                       <p><code class="codeph">NON_PERSISTENT := 1</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADQUE2895"></a><a id="ADQUE2896"></a><a id="ADQUE2897"></a><a id="ADQUE2898"></a><a id="ADQUE2899"></a><a id="ADQUE2900"></a><a id="ADQUE2894"></a><div class="props_rev_3"><a id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F" name="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F"></a><h3 id="ADQUE-GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F" class="sect3"><span class="enumeration_section">11.3 </span>Buffered Messaging in JMS
               </h3>
               <div>
                  <p>Buffered messaging fully supports JMS messaging standards. Oracle JMS extends those standards in several ways.</p>
                  <div class="infoboxnotealso" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-3F4E1FB2-9AB5-4CBB-97CA-A08831150C34">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="aq-introduction.html#GUID-E87DA98A-4188-4E5A-9984-7311F4C3BA27" title="Buffered messaging combines the rich functionality that this product has always offered with a much faster queuing implementation. Buffered messaging is ideal for applications that do not require the reliability and transaction support of Oracle Database Advanced Queuing persistent messaging.">Buffered Messaging</a>"</span></p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-4B86B9BE-62CB-4F69-87F6-5170D47CFF5E">Enqueuing JMS Buffered Messages</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Oracle JMS allows applications to send buffered messages by setting <code class="codeph">JMSDeliveryMode</code> for individual messages, so persistent and buffered messages can be enqueued to the same JMS queue/topic.
                     </p>
                     <p>Oracle JMS buffered messages can be ordered by enqueue time, priority, or both. The ordering does not extend across message types. So a persistent message sent later, for example, can be delivered before an buffered message sent earlier. Expiration is also supported for buffered messages in Oracle JMS.</p>
                     <div class="infoboxnotealso" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-D3F0EFB3-97D9-4610-841A-A151EBD8D1EB">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="jms-introduction.html#GUID-ECCD89DD-CDB3-4455-AA9E-28ABA53488FC">JMS Message Headers</a>"</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-9AE99F99-B315-4DE8-8B89-D4A9951E1440">Dequeuing JMS Buffered Messages</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>JMS does not require subscribers to declare interest in just persistent messages or just buffered messages, so JMS subscribers can be interested in both message types. </p>
                     <p>Oracle JMS supports fast and efficient dequeue of messages by <code class="codeph">JMSMessageID</code>, selectors on message headers, and selectors on message properties. The Oracle JMS dequeue call checks for both persistent and buffered messages.
                     </p>
                     <div class="infoboxnote" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-FADF08E1-F20E-4876-B898-C8D40C0EA425">
                        <p class="notep1">Note:</p>
                        <p>Oracle JMS persistent messages have unique message identifiers. Oracle JMS buffered message identifiers are unique only within a queue/topic.</p>
                     </div>
                     <p>If concurrent dequeue processes are dequeuing from the same queue as the same subscriber, then they will skip messages that are locked by the other process.</p>
                     <div class="infoboxnotealso" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-BB94FD9F-25ED-4122-839A-4201CC49EB69">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="jms-introduction.html#GUID-CC78CBF0-6A8B-4230-BE93-4C1BB778A08D">Receiving Messages </a>"</span></p>
                              <p></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-7FC71B2F-3726-4AFD-9CF7-60C6A34D8C24">Transactions Support</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>If buffered messages are enqueued in a transacted session, then JMS requires transaction support for them. Oracle JMS guarantees that transacted sessions involving buffered messages meet the following standards:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Atomicity</p>
                           <p>Both persistent and buffered messages within an Oracle JMS transaction are committed or rolled back atomically. Even if buffered messages were written to disk, as in the case of messages involving LOBs, rollback nevertheless removes them.</p>
                        </li>
                        <li>
                           <p>Consistency	</p>
                           <p>If persistent and buffered messaging operations interleave in a transaction, then all Oracle JMS users share a consistent view of the affected queues/topics. All persistent and buffered messages enqueued by a transaction become visible at commit time. If a process ends in the middle of a transaction, then both persistent and buffered messages are undone. Oracle JMS users see either all persistent and buffered messages in a transaction or none of them.</p>
                        </li>
                        <li>
                           <p>Isolation</p>
                           <p>An buffered enqueue operation in a transaction is visible only to the owner transaction before the transaction is committed. It is visible to all consumers after the transaction is committed.</p>
                        </li>
                     </ul>
                     <p>Messages locked by dequeue transaction may be browsed.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-03CE9C8E-2B7D-42CA-ACE4-DAB73CE8F090">Acknowledging Message Receipt</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Three values are defined for the <code class="codeph">ack_mode</code> parameter for acknowledging message receipt in nontransacted sessions:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">DUPS_OK_ACKNOWLEDGE</code></p>
                           <p>In this mode, duplicate messages are allowed.</p>
                        </li>
                        <li>
                           <p><code class="codeph">AUTO_ACKNOWLEDGE</code></p>
                           <p>In this mode, the session automatically acknowledges messages.</p>
                        </li>
                        <li>
                           <p><code class="codeph">CLIENT_ACKNOWLEDGE</code></p>
                           <p>In this mode, the client explicitly acknowledges messages by calling the message producer acknowledge method. Acknowledging a message acknowledges all previously consumed messages.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-E770674B-B6DA-49AA-94B8-9693FE5708CE">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="jms-point-to-point.html#GUID-B555FE46-E029-4961-8AEE-DA8C3415C192">Creating a Session</a>"</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-5DEFD332-0470-4E04-8C07-F0A8A059B8B3">Buffered Messaging Quality of Service</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>JMS requires providers to support at-most-once delivery of unpropagated buffered messages. If recovery of buffered messages is disabled, then Oracle JMS meets this standard. </p>
                     <p>Duplicate delivery of messages is possible with the current implementation of message propagation. But this does not violate the JMS standard, because message propagation is an extension offered by Oracle JMS. </p>
                     <div class="infoboxnotealso" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-F2C49E0F-BC82-406E-9D0E-6CE3C8F632AC">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="aq-introduction.html#GUID-E87DA98A-4188-4E5A-9984-7311F4C3BA27__CHDHFACF">Propagating Buffered Messages</a>"</span> for the causes of duplicate delivery of buffered messages
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-B4D5D0F7-FAD5-46EB-B2F7-C0E304D43FEB">JMS Types Support for Buffered Messages</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Oracle JMS maps the JMS-defined types to Oracle user-defined types and creates queues of these user-defined types for storing JMS messages. Some of these types have LOB attributes, which Oracle JMS writes to disk whether the message is persistent or buffered.</p>
                     <p>The user-defined type <code class="codeph">SYS.AQ$_JMS_TEXT_MESSAGE</code> for JMS type <code class="codeph">JMSTextMessage</code>, for example, stores text strings smaller than 4k in a <code class="codeph">VARCHAR2</code> column. But it has a CLOB attribute for storing text strings larger than 4k. 
                     </p>
                     <p>Because JMS messages are often larger than 4k, Oracle JMS offers a new ADT that allows larger messages to be stored in memory. The disk representation of the ADT remains unchanged, but several 	<code class="codeph">VARCHAR2</code>/<code class="codeph">RAW</code> attributes allow for JMS messages of sizes up to 100k to be stored in memory. Messages larger than 100k can still be published as buffered messages, but they are written to disk.
                     </p>
                     <div class="infoboxnotealso" id="GUID-1110B630-581F-41FD-8EC2-CBEBCF75912F__GUID-5A49C4EC-E529-47C9-80A8-60BF6D164AC6">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="aq-introduction.html#GUID-E87DA98A-4188-4E5A-9984-7311F4C3BA27__CHDFICID">Enqueuing Buffered Messages</a>"</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE2902"></a><a id="ADQUE2903"></a><a id="ADQUE2904"></a><a id="ADQUE2905"></a><a id="ADQUE2901"></a><div class="props_rev_3"><a id="GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA" name="GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA"></a><h3 id="ADQUE-GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA" class="sect3"><span class="enumeration_section">11.4 </span>JMS Point-to-Point Model Features
               </h3>
               <div>
                  <p>In the point-to-point model, clients exchange messages from one point to another. Message producers and consumers send and receive messages using single-consumer queues. An administrator creates the single-consumer queues with the <code class="codeph">createQueue</code> method in <code class="codeph">AQjmsSession</code>. Before they can be used, the queues must be enabled for enqueue/dequeue using the <code class="codeph">start</code> call in <code class="codeph">AQjmsDestination</code>. Clients obtain a handle to a previously created queue using the <code class="codeph">getQueue</code> method on <code class="codeph">AQjmsSession</code>.
                  </p>
                  <p>In a single-consumer queue, a message can be consumed exactly once by a single consumer. If there are multiple processes or operating system threads concurrently dequeuing from the same queue, then each process dequeues the first unlocked message at the head of the queue. A locked message cannot be dequeued by a process other than the one that has created the lock. </p>
                  <p>After processing, the message is removed if the retention time of the queue is 0, or it is retained for a specified retention time. As long as the message is retained, it can be either queried using SQL on the queue table view or dequeued by specifying the message identifier of the processed message in a <code class="codeph">QueueBrowser</code>.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__GUID-79717332-4D3F-41A9-A62B-5CF279D49E55">QueueSender</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>A client uses a <code class="codeph">QueueSender</code> to send messages to a queue. It is created by passing a queue to the <code class="codeph">createSender</code> method in a client <code class="codeph">Session</code>. A client also has the option of creating a <code class="codeph">QueueSender</code> without supplying a queue. In that case a queue must be specified on every send operation. 
                     </p>
                     <p>A client can specify a default delivery mode, priority and <code class="codeph">TimeToLive</code> for all messages sent by the <code class="codeph">QueueSender</code>. Alternatively, the client can define these options for each message.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__GUID-5AC5531C-A3A7-4FFB-B6D2-465225D122DE">QueueReceiver</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>A client uses a <code class="codeph">QueueReceiver</code> to receive messages from a queue. It is created using the <code class="codeph">createQueueReceiver</code> method in a client <code class="codeph">Session</code>. It can be created with or without a <code class="codeph">messageSelector</code>. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__GUID-B3D5D211-52A9-4C5B-9566-8C0A95F2F10F">QueueBrowser</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>A client uses a <code class="codeph">QueueBrowser</code> to view messages on a queue without removing them. The browser method returns a <code class="codeph">java</code>.<code class="codeph">util</code>.<code class="codeph">Enumeration</code> that is used to scan messages in the queue. The first call to <code class="codeph">nextElement</code> gets a snapshot of the queue. A <code class="codeph">QueueBrowser</code> can be created with or without a <code class="codeph">messageSelector</code>.
                     </p>
                     <p>A <code class="codeph">QueueBrowser</code> can also optionally lock messages as it is scanning them. This is similar to a "<code class="codeph">SELECT</code>... <code class="codeph">for</code> <code class="codeph">UPDATE"</code> command on the message. This prevents other consumers from removing the message while they are being scanned. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">
                     <p class="subhead2" id="GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__GUID-91099DDC-D6E0-41A7-90B5-479168971C40">MessageSelector</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>A <code class="codeph">messageSelector</code> allows the client to restrict messages delivered to the consumer to those that match the <code class="codeph">messageSelector</code> expression. A <code class="codeph">messageSelector</code> for queues containing payloads of type <code class="codeph">TextMessage</code>, <code class="codeph">StreamMessage</code>, <code class="codeph">BytesMessage</code>, <code class="codeph">ObjectMessage</code>, or <code class="codeph">MapMessage</code> can contain any expression that has one or more of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>JMS message identifier prefixed with "ID:"</p><pre class="oac_no_warn" dir="ltr">JMSMessageID ='ID:23452345'
</pre></li>
                        <li>
                           <p>JMS message header fields or properties</p><pre class="oac_no_warn" dir="ltr">JMSPriority &lt; 3 AND JMSCorrelationID = 'Fiction'

JMSCorrelationID LIKE 'RE%'
</pre></li>
                        <li>
                           <p>User-defined message properties</p><pre class="oac_no_warn" dir="ltr">color IN ('RED', BLUE', 'GREEN') AND price &lt; 30000 
</pre></li>
                     </ul>
                     <p>The <code class="codeph">messageSelector</code> for queues containing payloads of type <code class="codeph">AdtMessage</code> can contain any expression that has one or more of the following: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Message identifier without the "ID:" prefix</p><pre class="oac_no_warn" dir="ltr">msgid = '23434556566767676'
</pre></li>
                        <li>
                           <p>Priority, correlation identifier, or both</p><pre class="oac_no_warn" dir="ltr">priority &lt; 3 AND corrid = 'Fiction'
</pre></li>
                        <li>
                           <p>Message payload</p><pre class="oac_no_warn" dir="ltr">tab.user_data.color = 'GREEN' AND tab.user_data.price &lt; 30000
</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE2906"></a><div class="props_rev_3"><a id="GUID-C6B0D221-741E-4C66-82D9-EBCCD870B339" name="GUID-C6B0D221-741E-4C66-82D9-EBCCD870B339"></a><h3 id="ADQUE-GUID-C6B0D221-741E-4C66-82D9-EBCCD870B339" class="sect3"><span class="enumeration_section">11.5 </span>JMS Publish/Subscribe Model Features
               </h3>
               <div>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="jms-introduction.html#GUID-453F20B1-2967-4188-BBAC-AA9D6EB30610">JMS Publish/Subscribe Overview</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-4E251F18-4AC4-46E3-A6A2-F9A89BE978B5">DurableSubscriber</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-DAB377B8-9D2F-4463-8F28-CCC5BC43DE1C">RemoteSubscriber</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-3397743E-5AB0-4B67-BD37-3F9E8C9B5CB0">TopicPublisher</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-5491402A-8BCC-4B29-93AC-585729985631">Recipient Lists</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-D433AA47-72A0-49C3-A430-35D2E7776D49">TopicReceiver</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-C3D00EB6-3884-41A8-A70B-EC901D08C7A9">TopicBrowser</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-B81578CB-EB0A-4386-BC61-9865A600B65C">Setting Up JMS Publish/Subscribe Operations</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2907"></a><div class="props_rev_3"><a id="GUID-453F20B1-2967-4188-BBAC-AA9D6EB30610" name="GUID-453F20B1-2967-4188-BBAC-AA9D6EB30610"></a><h4 id="ADQUE-GUID-453F20B1-2967-4188-BBAC-AA9D6EB30610" class="sect4"><span class="enumeration_section">11.5.1 </span>JMS Publish/Subscribe Overview
                  </h4>
                  <div>
                     <p>JMS enables flexible and dynamic communication between applications functioning as publishers and applications playing the role of subscribers. The applications are not coupled together; they interact based on messages and message content. </p>
                     <p>In distributing messages, publisher applications are not required to handle or manage message recipients explicitly. This allows new subscriber applications to be added dynamically without changing any publisher application logic. </p>
                     <p>Similarly, subscriber applications receive messages based on message content without regard to which publisher applications are sending messages. This allows new publisher applications to be added dynamically without changing any subscriber application logic. </p>
                     <p>Subscriber applications specify interest by defining a rule-based subscription on message properties or the message content of a topic. The system automatically routes messages by computing recipients for published messages using the rule-based subscriptions.</p>
                     <p>In the publish/subscribe model, messages are published to and received from topics. A topic is created using the <code class="codeph">CreateTopic()</code> method in an <code class="codeph">AQjmsSession</code>. A client can obtain a handle to a previously-created topic using the <code class="codeph">getTopic()</code> method in <code class="codeph">AQjmsSession</code>.
                     </p>
                  </div>
               </div><a id="ADQUE2908"></a><div class="props_rev_3"><a id="GUID-4E251F18-4AC4-46E3-A6A2-F9A89BE978B5" name="GUID-4E251F18-4AC4-46E3-A6A2-F9A89BE978B5"></a><h4 id="ADQUE-GUID-4E251F18-4AC4-46E3-A6A2-F9A89BE978B5" class="sect4"><span class="enumeration_section">11.5.2 </span>DurableSubscriber
                  </h4>
                  <div>
                     <p>A client creates a <code class="codeph">DurableSubscriber</code> with the <code class="codeph">createDurableSubscriber()</code> method in a client <code class="codeph">Session</code>. It can be created with or without a <code class="codeph">messageSelector</code>.
                     </p>
                     <p>A <code class="codeph">messageSelector</code> allows the client to restrict messages delivered to the subscriber to those that match the selector. The syntax for the selector is described in detail in <code class="codeph">createDurableSubscriber</code> in <a href="../jajms/index.html" target="_blank"><span class="italic">Oracle Database Advanced Queuing Java API Reference</span></a>.
                     </p>
                     <p>When subscribers use the same name, durable subscriber action depends on the Java EE compliance mode set for an <a href="glossary.html#GUID-9885B911-8AC1-49F3-922E-1F8D64C4501D"><span class="xrefglossterm">Oracle Java Message Service</span></a> (Oracle JMS) client at runtime. 
                     </p>
                     <p>In noncompliant mode, two durable <code class="codeph">TopicSubscriber</code> objects with the same name can be active against two different topics. In compliant mode, durable subscribers with the same name are not allowed. If two subscribers use the same name and are created against the same topic, but the selector used for each subscriber is different, then the underlying Oracle Database Advanced Queuing subscription is altered using the internal <code class="codeph">DBMS_AQJMS.ALTER_SUBSCRIBER()</code> call.
                     </p>
                     <p>If two subscribers use the same name and are created against two different topics, and if the client that uses the same subscription name also originally created the subscription name, then the existing subscription is dropped and the new subscription is created.</p>
                     <p>If two subscribers use the same name and are created against two different topics, and if a different client (a client that did not originate the subscription name) uses an existing subscription name, then the subscription is not dropped and an error is thrown. Because it is not known if the subscription was created by JMS or PL/SQL, the subscription on the other topic should not be dropped.</p>
                     <div class="infoboxnotealso" id="GUID-4E251F18-4AC4-46E3-A6A2-F9A89BE978B5__GUID-9E32377E-F756-4F15-8B57-39F5BF7FE740">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="jms-introduction.html#GUID-7D8D9257-574D-4378-B580-DA656D2F0511">Java EE Compliance</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADQUE2909"></a><div class="props_rev_3"><a id="GUID-DAB377B8-9D2F-4463-8F28-CCC5BC43DE1C" name="GUID-DAB377B8-9D2F-4463-8F28-CCC5BC43DE1C"></a><h4 id="ADQUE-GUID-DAB377B8-9D2F-4463-8F28-CCC5BC43DE1C" class="sect4"><span class="enumeration_section">11.5.3 </span>RemoteSubscriber
                  </h4>
                  <div>
                     <p>Remote subscribers are defined using the <code class="codeph">createRemoteSubscriber</code> call. The remote subscriber can be a specific consumer at the remote topic or all subscribers at the remote topic
                     </p>
                     <p>A remote subscriber is defined using the <code class="codeph">AQjmsAgent</code> structure. An <code class="codeph">AQjmsAgent</code> consists of a name and address. The name refers to the <code class="codeph">consumer_name</code> at the remote topic. The address refers to the remote topic: 
                     </p><pre class="oac_no_warn" dir="ltr"><span class="italic">schema.topic_name</span>[@dblink]
</pre><p>To publish messages to a particular consumer at the remote topic, the <code class="codeph">subscription_name</code> of the <a href="glossary.html#GUID-F50CE039-717A-4D4C-B4D9-62EB3191885A"><span class="xrefglossterm">recipient</span></a> at the remote topic must be specified in the name field of <code class="codeph">AQjmsAgent</code>. The remote topic must be specified in the address field of <code class="codeph">AQjmsAgent</code>.
                     </p>
                     <p>To publish messages to all subscribers of the remote topic, the name field of <code class="codeph">AQjmsAgent</code> must be set to null. The remote topic must be specified in the address field of <code class="codeph">AQjmsAgent</code>.
                     </p>
                  </div>
               </div><a id="ADQUE2910"></a><div class="props_rev_3"><a id="GUID-3397743E-5AB0-4B67-BD37-3F9E8C9B5CB0" name="GUID-3397743E-5AB0-4B67-BD37-3F9E8C9B5CB0"></a><h4 id="ADQUE-GUID-3397743E-5AB0-4B67-BD37-3F9E8C9B5CB0" class="sect4"><span class="enumeration_section">11.5.4 </span>TopicPublisher
                  </h4>
                  <div>
                     <p>Messages are published using <code class="codeph">TopicPublisher</code>, which is created by passing a <code class="codeph">Topic</code> to a <code class="codeph">createPublisher</code> method. A client also has the option of creating a <code class="codeph">TopicPublisher</code> without supplying a <code class="codeph">Topic</code>. In this case, a <code class="codeph">Topic</code> must be specified on every publish operation. A client can specify a default delivery mode, priority and <code class="codeph">TimeToLive</code> for all messages sent by the <code class="codeph">TopicPublisher</code>. It can also specify these options for each message. 
                     </p>
                  </div>
               </div><a id="ADQUE2911"></a><div class="props_rev_3"><a id="GUID-5491402A-8BCC-4B29-93AC-585729985631" name="GUID-5491402A-8BCC-4B29-93AC-585729985631"></a><h4 id="ADQUE-GUID-5491402A-8BCC-4B29-93AC-585729985631" class="sect4"><span class="enumeration_section">11.5.5 </span>Recipient Lists
                  </h4>
                  <div>
                     <p>In the JMS publish/subscribe model, clients can specify explicit recipient lists instead of having messages sent to all the subscribers of the topic. These recipients may or may not be existing subscribers of the topic. The recipient list overrides the subscription list on the topic for this message. Recipient lists functionality is an Oracle extension to JMS.</p>
                  </div>
               </div><a id="ADQUE2912"></a><div class="props_rev_3"><a id="GUID-D433AA47-72A0-49C3-A430-35D2E7776D49" name="GUID-D433AA47-72A0-49C3-A430-35D2E7776D49"></a><h4 id="ADQUE-GUID-D433AA47-72A0-49C3-A430-35D2E7776D49" class="sect4"><span class="enumeration_section">11.5.6 </span>TopicReceiver
                  </h4>
                  <div>
                     <p>If the recipient name is explicitly specified in the recipient list, but that recipient is not a subscriber to the queue, then messages sent to it can be received by creating a <code class="codeph">TopicReceiver</code>. If the subscriber name is not specified, then clients must use durable subscribers at the remote site to receive messages. <code class="codeph">TopicReceiver</code> is an Oracle extension to JMS.
                     </p>
                     <p>A <code class="codeph">TopicReceiver</code> can be created with a <code class="codeph">messageSelector</code>. This allows the client to restrict messages delivered to the recipient to those that match the selector.
                     </p>
                     <div class="infoboxnotealso" id="GUID-D433AA47-72A0-49C3-A430-35D2E7776D49__GUID-FE33B9FA-09E5-414B-B39E-7AA1A8C9CBE2">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a>"</span></p>
                     </div>
                  </div>
               </div><a id="ADQUE2913"></a><div class="props_rev_3"><a id="GUID-C3D00EB6-3884-41A8-A70B-EC901D08C7A9" name="GUID-C3D00EB6-3884-41A8-A70B-EC901D08C7A9"></a><h4 id="ADQUE-GUID-C3D00EB6-3884-41A8-A70B-EC901D08C7A9" class="sect4"><span class="enumeration_section">11.5.7 </span>TopicBrowser
                  </h4>
                  <div>
                     <p>A client uses a <code class="codeph">TopicBrowser</code> to view messages on a topic without removing them. The browser method returns a <code class="codeph">java.util.Enumeration</code> that is used to scan topic messages. Only durable subscribers are allowed to create a <code class="codeph">TopicBrowser</code>. The first call to <code class="codeph">nextElement</code> gets a snapshot of the topic. 
                     </p>
                     <p>A <code class="codeph">TopicBrowser</code> can optionally lock messages as it is scanning them. This is similar to a <code class="codeph">SELECT</code>... <code class="codeph">for</code> <code class="codeph">UPDATE</code> command on the message. This prevents other consumers from removing the message while it is being scanned.
                     </p>
                     <p>A <code class="codeph">TopicBrowser</code> can be created with a <code class="codeph">messageSelector</code>. This allows the client to restrict messages delivered to the browser to those that match the selector.
                     </p>
                     <p><code class="codeph">TopicBrowser</code> supports a purge feature. This allows a client using a <code class="codeph">TopicBrowser</code> to discard all messages that have been seen during the current browse operation on the topic. A purge is equivalent to a destructive receive of all of the seen messages (as if performed using a <code class="codeph">TopicSubscriber</code>).
                     </p>
                     <p>For a purge, a message is considered seen if it has been returned to the client using a call to the <code class="codeph">nextElement()</code> operation on the <code class="codeph">java.lang.Enumeration</code> for the <code class="codeph">TopicBrowser</code>. Messages that have not yet been seen by the client are not discarded during a purge. A purge operation can be performed multiple times on the same <code class="codeph">TopicBrowser</code>.
                     </p>
                     <p>The effect of a purge becomes stable when the JMS <code class="codeph">Session</code> used to create the <code class="codeph">TopicBrowser</code> is committed. If the operations on the session are rolled back, then the effects of the purge operation are also undone.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C3D00EB6-3884-41A8-A70B-EC901D08C7A9__GUID-D30348FC-9B07-42CB-A0F7-0B30CB7A67EC">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="jms-publish-subscribe.html#GUID-B5A94557-8D39-4C3E-9D76-E78BA526E440">Creating a TopicBrowser for Standard JMS Messages</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="jms-publish-subscribe.html#GUID-95BE7FA2-76E1-40CD-90BB-0E96D6E39F54">Creating a TopicBrowser for Standard JMS Messages_ Locking Messages</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="jms-publish-subscribe.html#GUID-073E8D0D-703B-4941-869A-7AA8C9F4CCC1">Browsing Messages Using a TopicBrowser</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADQUE2914"></a><div class="props_rev_3"><a id="GUID-B81578CB-EB0A-4386-BC61-9865A600B65C" name="GUID-B81578CB-EB0A-4386-BC61-9865A600B65C"></a><h4 id="ADQUE-GUID-B81578CB-EB0A-4386-BC61-9865A600B65C" class="sect4"><span class="enumeration_section">11.5.8 </span>Setting Up JMS Publish/Subscribe Operations
                  </h4>
                  <div>
                     <div class="section">
                        <p>Follow these steps to use the publish/subscribe model of communication in JMS: </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Set up one or more topics to hold messages. These topics represent an area or subject of interest. For example, a topic can represent billed orders. </span></li>
                        <li class="stepexpand"><span>Enable enqueue/dequeue on the topic using the <code class="codeph">start</code> call in <code class="codeph">AQjmsDestination</code>.</span></li>
                        <li class="stepexpand"><span>Create a set of durable subscribers. Each subscriber can specify a <code class="codeph">messageSelector</code> that selects the messages that the subscriber wishes to receive. A null <code class="codeph">messageSelector</code> indicates that the subscriber wishes to receive all messages published on the topic. </span><div>
                              <p>Subscribers can be local or remote. Local subscribers are durable subscribers defined on the same topic on which the message is published. Remote subscribers are other topics, or recipients on other topics that are defined as subscribers to a particular queue. In order to use remote subscribers, you must set up propagation between the source and destination topics. Remote subscribers and propagation are Oracle extensions to JMS.</p>
                              <div class="infoboxnotealso" id="GUID-B81578CB-EB0A-4386-BC61-9865A600B65C__GUID-16155B4A-63A6-431D-8584-1EB1FED9BBFB">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="aq-administrative-interface.html#GUID-1BAEBA4C-441A-43FE-B822-14E9A6E33A0E" title="The propagation schedules defined for a queue can be changed or dropped at any time during the life of the queue.">Managing Propagations</a>"</span></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create <code class="codeph">TopicPublisher</code> objects using the <code class="codeph">createPublisher()</code> method in the publisher <code class="codeph">Session</code>. Messages are published using the <code class="codeph">publish</code> call. Messages can be published to all subscribers to the topic or to a specified subset of recipients on the topic. </span></li>
                        <li class="stepexpand"><span>Subscribers receive messages on the topic by using the <code class="codeph">receive</code> method. </span></li>
                        <li class="stepexpand"><span>Subscribers can also receive messages asynchronously by using message    listeners. </span><div>
                              <div class="infoboxnotealso" id="GUID-B81578CB-EB0A-4386-BC61-9865A600B65C__GUID-2E0E6E98-8160-47EF-8470-DD42EFC22C7C">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="aq-operations-using-pl-sql.html#GUID-B5606574-8C70-41AE-A362-A753033C3A70" title="This procedure specifies which queue or queues to monitor.">Listening to One or More Queues</a>"</span></p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADQUE2915"></a><div class="props_rev_3"><a id="GUID-14D8B416-BEC1-4C58-83C1-D6FD16B6961D" name="GUID-14D8B416-BEC1-4C58-83C1-D6FD16B6961D"></a><h3 id="ADQUE-GUID-14D8B416-BEC1-4C58-83C1-D6FD16B6961D" class="sect3"><span class="enumeration_section">11.6 </span>JMS Message Producer Features
               </h3>
               <div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="jms-introduction.html#GUID-9B57C751-DF54-41DA-B247-8B0B62BA3821">Priority and Ordering of Messages </a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-EB2FF63A-0C15-4065-8EA7-EFFAD3FC1624">Specifying a Message Delay</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-8CBF2F33-E4D3-4F01-94E4-D2D52EF20CDA">Specifying a Message Expiration </a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-C37EB8B1-0FE5-44CF-8531-DA7AAE3C7F25">Message Grouping </a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2916"></a><div class="props_rev_3"><a id="GUID-9B57C751-DF54-41DA-B247-8B0B62BA3821" name="GUID-9B57C751-DF54-41DA-B247-8B0B62BA3821"></a><h4 id="ADQUE-GUID-9B57C751-DF54-41DA-B247-8B0B62BA3821" class="sect4"><span class="enumeration_section">11.6.1 </span>Priority and Ordering of Messages 
                  </h4>
                  <div>
                     <p> Message ordering dictates the order in which messages are received from a queue or topic. The ordering method is specified when the queue table for the queue or topic is created. Currently, Oracle Database Advanced Queuing supports ordering on message priority and enqueue time, producing four possible ways of ordering:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>First-In, First-Out (FIFO)</p>
                           <p>If enqueue time was chosen as the ordering criteria, then messages are received in the order of the enqueue time. The enqueue time is assigned to the message by Oracle Database Advanced Queuing at message publish/send time. This is also the default ordering.</p>
                        </li>
                        <li>
                           <p>Priority Ordering</p>
                           <p>If priority ordering was chosen, then each message is assigned a priority. Priority can be specified as a message property at publish/send time by the <code class="codeph">MessageProducer</code>. The messages are received in the order of the priorities assigned.
                           </p>
                        </li>
                        <li>
                           <p>FIFO Priority</p>
                           <p>If FIFO priority ordering was chosen, then the topic/queue acts like a priority queue. If two messages are assigned the same priority, then they are received in the order of their enqueue time.</p>
                        </li>
                        <li>
                           <p>Enqueue Time Followed by Priority</p>
                           <p>Messages with the same enqueue time are received according to their priorities. If the ordering criteria of two message is the same, then the order they are received is indeterminate. However, Oracle Database Advanced Queuing does ensure that messages produced in one session with a particular ordering criteria are received in the order they were sent. </p>
                        </li>
                     </ul>
                     <p>All ordering schemes available for persistent messages are also available for buffered messages, but only within each message class. Ordering among persistent and buffered messages enqueued/published in the same session is not currently supported. </p>
                  </div>
               </div><a id="ADQUE2917"></a><div class="props_rev_3"><a id="GUID-EB2FF63A-0C15-4065-8EA7-EFFAD3FC1624" name="GUID-EB2FF63A-0C15-4065-8EA7-EFFAD3FC1624"></a><h4 id="ADQUE-GUID-EB2FF63A-0C15-4065-8EA7-EFFAD3FC1624" class="sect4"><span class="enumeration_section">11.6.2 </span>Specifying a Message Delay
                  </h4>
                  <div>
                     <p>Messages can be sent/published to a queue/topic with delay. The delay represents a time interval after which the message becomes available to the message consumer. A message specified with a delay is in a waiting state until the delay expires. Receiving by message identifier overrides the delay specification.</p>
                     <p>Delay is an Oracle Database Advanced Queuing extension to JMS message properties. It requires the Oracle Database Advanced Queuing background process queue monitor to be started. </p>
                  </div>
               </div><a id="ADQUE2918"></a><div class="props_rev_3"><a id="GUID-8CBF2F33-E4D3-4F01-94E4-D2D52EF20CDA" name="GUID-8CBF2F33-E4D3-4F01-94E4-D2D52EF20CDA"></a><h4 id="ADQUE-GUID-8CBF2F33-E4D3-4F01-94E4-D2D52EF20CDA" class="sect4"><span class="enumeration_section">11.6.3 </span>Specifying a Message Expiration 
                  </h4>
                  <div>
                     <p>Producers of messages can specify expiration limits, or <code class="codeph">TimeToLive</code> for messages. This defines the period of time the message is available for a Message Consumer.
                     </p>
                     <p><code class="codeph">TimeToLive</code> can be specified at send/publish time or using the set <code class="codeph">TimeToLive</code> method of a <code class="codeph">MessageProducer</code>, with the former overriding the latter. The Oracle Database Advanced Queuing background process queue monitor must be running to implement <code class="codeph">TimeToLive</code>. 
                     </p>
                  </div>
               </div><a id="ADQUE2919"></a><div class="props_rev_3"><a id="GUID-C37EB8B1-0FE5-44CF-8531-DA7AAE3C7F25" name="GUID-C37EB8B1-0FE5-44CF-8531-DA7AAE3C7F25"></a><h4 id="ADQUE-GUID-C37EB8B1-0FE5-44CF-8531-DA7AAE3C7F25" class="sect4"><span class="enumeration_section">11.6.4 </span>Message Grouping 
                  </h4>
                  <div>
                     <p>Messages belonging to a queue/topic can be grouped to form a set that can be consumed by only one consumer at a time. This requires the queue/topic be created in a queue table that is enabled for <a href="glossary.html#GUID-4956C594-EE49-498B-A9DD-7371518B4EBA"><span class="xrefglossterm">transactional</span></a> message grouping. All messages belonging to a group must be created in the same transaction, and all messages created in one transaction belong to the same group. 
                     </p>
                     <p>Message grouping is an Oracle Database Advanced Queuing extension to the JMS specification.</p>
                     <p>You can use this feature to divide a complex message into a linked series of simple messages. For example, an invoice directed to an invoices queue could be divided into a header message, followed by several messages representing details, followed by the trailer message. </p>
                     <p>Message grouping is also very useful if the message payload contains complex large objects such as images and video that can be segmented into smaller objects. </p>
                     <p>The priority, delay, and expiration properties for the messages in a group are determined solely by the message properties specified for the first message (head) of the group. Properties specified for subsequent messages in the group are ignored. </p>
                     <p>Message grouping is preserved during propagation. The destination topic must be enabled for transactional grouping. </p>
                     <div class="infoboxnotealso" id="GUID-C37EB8B1-0FE5-44CF-8531-DA7AAE3C7F25__GUID-0B44EA56-330D-4BA5-939E-464719739ADC">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="aq-introduction.html#GUID-AA8621D3-88E6-460A-8EC4-8EE6F53DE56A" title="This topic discusses the dequeue features Concurrent Dequeues, Dequeue Methods, Dequeue Modes, Dequeue an Array of Messages, Message States, Navigation of Messages in Dequeuing, Waiting for Messages, Retries with Delays, Optional Transaction Protection, and Exception Queues.">Dequeue Features</a>"</span> for a discussion of restrictions you must keep in mind if message grouping is to be preserved while dequeuing messages from a queue enabled for transactional grouping
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2920"></a><div class="props_rev_3"><a id="GUID-4A309A42-7301-4B28-8B0B-A59D75DF9ECE" name="GUID-4A309A42-7301-4B28-8B0B-A59D75DF9ECE"></a><h3 id="ADQUE-GUID-4A309A42-7301-4B28-8B0B-A59D75DF9ECE" class="sect3"><span class="enumeration_section">11.7 </span>JMS Message Consumer Features
               </h3>
               <div>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="jms-introduction.html#GUID-CC78CBF0-6A8B-4230-BE93-4C1BB778A08D">Receiving Messages </a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-B7DE3FC0-AE4B-4808-9B3E-5A7C3A8CF350">Message Navigation in Receive </a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-94202770-6C08-49B8-853B-8AED68954CB3">Browsing Messages</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-6375C108-8DD2-4969-A199-5BED02ABD9FF">Remove No Data</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-4961B293-410F-4449-A432-F8E9F569716A">Retry with Delay Interval</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-E697CC68-4C52-40E6-893B-6721E7BB767E">Asynchronously Receiving Messages Using MessageListener</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-0C224DAC-F3AD-4966-BB97-70EA9802C57E">Exception Queues</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2921"></a><div class="props_rev_3"><a id="GUID-CC78CBF0-6A8B-4230-BE93-4C1BB778A08D" name="GUID-CC78CBF0-6A8B-4230-BE93-4C1BB778A08D"></a><h4 id="ADQUE-GUID-CC78CBF0-6A8B-4230-BE93-4C1BB778A08D" class="sect4"><span class="enumeration_section">11.7.1 </span>Receiving Messages 
                  </h4>
                  <div>
                     <p>A JMS application can receive messages by creating a message consumer. Messages can be received synchronously using the <code class="codeph">receive</code> call or asynchronously using a message listener.
                     </p>
                     <p>There are three modes of receive:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Block until a message arrives for a consumer</p>
                        </li>
                        <li>
                           <p>Block for a maximum of the specified time</p>
                        </li>
                        <li>
                           <p>Nonblocking</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2922"></a><div class="props_rev_3"><a id="GUID-B7DE3FC0-AE4B-4808-9B3E-5A7C3A8CF350" name="GUID-B7DE3FC0-AE4B-4808-9B3E-5A7C3A8CF350"></a><h4 id="ADQUE-GUID-B7DE3FC0-AE4B-4808-9B3E-5A7C3A8CF350" class="sect4"><span class="enumeration_section">11.7.2 </span>Message Navigation in Receive 
                  </h4>
                  <div>
                     <p>If a consumer does not specify a navigation mode, then its first <code class="codeph">receive</code> in a session retrieves the first message in the queue or topic, its second <code class="codeph">receive</code> gets the next message, and so on. If a high priority message arrives for the consumer, then the consumer does not receive the message until it has cleared the messages that were already there before it.
                     </p>
                     <p>To provide the consumer better control in navigating the queue for its messages, Oracle Database Advanced Queuing offers several navigation modes as JMS extensions. These modes can be set at the <code class="codeph">TopicSubscriber</code>, <code class="codeph">QueueReceiver</code> or the <code class="codeph">TopicReceiver</code>.
                     </p>
                     <p>Two modes are available for ungrouped messages:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">FIRST_MESSAGE</code></p>
                           <p>This mode resets the position to the beginning of the queue. It is useful for priority ordered queues, because it allows the consumer to remove the message on the top of the queue.</p>
                        </li>
                        <li>
                           <p><code class="codeph">NEXT_MESSAGE</code></p>
                           <p>This mode gets whatever message follows the established position of the consumer. For example, a <code class="codeph">NEXT_MESSAGE</code> applied when the position is at the fourth message will get the fifth message in the queue. This is the default action.
                           </p>
                        </li>
                     </ul>
                     <p>Three modes are available for grouped messages:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">FIRST_MESSAGE</code></p>
                           <p>This mode resets the position to the beginning of the queue.</p>
                        </li>
                        <li>
                           <p><code class="codeph">NEXT_MESSAGE</code></p>
                           <p>This mode sets the position to the next message in the same transaction.</p>
                        </li>
                        <li>
                           <p><code class="codeph">NEXT_TRANSACTION</code></p>
                           <p>This mode sets the position to the first message in the next transaction.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-B7DE3FC0-AE4B-4808-9B3E-5A7C3A8CF350__GUID-A368DD9E-8F51-4644-98A3-934764B0BEED">
                        <p class="notep1">Note:</p>
                        <p>Sharded queues does not support the three preceding modes.</p>
                     </div>
                     <p>The transaction grouping property can be negated if messages are received in the following ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Receive by specifying a correlation identifier in the selector </p>
                        </li>
                        <li>
                           <p>Receive by specifying a message identifier in the selector</p>
                        </li>
                        <li>
                           <p>Committing before all the messages of a transaction group have been received</p>
                        </li>
                     </ul>
                     <p>If the consumer reaches the end of the queue while using the <code class="codeph">NEXT</code>_<code class="codeph">MESSAGE</code> or <code class="codeph">NEXT</code>_<code class="codeph">TRANSACTION</code> option, and you have specified a blocking <code class="codeph">receive()</code>, then the navigating position is automatically changed to the beginning of the queue.
                     </p>
                     <p>By default, a <code class="codeph">QueueReceiver</code>, <code class="codeph">TopicReceiver</code>, or <code class="codeph">TopicSubscriber</code> uses <code class="codeph">FIRST_MESSAGE</code> for the first receive call, and <code class="codeph">NEXT_MESSAGE</code> for subsequent <code class="codeph">receive()</code> calls.
                     </p>
                  </div>
               </div><a id="ADQUE2923"></a><div class="props_rev_3"><a id="GUID-94202770-6C08-49B8-853B-8AED68954CB3" name="GUID-94202770-6C08-49B8-853B-8AED68954CB3"></a><h4 id="ADQUE-GUID-94202770-6C08-49B8-853B-8AED68954CB3" class="sect4"><span class="enumeration_section">11.7.3 </span>Browsing Messages
                  </h4>
                  <div>
                     <p>Aside from the usual <code class="codeph">receive</code>, which allows the dequeuing client to delete the message from the queue, JMS provides an interface that allows the JMS client to browse its messages in the queue. A <code class="codeph">QueueBrowser</code> can be created using the <code class="codeph">createBrowser</code> method from <code class="codeph">QueueSession</code>.
                     </p>
                     <p>If a message is browsed, then it remains available for further processing. That does not necessarily mean that the message will remain available to the JMS session after it is browsed, because a <code class="codeph">receive</code> call from a concurrent session might remove it. 
                     </p>
                     <p>To prevent a viewed message from being removed by a concurrent JMS client, you can view the message in the locked mode. To do this, you must create a <code class="codeph">QueueBrowser</code> with the locked mode using the Oracle Database Advanced Queuing extension to the JMS interface. The lock on the message is released when the session performs a commit or a rollback.
                     </p>
                     <p>To remove a message viewed by a <code class="codeph">QueueBrowser</code>, the session must create a <code class="codeph">QueueReceiver</code> and use the <code class="codeph">JMSmesssageID</code> as the selector.
                     </p>
                  </div>
               </div><a id="ADQUE2924"></a><div class="props_rev_3"><a id="GUID-6375C108-8DD2-4969-A199-5BED02ABD9FF" name="GUID-6375C108-8DD2-4969-A199-5BED02ABD9FF"></a><h4 id="ADQUE-GUID-6375C108-8DD2-4969-A199-5BED02ABD9FF" class="sect4"><span class="enumeration_section">11.7.4 </span>Remove No Data
                  </h4>
                  <div>
                     <p>The consumer can remove a message from a queue or topic without retrieving it using the <code class="codeph">receiveNoData</code> call. This is useful when the application has already examined the message, perhaps using a <code class="codeph">QueueBrowser</code>. This mode allows the JMS client to avoid the overhead of retrieving a payload from the database, which can be substantial for a large message.
                     </p>
                  </div>
               </div><a id="ADQUE2925"></a><div class="props_rev_3"><a id="GUID-4961B293-410F-4449-A432-F8E9F569716A" name="GUID-4961B293-410F-4449-A432-F8E9F569716A"></a><h4 id="ADQUE-GUID-4961B293-410F-4449-A432-F8E9F569716A" class="sect4"><span class="enumeration_section">11.7.5 </span>Retry with Delay Interval
                  </h4>
                  <div>
                     <p>If a transaction receiving a message from a queue/topic fails, then it is regarded as an unsuccessful attempt to remove the message. Oracle Database Advanced Queuing records the number of failed attempts to remove the message in the message history.</p>
                     <p>An application can specify the maximum number of retries supported on messages at the queue/topic level. If the number of failed attempts to remove a message exceeds this maximum, then the message is moved to an exception queue.</p>
                     <p>Oracle Database Advanced Queuing allows users to specify a <code class="codeph">retry_delay</code> along with <code class="codeph">max_retries</code>. This means that a message that has undergone a failed attempt at retrieving remains visible in the queue for dequeue after <code class="codeph">retry_delay</code> interval. Until then it is in the <code class="codeph">WAITING</code> state. The Oracle Database Advanced Queuing background process time manager enforces the retry delay property.
                     </p>
                     <p>The maximum retries and retry delay are properties of the queue/topic. They can be set when the queue/topic is created or by using the alter method on the queue/topic. The default value for <code class="codeph">MAX_RETRIES</code> is <code class="codeph">5</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-4961B293-410F-4449-A432-F8E9F569716A__GUID-147EB27F-FCA1-4F04-AA92-3CDE7938A31C">
                        <p class="notep1">Note:</p>
                        <p>Sharded queues does not support retry delay.</p>
                     </div>
                  </div>
               </div><a id="ADQUE2926"></a><div class="props_rev_3"><a id="GUID-E697CC68-4C52-40E6-893B-6721E7BB767E" name="GUID-E697CC68-4C52-40E6-893B-6721E7BB767E"></a><h4 id="ADQUE-GUID-E697CC68-4C52-40E6-893B-6721E7BB767E" class="sect4"><span class="enumeration_section">11.7.6 </span>Asynchronously Receiving Messages Using MessageListener
                  </h4>
                  <div>
                     <p>The JMS client can receive messages asynchronously by setting the <code class="codeph">MessageListener</code> using the <code class="codeph">setMessageListener</code> method. 
                     </p>
                     <p>When a message arrives for the consumer, the <code class="codeph">onMessage</code> method of the message listener is invoked with the message. The message listener can commit or terminate the receipt of the message. The message listener does not receive messages if the JMS <code class="codeph">Connection</code> has been stopped. The <code class="codeph">receive</code> call must not be used to receive messages once the message listener has been set for the consumer.
                     </p>
                     <p>The JMS client can receive messages asynchronously for all consumers in the session by setting the <code class="codeph">MessageListener</code> at the session. No other mode for receiving messages must be used in the session once the message listener has been set.
                     </p>
                  </div>
               </div><a id="ADQUE2927"></a><div class="props_rev_3"><a id="GUID-0C224DAC-F3AD-4966-BB97-70EA9802C57E" name="GUID-0C224DAC-F3AD-4966-BB97-70EA9802C57E"></a><h4 id="ADQUE-GUID-0C224DAC-F3AD-4966-BB97-70EA9802C57E" class="sect4"><span class="enumeration_section">11.7.7 </span>Exception Queues
                  </h4>
                  <div>
                     <p>An exception queue is a repository for all expired or unserviceable messages.   Applications cannot directly enqueue into exception queues. However, an application that intends to handle these expired or unserviceable messages can receive/remove them from the exception queue.</p>
                     <p>To retrieve messages from exception queues, the JMS client must use the point-to-point interface. The exception queue for messages intended for a topic must be created in a queue table with multiple consumers enabled. Like any other queue, the exception queue must be enabled for receiving messages using the <code class="codeph">start</code> method in the <code class="codeph">AQOracleQueue</code> class. You get an exception if you try to enable it for enqueue. 
                     </p>
                     <p>Sharded queues now supports Exception Queues through the <code class="codeph">DBMS_AQADM.CREATE_EXCEPTION_QUEUE</code> API.
                     </p><pre class="pre codeblock"><code>  PROCEDURE CREATE_EXCEPTION_QUEUE(
    sharded_queue_name     IN VARCHAR2,
    exception_queue_name   IN VARCHAR2 DEFAULT NULL,
    multiple_consumers     IN BOOLEAN DEFAULT FALSE,
    storage_clause         IN VARCHAR2 DEFAULT NULL,
    sort_list              IN VARCHAR DEFAULT NULL,
    comment                IN VARCHAR2 DEFAULT NULL
    );</code></pre><p>The exception queue is an Oracle-specific message property called <code class="codeph">"JMS_OracleExcpQ"</code> that can be set with the message before sending/publishing it. If an exception queue is not specified, then the default exception queue is used. For non-sharded queues, the default exception queue is automatically created when the queue table is created and is named <code class="codeph">AQ$_</code><span class="italic"><code class="codeph">queue_table_name</code></span><code class="codeph">_E</code>. By default, no exception queue is created for sharded queues.
                     </p>
                     <p>Messages are moved to the exception queue under the following conditions: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The message was not dequeued within the specified <code class="codeph">timeToLive</code>.
                           </p>
                           <p>For messages intended for more than one subscriber, the message is moved to the exception queue if one or more of the intended recipients is not able to dequeue the message within the specified <code class="codeph">timeToLive</code>.
                           </p>
                        </li>
                        <li>
                           <p>The message was received successfully, but the application terminated the transaction that performed the <code class="codeph">receive</code> because of an error while processing the message. The message is returned to the queue/topic and is available for any applications that are waiting to receive messages. 
                           </p>
                           <p>A <code class="codeph">receive</code> is considered rolled back or undone if the application terminates the entire transaction, or if it rolls back to a savepoint that was taken before the <code class="codeph">receive</code>.
                           </p>
                           <p>Because this was a failed attempt to receive the message, its retry count is updated. If the retry count of the message exceeds the maximum value specified for the queue/topic where it resides, then it is moved to the exception queue. </p>
                           <p>If a message has multiple subscribers, then the message is moved to the exception queue only when all the recipients of the message have exceeded the retry limit.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-0C224DAC-F3AD-4966-BB97-70EA9802C57E__GUID-2F13AC5A-F925-411D-A14E-5713FB8CADE2">
                        <p class="notep1">Note:</p>
                        <p>If a dequeue transaction failed because the server process died (including <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">KILL</code> <code class="codeph">SESSION</code>) or <code class="codeph">SHUTDOWN</code> <code class="codeph">ABORT</code> on the instance, then <code class="codeph">RETRY_COUNT</code> is not incremented.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2928"></a><div class="props_rev_3"><a id="GUID-9453B830-327C-46F2-8F0F-BFD8897B8A5E" name="GUID-9453B830-327C-46F2-8F0F-BFD8897B8A5E"></a><h3 id="ADQUE-GUID-9453B830-327C-46F2-8F0F-BFD8897B8A5E" class="sect3"><span class="enumeration_section">11.8 </span>JMS Propagation
               </h3>
               <div>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="jms-introduction.html#GUID-35A7EA77-F91A-4526-BFAA-2C466FBEA4D7">RemoteSubscriber</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-E90592C1-949D-43F4-AAC8-701DD54E7BA2">Scheduling Propagation</a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-360ABCB4-C151-4092-AE60-CF23E3A85AB3">Enhanced Propagation Scheduling Capabilities </a></p>
                     </li>
                     <li>
                        <p><a href="jms-introduction.html#GUID-D506C8D1-91AC-4DA8-A5D7-0C37611459AF">Exception Handling During Propagation</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-9453B830-327C-46F2-8F0F-BFD8897B8A5E__GUID-6973CD18-F5F8-42A1-8224-B2B248400F24">
                     <p class="notep1">Note:</p>
                     <p>Sharded queues does not support RemoteSubscriber, Scheduling Propagation, Enhanced Propagation Scheduling Capabilities, and Exception Handling During Propagation.</p>
                  </div>
               </div><a id="ADQUE2929"></a><div class="props_rev_3"><a id="GUID-35A7EA77-F91A-4526-BFAA-2C466FBEA4D7" name="GUID-35A7EA77-F91A-4526-BFAA-2C466FBEA4D7"></a><h4 id="ADQUE-GUID-35A7EA77-F91A-4526-BFAA-2C466FBEA4D7" class="sect4"><span class="enumeration_section">11.8.1 </span>RemoteSubscriber
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing allows a subscriber at another database to subscribe to a topic. If a message published to the topic meets the criterion of the remote subscriber, then it is automatically propagated to the queue/topic at the remote database specified for the remote subscriber. Propagation is performed using database links and Oracle Net Services. This enables applications to communicate with each other without having to be connected to the same database.</p>
                     <p>There are two ways to implement remote subscribers:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">createRemoteSubscriber</code> method can be used to create a remote subscriber to/on the topic. The remote subscriber is specified as an instance of the class <code class="codeph">AQjmsAgent</code>.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">AQjmsAgent</code> has a name and an address. The address consists of a queue/topic and the database link to the database of the subscriber.
                           </p>
                        </li>
                     </ul>
                     <p>There are two kinds of remote subscribers:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The remote subscriber is a topic. </p>
                           <p>This occurs when no name is specified for the remote subscriber in the <code class="codeph">AQjmsAgent</code> object and the address is a topic. The message satisfying the subscriber's subscription is propagated to the remote topic. The propagated message is now available to all the subscriptions of the remote topic that it satisfies.
                           </p>
                        </li>
                        <li>
                           <p>A specific remote recipient is specified for the message. </p>
                           <p>The remote subscription can be for a particular consumer at the remote database. If the name of the remote recipient is specified (in the <code class="codeph">AQjmsAgent</code> object), then the message satisfying the subscription is propagated to the remote database for that recipient only. The recipient at the remote database uses the <code class="codeph">TopicReceiver</code> interface to retrieve its messages. The remote subscription can also be for a point-to-point queue.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2930"></a><div class="props_rev_3"><a id="GUID-E90592C1-949D-43F4-AAC8-701DD54E7BA2" name="GUID-E90592C1-949D-43F4-AAC8-701DD54E7BA2"></a><h4 id="ADQUE-GUID-E90592C1-949D-43F4-AAC8-701DD54E7BA2" class="sect4"><span class="enumeration_section">11.8.2 </span>Scheduling Propagation
                  </h4>
                  <div>
                     <p>Propagation must be scheduled using the <code class="codeph">schedule_propagation</code> method for every topic from which messages are propagated to target destination databases. 
                     </p>
                     <p>A schedule indicates the time frame during which messages can be propagated from the source topic. This time frame can depend on several factors such as network traffic, the load at the source database, the load at the destination database, and so on. The schedule therefore must be tailored for the specific source and destination. When a schedule is created, a job is automatically submitted to the <code class="codeph">job_queue</code> facility to handle propagation.
                     </p>
                     <p>The administrative calls for propagation scheduling provide great flexibility for managing the schedules. The duration or propagation window parameter of a schedule specifies the time frame during which propagation must take place. If the duration is unspecified, then the time frame is an infinite single window. If a window must be repeated periodically, then a finite duration is specified along with a <code class="codeph">next_time</code> function that defines the periodic interval between successive windows.
                     </p>
                     <p>The propagation schedules defined for a queue can be changed or dropped at any time during the life of the queue. In addition there are calls for temporarily disabling a schedule (instead of dropping the schedule) and enabling a disabled schedule. A schedule is active when messages are being propagated in that schedule. All the administrative calls can be made irrespective of whether the schedule is active or not. If a schedule is active, then it takes a few seconds for the calls to be executed. </p>
                     <p>Job queue processes must be started for propagation to take place. At least 2 job queue processes must be started. The database links to the destination database must also be valid. The source and destination topics of the propagation must be of the same message type. The remote topic must be enabled for enqueue. The user of the database link must also have enqueue privileges to the remote topic. </p>
                     <div class="infoboxnotealso" id="GUID-E90592C1-949D-43F4-AAC8-701DD54E7BA2__GUID-476D5910-4BD0-44C5-B450-F8DCED7CA1D0">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="jms-basic-operation.html#GUID-6AE9BA1A-2413-4656-855D-62470AD0328D">Scheduling a Propagation</a>"</span></p>
                     </div>
                  </div>
               </div><a id="ADQUE2931"></a><div class="props_rev_3"><a id="GUID-360ABCB4-C151-4092-AE60-CF23E3A85AB3" name="GUID-360ABCB4-C151-4092-AE60-CF23E3A85AB3"></a><h4 id="ADQUE-GUID-360ABCB4-C151-4092-AE60-CF23E3A85AB3" class="sect4"><span class="enumeration_section">11.8.3 </span>Enhanced Propagation Scheduling Capabilities 
                  </h4>
                  <div>
                     <p>Catalog views defined for propagation provide the following information about active schedules:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Name of the background process handling the schedule</p>
                        </li>
                        <li>
                           <p>SID (session and serial number) for the session handling the propagation</p>
                        </li>
                        <li>
                           <p>Instance handling a schedule (if using Oracle RAC)</p>
                        </li>
                        <li>
                           <p>Previous successful execution of a schedule</p>
                        </li>
                        <li>
                           <p>Next planned execution of a schedule</p>
                        </li>
                     </ul>
                     <p>The following propagation statistics are maintained for each schedule, providing useful information to queue administrators for tuning:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The total number of messages propagated in a schedule</p>
                        </li>
                        <li>
                           <p>Total number of bytes propagated in a schedule</p>
                        </li>
                        <li>
                           <p>Maximum number of messages propagated in a window</p>
                        </li>
                        <li>
                           <p>Maximum number of bytes propagated in a window</p>
                        </li>
                        <li>
                           <p>Average number of messages propagated in a window</p>
                        </li>
                        <li>
                           <p>Average size of propagated messages </p>
                        </li>
                        <li>
                           <p>Average time to propagated a message</p>
                        </li>
                     </ul>
                     <p>Propagation has built-in support for handling failures and reporting errors. For example, if the database link specified is invalid, or if the remote database is unavailable, or if the remote topic/queue is not enabled for enqueuing, then the appropriate error message is reported. Propagation uses an exponential backoff scheme for retrying propagation from a schedule that encountered a failure. If a schedule continuously encounters failures, then the first retry happens after 30 seconds, the second after 60 seconds, the third after 120 seconds and so forth. If the retry time is beyond the expiration time of the current window, then the next retry is attempted at the start time of the next window. A maximum of 16 retry attempts are made after which the schedule is automatically disabled. </p>
                     <div class="infoboxnote" id="GUID-360ABCB4-C151-4092-AE60-CF23E3A85AB3__GUID-A76E781A-C9B6-4EBE-9DDA-02BAA8E773C1">
                        <p class="notep1">Note:</p>
                        <p>Once a retry attempt slips to the next propagation window, it will always do so; the exponential backoff scheme no longer governs retry scheduling. If the date function specified in the <code class="codeph">next_time</code> parameter of <code class="codeph">DBMS_AQADM.SCHEDULE_PROPAGATION()</code> results in a short interval between windows, then the number of unsuccessful retry attempts can quickly reach 16, disabling the schedule.
                        </p>
                     </div>
                     <p>When a schedule is disabled automatically due to failures, the relevant information is written into the alert log. It is possible to check at any time if there were failures encountered by a schedule and if so how many successive failures were encountered, the error message indicating the cause for the failure and the time at which the last failure was encountered. By examining this information, an administrator can fix the failure and enable the schedule. </p>
                     <p>If propagation is successful during a retry, then the number of failures is reset to 0.</p>
                     <p>Propagation has built-in support for Oracle Real Application Clusters and is transparent to the user and the administrator. The job that handles propagation is submitted to the same instance as the owner of the queue table where the source topic resides. If at any time there is a failure at an instance and the queue table that stores the topic is migrated to a different instance, then the propagation job is also automatically migrated to the new instance. This minimizes the pinging between instances and thus offers better performance. Propagation has been designed to handle any number of concurrent schedules.</p>
                     <p>The number of <code class="codeph">job_queue_processes</code> is limited to a maximum of 1000 and some of these can be used to handle jobs unrelated to propagation. Hence, propagation has built in support for multitasking and load balancing. The propagation algorithms are designed such that multiple schedules can be handled by a single snapshot (<code class="codeph">job_queue</code>) process. The propagation load on a <code class="codeph">job_queue</code> processes can be skewed based on the arrival rate of messages in the different source topics. If one process is overburdened with several active schedules while another is less loaded with many passive schedules, then propagation automatically redistributes the schedules among the processes such that they are loaded uniformly. 
                     </p>
                  </div>
               </div><a id="ADQUE2932"></a><div class="props_rev_3"><a id="GUID-D506C8D1-91AC-4DA8-A5D7-0C37611459AF" name="GUID-D506C8D1-91AC-4DA8-A5D7-0C37611459AF"></a><h4 id="ADQUE-GUID-D506C8D1-91AC-4DA8-A5D7-0C37611459AF" class="sect4"><span class="enumeration_section">11.8.4 </span>Exception Handling During Propagation
                  </h4>
                  <div>
                     <p>When a system error such as a network failure occurs, Oracle Database Advanced Queuing continues to attempt to propagate messages using an exponential back-off algorithm. In some situations that indicate application errors in queue-to-dblink propagations, Oracle Database Advanced Queuing marks messages as <code class="codeph">UNDELIVERABLE</code> and logs a message in <code class="codeph">alert.log</code>. Examples of such errors are when the remote queue does not exist or when there is a type mismatch between the source queue and the remote queue. The trace files in the <code class="codeph">background_dump_dest</code> directory can provide additional information about the error.
                     </p>
                     <p>When a new job queue process starts, it clears the mismatched type errors so the types can be reverified. If you have capped the number of job queue processes and propagation remains busy, then you might not want to wait for the job queue process to terminate and restart. Queue types can be reverified at any time using <code class="codeph">DBMS_AQADM.VERIFY_QUEUE_TYPES</code>. 
                     </p>
                     <div class="infoboxnote" id="GUID-D506C8D1-91AC-4DA8-A5D7-0C37611459AF__GUID-D66FAF3A-1233-4B87-97B3-1A61C3C4EA13">
                        <p class="notep1">Note:</p>
                        <p>When a type mismatch is detected in queue-to-queue propagation, propagation stops and throws an error. In such situations you must query the <code class="codeph">DBA_SCHEDULES</code> view to determine the last error that occurred during propagation to a particular destination. The message is not marked as <code class="codeph">UNDELIVERABLE</code>.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2933"></a><div class="props_rev_3"><a id="GUID-B91F9B8D-0600-47AC-ABE2-F984676B5DFB" name="GUID-B91F9B8D-0600-47AC-ABE2-F984676B5DFB"></a><h3 id="ADQUE-GUID-B91F9B8D-0600-47AC-ABE2-F984676B5DFB" class="sect3"><span class="enumeration_section">11.9 </span>Message Transformation with JMS AQ
               </h3>
               <div>
                  <p>A <a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">transformation</span></a> can be defined to map messages of one format to another. Transformations are useful when applications that use different formats to represent the same information must be integrated. Transformations can be SQL expressions and PL/SQL functions. Message transformation is an Oracle Database Advanced Queuing extension to the standard JMS interface.
                  </p>
                  <p>The transformations can be created using the <code class="codeph">DBMS_TRANSFORM.create_transformation</code> procedure. Transformation can be specified for the following operations:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Sending a message to a queue or topic</p>
                     </li>
                     <li>
                        <p>Receiving a message from a queue or topic</p>
                     </li>
                     <li>
                        <p>Creating a <code class="codeph">TopicSubscriber</code></p>
                     </li>
                     <li>
                        <p>Creating a <code class="codeph">RemoteSubscriber</code>. This enables propagation of messages between topics of different formats.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-B91F9B8D-0600-47AC-ABE2-F984676B5DFB__GUID-AD3C4234-D802-42FF-B89D-D21B5EE57A1E">
                     <p class="notep1">Note:</p>
                     <p>JMS Sharded Queues does not support message transformation.</p>
                  </div>
               </div>
            </div><a id="ADQUE3688"></a><div class="props_rev_3"><a id="GUID-3C01DF53-88AE-4A33-986A-5C259230491F" name="GUID-3C01DF53-88AE-4A33-986A-5C259230491F"></a><h3 id="ADQUE-GUID-3C01DF53-88AE-4A33-986A-5C259230491F" class="sect3"><span class="enumeration_section">11.10 </span>JMS Streaming
               </h3>
               <div>
                  <p>AQ JMS supports streaming with enqueue and dequeue for sharded queues through <code class="codeph">AQjmsBytesMessage</code> and <code class="codeph">AQjmsStreamMessage</code> for applications to send and receive large message data or payload.
                  </p>
                  <p>JMS streaming reduces the memory requirement when dealing with large messages, by dividing the message payload into small chunks rather than sending or receiving a large contiguous array of bytes. As JMS standard does not have any streaming mechanism, AQ JMS will provide proprietary interfaces to expose AQ streaming enqueue and dequeue features. This allows users to easily use an existing java input output stream to send and receive message data or payload.</p>
                  <p>In order to allow the existing applications to work without any changes on upgrading database to RDBMS 12.2, the streaming APIs will be disabled by default.</p>
                  <p>The client application can enable JMS Streaming by using the system property <code class="codeph">oracle.jms.useJmsStreaming</code> set to <code class="codeph">true</code>.
                  </p>
                  <div class="infoboxnote" id="GUID-3C01DF53-88AE-4A33-986A-5C259230491F__GUID-2C0BC6CA-07E2-4402-AFC6-7B48E0527BE7">
                     <p class="notep1">Note:</p>
                     <p>JMS Streaming is supported only for thin drivers.</p>
                  </div>
               </div><a id="ADQUE3689"></a><div class="props_rev_3"><a id="GUID-4920395C-1DD7-41DB-92BA-13273513DEDA" name="GUID-4920395C-1DD7-41DB-92BA-13273513DEDA"></a><h4 id="ADQUE-GUID-4920395C-1DD7-41DB-92BA-13273513DEDA" class="sect4"><span class="enumeration_section">11.10.1 </span>JMS Streaming with Enqueue
                  </h4>
                  <div>
                     <p>AQ JMS provides the new API <code class="codeph">setInputStream(java.io.InputStream)</code> in <code class="codeph">AQjmsBytesMessage</code> and <code class="codeph">AQjmsStreamMessage</code>, to set an input stream for message data. 
                     </p><pre class="oac_no_warn" dir="ltr">    /**
     * @param inputStream - InputStream to read the message payload
     * @throws JMSException - if the JMS provided fails to read the payload due to
     *                        some internal error
     */
    public void setInputStream(InputStream inputStream) throws JMSException
</pre><p>The following code snippet creates a message of type <code class="codeph">AQjmsBytesMessage</code> and sets a <code class="codeph">FileInputStream</code> for the message data. 
                     </p><pre class="oac_no_warn" dir="ltr">    Session session = connection.createSession(false, Session.CLIENT_ACKNOWLEDGE);
    Destination destination = session.createQueue("queueName");
    MessageProducer producer = session.createProducer(destination);
 
     AQjmsBytesMessage bytesMessage = (AQjmsBytesMessage)session.createBytesMessage();
     InputStream input = new FileInputStream("somefile.data");
     bytesMessage.setInputStream(input);
     producer.send(bytesMessage);
</pre><div class="infoboxnote" id="GUID-4920395C-1DD7-41DB-92BA-13273513DEDA__GUID-05D4169F-5852-4060-AFD9-96BB512F10E8">
                        <p class="notep1">Note:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The methods in <code class="codeph">BytesMessage</code> and <code class="codeph">StreamMessage</code> are based on the methods found in <code class="codeph">java.io.DataInputStream</code> and <code class="codeph">java.io.DataOutputStream</code>, and hence, meaningful conversion of various <code class="codeph">read*()</code> and <code class="codeph">write*() </code>methods is not possible with streaming. The following scenarios will result in an exception:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">bytesMessage.setInputStream(input);</code></p>
                                    <p><code class="codeph">bytesMessage.writeInt(99);</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">bytesMessage.writeInt(99);</code></p>
                                    <p><code class="codeph">bytesMessage.setInputStream(input);</code></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>As with normal enqueue operation, the enqueue with streaming is going to be a synchronous one and we will return the control to the client only after the enqueue is complete.</p>
                           </li>
                           <li>
                              <p>Streaming will be used with enqueue only when these APIs are explicitly used by the client. AQ JMS will not use streaming with enqueue with the normal enqueue, irrespective of the size of the message data.</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADQUE3690"></a><div class="props_rev_3"><a id="GUID-887FA744-B586-4EB8-87FC-E49F9B59E961" name="GUID-887FA744-B586-4EB8-87FC-E49F9B59E961"></a><h4 id="ADQUE-GUID-887FA744-B586-4EB8-87FC-E49F9B59E961" class="sect4"><span class="enumeration_section">11.10.2 </span>JMS Streaming with Dequeue
                  </h4>
                  <div>
                     <p>The dequeue operation with streaming is achieved in two steps. The server decides whether to stream the message body or not based on the size of the message body. The default threshold limit is 10 MB. So when the message body is greater than 10MB and streaming is enabled by the client using the system property oracle.jms.useJmsStreaming, server will use streaming with dequeue.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>This is the normal dequeue process where a client calls the <code class="codeph">receive()</code> method.
                           </p><pre class="oac_no_warn" dir="ltr">Destination destination = session.createQueue ("queueName");             
AQjmsConsumer consumer = (AQjmsConsumer) session.createConsumer(destination);             
Message message = consumer.receive(10000);
</pre></li>
                        <li>
                           <p>When the client receives the message without the payload, client can figure out whether the streaming is used for dequeue by calling <code class="codeph">isLargeBody()</code> on the received message.
                           </p><pre class="oac_no_warn" dir="ltr">  /**
   * This method can be used by the client applications to check whether the message
   * contains large messaege body and hence requires streaming with dequeue.
   * 
   * @return true when the message body is large and server decides to stream
   *         the payload with dequeue
   */
  public boolean isLargeBody() 
</pre><p>A value of true returned by <code class="codeph">isLargeBody()</code> indicates streaming with dequeue. When the dequeue uses streaming, AQ JMS will populate the length of the message body properly for <code class="codeph">AQjmsStreamMessage</code> along with <code class="codeph">AQjmsBytesMessage</code>. So the client application can call the <code class="codeph">getBodyLength() </code>on the message to determine the size of the payload. 
                           </p><pre class="oac_no_warn" dir="ltr"> public long getBodyLength()
</pre></li>
                     </ul>
                     <p>Once client has the understanding about the streaming with dequeue, the message data can be fetched by using one of the following APIs on the received message.</p>
                     <p>The client application can use on the following APIs available in <code class="codeph">AQjmsBytesMessage</code> and <code class="codeph">AQjmsStreamMessage</code> to receive the message data.
                     </p><pre class="oac_no_warn" dir="ltr"> /**
     * Writes the message body to the OutputStream specified.
     * 
     * @param outputStream - the OutputStream to which message body can be written
     * @return the OutputStream containing the message body.
     * @throws JMSException - if the JMS provided fails to receive the message body 
     *                        due to some internal error
     */
    public OutputStream getBody(OutputStream outputStream) throws JMSException
 
    /**
     * Writes the message body to the OutputStream specified, with chunkSize bytes 
     * written at a time.
     * 
     * @param outputStream - the OutputStream to which message body can be written
     * @param chunkSize - the number of bytes to be written at a time, default value 
     *                    8192 (ie. 8KB)
     * @return the OutputStream containing the message body.
     * @throws JMSException - if the JMS provided fails to receive the message body 
     *                        due to some internal error
     */
    public OutputStream getBody(OutputStream outputStream, int chunkSize)throws JMSException
    
 
    /**
     * Writes the message body to the OutputStream specified. This method waits until 
     * the message body is written completely to the OutputStream or the timeout expires.
     * 
     * A timeout of zero never expires, and a timeout of negative value is ignored.
     * 
     * @param outputStream - the OutputStream to which message body can be written
     * @param timeout - the timeout value (in milliseconds)
     * @return the OutputStream containing the message body.
     * @throws JMSException - if the JMS provided fails to receive the message body 
     *                        due to some internal error
     */   
    public OutputStream getBody(OutputStream outputStream, long timeout) throws JMSException 
 
 
    /**
     * Writes the message body to the OutputStream specified, chunkSize bytes at a time. 
     * This method waits until the message body is written completely to the OutputStream
     * or the timeout expires.
     * 
     * A timeout of zero never expires, and a timeout of negative value is ignored.
     * 
     * @param outputStream - the OutputStream to which message body can be written
     * @param chunkSize - the number of bytes to be written at a time, 
     *                    default value 8192 (ie. 8KB)
     * @param timeout - the timeout value (in milliseconds)
     * @return the OutputStream containing the message body.
     * @throws JMSException - if the JMS provided fails to receive the message body 
     *                        due to some internal error
     */   
    public OutputStream getBody(OutputStream outputStream, int chunkSize, long timeout) throws JMSException
</pre><p>The following code snippet checks whether streaming is used with dequeue and the payload received will be written to a <code class="codeph">FileOutputStream</code>.
                     </p><pre class="oac_no_warn" dir="ltr">     if (message instanceof BytesMessage &amp;&amp; (AQjmsBytesMessage)message.isLargeBody()){
         // optional : check the size of the payload and take appropriate action before 
         // receiving the payload.
          (AQjmsBytesMessage) message.getBody(new FileOutputStream(new File("â¦")));
     } else {
          // normal dequeue
     }
</pre><p>In general, when both the steps are complete, the message is considered as consumed completely. The AQ server keeps a lock on the message after Step 1 which will be released only after Step 2. </p>
                     <p>Considering the possible issues with partially consumed messages by the message consumers, we have restricted the Streaming APIs for the session with acknowledgement modes <code class="codeph">CLIENT_ACKNOWLEDGE</code> and <code class="codeph">SESSION_TRANSACTED</code>.
                     </p>
                     <p>So all the messages including partially consumed messages are considered fully consumed when:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">message.acknowledge()</code> is called with <code class="codeph">CLIENT_ACKNOWLEDGE</code> session.
                           </p>
                        </li>
                        <li>
                           <p>Session's <code class="codeph">commit()</code> is called in a transacted session.
                           </p>
                        </li>
                     </ul>
                     <p>As in normal case, session <code class="codeph">rollback()</code>, rolls back the messages received in that session.
                     </p>
                     <p>The JMS Streaming is available with the following restrictions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Streaming is disabled by default, and can be enabled by the client application using the system property <code class="codeph">oracle.jms.useJmsStreaming</code></p>
                        </li>
                        <li>
                           <p>Dequeue uses streaming when the size of the message data is more than the threshold value. The default threshold value is 10 MB.</p>
                        </li>
                        <li>
                           <p>Streaming support is available with <code class="codeph">AQjmsBytesMessage</code> and <code class="codeph">AQjmsStreamMessage</code></p>
                        </li>
                        <li>
                           <p>Streaming support is available only for sharded queues</p>
                        </li>
                        <li>
                           <p>Streaming support is available only with thin drivers</p>
                        </li>
                        <li>
                           <p>Streaming support is not available when the message producer uses the message delivery mode as <code class="codeph">NON_PERSISTENT</code></p>
                        </li>
                        <li>
                           <p>Streaming is not supported with message listener. So when a MessageConsumer has a message listener set and if the message data crosses threshold limit, internally we will use the normal dequeue.</p>
                        </li>
                        <li>
                           <p>Streaming support is available with Sessions using acknowledgement modes <code class="codeph">CLIENT_ACKNOWLEDGE</code> and <code class="codeph">SESSION_TRANSACTED</code>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADQUE2934"></a><div class="props_rev_2"><a id="GUID-7D8D9257-574D-4378-B580-DA656D2F0511" name="GUID-7D8D9257-574D-4378-B580-DA656D2F0511"></a><h3 id="ADQUE-GUID-7D8D9257-574D-4378-B580-DA656D2F0511" class="sect3"><span class="enumeration_section">11.11 </span>Java EE Compliance
               </h3>
               <div>
                  <p>Oracle JMS conforms to the Oracle Sun Microsystems JMS 1.1 standard. You can define the Java EE compliance mode for an <a href="glossary.html#GUID-9885B911-8AC1-49F3-922E-1F8D64C4501D"><span class="xrefglossterm">Oracle Java Message Service</span></a> (Oracle JMS) client at runtime. For compliance, set the Java property<code class="codeph"> oracle.jms.j2eeCompliant</code> to <code class="codeph">TRUE</code> as a command line option. For noncompliance, do nothing. <code class="codeph">FALSE</code> is the default value.
                  </p>
                  <p>Features in Oracle Database Advanced Queuing that support Java EE compliance (and are also available in the noncompliant mode) include:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Nontransactional sessions</p>
                     </li>
                     <li>
                        <p>Durable subscribers</p>
                     </li>
                     <li>
                        <p>Temporary queues and topics</p>
                     </li>
                     <li>
                        <p>Nonpersistent delivery mode</p>
                     </li>
                     <li>
                        <p>Multiple JMS messages types on a single JMS <a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">queue</span></a> or topic (using Oracle Database Advanced Queuing queues of the <code class="codeph">AQ$_JMS_MESSAGE</code> type)
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">noLocal</code> option for durable subscribers
                        </p>
                     </li>
                     <li>
                        <p>JMS Sharded Queues have native JMS support and conform to Java EE compliance</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7D8D9257-574D-4378-B580-DA656D2F0511__GUID-7C96F334-84F3-461D-A0B7-D59490679665">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">Java Message Service Specification</span>, version 1.1, March 18, 2002, Sun Microsystems, Inc.
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="jms-introduction.html#GUID-ECCD89DD-CDB3-4455-AA9E-28ABA53488FC">JMS Message Headers</a>"</span> for information on how the Java property <code class="codeph">oracle.jms.j2eeCompliant</code> affects JMSPriority and JMSExpiration
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="jms-introduction.html#GUID-4E251F18-4AC4-46E3-A6A2-F9A89BE978B5">DurableSubscriber</a>"</span> for information on how the Java property <code class="codeph">oracle.jms.j2eeCompliant</code> affects durable subscribers
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
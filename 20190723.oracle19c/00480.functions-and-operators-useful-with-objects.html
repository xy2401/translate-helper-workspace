<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Functions and Operators Useful with Objects</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Object-Relational Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Object-Relational Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96436-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="inheritance-in-sql-object-types.html" title="Previous" type="text/html">
      <link rel="next" href="using-pl-sql-with--object-types.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADOBJ">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="inheritance-in-sql-object-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-pl-sql-with--object-types.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Object-Relational Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="basic-components-of-oracle-objects.html" property="item" typeof="WebPage"><span property="name"> Basic Components of Oracle Objects</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Functions and Operators Useful with Objects</li>
            </ol>
            <a id="GUID-502C8BA5-8B2F-4E57-B526-0C857DD3FA77" name="GUID-502C8BA5-8B2F-4E57-B526-0C857DD3FA77"></a><a id="ADOBJ00206"></a>
            
            <h2 id="ADOBJ-GUID-502C8BA5-8B2F-4E57-B526-0C857DD3FA77" class="sect2"><span class="enumeration_section">2.4 </span>Functions and Operators Useful with Objects
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Several functions and operators are particularly useful for working with objects and references to objects.</p>
               <p>Examples are given throughout this book.</p>
               <div class="infoboxnote" id="GUID-502C8BA5-8B2F-4E57-B526-0C857DD3FA77__GUID-B49B7FE5-5EAB-494D-B74C-92D9FA6AB6AF">
                  <p class="notep1">Note:</p>
                  <p>In PL/SQL the <code class="codeph">VALUE</code>, <code class="codeph">REF</code> and <code class="codeph">DEREF</code> functions can appear only in a SQL statement. For information about SQL functions, see <a href="../sqlrf/Functions.html#SQLRF006" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a>.
                  </p>
               </div>
               <p>Topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-6CD85D07-1E06-4E42-A582-68F478040A39">CAST</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-19FD7229-FEC2-4723-B31E-EA94344441E3">CURSOR</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3">DEREF</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1">IS OF type </a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-770A35CB-BA31-4535-B086-F46FF8F8750D">REF</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE">SYS_TYPEID</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1">TABLE()</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-5C6151A6-13C5-42A6-8182-77FC7957C8B5">TREAT</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117">VALUE</a></p>
                  </li>
               </ul>
            </div><a id="ADOBJ7153"></a><a id="ADOBJ7152"></a><div class="props_rev_3"><a id="GUID-6CD85D07-1E06-4E42-A582-68F478040A39" name="GUID-6CD85D07-1E06-4E42-A582-68F478040A39"></a><h3 id="ADOBJ-GUID-6CD85D07-1E06-4E42-A582-68F478040A39" class="sect3"><span class="enumeration_section">2.4.1 </span>CAST
               </h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">CAST</code> converts one built-in data type or collection-typed value into another built-in data type or collection-typed value. For example:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-6CD85D07-1E06-4E42-A582-68F478040A39__GUID-5CDD6751-C300-451C-9C0C-93559269A6F7">
                     <p class="titleinexample">Example 2-33 Using the CAST Function</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE person_list_typ AS TABLE OF person_typ;/

SELECT <span class="bold">CAST</span>(COLLECT(contact) AS person_list_typ) 
  FROM contacts;
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-6CD85D07-1E06-4E42-A582-68F478040A39__GUID-E25A1308-B262-41F8-8CCD-C8819BB55E7E">
                        <p class="notep1">See Also:</p>
                        <p>For more information about the SQL <code class="codeph">CAST</code> function, <a href="../sqlrf/CAST.html#SQLRF00613" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a>.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7154"></a><div class="props_rev_3"><a id="GUID-19FD7229-FEC2-4723-B31E-EA94344441E3" name="GUID-19FD7229-FEC2-4723-B31E-EA94344441E3"></a><h3 id="ADOBJ-GUID-19FD7229-FEC2-4723-B31E-EA94344441E3" class="sect3"><span class="enumeration_section">2.4.2 </span>CURSOR
               </h3>
               <div>
                  <div class="section">
                     <p>A <code class="codeph">CURSOR</code> expression returns a nested cursor. 
                     </p>
                     <p>The cursor form of expression is equivalent to the PL/SQL <code class="codeph">REF</code> <code class="codeph">CURSOR</code> and can be passed as a <code class="codeph">REF</code> <code class="codeph">CURSOR</code> argument to a function.
                     </p>
                     <div class="infoboxnotealso" id="GUID-19FD7229-FEC2-4723-B31E-EA94344441E3__GUID-9E3A7B9B-6326-4030-B1D7-E5473BF0BAA3">
                        <p class="notep1">See Also:</p>
                        <p>For more information about the SQL <code class="codeph">CURSOR</code> expression, see <a href="../sqlrf/Expressions.html#SQLRF004" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a>.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7156"></a><a id="ADOBJ7155"></a><div class="props_rev_3"><a id="GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3" name="GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3"></a><h3 id="ADOBJ-GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3" class="sect3"><span class="enumeration_section">2.4.3 </span>DEREF
               </h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">DEREF</code> function in a SQL statement returns the object instance corresponding to a <code class="codeph">REF</code>. 
                     </p>
                     <p>The object instance returned by <code class="codeph">DEREF</code> may be of the declared type of the <code class="codeph">REF</code> or any of its subtypes. 
                     </p>
                     <p>For example, the following statement returns <code class="codeph">person_typ</code> objects from the table <code class="codeph">contact_ref</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3__GUID-8700C626-8633-4276-A18D-CB16439892C3">
                     <p class="titleinexample">Example 2-34 Using the DEREF Function</p><pre class="oac_no_warn" dir="ltr">-- Using the DEREF Function example, not sample schema</pre><pre class="oac_no_warn" dir="ltr">SELECT DEREF(c.contact_ref), c.contact_date 
  FROM contacts_ref c;
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3__GUID-76806DB8-DB65-4007-A38B-5D7C051938BF">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="key-features-object-relational-model.html#GUID-27E79AFF-6360-410F-8900-19A16B1AD8EC" title="This example shows how to use the DEREF command to derefence a REF.">Dereferencing REFs</a>"</span></p>
                           </li>
                           <li>
                              <p></p>
                              <p>For more information about the SQL <code class="codeph">DEREF</code> function, see <a href="../sqlrf/DEREF.html#SQLRF00634" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7158"></a><a id="ADOBJ7157"></a><div class="props_rev_3"><a id="GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1" name="GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1"></a><h3 id="ADOBJ-GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1" class="sect3"><span class="enumeration_section">2.4.4 </span>IS OF <span class="italic">type</span> 
               </h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span> predicate tests object instances for the level of specialization of their type. 
                     </p>
                     <p>For example, the following query retrieves all student instances (including any subtypes of students) stored in the <code class="codeph">person_obj_table</code> table.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1__GUID-5E61AE5F-D346-4771-98F5-AD526BD6B3BA">
                     <p class="titleinexample">Example 2-35 Using the IS OF type Operator to Query Value of a Subtype</p><pre class="oac_no_warn" dir="ltr">-- Using the IS OF type Operator to query Value of a subtype </pre><pre class="oac_no_warn" dir="ltr">SELECT VALUE(p) 
  FROM person_obj_table p
WHERE VALUE(p) IS OF (student_typ);
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>For any object that is not of a specified subtype, or a subtype of a specified subtype, <code class="codeph">IS</code> <code class="codeph">OF</code> returns <code class="codeph">FALSE</code>. Subtypes of a specified subtype are just more specialized versions of the specified subtype. If you want to exclude such subtypes, you can use the <code class="codeph">ONLY</code> keyword. This keyword causes <code class="codeph">IS</code> <code class="codeph">OF</code> to return <code class="codeph">FALSE</code> for all types except the specified types. 
                     </p>
                     <p>In the following example, the statement tests objects in object table <code class="codeph">person_obj_table</code>, which contains persons, employees, and students, and returns <code class="codeph">REF</code>s just to objects of the two specified person subtypes <code class="codeph">employee_typ</code>, <code class="codeph">student_typ</code>, and their subtypes, if any:
                     </p><pre class="oac_no_warn" dir="ltr">-- Using the IS OF type Operator to query for multiple subtypes</pre><pre class="oac_no_warn" dir="ltr">SELECT REF(p) 
  FROM person_obj_table p
WHERE VALUE(p) IS OF (employee_typ, student_typ);
</pre><p>Here is a similar example in PL/SQL. The code does something if the person is an employee or student: </p><pre class="oac_no_warn" dir="ltr">-- Using the IS OF type Operator with PL/SQL </pre><pre class="oac_no_warn" dir="ltr">DECLARE 
  var person_typ; 
BEGIN 
  var := employee_typ(55, 'Jane Smith', '1-650-555-0144', 100, 'Jennifer Nelson');
  IF var IS OF (employee_typ, student_typ) THEN 
     DBMS_OUTPUT.PUT_LINE('Var is an employee_typ or student_typ object.');
  ELSE
     DBMS_OUTPUT.PUT_LINE('Var is not an employee_typ or student_typ object.');
  END IF;
END;
/
</pre><p>The following statement returns only students whose most specific or specialized type is <code class="codeph">student_typ</code>. If the table or view contains any objects of a subtype of <code class="codeph">student_typ</code>, such as <code class="codeph">part_time_student_typ</code>, these are excluded. The example uses the <code class="codeph">TREAT</code> function to convert objects that are students to <code class="codeph">student_typ</code> from the declared type of the view, <code class="codeph">person_typ</code>:
                     </p><pre class="oac_no_warn" dir="ltr">-- Using the IS OF type Operator to query for specific subtype only</pre><pre class="oac_no_warn" dir="ltr">SELECT TREAT(VALUE(p) AS student_typ)
  FROM person_obj_table p 
WHERE VALUE(p) IS OF(ONLY student_typ);
</pre><p>To test the type of the object that a <code class="codeph">REF</code> points to, you can use the <code class="codeph">DEREF</code> function to dereference the <code class="codeph">REF</code> before testing with the <code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span> predicate. 
                     </p>
                     <p>For example, if <code class="codeph">contact_ref</code> is declared to be <code class="codeph">REF</code> <code class="codeph">person_typ</code>, you can get just the rows for students as follows: 
                     </p><pre class="oac_no_warn" dir="ltr">-- Using the IS OF type Operator with DEREF </pre><pre class="oac_no_warn" dir="ltr">SELECT * 
  FROM contacts_ref
WHERE DEREF(contact_ref) IS OF (student_typ);
</pre><div class="infoboxnotealso" id="GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1__GUID-B71EEF63-B0F0-45DE-AEF5-51408F36CB21">
                        <p class="notep1">See Also:</p>
                        <p>For more information about the SQL <code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span> condition, see <a href="../sqlrf/Conditions.html#SQLRF005" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7160"></a><a id="ADOBJ7159"></a><div class="props_rev_3"><a id="GUID-770A35CB-BA31-4535-B086-F46FF8F8750D" name="GUID-770A35CB-BA31-4535-B086-F46FF8F8750D"></a><h3 id="ADOBJ-GUID-770A35CB-BA31-4535-B086-F46FF8F8750D" class="sect3"><span class="enumeration_section">2.4.5 </span>REF
               </h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">REF</code> function in a SQL statement takes as an argument a correlation name (or table alias) for an object table or view and returns a reference (a <code class="codeph">REF</code>) to an object instance from that table or view. 
                     </p>
                     <p>The <code class="codeph">REF</code> function may return references to objects of the declared type of the table, view, or any of its subtypes. For example, the following statement returns the references to all persons, including references to students and employees, whose <code class="codeph">idno</code> attribute is 12: 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-770A35CB-BA31-4535-B086-F46FF8F8750D__GUID-420913EE-8E36-427D-9EC4-B9A246FB2628">
                     <p class="titleinexample">Example 2-36 Using the REF Function</p><pre class="oac_no_warn" dir="ltr">-- Using the REF Function example, not sample schema</pre><pre class="oac_no_warn" dir="ltr">SELECT REF(p) 
  FROM person_obj_table p
  WHERE p.idno = 12;
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-770A35CB-BA31-4535-B086-F46FF8F8750D__GUID-FCBF3751-2F9A-4026-8C21-2174D5D16504">
                        <p class="notep1">See Also:</p>
                        <p>For more information about the SQL <code class="codeph">REF</code> function, see <a href="../sqlrf/REF.html#SQLRF00694" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7162"></a><a id="ADOBJ7161"></a><div class="props_rev_3"><a id="GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE" name="GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE"></a><h3 id="ADOBJ-GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE" class="sect3"><span class="enumeration_section">2.4.6 </span>SYS_TYPEID
               </h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">SYS_TYPEID</code> function can be used in a query to return the typeid (a hidden type) of the most specific type of the object instance passed as an argument. 
                     </p>
                     <p>The most specific type of an object instance is the type that the instance belongs to, that is, the farthest removed instance from the root type. For example, if Tim is a part-time student, he is also a student and a person, but his most specific type is part-time student.</p>
                     <p>The function returns the typeids from the hidden type-discriminant column that is associated with every substitutable column. The function returns a null typeid for a final, root type. </p>
                     <p>The syntax of the function is:</p>
                     <p><code class="codeph">SYS_TYPEID(object_type_value)</code></p>
                     <p>Function <code class="codeph">SYS_TYPEID</code> may be used only with arguments of an object type. Its primary purpose is to make it possible to build an index on a hidden type-discriminant column.
                     </p>
                     <p>All types that belong to a type hierarchy are assigned a non-null typeid that is unique within the type hierarchy. Types that do not belong to a type hierarchy have a null typeid. </p>
                     <p>Every type except a final root type belongs to a type hierarchy. A final root type has no types related to it by inheritance:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>It cannot have subtypes derived from it because it is final.</p>
                        </li>
                        <li>
                           <p>It is not itself derived from some other type because it is a root type, so it does not have any supertypes.</p>
                        </li>
                     </ul>
                     <p>For an example of <code class="codeph">SYS_TYPEID</code>, consider the substitutable object table <code class="codeph">person_obj_table</code>, of <code class="codeph">person_typ</code>. <code class="codeph">person_typ</code> is the root type of a hierarchy that has <code class="codeph">student_typ</code> as a subtype and <code class="codeph">part_time_student_typ</code> as a subtype of <code class="codeph">student_typ</code>. See <a href="inheritance-in-sql-object-types.html#GUID-FC96C63D-4DE4-4C4A-9C7D-A6E945644A0B__CHDJGIAG">Example 2-20</a>.
                     </p>
                     <p>The following query uses <code class="codeph">SYS_TYPEID</code>. It gets the <code class="codeph">name</code> attribute and <code class="codeph">typeid</code> of the object instances in the <code class="codeph">person_obj_table</code> table. Each of the instances is of a different type:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE__GUID-03929D02-6E2A-434D-81EC-956D07F6B9A8">
                     <p class="titleinexample">Example 2-37 Using the SYS_TYPEID Function</p><pre class="oac_no_warn" dir="ltr">-- Using the SYS_TYPEID Function example, not sample schema</pre><pre class="oac_no_warn" dir="ltr">SELECT name, SYS_TYPEID(VALUE(p)) typeid FROM person_obj_table p;
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE__GUID-33D1ED29-D0ED-4062-8624-E3CC242B4044">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For information about the type-discriminant and other hidden columns, see <span class="q">"<a href="storage-of-objects.html#GUID-349CF29A-7F51-4142-9724-90D5F9CDFD6D">Hidden Columns for Substitutable Columns and Object Tables</a>"</span> .
                              </p>
                           </li>
                           <li>
                              <p>For more information about the SQL <code class="codeph">SYS</code> <code class="codeph">TYPEID</code> function, see <a href="../sqlrf/REF.html#SQLRF00694" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7163"></a><div class="props_rev_3"><a id="GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1" name="GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1"></a><h3 id="ADOBJ-GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1" class="sect3"><span class="enumeration_section">2.4.7 </span>TABLE()
               </h3>
               <div>
                  <div class="section">
                     <p>Table functions are functions that produce a collection of rows, a nested table or a varray, that can be queried like a physical database table or assigned to a PL/SQL collection variable. </p>
                     <p>You can use a table function like the name of a database table, in the <code class="codeph">FROM</code> clause of a query, or like a column name in the <code class="codeph">SELECT</code> list of a query. 
                     </p>
                     <p>A table function can take a collection of rows as input. An input collection parameter can be either a collection type, such as a <code class="codeph">VARRAY</code> or a PL/SQL table, or a <code class="codeph">REF</code> <code class="codeph">CURSOR</code>.
                     </p>
                     <p>Use <code class="codeph">PIPELINED</code> to instruct Oracle Database to return the results of a table function iteratively. A table function returns a nested table or varray type. You query table functions by using the <code class="codeph">TABLE</code> keyword before the function name in the <code class="codeph">FROM</code> clause of the query.
                     </p>
                     <div class="infoboxnotealso" id="GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1__GUID-2A8356BF-FA66-43C7-B692-CFF05FD56499">
                        <p class="notep1">See Also:</p>
                        <p>For information on <code class="codeph">TABLE()</code> functions, see
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../addci/using-pipelined-and-parallel-table-functions.html#ADDCI2140" target="_blank"><span><cite>Oracle Database Data Cartridge Developer's Guide</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/plsql-language-elements.html#LNPLS013" target="_blank"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7164"></a><div class="props_rev_3"><a id="GUID-5C6151A6-13C5-42A6-8182-77FC7957C8B5" name="GUID-5C6151A6-13C5-42A6-8182-77FC7957C8B5"></a><h3 id="ADOBJ-GUID-5C6151A6-13C5-42A6-8182-77FC7957C8B5" class="sect3"><span class="enumeration_section">2.4.8 </span>TREAT
               </h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">TREAT</code> function does a runtime check to confirm that an expression can be operated on as if it were of a different specified type in the hierarchy, normally a subtype of the declared type of the expression. 
                     </p>
                     <p>In other words, the <code class="codeph">TREAT</code> function attempts to treat a supertype instance as a subtype instance, for example, to treat a person as a student. If the person is a student, then the person is returned as a student, with the additional attributes and methods that a student may have. If the person is not a student, <code class="codeph">TREAT</code> returns <code class="codeph">NULL</code> in SQL.
                     </p>
                     <p>The two main uses of <code class="codeph">TREAT</code> are:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>In narrowing assignments, to modify the type of an expression so that the expression can be assigned to a variable of a more specialized type in the hierarchy: that is, to set a supertype value into a subtype.</p>
                        </li>
                        <li>
                           <p>To access attributes or methods of a subtype of the declared type of a row or column.</p>
                           <p>A substitutable object table or column of type <code class="codeph">T</code> has a hidden column for every attribute of every subtype of <code class="codeph">T</code>. These hidden columns contain subtype attribute data, but you cannot list them with a <code class="codeph">DESCRIBE</code> statement. <code class="codeph">TREAT</code> enables you to access these columns.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADOBJ7166"></a><a id="ADOBJ7165"></a><div class="props_rev_3"><a id="GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399" name="GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399"></a><h4 id="ADOBJ-GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399" class="sect4"><span class="enumeration_section">2.4.8.1 </span>Using TREAT for Narrowing Assignments
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">TREAT</code> function is used for narrowing assignments, that is, assignments that set a supertype value into a subtype. For a comparison to widening assignments, see <span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-7C8C1750-6182-4351-B177-FDD398E55E70" title="In assignments of expressions of a collection type, the source and target must be of the same declared type.">Assignments Across Types</a>"</span>.
                        </p>
                        <p>In <a href="functions-and-operators-useful-with-objects.html#GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399__CHDGIGFA">Example 2-38</a>, <code class="codeph">TREAT</code> returns all (and only) <code class="codeph">student_typ</code> instances from <code class="codeph">person_obj_table</code> of type <code class="codeph">person_typ</code>, a supertype of <code class="codeph">student_typ</code>. The statement uses <code class="codeph">TREAT</code> to modify the type of <code class="codeph">p</code> from <code class="codeph">person_typ</code> to <code class="codeph">student_typ</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399__CHDGIGFA">
                        <p class="titleinexample">Example 2-38 Using the TREAT Function to Return a Specific Subtype in a Query</p><pre class="oac_no_warn" dir="ltr">-- Using the TREAT Function to Return a Specific Subtype in a Query example,</pre><pre class="oac_no_warn" dir="ltr">-- not sample schema</pre><pre class="oac_no_warn" dir="ltr">SELECT TREAT(VALUE(p) AS student_typ)
  FROM person_obj_table p;
</pre><p>For each <code class="codeph">p</code>, the <code class="codeph">TREAT</code> modification succeeds only if the most specific or specialized type of the value of <code class="codeph">p</code> is <code class="codeph">student_typ</code> or one of its subtypes. If <code class="codeph">p</code> is a person who is not a student, or if <code class="codeph">p</code> is <code class="codeph">NULL</code>, <code class="codeph">TREAT</code> returns <code class="codeph">NULL</code> in SQL or, in PL/SQL, raises an exception.
                        </p>
                        <p>You can also use <code class="codeph">TREAT</code> to modify the declared type of a <code class="codeph">REF</code> expression. For example:
                        </p><pre class="oac_no_warn" dir="ltr">-- Using the TREAT Function to modify declared type of a REF example,</pre><pre class="oac_no_warn" dir="ltr">-- not sample schema</pre><pre class="oac_no_warn" dir="ltr">SELECT TREAT(REF(p) AS REF student_typ)
  FROM person_obj_table p;
</pre><p>The previous example returns <code class="codeph">REF</code>s to all <code class="codeph">student_typ</code> instances. In SQL it returns <code class="codeph">NULL</code> <code class="codeph">REF</code>s for all person instances that are not students, and in PL/SQL it raises an exception.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7168"></a><a id="ADOBJ7167"></a><div class="props_rev_3"><a id="GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695" name="GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695"></a><h4 id="ADOBJ-GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695" class="sect4"><span class="enumeration_section">2.4.8.2 </span>Using the TREAT Function to Access Subtype Attributes or Methods
                  </h4>
                  <div>
                     <div class="section">
                        <p>Perhaps the most important use of <code class="codeph">TREAT</code> is to access attributes or methods of a subtype of a row or column's declared type. The following query retrieves the <code class="codeph">major</code> attribute of all persons, students and part-time students, who have this attribute. <code class="codeph">NULL</code> is returned for persons who are not students:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695__GUID-0AC13559-A9CE-41B0-A2F1-286F7B8DB132">
                        <p class="titleinexample">Example 2-39 Using the TREAT Function to Access Attributes of a Specific Subtype</p><pre class="oac_no_warn" dir="ltr">SELECT name, TREAT(VALUE(p) AS student_typ).major major 
  FROM person_obj_table p;
</pre><p>The following query will not work because <code class="codeph">major</code> is an attribute of <code class="codeph">student_typ</code> but not of <code class="codeph">person_typ</code>, the declared type of table <code class="codeph">persons</code>:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT name, VALUE(p).major major FROM person_obj_table p -- incorrect;
</pre><p>The following is a PL/SQL example: </p><pre class="oac_no_warn" dir="ltr">DECLARE 
  var person_typ; 
BEGIN 
  var := employee_typ(55, 'Jane Smith', '1-650-555-0144', 100, 'Jennifer Nelson');
  DBMS_OUTPUT.PUT_LINE(TREAT(var AS employee_typ).mgr);
END;
/
</pre><div class="infoboxnotealso" id="GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695__GUID-B5F5DE8E-F0B0-41F6-BE19-C39E541F11AF">
                           <p class="notep1">See Also:</p>
                           <p>For more information about the SQL <code class="codeph">TREAT</code> function, see <a href="../sqlrf/TREAT.html#SQLRF06148" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.
                           </p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADOBJ7170"></a><a id="ADOBJ7169"></a><div class="props_rev_3"><a id="GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117" name="GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117"></a><h3 id="ADOBJ-GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117" class="sect3"><span class="enumeration_section">2.4.9 </span>VALUE
               </h3>
               <div>
                  <div class="section">
                     <p>In a SQL statement, the <code class="codeph">VALUE</code> function takes as its argument a correlation variable (table alias) for an object table or object view and returns object instances corresponding to rows of the table or view. 
                     </p>
                     <p>The <code class="codeph">VALUE</code> function may return instances of the declared type of the row or any of its subtypes.
                     </p>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117__CIHFBCJI">Example 2-40</a> first creates a <code class="codeph">part_time_student_typ</code>, and then shows a <code class="codeph">SELECT</code> query returning all persons, including students and employees, from table <code class="codeph">person_obj_table</code> of <code class="codeph">person_typ</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117__CIHFBCJI">
                     <p class="titleinexample">Example 2-40 Using the VALUE Function</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 2-31 and 2-32
CREATE TYPE part_time_student_typ UNDER student_typ (
  number_hours NUMBER);
/
SELECT VALUE(p) FROM person_obj_table p;
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>To retrieve only part time students, that is, instances whose most specific type is <code class="codeph">part_time_student_typ</code>, use the <code class="codeph">ONLY</code> keyword to confine the selection:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT VALUE(p) FROM person_obj_table p 
  WHERE VALUE(p) IS OF (ONLY part_time_student_typ);
</pre><p>In the following example, <code class="codeph">VALUE</code> is used to update a object instance in an object table:
                     </p><pre class="oac_no_warn" dir="ltr">UPDATE person_obj_table p
   SET VALUE(p) = person_typ(12, 'Bob Jones', '1-650-555-0130')
   WHERE p.idno = 12;</pre><div class="infoboxnotealso" id="GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117__GUID-FAB85121-9788-4DCC-B76A-4CB2519B1285">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="operations-on-collection-data-types.html#GUID-7A47068C-D2B9-480A-B3AC-BCF6A1D6A5A6__CIHJDAFI">Example 5-22</a></p>
                           </li>
                           <li>
                              <p>For more information about the SQL <code class="codeph">VALUE</code> function, see <a href="../sqlrf/VALUE.html#SQLRF06158" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
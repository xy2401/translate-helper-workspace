<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Transporting Data Across Platforms</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="creating-transportable-tablespace-sets.html" title="Previous" type="text/html">
      <link rel="next" href="part-user-managed-backup-recovery.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-transportable-tablespace-sets.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part-user-managed-backup-recovery.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-transfering-data-rman.html" property="item" typeof="WebPage"><span property="name"> Transferring Data with RMAN</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Transporting Data Across Platforms</li>
            </ol>
            <a id="GUID-65AADCB6-CC9A-4229-9AB8-805C37E4471F" name="GUID-65AADCB6-CC9A-4229-9AB8-805C37E4471F"></a><a id="BRADV05432"></a>
            
            <h2 id="BRADV-GUID-65AADCB6-CC9A-4229-9AB8-805C37E4471F" class="sect2"><span class="enumeration_chapter">28 </span>Transporting Data Across Platforms
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d127931e69" class="indexterm-anchor"></a>You <a id="d127931e74" class="indexterm-anchor"></a>can use RMAN to transport tablespaces across platforms with different endian formats. You can also use RMAN to transport an entire database to a different platform so long as the two platforms have the same endian format.
               </p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-1DAD0A3D-6DDA-4578-A0A2-603DC385281C">About Cross-Platform Data Transport</a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-D4C86E36-8EF8-489D-84CE-B8F045C8AB20">Overview of Cross-Platform Data Transport Using Image Copies</a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50">Performing Cross-Platform Tablespace Conversion with Image Copies</a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-B3E99F38-FDFC-426C-9F03-5C76381290B9">Performing Cross-Platform Data File Conversion with Image Copies</a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-EF05DB57-34E6-41AA-A44A-A0A91738DDB9">Performing Cross-Platform Database Conversion with Image Copies</a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD">Overview of Cross-Platform Data Transport Using Backup Sets </a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-76834111-5476-4591-A472-7DA5E2F4464D">Performing Cross-Platform Database Transport with Backup Sets</a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54">Performing Cross-Platform Transport of Read-Only Tablespaces Using Backup Sets</a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-346F0274-51A6-49D3-AB16-B8D1678655A1">Overview of Cross-Platform Transport of Tablespaces Using Inconsistent Backups</a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A" title="This section describes the high-level steps to perform cross-platform transport of inconsistent tablespaces using backup sets or image copies.">Performing Cross-Platform Transport of Tablespaces Using Inconsistent Backups</a></p>
                  </li>
                  <li>
                     <p><a href="rman-transporting-data-across-platforms.html#GUID-27F404E2-4D45-4C99-B111-CD618F740C2B" title="Pluggable database (PDBs) can be transported and plugged in to a destination multitenant container database (CDB) which is on a different platform than the source CDB. In addition to an RMAN backup of the PDB, you need the metadata required to plug the PDB into the destination CDB.You can use a combination of inconsistent and consistent backups to transport a PDB and plug it into a CDB that is on a different platform. Inconsistent backups enable you to reduce application downtime because the PDB can be open while the backup is performed">Performing Cross-Platform Data Transport in CDBs and PDBs</a></p>
                  </li>
               </ul>
            </div><a id="BRADV89977"></a><div class="props_rev_3"><a id="GUID-1DAD0A3D-6DDA-4578-A0A2-603DC385281C" name="GUID-1DAD0A3D-6DDA-4578-A0A2-603DC385281C"></a><h3 id="BRADV-GUID-1DAD0A3D-6DDA-4578-A0A2-603DC385281C" class="sect3"><span class="enumeration_section">28.1 </span>About Cross-Platform Data Transport
               </h3>
               <div>
                  <p>Cross-platform transportable tablespace is a variation of ordinary transportable tablespace. All of the restrictions that apply to transportable tablespaces apply here also, such as the need to ensure that all of the objects being transported are completely contained within the set of tablespaces being transported. Cross-platform transportable tablespace can be performed between platforms that have the same, or different, endian format.</p>
                  <p>Cross-platform transportable database is not the same thing as transportable tablespace. In this case you are copying an entire database, including the <code class="codeph">SYSTEM</code> tablespace from one platform to another. Containment checks are irrelevant, and because the <code class="codeph">SYSTEM</code> tablespace is being copied, no export/import step is required. Cross-platform transportable database can only be performed between platforms that have the same endian format.
                  </p>
               </div><a id="BRADV89978"></a><div class="props_rev_3"><a id="GUID-1EDB745F-CB10-43A7-A3C9-111D9B46049C" name="GUID-1EDB745F-CB10-43A7-A3C9-111D9B46049C"></a><h4 id="BRADV-GUID-1EDB745F-CB10-43A7-A3C9-111D9B46049C" class="sect4"><span class="enumeration_section">28.1.1 </span>Purpose of Cross-Platform Data Transport
                  </h4>
                  <div>
                     <p>You can transport tablespaces in a database that runs on one platform into a database that runs on a different platform. Typical uses of cross-platform transportable tablespaces include the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Publishing structured data as transportable tablespaces for distribution to customers, who can convert the tablespaces for integration into their existing databases regardless of platform</p>
                        </li>
                        <li>
                           <p>Moving data from a large data warehouse server to data marts on smaller computers such as Linux-based workstations or servers</p>
                        </li>
                        <li>
                           <p>Sharing read-only tablespaces across a heterogeneous cluster in which all hosts share the same endian format</p>
                        </li>
                        <li>
                           <p>Migrating tablespaces across platforms with minimal application downtime</p>
                        </li>
                     </ul>
                     <p>A full discussion of transportable tablespaces, their uses, and the different techniques for creating and using them is found in <a href="../admin/transporting-data.html#ADMIN01101" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span>.</a></p>
                     <p>You can also use RMAN to transport an entire database from one platform to another. For example, business requirements demand that you run your databases on less expensive servers that use a different platform. In this case, you can use RMAN to transport the entire database rather than re-create it and use import utilities or transportable tablespaces to repopulate the data.</p>
                     <p>You can convert a database on the destination host or source host. Reasons for converting on the destination host include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Avoiding performance overhead on the source host due to the conversion process</p>
                        </li>
                        <li>
                           <p>Distributing a database from one source system to multiple recipients on several different platforms</p>
                        </li>
                        <li>
                           <p>Evaluating a migration path for a new platform</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV707"></a><div class="props_rev_3"><a id="GUID-853520D8-02B6-4552-B03F-C35A5EDB6FF4" name="GUID-853520D8-02B6-4552-B03F-C35A5EDB6FF4"></a><h4 id="BRADV-GUID-853520D8-02B6-4552-B03F-C35A5EDB6FF4" class="sect4"><span class="enumeration_section">28.1.2 </span>Methods of Transporting Data Across Platforms
                  </h4>
                  <div>
                     <p>RMAN enables you to transport data files, tablespaces, or an entire database from one platform to another. When you transport an entire database to a different platform, the destination platform must have the same endian format as the source platform.</p>
                     <p>Use one of the following methods to transport data across platforms:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Transport data using image copies</p>
                        </li>
                        <li>
                           <p>Transport data using backup sets</p>
                           <div class="infoboxnotealso" id="GUID-853520D8-02B6-4552-B03F-C35A5EDB6FF4__GUID-9C2ADD08-CEBE-4915-890E-7DAA1E1B96B3">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-D4C86E36-8EF8-489D-84CE-B8F045C8AB20">Overview of Cross-Platform Data Transport Using Image Copies</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD">Overview of Cross-Platform Data Transport Using Backup Sets </a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV811"></a><div class="props_rev_3"><a id="GUID-D113DEE2-8619-4B8B-9EFE-9D2833C9823A" name="GUID-D113DEE2-8619-4B8B-9EFE-9D2833C9823A"></a><h4 id="BRADV-GUID-D113DEE2-8619-4B8B-9EFE-9D2833C9823A" class="sect4"><span class="enumeration_section">28.1.3 </span>Platforms that Support Cross-Platform Data Transport
                  </h4>
                  <div>
                     <p>The Oracle Database maintains a list of internal names for each platform that supports cross-platform data transport. These names are stored in the <code class="codeph">V$TRANSPORTABLE_PLATFORM</code> view. Use this view to determine the internal name of the <a href="glossary.html#GUID-F5230E13-106F-4840-9E58-3AB7071E9B21"><span class="xrefglossterm">source platform</span></a> or <a href="glossary.html#GUID-0E17C982-762C-46D3-83BB-C86302304093"><span class="xrefglossterm">destination platform</span></a>. While transporting data across platforms, you may need to specify the exact name of the source or destination platform. Any platform names specified as a parameter of the <code class="codeph">CONVERT</code> or <code class="codeph">BACKUP</code> command must be entered exactly as shown in the <code class="codeph">V$TRANSPORTABLE_PLATFORM</code> view.
                     </p>
                     <p>Use the following query to obtain the platform name of the connected database:</p><pre class="oac_no_warn" dir="ltr">SELECT PLATFORM_NAME
    FROM V$TRANSPORTABLE_PLATFORM
    WHERE PLATFORM_ID =
       ( SELECT PLATFORM_ID FROM V$DATABASE );
</pre><p>Use the following query to obtain the name of the Linux platform:</p><pre class="oac_no_warn" dir="ltr">SELECT PLATFORM_ID, PLATFORM_NAME, ENDIAN_FORMAT
FROM V$TRANSPORTABLE_PLATFORM
WHERE UPPER(PLATFORM_NAME) LIKE '%LINUX%';
</pre></div>
               </div>
            </div><a id="BRADV89979"></a><div class="props_rev_3"><a id="GUID-D4C86E36-8EF8-489D-84CE-B8F045C8AB20" name="GUID-D4C86E36-8EF8-489D-84CE-B8F045C8AB20"></a><h3 id="BRADV-GUID-D4C86E36-8EF8-489D-84CE-B8F045C8AB20" class="sect3"><span class="enumeration_section">28.2 </span>Overview of Cross-Platform Data Transport Using Image Copies
               </h3>
               <div>
                  <p>RMAN enables you to use image copies to transport tablespaces, data files, or an entire database. You use the RMAN <code class="codeph">CONVERT</code> command to perform cross-platform transport with image copies. Tablespace transport is sometimes performed by individually transporting the data files that store the tablespace data. However, it is not possible to transport a single data file that is part of a tablespace that consists of multiple data files.
                  </p>
                  <p>You must use the RMAN <code class="codeph">CONVERT</code> command in a transportable tablespace operation when the <a href="glossary.html#GUID-F5230E13-106F-4840-9E58-3AB7071E9B21"><span class="xrefglossterm">source platform</span></a> is different from the <a href="glossary.html#GUID-0E17C982-762C-46D3-83BB-C86302304093"><span class="xrefglossterm">destination platform</span></a> and the endian formats are different. If you are converting part of the database between platforms that have the same endian format, you can use operating system methods to copy the files from the source to the destination. If you are converting an entire, same endian database, any data files with undo information must be converted. You cannot copy these files directly from the source to the destination platform. 
                  </p>
               </div><a id="BRADV89980"></a><div class="props_rev_3"><a id="GUID-5515B50B-2FCF-4C94-BEA3-16070E4E2334" name="GUID-5515B50B-2FCF-4C94-BEA3-16070E4E2334"></a><h4 id="BRADV-GUID-5515B50B-2FCF-4C94-BEA3-16070E4E2334" class="sect4"><span class="enumeration_section">28.2.1 </span>Overview of Tablespace and Data File Conversion Using Image Copies
                  </h4>
                  <div>
                     <p>You can perform tablespace conversion with the RMAN <code class="codeph">CONVERT</code> <code class="codeph">TABLESPACE</code> command on the source host, but not on the destination host. The <code class="codeph">CONVERT TABLESPACE</code> command does not perform in-place conversion of data files. Rather, the command produces output files in the correct format for use on the destination platform. The command does not alter the contents of data files in the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>.
                     </p>
                     <p>You can use the <code class="codeph">CONVERT</code> <code class="codeph">DATAFILE</code> command to convert files. Typically, the <code class="codeph">CONVERT DATAFILE</code> command is used on the destination host and the <code class="codeph">CONVERT TABLESPACE</code> command is used on the source host. When you use the <code class="codeph">CONVERT DATAFILE</code> command on the source host, ensure that data files are cleanly offline or the tablespaces containing those data files are read-only. The Data Pump Export utility generates an <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> that, with data files manually copied to the destination host, can be imported into the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>. Until the Data Pump export dump file is imported into the destination database, the data files are not associated with a tablespace name in the database. In this case, RMAN cannot translate the tablespace name into a list of data files. Therefore, you must use <code class="codeph">CONVERT</code> <code class="codeph">DATAFILE</code> and identify the data files by file name.
                     </p>
                     <div class="infoboxnote" id="GUID-5515B50B-2FCF-4C94-BEA3-16070E4E2334__GUID-9394B018-3ADE-4DA9-A729-EB7DE01D99CB">
                        <p class="notep1">Note:</p>
                        <p>Using <code class="codeph">CONVERT TABLESPACE</code> or <code class="codeph">CONVERT DATAFILE</code> is only one step in using cross-platform transportable tablespaces. Read the discussion of transportable tablespaces in <a href="../admin/transporting-data.html#ADMIN01101" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> <span class="italic">in its entirety</span> before attempting to follow the procedures in this chapter.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-5515B50B-2FCF-4C94-BEA3-16070E4E2334__GUID-20AD5DE8-8B7D-4187-9B38-EFE5F79785D6">
                        <p class="notep1">See Also:</p>
                        <p>The following sections describe how to perform cross-platform transport of tablespaces and data files using image copies:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50">Performing Cross-Platform Tablespace Conversion with Image Copies</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-B3E99F38-FDFC-426C-9F03-5C76381290B9">Performing Cross-Platform Data File Conversion with Image Copies</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89981"></a><div class="props_rev_3"><a id="GUID-C91F21C3-C3C0-43B5-9D9D-2F9408F8808D" name="GUID-C91F21C3-C3C0-43B5-9D9D-2F9408F8808D"></a><h4 id="BRADV-GUID-C91F21C3-C3C0-43B5-9D9D-2F9408F8808D" class="sect4"><span class="enumeration_section">28.2.2 </span>Overview of Database Conversion Using Image Copies
                  </h4>
                  <div>
                     <p>To convert a whole database to a different platform, both platforms must use the same endian format. The RMAN <code class="codeph">CONVERT</code> <code class="codeph">DATABASE</code> command automates the movement of an entire database from a source platform to a destination platform. The transported database contains the same data as the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> and also has, with a few exceptions, the same settings as the source database.
                     </p>
                     <p>Files automatically transported to the destination platform include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Data files that belong to permanent tablespaces</p>
                           <p>Unlike transporting tablespaces across platforms, transporting entire databases requires that certain types of blocks, such as blocks in undo segments, be reformatted to ensure compatibility with the destination platform. Even though the endian formats for the source and destination platforms are the same, certain types of files must undergo a conversion process. See <span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-B0178538-6E41-455D-8166-FBB1EDC5D198">Checking the Database Before Cross-Platform Database Conversion</a>"</span> for details about the types of files that need conversion.
                           </p>
                        </li>
                        <li>
                           <p>Initialization parameter file or server parameter file</p>
                           <p>If the database uses a text-based initialization parameter file, then RMAN transports it. If the database uses a server parameter file, then RMAN generates an initialization parameter file based on the server parameter file, transports it and creates a new server parameter file at the destination based on the settings in the initialization parameter file.</p>
                           <p>Usually, some parameters in the initialization parameter file require manual updating for the new database. For example, you may change the <code class="codeph">DB_NAME</code> and parameters such as <code class="codeph">CONTROL_FILES</code> that indicate the locations of files on the destination host.
                           </p>
                        </li>
                     </ul>
                     <p>You can convert the format of the data files either on the source platform or on the destination platform. The <code class="codeph">CONVERT DATABASE ON DESTINATION PLATFORM</code> command does not convert the format of data files. Rather, it generates scripts that you can run manually to perform the conversion. The <code class="codeph">CONVERT SCRIPT</code> parameter creates a <a href="glossary.html#GUID-6AC61FEB-A410-4A95-A442-90068824E11E"><span class="xrefglossterm">convert script</span></a> that you can manually execute at the destination host to convert data file copies in batch mode. The <code class="codeph">TRANSPORT SCRIPT</code> parameter generates a <a href="glossary.html#GUID-9F4C7A24-C72F-4E9C-8801-621CB6771E19"><span class="xrefglossterm">transport script</span></a> that contains SQL statements to create the new database on the destination platform. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-C91F21C3-C3C0-43B5-9D9D-2F9408F8808D__GUID-6D6292D9-268B-4E54-A812-A529D1978019">
                        <p class="notep1">See Also:</p>
                        <p>My Oracle Support Note 1079563.1, "RMAN DUPLICATE/RESTORE/RECOVER Mixed Platform Support" for the following information:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>List of platform combinations that do not require the <code class="codeph">CONVERT DATABASE</code> command
                              </p>
                           </li>
                           <li>
                              <p>Prerequisites for the source database and destination databases</p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-C91F21C3-C3C0-43B5-9D9D-2F9408F8808D__GUID-376B29A4-8A9F-4458-9243-8C28D220BCEC">
                        <p class="notep1">See Also:</p>
                        <p><a href="http://www.oracle.com/goto/maa" target="_blank"><code class="codeph">http://www.oracle.com/goto/maa</code></a> for best practices on using cross-platform transportable tablespace and database procedures as part of data migration tasks
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-C91F21C3-C3C0-43B5-9D9D-2F9408F8808D__GUID-45730CCB-5679-4148-A7A7-B0D3C81754DE">
                        <p class="notep1">See Also:</p>
                        <p>The following sections describe how to perform cross-platform transport of a database using image copies:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-B0178538-6E41-455D-8166-FBB1EDC5D198">Checking the Database Before Cross-Platform Database Conversion</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC">Converting Data Files on the Source Host When Transporting a Database</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-D8EF7402-2AEE-4FB3-8B84-5BC081333005">Converting Data Files on the Destination Host When Transporting a Database</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV474"></a><a id="BRADV89982"></a><div class="props_rev_3"><a id="GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50" name="GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50"></a><h3 id="BRADV-GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50" class="sect3"><span class="enumeration_section">28.3 </span>Performing Cross-Platform Tablespace Conversion with Image Copies
               </h3>
               <div>
                  <div class="section">
                     <p>See the list of <code class="codeph">CONVERT</code> command prerequisites described in <a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference.</span></a> Meet all these prerequisites before doing the steps in this section.
                     </p>
                     <p>For purposes of illustration, assume that you must transport tablespaces <code class="codeph">finance</code> and <code class="codeph">hr</code> from <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> <code class="codeph">prod_source</code>, which runs on a Sun Solaris host. You plan to transport them to <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a> <code class="codeph">prod_dest</code> running on a Linux PC. You plan to store the converted data files in the temporary directory <code class="codeph">/tmp/transport_linux/</code> on the source host.
                     </p>
                     <div class="infoboxnotealso" id="GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50__GUID-A87083A4-89AC-410E-9247-ADD4657FD325">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-5515B50B-2FCF-4C94-BEA3-16070E4E2334">Overview of Tablespace and Data File Conversion Using Image Copies</a>"</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50__GUID-56B1E0F2-E197-414A-8C51-3DE075117CED">To perform cross-platform tablespace conversion with image copies:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ol>
                        <li>
                           <p>Start SQL*Plus and connect to the source database <code class="codeph">prod_source</code> with administrator privileges.
                           </p>
                        </li>
                        <li>
                           <p>Query the name for the destination platform in the <code class="codeph">V$TRANSPORTABLE_PLATFORM</code> view.
                           </p>
                           <p>The <code class="codeph">PLATFORM_NAME </code>for Linux on a PC is <code class="codeph">Linux IA (64-bit)</code>.
                           </p>
                           <div class="infoboxnotealso" id="GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50__GUID-6A6EE860-685A-41E1-84A2-E203551FDB4B">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-D113DEE2-8619-4B8B-9EFE-9D2833C9823A">Platforms that Support Cross-Platform Data Transport</a>"</span> for information about determining the platform name
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>Check if the tablespaces to be transported are self-contained by executing the <code class="codeph">DBMS_TTS.TRANSPORT_SET_CHECK</code> procedure. If the <code class="codeph">TRANSPORT_SET_VIOLATIONS</code> view contains rows corresponding to the specified tablespaces, then you must resolve the dependencies before proceeding with the conversion.
                           </p>
                           <div class="infoboxnotealso" id="GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50__GUID-A2554873-B132-40D3-AE5C-1C2EA742507C">
                              <p class="notep1">See Also:</p>
                              <p><a href="performing-rman-tspitr.html#GUID-06BAA701-860F-4E3C-AA70-277CCCB7F425__CHDFCCFH">Example 21-1</a> for information about executing the <code class="codeph">DBMS_TTS.TRANSPORT_SET_CHECK</code> procedure
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>Place the tablespaces to be transported in read-only mode. For example, enter:</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE finance READ ONLY;
ALTER TABLESPACE hr READ ONLY;
</pre></li>
                        <li>
                           <p>Choose a method for naming the output files.</p>
                           <div class="infoboxnotealso" id="GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50__GUID-4155300B-23A1-4F75-9CE6-BAE99373C4E3">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-2EACDF40-CB58-41C8-9128-487CD534F9C3">About Renaming Output Files During RMAN Cross-Platform Data File Conversion</a>"</span></p>
                           </div>
                        </li>
                        <li>
                           <p>Start RMAN and connect to the <span class="italic">source</span> database (not the destination database) as <code class="codeph">TARGET</code>. For example, enter:
                           </p><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt; CONNECT TARGET "sbu@prod_source AS SYSBACKUP";
</pre></li>
                        <li>
                           <p>Run the <code class="codeph">CONVERT TABLESPACE</code> command to convert the data files into the endian format of the destination host. 
                           </p>
                           <p>In the following example, the <code class="codeph">FORMAT</code> argument controls the name and location of the converted data files:
                           </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONVERT TABLESPACE finance,hr
2&gt;   TO PLATFORM 'Linux IA (64-bit)'
3&gt;   FORMAT '/tmp/transport_linux/%U';</pre><p>The result is a set of converted data files in the <code class="codeph">/tmp/transport_linux/ </code>directory, with data in the correct endian format for the Linux IA (64-bit) platform.
                           </p>
                           <div class="infoboxnotealso" id="GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50__GUID-BBB99606-7F2D-41A9-9BFE-C913A4689B32">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF192" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for the full semantics of the <code class="codeph">CONVERT</code> command
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>Follow the rest of the general outline for transporting tablespaces:</p>
                           <ol type="a">
                              <li>
                                 <p>Use the Oracle Data Pump Export utility to create the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> on the source host.
                                 </p>
                              </li>
                              <li>
                                 <p>Move the converted data files and the export dump file from the source host to the desired directories on the destination host.</p>
                              </li>
                              <li>
                                 <p>Plug the tablespace in to the new database with the DataPump Import utility.</p>
                              </li>
                              <li>
                                 <p>If applicable, place the transported tablespaces into read/write mode.</p>
                              </li>
                           </ol>
                           <div class="infoboxnotealso" id="GUID-33C67168-9AD5-43A8-96E0-CF65DEF83F50__GUID-FAD79F6F-F5C5-4B92-B1ED-03C47944C244">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ADMIN11394" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about using transportable tablespaces
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89983"></a><div class="props_rev_3"><a id="GUID-B3E99F38-FDFC-426C-9F03-5C76381290B9" name="GUID-B3E99F38-FDFC-426C-9F03-5C76381290B9"></a><h3 id="BRADV-GUID-B3E99F38-FDFC-426C-9F03-5C76381290B9" class="sect3"><span class="enumeration_section">28.4 </span>Performing Cross-Platform Data File Conversion with Image Copies
               </h3>
               <div>
                  <p>See the list of <code class="codeph">CONVERT</code> command prerequisites described in <a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference.</span></a> Meet these prerequisites before performing the steps in this section.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-2EACDF40-CB58-41C8-9128-487CD534F9C3">About Renaming Output Files During RMAN Cross-Platform Data File Conversion</a></p>
                     </li>
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-1087F30E-647F-4A32-8F33-1BC1A0E5CAE8">Performing Tablespace Transportation on the Destination Host Using RMAN CONVERT DATAFILE</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89984"></a><div class="props_rev_3"><a id="GUID-2EACDF40-CB58-41C8-9128-487CD534F9C3" name="GUID-2EACDF40-CB58-41C8-9128-487CD534F9C3"></a><h4 id="BRADV-GUID-2EACDF40-CB58-41C8-9128-487CD534F9C3" class="sect4"><span class="enumeration_section">28.4.1 </span>About Renaming Output Files During RMAN Cross-Platform Data File Conversion
                  </h4>
                  <div>
                     <p>Data file conversion necessitates that you choose a technique for naming the output files. You must use the <code class="codeph">FORMAT</code> or <code class="codeph">DB_FILE_NAME_CONVERT</code> arguments to the <code class="codeph">CONVERT</code> command to control the naming of output files. The rules are listed in order of precedence: 
                     </p>
                     <ol>
                        <li>
                           <p>Any file that matches any pattern provided in the <code class="codeph">DB_FILE_NAME_CONVERT</code> clause is named based upon this pattern. 
                           </p>
                        </li>
                        <li>
                           <p>If you specify a <code class="codeph">FORMAT</code> clause, then any file not named based on the pattern provided in the <code class="codeph">DB_FILE_NAME_CONVERT</code> clause is named based on the <code class="codeph">FORMAT</code> pattern.
                           </p>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-2EACDF40-CB58-41C8-9128-487CD534F9C3__GUID-40EEDEB2-F74B-4355-9B81-35184A7C262F">
                        <p class="notep1">Note:</p>
                        <p>You cannot use the <code class="codeph">DB_FILE_NAME_CONVERT</code> clause to generate output file names for the <code class="codeph">CONVERT</code> command when both the source and destination files are Oracle Managed Files.
                        </p>
                     </div>
                     <p>If the source and destination platforms differ, then you must specify the <code class="codeph">FROM PLATFORM</code> parameter. View platform names by querying the <code class="codeph">V$TRANSPORTABLE_PLATFORM</code>. The <code class="codeph">FROM PLATFORM</code> value must match the format of the data files to be converted to avoid an error. If you do not specify <code class="codeph">FROM PLATFORM</code>, then this parameter defaults to the value of the destination platform.
                     </p>
                     <div class="infoboxnotealso" id="GUID-2EACDF40-CB58-41C8-9128-487CD534F9C3__GUID-5A58AB19-4F9B-4FD3-83F1-65A6BB2AFCDE">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-D113DEE2-8619-4B8B-9EFE-9D2833C9823A">Platforms that Support Cross-Platform Data Transport</a>"</span> for information about determining the platform name
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV475"></a><a id="BRADV89985"></a><div class="props_rev_3"><a id="GUID-1087F30E-647F-4A32-8F33-1BC1A0E5CAE8" name="GUID-1087F30E-647F-4A32-8F33-1BC1A0E5CAE8"></a><h4 id="BRADV-GUID-1087F30E-647F-4A32-8F33-1BC1A0E5CAE8" class="sect4"><span class="enumeration_section">28.4.2 </span>Performing Tablespace Transportation on the Destination Host Using RMAN CONVERT DATAFILE
                  </h4>
                  <div>
                     <div class="section">
                        <p>This section explains how to use the <code class="codeph">CONVERT DATAFILE</code> command. The section assumes that you intend to transport tablespaces <code class="codeph">finance</code> (data files <code class="codeph">fin/fin01.dbf</code> and <code class="codeph">fin/fin02.dbf</code>) and <code class="codeph">hr</code> (data files <code class="codeph">hr/hr01.dbf</code> and <code class="codeph">hr/hr02.dbf</code>) from a <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> named <code class="codeph">prod_source</code>. The database runs on a Sun Solaris host. You plan to transport these tablespaces into a <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a> named <code class="codeph">prod_dest</code>, which runs on a Linux PC. You plan to perform conversion on the destination host.
                        </p>
                        <p>When the data files are plugged in to the destination database, you plan to store them in <code class="codeph">/orahome/dbs</code> and preserve the current directory structure. That is, data files for the <code class="codeph">hr</code> tablespace are stored in the <code class="codeph">/orahome/dbs/hr</code> subdirectory, and data files for the <code class="codeph">finance</code> tablespace are stored in the <code class="codeph">/orahome/dbs/fin</code> directory.
                        </p>
                        <div class="infoboxnotealso" id="GUID-1087F30E-647F-4A32-8F33-1BC1A0E5CAE8__GUID-BABFE32A-755A-4256-9475-F9C14C922C2A">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-5515B50B-2FCF-4C94-BEA3-16070E4E2334">Overview of Tablespace and Data File Conversion Using Image Copies</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1087F30E-647F-4A32-8F33-1BC1A0E5CAE8__GUID-934C82FB-1757-400F-BAFE-804A2F49129F">To perform cross-platform data file conversion with image copies:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Start SQL*Plus and connect to the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> <code class="codeph">prod_source</code> with administrator privileges. 
                              </p>
                           </li>
                           <li>
                              <p>Query the name for the source platform in <code class="codeph">V$TRANSPORTABLE_PLATFORM</code>.
                              </p>
                              <p>For this scenario, assume that the <code class="codeph">PLATFORM_NAME </code>for the source host is <code class="codeph">Solaris[tm] OE (64-bit)</code>.
                              </p>
                              <div class="infoboxnotealso" id="GUID-1087F30E-647F-4A32-8F33-1BC1A0E5CAE8__GUID-AE3FE709-AE91-4907-BD64-D934F8E7C04A">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-D113DEE2-8619-4B8B-9EFE-9D2833C9823A">Platforms that Support Cross-Platform Data Transport</a>"</span> for information about determining the platform name
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>Identify the tablespaces to be transported from the source database and place them in read-only mode. </p>
                              <p>For example, enter the following SQL statements to place <code class="codeph">finance</code> and <code class="codeph">hr</code> in read-only mode:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE finance READ ONLY;
ALTER TABLESPACE hr READ ONLY;
</pre></li>
                           <li>
                              <p>On the source host, use Data Pump Export to create the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> 
                              </p>
                              <p>In this example, the dump file is named <code class="codeph">expdat.dmp</code>.
                              </p>
                           </li>
                           <li>
                              <p>Make the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> and the data files to be transported available to the destination host.
                              </p>
                              <p>You can use NFS to make the dump file and current database files (not copies) accessible. Alternatively, you can use an operating system utility to copy these files to the destination host. </p>
                              <p>In this example, you store the files in the <code class="codeph">/tmp/transport_solaris/</code> directory of the destination host. You preserve the subdirectory structure from the original location of the files; that is, the data files are stored as:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">/tmp/transport_solaris/fin/fin01.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">/tmp/transport_solaris/fin/fin02.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">/tmp/transport_solaris/hr/hr01.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">/tmp/transport_solaris/hr/hr02.dbf</code></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Start RMAN and connect to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a> (not the source database) as <code class="codeph">TARGET</code>. For example, the following command connects to the target database <code class="codeph">prod_dest</code> using the <code class="codeph">sbu</code> user who is granted the <code class="codeph">SYSBACKUP</code> privilege:
                              </p><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt; CONNECT TARGET "sbu@prod_dest AS SYSBACKUP";
</pre></li>
                           <li>
                              <p>Execute the <code class="codeph">CONVERT DATAFILE</code> command to convert the data files into the endian format of the destination host. 
                              </p>
                              <p>In this example, you use <code class="codeph">DB_FILE_NAME_CONVERT</code> to control the name and location of the converted data files. You also specify the <code class="codeph">FROM</code> <code class="codeph">PLATFORM</code> clause. 
                              </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONVERT DATAFILE
2&gt;   '/tmp/transport_solaris/fin/fin01.dbf',
3&gt;   '/tmp/transport_solaris/fin/fin02.dbf',
4&gt;   '/tmp/transport_solaris/hr/hr01.dbf',
5&gt;   '/tmp/transport_solaris/hr/hr02.dbf'
6&gt;   DB_FILE_NAME_CONVERT
7&gt;     '/tmp/transport_solaris/fin','/orahome/dbs/fin',
8&gt;     '/tmp/transport_solaris/hr','/orahome/dbs/hr'
9&gt;   FROM PLATFORM 'Solaris[tm] OE (64-bit)';</pre><p>The result is a set of converted data files in the <code class="codeph">/orahome/dbs/</code> directory that are named as follows:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">/orahome/dbs/fin/fin01.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">/orahome/dbs/fin/fin02.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">/orahome/dbs/hr/hr01.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">/orahome/dbs/hr/hr02.dbf</code></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Follow the rest of the general outline for transporting tablespaces:</p>
                              <ol type="a">
                                 <li>
                                    <p>Plug the tablespace in to the new database with the DataPump Import utility.</p>
                                 </li>
                                 <li>
                                    <p>If applicable, place the transported tablespaces into read-only mode.</p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-1087F30E-647F-4A32-8F33-1BC1A0E5CAE8__GUID-83E39759-6B7D-4665-9BDA-9D17792A4F0E">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for the syntax and semantics of the <code class="codeph">CONVERT</code> command
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../admin/transporting-data.html#ADMIN11394" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about transportable tablespaces
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV768"></a><div class="props_rev_3"><a id="GUID-EF05DB57-34E6-41AA-A44A-A0A91738DDB9" name="GUID-EF05DB57-34E6-41AA-A44A-A0A91738DDB9"></a><h3 id="BRADV-GUID-EF05DB57-34E6-41AA-A44A-A0A91738DDB9" class="sect3"><span class="enumeration_section">28.5 </span>Performing Cross-Platform Database Conversion with Image Copies
               </h3>
               <div>
                  <p>When you perform cross-platform database conversion with image copies, you can convert the data files on either the source host or the destination host.</p>
                  <p>This section contains:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-B0178538-6E41-455D-8166-FBB1EDC5D198">Checking the Database Before Cross-Platform Database Conversion</a></p>
                     </li>
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC">Converting Data Files on the Source Host When Transporting a Database</a></p>
                     </li>
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-D8EF7402-2AEE-4FB3-8B84-5BC081333005">Converting Data Files on the Destination Host When Transporting a Database</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV476"></a><a id="BRADV477"></a><a id="BRADV89986"></a><div class="props_rev_3"><a id="GUID-B0178538-6E41-455D-8166-FBB1EDC5D198" name="GUID-B0178538-6E41-455D-8166-FBB1EDC5D198"></a><h4 id="BRADV-GUID-B0178538-6E41-455D-8166-FBB1EDC5D198" class="sect4"><span class="enumeration_section">28.5.1 </span>Checking the Database Before Cross-Platform Database Conversion
                  </h4>
                  <div>
                     <div class="section">
                        <p>As explained in <span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-D4C86E36-8EF8-489D-84CE-B8F045C8AB20">Overview of Cross-Platform Data Transport Using Image Copies</a>"</span>, you can use the RMAN <code class="codeph">CONVERT DATABASE</code> command to automate the copying of an entire database from one platform to another. You convert the database data files on either the source or destination platforms.
                        </p>
                        <p>Before converting the database, see the list of <code class="codeph">CONVERT DATABASE</code> command prerequisites described in <a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference.</span></a> Confirm that you meet all these prerequisites before attempting the procedure in this section. 
                        </p>
                        <p>One prerequisite is that both the source and destination platform must share the same endian format. For example, you can transport a database from Microsoft Windows to Linux for x86 (both little-endian), or from HP-UX to AIX (both big-endian), but not from HP-UX to Linux for x86 (big-endian to little-endian).</p>
                        <div class="infoboxnote" id="GUID-B0178538-6E41-455D-8166-FBB1EDC5D198__GUID-ACB5CA21-9EFB-4166-ADC2-B7F8826814FA">
                           <p class="notep1">Note:</p>
                           <p>If you cannot use the <code class="codeph">CONVERT DATABASE</code> command because the platforms do not share endian formats, then you can create a new database on the destination platform and then use cross-platform transportable tablespace to copy your data.
                           </p>
                        </div>
                        <p>When you transport entire databases, note that certain files require RMAN conversion to ensure compatibility with the destination platform. Even though the endian formats for the source and destination platform are the same, these files cannot be simply copied from the source to the destination system. The following kinds of files require RMAN conversion:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Any file containing undo segments</p>
                           </li>
                           <li>
                              <p>Any file containing automatic segment space management (ASSM) segment headers that is being transported to or from the HP Tru64 platform</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-B0178538-6E41-455D-8166-FBB1EDC5D198__GUID-5FFC81AD-2520-4359-B92E-E11C2D532CAB">
                           <p class="notep1">Note:</p>
                           <p>When converting to or from Tru64 UNIX platform, even if the databases use the same endian format, you must use the <code class="codeph">CONVERT</code> command to convert data files with automatic segment space management (ASSM) headers. See My Oracle Support Note 732053.1 for information about identifying data files that contain undo data or ASSM headers.
                           </p>
                        </div>
                        <p>The <code class="codeph">CONVERT DATABASE</code> command, by default, processes all data files in the database using RMAN conversion. The RMAN conversion copies the files from one location to another, even when it does not make any changes to the file. If you have other preferred means to copy those files that do not require RMAN conversion, you can use the <code class="codeph">SKIP UNNECESSARY DATAFILES</code> option of the <code class="codeph">CONVERT DATABASE</code> command. If you select this option, then the <code class="codeph">CONVERT DATABASE</code> command only processes the files that require conversion. All other files must either be made accessible to the user or copied from the source to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>.
                        </p>
                        <p>Whether the data file conversion is performed at the source or destination host, you must copy the files while the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> is open in read-only mode.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B0178538-6E41-455D-8166-FBB1EDC5D198__GUID-8EFC82DB-39FA-49E7-B96D-4734E3A8D7B9">To check the database before cross-platform conversion:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>On the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>, start a SQL*Plus session as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span></li>
                        <li class="stepexpand"><span>Open the database in read-only mode.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE
STARTUP MOUNT
ALTER DATABASE OPEN READ ONLY;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Ensure that server output is on in SQL*Plus.</span><div>
                              <p>For example, enter the following SQL*Plus command:</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">DBMS_TDB.CHECK_DB</code> function.</span><div>
                              <p>This check ensures that no conditions prevent the transport of the database, such as incorrect compatibility settings, in-doubt or active transactions, or incompatible endian formats between the source platform and destination platform.</p>
                              <p>You can call <code class="codeph">CHECK_DB</code> without arguments to see if a condition at the source database prevents transport. You can also call this function with the arguments shown in <a href="rman-transporting-data-across-platforms.html#GUID-B0178538-6E41-455D-8166-FBB1EDC5D198__CHDDHABI" title="This table describes the Parameters of DBMS_TDB.CHECK_DB function.">Table 28-1</a>.
                              </p>
                              <div class="tblformal" id="GUID-B0178538-6E41-455D-8166-FBB1EDC5D198__CHDDHABI">
                                 <p class="titleintable">Table 28-1 CHECK_DB Function Parameters </p>
                                 <table cellpadding="4" cellspacing="0" class="Formal" title="CHECK_DB Function Parameters " summary="This table describes the Parameters of DBMS_TDB.CHECK_DB function." width="90%" frame="hsides" border="1" rules="rows">
                                    <thead>
                                       <tr align="left" valign="top">
                                          <th align="left" valign="bottom" width="32%" id="d127931e2056">Parameter</th>
                                          <th align="left" valign="bottom" width="68%" id="d127931e2059">Description</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="32%" id="d127931e2064" headers="d127931e2056 ">
                                             <p><code class="codeph">target_platform_name</code></p>
                                          </td>
                                          <td align="left" valign="top" width="68%" headers="d127931e2064 d127931e2059 ">
                                             <p>The name of the destination platform as it appears in the <a href="../refrn/V-DB_TRANSPORTABLE_PLATFORM.html#REFRN30376" target="_blank"><code class="codeph">V$DB_TRANSPORTABLE_PLATFORM</code></a> view. 
                                             </p>
                                             <p>This parameter is optional, but is required when the <code class="codeph">skip_option</code> parameter is used. If omitted, it is assumed that the destination platform is compatible with the source platform, and only the conditions not related to platform compatibility are tested. 
                                             </p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="32%" id="d127931e2082" headers="d127931e2056 ">
                                             <p><code class="codeph">skip_option</code></p>
                                          </td>
                                          <td align="left" valign="top" width="68%" headers="d127931e2082 d127931e2059 ">
                                             <p>Specifies which, if any, parts of the database to skip when checking whether the database can be transported. Supported values (of type <code class="codeph">NUMBER</code>) are:
                                             </p>
                                             <ul style="list-style-type: disc;">
                                                <li>
                                                   <p><code class="codeph">SKIP_NONE</code> (or <code class="codeph">0</code>), which checks all tablespaces
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SKIP_OFFLINE</code> (or <code class="codeph">2</code>), which skips checking data files in offline tablespaces
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SKIP_READONLY</code> (or <code class="codeph">3</code>), which skips checking data files in read-only tablespaces 
                                                   </p>
                                                </li>
                                             </ul>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!-- class="inftblhruleinformal" -->
                              <p>The following example illustrates executing <code class="codeph">CHECK_DB</code> on a 32-bit Linux platform for transporting a database to 32-bit Windows, skipping read-only tablespaces. 
                              </p><pre class="oac_no_warn" dir="ltr">DECLARE
  db_ready BOOLEAN;
BEGIN
  db_ready := 
       DBMS_TDB.CHECK_DB('Microsoft Windows IA (32-bit)',DBMS_TDB.SKIP_READONLY);
END;
/

PL/SQL procedure successfully completed.
</pre><p>If no warnings appear, or if <code class="codeph">DBMS_TDB.CHECK_DB</code> returns <code class="codeph">TRUE</code>, then you can transport the database. Proceed to Step 6.
                              </p>
                              <p>If warnings appear, or if <code class="codeph">DBMS_TDB.CHECK_DB</code> returns <code class="codeph">FALSE</code>, then you cannot currently transport the database. Proceed to Step 5.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Examine the output to learn why the database cannot be transported, fix the problem if possible, and then return to the Step 4.</span><div>
                              <div class="infoboxnotealso" id="GUID-B0178538-6E41-455D-8166-FBB1EDC5D198__GUID-599DD40C-EC09-4B97-873C-0A85EE963AC6">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../arpls/DBMS_TDB.html#ARPLS-GUID-E36C9358-B1BA-4952-9CD2-2E5AB1FFDAA6" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about <code class="codeph">DBMS_TDB</code></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">DBMS_TDB.CHECK_EXTERNAL</code> function to identify any external tables, directories, or BFILEs. RMAN cannot automate the transport of these files, so you must copy the files manually and re-create the database directories.</span><div>
                              <p>The following example shows how to call the <code class="codeph">DBMS_TDB.CHECK_EXTERNAL</code> function.
                              </p><pre class="oac_no_warn" dir="ltr">DECLARE
     external BOOLEAN;
BEGIN
    /* value of external is ignored, but with SERVEROUTPUT set to ON
     * dbms_tdb.check_external displays report of external objects
     * on console */
    external := DBMS_TDB.CHECK_EXTERNAL;
END;
/
</pre><p>If no external objects exist, then the procedure completes with no output. If external objects exist, however, then the output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">The following external tables exist in the database:
SH.SALES_TRANSACTIONS_EXT
The following directories exist in the database:
SYS.DATA_PUMP_DIR, SYS.MEDIA_DIR, SYS.DATA_FILE_DIR, SYS.LOG_FILE_DIR
The following BFILEs exist in the database:
PM.PRINT_MEDIA
 
PL/SQL procedure successfully completed.</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV480"></a><a id="BRADV89987"></a><div class="props_rev_3"><a id="GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC" name="GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC"></a><h4 id="BRADV-GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC" class="sect4"><span class="enumeration_section">28.5.2 </span>Converting Data Files on the Source Host When Transporting a Database
                  </h4>
                  <div>
                     <div class="section">
                        <p>When you transport entire databases, certain types of blocks such as blocks in undo segments must be reformatted to ensure compatibility with the destination platform. Even though the endian formats for the source and destination platform are the same, certain data files must undergo a conversion process and cannot be simply copied from one platform to another.</p>
                        <p>Data files with undo information and those from the HP Tru64 platform must be converted. By default, all data files are converted when the <code class="codeph">CONVERT DATABASE</code> command is executed. If, however, <code class="codeph">SKIP UNNECESSARY DATAFILES</code> is used in the <code class="codeph">CONVERT DATABASE</code> command, then the data files with undo segments and those from the HP Tru64 platform are converted. All other data files do not require conversion and can be copied to the new database using FTP, an operating system copy command, or some other mechanism.
                        </p>
                        <div class="infoboxnotealso" id="GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC__GUID-35CCC680-5744-442A-9055-6B1F98A3DBA1">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-C91F21C3-C3C0-43B5-9D9D-2F9408F8808D">Overview of Database Conversion Using Image Copies</a>"</span></p>
                        </div>
                        <p>This section assumes that you have met all of the <code class="codeph">CONVERT DATABASE</code> prerequisites and followed the steps in <span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-B0178538-6E41-455D-8166-FBB1EDC5D198">Checking the Database Before Cross-Platform Database Conversion</a>"</span>. The goal of this procedure is to convert the format of data files on the source host as part of a cross-platform database transport.
                        </p>
                        <p>Assume that you want to convert a database running on Solaris to a database that runs on Windows.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC__GUID-DF707AC3-8D16-43DF-9A13-CB67627AA4E1">To convert the database on the source host:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Open the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> in read-only mode.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
ALTER DATABASE OPEN READ ONLY;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Start RMAN and connect to the source database as <code class="codeph">TARGET</code> as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>"</span>.</span></li>
                        <li class="stepexpand" id="GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC__CHDBBAEJ"><span>Run the <code class="codeph">CONVERT</code> <code class="codeph">DATABASE</code> command.</span><div>
                              <p>The following example shows a <code class="codeph">CONVERT DATABASE</code> command (sample output included). The <code class="codeph">TRANSPORT SCRIPT</code> parameter specifies the location of the generated SQL script that you can use to create the new database. The <code class="codeph">TO PLATFORM</code> parameter indicates the platform of the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>. The <code class="codeph">DB_FILE_NAME_CONVERT</code> parameter specifies the naming scheme for the generated data files.
                              </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONVERT DATABASE
2&gt;   NEW DATABASE 'newdb'
3&gt;   TRANSPORT SCRIPT '/tmp/convertdb/transportscript.sql'
4&gt;   TO PLATFORM 'Microsoft Windows IA (32-bit)'
5&gt;   DB_FILE_NAME_CONVERT '/disk1/oracle/dbs' '/tmp/convertdb';
 
Starting conversion at source at 25-NOV-13
using channel ORA_DISK_1
 
External table SH.SALES_TRANSACTIONS_EXT found in the database
.
.
.
Directory SYS.ORACLE_HOME found in the database
Directory SYS.ORACLE_BASE found in the database
Directory SYS.LOG_FILE_DIR found in the database
.
.
.
BFILE PM.PRINT_MEDIA found in the database
 
User SYS with SYSDBA and SYSOPER privilege found in password file
User SBU with SYSBACKUP privilege found in password file
channel ORA_DISK_1: starting datafile conversion
input datafile fno=00001 name=/disk1/oracle/dbs/tbs_01.f
converted datafile=/tmp/convertdb/tbs_01.f
channel ORA_DISK_1: datafile conversion complete, elapsed time: 00:00:15
channel ORA_DISK_1: starting datafile conversion
input datafile fno=00002 name=/disk1/oracle/dbs/tbs_ax1.f
converted datafile=/tmp/convertdb/tbs_ax1.f
channel ORA_DISK_1: datafile conversion complete, elapsed time: 00:00:03
.
.
.
channel ORA_DISK_1: starting datafile conversion
input datafile fno=00016 name=/disk1/oracle/dbs/tbs_52.f
converted datafile=/tmp/convertdb/tbs_52.f
channel ORA_DISK_1: datafile conversion complete, elapsed time: 00:00:01
Edit <span class="bold">init.ora file init_00gb3vfv_1_0.ora.</span> This PFILE will be used to 
  create the database on the target platform
Run <span class="bold">SQL script /tmp/convertdb/transportscript.sql</span> on the target platform 
  to create database
To recompile all PL/SQL modules, run utlirp.sql and utlrp.sql on 
  the target platform
To change the internal database identifier, use DBNEWID Utility
Finished conversion at source at 25-NOV-13
</pre></div>
                        </li>
                        <li class="stepexpand"><span>After <code class="codeph">CONVERT</code> <code class="codeph">DATABASE</code> completes, you can open the source database read/write again. </span></li>
                        <li class="stepexpand"><span>Move the data files generated by <code class="codeph">CONVERT DATABASE</code> to the desired locations on the destination host. </span><div>
                              <p>In Step <a href="rman-transporting-data-across-platforms.html#GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC__CHDBBAEJ">3</a>, the command creates the files in the <code class="codeph">/tmp/convertdb/</code> directory on the source host. Move these files to the directory on the destination host that will contain the destination database files.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the path to the data files is different on the destination host, then edit the transport script to refer to the new data file locations.</span></li>
                        <li class="stepexpand"><span>If necessary, edit the initialization parameter file to change any settings for the destination database.</span><div>
                              <p>You must edit several entries at the top of the initialization parameter file when the database is moved to the destination platform. For example, the initialization parameter file may look as follows:</p><pre class="oac_no_warn" dir="ltr"># Please change the values of the following parameters:
 control_files            = "/tmp/convertdb/cf_D-NEWDBT_id-1778429277_00gb9u2s"
 service_names            = "NEWDBT.example.com"
 db_recovery_file_dest    = "/tmp/convertdb/orcva"
 db_recovery_file_dest_size= 10737418240
 instance_name            = "NEWDBT"
 db_name                  = "NEWDBT"
 plsql_native_library_dir = "/tmp/convertdb/plsqlnld1"
</pre></div>
                        </li>
                        <li class="stepexpand"><span>If necessary, edit the transport script to use the new names for the converted data files.</span><div>
                              <p>In the example in Step <a href="rman-transporting-data-across-platforms.html#GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC__CHDBBAEJ">3</a>, the transport script is named <code class="codeph">/tmp/convertdb/transportscript.sql</code>. You run this script on the <a href="glossary.html#GUID-45F2720B-CAFE-4120-8D54-05F435852FA3"><span class="xrefglossterm">destination host</span></a> to create the database. Thus, you must edit this script with the correct names for the data files.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>On the destination host, start SQL*Plus and connect to the destination database instance as <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> using operating system authentication.</span><div>
                              <p>For example, connect as follows:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT / AS SYSBACKUP
</pre><p>If you choose not to use operating system authentication, you can create a <a href="glossary.html#GUID-AFB3C6E2-4C77-460F-A64D-A980EBF628EB"><span class="xrefglossterm">password file</span></a> and then connect with a user name and password.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Execute the transport script in SQL*Plus to create the new database on the destination host.</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; @transportscript
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>When the transport script finishes, the creation of the new database is complete.</p>
                        <div class="infoboxnotealso" id="GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC__GUID-160618C8-3C05-4CD7-9A76-117B73B2B602">
                           <p class="notep1">See Also:</p>
                           <p><a href="../admin/getting-started-with-database-administration.html#ADMIN11046" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about operating system authentication and password file authentication
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89988"></a><div class="props_rev_3"><a id="GUID-D8EF7402-2AEE-4FB3-8B84-5BC081333005" name="GUID-D8EF7402-2AEE-4FB3-8B84-5BC081333005"></a><h4 id="BRADV-GUID-D8EF7402-2AEE-4FB3-8B84-5BC081333005" class="sect4"><span class="enumeration_section">28.5.3 </span>Converting Data Files on the Destination Host When Transporting a Database
                  </h4>
                  <div>
                     <div class="section">
                        <p>This section assumes that you have met all of the <code class="codeph">CONVERT DATABASE</code> command prerequisites and followed the steps in <span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-B0178538-6E41-455D-8166-FBB1EDC5D198">Checking the Database Before Cross-Platform Database Conversion</a>"</span>. The goal of this procedure is to convert the format of data files on the destination host as part of a cross-platform database transport.
                        </p>
                        <div class="infoboxnotealso" id="GUID-D8EF7402-2AEE-4FB3-8B84-5BC081333005__GUID-0CB3A329-6453-4D34-B249-CF6F00EF2F68">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-C91F21C3-C3C0-43B5-9D9D-2F9408F8808D">Overview of Database Conversion Using Image Copies</a>"</span></p>
                        </div>
                        <p>Perform the data file conversion in the following phases:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span><a href="rman-transporting-data-across-platforms.html#GUID-017FDD9B-3421-4A07-8FC2-67CAAA9BDA2E">Performing Preliminary Data File Conversion Steps on the Source Host</a></span></li>
                        <li><span><a href="rman-transporting-data-across-platforms.html#GUID-4D513D2F-C544-4DE3-85BF-F6A5CE959DB9">Running the Conversion Scripts on the Destination Host</a></span></li>
                     </ol>
                  </div><a id="BRADV482"></a><a id="BRADV89989"></a><div class="props_rev_3"><a id="GUID-017FDD9B-3421-4A07-8FC2-67CAAA9BDA2E" name="GUID-017FDD9B-3421-4A07-8FC2-67CAAA9BDA2E"></a><h5 id="BRADV-GUID-017FDD9B-3421-4A07-8FC2-67CAAA9BDA2E" class="sect5"><span class="enumeration_section">28.5.3.1 </span>Performing Preliminary Data File Conversion Steps on the Source Host
                     </h5>
                     <div>
                        <div class="section">
                           <p>In this procedure, you execute the <code class="codeph">CONVERT DATABASE</code> command on the source host. This command generates an initialization parameter file and scripts that you can edit for use on the destination host. You also copy the unconverted data files from the source host to the destination host.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-017FDD9B-3421-4A07-8FC2-67CAAA9BDA2E__GUID-E0A8640A-8486-4EC5-818B-D578F4CA0159">To perform preliminary data file conversion steps on the source host:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Ensure that the database is open in read-only mode.</span></li>
                           <li class="stepexpand"><span>Start RMAN and connect to the <span class="italic">source</span> database as <code class="codeph">TARGET</code>, as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a>"</span>. </span></li>
                           <li class="stepexpand"><span>Run the <code class="codeph">CONVERT</code> <code class="codeph">DATABASE ON DESTINATION PLATFORM</code> command.</span><div>
                                 <p>The following example shows a sample <code class="codeph">CONVERT DATABASE</code> command (sample output included). The <code class="codeph">ON DESTINATION PLATFORM</code> parameter specifies that any <code class="codeph">CONVERT</code> commands required for data files are executed on the destination platform rather than the source platform. The <code class="codeph">FORMAT</code> parameter specifies the naming scheme for the generated files.
                                 </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONVERT DATABASE
2&gt;   ON DESTINATION PLATFORM
3&gt;   CONVERT SCRIPT '/tmp/convertdb/convertscript-target'
4&gt;   TRANSPORT SCRIPT '/tmp/convertdb/transportscript-target'
5&gt;   NEW DATABASE 'newdbt'
6&gt;   FORMAT '/tmp/convertdb/%U';
 
Starting conversion at source at 28-JAN-13
using target database control file instead of recovery catalog
allocated channel: ORA_DISK_1
channel ORA_DISK_1: sid=39 devtype=DISK
 
External table SH.SALES_TRANSACTIONS_EXT found in the database
.
.
.
Directory SYS.ORACLE_HOME found in the database
Directory SYS.ORACLE_BASE found in the database
Directory SYS.LOG_FILE_DIR found in the database
.
.
.
BFILE PM.PRINT_MEDIA found in the database
 
User SYS with SYSDBA and SYSOPER privilege found in password file
User SBU with SYSBACKUP privilege found in password file
channel ORA_DISK_1: starting to check datafiles
input datafile fno=00001 name=/disk1/oracle/dbs/tbs_01.f
channel ORA_DISK_1: datafile checking complete, elapsed time: 00:00:00
channel ORA_DISK_1: starting to check datafiles
input datafile fno=00002 name=/disk1/oracle/dbs/tbs_ax1.f
channel ORA_DISK_1: datafile checking complete, elapsed time: 00:00:00
channel ORA_DISK_1: starting to check datafiles
input datafile fno=00017 name=/disk1/oracle/dbs/tbs_03.f
channel ORA_DISK_1: datafile checking complete, elapsed time: 00:00:00
.
.
.
channel ORA_DISK_1: starting to check datafiles
input datafile fno=00015 name=/disk1/oracle/dbs/tbs_51.f
channel ORA_DISK_1: datafile checking complete, elapsed time: 00:00:00
channel ORA_DISK_1: starting to check datafiles
input datafile fno=00016 name=/disk1/oracle/dbs/tbs_52.f
channel ORA_DISK_1: datafile checking complete, elapsed time: 00:00:00
Edit init.ora file /tmp/convertdb/init_00gb9u2s_1_0.ora. This PFILE will be used to create the database on the target platform
Run SQL script /tmp/convertdb/transportscript-target on the target platform to create database
Run RMAN script /tmp/convertdb/convertscript-target on target platform to convert datafiles
To recompile all PL/SQL modules, run utlirp.sql and utlrp.sql on the target platform
To change the internal database identifier, use DBNEWID Utility
Finished conversion at source at 28-JAN-13

Starting Control File Autobackup at 28-JAN-13
piece handle=/disk2/oracle/backups/c-1678658224-20131202-02 comment=NONE
Finished Control File Autobackup at 28-JAN-13
</pre><p>The previous command creates a transport script, an initialization parameter file for the new database, and a convert script containing RMAN <code class="codeph">CONVERT DATAFILE</code> commands for each data file being converted.
                                 </p>
                                 <div class="infoboxnote" id="GUID-017FDD9B-3421-4A07-8FC2-67CAAA9BDA2E__GUID-B2388606-AEE4-4C6C-9716-D8191B88432A">
                                    <p class="notep1">Note:</p>
                                    <p><code class="codeph">CONVERT</code> <code class="codeph">DATABASE</code> <code class="codeph">ON</code> <code class="codeph">DESTINATION</code> <code class="codeph">PLATFORM</code> does <span class="italic">not</span> produce converted data file copies. The command only creates scripts.
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Use an operating system utility to copy the following files to a temporary location on the destination host:</span><div>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The data files to be converted</p>
                                    </li>
                                    <li>
                                       <p>The convert script</p>
                                    </li>
                                    <li>
                                       <p>The transport script</p>
                                    </li>
                                    <li>
                                       <p>The initialization file for the destination database</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Make the source database read/write.</span></li>
                        </ol>
                     </div>
                  </div><a id="BRADV484"></a><a id="BRADV89990"></a><div class="props_rev_3"><a id="GUID-4D513D2F-C544-4DE3-85BF-F6A5CE959DB9" name="GUID-4D513D2F-C544-4DE3-85BF-F6A5CE959DB9"></a><h5 id="BRADV-GUID-4D513D2F-C544-4DE3-85BF-F6A5CE959DB9" class="sect5"><span class="enumeration_section">28.5.3.2 </span>Running the Conversion Scripts on the Destination Host
                     </h5>
                     <div>
                        <div class="section">
                           <p>This section explains how to use the scripts created in the previous section to convert the data files on the destination host and complete the transport process. </p>
                           <p>The convert script created in the previous phase uses the original data file names of the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> files. The <code class="codeph">FORMAT</code> parameter specifies the name that was generated with the <code class="codeph">FORMAT</code> or <code class="codeph">DB_FILE_NAME_CONVERT</code> parameter of the <code class="codeph">CONVERT DATABASE</code> command.
                           </p>
                           <p>If the data files of the source database are accessible from the destination host with the same path names, then so long as the source database is read-only you can run the convert script on the destination host without any changes. For example, if the source and destination hosts both use NFS to mount a disk containing the source data files, and if the mount point for both hosts is <code class="codeph">/fs1/dbs/</code>, then no editing is needed.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-4D513D2F-C544-4DE3-85BF-F6A5CE959DB9__GUID-C42134E1-7D96-4939-9036-9301BC640A63">To run the conversion scripts on the destination host:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>If necessary, edit the convert script.</span><div>
                                 <p>In the script, one <code class="codeph">CONVERT</code> <code class="codeph">DATAFILE</code> command exists for each data file to be converted. The convert script must indicate the current temporary file names of the unconverted data files and the output file names of the converted data files. A typical convert script looks as follows:
                                 </p><pre class="oac_no_warn" dir="ltr">RUN
{
 CONVERT
 FROM PLATFORM 'Linux IA (32-bit)'
 PARALLELISM 10
  DATAFILE '/disk1/oracle/dbs/tbs_01.f'
  FORMAT '/tmp/convertdb/data_D-TV_I-1778429277_TS-SYSTEM_FNO-1_7qgb9u2s'
 
  DATAFILE '/disk1/oracle/dbs/tbs_ax1.f'
  FORMAT '/tmp/convertdb/data_D-TV_I-1778429277_TS-SYSAUX_FNO-2_7rgb9u2s'
 
  DATAFILE '/disk1/oracle/dbs/tbs_03.f'
  FORMAT '/tmp/convertdb/data_D-TV_I-1778429277_TS-SYSTEM_FNO-17_7sgb9u2s'
 
 DATAFILE '/disk1/oracle/dbs/tbs_51.f'
 FORMAT '/tmp/convertdb/data_D-TV_I-1778429277_TS-TBS_5_FNO-15_8egb9u2u'
 
 DATAFILE '/disk1/oracle/dbs/tbs_52.f'
  FORMAT '/tmp/convertdb/data_D-TV_I-1778429277_TS-TBS_5_FNO-16_8fgb9u2u';
}
</pre><p>Edit each <code class="codeph">DATAFILE</code> command in the convert script to specify the temporary location of each data file as input. Also, edit the <code class="codeph">FORMAT</code> parameter of each command to specify the desired final location of the data files of the transported database.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If necessary, edit the initialization parameter file on the destination host to change settings for the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>.</span><div>
                                 <p>You must edit several entries at the top of the initialization parameter file. For example, the initialization parameter file may look as follows:</p><pre class="oac_no_warn" dir="ltr"># Please change the values of the following parameters:
control_files            = "/tmp/convertdb/cf_D-NEWDBT_id-1778429277_00gb9u2s"
db_recovery_file_dest    = "/tmp/convertdb/orcva"
db_recovery_file_dest_size= 10737418240
instance_name            = "NEWDBT"
service_names            = "NEWDBT.example.com"
plsql_native_library_dir = "/tmp/convertdb/plsqlnld1"
db_name                  = "NEWDBT"
</pre></div>
                           </li>
                           <li class="stepexpand"><span>On the destination host, use SQL*Plus to start the database instance in <code class="codeph">NOMOUNT</code> mode.</span><div>
                                 <p>Specify the initialization parameter file that you copied in the preceding step. For example, enter the following command:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; STARTUP NOMOUNT PFILE='/tmp/init_convertdb_00i2gj63_1_0.ora'
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Start RMAN and connect to the destination database (not the source database) as <code class="codeph">TARGET</code>. For example, enter the following command:</span><div><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt; CONNECT TARGET "sbu@prod_dest AS SYSBACKUP";
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the convert script at the RMAN prompt. For example, enter the following command:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; @/tmp/convertdb/convertscript-target
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Shut down the database instance.</span><div>
                                 <p>This step is necessary because the transport script that must execute includes a <code class="codeph">STARTUP NOMOUNT</code> command.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If necessary, edit the transport script to use the new names for the converted data files.</span><div>
                                 <p>In the example in Step <a href="rman-transporting-data-across-platforms.html#GUID-E681FF6F-0927-4ED5-BF64-73926C4121DC__CHDBBAEJ">3</a>, the transport script is <code class="codeph">/tmp/convertdb/transportscript.sql</code>. You run this script on the destination host to create the database. Thus, you must edit this script with the correct names for the data files.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Execute the transport script in SQL*Plus.</span><div>
                                 <p>For example, create the new database on the destination host as follows:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @/tmp/convertdb/transportscript
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>When the transport script completes, the destination database is created.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="BRADV861"></a><a id="BRADV723"></a><a id="BRADV709"></a><a id="BRADV708"></a><div class="props_rev_3"><a id="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD" name="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD"></a><h3 id="BRADV-GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD" class="sect3"><span class="enumeration_section">28.6 </span>Overview of Cross-Platform Data Transport Using Backup Sets 
               </h3>
               <div>
                  <p>RMAN can transport databases, data files, and tablespaces across platforms by using backup sets. Performing cross-platform data transport with backup sets enables you to use block compression to reduce the size of backups. This improves backup performance and reduces the time taken to transport backups over the network.</p>
                  <div class="infoboxnote" id="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD__GUID-223FC536-BAE0-486C-A858-2F4E2ACD1F38">
                     <p class="notep1">Note:</p>
                     <p>To perform cross-platform data transport using backup sets, the version of the destination database must be Oracle Database 12<span class="italic">c</span> Release 1 (12.1) or later.
                     </p>
                  </div>
                  <p>When you transport an entire database to a different platform, the source platform and the destination platform must use the same endian format. However, user tablespaces can be transported to a destination platform that uses a different endian format from the source platform.</p>
                  <p>On the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>, you create a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> of the data that needs to be transported. A cross-platform backup is an RMAN backup that can be restored on a destination platform that is different from the source platform. On the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>, you restore and then recover the <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> to obtain the data that you wanted to transport. Cross-platform backups can be restored on any platform that is supported in the <code class="codeph">V$TRANSPORTABLE_PLATFORM</code> view.
                  </p>
                  <p>RMAN does not catalog backup sets created for cross-platform transport in the control file. This ensures that backup sets created for cross-platform transport are not used during regular restore operations.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD__GUID-E743E024-CE1F-467C-A2B0-25951AC1C83A">About Clauses Used to Create Cross-Platform Backups Using Backups Sets</p>
                  </div>
                  <!-- class="section" -->
                  <p>Use the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause in the <code class="codeph">BACKUP</code> command to create cross-platform backups. When you create a cross-platform backup of read-only tablespaces using either of these clauses, RMAN can also create a Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> containing the metadata required to plug these tablespaces into the destination database.
                  </p>
                  <p>Although the <code class="codeph">TO PLATFORM</code> and <code class="codeph">FOR TRANSPORT</code> clauses are not supported in Oracle Database 10<span class="italic">g</span> Release 2 (10.2) or Oracle Database 11<span class="italic">g</span>, you can transport data from these versions of the database to Oracle Database 12<span class="italic">c</span> Release 1 (12.1). On the source database, you first create backup sets of the tablespaces to be transported and then create the Data Pump export dump file by using the <code class="codeph">expdp</code> command. To restore these backups on the destination database, you perform a restore operation using the <code class="codeph">RESTORE</code> command and then use the <code class="codeph">impdp</code> command to import the Data Pump export dump file.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD__GUID-0EA9D324-300F-4175-B0B7-C51787EBBB47">Scenarios in Which RMAN Automatically Creates a Cross-Platform Backup of the Database</p>
                     <p>When you use backup sets to back up an entire database RMAN automatically creates a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> of the database in addition to the specified backup if the following conditions are met:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Prerequisites for transporting an entire database as a backup set are satisfied.</p>
                           <div class="infoboxnotealso" id="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD__GUID-1BE46072-CA9D-4FC2-8F33-86C4D7F58BF4">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-76834111-5476-4591-A472-7DA5E2F4464D__CIHEIGFB">Prerequisites for Cross-Platform Database Transport Using Backup Sets</a>"</span></p>
                           </div>
                        </li>
                        <li>
                           <p>The <code class="codeph">BACKUP</code> command does not contain any clause that is incompatible with the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause.
                           </p>
                           <div class="infoboxnotealso" id="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD__GUID-B95CCB05-EE9B-42AC-9D89-004E7527E7E3">
                              <p class="notep1">See Also:</p>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for information about the incompatible clauses
                              </p>
                           </div>
                        </li>
                     </ul>
                     <p>The following <code class="codeph">BACKUP</code> command creates a cross-platform backup of the database. Although the command does not contain either the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause to indicate that it is a cross-platform backup, because the conditions described in <span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-76834111-5476-4591-A472-7DA5E2F4464D__CIHEIGFB">Prerequisites for Cross-Platform Database Transport Using Backup Sets</a>"</span> are satisfied, an implicit cross-platform backup of the database is created.
                     </p><pre class="oac_no_warn" dir="ltr">RUN
{
   ALLOCATE CHANNEL c1 DEVICE TYPE DISK;
   ALLOCATE CHANNEL c2 DEVICE TYPE DISK;
   ALLOCATE CHANNEL c3 DEVICE TYPE DISK;
   BACKUP
      SKIP OFFLINE
      FILESPERSET 1
      FORMAT '/tmp/xplat_backups/implicit_full_db_%U'
   DATABASE;}
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD__GUID-DC62B72F-94BC-47AA-A444-01434B153D51">High-Level Steps to Transport Data Across Platforms Using Backup Sets</p>
                  </div>
                  <!-- class="section" -->
                  <p>Transporting data across platforms using backup sets consists of the following high-level steps:</p>
                  <ol>
                     <li>
                        <p>On the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>, use the <code class="codeph">BACKUP</code> command to create a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> of the database, tablespaces, or data files that need to be transported to a different platform. The backup is created as backup sets on the source host.
                        </p>
                        <div class="infoboxnotealso" id="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD__GUID-695BFCAE-B7A7-401C-9180-6AAB299CFCFA">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-FDD263CF-7C8F-4E9D-868C-68D17156EE36">About Backing Up Data on the Source Database for Cross-Platform Data Transport</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-FE9ADA7F-3102-401B-B133-5F969E19121C">About the Data Pump Export Dump File Used for Cross-Platform Tablespace Transport</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>Transfer the backup sets created on the source host to the destination host.</p>
                        <p>You can transport the backup sets using operating system utilities. For example, if your operating system is Linux or UNIX, you can use the <code class="codeph">cp</code> command to transfer backup sets.
                        </p>
                     </li>
                     <li>
                        <p>On the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>, restore the backup sets that were transferred from the source host. Use the <code class="codeph">RESTORE</code> command to restore cross-platform backups.
                        </p>
                        <p>When you are transporting tablespaces across platforms by using inconsistent tablespace backups, the additional step of recovering the tablespaces is required as described in <span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A" title="This section describes the high-level steps to perform cross-platform transport of inconsistent tablespaces using backup sets or image copies.">Performing Cross-Platform Transport of Tablespaces Using Inconsistent Backups</a>"</span>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD__GUID-4B1D1197-883D-4616-B9DF-FA539B3BFE85">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-626AB5CF-F183-4C73-B14A-94CEDA409AE3">About Restoring Data on the Destination Host During Cross-Platform Data Transport</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-B3295ECD-1359-49D8-9F81-3316B2DE722B">About Selecting Objects to Be Restored from Cross-Platform Backups</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-4F2E196D-A147-48E1-8D32-48974841F2AD">About Names and Locations for Restored Objects on the Destination Database</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-A98EEA2C-54C4-4AD5-A31F-FFFA2565C00D">About Importing the Data Pump Export Dump File Created During Cross-Platform Tablespace Transport</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
                  <p>Detailed information about how to transport data across platforms using backup sets, the prerequisites, and the RMAN syntax used are provided in the following sections:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-76834111-5476-4591-A472-7DA5E2F4464D">Performing Cross-Platform Database Transport with Backup Sets</a>"</span></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54">Performing Cross-Platform Transport of Read-Only Tablespaces Using Backup Sets</a>"</span></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A" title="This section describes the high-level steps to perform cross-platform transport of inconsistent tablespaces using backup sets or image copies.">Performing Cross-Platform Transport of Tablespaces Using Inconsistent Backups</a>"</span></p>
                     </li>
                  </ul>
               </div><a id="BRADV812"></a><a id="BRADV813"></a><a id="BRADV814"></a><a id="BRADV815"></a><a id="BRADV710"></a><div class="props_rev_3"><a id="GUID-C25B5432-E198-44F0-BE95-9CB4B2A764C4" name="GUID-C25B5432-E198-44F0-BE95-9CB4B2A764C4"></a><h4 id="BRADV-GUID-C25B5432-E198-44F0-BE95-9CB4B2A764C4" class="sect4"><span class="enumeration_section">28.6.1 </span>Basic Terms Used in Cross-Platform Data Transport Using Backup Sets
                  </h4>
                  <div>
                     <p>Before using backup sets to perform cross-platform data transport, it is useful to understand the following terms.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C25B5432-E198-44F0-BE95-9CB4B2A764C4__GUID-B0CF1604-A4F6-452E-8501-532ED5B379E2">Foreign Data File</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Data files that do not belong to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a> are called <a href="glossary.html#GUID-9C271FBB-5FE5-4B80-B8E8-0536FF2EA1C1"><span class="xrefglossterm">foreign data file</span></a>s. These data files are being plugged in to the destination database as part of a data transfer to the destination database. In the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>, this data file is identified by its original data file number.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C25B5432-E198-44F0-BE95-9CB4B2A764C4__GUID-065BDBBB-9870-47F5-A7C9-60FC00DED693">Foreign Tablespace</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>A <a href="glossary.html#GUID-65A84A4D-0B9F-46E6-979E-0676061771BD"><span class="xrefglossterm">foreign tablespace</span></a> is a set of foreign data files that comprise a tablespace in the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>. These foreign data files do not belong to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>, but are being transported into the destination database and are identified by the original tablespace name in the source database.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C25B5432-E198-44F0-BE95-9CB4B2A764C4__GUID-B9A9DEC8-C1A5-4A05-A1C1-7E098D2833FB">Foreign Data File Copy</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>A <a href="glossary.html#GUID-9FD41C84-AEBC-419A-8F0F-175CFF496A71"><span class="xrefglossterm">foreign data file copy</span></a> is a data file that was restored from a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a>. It cannot be directly plugged in to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a> because it is inconsistent. You must apply a cross-platform incremental backup to this data file and recover it before you can plug it in to the destination database.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C25B5432-E198-44F0-BE95-9CB4B2A764C4__GUID-234F97F2-D19E-44BF-AFA4-2394D558A5B5">Data Pump Destination</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>A Data Pump destination is a location on the disk of the server host of the destination database on which the Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> and the Data Pump log files are stored.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV712"></a><div class="props_rev_3"><a id="GUID-FDD263CF-7C8F-4E9D-868C-68D17156EE36" name="GUID-FDD263CF-7C8F-4E9D-868C-68D17156EE36"></a><h4 id="BRADV-GUID-FDD263CF-7C8F-4E9D-868C-68D17156EE36" class="sect4"><span class="enumeration_section">28.6.2 </span>About Backing Up Data on the Source Database for Cross-Platform Data Transport
                  </h4>
                  <div>
                     <p>To create the backup set containing data that must be transported to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>, use the <code class="codeph">BACKUP</code> command on the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>. To indicate that you are creating a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a>, the <code class="codeph">BACKUP</code> command must contain either the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause.
                     </p>
                     <p>When <a id="d127931e3471" class="indexterm-anchor"></a>you use <code class="codeph">FOR TRANSPORT</code>, the backup set that is created can be transported to any destination database. If the destination database uses an endian format that is different from that of the source database, then the required endian format conversion is performed on the destination database. The benefit of this method is that the processing overhead of the conversion operation is offloaded to the destination database.
                     </p>
                     <p>When you <a id="d127931e3481" class="indexterm-anchor"></a>use <code class="codeph">TO PLATFORM</code>, the endian format conversion is performed on the source database. The target platform specified by the <code class="codeph">TO PLATFORM</code> clause must be a supported platform for cross-platform transport. The <code class="codeph">V$TRANSPORTABLE_PLATFORM</code> view contains the list of supported platforms.
                     </p>
                     <p>You can create cross-platform backups that contain multiple backup pieces. See the <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for examples.
                     </p>
                     <p>You cannot use certain clauses of the <code class="codeph">BACKUP</code> command when you create a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> using either the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause. See <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for information about the clauses that are not compatible with <code class="codeph">TO PLATFORM</code> and <code class="codeph">FOR TRANSPORT</code>.
                     </p>
                  </div>
               </div><a id="BRADV713"></a><div class="props_rev_3"><a id="GUID-FE9ADA7F-3102-401B-B133-5F969E19121C" name="GUID-FE9ADA7F-3102-401B-B133-5F969E19121C"></a><h4 id="BRADV-GUID-FE9ADA7F-3102-401B-B133-5F969E19121C" class="sect4"><span class="enumeration_section">28.6.3 </span>About the Data Pump Export Dump File Used for Cross-Platform Tablespace Transport
                  </h4>
                  <div>
                     <p>When you create a cross-platform consistent tablespace backup, the backup set contains the data files that contain data related to the specified tablespaces. A consistent tablespace backup is a backup of one or more tablespaces that is created when the tablespaces are in read-only mode. After you restore this backup in your <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>, the tablespaces must be plugged in to the destination database. To do this, in addition to the backup set containing the tablespace data, you need the metadata for these tablespaces from the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>.
                     </p>
                     <p>On the source database, use the<a id="d127931e3618" class="indexterm-anchor"></a> <code class="codeph">DATAPUMP</code> clause in the <code class="codeph">BACKUP</code> command to create the metadata required to plug tablespaces in to the target database. The metadata is stored in a Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> as a separate backup set. Use this backup set to plug the transported tablespaces in to the target database.
                     </p>
                     <p>You can specify how the backup set containing the tablespace metadata is named by using the <code class="codeph">FORMAT</code> option with the <code class="codeph">DATAPUMP</code> clause. If you omit the <code class="codeph">FORMAT</code> option, then the format specified in the <code class="codeph">BACKUP</code> command is used to name the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a>. When no <code class="codeph">FORMAT</code> option is specified in the <code class="codeph">BACKUP</code> command, the default format is used.
                     </p>
                     <div class="infoboxnote" id="GUID-FE9ADA7F-3102-401B-B133-5F969E19121C__GUID-F6114C21-C314-45D9-A016-4E276B8D3458">
                        <p class="notep1">Note:</p>
                        <p>When you use the <code class="codeph">DATAPUMP</code> clause, the tablespaces that are being transported must be made read-only.
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV714"></a><div class="props_rev_3"><a id="GUID-626AB5CF-F183-4C73-B14A-94CEDA409AE3" name="GUID-626AB5CF-F183-4C73-B14A-94CEDA409AE3"></a><h4 id="BRADV-GUID-626AB5CF-F183-4C73-B14A-94CEDA409AE3" class="sect4"><span class="enumeration_section">28.6.4 </span>About Restoring Data on the Destination Host During Cross-Platform Data Transport
                  </h4>
                  <div>
                     <p>On the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>, you use the <code class="codeph">RESTORE</code> command to restore the database, tablespaces, or data files contained in a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> consisting of backup sets. When you perform a cross-platform restore operation, you must use the <code class="codeph">foreignFileSpec</code> subclause of the <code class="codeph">RESTORE</code> command. See <a href="../rcmrf/foreignFileSpec.html#RCMRF90573" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for more information.
                     </p>
                     <p>When you restore cross-platform backups, you must specify the following information:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Backup set that contains data that was backed up on the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a></p>
                           <p>Use the<a id="d127931e3770" class="indexterm-anchor"></a> <code class="codeph">BACKUPSET</code> option of the <code class="codeph">foreignFileSpec</code> subclause to specify the name of the cross-platform backup set from which data must be restored. If the cross-platform backup consists of multiple backup sets, use a separate <code class="codeph">BACKUPSET</code> clause for each backup set. To restore tablespaces, you must specify the backup sets that contain the tablespace data using the <code class="codeph">BACKUPSET</code> clause and the backup set that contains the tablespace metadata using the<a id="d127931e3788" class="indexterm-anchor"></a> <code class="codeph">DUMP FILE</code> option of the <code class="codeph">foreignFileSpec</code> subclause.
                           </p>
                           <p></p>
                           <p>Using multiple backup sets is not supported during recovery. You cannot apply multiple backup sets to a set of foreign data files.</p>
                           <div class="infoboxnotealso" id="GUID-626AB5CF-F183-4C73-B14A-94CEDA409AE3__GUID-8B59B621-3E2C-4712-A065-C7CB66FE7679">
                              <p class="notep1">See Also:</p>
                              <p><a href="../rcmrf/foreignFileSpec.html#RCMRF90573" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for information about <code class="codeph">BACKPSET</code> and <code class="codeph">DUMP FILE</code></p>
                           </div>
                        </li>
                        <li>
                           <p>Data file numbers or names of tablespaces as they exist in the source database</p>
                           <p>If you are restoring data files or tablespaces, you can restore specific tablespaces or data files that are contained in a cross-platform backup.</p>
                           <div class="infoboxnotealso" id="GUID-626AB5CF-F183-4C73-B14A-94CEDA409AE3__GUID-39FCF0FD-F300-4707-AC2A-54E081D6D1B3">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-4F2E196D-A147-48E1-8D32-48974841F2AD">About Names and Locations for Restored Objects on the Destination Database</a>"</span></p>
                           </div>
                        </li>
                        <li>
                           <p>Location where the restored data files must be stored</p>
                           <p>Use the <code class="codeph">FORMAT</code> clause to specify the location and the names used to store the restored data files.
                           </p>
                           <p>If you do not provide a destination, then the <code class="codeph">DB_FILE_CREATE_DEST</code> initialization parameter must be set in the target platform. RMAN restores the data files to the location specified by this parameter using new Oracle Managed File (OMF) names.
                           </p>
                           <div class="infoboxnotealso" id="GUID-626AB5CF-F183-4C73-B14A-94CEDA409AE3__GUID-3DDA761D-071B-4EF0-B51D-3823699F1020">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-4F2E196D-A147-48E1-8D32-48974841F2AD">About Names and Locations for Restored Objects on the Destination Database</a>"</span></p>
                           </div>
                        </li>
                        <li>
                           <p>Name of the source platform (only when conversion is performed on the destination database)</p>
                           <p>Use<a id="d127931e3849" class="indexterm-anchor"></a> <code class="codeph">FROM PLATFORM</code> to specify the name of the source platform on which the backup sets were created. The platform name must exactly match the name specified while creating the backup set. If there is a difference in the platform names, the restore operation fails.
                           </p>
                           <div class="infoboxnotealso" id="GUID-626AB5CF-F183-4C73-B14A-94CEDA409AE3__GUID-526AFCE0-A7E6-4884-BF1F-171DB2AA84AA">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-FDD263CF-7C8F-4E9D-868C-68D17156EE36">About Backing Up Data on the Source Database for Cross-Platform Data Transport</a>"</span></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV716"></a><a id="BRADV717"></a><a id="BRADV715"></a><div class="props_rev_3"><a id="GUID-B3295ECD-1359-49D8-9F81-3316B2DE722B" name="GUID-B3295ECD-1359-49D8-9F81-3316B2DE722B"></a><h4 id="BRADV-GUID-B3295ECD-1359-49D8-9F81-3316B2DE722B" class="sect4"><span class="enumeration_section">28.6.5 </span>About Selecting Objects to Be Restored from Cross-Platform Backups
                  </h4>
                  <div>
                     <p>While restoring data from a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a>, you can either restore all the data contained in the cross-platform backup or only certain objects.
                     </p>
                     <div class="infoboxnotealso" id="GUID-B3295ECD-1359-49D8-9F81-3316B2DE722B__GUID-6A6095F1-ACE8-4BE6-8668-15E6E6B7C64A">
                        <p class="notep1">See Also:</p>
                        <p><a href="../rcmrf/foreignFileSpec.html#RCMRF90573" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for more information about the clauses described in this section
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-B3295ECD-1359-49D8-9F81-3316B2DE722B__GUID-36E6D10F-4D7A-46F1-AB0A-07651AD6633A">Restoring All Data Contained in the Cross-Platform Backup</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To restore the entire database, use the<a id="d127931e3954" class="indexterm-anchor"></a> <code class="codeph">FOREIGN DATABASE</code> clause in the <code class="codeph">RESTORE</code> command. This clause can only be used when restoring from a whole database backup set and when both the <a href="glossary.html#GUID-F5230E13-106F-4840-9E58-3AB7071E9B21"><span class="xrefglossterm">source platform</span></a> and <a href="glossary.html#GUID-0E17C982-762C-46D3-83BB-C86302304093"><span class="xrefglossterm">destination platform</span></a> use the same endian format. You can optionally use the <code class="codeph">FORMAT</code> clause to specify the pattern used to name restored files.
                        </p>
                        <p>To restore all the data files contained in the cross-platform backup, use the<a id="d127931e3979" class="indexterm-anchor"></a> <code class="codeph">ALL FOREIGN DATAFILES</code> clause in the <code class="codeph">RESTORE</code> command.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B3295ECD-1359-49D8-9F81-3316B2DE722B__GUID-9D837144-A0DB-447B-A947-F0E97FA96648">Restoring Part of the Data Contained in the Cross-Platform Backup Set</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You can restore some data files or tablespaces contained in a cross-platform backup. To restore only some data files, use the<a id="d127931e3996" class="indexterm-anchor"></a> <code class="codeph">FOREIGN DATAFILE</code> clause in the <code class="codeph">RESTORE</code> command. Specify the absolute file number of the data file in the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> while restoring data. To restore only some tablespaces contained in a cross-platform backup, use the<a id="d127931e4011" class="indexterm-anchor"></a> <code class="codeph">FOREIGN TABLESPACE</code> clause in the <code class="codeph">RESTORE</code> command. Specify the names of the tablespaces that must be restored as part of this clause.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV718"></a><div class="props_rev_3"><a id="GUID-4F2E196D-A147-48E1-8D32-48974841F2AD" name="GUID-4F2E196D-A147-48E1-8D32-48974841F2AD"></a><h4 id="BRADV-GUID-4F2E196D-A147-48E1-8D32-48974841F2AD" class="sect4"><span class="enumeration_section">28.6.6 </span>About Names and Locations for Restored Objects on the Destination Database
                  </h4>
                  <div>
                     <p>When you restore a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a>, specify the data file names and the location to which they are restored using one of the following options in the <code class="codeph">RESTORE</code> command:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use the <code class="codeph">TO NEW</code> option with the <code class="codeph">ALL FOREIGN DATAFILES</code> clause to restore the data files to the location specified by the <code class="codeph">DB_FILE_CREATE_DEST</code> parameter. By default, RMAN uses OMF names for the data files.
                           </p>
                        </li>
                        <li>
                           <p>Use the <code class="codeph">FORMAT</code> option to specify the pattern used to name restored data files. You can also specify the directory for these files as part of the <code class="codeph">FORMAT</code> specification.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-4F2E196D-A147-48E1-8D32-48974841F2AD__GUID-3D6AB2D9-C254-4A45-8E85-3F40DADAB7C8">
                        <p class="notep1">See Also:</p>
                        <p><a href="../rcmrf/RESTORE.html#RCMRF149" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for more information about the clauses described in this section
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV719"></a><div class="props_rev_3"><a id="GUID-A98EEA2C-54C4-4AD5-A31F-FFFA2565C00D" name="GUID-A98EEA2C-54C4-4AD5-A31F-FFFA2565C00D"></a><h4 id="BRADV-GUID-A98EEA2C-54C4-4AD5-A31F-FFFA2565C00D" class="sect4"><span class="enumeration_section">28.6.7 </span>About Importing the Data Pump Export Dump File Created During Cross-Platform Tablespace Transport
                  </h4>
                  <div>
                     <p>While restoring a cross-platform backup of read-only tablespaces on the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>, use the <code class="codeph">DUMP FILE ... FROM BACKUPSET</code> option of the <code class="codeph">foreignFileSpec</code> subclause to restore the backup set that contains the Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a>. The export dump file contains the metadata required to plug the tablespace in to the destination database.
                     </p>
                     <p>Use<a id="d127931e4220" class="indexterm-anchor"></a> the <code class="codeph">DATAPUMP</code> clause in the <code class="codeph">RESTORE</code> command to specify the location on the destination host to which the export dump file is restored. If you omit this clause, the dump file is restored to a default operating system-specific location.
                     </p>
                     <p>By default, RMAN automatically imports the export dump file after all the required <a href="glossary.html#GUID-9C271FBB-5FE5-4B80-B8E8-0536FF2EA1C1"><span class="xrefglossterm">foreign data file</span></a>s are restored. You can choose not to import the export dump file by specifying the<a id="d127931e4237" class="indexterm-anchor"></a> <code class="codeph">NOIMPORT</code> clause. If you do not import the export dump file as part of the restore operation, then you must manually import the dump file when you want to plug the tablespaces in to the destination database.
                     </p>
                     <div class="infoboxnote" id="GUID-A98EEA2C-54C4-4AD5-A31F-FFFA2565C00D__GUID-34F23981-0AB1-4680-9655-4DD47B478F5C">
                        <p class="notep1">Note:</p>
                        <p>If the export dump file is automatically imported (that is, the <code class="codeph">NOIMPORT</code> clause is not used), then the destination database must be open in read/write mode.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV722"></a><a id="BRADV721"></a><div class="props_rev_3"><a id="GUID-76834111-5476-4591-A472-7DA5E2F4464D" name="GUID-76834111-5476-4591-A472-7DA5E2F4464D"></a><h3 id="BRADV-GUID-76834111-5476-4591-A472-7DA5E2F4464D" class="sect3"><span class="enumeration_section">28.7 </span>Performing Cross-Platform Database Transport with Backup Sets
               </h3>
               <div>
                  <p>You can transport an entire database from a source platform to a different destination platform. While creating the cross-platform backup to transport a database, you can convert the database either on the source database or the destination database. The benefit of performing the conversion on the destination database is that the processing overhead of the convert operation is offloaded from the source to the destination database.</p>
                  <div class="infoboxnotealso" id="GUID-76834111-5476-4591-A472-7DA5E2F4464D__GUID-74467A82-EE92-4147-B126-1CB84EC73C12">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-4644069A-7849-49F2-A1BF-2193EBAFFDBD">Overview of Cross-Platform Data Transport Using Backup Sets </a>"</span></p>
                  </div>
                  <div class="section" id="GUID-76834111-5476-4591-A472-7DA5E2F4464D__CIHEIGFB">
                     <p class="subhead2" id="GUID-76834111-5476-4591-A472-7DA5E2F4464D__GUID-08B785C7-F3FC-4FE6-BA46-F3CAE602BB7A">Prerequisites for Cross-Platform Database Transport Using Backup Sets</p>
                     <p>Before you create a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> to transport a database across platforms, the following prerequisites must be met:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">COMPATIBLE</code> parameter in the server parameter file of the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> and the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a> must be set to 12.0.0 or higher.
                           </p>
                        </li>
                        <li>
                           <p>The source database must be open in read-only mode.</p>
                        </li>
                        <li>
                           <p>The <code class="codeph">DBMS_TDB.CHECK_DB</code> procedure must run successfully.
                           </p>
                           <div class="infoboxnotealso" id="GUID-76834111-5476-4591-A472-7DA5E2F4464D__GUID-933939CF-2F90-47EC-B4D4-4FF4BBB78BC8">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-B0178538-6E41-455D-8166-FBB1EDC5D198">Checking the Database Before Cross-Platform Database Conversion</a>"</span> for information about using the <code class="codeph">DBMS_TDB.CHECK_DB</code> procedure
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>The source platform and destination platform must use the same endian format.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="infoboxnotealso" id="GUID-76834111-5476-4591-A472-7DA5E2F4464D__GUID-CAF6EDA1-8340-45F7-A9F6-B1456C0A7AF0">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-1EDA4225-1F4D-4960-A5E8-EE6AF777DF29">Steps to Transport a Database to a Different Platform Using Backup Sets</a>"</span> 
                     </p>
                  </div>
               </div><a id="BRADV724"></a><div class="props_rev_3"><a id="GUID-1EDA4225-1F4D-4960-A5E8-EE6AF777DF29" name="GUID-1EDA4225-1F4D-4960-A5E8-EE6AF777DF29"></a><h4 id="BRADV-GUID-1EDA4225-1F4D-4960-A5E8-EE6AF777DF29" class="sect4"><span class="enumeration_section">28.7.1 </span>Steps to Transport a Database to a Different Platform Using Backup Sets
                  </h4>
                  <div>
                     <div class="section">
                        <p>Use the following steps to transport an entire database from one platform to another:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Ensure that the prerequisites required to perform cross-platform database transport are met.</span><div>
                              <div class="infoboxnotealso" id="GUID-1EDA4225-1F4D-4960-A5E8-EE6AF777DF29__GUID-435C4AF6-DD7D-448C-8061-A9005B4D5A42">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-76834111-5476-4591-A472-7DA5E2F4464D__CIHEIGFB">Prerequisites for Cross-Platform Database Transport Using Backup Sets</a>"</span></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start SQL*Plus and connect to the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> <code class="codeph">prod_source</code> with administrator privileges.</span><div><pre class="oac_no_warn" dir="ltr">% sqlplus sys@prod_source as SYSDBA
</pre><p>When prompted, enter the password for the <code class="codeph">sys</code> user.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Query the name of the destination platform in <code class="codeph">V$TRANSPORTABLE_PLATFORM</code>.</span><div>
                              <p>To transport the entire database, the endian formats of the source platform and the destination platform must be the same.</p>
                              <div class="infoboxnotealso" id="GUID-1EDA4225-1F4D-4960-A5E8-EE6AF777DF29__GUID-7EFBBF81-D1B7-43A0-BCE7-44915CA40A55">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-D113DEE2-8619-4B8B-9EFE-9D2833C9823A">Platforms that Support Cross-Platform Data Transport</a>"</span> for information about determining the platform name
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Choose a method for naming the output files.</span><div>
                              <p>Use the <code class="codeph">FORMAT</code> clause of the <code class="codeph">BACKUP</code> command to specify the names of the output files.
                              </p>
                              <p>For example, the following <code class="codeph">FORMAT</code> clause specifies that the output files must be stored using unique names that begin with <code class="codeph">transport_</code> in the directory <code class="codeph">/oradata/backups/special.</code></p><pre class="oac_no_warn" dir="ltr">FORMAT '/oradata/backups/special/transport_%U'
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Start RMAN and connect to the source database as <code class="codeph">TARGET</code>.</span><div>
                              <p>The source database is the database that contains the data that needs to be transported to a different platform.</p>
                              <p>In this example, <code class="codeph">sbu</code> is a user who is granted the <code class="codeph">SYSBACKUP</code> privilege in the source database <code class="codeph">prod_source</code>.
                              </p><pre class="oac_no_warn" dir="ltr">% RMAN
RMAN&gt; CONNECT TARGET "sbu@prod_source AS SYSBACKUP";
</pre><p>Enter the password for the <code class="codeph">sbu</code> user when prompted.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Place the database in read-only mode.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
ALTER DATABASE OPEN READ ONLY;
</pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-1EDA4225-1F4D-4960-A5E8-EE6AF777DF29__CHDBHEEB"><span>Back up the source database using the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause in the <code class="codeph">BACKUP</code> command. Using either of these clauses creates a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> that uses backup sets.</span><div>
                              <p>The following <a id="d127931e4590" class="indexterm-anchor"></a>example creates a cross-platform backup of the entire database. This backup can be restored on any supported platform that uses the same endian format as the source database. The source platform is Sun Solaris x86 64-bit. Because the <code class="codeph">FOR TRANSPORT</code> clause is used, the conversion is performed on the destination database. The cross-platform database backup is stored in <code class="codeph">db_trans.bck</code> in the <code class="codeph">/tmp/xplat_backups</code> directory on the source host.
                              </p><pre class="oac_no_warn" dir="ltr">BACKUP
FOR TRANSPORT
FORMAT '/tmp/xplat_backups/db_trans.bck'
DATABASE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Disconnect from the source database.</span></li>
                        <li class="stepexpand"><span>Move the backup sets created by the <code class="codeph">BACKUP</code> command to the destination host.</span><div>
                              <p>Use operating system-specific utilities to transfer the created backup sets from the source host to the destination host.</p>
                              <p>For example, if the operating system of your source and destination hosts is Linux or UNIX, use the <code class="codeph">cp</code> command to move files.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>, to which the database must be transported, as <code class="codeph">TARGET</code>.</span><div>
                              <p>In this example, <code class="codeph">sbu</code> is a user who is granted the <code class="codeph">SYSBACKUP</code> privilege in the destination database <code class="codeph">prod_dest</code>.
                              </p><pre class="oac_no_warn" dir="ltr">% RMAN
RMAN&gt; CONNECT TARGET "sbu@prod_dest AS SYSBACKUP";
</pre><p>Enter the password for the <code class="codeph">sbu</code> user when prompted.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Ensure that the destination database is in <code class="codeph">NOMOUNT</code> state.</span></li>
                        <li class="stepexpand"><span>Restore the backup sets that were transferred from the source by using the <code class="codeph">RESTORE</code> command with the <code class="codeph">FOREIGN DATABASE</code> clause.</span><div>
                              <p>The following example restores the cross-platform database backup created in Step <a href="rman-transporting-data-across-platforms.html#GUID-1EDA4225-1F4D-4960-A5E8-EE6AF777DF29__CHDBHEEB">7</a>. The destination database uses the same endian format as the source database. The <code class="codeph">FROM PLATFORM</code> clause specifies the name of the platform on which the backup was created. This clause is required to convert backups on the destination. The backup set containing the <a id="d127931e4677" class="indexterm-anchor"></a>cross-platform database backup is stored in the <code class="codeph">/tmp/xplat_restores</code> directory on the destination host. The <code class="codeph">TO NEW</code> option specifies that the restored <a href="glossary.html#GUID-9C271FBB-5FE5-4B80-B8E8-0536FF2EA1C1"><span class="xrefglossterm">foreign data file</span></a>s must use new OMF-specified names in the destination database. Ensure that the <code class="codeph">DB_CREATE_FILE_DEST</code> initialization parameter is set.
                              </p><pre class="oac_no_warn" dir="ltr">RESTORE
FROM PLATFORM 'Solaris Operating System (x86-64)'
FOREIGN DATABASE TO NEW
FROM BACKUPSET '/tmp/xplat_restores/db_trans.bck';
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="BRADV772"></a><a id="BRADV725"></a><div class="props_rev_3"><a id="GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54" name="GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54"></a><h3 id="BRADV-GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54" class="sect3"><span class="enumeration_section">28.8 </span>Performing Cross-Platform Transport of Read-Only Tablespaces Using Backup Sets
               </h3>
               <div>
                  <p>Use the <code class="codeph">BACKUP</code> command with the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause to create backup sets that can be used to transport read-only tablespaces from one platform to another. When you transport read-only tablespaces, you must also export the metadata of these tablespaces. The metadata is required to plug the tablespaces in to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>. While transporting tablespaces across platforms, the source and destination platform can use different endian formats.
                  </p>
                  <p>You can restore all the data files or tablespaces contained in a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> or only some of them. After restoring these objects, you can specify the name and location for the restored data files.
                  </p>
                  <div class="infoboxnotealso" id="GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54__GUID-FB25A0A2-E390-4C0E-ACBB-BD4A79574262">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-FDD263CF-7C8F-4E9D-868C-68D17156EE36">About Backing Up Data on the Source Database for Cross-Platform Data Transport</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-B3295ECD-1359-49D8-9F81-3316B2DE722B">About Selecting Objects to Be Restored from Cross-Platform Backups</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-4F2E196D-A147-48E1-8D32-48974841F2AD">About Names and Locations for Restored Objects on the Destination Database</a>"</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="section" id="GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54__CIHDJFGD">
                     <p class="subhead2" id="GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54__GUID-F64DE359-A59C-480D-AD65-32BECDA7CCAB">Prerequisites for Performing Cross-Platform Tablespace Transport Using Backup Sets</p>
                  </div>
                  <!-- class="section" -->
                  <p>Before you create a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> that can be used to transport tablespaces to a different platform, the following prerequisites must be met:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">COMPATIBLE</code> parameter in the server parameter file of the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> and destination database is set to 12.0.0 or greater.
                        </p>
                     </li>
                     <li>
                        <p>The tablespaces to be transported are self-contained.</p>
                        <p>Execute the <code class="codeph">DBMS_TTS.TRANSPORT_SET_CHECK</code> procedure to check for dependencies. If the <code class="codeph">TRANSPORT_SET_VIOLATIONS</code> view contains rows corresponding to the specified tablespaces, then you must resolve the dependencies before creating the cross-platform backup.
                        </p>
                        <div class="infoboxnotealso" id="GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54__GUID-C335D86C-2DCB-435E-B7EC-A1320989C427">
                           <p class="notep1">See Also:</p>
                           <p><a href="performing-rman-tspitr.html#GUID-06BAA701-860F-4E3C-AA70-277CCCB7F425__CHDFCCFH">Example 21-1</a> for information about executing the <code class="codeph">DBMS_TTS.TRANSPORT_SET_CHECK</code> procedure
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>The tablespaces to be transported are in read-only mode, unless the <code class="codeph">ALLOW INCONSISTENT</code> clause is used in the <code class="codeph">BACKUP</code> command.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54__GUID-A5CDCC27-25C7-4B59-AFA7-0F90D03C69FB">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D">Steps to Transport Read-Only Tablespaces to a Different Platform Using Backup Sets</a>"</span> for information about using the <code class="codeph">DBMS_TDB.CHECK_DB</code> procedure
                     </p>
                  </div>
               </div><a id="BRADV726"></a><div class="props_rev_3"><a id="GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D" name="GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D"></a><h4 id="BRADV-GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D" class="sect4"><span class="enumeration_section">28.8.1 </span>Steps to Transport Read-Only Tablespaces to a Different Platform Using Backup Sets
                  </h4>
                  <div>
                     <ol>
                        <li class="stepexpand"><span>Ensure that the prerequisites required to transport tablespaces to another platform are met.</span><div>
                              <div class="infoboxnotealso" id="GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D__GUID-BB6BF624-5CC3-494F-98C8-E1C1D55CADA5">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54__CIHDJFGD">Prerequisites for Performing Cross-Platform Tablespace Transport Using Backup Sets</a>"</span></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> from which you need to transport tablespaces as <code class="codeph">TARGET</code>.</span><div>
                              <p>In this example, <code class="codeph">sbu</code> is a user who is granted the <code class="codeph">SYSBACKUP</code> privilege on the source database <code class="codeph">prod_source</code>.
                              </p><pre class="oac_no_warn" dir="ltr">$ RMAN
RMAN&gt; CONNECT TARGET "sbu@prod_source AS SYSBACKUP";
</pre><p>Enter the password for the s<code class="codeph">bu</code> user when prompted.
                              </p>
                              <p></p>
                              <div class="infoboxnote" id="GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D__GUID-913B8C43-5565-4EF4-8529-46743908DAD7">
                                 <p class="notep1">Note:</p>
                                 <p>To perform cross-platform transport of an encrypted tablespace, you must connect to the PDB as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Query the name of the destination platform in <code class="codeph">V$TRANSPORTABLE_PLATFORM</code>.</span><div>
                              <div class="infoboxnotealso" id="GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D__GUID-E374D819-9CC9-4F39-A54A-E0ACC301C3F6">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-D113DEE2-8619-4B8B-9EFE-9D2833C9823A">Platforms that Support Cross-Platform Data Transport</a>"</span> for information about determining the platform name
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Place the tablespaces to be transported in read-only mode.</span><div>
                              <p>The following command places the tablespace <code class="codeph">EXAMPLE</code> in read-only mode.
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE example READ ONLY;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Choose a method for naming the output files.</span><div>
                              <p>Use the <code class="codeph">FORMAT</code> clause of the <code class="codeph">BACKUP</code> command to specify a pattern for naming the output files.
                              </p>
                              <div class="infoboxnotealso" id="GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D__GUID-6EDBDB3E-5BED-47E4-8BC3-E29BED4797BF">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-4F2E196D-A147-48E1-8D32-48974841F2AD">About Names and Locations for Restored Objects on the Destination Database</a>"</span></p>
                              </div>
                              <p></p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the tablespace being transported is a TDE-encrypted tablespace, then specify the passphrase that will be used to wrap the master key before storing it in the backupset.</span><div>
                              <p>The following command sets the passphrase to <code class="codeph">encr_temp</code>.
                              </p><code class="codeph">RMAN&gt; SET PASSPHRASE ON IDENTIFIED BY encr_temp;</code></div>
                        </li>
                        <li class="stepexpand" id="GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D__CHDBFEBE"><span>Back up the tablespace on the source database using the <code class="codeph">BACKUP</code> command with the <code class="codeph">TO PLATFORM</code> or <code class="codeph">FOR TRANSPORT</code> clause. Use the <code class="codeph">DATAPUMP</code> clause to indicate that an <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> for the tablespaces must be created. The export dump file is created in its own backup piece.</span><div>
                              <p>The following example creates a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> of the tablespaces <code class="codeph">projects</code> and <code class="codeph">tasks</code> that can be restored on the <a id="d127931e5086" class="indexterm-anchor"></a>Solaris[tm] OE (64-bit) platform. This backup is stored in the backup set <code class="codeph">trans_ts.bck</code> in the <code class="codeph">/tmp/xplat_backups</code> directory. The <a id="d127931e5098" class="indexterm-anchor"></a>Data Pump export dump file containing metadata required to plug the tablespaces in to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a> is stored in <code class="codeph">trans_ts_dmp.bck</code> in the <code class="codeph">/tmp/xplat_backups</code> directory.
                              </p><pre class="oac_no_warn" dir="ltr">RMAN &gt; BACKUP
          TO PLATFORM 'Solaris[tm] OE (64-bit)'
          FORMAT '/tmp/xplat_backups/trans_ts.bck'
          DATAPUMP FORMAT '/tmp/xplat_backups/trans_ts_dmp.bck'
          TABLESPACE projects, tasks;
</pre><p>Because the <code class="codeph">TO PLATFORM</code> clause is used, conversion to the endian format of the destination database is performed on the source database.
                              </p>
                              <div class="infoboxnote" id="GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D__GUID-F45A61D0-A8EB-497D-BBDF-07E40119AF59">
                                 <p class="notep1">Note:</p>
                                 <p>When you use the <code class="codeph">DATAPUMP</code> <a id="d127931e5126" class="indexterm-anchor"></a>clause, ensure that the target database is open.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Disconnect from the source database.</span></li>
                        <li class="stepexpand"><span>Move the backup sets created by the <code class="codeph">BACKUP</code> command and the Data Pump export dump file to the destination host.</span><div>
                              <p>You can use operating system utilities to move the backup sets from the source host to the destination host.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the destination database, into which the tablespaces must be transported, as <code class="codeph">TARGET</code>.</span><div>
                              <p>In this example, <code class="codeph">sbu</code> is a user who is granted the <code class="codeph">SYSBACKUP</code> privilege on the destination database <code class="codeph">prod_dest</code>.
                              </p><pre class="oac_no_warn" dir="ltr">% RMAN
RMAN&gt; CONNECT TARGET "sbu@prod_dest AS SYSBACKUP";
</pre><p>Enter the password for the s<code class="codeph">bu</code> user when prompted.
                              </p>
                              <p></p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the tablespace being transported is a TDE-encyrpted tablespace, then provide the passphrase that was used on the source database to wrap the master key.</span><div>
                              <p>The following example sets the passphrase to encr_temp.</p><pre class="oac_no_warn" dir="ltr">SET PASSPHRASE ON IDENTIFIED BY encr_temp;</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restore the backup sets that were transported from the source database using the <code class="codeph">RESTORE</code> command. Use the <code class="codeph">DUMP FILE</code> clause to import the export dump file containing the tablespace metadata and plug the tablespaces in to the destination database.</span><div>
                              <p>The following example restores the <code class="codeph">projects</code> and <code class="codeph">tasks</code> tablespaces from the <a id="d127931e5196" class="indexterm-anchor"></a>cross-platform backup created in Step <a href="rman-transporting-data-across-platforms.html#GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D__CHDBFEBE">7</a>. The backup set <code class="codeph">trans_ts.bck</code> in the <code class="codeph">/tmp/xplat_restores</code> directory on the destination host. The Data Pump export dump file containing the metadata that is required to plug these tablespaces in to the destination database is stored in the <code class="codeph">trans_ts_dump.bck</code> in the <code class="codeph">/tmp/xplat_restores</code> directory.
                              </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE
      FOREIGN TABLESPACE projects, tasks TO NEW
      FROM BACKUPSET '/tmp/xplat_restores/trans_ts.bck'
      DUMP FILE FROM BACKUPSET '/tmp/xplat_restores/trans_ts_dmp.bck';
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D__GUID-E2F99BA8-DAC8-4674-92DB-91A39E741ED3">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for additional examples on performing cross-platform backup and restore operations
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV720"></a><div class="props_rev_3"><a id="GUID-346F0274-51A6-49D3-AB16-B8D1678655A1" name="GUID-346F0274-51A6-49D3-AB16-B8D1678655A1"></a><h3 id="BRADV-GUID-346F0274-51A6-49D3-AB16-B8D1678655A1" class="sect3"><span class="enumeration_section">28.9 </span>Overview of Cross-Platform Transport of Tablespaces Using Inconsistent Backups
               </h3>
               <div>
                  <p>RMAN enables you to transport inconsistent tablespace backups across platforms. An inconsistent tablespace backup is a backup of one or more tablespaces that is created when the tablespaces are in read/write mode. The term inconsistent refers to the fact that data files in the backup contain changes that were made after the files were checkpointed. The <a href="glossary.html#GUID-9C271FBB-5FE5-4B80-B8E8-0536FF2EA1C1"><span class="xrefglossterm">foreign data file</span></a>s produced during a cross-platform inconsistent backup operation cannot be directly plugged in to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>. They must be made consistent before they can be opened on the destination database. You make the foreign data files consistent by applying a cross-platform incremental backup, created when the tablespaces are placed in read-only mode, to these foreign data files. This backup must also include the export dump file containing the metadata required for plug the transported tablespaces in to the destination database.
                  </p>
                  <p>Inconsistent tablespace backups enable you to reduce application downtime. When the tablespaces are online and available to the users, you create cross-platform inconsistent backups on the source database. The first backup must be a level 0 incremental backup. Subsequently, create smaller level 1 incremental backups that contain the changes made to the tablespaces since the most recent level 1 backup. These level 0 and level 1 incremental backups can be restored and applied on the destination database even as other level 1 incremental backups are being created on the source database. You need not wait until all the level 1 incremental backups are created on the source database before you start applying previously-created level 1 backups on the destination database. Since the tablespaces are still online while these incremental backups are being created, there is no application downtime at this stage. The final level 1 incremental backup is created with the tablespaces placed in read-only mode. The application downtime begins at this stage. This final backup must include the metadata required to plug the tablespaces in to the destination database.</p>
                  <p>On the destination database, you first restore the level 0 incremental backup to create a set of foreign data files. Next, apply the level 1 incremental backups that were created when the tablespaces were in read/write mode to these restored foreign data files. Apply these backups in the same order in which they were created. In most cases, the destination database catches up with the last level 1 incremental backup before the final incremental backup, taken with the tablespaces placed in read-only mode, is created on the source database. The last step is to restore the final level 1 incremental backup, created when the tablespaces were placed in read-only mode, to make the foreign data files consistent. This backup contains the tablespace metadata required to plug the tablespaces in to the destination database.</p>
                  <div class="infoboxnotealso" id="GUID-346F0274-51A6-49D3-AB16-B8D1678655A1__GUID-C36F9400-6AA3-4024-BA89-E789CB226CCB">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A" title="This section describes the high-level steps to perform cross-platform transport of inconsistent tablespaces using backup sets or image copies.">Performing Cross-Platform Transport of Tablespaces Using Inconsistent Backups</a>"</span></p>
                  </div>
               </div>
            </div><a id="BRADV776"></a><a id="BRADV777"></a><a id="BRADV778"></a><a id="BRADV775"></a><div class="props_rev_3"><a id="GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A" name="GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A"></a><h3 id="BRADV-GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A" class="sect3"><span class="enumeration_section">28.10 </span>Performing Cross-Platform Transport of Tablespaces Using Inconsistent Backups
               </h3>
               <div>
                  <p>You can transport inconsistent tablespaces across platforms using backup sets or image copies. Use the <code class="codeph">BACKUP</code> command to create a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> using backup sets. The <code class="codeph">CONVERT</code> command creates cross-platform backups using image copies.
                  </p>
                  <p>This section describes how to transport inconsistent tablespaces from one platform to another. An example of transporting an inconsistent tablespace across platforms using backup sets is included.</p>
                  <p></p>
                  <div class="infoboxnotealso" id="GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A__GUID-134E5BAB-79F0-445C-8663-46479E14D668">
                     <p class="notep1">See Also:</p>
                     <p>For more information about using scripts to perform cross-platform transport using backup sets, refer to the My Oracle Support Note 1389592.1 at <a href="https://support.oracle.com/rs?type=doc&amp;id=1389592.1" target="_blank"><code class="codeph">https://support.oracle.com/rs?type=doc&amp;id=1389592.1</code></a></p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A__GUID-DDADF64A-AC50-4269-BEEB-A8F78CD20C83">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-346F0274-51A6-49D3-AB16-B8D1678655A1">Overview of Cross-Platform Transport of Tablespaces Using Inconsistent Backups</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="rman-transporting-data-across-platforms.html#GUID-6A00DACB-DB1F-4742-A561-49383E23C858" title="This section describes the high-level steps to perform cross-platform transport of inconsistent tablespaces using backup sets or image copies.">Steps to Transport Inconsistent Tablespaces to a Different Platform </a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A__GUID-3D73BBEE-AFDE-48B5-B6F5-447F4EE33598">About Creating Inconsistent and Incremental Backups on the Source Database</p>
                  </div>
                  <!-- class="section" -->
                  <p>Use the <code class="codeph">ALLOW INCONSISTENT</code> clause in a <code class="codeph">BACKUP</code> or <code class="codeph">CONVERT</code> command to create a cross-platform inconsistent backup of one or more tablespaces. The tablespaces being transported are in read/write mode when an inconsistent backup is created. To create incremental backups, use the <code class="codeph">INCREMENTAL LEVEL 1 </code>clause in the <code class="codeph">BACKUP</code> command.
                  </p>
                  <p>The first inconsistent backup is a level 0 incremental backup. Subsequently, you can create multiple cross-platform level 1 incremental backups. The final cross-platform incremental backup must be a consistent backup that is created when the tablespaces are read-only. When you create this final incremental backup, use the <code class="codeph">DUMP FILE</code> clause in the <code class="codeph">BACKUP</code> command to create the dump file containing the tablespace metadata.
                  </p>
                  <p>When you use the <code class="codeph">CONVERT</code> command, you must explicitly create the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> that contains the metadata for the tablespaces by using the Data Pump Export utility.
                  </p>
                  <div class="infoboxnote" id="GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A__GUID-13A35E72-BCFF-499D-A5C3-D6F716514C81">
                     <p class="notep1">Note:</p>
                     <p>The <code class="codeph">ALLOW INCONSISTENT</code> clause cannot be used for cross-platform whole database backups.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A__GUID-A89C4573-C7FB-49BE-AEC3-44144203D830">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-6A00DACB-DB1F-4742-A561-49383E23C858" title="This section describes the high-level steps to perform cross-platform transport of inconsistent tablespaces using backup sets or image copies.">Steps to Transport Inconsistent Tablespaces to a Different Platform </a>"</span> for information about specifying the SCN
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A__GUID-0B895A93-2706-4A64-9237-50B41324953F">About Restoring and Recovering Inconsistent Backups on the Destination Database</p>
                  </div>
                  <!-- class="section" -->
                  <p>You first restore the cross-platform level 0 incremental backup, taken when the tablespaces are placed in read/write mode, on the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>. This operation creates restores the backup and creates foreign data file copies. These foreign data files are inconsistent because the tablespaces were not placed in read-only mode when the backup was created. To make these foreign data files consistent and achieve a consistent checkpointed SCN, apply the incremental backups in the order in which they were created. The final incremental backup applied must be a cross-platform incremental backup that was created when the tablespaces were in read-only mode. Next, to plug the tablespaces in to the destination database, you restore and import the dump file that contains the metadata of the tablespaces being transported.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-06118644-AFC6-4BD4-8CAE-19BD3A886D0A__GUID-4F5AE7BE-FC65-4C26-B28A-5190EEDBC42D">Requirements for Applying Cross-Platform Incremental Backups to the Restored Data Files</p>
                  </div>
                  <!-- class="section" -->
                  <p>To successfully apply a cross-platform incremental tablespace backup to a set of restored foreign data files, the following conditions must be satisfied:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For each data file that is included in the cross-platform incremental backup, the start SCN must be lower than the current checkpoint SCN of the foreign data file copy.</p>
                     </li>
                     <li>
                        <p>The foreign data file copies created by the restore operation must not be modified.</p>
                        <p>For example, if a foreign data file copy has been plugged in to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>, made read/write, and then made read-only, then RMAN considers that this file has been modified.
                        </p>
                     </li>
                  </ul>
               </div><a id="BRADV779"></a><div class="props_rev_3"><a id="GUID-6A00DACB-DB1F-4742-A561-49383E23C858" name="GUID-6A00DACB-DB1F-4742-A561-49383E23C858"></a><h4 id="BRADV-GUID-6A00DACB-DB1F-4742-A561-49383E23C858" class="sect4"><span class="enumeration_section">28.10.1 </span>Steps to Transport Inconsistent Tablespaces to a Different Platform 
                  </h4>
                  <div>
                     <p>This section describes the high-level steps to perform cross-platform transport of inconsistent tablespaces using backup sets or image copies.</p>
                     <p>The prerequisites for transporting inconsistent tablespaces using backup sets are described in <span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54__CIHDJFGD">Prerequisites for Performing Cross-Platform Tablespace Transport Using Backup Sets</a>"</span>. The prerequisites for transporting inconsistent tablespaces using image copies (<code class="codeph">CONVERT</code> command) are described in <a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a>.
                     </p>
                     <p>Perform the following tasks to transport inconsistent tablespaces to a different platform:</p>
                     <ol>
                        <li>
                           <p>Create the files required to transport one more tablespaces in the source database as described in <a href="rman-transporting-data-across-platforms.html#GUID-A909F0E6-5400-4F5D-8DF1-77E57EE68AA5">Creating Files Required to Transport Tablespaces to a Different Platform</a></p>
                        </li>
                        <li>
                           <p>Transfer files from the source host to the destination host as described in <a href="rman-transporting-data-across-platforms.html#GUID-15F54B2C-6022-4CF9-BC2E-C5B47135CC65">Transferring Files Created on the Source Host to the Destination Host</a>.
                           </p>
                        </li>
                        <li>
                           <p>Restore tablespaces and plug them into the destination database as described in <a href="rman-transporting-data-across-platforms.html#GUID-6168ACBF-61F6-4CA1-8EEB-4D1ED1F04C5D">Restoring Tablespaces and Plugging them in to the Destination Database</a>.
                           </p>
                        </li>
                     </ol>
                  </div><a id="BRADV780"></a><div class="props_rev_3"><a id="GUID-A909F0E6-5400-4F5D-8DF1-77E57EE68AA5" name="GUID-A909F0E6-5400-4F5D-8DF1-77E57EE68AA5"></a><h5 id="BRADV-GUID-A909F0E6-5400-4F5D-8DF1-77E57EE68AA5" class="sect5"><span class="enumeration_section">28.10.1.1 </span>Creating Files Required to Transport Tablespaces to a Different Platform
                     </h5>
                     <div>
                        <div class="section">
                           <p>This step consists of performing the following tasks in the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>:
                           </p>
                           <p></p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>If the tablespace being transported is a TDE-encrypted tablespace, then specify the passphrase that will be used to wrap the master key before storing it in the backupset.</span><div>
                                 <p>The following command sets the passphrase to <code class="codeph">encr_temp</code>.
                                 </p><code class="codeph">RMAN&gt; SET PASSPHRASE ON IDENTIFIED BY encr_temp;</code></div>
                           </li>
                           <li class="stepexpand"><span>Create a cross-platform level 0 inconsistent backup of the tablespaces that must be transported to a different platform. The tablespaces are in read/write mode.</span><div>
                                 <p>Use the<a id="d127931e5741" class="indexterm-anchor"></a><a id="d127931e5745" class="indexterm-anchor"></a> <code class="codeph">ALLOW INCONSISTENT</code> and<a id="d127931e5753" class="indexterm-anchor"></a> <code class="codeph">INCREMENTAL LEVEL 0</code> clauses in the <code class="codeph">BACKUP</code> command to indicate that the backup is an inconsistent backup of one or more tablespaces.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create a cross-platform level 1 incremental backup of the tablespaces that must be transported to another platform. The tablespace are in read/write mode.</span><div>
                                 <p>Subsequent to the first level 0 inconsistent backup, you can create any number of level 1 incremental backups when the tablespaces are in read/write mode. Use the<a id="d127931e5770" class="indexterm-anchor"></a><a id="d127931e5774" class="indexterm-anchor"></a> <code class="codeph">ALLOW INCONSISTENT</code> and<a id="d127931e5782" class="indexterm-anchor"></a> <code class="codeph">INCREMENTAL LEVEL 1</code> clause to create these incremental backups. Performing frequent incremental backups when the tablespaces are in read/write mode is advantageous because this reduces the amount of changed data that needs to be applied to the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a> using the final incremental backup that is taken when the tablespace is read-only.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create a cross-platform level 1 incremental backup of the tablespaces with the tablespaces in read-only mode.</span><div>
                                 <p>This is the final incremental backup and it must include the dump file that contains the metadata required to plug the transported tablespaces in to the destination database. Use the<a id="d127931e5800" class="indexterm-anchor"></a> <code class="codeph">INCREMENTAL LEVEL 1</code> clause in the <code class="codeph">BACKUP</code> command to create a level 1incremental backup.
                                 </p>
                                 <p>When you perform cross-platform transport using the <code class="codeph">BACKUP</code> command, use the <code class="codeph">DATAPUMP</code> clause to create the Data Pump export dump files along with the incremental backup. The dump file is created in a separate backup set. When you create cross-platform incremental backups using image copies, you must explicitly create the dump file containing tablespace metadata by using the Data Pump Export utility.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="BRADV781"></a><div class="props_rev_3"><a id="GUID-15F54B2C-6022-4CF9-BC2E-C5B47135CC65" name="GUID-15F54B2C-6022-4CF9-BC2E-C5B47135CC65"></a><h5 id="BRADV-GUID-15F54B2C-6022-4CF9-BC2E-C5B47135CC65" class="sect5"><span class="enumeration_section">28.10.1.2 </span>Transferring Files Created on the Source Host to the Destination Host
                     </h5>
                     <div>
                        <div class="section">
                           <p>Use FTP, an operating system copy command, or some other mechanism to move the backup sets, data files, and the dump file that were created in the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a> to the destination host.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV782"></a><div class="props_rev_3"><a id="GUID-6168ACBF-61F6-4CA1-8EEB-4D1ED1F04C5D" name="GUID-6168ACBF-61F6-4CA1-8EEB-4D1ED1F04C5D"></a><h5 id="BRADV-GUID-6168ACBF-61F6-4CA1-8EEB-4D1ED1F04C5D" class="sect5"><span class="enumeration_section">28.10.1.3 </span>Restoring Tablespaces and Plugging them in to the Destination Database
                     </h5>
                     <div>
                        <div class="section">
                           <p>This step consists of performing the following tasks on the <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>:
                           </p>
                           <p></p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>If the tablespace being transported is a TDE-encyrpted tablespace, then provide the passphrase that was used on the source database to wrap the master key.</span><div>
                                 <p>The following example sets the passphrase to encr_temp.</p><pre class="oac_no_warn" dir="ltr">SET PASSPHRASE ON IDENTIFIED BY encr_temp;</pre></div>
                           </li>
                           <li class="stepexpand"><span>Restore the cross-platform level 0 inconsistent backup.</span><div>
                                 <p>This restore operation creates a set of <a href="glossary.html#GUID-9C271FBB-5FE5-4B80-B8E8-0536FF2EA1C1"><span class="xrefglossterm">foreign data file</span></a>s on the destination database. These foreign data files are inconsistent, and they need recovery before they can be plugged in to the destination database.
                                 </p>
                                 <p>Use the <code class="codeph">RESTORE</code> command to restore the cross-platform level 0 inconsistent backup. When you restore a cross-platform inconsistent backups that consist of backup sets, use the<a id="d127931e5999" class="indexterm-anchor"></a> <code class="codeph">FROM BACKUPSET</code> clause to specify the name of the backup set that contains the level 0 inconsistent backup.
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-6168ACBF-61F6-4CA1-8EEB-4D1ED1F04C5D__GUID-E1DC5FD1-9893-4806-A466-C9F44A6FF9E3">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="../rcmrf/RESTORE.html#RCMRF149" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for information about using the <code class="codeph">RESTORE</code> command for cross-platform restore operations
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Apply the cross-platform level 1 incremental backup, taken when the tablespaces were in read/write mode, to the foreign data files restored in Step 1.</span><div>
                                 <p>If you created multiple cross-platform level 1 incremental backups, these incremental backups must be applied in the order in which they were created. Use the <code class="codeph">RECOVER</code> command to apply the incremental backups. The<a id="d127931e6026" class="indexterm-anchor"></a> <code class="codeph">FOREIGN DATAFILECOPY</code> clause of the <code class="codeph">RECOVER</code> command must list each data file to which the incremental backup must be applied. Use the <code class="codeph">FROM BACKPSET</code> clause to specify the name of the backup set that contains the data to be recovered.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Apply the cross-platform level 1 incremental backup, taken when the tablespaces were in read-only mode, to the foreign data files restored in Step 1.</span><div>
                                 <p>Use the <code class="codeph">RECOVER</code> command to apply the incremental backup. The<a id="d127931e6049" class="indexterm-anchor"></a> <code class="codeph">FOREIGN DATAFILECOPY</code> clause of the <code class="codeph">RECOVER</code> command must list each data file to which the incremental backup needs to be applied. Use the <code class="codeph">FROM BACKPSET</code> clause to specify the name of the backup set that contains the data to be recovered.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Restore the backup set containing the tablespace metadata.</span><div>
                                 <p>Use the <code class="codeph">RESTORE</code> command to restore the backup set that contains the dump file created during the cross-platform incremental backup. The tablespaces were in read-only mode when this backup was created. You can optionally use the<a id="d127931e6072" class="indexterm-anchor"></a> <code class="codeph">DUMP FILE</code> clause to specify a name for the dump file on the destination database and the<a id="d127931e6080" class="indexterm-anchor"></a> <code class="codeph">DATAPUMP DESTINATION</code> clause to specify the directory in which the dump file is restored. If these clauses are omitted, RMAN uses the configured defaults. When transporting data using backup sets, use the <code class="codeph">FROM BACKUPSET</code> clause to specify the name of the backup set that contains the dump file.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Import the dump file containing the tablespace metadata into the destination database.</span><div>
                                 <p>Plug the recovered tablespaces in to the destination database by using the Data Pump Import utility to import the dump file created during the incremental backup. You must run the Data Pump Import utility as a user with the <code class="codeph">SYSDBA</code> privilege.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div><a id="BRADV783"></a><div class="props_rev_3"><a id="GUID-F497679C-9413-4AB9-85AD-F364021FA704" name="GUID-F497679C-9413-4AB9-85AD-F364021FA704"></a><h4 id="BRADV-GUID-F497679C-9413-4AB9-85AD-F364021FA704" class="sect4"><span class="enumeration_section">28.10.2 </span>Example: Performing Cross-Platform Inconsistent Tablespace Transport Using Backup Sets
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example transports the inconsistent tablespace <code class="codeph">my_tbs</code> from the <a href="glossary.html#GUID-609A4BFA-A852-4459-AD52-05C49212753A"><span class="xrefglossterm">source database</span></a>, which is on the Sun Solaris platform, to a <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a> on the Linux x86 64-bit platform.
                        </p>
                        <div class="infoboxnotealso" id="GUID-F497679C-9413-4AB9-85AD-F364021FA704__GUID-C56086F0-DDBD-4FCC-B266-6897CF509345">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-6A00DACB-DB1F-4742-A561-49383E23C858" title="This section describes the high-level steps to perform cross-platform transport of inconsistent tablespaces using backup sets or image copies.">Steps to Transport Inconsistent Tablespaces to a Different Platform </a>"</span> for conceptual information about each step in this example
                           </p>
                        </div>
                        <p>The following steps enable you to transport the inconsistent tablespace <code class="codeph">my_tbs</code> across platforms using backup sets:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the source database as a user who is granted the <code class="codeph">SYSBACKUP</code> privilege.</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET "sbu@prod_source AS SYSBACKUP";
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Ensure that the prerequisites required to transport tablespaces to another platform are met.</span><div>
                              <div class="infoboxnotealso" id="GUID-F497679C-9413-4AB9-85AD-F364021FA704__GUID-6B5CD833-8705-47E3-9468-36C68EB486B6">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54__CIHDJFGD">Prerequisites for Performing Cross-Platform Tablespace Transport Using Backup Sets</a>"</span></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a cross-platform level 0 inconsistent backup of the tablespace <code class="codeph">my_tbs</code> when the tablespace is read/write mode. This backup is stored in a backup set named <code class="codeph">my_tbs_incon.bck</code> in the directory <code class="codeph">/tmp/xplat_backups</code>.</span><div><pre class="oac_no_warn" dir="ltr">BACKUP
FOR TRANSPORT
ALLOW INCONSISTENT
INCREMENTAL LEVEL 0
TABLESPACE my_tbs FORMAT '/tmp/xplat_backups/my_tbs_incon.bck';
</pre><p>Because <code class="codeph">FOR TRANSPORT</code> is used instead of <code class="codeph">TO PLATFORM</code>, this cross-platform backup can be restored on any platform. The conversion will be performed on the destination database.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a cross-platform level 1 incremental backup of the tablespace <code class="codeph">my_tbs</code> that contains the changes made after backup in Step 3 was created. The tablespace is still in read/write mode. This incremental backup is stored in <code class="codeph">my_tbs_incon1.bck</code> in the directory <code class="codeph">/tmp/xplat_backups</code>.</span><div><pre class="oac_no_warn" dir="ltr">BACKUP
FOR TRANSPORT
ALLOW INCONSISTENT
INCREMENTAL LEVEL 1
TABLESPACE my_tbs FORMAT '/tmp/xplat_backups/my_tbs_incon1.bck';
</pre><p>To minimize application downtime, the level 0 and level 1 incremental backups created in Steps 3 and 4 can be restored and applied on the destination database while the source tablespace is still in read/write mode. When the destination database catches up with last level 1 incremental backup, you can create the final incremental backup with the tablespace placed in read-only mode. </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Place the tablespace <code class="codeph">my_tbs</code> in read-only mode.</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE my_tbs READ ONLY;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create the final cross-platform level 1 incremental backup of the tablespace <code class="codeph">my_tbs</code>. This backup contains changes made to the database after the backup that was created in Step 4. It must include the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> that contains the tablespace metadata.</span><div><pre class="oac_no_warn" dir="ltr">BACKUP
FOR TRANSPORT
INCREMENTAL LEVEL 1
TABLESPACE my_tbs
FORMAT '/tmp/xplat_backups/my_tbs_incr.bck'
DATAPUMP FORMAT '/tmp/xplat_backups/my_tbs_incr_dp.bck';
</pre><p>The incremental backup is stored in <code class="codeph">my_tbs_incr.bck</code>. The export dump file containing the tablespace metadata is stored in a backup set named <code class="codeph">my_tbs_incr_dp.bck</code>. 
                              </p>
                              <p>The following is a formatted output of the <code class="codeph">BACKUP</code> command that was run in this step. The output is edited to display only the relevant information. Observe that the dump file is called <code class="codeph">backup_tts_RDBMS_13462.dmp</code>, which is a name assigned by the operating system, and is stored in the directory specified by the <code class="codeph">DESTINATION</code> clause.
                              </p><pre class="oac_no_warn" dir="ltr">Starting backup at 12-SEP-12
……
Performing export of metadata for specified tablespaces...
EXPDP&gt; Starting "SYS"."TRANSPORT_EXP_RDBMS_zocc":
   .........
   EXPDP&gt;
 ***************************************************************************
   EXPDP&gt; Dump file set for SYS.TRANSPORT_EXP_RDBMS_zocc is:
   EXPDP&gt;   /ade/b/191802369/oracle/backup_tts_RDBMS_13462.dmp
   EXPDP&gt;
 **************************************************************************
  .......
Export completed
.......
……
channel ORA_DISK_1: specifying datafile(s) in backup set
input datafile file number=00006 name=/ade/b/191802369/oracle/dbs/tbs_11.f
input datafile file number=00007 name=/ade/b/191802369/oracle/dbs/tbs_12.f
input datafile file number=00020 name=/ade/b/191802369/oracle/dbs/tbs_14.f
input datafile file number=00010 name=/ade/b/191802369/oracle/dbs/tbs_13.f
……
……
Finished backup at 12-SEP-12
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Move the backup sets and the export dump file generated in Steps 3, 4, and 6 from the source host to the desired directories on the destination host.</span><div>
                              <p>In this example, all the required files are moved to the directory <code class="codeph">/tmp/xplat_restores</code> on the destination host.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the destination database as a user who is granted the <code class="codeph">SYSBACKUP</code> privilege.</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET "sbu@prod_dest AS SYSBACKUP";
</pre><p><code class="codeph">sbu</code> is a user who is granted the <code class="codeph">SYSBACKUP</code> privilege in the destination database.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Restore the cross-platform level 0 inconsistent backup created in Step 3.</span><div>
                              <p>Use the <code class="codeph">FOREIGN DATAFILE</code> clause to specify the data files that must be restored. The <code class="codeph">FROM PLATFORM</code> clause specifies the name of the platform on which the backup was created. This clause is required to convert backups on the destination database.
                              </p>
                              <p>In this example, the data files with numbers 6, 7, 20, and 10 are restored to the names specified in the <code class="codeph">FORMAT</code> clause corresponding to that data file. The data file numbers must be the numbers used on the source database. You can obtain the data file numbers from the RMAN output of the inconsistent backup created in Step 3.
                              </p><pre class="oac_no_warn" dir="ltr">RESTORE
FROM PLATFORM 'Solaris[tm] OE (64-bit)'
FOREIGN DATAFILE 6
FORMAT '/tmp/aux/mytbs_6.df',
7
FORMAT '/tmp/aux/mytbs_7.df',
20
FORMAT '/tmp/aux/mytbs_20.df',
10
FORMAT '/tmp/aux/mytbs_10.df'
FROM BACKUPSET '/tmp/xplat_restores/my_tbs_incon.bck';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Recover the <a href="glossary.html#GUID-9C271FBB-5FE5-4B80-B8E8-0536FF2EA1C1"><span class="xrefglossterm">foreign data file</span></a>s obtained in Step 9 by applying the first cross-platform level 1 incremental backup that was created Step 4.</span><div><pre class="oac_no_warn" dir="ltr">RECOVER
FROM PLATFORM 'Solaris[tm] OE (64-bit)'
FOREIGN DATAFILECOPY '/tmp/aux/mytbs_6.df','/tmp/aux/mytbs_7.df','/tmp/aux/mytbs_20.df','/tmp/aux/mytbs_10.df'
FROM BACKUPSET '/tmp/xplat_restores/my_tbs_incon1.bck';
</pre><p>In this example, the incremental backup that is being applied to the restored foreign data files is stored in <code class="codeph">/tmp/xplat_restores/my_tbs_incon1.bck</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Recover the foreign data files obtained in Step 9 by applying the final cross-platform level 1 incremental backup that was created in Step 6. This backup was created with the tablespaces in read-only mode.</span><div><pre class="oac_no_warn" dir="ltr">RECOVER
FROM PLATFORM 'Solaris[tm] OE (64-bit)'
FOREIGN DATAFILECOPY '/tmp/aux/mytbs_6.df','/tmp/aux/mytbs_7.df','/tmp/aux/mytbs_20.df','/tmp/aux/mytbs_10.df'
FROM BACKUPSET '/tmp/xplat_restores/my_tbs_incr.bck';
</pre><p>In this example, the incremental backup that is being applied to the restored foreign data files is stored in <code class="codeph">/tmp/xplat_restores/my_tbs_incr.bck</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Restore the backup set containing the export dump file. This dump file contains the tablespace metadata required to plug the tablespaces into the destination database.</span><div><pre class="oac_no_warn" dir="ltr">RESTORE
FROM PLATFORM 'Solaris[tm] OE (64-bit)'
DUMP FILE 'my_tbs_restore_md.dmp'
DATAPUMP DESTINATION '/tmp/dump'
FROM BACKUPSET '/tmp/xplat_restores/my_tbs_incr_dp.bck';
</pre><p>In this example, the dump file is restored to a file called <code class="codeph">my_tbs_restore_md.dmp</code> in the directory <code class="codeph">/tmp/dump</code>. You can omit the name of the dump file and the <code class="codeph">DATAPUMP DESTINATION</code> clause and allow RMAN to use operating-system defaults for these parameters.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Plug the tablespace in to the destination database. Use the Data Pump import utility to import the dump file containing the tablespace metadata in to the destination database.</span><div><pre class="oac_no_warn" dir="ltr"># impdp directory=dp_dir dumpfile=backup_tts_RDBMS_13462.dmp transport_datafiles='/tmp/aux/mytbs_6.df','/tmp/aux/mytbs_7.df','/tmp/aux/mytbs_20.df','/tmp/aux/mytbs_10.df' nologfile=Y
</pre><p>When prompted for a user name and password, enter the credentials of the <code class="codeph">SYS</code> user. In this example, <code class="codeph">dp_dir</code> is a directory object that was created using <code class="codeph">CREATE DIRECTORY</code> command and is mapped to the <code class="codeph">/tmp</code> directory.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-6D2F4279-B6CC-4BB3-AE56-4D3D40A4CBF3" name="GUID-6D2F4279-B6CC-4BB3-AE56-4D3D40A4CBF3"></a><h3 id="BRADV-GUID-6D2F4279-B6CC-4BB3-AE56-4D3D40A4CBF3" class="sect3"><span class="enumeration_section">28.11 </span>Performing Cross-Platform Transport of Data Files Over the Network
               </h3>
               <div>
                  <p>RMAN enables you to perform cross-platform transport of data files over the network. </p>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="section">RMAN can connect to a source database, create the required data file backups in the backupset format, transfer them to the destination, and then restore the backups on the destination database. This task is performed by using the <code class="codeph">FROM SERVICE</code> clause along with the <code class="codeph">RESTORE FOREIGN DATAFILE</code> command. 
                  </div>
                  <!-- class="section" -->
                  <div class="p">You need to establish connectivity between the source database and the target database by adding the required entries to the <code class="codeph">tnsnames.ora</code> and <code class="codeph">listener.ora</code> files. The <code class="codeph">COMPATIBLE</code> initialization parameter of the source and destination databases must be set to 12.2.
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Open RMAN and connect <code class="codeph">AS TARGET</code> to the target database (on which the data file must be restored) as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege</span></li>
                     <li class="stepexpand"><span>Restore the required data files by using the corresponding data files on the source database.</span><div>
                           <p>The <code class="codeph">FROM SERVICE</code> clause specifies the service name of the source database from which the data files must be restored. 
                           </p>
                           <p>The following statement restores the data files 21 and 22 using data files from a source database with service name <code class="codeph">source_db</code>. The <code class="codeph">TO NEW</code> clause indicates that the data files restored for the specified tablespace must use new names that are different from those on the source database. 
                           </p><pre class="pre codeblock"><code>RESTORE 
FOREIGN DATAFILE 21,22 TO NEW
FROM SERVICE 'source_db';
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Recover the foreign data files that were restored in Step 2.</span><div>
                           <p>The <code class="codeph">FROM SERVICE</code> clauses specifies the service name of the source database.
                           </p>
                           <p>The following statement recovers the foreign data files specified by the <code class="codeph">FOREIGN DATAFILECOPY</code> clause using data files in the source database whose service name is <code class="codeph">source_db</code>.
                           </p><pre class="pre codeblock"><code>RECOVER 
FOREIGN DATAFILECOPY '/u01/oracle/oradata/db1_tbs21.dbf','/u01/oracle/oradata/db1_tbs22.db'
FROM SERVICE 'source_db';
</code></pre></div>
                     </li>
                  </ol>
               </div>
            </div><a id="BRADV784"></a><div class="props_rev_3"><a id="GUID-27F404E2-4D45-4C99-B111-CD618F740C2B" name="GUID-27F404E2-4D45-4C99-B111-CD618F740C2B"></a><h3 id="BRADV-GUID-27F404E2-4D45-4C99-B111-CD618F740C2B" class="sect3"><span class="enumeration_section">28.12 </span>Performing Cross-Platform Data Transport in CDBs and PDBs
               </h3>
               <div>
                  <p>RMAN provides support for transporting data across platforms in a multitenant environment. You can transport a whole <a href="glossary.html#GUID-3E156A59-F6CC-4A2A-9749-DB7D1CE25F13"><span class="xrefglossterm">multitenant container database (CDB)</span></a>, the <a href="glossary.html#GUID-EA3DB8F4-F68E-4FC5-A599-32A4886FFF8A"><span class="xrefglossterm">root</span></a> only, or one or more pluggable databases (<a href="glossary.html#GUID-993BFB3F-3305-481C-999D-26132095DEC9"><span class="xrefglossterm">PDB</span></a>s) across platforms. The cross-platform transport can be performed using images copies or backup sets. The information in this chapter is applicable to CDBs and PDBs with the differences described in the following sections.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-7523B82F-0DF6-4E1F-8FE6-DFDC049BA002">About Cross-Platform Transport of PDBs</a></p>
                     </li>
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-0BA12DA0-9539-4496-8BAA-D20E16375758">Performing Cross-Platform Transport of a Whole CDB</a></p>
                     </li>
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-D658A389-1BA6-4793-B564-96357264A0A7" title="Pluggable database (PDBs) can be transported and plugged in to a destination multitenant container database (CDB) which is on a different platform than the source CDB. In addition to an RMAN backup of the PDB, you need the metadata required to plug the PDB into the destination CDB.">Performing Cross-Platform Transport of a Closed PDB</a></p>
                     </li>
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-0CBA7F68-0AEB-43B8-B9F6-AD7BB0D788F2" title="You can use a combination of inconsistent and consistent backups to transport a PDB and plug it into a CDB that is on a different platform. Inconsistent backups enable you to reduce application downtime because the PDB can be open while the backup is performed">Performing Cross-Platform Transport of a PDB Using Inconsistent Backups</a></p>
                     </li>
                     <li>
                        <p><a href="rman-transporting-data-across-platforms.html#GUID-A41CEF69-4D73-45F4-BDF8-DCCAEB20C08F">Performing Cross-Platform Transport of Tablespaces in a PDB</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV786"></a><div class="props_rev_3"><a id="GUID-7523B82F-0DF6-4E1F-8FE6-DFDC049BA002" name="GUID-7523B82F-0DF6-4E1F-8FE6-DFDC049BA002"></a><h4 id="BRADV-GUID-7523B82F-0DF6-4E1F-8FE6-DFDC049BA002" class="sect4"><span class="enumeration_section">28.12.1 </span>About Cross-Platform Transport of PDBs
                  </h4>
                  <div>
                     <div class="section">
                        <p>To transport an entire PDB to a different platform, the source platform and destination platform must use the same endian format. The <code class="codeph">COMPATIBLE</code> parameter on the source and destination CDB must be set to 12.1 or higher.
                        </p>
                        <p>Use one of the following techniques to transport PDBs across platforms:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to the root and use the <code class="codeph">BACKUP FOR TRANSPORT ... PLUGGABLE DATABASE</code> or <code class="codeph">BACKUP TO PLATFORM ... PLUGGABLE DATABASE</code> command to create a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> of one or more PDBs.
                              </p>
                              <p>When you are connected to the root, the following command creates a cross-platform backup of the PDBs <code class="codeph">hr_pdb</code> and <code class="codeph">sales_pdb</code>. The PDBs must be read-only mode before the cross-platform backup is created.
                              </p><pre class="oac_no_warn" dir="ltr">BACKUP FOR TRANSPORT
PLUGGABLE DATABASE hr_pdb, sales_pdb FORMAT '/tmp/backups/pdb_%U';
</pre></li>
                           <li>
                              <p>Connect to the PDB and use the <code class="codeph">BACKUP FOR TRANSPORT</code> or <code class="codeph">BACKUP TO PLATFORM</code> commands to create backup sets that can be used to transport the PDB data to another platform.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-7523B82F-0DF6-4E1F-8FE6-DFDC049BA002__GUID-CCFC800A-8B5F-4978-AEF5-04EE55D2AE1D">
                           <p class="notep1">Note:</p>
                           <p>Performing cross-platform data transport of one or more PDBs by using the <code class="codeph">CONVERT</code> command is not supported.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-7523B82F-0DF6-4E1F-8FE6-DFDC049BA002__GUID-145356A5-D04E-499E-ABDA-F14F1D313FB0">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).">Making RMAN Connections to a CDB</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV785"></a><div class="props_rev_3"><a id="GUID-0BA12DA0-9539-4496-8BAA-D20E16375758" name="GUID-0BA12DA0-9539-4496-8BAA-D20E16375758"></a><h4 id="BRADV-GUID-0BA12DA0-9539-4496-8BAA-D20E16375758" class="sect4"><span class="enumeration_section">28.12.2 </span>Performing Cross-Platform Transport of a Whole CDB
                  </h4>
                  <div>
                     <div class="section">
                        <p>In a CDB, the steps to transport data across platforms are similar to the ones used for non-CDBs. The only difference is that, on both the source and <a href="glossary.html#GUID-4CDA2F90-4918-4357-AE32-313264940FFA"><span class="xrefglossterm">destination database</span></a>s, you must connect to the root as a <a href="glossary.html#GUID-2B102186-15BD-443C-B375-8CB0D442CF5F"><span class="xrefglossterm">common user</span></a> with the common <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege.
                        </p>
                        <div class="infoboxnotealso" id="GUID-0BA12DA0-9539-4496-8BAA-D20E16375758__GUID-E76A0E5B-D72F-4222-8B32-AAB624E3ACA9">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-76834111-5476-4591-A472-7DA5E2F4464D">Performing Cross-Platform Database Transport with Backup Sets</a>"</span></p>
                        </div>
                        <p>To transport an entire CDB, the source platform and the destination platform must use the same endian format.</p>
                        <p>The <code class="codeph">BACKUP FOR TRANSPORT</code> or <code class="codeph">BACKUP TO PLATFORM</code> command creates a <a href="glossary.html#GUID-2E1D5532-31E0-4B78-AAF9-DEC27CC3927B"><span class="xrefglossterm">cross-platform backup</span></a> of the whole CDB. The <code class="codeph">CONVERT</code> command creates image copies of the CDB that can be transported to a different platform.
                        </p>
                        <p>The following command, when connected to the root, creates a cross-platform backup of the whole CDB:</p><pre class="oac_no_warn" dir="ltr">BACKUP
TO PLATFORM 'Linux x86 64-bit'
DATABASE FORMAT '/tmp/backups/cdb_%U;
</pre><p>While restoring the cross-platform backup on the destination database, the <code class="codeph">RESTORE DATABASE</code> command restores the whole CDB.
                        </p>
                        <div class="infoboxnotealso" id="GUID-0BA12DA0-9539-4496-8BAA-D20E16375758__GUID-7CBC0EB7-7E51-4A52-B370-B42F79F18DD5">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).">Making RMAN Connections to a CDB</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D658A389-1BA6-4793-B564-96357264A0A7" name="GUID-D658A389-1BA6-4793-B564-96357264A0A7"></a><h4 id="BRADV-GUID-D658A389-1BA6-4793-B564-96357264A0A7" class="sect4"><span class="enumeration_section">28.12.3 </span>Performing Cross-Platform Transport of a Closed PDB
                  </h4>
                  <div>
                     <p>Pluggable database (PDBs) can be transported and plugged in to a destination multitenant container database (CDB) which is on a different platform than the source CDB. In addition to an RMAN backup of the PDB, you need the metadata required to plug the PDB into the destination CDB.</p>
                     <div class="section">
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">
                        <p>The <code class="codeph">COMPATIBLE</code> parameter on the source CDB and destination CDB must be set to 12.2. The source CDB and the destination CDB must use the same endian format.
                        </p>
                        <p>To perform cross-platform transport of a closed PDB into a destination CDB:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Perform the following steps on the source CDB:</span><ol type="a">
                              <li class="substepexpand"><span>Connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span></li>
                              <li class="substepexpand"><span>Close the PDB that needs to be transported.</span><div>
                                    <p>The following statement closes the PDB <code class="codeph">hr_pdb</code>.
                                    </p><pre class="pre codeblock"><code>RMAN&gt; ALTER PLUGGABLE DATABASE hr_pdb CLOSE IMMEDIATE;</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Create a cross-platform full backup of the PDB that must be transported by using the <code class="codeph">BACKUP PLUGGABLE DATABASE</code> command.</span><div>
                                    <p>To create a cross-platform backup, include either the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause.
                                    </p>
                                    <p>The following example creates a cross-platform backup of the PDB <code class="codeph">hr_pdb</code> for the <code class="codeph">Linux x86 64-bit</code> platform. The metadata required to plug this PDB into the destination CDB is specified using the <code class="codeph">UNPLUG INTO</code> clause and stored in the XML file <code class="codeph">metadata_hrpdb.xml</code>.
                                    </p><pre class="pre codeblock"><code>BACKUP TO PLATFORM= 'Linux x86 64-bit'
   UNPLUG INTO '/u01/oradata/backups/metadata_hrpdb.xml'
   PLUGGABLE DATABASE hr_pdb
   FORMAT '/u01/oradata/backups/transport_hrpdb.bck';</code></pre></div>
                              </li>
                           </ol>
                        </li>
                        <li class="stepexpand"><span>Transport the backup sets and the XML file created in Step 1c to the destination CDB.</span></li>
                        <li class="stepexpand"><span>Perform the following steps on the destination CDB:</span><ol type="a">
                              <li class="substepexpand"><span>Connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span></li>
                              <li class="substepexpand"><span>Ensure that the CDB is open in read-write mode.</span><div>
                                    <p>The following command displays the current mode of the CDB.</p><pre class="pre codeblock"><code>RMAN&gt; SELECT open_mode FROM V$DATABASE;</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Determine if the source PDB that is being transported is compatible with the destination CDB by using the <code class="codeph">DBMS_PDB.CHECK_PLUG_COMPATIBILITY</code> procedure.</span><div>
                                    <p>The following function determines if the source PDB <code class="codeph">hr_pdb</code>, whose metadata is stored in an XML file <code class="codeph">metadata_hrpdb.xml</code>, can be plugged in to the destination CDB. The function returns <code class="codeph">TRUE</code> is the source PDB is compatible with the destination CDB.
                                    </p><pre class="pre codeblock"><code>SQL&gt; declare
  2     c boolean;
  3  begin
  4     c:=dbms_pdb.check_plug_compatibility('/u02/backup_restore/metadata_hrpdb.xml','HR_PDB');
  5     if (c) then dbms_output.put_line('True');
  6       else dbms_output.put_line('False');
  7     end if;
  8  end;
  9  /
PL/SQL procedure successfully completed.
</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Restore the PDB backup that was created on the source CDB.</span><div>
                                    <p>The <code class="codeph">USING</code> clause specifies the name of the XML file that contains the metadata required to plug the source PDB into the destination CDB. To copy data files to a different location than described in the XML file, use the <code class="codeph">FILE_NAME_CONVERT</code> clause.
                                    </p>
                                    <p>The following statement restores the backup of the PDB <code class="codeph">hr_pdb</code> that is stored in the backupset <code class="codeph">transport_hrpdb.bck</code>. The metadata for this PDB is stored in <code class="codeph">metadata_hrpdb.xml</code>.
                                    </p><pre class="pre codeblock"><code>RESTORE        
   USING '/u02/backup_restore/metadata_hrpdb.xml'
   FOREIGN PLUGGABLE DATABASE hr_pdb FORMAT '/u02/oracle/oradata/%U'       
   FROM BACKUPSET '/u02/backup_restore/transport_hrpdb.bck';</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Open the restored PDB.</span><div>
                                    <p>The following command opens the PDB <code class="codeph">hr_pdb</code>.
                                    </p><pre class="pre codeblock"><code>RMAN&gt; ALTER PLUGGABLE DATABASE hr_pdb OPEN;</code></pre><div class="infoboxnote" id="GUID-D658A389-1BA6-4793-B564-96357264A0A7__GUID-02F4BBFB-3DDB-48F9-90D1-4D76AF4F113C">
                                       <p class="notep1">Note:</p>
                                       <p>If a PDB with the same name as the one being transported exists on the destination database, then the restore operation fails.</p>
                                    </div>
                                 </div>
                              </li>
                           </ol>
                           <div>
                              <div class="infoboxnote" id="GUID-D658A389-1BA6-4793-B564-96357264A0A7__GUID-5DD7967C-420F-42E3-83F6-DC768E17C576">
                                 <p class="notep1">Note:</p>
                                 <p><a href="rman-transporting-data-across-platforms.html#GUID-0CBA7F68-0AEB-43B8-B9F6-AD7BB0D788F2" title="You can use a combination of inconsistent and consistent backups to transport a PDB and plug it into a CDB that is on a different platform. Inconsistent backups enable you to reduce application downtime because the PDB can be open while the backup is performed">Performing Cross-Platform Transport of a PDB Using Inconsistent Backups</a></p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0CBA7F68-0AEB-43B8-B9F6-AD7BB0D788F2" name="GUID-0CBA7F68-0AEB-43B8-B9F6-AD7BB0D788F2"></a><h4 id="BRADV-GUID-0CBA7F68-0AEB-43B8-B9F6-AD7BB0D788F2" class="sect4"><span class="enumeration_section">28.12.4 </span>Performing Cross-Platform Transport of a PDB Using Inconsistent Backups
                  </h4>
                  <div>
                     <p>You can use a combination of inconsistent and consistent backups to transport a PDB and plug it into a CDB that is on a different platform. Inconsistent backups enable you to reduce application downtime because the PDB can be open while the backup is performed</p>
                     <div class="section">
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>When the PDB is open, you create cross-platform inconsistent backups. The first backup is an incremental level 0 backup. Subsequent backups are incremental level 1 backups that contain changes made to the PDB since the last incremental backup. There is no restriction on the number of inconsistent level 1 backups. Finally, close the PDB, create the last consistent incremental level 1 backup and the XML file containing the metadata required to plug the source PDB into a destination CDB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="p">The <code class="codeph">COMPATIBLE</code> parameter on the source CDB and destination CDB must be set to 12.2. The source CDB and the destination CDB must use the same endian format. 
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Perform the following steps on the source CDB:</span><ol type="a">
                              <li class="substepexpand"><span>Connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span></li>
                              <li class="substepexpand"><span>Ensure that the PDB that must be transported is in read-write mode.</span></li>
                              <li class="substepexpand"><span>Note the database SCN before a level 0 backup is created.</span><div><pre class="pre codeblock"><code>SELECT CHECKPOINT_CHANGE# FROM V$DATABASE;</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Create a cross-platform incremental level 0 backup of the PDB that must be transported by using the <code class="codeph">BACKUP ... PLUGGABLE DATABASE</code> command.</span><div>
                                    <p>Use either the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause to specify a cross-platform backup. Include the <code class="codeph">ALLOW INCONSISTENT</code> clause to indicate that the PDB is not in a consistent state.
                                    </p>
                                    <p>The following statement creates a cross-platform incremental level 0 backup of the PDB <code class="codeph">hr_pdb</code>.
                                    </p><pre class="pre codeblock"><code>BACKUP INCREMENTAL LEVEL 0
   FOR TRANSPORT  
   ALLOW INCONSISTENT
   PLUGGABLE DATABASE hr_pdb FORMAT '/u01/backups/hr_pdb_level0.bck';</code></pre><p>Because the PDB is in read-write mode, an inconsistent backup is created. </p>
                                 </div>
                              </li>
                              <li class="substepexpand"><span>Close the PDB being transported.</span><div>
                                    <p>The following command closes the PDB <code class="codeph">hr_pdb</code>.
                                    </p><pre class="pre codeblock"><code>RMAN&gt; ALTER PLUGGABLE DATABASE hr_pdb CLOSE IMMEDIATE;</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Create a consistent cross-platform incremental backup. The point-in-time for the incremental backup must be from the SCN noted in Step 1c.</span><div>
                                    <p>Include the <code class="codeph">UNPLUG INTO</code> clause to specify the name of the XML that stores the metadata required to plug this PDB into the destination CDB. 
                                    </p>
                                    <p>The following statement creates a cross-platform incremental backup of the PDB <code class="codeph">hr_pdb</code>. This is a consistent PDB backup.
                                    </p><pre class="pre codeblock"><code>BACKUP INCREMENTAL FROM SCN 36462
   FOR TRANSPORT
   UNPLUG INTO '/u01/backups/metadata_hr_pdb.xml'
   PLUGGABLE DATABASE hr_pdb FORMAT '/u01/backups/hr_pdb_level1_con.bck';</code></pre></div>
                              </li>
                           </ol>
                        </li>
                        <li class="stepexpand"><span>Transport all the PDB backups and the XML file containing the PDB metadata to the destination database.</span><div>
                              <div class="infoboxnote" id="GUID-0CBA7F68-0AEB-43B8-B9F6-AD7BB0D788F2__GUID-58E8DCFC-E27C-405A-8A8A-07E4E29F6E9C">
                                 <p class="notep1">Note:</p>
                                 <p>Typically, you would transport the inconsistent backups as they are created and then restore them on the destination CDB.</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Perform the following steps on the destination CDB:</span><ol type="a">
                              <li class="substepexpand"><span>Connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span></li>
                              <li class="substepexpand"><span>Ensure that the destination CDB is open in read-write mode.</span></li>
                              <li class="substepexpand"><span>Restore the cross-platform inconsistent level 0 backup of the PDB that was created on the source CDB.</span><div>
                                    <p>This restore operation creates a set of foreign data files that correspond to the source PDB in the destination CDB.</p>
                                    <p>The following statement restores the cross-platform level 0 backup of the PDB <code class="codeph">hr_pdb</code> that is stored in the backupset <code class="codeph">hr_pdb_level0.bck</code>.
                                    </p><pre class="pre codeblock"><code>RESTORE 
   FOREIGN PLUGGABLE DATABASE hr_pdb FORMAT '/u02/oradata/%U'
   FROM BACKUPSET '/u02/backup_restore/hr_pdb_level0.bck';</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Apply the cross-platform level 1 incremental backup created when the source PDB was closed to the data files restored in Step 3c. Use the XML file containing the source PDB metadata to plug the PDB into the destination CDB.</span><div>
                                    <p>The following command recovers the foreign data files by using the incremental level 1 backup <code class="codeph">hr_pdb_level1_con.bck</code>. There are two restored foreign data files specified using the <code class="codeph">FOREIGN DATAFILECOPY</code> clause. The <code class="codeph">USING</code> clause specifies the XML file that contains metatdata required to plug the PDB into the destination CDB.
                                    </p><pre class="pre codeblock"><code>RECOVER
USING '/u02/backup_restore/metadata_hr_pdb.xml'
FOREIGN DATAFILECOPY '/u2/oradata/09qurbdp_1_1','/u2/oradata/03bcdqrv_2_5'
FROM BACKUPSET '/u02/backup_restore/hr_pdb_level1_con.bck';</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Determine the name of the transported PDB in the destination CDB.</span><div>
                                    <p>The source PDB is plugged in to the destination using a different name. Typically, the name is the unique name of the CDB followed by a randomly-generated number.</p>
                                    <div class="p">The following command displays the list of PDBs.<pre class="pre codeblock"><code>SELECT name FROM V$PDBS;</code></pre></div>
                                 </div>
                              </li>
                              <li class="substepexpand"><span>Open the recovered PDB.</span><div>
                                    <p>The following statement opens the PDB <code class="codeph">mycdb_72346</code>.
                                    </p><pre class="pre codeblock"><code>RMAN&gt; ALTER PLUGGABLE DATABASE mycdb_72346 OPEN;</code></pre><div class="infoboxnote" id="GUID-0CBA7F68-0AEB-43B8-B9F6-AD7BB0D788F2__GUID-02F4BBFB-3DDB-48F9-90D1-4D76AF4F113C">
                                       <p class="notep1">Note:</p>
                                       <p>If a PDB with the same name as the one being transported exists on the destination database, then the restore operation fails.</p>
                                    </div>
                                 </div>
                              </li>
                           </ol>
                           <div>
                              <div class="infoboxnote" id="GUID-0CBA7F68-0AEB-43B8-B9F6-AD7BB0D788F2__GUID-52635619-FFE7-452A-803E-2AA072312E4A">
                                 <p class="notep1">Note:</p>
                                 <p><a href="rman-transporting-data-across-platforms.html#GUID-D658A389-1BA6-4793-B564-96357264A0A7" title="Pluggable database (PDBs) can be transported and plugged in to a destination multitenant container database (CDB) which is on a different platform than the source CDB. In addition to an RMAN backup of the PDB, you need the metadata required to plug the PDB into the destination CDB.">Performing Cross-Platform Transport of a Closed PDB</a></p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV862"></a><div class="props_rev_3"><a id="GUID-A41CEF69-4D73-45F4-BDF8-DCCAEB20C08F" name="GUID-A41CEF69-4D73-45F4-BDF8-DCCAEB20C08F"></a><h4 id="BRADV-GUID-A41CEF69-4D73-45F4-BDF8-DCCAEB20C08F" class="sect4"><span class="enumeration_section">28.12.5 </span>Performing Cross-Platform Transport of Tablespaces in a PDB
                  </h4>
                  <div>
                     <div class="section">
                        <p>RMAN enables you to transport user tablespaces contained in a PDB to a different platform by using either the <code class="codeph">CONVERT</code> or <code class="codeph">BACKUP</code> command. In this case, the source platform and the destination platform can use different endian formats.
                        </p>
                        <p>Use one of the following techniques to transport a tablespace in a PDB:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to the PDB as <code class="codeph">TARGET</code> and use the <code class="codeph">BACKUP TABLESPACE</code> command to create a cross-platform backup of the selected tablespaces.
                              </p>
                              <p>See <span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-F83EC306-9E7A-46D2-8F7F-2DDD595E307D">Steps to Transport Read-Only Tablespaces to a Different Platform Using Backup Sets</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Connect to the PDB as <code class="codeph">TARGET</code> and use the <code class="codeph">CONVERT TABLESPACE</code> command to transport a read-only tablespace.
                              </p>
                              <p>The following command, when connected to the PDB, converts the read-only tablespace <code class="codeph">my_tbs</code>:
                              </p><pre class="oac_no_warn" dir="ltr">CONVERT TABLESPACE my_tbs
    TO PLATFORM 'Solaris[tm] OE (64-bit)'
    FORMAT '/tmp/xplat_backups/my_tbs_%U.bck';
</pre></li>
                           <li>
                              <p>Connect to the PDB as <code class="codeph">TARGET</code> and use the <code class="codeph">CONVERT DATAFILE</code> command.
                              </p>
                              <p>The following command, when connected to the PDB, converts the data file <code class="codeph">sales.df</code>:
                              </p><pre class="oac_no_warn" dir="ltr">CONVERT
    FROM PLATFORM 'Solaris[tm] OE (64-bit)'
    DATAFILE '/u01/app/oracle/oradata/orcl/sales.df'
    FORMAT '/tmp/xplat_backups/sales_df_solaris.dat'
</pre></li>
                        </ul>
                        <p>However, when connected as <code class="codeph">TARGET</code> to a PDB, you cannot use the <code class="codeph">CONVERT DATAFILE</code> command to convert a tablespace that contains undo segments.
                        </p>
                        <div class="infoboxnotealso" id="GUID-A41CEF69-4D73-45F4-BDF8-DCCAEB20C08F__GUID-046ECE28-2CDC-4877-92D9-95D6829500F4">
                           <p class="notep1">See Also:</p>
                           <p><a href="rman-transporting-data-across-platforms.html#GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A">Example: Transporting a Tablespace in a PDB</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="BRADV863"></a><div class="props_rev_3"><a id="GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A" name="GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A"></a><h5 id="BRADV-GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A" class="sect5"><span class="enumeration_section">28.12.5.1 </span>Example: Transporting a Tablespace in a PDB
                     </h5>
                     <div>
                        <div class="section">
                           <p>This example used the <code class="codeph">CONVERT</code> command to transport the tablespace <code class="codeph">sales_tbs</code> from the PDB <code class="codeph">pdb5</code> to the destination PDB <code class="codeph">pdb3</code>. The source PDB is on a Sun Solaris platform and the destination PDB is on a Linux x86 64-bit platform.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Ensure that the required prerequisites are met.</span><div>
                                 <div class="infoboxnotealso" id="GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A__GUID-FECF98BC-4705-430F-8B04-96FE0F02A310">
                                    <p class="notep1">See Also:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="q">"<a href="rman-transporting-data-across-platforms.html#GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54__CIHDJFGD">Prerequisites for Performing Cross-Platform Tablespace Transport Using Backup Sets</a>"</span></p>
                                       </li>
                                       <li>
                                          <p><a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for the <code class="codeph">CONVERT</code> command prerequisites
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Start SQL*Plus and connect to the source PDB as a user who is granted the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span><div>
                                 <p>In this example, <code class="codeph">sbu</code> is a user who has been granted the <code class="codeph">SYSBACKUP</code> privilege on the source PDB <code class="codeph">pdb5</code>.
                                 </p><pre class="oac_no_warn" dir="ltr">% sqlplus sbu@pdb5 AS SYSBACKUP
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Query the name for the destination platform in the <code class="codeph">V$TRANSPORTABLE_PLATFORM</code> view.</span><div>
                                 <p>In this example, the platform name for the destination platform is <code class="codeph">Linux x86 64-bit</code>.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Verify that the tablespace that is to be transported is self-contained.</span><div>
                                 <div class="infoboxnotealso" id="GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A__GUID-02E5EEE2-E3E7-43FB-8F7E-F18B3A1E3E76">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="../admin/transporting-data.html#ADMIN11399" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about determining whether tablespaces are self-contained
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Place the tablespace to be transported in read-only mode.</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLESPACE sales_tbs READ ONLY;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Create the directory object that is used to store the files generated by the DataPump export and import utilities.</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE OR REPLACE DIRECTORY xtt_dir AS '/scratch/xtt';
Directory created.
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Start RMAN and connect to the source PDB as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span><div>
                                 <p>The following example starts RMAN and connects to the source PDB <code class="codeph">pdb5</code> as the <code class="codeph">sbu</code> user who has been granted the <code class="codeph">SYSBACKUP</code> privilege.
                                 </p><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt; CONNECT TARGET "sbu@pdb5 as sysbackup"
</pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A__CIHFCAHJ"><span>Convert the tablespace on the source database using the <code class="codeph">CONVERT</code> command.</span><div>
                                 <p>The following command converts the tablespace <code class="codeph">sales_tbs</code> to the destination platform Linux x86-64 bit. The converted data files are stored in <code class="codeph">/tmp/xplat_convert/sales_tbs_conv.bck</code>.
                                 </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONVERT TABLESPACE 'SALES_TBS'
TO PLATFORM 'Linux x86 64-bit'
FORMAT  '/tmp/xplat_convert/sales_tbs_conv.bck';
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Exit RMAN.</span></li>
                           <li class="stepexpand" id="GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A__CIHFFCJH"><span>On the source database, use the DataPump export utility to create an export dump file containing the metadata for tablespace <code class="codeph">sales_tbs</code>. Use the credentials of the <code class="codeph">SYS</code> user to perform the export.</span><div>
                                 <p>The following command creates an export dump file called <code class="codeph">sales_tbs_conv.dmp</code> in the location specified by the directory object <code class="codeph">xtt_dir</code>. The credentials used to perform the export are that of the <code class="codeph">SYS</code> user.
                                 </p><pre class="oac_no_warn" dir="ltr"># expdp "'"sys@pdb5 as sysdba"'" directory=xtt_dir dumpfile=sales_tbs_conv.dmp logfile=sales_tbs_conv.log transport_tablespaces=sales_tbs
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Copy the converted data files created in Step <a href="rman-transporting-data-across-platforms.html#GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A__CIHFCAHJ">8</a> and the export dump file created in Step <a href="rman-transporting-data-across-platforms.html#GUID-2525E4C4-59FF-4A8D-8C1A-8BD352B1235A__CIHFFCJH">10</a> to the destination PDB. You can use operating system commands to copy the files.</span></li>
                           <li class="stepexpand"><span>On the destination PDB, plug the tablespace into the PDB by using the DataPump import utility. Use the credentials of the <code class="codeph">SYS</code> user to perform the import.</span><div>
                                 <p>The following example imports the metadata contained in the export dump file <code class="codeph">sales_tbs_conv.dmp</code> and the converted data files in <code class="codeph">/tmp/xplat_convert/sales_tbs_conv.bck</code> into the PDB <code class="codeph">pdb3</code>.
                                 </p><pre class="oac_no_warn" dir="ltr">#impdp "'"sys@pdb3 as sysdba"'" directory=xtt_dir dumpfile=sales_tbs_conv.dmp datafiles=/tmp/xplat_convert/sales_tbs_conv.bck
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Start SQL*Plus and connect to the destination PDB as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span><div>
                                 <p>The following command connects to the PDB <code class="codeph">pdb3</code> as the <code class="codeph">sbu</code> user who has been granted the <code class="codeph">SYSBACKUP</code> privilege.
                                 </p><pre class="oac_no_warn" dir="ltr">%sqlplus sbu@pdb3 as sysbackup
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Verify the status of the converted tablespace on the destination PDB.</span><div>
                                 <p>The following query determines the status of the tablespace <code class="codeph">sales_tbs</code>.
                                 </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT status FROM dba_tablespaces
     WHERE tablespace_name LIKE 'SALES_TBS';

STATUS
---------
READ ONLY
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Make the tablespace <code class="codeph">sales_tbs</code> in the destination PDB <code class="codeph">pdb3</code> online.</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLESPACE sales_tbs READ WRITE;
</pre></div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
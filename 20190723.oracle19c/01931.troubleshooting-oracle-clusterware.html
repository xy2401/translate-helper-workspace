<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Troubleshooting Oracle Clusterware</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Clusterware Administration and Deployment Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Clusterware Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00">
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95727-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="oracle-cluster-registry-utility-reference.html" title="Previous" type="text/html">
      <link rel="next" href="glossary.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-cluster-registry-utility-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="glossary.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Clusterware Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Troubleshooting Oracle Clusterware</li>
            </ol>
            <a id="GUID-5D0B8A16-31FA-4376-BCFC-DC77F6CEC60A" name="GUID-5D0B8A16-31FA-4376-BCFC-DC77F6CEC60A"></a><a id="CWADD025"></a>
            
            <h2 id="CWADD-GUID-5D0B8A16-31FA-4376-BCFC-DC77F6CEC60A" class="sect2"><span class="enumeration_appendix">K </span>Troubleshooting Oracle Clusterware
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This appendix introduces monitoring the Oracle Clusterware environment and explains how you can enable dynamic debugging to troubleshoot Oracle Clusterware processing, and enable debugging and tracing for specific components and specific Oracle Clusterware resources to focus your troubleshooting efforts.</p>
               <p>This appendix includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C" title="Review this content to understand clusterware-specific aspects of how Oracle Clusterware uses ADR.">Oracle Clusterware Diagnostic and Alert Log Data</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-50FAE797-1174-49DD-9FAB-A23E6A208537">Diagnostics Collection Script</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-545CEDAE-8A83-405B-86C1-2410DD6DDDBB" title="During an upgrade, while running the Oracle Clusterware root.sh script, you may see the following messages:">Rolling Upgrade and Driver Installation Issues</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B">Testing Zone Delegation</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-clusterware.html#GUID-FA795984-F89F-4D2F-8A06-5AE37FBC416E">Oracle Clusterware Alerts</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-FE2479DE-DC5C-43DD-9A08-27047FB1347D" name="GUID-FE2479DE-DC5C-43DD-9A08-27047FB1347D"></a><h3 id="CWADD-GUID-FE2479DE-DC5C-43DD-9A08-27047FB1347D" class="sect3">Troubleshooting an Incompatible Fleet Patching and Provisioning Client Resource</h3>
               <div>
                  <p>If you manually upgrade an Oracle Clusterware 12<span class="italic">c</span> (12.1) target that is registered as a Fleet Patching and Provisioning target to a later version, then the result will be an incompatible Fleet Patching and Provisioning Client resource.
                  </p>
                  <div class="section">To register a Fleet Patching and Provisioning Client resource with Fleet Patching and Provisioning, you must perform the following steps on the Fleet Patching and Provisioning Server:
                     <div class="infoboxnote" id="GUID-FE2479DE-DC5C-43DD-9A08-27047FB1347D__GUID-7BFE0D0C-D040-45E0-90E0-F58147C64C19">
                        <p class="notep1">Note:</p>These same steps apply to upgrading an Oracle Clusterware 12<span class="italic">c</span> (12.2) Fleet Patching and Provisioning Client cluster to a later version that results in connectivity issues.
                     </div>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Stop the Fleet Patching and Provisioning Client resource on the target if it is running.</span></li>
                     <li class="stepexpand"><span>Run the following commands on the Fleet Patching and Provisioning Server:</span><div>Update the Fleet Patching and Provisioning Client credential on the Fleet Patching and Provisioning Server:<pre class="pre codeblock"><code>$ rhpctl modify client -client <span class="variable" translate="no">client_name</span> -password</code></pre><p>Export data from the repository to the Fleet Patching and Provisioning Client data file:</p><pre class="pre codeblock"><code>$ rhpctl export client -client <span class="variable" translate="no">client_name</span> -clienetdata <span class="variable" translate="no">file_name</span>.xml</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Copy the <code class="codeph">xml</code> file you created in the previous step to a node in the Fleet Patching and Provisioning Client cluster, and run the following command to update the client credential:</span><div><pre class="pre codeblock"><code>$ srvctl modify rhpclient -clientdata <span class="variable" translate="no">file_name</span>.xml</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Start the Fleet Patching and Provisioning Client:</span><div><pre class="pre codeblock"><code>$ srvctl start rhpclient</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Verify that the Fleet Patching and Provisioning Client started successfully:</span><div><pre class="pre codeblock"><code>$ srvctl status rhpclient</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>To verify that the Fleet Patching and Provisioning Client is properly registered with the Fleet Patching and Provisioning Server, run the following command and search for the Fleet Patching and Provisioning Client-registered port reported in the command output:</span><div><pre class="pre codeblock"><code>$ rhpctl query client -client <span class="variable" translate="no">client_cluster</span></code></pre></div>
                     </li>
                  </ol>
               </div>
            </div>
            <div class="sect2"><a id="GUID-23BEE10D-F2CE-4785-83EE-21A7A7605A47" name="GUID-23BEE10D-F2CE-4785-83EE-21A7A7605A47"></a><h3 id="CWADD-GUID-23BEE10D-F2CE-4785-83EE-21A7A7605A47" class="sect3">Using the Cluster Resource Activity Log to Monitor Cluster Resource Failures</h3>
               <div>
                  <p>The cluster resource activity log provides precise and specific information about a resource failure, separate from diagnostic logs.</p>
                  <p>If an Oracle Clusterware-managed resource fails, then Oracle Clusterware logs messages about the failure in the <strong class="term">cluster resource activity log</strong> located in the Grid Infrastructure Management Repository. Failures can occur as a result of a problem with a resource, a hosting node, or the network. The cluster resource activity log provides a unified view of the cause of resource failure.
                  </p>
                  <p>Writes to the cluster resource activity log are tagged with an activity ID and any related data gets the same parent activity ID, and is nested under the parent data. For example, if Oracle Clusterware is running and you run the <code class="codeph">crsctl stop clusterware -all</code> command, then all activities get activity IDs, and related activities are tagged with the same parent activity ID. On each node, the command creates sub-IDs under the parent IDs, and tags each of the respective activities with their corresponding activity ID. Further, each resource on the individual nodes creates sub-IDs based on the parent ID, creating a hierarchy of activity IDs. The hierarchy of activity IDs enables you to analyze the data to find specific activities.
                  </p>
                  <p>For example, you may have many resources with complicated dependencies among each other, and with a database service. On Friday, you see that all of the resources are running on one node but when you return on Monday, every resource is on a different node, and you want to know why. Using the <code class="codeph">crsctl query calog</code> command, you can query the cluster resource activity log for all activities involving those resources and the database service. The output provides a complete flow and you can query each sub-ID within the parent service failover ID, and see, specifically, what happened and why.
                  </p>
                  <p>You can query any number of fields in the cluster resource activity log using filters. For example, you can query all the activities written by specific operating system users such as <code class="codeph">root</code>. The output produced by the <code class="codeph">crsctl query calog</code> command can be displayed in either a tabular format or in XML format.
                  </p>
                  <p>The cluster resource activity log is an adjunct to current Oracle Clusterware logging and alert log messages.</p>
                  <div class="p">
                     <div class="infoboxnote" id="GUID-23BEE10D-F2CE-4785-83EE-21A7A7605A47__GUID-2F538D6C-6113-4868-863F-C8E85B5C4BD1">
                        <p class="notep1">Note:</p>
                        <p>Oracle Clusterware does not write messages that contain security-related information, such as log-in credentials, to the cluster activity log.</p>
                     </div>
                  </div>
                  <p>Use the following commands to manage and view the contents of the cluster resource activity log:</p>
               </div>
               <div class="sect3"><a id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F" name="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F"></a><h4 id="CWADD-GUID-257FAEAB-3AD6-4255-98CA-6416787E948F" class="sect4">crsctl query calog</h4>
                  <div>
                     <p>Query the cluster resource activity logs matching specific criteria.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-CF0852F7-006F-4F6B-8A22-D05050FC2132">Syntax</p><pre class="pre codeblock"><code>crsctl query calog [-aftertime "<span class="variable" translate="no">timestamp</span>"] [-beforetime "<span class="variable" translate="no">timestamp</span>"]
  [-duration "<span class="variable" translate="no">time_interval</span>" | -follow] [-filter "<span class="variable" translate="no">filter_expression</span>"]
  [-fullfmt | -xmlfmt]</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-90B37207-F8E4-43A5-8F9F-DF20E3761BD9">Parameters</p>
                        <div class="tblformal" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-07DFD5AA-1229-4E2A-81EB-19B1C39737F4">
                           <p class="titleintable">Table K-1 crsctl query calog Command Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="crsctl query calog Command Parameters" summary="Describes the crsctl query calog command parameters." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d199619e652">Parameter</th>
                                    <th align="left" valign="bottom" width="20%" id="d199619e654">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e658" headers="d199619e652 "><code class="codeph">-aftertime "<span class="variable" translate="no">timestamp</span>"</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e658 d199619e654 ">
                                       <p>Displays the activities logged after a specific time.</p>
                                       <p>Specify the timestamp in the <code class="codeph">YYYY-MM-DD HH24:MI:SS[.FF][TZH:TZM]</code> or <code class="codeph">YYYY-MM-DD</code> or <code class="codeph">HH24:MI:SS[.FF][TZH:TZM]</code> format.
                                       </p>
                                       <p><code class="codeph">TZH</code> and <code class="codeph">TZM</code> stands for time zone hour and minute, and <code class="codeph">FF</code> stands for microseconds.
                                       </p>
                                       <p>If you specify <code class="codeph">[TZH:TZM]</code>, then the <code class="codeph">crsctl</code> command assumes UTC as time zone. If you do not specify <code class="codeph">[TZH:TZM]</code>, then the <code class="codeph">crsctl</code> command assumes the local time zone of the cluster node from where the <code class="codeph">crsctl</code> command is run.
                                       </p>
                                       <p>Use this parameter with <code class="codeph">-beforetime</code> to query the activities logged at a specific time interval.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e711" headers="d199619e652 "><code class="codeph">-beforetime "<span class="variable" translate="no">timestamp</span>"</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e711 d199619e654 ">
                                       <p>Displays the activities logged before a specific time.</p>
                                       <p>Specify the timestamp in the <code class="codeph">YYYY-MM-DD HH24:MI:SS[.FF][TZH:TZM]</code> or <code class="codeph">YYYY-MM-DD</code> or <code class="codeph">HH24:MI:SS[.FF][TZH:TZM]</code> format.
                                       </p>
                                       <p><code class="codeph">TZH</code> and <code class="codeph">TZM</code> stands for time zone hour and minute, and <code class="codeph">FF</code> stands for microseconds.
                                       </p>
                                       <p>If you specify <code class="codeph">[TZH:TZM]</code>, then the <code class="codeph">crsctl</code> command assumes UTC as time zone. If you do not specify <code class="codeph">[TZH:TZM]</code>, then the <code class="codeph">crsctl</code> command assumes the local time zone of the cluster node from where the <code class="codeph">crsctl</code> command is run.
                                       </p>
                                       <p>Use this parameter with <code class="codeph">-aftertime</code> to query the activities logged at a specific time interval.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e764" headers="d199619e652 "><code class="codeph">-duration "<span class="variable" translate="no">time_interval</span>" | -follow</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e764 d199619e654 ">
                                       <p>Use <code class="codeph">-duration</code> to specify a time interval that you want to query when you use the <code class="codeph">-aftertime</code> parameter.
                                       </p>
                                       <p>Specify the timestamp in the <code class="codeph">DD HH:MM:SS</code> format.
                                       </p>
                                       <p>Use <code class="codeph">-follow</code> to display a continuous stream of activities as they occur.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e790" headers="d199619e652 "><code class="codeph">-filter "<span class="variable" translate="no">filter_expression</span>"</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e790 d199619e654 ">
                                       <p>Query any number of fields in the cluster resource activity log using the <code class="codeph">-filter</code> parameter.
                                       </p>
                                       <p>To specify multiple filters, use a comma-delimited list of filter expressions surrounded by double quotation marks (<code class="codeph">""</code>).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e808" headers="d199619e652 "><code class="codeph">-fullfmt | -xmlfmt</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e808 d199619e654 ">
                                       <p>To display cluster resource activity log data, choose full or XML format.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-4E5ED2CF-FFAF-4CE5-A08C-4308F7B4FEE6">Cluster Resource Activity Log Fields</p>
                        <p>Query any number of fields in the cluster resource activity log using the <code class="codeph">-filter</code> parameter.
                        </p>
                        <div class="tblformal" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-FAEB6A3B-F6B6-49F7-91B0-A288EF3A3285">
                           <p class="titleintable">Table K-2 Cluster Resource Activity Log Fields</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Cluster Resource Activity Log Fields" summary="Describes the fields in the cluster resource activity log." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d199619e833">Field</th>
                                    <th align="left" valign="bottom" width="20%" id="d199619e835">Description</th>
                                    <th align="left" valign="bottom" width="20%" id="d199619e837">Use Case</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e841" headers="d199619e833 "><code class="codeph">timestamp</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e841 d199619e835 ">
                                       <p>The time when the cluster resource activities were logged.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e841 d199619e837 ">
                                       <p>Use this filter to query all the activities logged at a specific time.</p>
                                       <p>This is an alternative to <code class="codeph">-aftertime</code>, <code class="codeph">-beforetime</code>, and <code class="codeph">-duration</code> command parameters.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e862" headers="d199619e833 "><code class="codeph">writer_process_id</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e862 d199619e835 ">
                                       <p>The ID of the process that is writing to the cluster resource activity log.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e862 d199619e837 ">
                                       <p>Query only the activities spawned by a specific process.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e872" headers="d199619e833 "><code class="codeph">writer_process_name</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e872 d199619e835 ">
                                       <p>The name of the process that is writing to the cluster resource activity log.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e872 d199619e837 ">
                                       <p>When you query a specific process, CRSCTL returns all the activities for a specific process.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e882" headers="d199619e833 "><code class="codeph">writer_user</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e882 d199619e835 ">
                                       <p>The name of the user who is writing to the cluster resource activity log.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e882 d199619e837 ">
                                       <p>Query all the activities written by a specific user.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e892" headers="d199619e833 "><code class="codeph">writer_group</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e892 d199619e835 ">
                                       <p>The name of the group to which a user belongs who is writing to the cluster resource activity log.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e892 d199619e837 ">
                                       <p>Query all the activities written by users belonging to a specific user group.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e902" headers="d199619e833 "><code class="codeph">writer_hostname</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e902 d199619e835 ">
                                       <p>The name of the host on which the cluster resource activity log is written.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e902 d199619e837 ">
                                       <p>Query all the activities written by a specific host.</p> 
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e913" headers="d199619e833 "><code class="codeph">writer_clustername</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e913 d199619e835 ">
                                       <p>The name of the cluster on which the cluster resource activity log is written.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e913 d199619e837 ">
                                       <p>Query all the activities written by a specific cluster.</p> 
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e924" headers="d199619e833 "><code class="codeph">nls_product</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e924 d199619e835 ">
                                       <p>The product of the NLS message, for example, <code class="codeph">CRS</code>, <code class="codeph">ORA</code>, or <code class="codeph">srvm</code>.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e924 d199619e837 ">
                                       <p>Query all the activities that have a specific product name.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e943" headers="d199619e833 "><code class="codeph">nls_facility</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e943 d199619e835 ">
                                       <p>The facility of the NLS message, for example, <code class="codeph">CRS</code> or <code class="codeph">PROC</code>.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e943 d199619e837 ">
                                       <p>Query all the activities that have a specific facility name.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e959" headers="d199619e833 "><code class="codeph">nls_id</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e959 d199619e835 ">
                                       <p>The ID of the NLS message, for example <span class="variable" translate="no">42008</span>.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e959 d199619e837 ">
                                       <p>Query all the activities that have a specific message ID.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e972" headers="d199619e833 "><code class="codeph">nls_field_count</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e972 d199619e835 ">
                                       <p>The number of fields in the NLS message.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e972 d199619e837 ">
                                       <p>Query all the activities that correspond to NLS messages with more than, less than, or equal to <code class="codeph">nls_field_count</code> command parameters.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e986" headers="d199619e833 "><code class="codeph">nls_field1</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e986 d199619e835 ">
                                       <p>The first field of the NLS message.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e986 d199619e837 ">
                                       <p>Query all the activities that match the first parameter of an NLS message.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e996" headers="d199619e833 "><code class="codeph">nls_field1_type</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e996 d199619e835 ">
                                       <p>The type of the first field in the NLS message.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e996 d199619e837 ">
                                       <p>Query all the activities that match a specific type of the first parameter of an NLS message.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1006" headers="d199619e833 "><code class="codeph">nls_format</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1006 d199619e835 ">
                                       <p>The format of the NLS message, for example, <samp class="msgph">Resource '%s' has been modified</samp>.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1006 d199619e837 ">
                                       <p>Query all the activities that match a specific format of an NLS message.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1019" headers="d199619e833 "><code class="codeph">nls_message</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1019 d199619e835 ">
                                       <p>The entire NLS message that was written to the cluster resource activity log, for example, <samp class="msgph">Resource 'ora.cvu' has been modified</samp>.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1019 d199619e837 ">
                                       <p>Query all the activities that match a specific NLS message.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1032" headers="d199619e833 "><code class="codeph">actid</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1032 d199619e835 ">
                                       <p>The unique activity ID of every cluster activity log.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1032 d199619e837 ">
                                       <p>Query all the activities that match a specific ID.</p>
                                       <p>Also, specify only partial <code class="codeph">actid</code> and list all activities where the <code class="codeph">actid</code> is a subset of the activity ID.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1050" headers="d199619e833 "><code class="codeph">is_planned</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1050 d199619e835 ">
                                       <p>Confirms if the activity is planned or not.</p>
                                       <p>For example, if a user issues the command <code class="codeph">crsctl stop crs</code> on a node, then the stack stops and resources bounce.
                                       </p>
                                       <p>Running the <code class="codeph">crsctl stop crs</code> command generates activities and logged in the <code class="codeph">calog</code>. Since this is a planned action, the <code class="codeph">is_planned</code> field is set to true (1).
                                       </p>
                                       <p>Otherwise, the <code class="codeph">is_planned</code> field is set to false (0).
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1050 d199619e837 ">
                                       <p>Query all the planned or unplanned activities.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1081" headers="d199619e833 "><code class="codeph">onbehalfof_user</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1081 d199619e835 ">
                                       <p>The name of the user on behalf of whom the cluster activity log is written.</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1081 d199619e837 ">
                                       <p>Query all the activities written on behalf of a specific user.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1091" headers="d199619e833 "><code class="codeph">entity_isoraentity</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1091 d199619e835 ">
                                       <p>Confirms if the entity for which the calog activities are being logged is an oracle entity or not.</p>
                                       <p>If a resource, such as <code class="codeph">ora.***</code>, is started or stopped, for example, then all those activities are logged in the cluster resource activity log.
                                       </p>
                                       <p> Since <code class="codeph">ora.***</code> is an Oracle entity, the <code class="codeph">entity_isoraentity</code> field is set to true (1).
                                       </p>
                                       <p>Otherwise the <code class="codeph">entity_isoraentity</code> field is set to false (0).
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1091 d199619e837 ">
                                       <p>Query all the activities logged by Oracle or non-Oracle entities.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1119" headers="d199619e833 "><code class="codeph">entity_type</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1119 d199619e835 ">
                                       <p>The type of the entity, such as <span class="italic">server</span>, for which the cluster activity log is written.
                                       </p> 
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1119 d199619e837 ">
                                       <p>Query all the activities that match a specific entity.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1133" headers="d199619e833 "><code class="codeph">entity_name</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1133 d199619e835 ">
                                       <p>The name of the entity, for example, <span class="variable" translate="no">foo</span> for which the cluster activity log is written.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1133 d199619e837 ">
                                       <p>Query all the cluster activities that match a specific entity name.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1146" headers="d199619e833 "><code class="codeph">entity_hostname</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1146 d199619e835 ">
                                       <p>The name of the host, for example, <code class="codeph">node1</code>, associated with the entity for which the cluster activity log is written.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1146 d199619e837 ">
                                       <p>Query all the cluster activities that match a specific host name.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d199619e1160" headers="d199619e833 "><code class="codeph">entity_clustername</code></td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1160 d199619e835 ">
                                       <p>The name of the cluster, for example, <span class="variable" translate="no">cluster1</span> associated with the entity for which the cluster activity log is written.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d199619e1160 d199619e837 ">
                                       <p>Query all the cluster activities that match a specific cluster name.</p>.
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-D8D0C7D3-859B-48AC-B9DA-C21897AC74A2">Usage Notes</p>
                        <p>Combine simple filters into expressions called expression filters using Boolean operators.</p>
                        <p>Enclose timestamps and time intervals in double quotation marks ("").</p>
                        <p>Enclose the filter expressions in double quotation marks ("").</p>
                        <p>Enclose the values that contain parentheses or spaces in single quotation marks ('').</p>
                        <div class="p">If no matching records are found, then the Oracle Clusterware Control (CRSCTL) utility displays the following message:<pre class="oac_no_warn" dir="ltr">CRS-40002: No activities match the query.</pre></div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-257FAEAB-3AD6-4255-98CA-6416787E948F__GUID-1A6A12DD-7827-480A-A716-2616AEF9E872">Examples</p>
                        <p>Examples of filters include:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">"writer_user==root"</code>: Limits the display to only root user.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">"customer_data=='GEN_RESTART@SERVERNAME(rwsbi08)=StartCompleted~'"</code> : Limits the display to <code class="codeph">customer_data</code> that has the specified value <code class="codeph">GEN_RESTART@SERVERNAME(node1)=StartCompleted~</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="p">To query all the resource activities and display the output in full format:<pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -fullfmt</span>

----ACTIVITY START----
timestamp               : 2016-09-27 17:55:43.152000
writer_process_id       : 6538
writer_process_name     : crsd.bin
writer_user             : root
writer_group            : root
writer_hostname         : node1
writer_clustername      : cluster1-mb1
customer_data           : CHECK_RESULTS=-408040060~
nls_product             : CRS
nls_facility            : CRS
nls_id                  : 2938
nls_field_count         : 1
nls_field1              : ora.cvu
nls_field1_type         : 25
nls_field1_len          : 0
nls_format              : Resource '%s' has been modified.
nls_message             : Resource 'ora.cvu' has been modified.
actid                   : 14732093665106538/1816699/1
is_planned              : 1
onbehalfof_user         : grid
onbehalfof_hostname     : node1
entity_isoraentity      : 1
entity_type             : resource
entity_name             : ora.cvu
entity_hostname         : node1
entity_clustername      : cluster1-mb1
----ACTIVITY END----</code></pre></div>
                        <div class="p">To query all the resource activities and display the output in XML format:<pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -xmlfmt</span>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;activities&gt;
  &lt;activity&gt;
    &lt;timestamp&gt;2016-09-27 17:55:43.152000&lt;/timestamp&gt;
    &lt;writer_process_id&gt;6538&lt;/writer_process_id&gt;
    &lt;writer_process_name&gt;crsd.bin&lt;/writer_process_name&gt;
    &lt;writer_user&gt;root&lt;/writer_user&gt;
    &lt;writer_group&gt;root&lt;/writer_group&gt;
    &lt;writer_hostname&gt;node1&lt;/writer_hostname&gt;
    &lt;writer_clustername&gt;cluster1-mb1&lt;/writer_clustername&gt;
    &lt;customer_data&gt;CHECK_RESULTS=-408040060~&lt;/customer_data&gt;
    &lt;nls_product&gt;CRS&lt;/nls_product&gt;
    &lt;nls_facility&gt;CRS&lt;/nls_facility&gt;
    &lt;nls_id&gt;2938&lt;/nls_id&gt;
    &lt;nls_field_count&gt;1&lt;/nls_field_count&gt;
    &lt;nls_field1&gt;ora.cvu&lt;/nls_field1&gt;
    &lt;nls_field1_type&gt;25&lt;/nls_field1_type&gt;
    &lt;nls_field1_len&gt;0&lt;/nls_field1_len&gt;
    &lt;nls_format&gt;Resource '%s' has been modified.&lt;/nls_format&gt;
    &lt;nls_message&gt;Resource 'ora.cvu' has been modified.&lt;/nls_message&gt;
    &lt;actid&gt;14732093665106538/1816699/1&lt;/actid&gt;
    &lt;is_planned&gt;1&lt;/is_planned&gt;
    &lt;onbehalfof_user&gt;grid&lt;/onbehalfof_user&gt;
    &lt;onbehalfof_hostname&gt;node1&lt;/onbehalfof_hostname&gt;
    &lt;entity_isoraentity&gt;1&lt;/entity_isoraentity&gt;
    &lt;entity_type&gt;resource&lt;/entity_type&gt;
    &lt;entity_name&gt;ora.cvu&lt;/entity_name&gt;
    &lt;entity_hostname&gt;node1&lt;/entity_hostname&gt;
    &lt;entity_clustername&gt;cluster1-mb1&lt;/entity_clustername&gt;
  &lt;/activity&gt;
&lt;/activities&gt;</code></pre></div>
                        <div class="p">To query resource activities for a two-hour interval after a specific time and display the output in XML format:<pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -aftertime "2016-09-28 17:55:43" -duration "0 02:00:00" -xmlfmt</span>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;activities&gt;
  &lt;activity&gt;
    &lt;timestamp&gt;2016-09-28 17:55:45.992000&lt;/timestamp&gt;
    &lt;writer_process_id&gt;6538&lt;/writer_process_id&gt;
    &lt;writer_process_name&gt;crsd.bin&lt;/writer_process_name&gt;
    &lt;writer_user&gt;root&lt;/writer_user&gt;
    &lt;writer_group&gt;root&lt;/writer_group&gt;
    &lt;writer_hostname&gt;node1&lt;/writer_hostname&gt;
    &lt;writer_clustername&gt;cluster1-mb1&lt;/writer_clustername&gt;
    &lt;customer_data&gt;CHECK_RESULTS=1718139884~&lt;/customer_data&gt;
    &lt;nls_product&gt;CRS&lt;/nls_product&gt;
    &lt;nls_facility&gt;CRS&lt;/nls_facility&gt;
    &lt;nls_id&gt;2938&lt;/nls_id&gt;
    &lt;nls_field_count&gt;1&lt;/nls_field_count&gt;
    &lt;nls_field1&gt;ora.cvu&lt;/nls_field1&gt;
    &lt;nls_field1_type&gt;25&lt;/nls_field1_type&gt;
    &lt;nls_field1_len&gt;0&lt;/nls_field1_len&gt;
    &lt;nls_format&gt;Resource '%s' has been modified.&lt;/nls_format&gt;
    &lt;nls_message&gt;Resource 'ora.cvu' has been modified.&lt;/nls_message&gt;
    &lt;actid&gt;14732093665106538/1942009/1&lt;/actid&gt;
    &lt;is_planned&gt;1&lt;/is_planned&gt;
    &lt;onbehalfof_user&gt;grid&lt;/onbehalfof_user&gt;
    &lt;onbehalfof_hostname&gt;node1&lt;/onbehalfof_hostname&gt;
    &lt;entity_isoraentity&gt;1&lt;/entity_isoraentity&gt;
    &lt;entity_type&gt;resource&lt;/entity_type&gt;
    &lt;entity_name&gt;ora.cvu&lt;/entity_name&gt;
    &lt;entity_hostname&gt;node1&lt;/entity_hostname&gt;
    &lt;entity_clustername&gt;cluster1-mb1&lt;/entity_clustername&gt;
  &lt;/activity&gt;
&lt;/activities&gt;</code></pre></div>
                        <div class="p">To query resource activities at a specific time:<pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -filter "timestamp=='2016-09-28 17:55:45.992000'"</span>

2016-09-28 17:55:45.992000 : Resource 'ora.cvu' has been modified. : 14732093665106538/1942009/1 :</code></pre></div>
                        <p>To query resource activities using filters <code class="codeph">writer_user</code> and <code class="codeph">customer_data</code>:
                        </p>
                        <div class="p"><pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -filter "writer_user==root AND customer_data==
  'GEN_RESTART@SERVERNAME(node1)=StartCompleted~'" -fullfmt</span></code></pre></div>
                        <p><span class="italic">or</span></p>
                        <div class="p"><pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -filter "(writer_user==root) AND (customer_data==
  'GEN_RESTART@SERVERNAME(node1)=StartCompleted~')" -fullfmt</span></code></pre></div>
                        <div class="p"><pre class="pre codeblock"><code>----ACTIVITY START----
timestamp               : 2016-09-15 17:42:57.517000
writer_process_id       : 6538
writer_process_name     : crsd.bin
writer_user             : root
writer_group            : root
writer_hostname         : node1
writer_clustername      : cluster1-mb1
customer_data           : GEN_RESTART@SERVERNAME(rwsbi08)=StartCompleted~
nls_product             : CRS
nls_facility            : CRS
nls_id                  : 2938
nls_field_count         : 1
nls_field1              : ora.testdb.db
nls_field1_type         : 25
nls_field1_len          : 0
nls_format              : Resource '%s' has been modified.
nls_message             : Resource 'ora.devdb.db' has been modified.
actid                   : 14732093665106538/659678/1
is_planned              : 1
onbehalfof_user         : oracle
onbehalfof_hostname     : node1
entity_isoraentity      : 1
entity_type             : resource
entity_name             : ora.testdb.db
entity_hostname         : node1
entity_clustername      : cluster1-mb1
----ACTIVITY END----</code></pre></div>
                        <div class="p">To query all the calogs that were generated after UTC+08:00 time "2016-11-15 22:53:08":<pre class="pre codeblock"><code>$ crsctl query calog -aftertime "2016-11-15 22:53:08+08:00"</code></pre></div>
                        <div class="p">To query all the calogs that were generated after UTC-08:00 time "2016-11-15 22:53:08":<pre class="pre codeblock"><code>$ crsctl query calog -aftertime "2016-11-15 22:53:08-08:00"</code></pre></div>
                        <div class="p">To query all the calogs by specifying the timestamp with microseconds:<pre class="pre codeblock"><code><span class="bold">$ crsctl query calog -aftertime "2016-11-16 01:07:53.063000"</span>

2016-11-16 01:07:53.558000 : Resource 'ora.cvu' has been modified. : 14792791129816600/2580/7 :
2016-11-16 01:07:53.562000 : Clean of 'ora.cvu' on 'rwsam02' succeeded : 14792791129816600/2580/8 :</code></pre></div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634" name="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634"></a><h4 id="CWADD-GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634" class="sect4">crsctl get calog maxsize</h4>
                  <div>
                     <p>To store Oracle Clusterware-managed resource activity information, query the maximum space allotted to the cluster resource activity log.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634__GUID-84276244-DEF1-4D3B-9F55-BB87D201828A">Syntax</p><pre class="pre codeblock"><code>crsctl get calog maxsize</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634__GUID-05A3462E-E66B-4F1A-8692-A6E0FD09302E">Parameters</p>
                        <p>The <code class="codeph">crsctl get calog maxsize</code> command has no parameters.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C9ED565B-6A2F-45FE-9E99-DF3761080634__GUID-D341C513-599D-48BC-BBEF-CD3B2CD78365">Example</p>
                        <p>The following example returns the maximum space allotted to the cluster resource activity log to store activities:</p><pre class="pre codeblock"><code><span class="bold">$ crsctl get calog maxsize</span>

CRS-6760: The maximum size of the Oracle cluster activity log is 1024 MB.</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-26CC9484-F06F-41DD-8796-19BD450171D7" name="GUID-26CC9484-F06F-41DD-8796-19BD450171D7"></a><h4 id="CWADD-GUID-26CC9484-F06F-41DD-8796-19BD450171D7" class="sect4">crsctl get calog retentiontime</h4>
                  <div>
                     <p>Query the retention time of the cluster resource activity log.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-26CC9484-F06F-41DD-8796-19BD450171D7__GUID-4252DB18-2B26-4BA1-85A6-102D6169F6C8">Syntax</p><pre class="pre codeblock"><code>crsctl get calog retentiontime</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-26CC9484-F06F-41DD-8796-19BD450171D7__GUID-13653CE8-61A9-499E-A58D-08BF1751839D">Parameters</p>
                        <p>The <code class="codeph">crsctl get calog retentiontime</code> command has no parameters.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-26CC9484-F06F-41DD-8796-19BD450171D7__GUID-DC7EC2EF-872A-45D4-9D92-07B2C0DD34FE">Examples</p>
                        <p>The following example returns the retention time of the cluster activity log, in number of hours:</p><pre class="pre codeblock"><code><span class="bold">$ crsctl get calog retentiontime</span>

CRS-6781: The retention time of the cluster activity log is 73 hours.</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E" name="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E"></a><h4 id="CWADD-GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E" class="sect4">crsctl set calog maxsize</h4>
                  <div>
                     <p>Configure the maximum amount of space allotted to store Oracle Clusterware-managed resource activity information.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E__GUID-80888B9B-549B-48A5-AA12-549F25FB41B9">Syntax</p><pre class="pre codeblock"><code>crsctl set calog maxsize <span class="variable" translate="no">maximum_size</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E__GUID-C0ADB4BE-0988-4443-8C40-E029E12AFB0F">Usage Notes</p>
                        <div class="p">Specify a value, in MB, for the maximum size of the storage space that you want to allot to the cluster resource activity log.
                           <div class="infoboxnote" id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E__GUID-F787C617-3896-4C48-9E21-6EF79DD76D4E">
                              <p class="notep1">Note:</p>If you reduce the amount of storage space, then the contents of the storage are lost.
                           </div>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1C1DBC6D-422C-4025-907A-1247D7940C1E__GUID-BAD37F8E-4EDC-4C17-8D19-6C745C069B26">Example</p>
                        <p>The following example sets maximum amount of space, to store Oracle Clusterware-managed resource activity information, to 1024 MB:</p><pre class="pre codeblock"><code>$ crsctl set calog maxsize 1024</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B" name="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B"></a><h4 id="CWADD-GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B" class="sect4">crsctl set calog retentiontime</h4>
                  <div>
                     <p>Configure the retention time of the cluster resource activity log.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B__GUID-262646F1-3766-4965-8064-D4A6EEB2645D">Syntax</p><pre class="pre codeblock"><code>crsctl set calog retentiontime <span class="variable" translate="no">hours</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B__GUID-B558CCBC-1CBD-4AC3-939D-8FAF0B29C44F">Parameters</p>
                        <p>The <code class="codeph">crsctl set calog retentiontime</code> command takes a number of hours as a parameter.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B__GUID-5C396E67-8E77-428C-B9DC-E3FA0C493A0B">Usage Notes</p>
                        <p>Specify a value, in hours, for the retention time of the cluster resource activity log.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E0CD0CF0-FCB0-479A-860D-67346238D06B__GUID-28B75581-88B3-458C-A491-530C4431E014">Examples</p>
                        <p>The following example sets the retention time of the cluster resource activity log to 72 hours:</p><pre class="pre codeblock"><code>$ crsctl set calog retentiontime 72</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CWADD91091"></a><div class="sect2"><a id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C" name="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C"></a><h3 id="CWADD-GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C" class="sect3">Oracle Clusterware Diagnostic and Alert Log Data</h3>
               <div>
                  <p>Review this content to understand clusterware-specific aspects of how Oracle Clusterware uses ADR.</p>
                  <p>Oracle Clusterware uses Oracle Database fault diagnosability infrastructure to manage diagnostic data and its alert log. As a result, most diagnostic data resides in the Automatic Diagnostic Repository (ADR), a collection of directories and files located under a base directory that you specify during installation. </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-67428E93-3592-4368-9240-EBFF06E099B6">ADR Directory Structure</p>
                  </div>
                  <!-- class="section" -->
                  <p>Oracle Clusterware ADR data is written under a root directory known as the ADR base. Because components other than ADR use this directory, it may also be referred to as the Oracle base. You specify the file system path to use as the base during Oracle Grid Infrastructure installation and can only be changed if you reinstall the Oracle Grid Infrastructure.</p>
                  <p>ADR files reside in an ADR home directory. The ADR home for Oracle Clusterware running on a given host always has this structure:</p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_BASE</span>/diag/crs/<span class="italic">host_name</span>/crs
</pre><p>In the preceding example, <span class="italic"><code class="codeph">ORACLE_BASE</code></span> is the Oracle base path you specified when you installed the Oracle Grid Infrastructure and <span class="italic"><code class="codeph">host_name</code></span> is the name of the host. On a Windows platform, this path uses backslashes (<code class="codeph">\</code>) to separate directory names.
                  </p>
                  <p>Under the ADR home are various directories for specific types of ADR data. The directories of greatest interest are <code class="codeph">incident</code>. The <code class="codeph">trace</code> directory contains all normal (non-incident) trace files written by Oracle Clusterware daemons and command-line programs as well as the simple text version of the Oracle Clusterware alert log. This organization differs significantly from versions prior to Oracle Clusterware 12<span class="italic">c</span> release 1 (12.1.0.2), where diagnostic log files were written under distinct directories per daemon.
                  </p>
                  <p>To change the log level, edit the <code class="codeph"><span class="variable" translate="no">ORACLE_BASE</span>/crsdata/<span class="variable" translate="no">host_name</span>/crsdiag/ocrcheck.ini</code> file.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-54C1A8E6-4380-4311-987B-BD5D31D3B93F">Files in the Trace Directory</p>
                     <p>Starting with Oracle Clusterware 12<span class="italic">c</span> release 1 (12.1.0.2), diagnostic data files written by Oracle Clusterware programs are known as <span class="italic">trace files</span> and have a <code class="codeph">.trc</code> file extension, and appear together in the <a id="d199619e2076" class="indexterm-anchor"></a><code class="codeph">trace</code> subdirectory of the ADR home. The naming convention for these files generally uses the executable program name as the file name, possibly augmented with other data depending on the type of program.
                     </p>
                     <p>Trace files written by Oracle Clusterware command-line programs incorporate the Operating System process ID (PID) in the trace file name to distinguish data from multiple invocations of the same command program. For example, trace data written by CRSCTL uses this name structure: <code class="codeph">crsctl_</code><span class="italic"><code class="codeph">PID</code></span><code class="codeph">.trc</code>. In this example, <span class="italic"><code class="codeph">PID</code></span> is the operating system process ID displayed as decimal digits.
                     </p>
                     <p>Trace files written by Oracle Clusterware daemon programs do not include a PID in the file name, and they also are subject to a file rotation mechanism that affects naming. Rotation means that when the current daemon trace file reaches a certain size, the file is closed, renamed, and a new trace file is opened. This occurs a fixed number of times, and then the oldest trace file from the daemon is discarded, keeping the rotation set at a fixed size.</p>
                     <p>Most Oracle Clusterware daemons use a file size limit of 10 MB and a rotation set size of 10 files, thus maintaining a total of 100 MB of trace data. The current trace file for a given daemon simply uses the program name as the file name; older files in the rotation append a number to the file name. For example, the trace file currently being written by the Oracle High Availability Services daemon (OHASD) is named <code class="codeph">ohasd.trc</code>; the most recently rotated-out trace file is named <code class="codeph">ohasd_</code><span class="italic"><code class="codeph">n</code></span><code class="codeph">.trc</code>, where <span class="italic"><code class="codeph">n</code></span> is an ever-increasing decimal integer. The file with the highest <span class="italic"><code class="codeph">n</code></span> is actually the most recently archived trace, and the file with the lowest <span class="italic"><code class="codeph">n</code></span> is the oldest.
                     </p>
                     <p>Oracle Clusterware agents are daemon programs whose trace files are subject to special naming conventions that indicate the origin of the agent (whether it was spawned by the OHASD or the Cluster Ready Services daemon (CRSD)) and the Operating System user name with which the agent runs. Thus, the name structure for agents is:</p><pre class="oac_no_warn" dir="ltr"><span class="italic">origin_executable_user_name</span></pre><div class="infoboxnote" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-E0BC2361-A5A5-4718-A9EC-43A2088F9262">
                        <p class="notep1">Note:</p>
                        <p>The first two underscores (_) in the name structure are literal and are included in the trace file name. The underscore in <span class="italic"><code class="codeph">user_name</code></span> is not part of the file naming convention.
                        </p>
                     </div>
                     <p>In the previous example, <span class="italic"><code class="codeph">origin</code></span> is either <code class="codeph">ohasd</code> or <code class="codeph">crsd</code>, <span class="italic"><code class="codeph">executable</code></span> is the executable program name, and <span class="italic"><code class="codeph">user_name</code></span> is the operating system user name. In addition, because they are daemons, agent trace files are subject to the rotation mechanism previously described, so files with an additional <span class="italic"><code class="codeph">_n</code></span> suffix are present after rotation occurs.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-6107731A-7797-4403-B671-2FD1EEA1B853">The Oracle Clusterware Alert Log</p>
                     <p>Besides trace files, the <code class="codeph">trace</code> subdirectory in the Oracle Clusterware ADR home contains the simple text Oracle Clusterware alert log. It always has the name <code class="codeph">alert.log</code>. The alert log is also written as an XML file in the <code class="codeph">alert</code> subdirectory of the ADR home, but the text alert log is most easily read.
                     </p>
                     <p>The alert log is the first place to look when a problem or issue arises with Oracle Clusterware. Unlike the Oracle Database instance alert log, messages in the Oracle Clusterware alert log are identified, documented, and localized (translated). Oracle Clusterware alert messages are written for most significant events or errors that occur.</p>
                     <div class="infoboxnote" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-21BCA4C7-3C62-4D20-97D1-C770CC6D74DD">
                        <p class="notep1">Note:</p>
                        <p>Messages and data written to Oracle Clusterware trace files generally are not documented and translated and are used mainly by My Oracle Support for problem diagnosis.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-40B53C6B-6395-43CB-B771-8228C9FDB045">Incident Trace Files</p>
                     <p>Certain errors occur in Oracle Clusterware programs that will raise an ADR incident. In most cases, these errors should be reported to My Oracle Support for diagnosis. The occurrence of an incident normally produces one or more descriptive messages in the Oracle Clusterware alert log.</p>
                     <p>In addition to alert messages, incidents also cause the affected program to produce a special, separate <a id="d199619e2188" class="indexterm-anchor"></a>trace file containing diagnostic data related to the error. These incident-specific trace files are collected in the <a id="d199619e2191" class="indexterm-anchor"></a><code class="codeph">incident</code> subdirectory of the ADR home rather than the <code class="codeph">trace</code> subdirectory. Both the normal trace files and incident trace files are collected and submitted to Oracle when reporting the error.
                     </p>
                     <div class="infoboxnotealso" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-F0DDF8AE-938F-4146-8BD4-B73500F8FC4E">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/diagnosing-and-resolving-problems.html#ADMIN11007" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information on incidents and data collection
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-75A99456-75D1-4BC8-B0D8-9F353EB51B7C__GUID-F7F6FF42-134B-47CA-9098-96064F33746C">Other Diagnostic Data</p>
                     <p>Besides ADR data, Oracle Clusterware collects or uses other data related to problem diagnosis. Starting with Oracle Clusterware 12<span class="italic">c</span> release 1 (12.1.0.2), this data resides under the same base path used by ADR, but in a separate directory structure with this form: <span class="italic"><code class="codeph">ORACLE_BASE</code></span><code class="codeph">/crsdata/</code><span class="italic"><code class="codeph">host_name</code></span>. In this example, <span class="italic"><code class="codeph">ORACLE_BASE</code></span> is the Oracle base path you specified when you installed the Grid Infrastructure and <span class="italic"><code class="codeph">host_name</code></span> is the name of the host.
                     </p>
                     <p>In this directory, on a given host, are several subdirectories. The two subdirectories of greatest interest if a problem occurs are named <a id="d199619e2236" class="indexterm-anchor"></a><code class="codeph">core</code> and <a id="d199619e2243" class="indexterm-anchor"></a><code class="codeph">output</code>. The <code class="codeph">core</code> directory is where Oracle Clusterware daemon core files are written when the normal ADR location used for core files is not available (for example, before ADR services are initialized in a program). The <code class="codeph">output</code> directory is where Oracle Clusterware daemons redirect their C standard output and standard error files. These files generally use a name structure consisting of the executable name with the characters <span class="italic">OUT</span> appended to a <code class="codeph">.trc</code> file extension (like trace files). For example, the redirected standard output from the Cluster Time Synchronization Service daemon is named <code class="codeph">octssdOUT.trc</code>. Typically, daemons write very little to these files, but in certain failure scenarios important data may be written there.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../admin/diagnosing-and-resolving-problems.html#ADMIN11257" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a></li>
                        <li><a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span class="italic">Oracle Database Utilities</span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="CWADD92990"></a><a id="CWADD92991"></a><a id="CWADD92992"></a><a id="CWADD92989"></a><div class="sect2"><a id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537" name="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537"></a><h3 id="CWADD-GUID-50FAE797-1174-49DD-9FAB-A23E6A208537" class="sect3">Diagnostics Collection Script</h3>
               <div>
                  <p>When an Oracle Clusterware error occurs, run the <a id="d199619e2398" class="indexterm-anchor"></a><a id="d199619e2400" class="indexterm-anchor"></a><code class="codeph">diagcollection.pl</code> diagnostics collection script to collect diagnostic information from Oracle Clusterware into trace files. The diagnostics provide additional information so My Oracle Support can resolve problems. Run this script as <code class="codeph">root</code> from the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/bin</code> directory.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__GUID-2C0F1195-BEF7-4ADE-8CF2-398F218B44C7">Syntax</p>
                  </div>
                  <!-- class="section" -->
                  <p>Use the diagcollection.pl script with the following syntax:</p><pre class="oac_no_warn" dir="ltr">diagcollection.pl {--collect [--crs | --acfs | -all] [--chmos [--incidenttime <span class="italic">time</span> [--incidentduration <span class="italic">time</span>]]]
   [--adr <span class="italic">location</span> [--aftertime <span class="italic">time</span> [--beforetime <span class="italic">time</span>]]]
   [--crshome <span class="italic">path</span> | --clean | --coreanalyze}]</pre><div class="infoboxnote" id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__GUID-6C7BEBD2-583F-427A-B320-6B036317D2CA">
                     <p class="notep1">Note:</p>
                     <p>The <code class="codeph">diagcollection.pl</code> script arguments are all preceded by two dashes (<code class="codeph">--</code>).
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__GUID-86253E80-5DB1-46CC-A7E2-0FFBB63702F5">Parameters</p>
                  </div>
                  <!-- class="section" -->
                  <p><a href="troubleshooting-oracle-clusterware.html#GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__CHDHFHDH" title="This table lists and describes parameters used with the diagcollection.pl script.">Table K-3</a> lists and describes the parameters used with the <code class="codeph">diagcollection.pl</code> script.
                  </p>
                  <div class="tblformal" id="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537__CHDHFHDH">
                     <p class="titleintable">Table K-3 diagcollection.pl Script Parameters</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="diagcollection.pl Script Parameters" summary="This table lists and describes parameters used with the diagcollection.pl script." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d199619e2471">Parameter</th>
                              <th align="left" valign="bottom" width="69%" id="d199619e2474">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d199619e2479" headers="d199619e2471 "><pre class="oac_no_warn" dir="ltr">--collect</pre></td>
                              <td align="left" valign="top" width="69%" headers="d199619e2479 d199619e2474 ">
                                 <p>Use this parameter with any of the following arguments:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">--crs</code>: Use this argument to collect Oracle Clusterware diagnostic information
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--acfs</code>: Use this argument to collect Oracle ACFS diagnostic information
                                       </p>
                                       <p><span class="bold">Note:</span> You can only use this argument on UNIX systems.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--all</code>: Use this argument to collect all diagnostic information except CHM (OS) data
                                       </p>
                                       <p><span class="bold">Note:</span> This is the default.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--chmos</code>: Use this argument to collect the following CHM diagnostic information
                                       </p>
                                       <p><code class="codeph">--incidenttime </code><span class="italic"><code class="codeph">time</code></span>: Use this argument to collect CHM (OS) data from the specified time
                                       </p>
                                       <p><span class="bold">Note:</span> The time format is MM/DD/YYYYHH24:MM:SS.
                                       </p>
                                       <p><code class="codeph">--incidentduration </code><span class="italic"><code class="codeph">time</code></span>: Use this argument with <code class="codeph">--incidenttime</code> to collect CHM (OS) data for the duration after the specified time
                                       </p>
                                       <p><span class="bold">Note:</span> The time format is HH:MM. If you do not use <code class="codeph">--incidentduration</code>, then all CHM (OS) data after the time you specify in <code class="codeph">--incidenttime</code> is collected.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--adr </code><span class="italic"><code class="codeph">location</code></span>: The Automatic Diagnostic Repository Command Interpreter (ADRCI) uses this argument to specify a location in which to collect diagnostic information for ADR
                                       </p>
                                       <p><span class="bold">See Also:</span> <a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span class="italic">Oracle Database Utilities</span></a> for more information about ADRCI
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--aftertime </code><span class="italic"><code class="codeph">time</code></span>: Use this argument with the <code class="codeph">--adr</code> argument to collect archives after the specified time
                                       </p>
                                       <p><span class="bold">Note:</span> The time format is YYYYMMDDHHMISS24.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--beforetime </code><span class="italic"><code class="codeph">time</code></span>: Use this argument with the <code class="codeph">--adr</code> argument to collect archives before the specified time
                                       </p>
                                       <p><span class="bold">Note:</span> The time format is YYYYMMDDHHMISS24.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">--crshome </code><span class="italic"><code class="codeph">path</code></span>: Use this argument to override the location of the Oracle Clusterware home
                                       </p>
                                       <p><span class="bold">Note:</span> The <code class="codeph">diagcollection.pl</code> script typically derives the location of the Oracle Clusterware home from the system configuration (either the <code class="codeph">olr.loc</code> file or the Windows registry), so this argument is not required.
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d199619e2611" headers="d199619e2471 "><pre class="oac_no_warn" dir="ltr">--clean</pre></td>
                              <td align="left" valign="top" width="69%" headers="d199619e2611 d199619e2474 ">
                                 <p>Use this parameter to clean up the diagnostic information gathered by the <code class="codeph">diagcollection.pl</code> script.
                                 </p>
                                 <p><span class="bold">Note:</span> You cannot use this parameter with <code class="codeph">--collect</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d199619e2628" headers="d199619e2471 "><pre class="oac_no_warn" dir="ltr">--coreanalyze</pre></td>
                              <td align="left" valign="top" width="69%" headers="d199619e2628 d199619e2474 ">
                                 <p>Use this parameter to extract information from core files and store it in a text file.</p>
                                 <p><span class="bold">Note:</span> You can only use this parameter on UNIX systems.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-604188B0-3984-4192-A33E-048145B42E36" name="GUID-604188B0-3984-4192-A33E-048145B42E36"></a><h3 id="CWADD-GUID-604188B0-3984-4192-A33E-048145B42E36" class="sect3">Storage Split in Oracle Extended Clusters</h3>
               <div>
                  <p>A storage split occurs when the private network between two or more disparate sites is available and online, but the storage network has failed.</p>
                  <p>When Oracle Automatic Storage Management (Oracle ASM) detects a storage split in a typical extended cluster configuration with three sites (two data sites and a quorum site), one of the data sites terminates and quarantines itself and the nodes it contains from the rest of the cluster. If Oracle ASM attempts to start on the quarantined site, then error CRS-2971 occurs.</p>
                  <p>Resolve the issue, as follows:</p>
                  <ol id="GUID-604188B0-3984-4192-A33E-048145B42E36__OL_WRJ_DBZ_1GB">
                     <li>Resolve the inter-site connectivity issue that resulted in the storage split.</li>
                     <li>Ensure that all Oracle ASM disk groups are mounted on the site that is not quarantined, as follows:<pre class="pre codeblock"><code>SELECT group_number, name, state FROM v$asm_diskgroup_stat;</code></pre></li>
                     <li>Obtain a list of online disks belonging to these disk groups by running the following command for each disk group:<pre class="pre codeblock"><code>SELECT path FROM v$asm_disk_stat WHERE group_number=<span class="variable" translate="no">group_number</span> AND state = 'NORMAL' AND mode_status = 'ONLINE';
</code></pre></li>
                     <li>For each of the paths from you obtained in the previous step, ensure that the disk is accessible from the quarantined site, as follows:<pre class="pre codeblock"><code>asmcmd lsdsk -I --member '<span class="variable" translate="no">path</span>'</code></pre></li>
                     <li>If the preceding verification succeeds, then rejuvenate the quarantined site, as follows:<pre class="pre codeblock"><code>crsctl modify cluster site <span class="variable" translate="no">site_name</span> -s rejuvenate</code></pre></li>
                  </ol>
               </div>
            </div><a id="CWADD92959"></a><div class="sect2"><a id="GUID-545CEDAE-8A83-405B-86C1-2410DD6DDDBB" name="GUID-545CEDAE-8A83-405B-86C1-2410DD6DDDBB"></a><h3 id="CWADD-GUID-545CEDAE-8A83-405B-86C1-2410DD6DDDBB" class="sect3">Rolling Upgrade and Driver Installation Issues</h3>
               <div>
                  <p>During an upgrade, while running the Oracle Clusterware <code class="codeph">root.sh</code> script, you may see the following messages:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>ACFS-9427 Failed to unload ADVM/ACFS drivers. A system restart is recommended.</p>
                     </li>
                     <li>
                        <p>ACFS-9428 Failed to load ADVM/ACFS drivers. A system restart is recommended.</p>
                     </li>
                  </ul>
                  <p>If you see these error messages during the upgrade of the initial (first) node, then do the following:</p>
                  <ol>
                     <li>
                        <p>Complete the upgrade of all other nodes in the cluster.</p>
                     </li>
                     <li>
                        <p>Restart the initial node.</p>
                     </li>
                     <li>
                        <p>Run the <code class="codeph">root.sh</code> script on initial node again.
                        </p>
                     </li>
                     <li>
                        <p>Run the <code class="codeph"><span class="variable" translate="no">Grid_home</span>/gridSetup -executeConfigTools</code> script as the user that installed Oracle Grid Infrastructure to complete the upgrade.
                        </p>
                     </li>
                  </ol>
                  <p>For nodes other than the initial node (the node on which you started the installation):</p>
                  <ol>
                     <li>
                        <p>Restart the node where the error occurs.</p>
                     </li>
                     <li>
                        <p>Run the <code class="codeph">orainstRoot.sh</code> script as <code class="codeph">root</code> on the node where the error occurs.
                        </p>
                     </li>
                     <li>
                        <p>Change directory to the Grid home, and run the <code class="codeph">root.sh</code> script on the node where the error occurs.
                        </p>
                     </li>
                  </ol>
               </div>
            </div><a id="CWADD92399"></a><div class="sect2"><a id="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B" name="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B"></a><h3 id="CWADD-GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B" class="sect3">Testing Zone Delegation</h3>
               <div>
                  <div class="infoboxnotealso" id="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B__GUID-A2C7F93F-C129-412D-A910-3E0122D04682">
                     <p class="notep1">See Also:</p>
                     <p><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL is an interface between you and Oracle Clusterware, parsing and calling Oracle Clusterware APIs for Oracle Clusterware objects.Information about using the CRSCTL command-line interface.Use these commands in either the Oracle RAC or the Oracle Restart environments.Checks the status of Cluster Synchronization Services.Checks the status of the Event Manager.Retrieves the host name of the local server.Registers a resource to be managed by Oracle Clusterware.Removes resources from the Oracle Clusterware configuration.Predicts the effects of adding a resource without making changes to the system.Predicts the consequences of a resource failing.Simulates relocating a resource without making changes to the system.Predicts the effects of modifying a resource without making changes to the system.Predicts the effects of starting a resource without making changes to the system.Predicts the effect of stopping a resource without making changes to the system.Displays the user and group permissions for the specified resource.Modifies the attributes of a particular resource in Oracle Clusterware.Relocates resources to another server in the cluster.Restarts idle resources in the cluster, instead of having to run two commands to stop and start the resource.Sets permissions for a particular resource.Starts idle resources on a particular server in the cluster.Obtains the status and configuration information of any number of particular resources.Stops running resources.Creates a resource group based on a resource group type.Initiates a check operation on all member resources of the specified groups.Deletes one or more resource groups from Oracle Clusterware.Predicts the effects of adding a resource group without making changes to the system.Predicts the consequences of a resource failing.Predicts the effect of relocating a resource group without making changes to the system.Predicts the effects of starting a resource group without making changes to the system.Predicts the effect of stopping a resource group without making changes to the system.Exports the complete information and attributes of a resource groups and its member resources to a script file.Modifies a resource group to add attributes or update the values of existing attributes.Relocates online resource groups from a source server to a target server.Restarts resource groups on the server where they currently reside.Starts one or more resource groups on specific or preconfigured servers or server pools.Displays the state of resource groups.Stops one or more resource groups on optionally specified preconfigured servers or server pools.Registers a new resource group type in Oracle Clusterware.Deletes one or more resource group types from Oracle Clusterware.Modifies a resource group type to add attributes or update the values of existing attributes.Returns the tracing settings for a specific module.Sets the tracing parameters for a specific module.Creates a resource type in Oracle Clusterware.Removes resource types from the Oracle Clusterware configuration.Obtains permissions for a particular resource type.Modifies an existing resource type.Sets permissions for resources of a particular resource type.Obtains the configuration information of one or more particular resource types.Creates and adds users to a wallet.Removes wallets or users from a wallet.Modifies the password for a specific user in a specific wallet.Queries low-privileged users from a wallet.You can use the following commands only in an Oracle RAC environment.Performs a specific action on specific resource.Adds a server category.Deletes a server category.Modifies an existing server category.Obtains information about a server category.Checks the status of the Oracle Clusterware stack from any node in the cluster.Starts the Oracle Clusterware stack when run on any node in the cluster.Stops the Oracle Clusterware stack on all servers in the cluster or specific servers when you run the command on any node in the cluster.Obtains cluster class information.Displays the cluster configuration information.Adds a cipher suite to or removes a cipher suite from a list of disabled cipher suites used to secure inter-node communication.Determines whether the cluster is an extended cluster.Obtains the value of Hub Nodes in an Oracle Flex Cluster.Sets the maximum number of Hub Nodes for an Oracle Flex Cluster.Ascertains whether the cluster is configured for Oracle Flex Clusters or obtains the current status.Changes a standard cluster to an Oracle Flex Cluster.Displays the current cluster name.Use the crsctl add cluster site command to add a site to an extended cluster.Use the crsctl delete cluster site command to delete a specific site from an extended cluster.Modifies the configuration of a site in an extended cluster.Displays site information in an extended cluster.Lists available cipher suites used by transport layer security for securing inter-node communication.Use the crsctl get cluster type command to determine whether the cluster is an Oracle Flex Cluster or an application cluster.Sets the type of the cluster.The crsctl get cpu equivalency command obtains the value of the CPU_EQUIVALENCY server configuration attribute.The crsctl set cpu equivalency command sets a value for the CPU_EQUIVALENCY server configuration attribute.Checks the status of Oracle High Availability Services and the Oracle Clusterware stack on the local server.Displays Oracle High Availability Services automatic startup configuration.Prevents the automatic startup of Oracle High Availability Services when the server boots.Enables automatic startup of Oracle High Availability Services when the server boots.Starts Oracle High Availability Services on the local server.Stops Oracle High Availability Services on the local server.Displays the active version and the configured patch level of the Oracle Clusterware software running in the cluster.Adds a user to the list of cluster administrators.Removes a user from the list of Oracle Clusterware administrators.Displays the list of users with Oracle Clusterware administrative privileges.Obtains the values of the Oracle Clusterware automatic resource start criteria.Sets the Oracle Clusterware automatic resource start criteria.Displays the patch level which is updated in the Grid home patch repository while patching a node.Displays the version of the Oracle Clusterware software stored in the binaries on the local node.Use the crsctl query crs site command to determine to which site a specific host or disk belongs.Displays the configured patch level of the installed Oracle Clusterware.Displays the latest version of the software that has been successfully started on the specified node.Obtains the value of a specific Cluster Synchronization Services parameter.Pins many specific nodes.Sets the value of a Cluster Synchronization Services parameter.Unpins many servers.Unsets the value of a Cluster Synchronization Services parameter and restores it to its default value.Retrieves the address stored in the Oracle Local Registry of the local Intelligent Platform Management Interface (IPMI) device.Stores the address of the local Intelligent Platform Management Interface (IPMI) device in the Oracle Local Registry.Stores the login credentials of an Intelligent Platform Management Interface (IPMI) administrator in the Oracle Local Registry.Determines whether Oracle Clusterware on the local server has been configured to use IPMI for failure isolation.Clears all previously stored IPMI configuration (login credentials and IP address) from the Oracle Local Registry.Determines the presence of the Intelligent Platform Management Interface (IPMI) driver on the local system.Lists the problems for which automatic restart of Cluster Synchronization Services is disabled.Stops the automatic restart of Cluster Synchronization Services when a specific problem occurs.Removes a voting file from the Oracle Clusterware configuration.Displays the voting files used by Cluster Synchronization Services, the status of the voting files, and the location of the disks, whether they are stored in Oracle ASM or elsewhere.Checks the status of the Cluster Time Synchronization services.Sends DHCP discover packets on the network at the specified port. If DHCP servers are present on the network, then they respond to the discovery message and the command succeeds.Displays the client ID that the Oracle Clusterware agent uses to obtain the IP addresses from the DHCP server for configured cluster resources. The VIP type is required.Sends a DHCP lease release request to a specific client ID, and sends release packets on the network to a specific port.Sends DHCP request packets on the network to the specified port.Replaces the existing discovery string used to locate voting files.Obtains a list of addresses returned by DNS lookup of the name with the specified DNS server.Starts a given IP name or IP address on a specified interface with a specified subnet mask.Checks if a given IP address is up on the network.Stops a given IP name or IP address on a specified interface with a specified subnet mask.Lists the components of the modules that you can debug.Creates the configuration deployment file for a new member cluster.Deletes a member cluster configuration.Displays the configuration for a member cluster.Removes a node from the cluster.Obtains the name of the local node.Obtains the configured node role of nodes in the cluster.Adds a configuration policy to the policy set.Deletes a configuration policy from the policy set.Predicts the effects of activating a specific policy without making changes to the system.Modifies an existing configuration policy.Obtains the status and definition of a configuration policy.Creates a single policy set, in the form of a text file, that reflects the server pool configuration.Modifies an existing policy set.Obtains the current policies in the policy set, including the access control list, which governs who can modify the set, the last activated policy, and the configuration which is now in effect, which is known as the Current policy.Initiates the check action inside the application-specific agent of a particular resource.Relocates resources to another server in the cluster.Checks the current setting value of the RESOURCE_USE_ENABLED server configuration parameter.Sets the value of the RESOURCE_USE_ENABLED server configuration parameter for the server on which you run this command.Transitions Oracle Clusterware and Oracle ASM into rolling patch mode.Transitions Oracle Clusterware and Oracle ASM out of rolling patch mode.Transitions Oracle Clusterware and Oracle ASM into rolling upgrade mode.Simulates the addition of a server without making changes to the system.Predicts the effects of deleting a server without making changes to the system.Predicts the effects of relocating a server to a different server pool without making changes to the system. Modifies the configuration of a particular server.Relocates a server to a different server pool.Obtains the status and configuration information of one or more particular servers.Obtains the current configured value for the CSS_CRITICAL server attributeSets the configuration value for the CSS_CRITICAL server attribute.Checks the current setting value of the SERVER_LABEL server attribute.Sets the configuration value of the SERVER_LABEL server configuration attribute for the server on which you run this command.Adds a server pool that is for hosting non-database resources (such as application servers) to Oracle Clusterware.Removes a server pool from the Oracle Clusterware configuration.Predicts the effects of adding a server pool without making changes to the system.Simulates the deletion of a server pool without making changes to the system.Use the crsctl eval modify serverpool command to predict the effects of modifying a server pool without making changes to the system. This command may be useful to cluster administrators.Retrieves permissions for a particular server pool.Modifies an existing server pool.Sets permissions for a particular server pool.Retrieves the status and configuration information of one or more particular server pools.Verifies that a daemon can listen on a specified address and port.Starts a test DNS server that will listen on a specified IP address and port.Queries the test DNS server running on a specified address and local host name.Stops a test DNS server.Moves or replaces the existing voting files.You can only use these commands in the Oracle Restart environment.Checks the status of ohasd.Displays the automatic startup configuration of the Oracle High Availability Services stack on the server.Disables automatic startup of the Oracle High Availability Services stack when the server boots up.Enables automatic startup of the Oracle High Availability Services stack when the server boots up.Displays the release version of the Oracle Clusterware software that is stored in the binaries on the local node.Displays the software version on the local node.Starts Oracle High Availability Services on the local server.Stops Oracle High Availability Services on the local server.You can use crsctl set log commands as the root user to enable dynamic debugging for Cluster Ready Services (CRS), Cluster Synchronization Services (CSS), and the Event Manager (EVM), and the clusterware subcomponents.Setting log levels for Oracle Clusterware.You can enable debugging for Oracle Clusterware modules and their components, and for resources, by setting environment variables or by running the crsctl set log command.">Oracle Clusterware Control (CRSCTL) Utility Reference</a> for information about using the CRSCTL commands referred to in this procedure
                     </p>
                  </div>
                  <p>Use the following procedure to test zone delegation:</p>
                  <ol>
                     <li>
                        <p>Start the GNS VIP by running the following command as <code class="codeph">root</code>:
                        </p><pre class="oac_no_warn" dir="ltr"># crsctl start ip -A <span class="italic">IP_name</span>/<span class="italic">netmask</span>/<span class="italic">interface_name</span>
</pre><p>The <span class="italic"><code class="codeph">interface_name</code></span> should be the public interface and netmask of the public network.
                        </p>
                     </li>
                     <li>
                        <p>Start the test DNS server on the GNS VIP by running the following command (you must run this command as <code class="codeph">root</code> if the port number is less than 1024):
                        </p><pre class="oac_no_warn" dir="ltr"># crsctl start testdns -address <span class="italic">address</span> [-port <span class="italic">port</span>]
</pre><p>This command starts the test DNS server to listen for DNS forwarded packets at the specified IP and port.</p>
                     </li>
                     <li>
                        <p>Ensure that the GNS VIP is reachable from other nodes by running the following command as <code class="codeph">root</code>:
                        </p><pre class="oac_no_warn" dir="ltr">crsctl status ip -A <span class="italic">IP_name</span>
</pre></li>
                     <li>
                        <p>Query the DNS server directly by running the following command:</p><pre class="oac_no_warn" dir="ltr">crsctl query dns -name <span class="italic">name</span> -dnsserver <span class="italic">DNS_server_address</span>
</pre><p>This command fails with the following error:</p>
                        <p><span class="bold">CRS-10023:</span> Domain name look up for name asdf.foo.com failed. Operating system error: Host name lookup failure
                        </p>
                        <p>Look at <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/log/</code><span class="italic"><code class="codeph">host_name</code></span><code class="codeph">/client/odnsd_*.log</code> to see if the query was received by the test DNS server. This validates that the DNS queries are not being blocked by a firewall.
                        </p>
                     </li>
                     <li id="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B__CHDBGJEE">
                        <p>Query the DNS delegation of GNS domain queries by running the following command:</p><pre class="oac_no_warn" dir="ltr">crsctl query dns -name <span class="italic">name</span></pre><div class="infoboxnote" id="GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B__GUID-9308DBCF-E4AB-42E0-B21B-219142FC7CBB">
                           <p class="notep1">Note:</p>
                           <p>The only difference between this step and the previous step is that you are not giving the <code class="codeph">-dnsserver</code> <span class="italic"><code class="codeph">DNS_server_address</code></span> option. This causes the command to query name servers configured in <code class="codeph">/etc/resolv.conf</code>. As in the previous step, the command fails with same error. Again, look at <code class="codeph">odnsd*.log</code> to ensure that <code class="codeph">odnsd</code> received the queries. If step <a href="troubleshooting-oracle-clusterware.html#GUID-449C9CAB-9D35-46D1-AF2D-467E74D0681B__CHDBGJEE">5</a> succeeds but step 6 does not, then you must check the DNS configuration.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>Stop the test DNS server by running the following command:</p><pre class="oac_no_warn" dir="ltr">crsctl stop testdns -address <span class="italic">address</span>
</pre></li>
                     <li>
                        <p>Stop the GNS VIP by running the following command as <code class="codeph">root</code>:
                        </p><pre class="oac_no_warn" dir="ltr">crsctl stop ip -A <span class="italic">IP_name</span>/<span class="italic">netmask</span>/<code class="codeph">interface_name</code></pre></li>
                  </ol>
               </div>
            </div><a id="CWADD91086"></a><div class="sect2"><a id="GUID-FA795984-F89F-4D2F-8A06-5AE37FBC416E" name="GUID-FA795984-F89F-4D2F-8A06-5AE37FBC416E"></a><h3 id="CWADD-GUID-FA795984-F89F-4D2F-8A06-5AE37FBC416E" class="sect3">Oracle Clusterware Alerts</h3>
               <div>
                  <p>Oracle Clusterware writes messages to the ADR alert log file (as previously described) for various important events. Alert log messages generally are localized (translated) and carry a message identifier that can be used to look up additional information about the message. The alert log is the first place to look if there appears to be problems with Oracle Clusterware.</p>
                  <p>The following is an example of alert log messages from two different <a id="d199619e3405" class="indexterm-anchor"></a><a id="d199619e3409" class="indexterm-anchor"></a><a id="d199619e3413" class="indexterm-anchor"></a>CRS daemon processes:
                  </p><pre class="oac_no_warn" dir="ltr">2014-07-16 00:27:22.074 [CTSSD(12817)]CRS-2403:The Cluster Time Synchronization Service on host stnsp014 is in observer mode.
2014-07-16 00:27:22.146 [CTSSD(12817)]CRS-2407:The new Cluster Time Synchronization Service reference node is host stnsp013.
2014-07-16 00:27:22.753 [CTSSD(12817)]CRS-2401:The Cluster Time Synchronization Service started on host stnsp014.
2014-07-16 00:27:43.754 [CRSD(12975)]CRS-1012:The OCR service started on node stnsp014.
2014-07-16 00:27:46.339 [CRSD(12975)]CRS-1201:CRSD started on node stnsp014.
</pre><p>The following example shows the start of the Oracle Cluster Time Synchronization Service (OCTSS) after a cluster reconfiguration: </p><pre class="oac_no_warn" dir="ltr">2014-07-15 23:51:17.532 [CTSSD(12813)]CRS-2403:The Cluster Time Synchronization Service on host stnsp014 is in observer mode.
2014-07-15 23:51:18.292 [CTSSD(12813)]CRS-2407:The new Cluster Time Synchronization Service reference node is host stnsp013.
2014-07-15 23:51:18.961 [CTSSD(12813)]CRS-2401:The Cluster Time Synchronization Service started on host stnsp014.</pre></div><a id="CWADD92956"></a><div class="sect3"><a id="GUID-1D16C5C9-DF65-4214-BB95-AACF18371548" name="GUID-1D16C5C9-DF65-4214-BB95-AACF18371548"></a><h4 id="CWADD-GUID-1D16C5C9-DF65-4214-BB95-AACF18371548" class="sect4">Alert Messages Using Diagnostic Record Unique IDs</h4>
                  <div>
                     <p>Beginning with Oracle Database 11<span class="italic">g</span> release 2 (11.2), certain Oracle Clusterware messages contain a text identifier surrounded by "<code class="codeph">(:</code>" and "<code class="codeph">:)</code>". Usually, the identifier is part of the message text that begins with "<code class="codeph">Details in...</code>" and includes an Oracle Clusterware diagnostic log file path and name similar to the following example. The identifier is called a <a id="d199619e3554" class="indexterm-anchor"></a>DRUID, or diagnostic record unique ID:
                     </p><pre class="oac_no_warn" dir="ltr">2014-07-16 00:18:44.472 [ORAROOTAGENT(13098)]CRS-5822:Agent
 '/scratch/12.1/grid/bin/orarootagent_root' disconnected from server. Details at
 (:CRSAGF00117:) in /scratch/12.1/grid/log/stnsp014/agent/crsd/orarootagent_
root/orarootagent_root.log.
</pre><p>DRUIDs are used to relate external product messages to entries in a diagnostic log file and to internal Oracle Clusterware program code locations. They are not directly meaningful to customers and are used primarily by My Oracle Support when diagnosing problems.</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
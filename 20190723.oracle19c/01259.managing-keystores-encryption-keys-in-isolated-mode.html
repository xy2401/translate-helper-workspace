<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Isolated mode enables you to create a keystore for each pluggable database (PDB).">
      <meta name="description" content="Isolated mode enables you to create a keystore for each pluggable database (PDB).">
      <title>Managing Keystores and TDE Master Encryption Keys in Isolated Mode</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Security Guide ">
      <meta property="og:description" content="Isolated mode enables you to create a keystore for each pluggable database (PDB).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Security Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="advanced-security-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-13T09:26:12-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96301-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-keystores-encryption-keys-in-united-mode.html" title="Previous" type="text/html">
      <link rel="next" href="general-considerations-of-using-transparent-data-encryption.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Advanced Security Guide">
    <meta name="dcterms.isVersionOf" content="ASOAG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-keystores-encryption-keys-in-united-mode.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="general-considerations-of-using-transparent-data-encryption.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Security Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="asopart1.html" property="item" typeof="WebPage"><span property="name">Using Transparent Data Encryption</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Managing Keystores and TDE Master Encryption Keys in Isolated Mode</li>
            </ol>
            <a id="GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" name="GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA"></a>
            
            <h2 id="ASOAG-GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" class="sect2"><span class="enumeration_chapter">6 </span>Managing Keystores and TDE Master Encryption Keys in Isolated Mode
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Isolated mode enables you to create a keystore for each pluggable database (PDB).</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-07CFFDDA-A91A-4248-B6B8-DC0DCE4A6822">About Managing Keystores and TDE Master Encryption Keys in Isolated Mode</a><br>In isolated mode, where a pluggable database (PDB) has its own keystore, you manage the keystore and its TDE master encryption keys from the PDB only.
                  </li>
                  <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-A113A464-A60E-4CAE-B2FB-76F8DD103434">Operations That Are Allowed in Isolated Mode</a><br>You can perform many <code class="codeph">ADMINISTER KEY MANAGEMENT</code> operations in isolated mode.
                  </li>
                  <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-19DB3E40-3B80-4896-9A15-18B56477B38B">Operations That Are Not Allowed in an Isolated Mode PDB</a><br>There are several <code class="codeph">ADMINISTER KEY MANAGEMENT</code> operations that you cannot perform in an isolated mode PDB.
                  </li>
                  <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B3A669F2-5A75-405C-B319-83F0C3C168C5">Configuring the Keystore Location and Type for Isolated Mode</a><br>For isolated mode, you can configure the keystore location and type by using only parameters or a combination of parameters and the <code class="codeph">ALTER SYSTEM</code> statement.
                  </li>
                  <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-436F9034-B6B2-4AC8-8BD1-478B995E9F08">Configuring a Keystore and TDE Master Encryption Key in Isolated Mode</a><br>In isolated mode, the software keystore is associated with a PDB. 
                  </li>
                  <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-8A38CB3C-91C4-42DC-84A1-A71091EF50D9">Configuring a Hardware Keystore in Isolated Mode</a><br>There are two different types of hardware keystores that Oracle Database supports:&nbsp;hardware security modules (<code class="codeph">HSM</code>) or Oracle Key Vault (<code class="codeph">OKV</code>) keystores.
                  </li>
                  <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a><br>After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.
                  </li>
                  <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5316DC4C-BAFF-4653-9884-34F121AD878C">Administering Transparent Data Encryption in Isolated Mode</a><br>You can perform a number of general administrative tasks with Transparent Data Encryption in isolated mode. 
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="asopart1.html" title="Part I describes how to use Transparent Data Encryption.">Using Transparent Data Encryption</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-07CFFDDA-A91A-4248-B6B8-DC0DCE4A6822" name="GUID-07CFFDDA-A91A-4248-B6B8-DC0DCE4A6822"></a><h3 id="ASOAG-GUID-07CFFDDA-A91A-4248-B6B8-DC0DCE4A6822" class="sect3">About Managing Keystores and TDE Master Encryption Keys in Isolated Mode</h3>
               <div>
                  <p>In isolated mode, where a pluggable database (PDB) has its own keystore, you manage the keystore and its TDE master encryption keys from the PDB only.</p>
                  <p>Similar to united mode, you must first configure a PDB to use isolated mode by setting the <code class="codeph">WALLET_ROOT</code> and <code class="codeph">TDE_CONFIGURATION</code> parameters. After you set these parameters, you can create and manage the keystore from the PDB. In this way, you can have the following scenario:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The united mode settings in the CDB root will apply to all PDBs that do not have isolated mode settings. For example, the keystore that you create in the CDB root will be used by the rootâ€™s associated united mode PDBs. </p>
                     </li>
                     <li>
                        <p>The PDBs that are configured in isolated mode are allowed to independently create and manage their own keystore. An isolated mode PDB can have its own keystore, independent of the keystore of the CDB root.</p>
                     </li>
                  </ul>
                  <p>This scenario is useful in cases where you have many PDBs that must use one type of keystore, but you have a few PDBs that must use a different type. By different types of keystores, this refers to either a TDE software keystore or to one of the hardware keystores that Oracle supports (for example, Oracle Key Vault, Safenet, or Cloud Key Management Service). You cannot have a mixture of different hardware keystore types in one CDB environment because the Oracle server can load only one PKCS#11 vendor library. If necessary, you can configure these PDBs in isolated mode so that each PDB can use its own keystore. </p>
                  <p>An advantage of configuring a PDB in isolated mode is that it improves the performance of rekey operations in the PDB as compared to the rekey performance in united mode when there are a large number of encrypted PDBs. </p>
                  <p>In a CDB when the number of encrypted PDBs is large, configuring a PDB in isolated mode allows the performance of the rekey operation in that PDB to remain similar to the performance of a rekey operation in a standalone system, and remain constant as the number of encrypted PDBs in the overall system increases.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" title="Isolated mode enables you to create a keystore for each pluggable database (PDB).">Managing Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-A113A464-A60E-4CAE-B2FB-76F8DD103434" name="GUID-A113A464-A60E-4CAE-B2FB-76F8DD103434"></a><h3 id="ASOAG-GUID-A113A464-A60E-4CAE-B2FB-76F8DD103434" class="sect3">Operations That Are Allowed in Isolated Mode</h3>
               <div>
                  <p>You can perform many <code class="codeph">ADMINISTER KEY MANAGEMENT</code> operations in isolated mode.
                  </p>
                  <div class="section">
                     <p>These operations include creating, backing up, opening keystores; changing keystore passwords, merging keystores, closing keystores; creating, activating, tagging, moving, exporting, importing, and migrating encryption keys; and adding, updating, and deleting client secrets. </p>
                     <p><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-A113A464-A60E-4CAE-B2FB-76F8DD103434__ADMINISTERKEYMANAGEMENTISOLATIONMOD-04C52957" title="This table describes the ADMINISTER KEY MANAGEMENT operations that are allowed in isolated mode, and the syntax used for each operations">Table 6-1</a> describes the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> operations that you can perform in an isolated mode PDB. 
                     </p>
                     <div class="tblformal" id="GUID-A113A464-A60E-4CAE-B2FB-76F8DD103434__ADMINISTERKEYMANAGEMENTISOLATIONMOD-04C52957">
                        <p class="titleintable">Table 6-1 ADMINISTER KEY MANAGEMENT Isolated Mode Operations</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ADMINISTER KEY MANAGEMENT Isolated Mode Operations" summary="This table describes the ADMINISTER KEY MANAGEMENT operations that are allowed in isolated mode, and the syntax used for each operations" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d36049e342">Operation</th>
                                 <th align="left" valign="bottom" width="20%" id="d36049e344">Syntax</th>
                                 <th align="left" valign="bottom" width="20%" id="d36049e346">Isolated Mode Notes</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e350" headers="d36049e342 ">
                                    <p>Creating a keystore</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e350 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
CREATE KEYSTORE ['<span class="italic">keystore_location</span>']
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e350 d36049e346 ">
                                    <p>You can create password-protected, local auto-login, and auto-login keystores in an isolated mode PDB.</p>
                                    <p>The <code class="codeph"><span class="codeinlineitalic">keystore_location</span></code> clause is optional only when you have set the <code class="codeph">WALLET_ROOT</code> parameter. Otherwise, it is mandatory. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e375" headers="d36049e342 ">
                                    <p>Creating an auto-login keystore</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e375 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
CREATE [LOCAL] AUTO_LOGIN KEYSTORE 
FROM KEYSTORE ['<span class="italic">keystore_location</span>'] 
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e375 d36049e346 ">
                                    <p>The <code class="codeph"><span class="codeinlineitalic">keystore_location</span></code> is optional if the <code class="codeph">WALLET_ROOT</code> parameter is set.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e398" headers="d36049e342 ">
                                    <p>Opening a keystore</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e398 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
SET KEYSTORE OPEN
[FORCE KEYSTORE]
IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">keystore_password</span>];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e398 d36049e346 ">
                                    <p>In this operation, the <code class="codeph">EXTERNAL_STORE</code> clause uses the password in the wallet. In a non-multitenant (standalone) environment, the wallet is configured at the location set by the <code class="codeph">EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION</code> initialization parameter. In a multitenant environment the wallet is configured in the <code class="codeph">tde_seps</code> directory in the <code class="codeph">WALLET_ROOT</code> location. This wallet contains the password of the keystore.
                                    </p>
                                    <p>For a PDB in isolated mode, the wallet used by the <code class="codeph">EXTERNAL_STORE</code> clause must be configured at the <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span>/<span class="codeinlineitalic">PDB_GUID</span>/tde_seps</code> location.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e436" headers="d36049e342 ">
                                    <p>Changing a keystore password</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e436 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
ALTER KEYSTORE PASSWORD
IDENTIFIED BY <span class="italic">old_keystore_password</span>
SET <span class="italic">new_keystore_password</span>  
WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e436 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e455" headers="d36049e342 ">
                                    <p>Backing up a keystore</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e455 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
BACKUP KEYSTORE 
[USING '<span class="italic">backup_identifier</span>']
IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">keystore_password</span>]
[TO '<span class="italic">keystore_location</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e455 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e474" headers="d36049e342 ">
                                    <p>Merging the contents of one keystore into an existing keystore</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e474 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
MERGE KEYSTORE '<span class="italic">keystore_location1</span>'
[IDENTIFIED BY <span class="italic">keystore1_password</span>]
INTO EXISTING KEYSTORE '<span class="italic">keystore_location</span>2'
IDENTIFIED BY <span class="italic">keystore2_password</span>
WITH BACKUP [USING '<span class="italic">backup_identifier</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e474 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e499" headers="d36049e342 ">
                                    <p>Merging the contents of two keystores to create a third keystore</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e499 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
MERGE KEYSTORE '<span class="italic">keystore_location1</span>'
[IDENTIFIED BY <span class="italic">keystore1_password</span>]
AND KEYSTORE '<span class="italic">keystore_location2</span>'
[IDENTIFIED BY <span class="italic">keystore2_password</span>]
INTO NEW KEYSTORE '<span class="italic">keystore_location3</span>'
IDENTIFIED BY <span class="italic">keystore3_password</span>;</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e499 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e528" headers="d36049e342 ">
                                    <p>Closing a keystore</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e528 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
SET KEYSTORE CLOSE
[IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">keystore_password</span>]];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e528 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e541" headers="d36049e342 ">
                                    <p>Closing the keystore of the CDB root when a PDB in isolated mode has its keystore open</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e541 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
FORCE KEYSTORE CLOSE
[IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">keystore_password</span>]];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e541 d36049e346 ">
                                    <p>The <code class="codeph">FORCE</code> clause allows the keystore to be closed in the CDB root even when a PDB in isolated mode still has its keystore open
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e557" headers="d36049e342 ">
                                    <p>Creating and activating a new TDE master encryption key (rekeying)</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e557 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
SET [ENCRYPTION] KEY 
[USING TAG '<span class="italic">tag_name</span>']
[FORCE KEYSTORE]
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>
]WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e557 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e576" headers="d36049e342 ">
                                    <p>Creating a user-defined TDE master encryption key for either now  (<code class="codeph">SET</code>) or later on (<code class="codeph">CREATE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e576 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT [SET | CREATE] [ENCRYPTION] KEY
'<span class="italic">mkid</span>:<span class="italic">mk</span> | <span class="italic">mk</span>' 
[USING ALGORITHM <span class="italic">'algorithm'</span>] 
[FORCE KEYSTORE]
[USING TAG '<span class="italic">tag_name</span>']
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']]
[CONTAINER = CURRENT];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e576 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e614" headers="d36049e342 ">
                                    <p>Activating an existing TDE master encryption key</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e614 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
USE [ENCRYPTION] KEY '<span class="italic">key_id</span>' 
[USING TAG 'tag']
IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">keystore_password</span>] 
WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e614 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e633" headers="d36049e342 ">
                                    <p>Tagging a TDE master encryption key</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e633 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
SET TAG 'tag' FOR '<span class="italic">key_id</span>'
IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">keystore_password</span>]
WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e633 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e652" headers="d36049e342 ">
                                    <p>Exporting a TDE master encryption key</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e652 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
EXPORT [ENCRYPTION] KEYS 
WITH SECRET <span class="italic">secret</span>
TO '<span class="italic">filename</span>'
IDENTIFIED BY <span class="italic">keystore_password</span>
[WITH IDENTIFIER IN 
{ '<span class="italic">key_id</span>' [, '<span class="italic">key_id</span>' ]... | 
( <span class="italic">subquery</span> ) }];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e652 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e681" headers="d36049e342 ">
                                    <p>Importing a TDE master encryption key</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e681 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
IMPORT [ENCRYPTION] KEYS 
WITH SECRET <span class="italic">secret</span>
FROM '<span class="italic">filename</span>'
IDENTIFIED BY <span class="italic">keystore_password</span>
[WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>']];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e681 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e703" headers="d36049e342 ">
                                    <p>Migrating a TDE master encryption key from a software keystore to an HSM</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e703 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
SET [ENCRYPTION] KEY
IDENTIFIED BY <span class="italic">HSM_auth_string</span>
[FORCE KEYSTORE]
MIGRATE USING <span class="italic">software_keystore_password</span>
WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e703 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e722" headers="d36049e342 ">
                                    <p>Reverse-migrating a TDE master encryption key from an HSM to a software keystore</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e722 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
SET [ENCRYPTION] KEY
IDENTIFIED BY <span class="italic">software_keystore_password</span>
REVERSE MIGRATE USING <span class="italic">HSM_auth_string</span>;</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e722 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e738" headers="d36049e342 ">
                                    <p>Adding a client secret</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e738 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
ADD SECRET <span class="italic">'secret'</span>
FOR CLIENT '<span class="italic">client_identifier</span>'
[USING TAG '<span class="italic">tag_name</span>' ]
IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">keystore_password</span>]
WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e738 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e763" headers="d36049e342 ">
                                    <p>Updating a client secret</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e763 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
UPDATE SECRET <span class="italic">'secret'</span>
FOR CLIENT '<span class="italic">client_identifier</span>'
[USING TAG '<span class="italic">tag_name</span>' ]
IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">keystore_password</span>]
WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e763 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e788" headers="d36049e342 ">
                                    <p>Deleting a client secret</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e788 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
DELETE SECRET
FOR CLIENT '<span class="italic">client_identifier</span>'
IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">keystore_password</span>]
WITH BACKUP 
[USING '<span class="italic">backup_identifier</span>'];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e788 d36049e346 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d36049e807" headers="d36049e342 ">
                                    <p>Isolate a PDB</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d36049e807 d36049e344 "><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
ISOLATE KEYSTORE
IDENTIFIED BY <span class="italic">isolated_keystore_password</span>
FROM ROOT KEYSTORE
[FORCE KEYSTORE]
IDENTIFIED BY
[EXTERNAL STORE | <span class="italic">united_keystore_password</span>]
WITH BACKUP [USING <span class="italic">backup_id</span>];</pre></td>
                                 <td align="left" valign="top" width="20%" headers="d36049e807 d36049e346 ">
                                    <p>This operation performs two actions. First, it changes the <code class="codeph">TDE_CONFIGURATION</code> of the PDB so that it is in isolated mode. Second, it moves the TDE master encryption key and all previously active (historical) TDE master encryption keys from the keystore of the CDB root to a newly-created keystore for the PDB having its own password, where the PDB will be able to manage its own keys.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" title="Isolated mode enables you to create a keystore for each pluggable database (PDB).">Managing Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-19DB3E40-3B80-4896-9A15-18B56477B38B" name="GUID-19DB3E40-3B80-4896-9A15-18B56477B38B"></a><h3 id="ASOAG-GUID-19DB3E40-3B80-4896-9A15-18B56477B38B" class="sect3">Operations That Are Not Allowed in an Isolated Mode PDB</h3>
               <div>
                  <p>There are several <code class="codeph">ADMINISTER KEY MANAGEMENT</code> operations that you cannot perform in an isolated mode PDB.
                  </p>
                  <div class="section">
                     <p>These operations include the following: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Using the <code class="codeph">CONTAINER = ALL</code> clause to create a new TDE master encryption key for later use in each pluggable database (PDB)
                           </p>
                        </li>
                        <li>
                           <p>Moving encryption keys from the keystore of the CDB root into a keystore of a PDB that is configured in isolated mode</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" title="Isolated mode enables you to create a keystore for each pluggable database (PDB).">Managing Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-B3A669F2-5A75-405C-B319-83F0C3C168C5" name="GUID-B3A669F2-5A75-405C-B319-83F0C3C168C5"></a><h3 id="ASOAG-GUID-B3A669F2-5A75-405C-B319-83F0C3C168C5" class="sect3">Configuring the Keystore Location and Type for Isolated Mode</h3>
               <div>
                  <p>For isolated mode, you can configure the keystore location and type by using only parameters or a combination of parameters and the <code class="codeph">ALTER SYSTEM</code> statement.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-73718328-B39B-4F2F-B6A5-137AA92D0FF6">Configuring Isolated Mode</a><br>You can configure isolated mode by setting <code class="codeph">WALLET_ROOT</code> in the initialization parameter file in the CDB root and <code class="codeph">TDE_CONFIGURATION</code> in the PDB you want to isolate.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-0BCDB4FA-1E9B-49E0-A4C3-92123EC970C8">Example: Restoring an Older Version of a Control File</a><br>You can set <code class="codeph">TDE_CONFIGURATION</code> if you have an older version of a control file that must be restored and only a few PDBs were configured in isolated mode.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-1637E45A-36BA-4BC8-B9E3-581515A9AA1C">Example: Addressing the Problem of a Lost Control File</a><br>You can address the problem of a lost control file by using the <code class="codeph">ALTER SYSTEM</code> statement. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-6A8B03C4-B92F-4FA3-824C-D39D10439C4A">Example: Configuring Isolated Mode in an Oracle Real Application Clusters Environment</a><br>You can use <code class="codeph">ALTER SYSTEM</code> to configure isolated mode in an Oracle Real Application Clusters (Oracle RAC) environment.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" title="Isolated mode enables you to create a keystore for each pluggable database (PDB).">Managing Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-73718328-B39B-4F2F-B6A5-137AA92D0FF6" name="GUID-73718328-B39B-4F2F-B6A5-137AA92D0FF6"></a><h4 id="ASOAG-GUID-73718328-B39B-4F2F-B6A5-137AA92D0FF6" class="sect4">Configuring Isolated Mode</h4>
                  <div>
                     <p>You can configure isolated mode by setting <code class="codeph">WALLET_ROOT</code> in the initialization parameter file in the CDB root and <code class="codeph">TDE_CONFIGURATION</code> in the PDB you want to isolate.
                     </p>
                     <div class="section">
                        <p>Configuring the <code class="codeph">WALLET_ROOT</code> and <code class="codeph">TDE_CONFIGURATION</code> parameters for the CDB environment is a similar procedure as the one you would use to configure united mode, except rather than using the <code class="codeph">RESET</code> clause of the <code class="codeph">ALTER SYSTEM</code> statement, you use the <code class="codeph">SET</code> clause. You can perform the configuration by adding the <code class="codeph">WALLET_ROOT</code> and <code class="codeph">TDE_CONFIGURATION</code> parameters to the initialization parameter file. To configure a PDB in isolated mode, you must set a value for the <code class="codeph">TDE_CONFIGURATION</code> parameter of the PDB, which you can do either by using the <code class="codeph">ALTER SYSTEM</code> statement or by issuing the <code class="codeph">ADMINISTER KEY MANAGEMENT ISOLATE KEYSTORE</code> statement. This section focuses on the use of the <code class="codeph">ALTER SYSTEM</code> statement. 
                        </p>
                        <p>Depending on whether your system uses pfile or spfile, you must set the <code class="codeph">SCOPE</code> clause in the <code class="codeph">ALTER SYSTEM</code> statement appropriately when setting the value of the <code class="codeph">TDE_CONFIGURATION</code> parameter for the PDB. The value of the <code class="codeph">TDE_CONFIGURATION</code> parameter is a list of attribute-value pairs, and it is the value of the <code class="codeph">KEYSTORE_CONFIGURATION</code> attribute that specifies the type of the keystore, as follows:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">FILE</code> specifies a software keystore
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OKV</code> specifies an Oracle Key Vault hardware keystore)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">HSM</code> specifies a hardware security module keystore 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">FILE|OKV</code> specifies a reverse-migration from the <code class="codeph">OKV</code> keystore type&nbsp;to the <code class="codeph">FILE</code> keystore type has occurred
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">FILE|HSM</code> specifies a reverse-migration from the <code class="codeph">HSM</code> keystore type to the <code class="codeph">FILE</code> keystore type has occurred
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OKV|FILE</code> specifies a migration from the <code class="codeph">FILE</code> keystore type&nbsp;to the <code class="codeph">OKV</code> keystore type has occurred
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">HSM|FILE</code> specifies a migration from the <code class="codeph">FILE</code> keystore type&nbsp;to the <code class="codeph">HSM</code> keystore type has occurred
                              </p>
                           </li>
                        </ul>
                        <p>After you have used <code class="codeph">ALTER SYSTEM</code> to configure the <code class="codeph">TDE_CONFIGURATION</code> value for the selected PDB, the PDB in the CDB environment is in isolated mode. The steps in this procedure explain in detail how to configure an individual PDB to be in isolated mode, using its own keystore type.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Connect to the PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege. </span></li>
                        <li><span>Run the <code class="codeph">ALTER SYSTEM</code> statement to configure the <code class="codeph">WALLET_ROOT</code> and <code class="codeph">TDE_CONFIGURATION</code> parameters for the CDB environment.</span><ul>
                              <li>If the CDB root and the PDB are open, then set <code class="codeph">SCOPE</code> to <code class="codeph">both</code>:<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=<span class="italic">keystore_type</span>" SCOPE=both;</pre></li>
                              <li>If the CDB root is open and the PDB is in the mount state, then set <code class="codeph">scope</code> to <code class="codeph">spfile</code>:<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=<span class="italic">keystore_type</span>" SCOPE=spfile;</pre></li>
                           </ul>
                        </li>
                        <li><span>Check the configuration. </span><ul>
                              <li>To check the <code class="codeph">TDE_CONFIGURATION</code> parameter setting:<pre class="oac_no_warn" dir="ltr">SHOW PARAMETER TDE_CONFIGURATION
</pre><p>The output should reflect the keystore configuration that you set for the current PDB. If it shows a different keystore configuration (for example, <code class="codeph">FILE</code> if you had set it to <code class="codeph">OKV</code>), then the setting may be showing the keystore configuration that was set for the CDB root, in united mode.
                                 </p>
                              </li>
                              <li>To check the keystore mode: <pre class="oac_no_warn" dir="ltr">SELECT KEYSTORE_MODE FROM V$ENCRYPTION_WALLET;</pre><p>The output should be <code class="codeph">ISOLATED</code>. 
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                     <div class="section">After you configure isolated mode, the CDB root keystore that was available to the PDB when it was in united mode is no longer available to this PDB. At this stage, the PDB is configured to use its own keystore. If the <code class="codeph">KEYSTORE_CONFIGURATION</code> parameter was <code class="codeph">FILE</code> (meaning that the PDB is configured to use a software keystore), then the keystore location configured for the PDB is <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span>/PDB-GUID/tde</code>. If a keystore exists at that location and contains a TDE master encryption key, then that key is only available to this PDB, not to any other PDB. If no keystore exists at that location, you now can now proceed to create a software keystore and set a TDE master encryption key. If you later decide that you want the isolated mode PDB to become a united mode PDB again, then you can use the <code class="codeph">ADMINISTER KEY MANAGEMENT UNITE KEYSTORE</code> statement. When you run <code class="codeph">ADMINISTER KEY MANAGEMENT UNITE KEYSTORE</code>, it moves the keys from the PDB's keystore to the keystore of the CDB root, but it leaves any client secrets behind. So if there were no client secrets in the first place, then it would leave the PDB's keystore essentially "empty". It can now be backed up, and removed. Always back up keystores before you remove them, even empty keystores.
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-3C9F5F0E-C5E2-4B9B-8CE8-CDB8B6750271" title="You can configure united mode by setting both the WALLET_ROOT and TDE_CONFIGURATION parameters in the initialization parameter file.">Configuring United Mode by Editing the Initialization Parameter File</a></li>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-CD6E4741-4916-4F24-9427-4DA25DF40587" title="If your environment relies on server parameter files (spfile) or parameter files (pfile), then you can set TDE_CONFIGURATION using ALTER SYSTEM with SCOPE.">Configuring United Mode with the Initialization Parameter File and ALTER SYSTEM</a></li>
                           <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-91E39FB9-025C-4653-AE42-B68D1F22798F" title="Uniting a PDB keystore moves the TDE master encryption keys from the PDB keystore into the keystore of the CDB root. This enables the administrator of the keystore of the CDB root to manage&nbsp;the keys.">Uniting a Pluggable Database Keystore</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B3A669F2-5A75-405C-B319-83F0C3C168C5" title="For isolated mode, you can configure the keystore location and type by using only parameters or a combination of parameters and the ALTER SYSTEM statement.">Configuring the Keystore Location and Type for Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0BCDB4FA-1E9B-49E0-A4C3-92123EC970C8" name="GUID-0BCDB4FA-1E9B-49E0-A4C3-92123EC970C8"></a><h4 id="ASOAG-GUID-0BCDB4FA-1E9B-49E0-A4C3-92123EC970C8" class="sect4">Example: Restoring an Older Version of a Control File</h4>
                  <div>
                     <p>You can set <code class="codeph">TDE_CONFIGURATION</code> if you have an older version of a control file that must be restored and only a few PDBs were configured in isolated mode.
                     </p>
                     <p>When the CDB root and the PDB are both in the mount state, then you can only change the PDBâ€™s keystore configuration from the CDB root. </p>
                     <ol>
                        <li>
                           <p>Log in to the CDB root as a user who was granted the <code class="codeph">SYSDBA</code> administrative privilege.
                           </p>
                        </li>
                        <li>
                           <p>For each PDB that you want to change, use the following syntax:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="CONTAINER=<span class="italic">pdb_name</span>;KEYSTORE_CONFIGURATION=<span class="italic">keystore_type</span>" SCOPE=memory;
</pre><p>For example, for the <code class="codeph">hrpdb</code> and <code class="codeph">salespdb</code> PDBs using <code class="codeph">FILE</code> (for software keystores) as the keystore type:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="CONTAINER=hrpdb;KEYSTORE_CONFIGURATION=FILE" SCOPE=memory;
ALTER SYSTEM SET TDE_CONFIGURATION="CONTAINER=salespdb;KEYSTORE_CONFIGURATION=FILE" SCOPE=memory;
</pre></li>
                        <li>
                           <p>After you set the <code class="codeph">TDE_CONFIGURATION</code> parameter for each PDB, log in to the CDB root and then set <code class="codeph">TDE_CONFIGURATION</code> for the CDB root itself.
                           </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=FILE";</pre><p>At this stage, CDB root is in the mounted state. The value of the <code class="codeph">TDE_CONFIGURATION</code> parameter that was set using <code class="codeph">ALTER SYSTEM</code> with the <code class="codeph">CONTAINER</code> attribute is only present in the memory of the CDB root. To ensure that the configuration is properly applied to each PDB, you must close and then reopen the PDB. When an isolated mode PDB is opened, the configuration set by the <code class="codeph">ALTER SYSTEM</code> statement that was issued in the CDB root is read from the control file and then is automatically applied to the PDB.
                           </p>
                        </li>
                        <li>
                           <p>Connect to each PDB and then close and reopen the PDB.</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE;
ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;</pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B3A669F2-5A75-405C-B319-83F0C3C168C5" title="For isolated mode, you can configure the keystore location and type by using only parameters or a combination of parameters and the ALTER SYSTEM statement.">Configuring the Keystore Location and Type for Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-1637E45A-36BA-4BC8-B9E3-581515A9AA1C" name="GUID-1637E45A-36BA-4BC8-B9E3-581515A9AA1C"></a><h4 id="ASOAG-GUID-1637E45A-36BA-4BC8-B9E3-581515A9AA1C" class="sect4">Example: Addressing the Problem of a Lost Control File</h4>
                  <div>
                     <p>You can address the problem of a lost control file by using the <code class="codeph">ALTER SYSTEM</code> statement. 
                     </p>
                     <p>Running these statements with <code class="codeph">SCOPE</code> set to memory will store the <code class="codeph">CONTAINER</code> value in memory. When you open the isolated PDB, this configuration will automatically be updated for the PDB. 
                     </p>
                     <p>If you are using an Oracle Data Guard environment, then to correct the control file, run these statements on both the primary and the standby databases. </p>
                     <ol>
                        <li>
                           <p>Log in to the CDB root as a user who was granted the <code class="codeph">SYSDBA</code> administrative privilege.
                           </p>
                        </li>
                        <li>
                           <p>If you are unsure of the exact state of the system, then you should run <code class="codeph">ALTER SYSTEM</code> with <code class="codeph">RESET</code>. 
                           </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM RESET TDE_CONFIGURATION SCOPE=memory;</pre></li>
                        <li>
                           <p>For each PDB that you want to change, use the following syntax:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="CONTAINER=<span class="italic">pdb_name</span>;KEYSTORE_CONFIGURATION=FILE" SCOPE=memory; 
</pre><p>For example, for the <code class="codeph">hrpdb</code> and <code class="codeph">salespdb</code> PDBs with <code class="codeph">FILE</code> (for software keystores) as the keystore type:
                           </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="CONTAINER=hrpdb;KEYSTORE_CONFIGURATION=FILE" SCOPE=memory; 
ALTER SYSTEM SET TDE_CONFIGURATION="CONTAINER=salespdb;KEYSTORE_CONFIGURATION=FILE" SCOPE=memory; 
</pre></li>
                        <li>
                           <p>After you set the <code class="codeph">TDE_CONFIGURATION</code> parameter for each PDB, log in to the CDB root and then set <code class="codeph">TDE_CONFIGURATION</code> for the CDB root itself.
                           </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=FILE";</pre><p>At this stage, CDB root is in the mounted state. The value of the <code class="codeph">TDE_CONFIGURATION</code> parameter that was set using <code class="codeph">ALTER SYSTEM</code> with the <code class="codeph">CONTAINER</code> attribute is only present in the memory of the CDB root. To ensure that the configuration is properly applied to each PDB, you must close and then reopen the PDB. When an isolated mode PDB is opened, the configuration set by the <code class="codeph">ALTER SYSTEM</code> statement that was issued in the CDB root is read from the control file and then is automatically applied to the PDB.
                           </p>
                        </li>
                        <li>
                           <p>Connect to each PDB and then close and reopen the PDB.</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE;
ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;</pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B3A669F2-5A75-405C-B319-83F0C3C168C5" title="For isolated mode, you can configure the keystore location and type by using only parameters or a combination of parameters and the ALTER SYSTEM statement.">Configuring the Keystore Location and Type for Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-6A8B03C4-B92F-4FA3-824C-D39D10439C4A" name="GUID-6A8B03C4-B92F-4FA3-824C-D39D10439C4A"></a><h4 id="ASOAG-GUID-6A8B03C4-B92F-4FA3-824C-D39D10439C4A" class="sect4">Example: Configuring Isolated Mode in an Oracle Real Application Clusters Environment</h4>
                  <div>
                     <p>You can use <code class="codeph">ALTER SYSTEM</code> to configure isolated mode in an Oracle Real Application Clusters (Oracle RAC) environment.
                     </p>
                     <ol>
                        <li>
                           <p>To ensure that the effect of the <code class="codeph">ALTER SYSTEM</code> statement is applied on each Oracle RAC node, specify the wildcard (<code class="codeph">*</code>) in the <code class="codeph">SID</code> clause of the <code class="codeph">ALTER SYSTEM</code> statement, as follows. You can run this statement from either the CDB root or a PDB. 
                           </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION="KEYSTORE_CONFIGURATION=<span class="italic">keystore_type</span>" SID='*';</pre></li>
                        <li>
                           <p>If you ran this statement in the CDB root, then restart the database. If you executed it from a PDB, then close and open the PDB.</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B3A669F2-5A75-405C-B319-83F0C3C168C5" title="For isolated mode, you can configure the keystore location and type by using only parameters or a combination of parameters and the ALTER SYSTEM statement.">Configuring the Keystore Location and Type for Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-436F9034-B6B2-4AC8-8BD1-478B995E9F08" name="GUID-436F9034-B6B2-4AC8-8BD1-478B995E9F08"></a><h3 id="ASOAG-GUID-436F9034-B6B2-4AC8-8BD1-478B995E9F08" class="sect3">Configuring a Keystore and TDE Master Encryption Key in Isolated Mode</h3>
               <div>
                  <p>In isolated mode, the software keystore is associated with a PDB. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-AAFE29E8-6F56-4E3A-BBFA-82C273866E5C">About Configuring a Software Keystore in Isolated Mode</a><br>You can create all types of software keystores in isolated mode: password-protected,&nbsp;password protected with the credential provided from an external store, auto-login, local auto-login.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-676DFDCD-1DC5-4B3B-B3C4-445CD98CB4A9">Step 1: Create a Software Keystore in a PDB Configured in Isolated Mode</a><br>A password-protected software keystore requires a password to protect the keystore keys and credentials.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-E97BBAFD-25DA-4D6E-B86C-8E567229DCA9">Step 2: Open the Software Keystore in an Isolated Mode PDB</a><br>To open a software keystore in isolated mode, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE OPEN</code> clause.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-998AEEE6-354E-4064-A547-F093BB312553">Step 3: Set the TDE Master Encryption Key in the Software Keystore of the Isolated Mode PDB</a><br>To set the TDE master encryption key in a software keystore in an isolated mode PDB, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEY</code> clause.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-292F1850-A8B0-4DA0-B208-1D8FA0645E08">Step 4: Encrypt Your Data in Isolated Mode</a><br>Now that you have completed the keystore configuration and the PDB is configured in isolated mode, you can begin to encrypt data in the PDB.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" title="Isolated mode enables you to create a keystore for each pluggable database (PDB).">Managing Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-AAFE29E8-6F56-4E3A-BBFA-82C273866E5C" name="GUID-AAFE29E8-6F56-4E3A-BBFA-82C273866E5C"></a><h4 id="ASOAG-GUID-AAFE29E8-6F56-4E3A-BBFA-82C273866E5C" class="sect4">About Configuring a Software Keystore in Isolated Mode</h4>
                  <div>
                     <p>You can create all types of software keystores in isolated mode: password-protected,&nbsp;password protected with the credential provided from an external store, auto-login, local auto-login.</p>
                     <p>To enable encryption in the PDB after it is configured in isolated mode with the <code class="codeph">KEYSTORE_CONFIGURATION</code> attribute set to <code class="codeph">FILE</code> (that is, to use a software keystore), you must create a software keystore, open the software keystore, and then set a TDE master encryption key in the software keystore. Afterward, you can begin to encrypt data for tables and tablespaces that will be accessible in the PDB. 
                     </p>
                     <p>In a multitenant environment, you can create a secure external store to hold the credentials of the software keystore. This feature enables you to hide the keystore password: it removes the need for storing the keystore password in any script or tool that accesses the database without user intervention, such as an overnight batch script. When the <code class="codeph">WALLET_ROOT</code> parameter is specified, the location of the external store for the CDB root is <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span>/tde_seps</code> and for the PDB it is <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span>/PDB-GUID/tde_seps</code>. When the <code class="codeph">WALLET_ROOT</code> parameter is set, there is no longer a single central external store, so when a keystore password is updated, the corresponding external store must be updated as well. When the <code class="codeph">WALLET_ROOT</code> parameter is not specified, then the location of the external store is the same for both the CDB root and for every PDB. The external store location must then be set by the <code class="codeph">EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION</code> initialization parameter. When the <code class="codeph">WALLET_ROOT</code> parameter is not specified, then there is a single central external store, so when you update the keystore password, only the central external store at the <code class="codeph">EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION</code> must be updated.
                     </p>
                     <p>In a multitenant environment, different PDBs can access this external store location when you run the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement using the <code class="codeph">IDENTIFIED BY EXTERNAL STORE</code> clause. This way, you can centrally locate the password and then update it only once in the external store.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12" title="An external store for a keystore password stores the keystore password in a centrally accessed and managed location.">Configuring an External Store for a Keystore Password</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-436F9034-B6B2-4AC8-8BD1-478B995E9F08" title="In isolated mode, the software keystore is associated with a PDB.">Configuring a Keystore and TDE Master Encryption Key in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-676DFDCD-1DC5-4B3B-B3C4-445CD98CB4A9" name="GUID-676DFDCD-1DC5-4B3B-B3C4-445CD98CB4A9"></a><h4 id="ASOAG-GUID-676DFDCD-1DC5-4B3B-B3C4-445CD98CB4A9" class="sect4">Step 1: Create a Software Keystore in a PDB Configured in Isolated Mode</h4>
                  <div>
                     <p>A password-protected software keystore requires a password to protect the keystore keys and credentials.</p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin@hrpdb as syskm
Enter password: <span class="italic">password</span></pre><p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement to create the keystore using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE 
['<span class="italic">keystore_location</span>'] 
IDENTIFIED BY <span class="italic">software_keystore_password</span>;
</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="italic"><code class="codeph">keystore_location</code></span> is the path to the keystore directory location of the password-protected keystore. If the path that is set by the <code class="codeph">WALLET_ROOT</code> parameter is the path that you want to use, then you can omit the <span class="italic"><code class="codeph">keystore_location</code></span> setting.
                                    </p>
                                    <p>If you specify the <span class="italic"><code class="codeph">keystore_location</code></span>, then enclose it in single quotation marks (<code class="codeph">' '</code>). To find this location, you can query the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. (If the keystore was not created in the default location, then the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view is <code class="codeph">NOT_AVAILABLE</code>.)
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the password of the keystore that you, the security administrator, creates. 
                                    </p>
                                 </li>
                              </ul>
                              <p>For example, to create the keystore in the default location (assuming <code class="codeph">WALLET_ROOT</code> is set):
                              </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE 
IDENTIFIED BY <span class="italic">password</span>;
keystore altered.
</pre></div>
                        </li>
                     </ol>
                     <div class="section">After you complete these steps, the <code class="codeph">ewallet.p12</code> file, which is the keystore, appears in the default keystore location under the <code class="codeph">WALLET_ROOT</code> which you have configured. For example, if you had set the <code class="codeph">WALLET_ROOT</code> parameter to <code class="codeph">$ORACLE_BASE/wallet</code> and set the <code class="codeph">TDE_CONFIGURATION</code> parameter to <code class="codeph">FILE</code> (indicating that a software keystore is configured for the PDB that is in isolated mode), then the keystore of the PDB will be created in the <code class="codeph">$ORACLE_BASE/wallet/PDB-GUID/tde</code> directory.
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-436F9034-B6B2-4AC8-8BD1-478B995E9F08" title="In isolated mode, the software keystore is associated with a PDB.">Configuring a Keystore and TDE Master Encryption Key in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E97BBAFD-25DA-4D6E-B86C-8E567229DCA9" name="GUID-E97BBAFD-25DA-4D6E-B86C-8E567229DCA9"></a><h4 id="ASOAG-GUID-E97BBAFD-25DA-4D6E-B86C-8E567229DCA9" class="sect4">Step 2: Open the Software Keystore in an Isolated Mode PDB</h4>
                  <div>
                     <p>To open a software keystore in isolated mode, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE OPEN</code> clause.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>
                              <p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to open the keystore.</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY <span class="italic">password</span>;
keystore altered.</pre><p>To switch over to opening the password-protected software keystore when an auto-login keystore is configured and is currently open, specify the <code class="codeph">FORCE KEYSTORE</code> clause as follows. 
                              </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
FORCE KEYSTORE 
IDENTIFIED BY EXTERNAL STORE;
keystore altered.</pre><p>Here, the <code class="codeph">IDENTIFIED BY EXTERNAL STORE</code> clause is included in the statement because the keystore credentials exist in an external store. This enables the&nbsp;password-protected keystore to be opened without specifying the keystore&nbsp;password within the statement itself.
                              </p>
                              <p>If the <code class="codeph">WALLET_ROOT</code> parameter has been set, then Oracle Database finds the external store by searching in this path: <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span>/<span class="codeinlineitalic">PDB_GUID</span>/tde_seps</code>. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Confirm that the keystore is open.</span><div><pre class="oac_no_warn" dir="ltr">SELECT STATUS FROM V$ENCRYPTION_WALLET;</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-F3652F6F-B1B8-485A-BCBE-32C0875E93E5" title="A password-protected software keystore must be open before any TDE master encryption keys can be created or accessed in the keystore.">About Opening Software Keystores</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-436F9034-B6B2-4AC8-8BD1-478B995E9F08" title="In isolated mode, the software keystore is associated with a PDB.">Configuring a Keystore and TDE Master Encryption Key in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-998AEEE6-354E-4064-A547-F093BB312553" name="GUID-998AEEE6-354E-4064-A547-F093BB312553"></a><h4 id="ASOAG-GUID-998AEEE6-354E-4064-A547-F093BB312553" class="sect4">Step 3: Set the TDE Master Encryption Key in the Software Keystore of the Isolated Mode PDB</h4>
                  <div>
                     <p>To set the TDE master encryption key in a software keystore in an isolated mode PDB, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEY</code> clause.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                        <li class="stepexpand"><span>Ensure that the database is open in <code class="codeph">READ WRITE</code> mode.</span><div>To find the status, run the <code class="codeph">show pdbs</code> command. 
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement to set the key in the software keystore.</span><div>For example, if the keystore of the PDB is password-protected, the PDB is open, and the keystore of the PDB is open:<pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP USING 'emp_key_backup';

keystore altered.</pre><p>If the keystore is closed:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP USING 'emp_key_backup';

keystore altered.</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">FORCE KEYSTORE</code> should be included if the keystore is closed. This automatically opens the keystore before setting the TDE master encryption key. The <code class="codeph">FORCE KEYSTORE</code> clause also switches over&nbsp;to opening the password-protected software keystore when an auto-login keystore is configured and is currently open.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">IDENTIFIED BY</code> specifies the keystore password. Alternatively, if the keystore password is in an external store, you can use the <code class="codeph">IDENTIFIED BY EXTERNAL STORE</code> clause.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Confirm that the TDE master encryption key is set. </span><div><pre class="oac_no_warn" dir="ltr">SELECT MASTERKEY_ACTIVATED FROM V$DATABASE_KEY_INFO;</pre><p>The output should be <code class="codeph">YES</code>.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-C44968C5-9B77-4D19-82F4-5705268BF429" title="The TDE master encryption key is stored in the keystore.">About Setting the Software Keystore TDE Master Encryption Key</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-436F9034-B6B2-4AC8-8BD1-478B995E9F08" title="In isolated mode, the software keystore is associated with a PDB.">Configuring a Keystore and TDE Master Encryption Key in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-292F1850-A8B0-4DA0-B208-1D8FA0645E08" name="GUID-292F1850-A8B0-4DA0-B208-1D8FA0645E08"></a><h4 id="ASOAG-GUID-292F1850-A8B0-4DA0-B208-1D8FA0645E08" class="sect4">Step 4: Encrypt Your Data in Isolated Mode</h4>
                  <div>
                     <p>Now that you have completed the keystore configuration and the PDB is configured in isolated mode, you can begin to encrypt data in the PDB.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-436F9034-B6B2-4AC8-8BD1-478B995E9F08" title="In isolated mode, the software keystore is associated with a PDB.">Configuring a Keystore and TDE Master Encryption Key in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-8A38CB3C-91C4-42DC-84A1-A71091EF50D9" name="GUID-8A38CB3C-91C4-42DC-84A1-A71091EF50D9"></a><h3 id="ASOAG-GUID-8A38CB3C-91C4-42DC-84A1-A71091EF50D9" class="sect3">Configuring a Hardware Keystore in Isolated Mode</h3>
               <div>
                  <p>There are two different types of hardware keystores that Oracle Database supports:&nbsp;hardware security modules (<code class="codeph">HSM</code>) or Oracle Key Vault (<code class="codeph">OKV</code>) keystores.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B51D971C-5D89-41AD-9AB3-53F4D15F7328">About Configuring a Hardware Keystore in Isolated Mode</a><br>You can configure a hardware keystore for a PDB when the PDB is configured in isolated mode.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-406B6D67-E7A8-42D9-AD94-00273A353366">Step 1: Configure the Hardware Security Module for the Isolated Mode PDB</a><br>To configure a third-party hardware security module, you must copy your vendorâ€™s PKCS#11 library to the correct location and follow your vendor's instructions.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-ED77939C-EAE6-402F-903B-3B4B2E52B3B3">Step 2: Open the Hardware Keystore in an Isolated Mode PDB</a><br>To open a hardware keystore in an isolated mode PDB, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE OPEN</code> clause.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-E94F2D64-A741-4D51-BBC0-632AFB39117D">Step 3: Set TDE Master Encryption Key in the Hardware Keystore of a PDB in Isolated Mode</a><br>After you have opened the hardware keystore in an isolated mode PDB, you are ready to set the TDE master encryption key for the PDB.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#unique_1553525171">Step 4: Encrypt Your Data in Isolated Mode</a><br>Now that you have completed the keystore configuration and the PDB is configured in isolated mode, you can begin to encrypt data in the PDB.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" title="Isolated mode enables you to create a keystore for each pluggable database (PDB).">Managing Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-B51D971C-5D89-41AD-9AB3-53F4D15F7328" name="GUID-B51D971C-5D89-41AD-9AB3-53F4D15F7328"></a><h4 id="ASOAG-GUID-B51D971C-5D89-41AD-9AB3-53F4D15F7328" class="sect4">About Configuring a Hardware Keystore in Isolated Mode</h4>
                  <div>
                     <p>You can configure a hardware keystore for a PDB when the PDB is configured in isolated mode.</p>
                     <p>To configure a hardware keystore for a PDB in isolated mode, you first must set the <code class="codeph">WALLET_ROOT</code> parameter. This is necessary for two reasons: first, to have support for migrating to a software keystore in the future, and second, because the configuration file for Oracle Key Vault is retrieved from a location under <code class="codeph">WALLET_ROOT</code>. Afterwards, you must set the <code class="codeph">KEYSTORE_CONFIGURATION</code> attribute of the <code class="codeph">TDE_CONFIGURATION</code>&nbsp;parameter to <code class="codeph">HSM</code> or <code class="codeph">OKV</code>, open the configured hardware keystore, and then set the TDE master encryption key for the PDB. After you complete these tasks, you can begin to encrypt data in the PDB.
                     </p>
                     <p>How you specify the <code class="codeph">IDENTIFIED BY</code> clause when you run the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement depends on the type of hardware keystore. For a hardware security module (<code class="codeph">HSM</code>), you use the following syntax: 
                     </p><pre class="oac_no_warn" dir="ltr">IDENTIFIED BY "<span class="italic">user_name</span>:<span class="italic">password</span>"</pre><p>For an Oracle Key Vault keystore, you can omit the <code class="codeph"><span class="codeinlineitalic">user_name</span></code> and colon, but you must enclose the password in quotation marks:
                     </p><pre class="oac_no_warn" dir="ltr">IDENTIFIED BY "<span class="italic">password</span>"</pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-8A38CB3C-91C4-42DC-84A1-A71091EF50D9" title="There are two different types of hardware keystores that Oracle Database supports:&nbsp;hardware security modules (HSM) or Oracle Key Vault (OKV) keystores.">Configuring a Hardware Keystore in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-406B6D67-E7A8-42D9-AD94-00273A353366" name="GUID-406B6D67-E7A8-42D9-AD94-00273A353366"></a><h4 id="ASOAG-GUID-406B6D67-E7A8-42D9-AD94-00273A353366" class="sect4">Step 1: Configure the Hardware Security Module for the Isolated Mode PDB</h4>
                  <div>
                     <p>To configure a third-party hardware security module, you must copy your vendorâ€™s PKCS#11 library to the correct location and follow your vendor's instructions.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291" title="To configure a third-party hardware security module, you must copy the PKCS#11 library to the correct location and follow your vendor's instructions.">Step 2: Configure the Hardware Security Module</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-8A38CB3C-91C4-42DC-84A1-A71091EF50D9" title="There are two different types of hardware keystores that Oracle Database supports:&nbsp;hardware security modules (HSM) or Oracle Key Vault (OKV) keystores.">Configuring a Hardware Keystore in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-ED77939C-EAE6-402F-903B-3B4B2E52B3B3" name="GUID-ED77939C-EAE6-402F-903B-3B4B2E52B3B3"></a><h4 id="ASOAG-GUID-ED77939C-EAE6-402F-903B-3B4B2E52B3B3" class="sect4">Step 2: Open the Hardware Keystore in an Isolated Mode PDB</h4>
                  <div>
                     <p>To open a hardware keystore in an isolated mode PDB, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE OPEN</code> clause.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin@hrpdb as syskm
Enter password: <span class="italic">password</span></pre><p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Open the hardware keystore by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY "<span class="italic">hardware_keystore_credentials</span>";
</pre><p>The type of hardware keystore determines how you specify the hardware keystore password. For hardware security modules, you must use the <code class="codeph"><span class="codeinlineitalic">user_name</span>:<span class="codeinlineitalic">password</span></code> syntax. For example:
                              </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY "psmith:<span class="italic">password</span>";

keystore altered.</pre><p>For an Oracle Key Vault keystore, you can only provide the password. No user name is allowed in the <code class="codeph">IDENTIFIED BY</code> clause. Enclose the password in double quotation marks.
                              </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY "<span class="italic">password</span>";</pre></div>
                        </li>
                        <li class="stepexpand"><span>Repeat this procedure each time you restart the database instance. </span><div>You must open the keystore of the CDB root first.</div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-CEDB143A-BC7E-43EF-AD41-59BD0ED36421" title="You must open the hardware keystore so that it is accessible to the database before you can perform any encryption or decryption.">About Opening Hardware Keystores</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-8A38CB3C-91C4-42DC-84A1-A71091EF50D9" title="There are two different types of hardware keystores that Oracle Database supports:&nbsp;hardware security modules (HSM) or Oracle Key Vault (OKV) keystores.">Configuring a Hardware Keystore in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E94F2D64-A741-4D51-BBC0-632AFB39117D" name="GUID-E94F2D64-A741-4D51-BBC0-632AFB39117D"></a><h4 id="ASOAG-GUID-E94F2D64-A741-4D51-BBC0-632AFB39117D" class="sect4">Step 3: Set TDE Master Encryption Key in the Hardware Keystore of a PDB in Isolated Mode</h4>
                  <div>
                     <p>After you have opened the hardware keystore in an isolated mode PDB, you are ready to set the TDE master encryption key for the PDB.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-749AECD4-9DBB-4D1E-A526-B3AC5659A653">Setting a New TDE Master Encryption Key in Isolated Mode</a><br>You should complete this procedure if you have not previously configured a hardware keystore for Transparent Data Encryption. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3A03BE98-A3DC-40AA-8181-0DFF3A8B1FD9">Migration of a Previously Configured Encryption Key in Isolated Mode</a><br>You must migrate the previously configured master encryption key if you previously configured a software keystore.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-8A38CB3C-91C4-42DC-84A1-A71091EF50D9" title="There are two different types of hardware keystores that Oracle Database supports:&nbsp;hardware security modules (HSM) or Oracle Key Vault (OKV) keystores.">Configuring a Hardware Keystore in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-749AECD4-9DBB-4D1E-A526-B3AC5659A653" name="GUID-749AECD4-9DBB-4D1E-A526-B3AC5659A653"></a><h5 id="ASOAG-GUID-749AECD4-9DBB-4D1E-A526-B3AC5659A653" class="sect5">Setting a New TDE Master Encryption Key in Isolated Mode</h5>
                     <div>
                        <p>You should complete this procedure if you have not previously configured a hardware keystore for Transparent Data Encryption. </p>
                        <ol>
                           <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>
                                 <p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Ensure that the database is open in <code class="codeph">READ WRITE</code> mode. </span><div>You can set the TDE master encryption key if <code class="codeph">OPEN_MODE</code> is set to <code class="codeph">READ WRITE</code>. To find the status, run the <code class="codeph">show pdbs</code> command.
                              </div>
                           </li>
                           <li class="stepexpand"><span>Set the new TDE master encryption key by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
[USING TAG '<span class="italic">tag</span>'] 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | "<span class="italic">hardware_keystore_credentials</span>"];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation if the keystore is closed if an auto-login keystore is configured and is currently open, or if a password-protected keystore is configured and is currently closed. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code> refers to the credentials for either an HSM or an Oracle Key Vault hardware keystore. For an HSM, specify the credentials using this format, enclosed in quotation marks and separating the components with a colon: <code class="codeph">â€œ<span class="codeinlineitalic">user_name</span>:<span class="codeinlineitalic">password</span>â€</code>, with <code class="codeph"><span class="codeinlineitalic">user_name</span></code> being the user who created the HSM and password being this userâ€™s password. For Oracle Key Vault, enter only the password of the user who created the keystore. Enclose this password with quotation marks.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
IDENTIFIED BY "psmith:<span class="italic">password</span>";

keystore altered.</pre></div>
                           </li>
                           <li class="stepexpand"><span>Confirm that the TDE master encryption key is set. </span><div><pre class="oac_no_warn" dir="ltr">SELECT MASTERKEY_ACTIVATED FROM V$DATABASE_KEY_INFO;</pre><p>The output should be <code class="codeph">YES</code>.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-E3DC7C57-A8F3-41D5-98FB-1DBE6EE10D1E" title="You must create a TDE master encryption key that is stored inside the hardware keystore.">About Setting the Hardware Keystore TDE Master Encryption Key</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-E94F2D64-A741-4D51-BBC0-632AFB39117D" title="After you have opened the hardware keystore in an isolated mode PDB, you are ready to set the TDE master encryption key for the PDB.">Step 3: Set TDE Master Encryption Key in the Hardware Keystore of a PDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-3A03BE98-A3DC-40AA-8181-0DFF3A8B1FD9" name="GUID-3A03BE98-A3DC-40AA-8181-0DFF3A8B1FD9"></a><h5 id="ASOAG-GUID-3A03BE98-A3DC-40AA-8181-0DFF3A8B1FD9" class="sect5">Migration of a Previously Configured Encryption Key in Isolated Mode</h5>
                     <div>
                        <p>You must migrate the previously configured master encryption key if you previously configured a software keystore.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB" title="You must migrate the previously configured TDE master encryption key if you previously configured a software keystore.">Migration of a Previously Configured TDE Master Encryption Key</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-E94F2D64-A741-4D51-BBC0-632AFB39117D" title="After you have opened the hardware keystore in an isolated mode PDB, you are ready to set the TDE master encryption key for the PDB.">Step 3: Set TDE Master Encryption Key in the Hardware Keystore of a PDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="unique_1553525171" name="unique_1553525171"></a><h4 id="ASOAG-unique_1553525171" class="sect4">Step 4: Encrypt Your Data in Isolated Mode</h4>
                  <div>
                     <p>Now that you have completed the keystore configuration and the PDB is configured in isolated mode, you can begin to encrypt data in the PDB.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="You can use Transparent Data Encryption to encrypt individual columns in database tables.">Encrypting Columns in Tables</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="You can perform encryption operations on both offline and online tablespaces and databases.">Encryption Conversions for Tablespaces and Databases</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-8A38CB3C-91C4-42DC-84A1-A71091EF50D9" title="There are two different types of hardware keystores that Oracle Database supports:&nbsp;hardware security modules (HSM) or Oracle Key Vault (OKV) keystores.">Configuring a Hardware Keystore in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" name="GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712"></a><h3 id="ASOAG-GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" class="sect3">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</h3>
               <div>
                  <p>After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.</p>
                  <p>To change the password of a hardware keystore, you must use the administrative interface of the hardware keystore. You cannot perform this operation by using the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B88A9733-EF15-4B8F-BD92-3947EA6D5CF6">Changing the Keystore Password in Isolated Mode</a><br>You can change the password of a software keystore when the PDB is in isolated mode.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-4044CC16-806E-4681-ADB5-41BAD4CAA04B">Backing Up a Password-Protected Software Keystore in Isolated Mode</a><br>The <code class="codeph">BACKUP KEYSTORE</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement backs up a password-protected software keystore.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-D2869448-212E-44CB-8BAA-2A337369DFCD">Merging Software Keystores in Isolated Mode</a><br>In isolated mode, you can merge software keystores.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-04650B68-D7CE-431A-9942-9F7496360FC0">Closing Keystores in Isolated Mode</a><br>You can close both software and hardware keystores in isolated mode, unless the system tablespace is encrypted. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-92CFFF56-C4C6-471B-9DFB-1CC9CB5FE3FD">Creating a User-Defined TDE Master Encryption Key in Isolated Mode</a><br>To create a user-defined TDE master encryption key, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET | CREATE [ENCRYPTION] KEY</code> clause. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-D5A0169C-CB0B-43CB-9721-3BAF1A851C55">Creating a TDE Master Encryption Key for Later Use in Isolated Mode</a><br>A keystore must be open before you can create a TDE master encryption key for use later on in isolated mode.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-A89BB885-B46C-4A86-B55E-29DB08A4FCB2">Activating a TDE Master Encryption Key in Isolated Mode</a><br>To activate a TDE master encryption key in isolated mode, you must open the keystore and use <code class="codeph">ADMINISTER KEY MANAGEMENT</code> with the <code class="codeph">USE KEY</code> clause.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-1BC74A51-2930-4B07-880F-0EC761351A22">Rekeying the TDE Master Encryption Key in Isolated Mode</a><br>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEY</code> clause to rekey a TDE master encryption key.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5F84010F-F74C-41FC-900F-741185B29AA0">Moving a TDE Master Encryption Key into a New Keystore in Isolated Mode</a><br>In isolated mode, you can move an existing TDE master encryption key into a new keystore from an existing software password keystore. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3178B6A8-E950-479A-B5E1-500F8FF56C7A">Creating a Custom Attribute Tag in Isolated Mode</a><br>To create a custom attribute tag in isolated mode, you must use the <code class="codeph">SET TAG</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-D678DC98-E77C-4F5D-8E5C-45D5FED0A5AF">Exporting and Importing the TDE Master Encryption Key in Isolated Mode</a><br>You can export and import the TDE master encryption key in different ways in isolated mode.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-F7052961-ECD0-4AD5-BC14-5E0715C9DE33">Storing Oracle Database Secrets in Isolated Mode</a><br>Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-0E28EE78-196D-424C-B861-2CDC2181C40A">Migrating Keystores in Isolated Mode</a><br>You can perform migration and reverse migration operations between software keystores and hardware keystores in isolated mode. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-717E6E9A-CC84-493F-B5C4-675729DC6ECE">Automatically Removing Inactive TDE Master Encryption Keys in Isolated Mode</a><br>In isolated mode, the <code class="codeph">REMOVE_INACTIVE_STANDBY_TDE_MASTER_KEY</code> initialization parameter can configure the automatic removal of inactive master encryption keys.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-91E39FB9-025C-4653-AE42-B68D1F22798F">Uniting a Pluggable Database Keystore</a><br>Uniting a PDB keystore moves the TDE master encryption keys from the PDB keystore into the keystore of the CDB root. This enables the administrator of the keystore of the CDB root to manage&nbsp;the keys. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-7B39A544-0B5D-4BE5-9D33-33F0D74D72DD">Creating a Keystore When the PDB Is Closed</a><br>When you create a keystore in a PDB that is closed, the new keystore is empty and the PDB is converted to isolated mode. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" title="Isolated mode enables you to create a keystore for each pluggable database (PDB).">Managing Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-B88A9733-EF15-4B8F-BD92-3947EA6D5CF6" name="GUID-B88A9733-EF15-4B8F-BD92-3947EA6D5CF6"></a><h4 id="ASOAG-GUID-B88A9733-EF15-4B8F-BD92-3947EA6D5CF6" class="sect4">Changing the Keystore Password in Isolated Mode</h4>
                  <div>
                     <p>You can change the password of a software keystore when the PDB is in isolated mode.</p>
                     <p>To change the password of a hardware keystore, you must use the administrative interface of the hardware keystore. You cannot perform this operation by using the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-57297DAE-186B-4B7E-89FF-9EEB9C433CE8">Changing the Password-Protected Software Keystore Password in Isolated Mode</a><br>To change the password of a password-protected software keystore in isolated mode, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-35D0BAD0-5302-46CB-8353-A7D5EEB76756">Changing the Password of a Hardware Keystore in Isolated Mode</a><br>To change the password of a hardware keystore,&nbsp;you must close the hardware keystore and then change&nbsp;the password from the hardware keystoreâ€™s management interface.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-57297DAE-186B-4B7E-89FF-9EEB9C433CE8" name="GUID-57297DAE-186B-4B7E-89FF-9EEB9C433CE8"></a><h5 id="ASOAG-GUID-57297DAE-186B-4B7E-89FF-9EEB9C433CE8" class="sect5">Changing the Password-Protected Software Keystore Password in Isolated Mode</h5>
                     <div>
                        <p>To change the password of a password-protected software keystore in isolated mode, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                              </li>
                              <li>
                                 <p>Change the password for the keystore by using the following syntax: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ALTER KEYSTORE PASSWORD 
[FORCE KEYSTORE] 
IDENTIFIED BY
<span class="italic">old_password</span> SET <span class="italic">new_password</span> 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation if the keystore is closed if an auto-login keystore is configured and is currently open, or if a password-protected keystore is configured and is currently closed. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">old_password</code></span> is the current keystore password that you want to change.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">new_password</code></span> is the new password that you set for the keystore.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>The following example creates a backup of the keystore and then changes the keystore password:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ALTER KEYSTORE PASSWORD 
IDENTIFIED BY
<span class="italic">old_password</span> SET <span class="italic">new_password</span> 
WITH BACKUP USING 'pwd_change';

keystore altered.</pre><p>This example performs the same operation but uses the <code class="codeph">FORCE KEYSTORE</code> clause in case the auto-login software keystore is in use or the password-protected software keystore is closed.
                                 </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ALTER KEYSTORE PASSWORD
FORCE KEYSTORE 
IDENTIFIED BY
<span class="italic">old_password</span> SET <span class="italic">new_password</span> 
WITH BACKUP USING 'pwd_change';

keystore altered.</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699" title="Many ADMINISTER KEY MANAGEMENT operations require access to a keystore password, for both software and hardware keystores.">Performing Operations That Require a Keystore Password</a></li>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-56595198-9FD2-4857-9BB9-D908BA89904C" title="Oracle Database enables you to easily change password-protected software keystore passwords.">Changing the Password of a Software Keystore</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B88A9733-EF15-4B8F-BD92-3947EA6D5CF6" title="You can change the password of a software keystore when the PDB is in isolated mode.">Changing the Keystore Password in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-35D0BAD0-5302-46CB-8353-A7D5EEB76756" name="GUID-35D0BAD0-5302-46CB-8353-A7D5EEB76756"></a><h5 id="ASOAG-GUID-35D0BAD0-5302-46CB-8353-A7D5EEB76756" class="sect5">Changing the Password of a Hardware Keystore in Isolated Mode</h5>
                     <div>
                        <p>To change the password of a hardware keystore,&nbsp;you must close the hardware keystore and then change&nbsp;the password from the hardware keystoreâ€™s management interface.</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                                 </p>
                              </li>
                              <li>
                                 <p>Close the hardware keystore.</p>
                                 <p>For example, for an HSM:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY "psmith:<span class="italic">password</span>";
</pre><p>For a hardware keystore whose password is stored externally:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY EXTERNAL STORE;</pre></li>
                              <li>
                                 <p>From the hardware security module management interface, change the hardware security module password. </p>
                              </li>
                              <li>
                                 <p>Update the credentials of the HSM in the external store to use "<code class="codeph"><span class="codeinlineitalic">user_name</span>:<span class="codeinlineitalic">password</span>"</code>. 
                                 </p>
                                 <p>Currently, the external store contains the old HSM credentials, which would no longer work.</p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
UPDATE SECRET '<span class="italic">user_name</span>:<span class="italic">password</span>' 
FOR CLIENT 'TDE_WALLET' 
TO LOCAL AUTO_LOGIN KEYSTORE '/etc/ORACLE/WALLETS/orcl/external_store';</pre></li>
                              <li>
                                 <p>In SQL*Plus, open the hardware keystore.</p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY "psmith:<span class="italic">new_password</span>";
</pre><p>For a hardware keystore whose password is stored externally:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY EXTERNAL STORE;</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699" title="Many ADMINISTER KEY MANAGEMENT operations require access to a keystore password, for both software and hardware keystores.">Performing Operations That Require a Keystore Password</a></li>
                              <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-F7052961-ECD0-4AD5-BC14-5E0715C9DE33" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets in Isolated Mode</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B88A9733-EF15-4B8F-BD92-3947EA6D5CF6" title="You can change the password of a software keystore when the PDB is in isolated mode.">Changing the Keystore Password in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-4044CC16-806E-4681-ADB5-41BAD4CAA04B" name="GUID-4044CC16-806E-4681-ADB5-41BAD4CAA04B"></a><h4 id="ASOAG-GUID-4044CC16-806E-4681-ADB5-41BAD4CAA04B" class="sect4">Backing Up a Password-Protected Software Keystore in Isolated Mode</h4>
                  <div>
                     <p>The <code class="codeph">BACKUP KEYSTORE</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement backs up a password-protected software keystore.
                     </p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                              </p>
                              <p>For example: </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin@hrpdb as syskm
Enter password: <span class="italic">password</span>
Connected.
</pre><p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                              </p>
                           </li>
                           <li>
                              <p>Back up the keystore by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE 
[USING '<span class="italic">backup_identifier</span>'] 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">software_keystore_password</span>] 
[TO '<span class="italic">keystore_location</span>'];
</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">USING</code> <span class="italic"><code class="codeph">backup_identifier</code></span> is an optional string that you can provide to identify the backup. Enclose this identifier in single quotation marks (<code class="codeph">'&nbsp;'</code>). This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><code class="codeph">_emp_key_backup.p12</code>).
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">IDENTIFIED BY</code> is required for the <code class="codeph">BACKUP KEYSTORE</code> operation on a password-protected keystore because although the backup is simply a copy of the existing keystore, the status of the TDE master encryption key in the password-protected keystore must be set to <code class="codeph">BACKED UP</code> and for this change the keystore password is required.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">keystore_location</code></span> is the path at which the backup keystore is stored. This setting is restricted to the PDB when the PDB lockdown profile <code class="codeph">EXTERNAL_FILE_ACCESS</code> setting is blocked in the PDB or when the <code class="codeph">PATH_PREFIX</code> variable was set when the PDB was created. If you do not specify the <span class="italic"><code class="codeph">keystore_location</code></span>, then the backup is created in the same directory as the original keystore. Enclose this location in single quotation marks (<code class="codeph">' '</code>).
                                    </p>
                                 </li>
                              </ul>
                              <p>The following example backs up a software keystore in the same location as the source keystore. </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE 
USING 'hr.emp_keystore' 
FORCE KEYSTORE 
IDENTIFIED BY 
'<span class="italic">software_keystore_password</span>';

keystore altered.
</pre><p>In the following version, the password for the keystore is stored externally, so the <code class="codeph">EXTERNAL STORE</code> clause is used.
                              </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE 
USING 'hr.emp_keystore' 
FORCE KEYSTORE 
IDENTIFIED BY EXTERNAL STORE;</pre><p>After you run this statement, an <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">identifier</code></span><code class="codeph">.p12</code> file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">time-stamp</code></span><code class="codeph">_hr.emp_keystore.p12</code>) appears in the keystore backup location.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" title="When you back up a password-protected software keystore, you can create a backup identifier string to describe the backup type.">Backing Up Password-Protected Software Keystores</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D2869448-212E-44CB-8BAA-2A337369DFCD" name="GUID-D2869448-212E-44CB-8BAA-2A337369DFCD"></a><h4 id="ASOAG-GUID-D2869448-212E-44CB-8BAA-2A337369DFCD" class="sect4">Merging Software Keystores in Isolated Mode</h4>
                  <div>
                     <p>In isolated mode, you can merge software keystores.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-1A5DE98C-B676-40D2-A6C1-C4D08F25319F">Merging One Software Keystore into an Existing Software Keystore in Isolated Mode</a><br>In isolated mode, you can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">MERGE KEYSTORE</code> clause to merge one software keystore into another existing software keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-F1550EF0-DC2B-4247-9299-1B33E2392D79">Merging Two Software Keystores into a Third New Keystore in Isolated Mode</a><br>In isolated mode, you can merge two software keystores into a third new keystore, so that the two existing keystores are not changed and the new keystore contains the keys of both source keystores.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-1A5DE98C-B676-40D2-A6C1-C4D08F25319F" name="GUID-1A5DE98C-B676-40D2-A6C1-C4D08F25319F"></a><h5 id="ASOAG-GUID-1A5DE98C-B676-40D2-A6C1-C4D08F25319F" class="sect5">Merging One Software Keystore into an Existing Software Keystore in Isolated Mode</h5>
                     <div>
                        <p>In isolated mode, you can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">MERGE KEYSTORE</code> clause to merge one software keystore into another existing software keystore.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                                 </p>
                              </li>
                              <li>
                                 <p>Merge the software keystores by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE '<span class="italic">keystore1_location</span>' 
[IDENTIFIED BY <span class="italic">software_keystore1_password</span>] 
INTO EXISTING KEYSTORE '<span class="italic">keystore2_location</span>' 
IDENTIFIED BY <span class="italic">software_keystore2_password</span> 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>]];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore1_location</code></span> is the directory location of the first keystore, which will be left unchanged after the merge. Enclose this path in single quotation marks (<code class="codeph">' '</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">IDENTIFIED BY</code> clause is required for the first keystore if it is a password-protected keystore. <span class="italic"><code class="codeph">software_keystore1_password</code></span> is the password for the first keystore. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore2_location</code></span> is the directory location of the second keystore into which the first keystore is to be merged. Enclose this path in single quotation marks (<code class="codeph">' '</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore2_password</code></span> is the password for the second keystore.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                           <p>The target keystore (<code class="codeph"><span class="codeinlineitalic">keystore2</span></code>) remains a password-protected keystore after the keystore merge operation.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0CF462D4-4920-480F-B967-4569F4459C86" title="You can merge any combination of software keystores, but the merged keystore must be password-protected. It can have a password that is different from the constituent keystores.">About Merging Software Keystores</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-D2869448-212E-44CB-8BAA-2A337369DFCD" title="In isolated mode, you can merge software keystores.">Merging Software Keystores in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-F1550EF0-DC2B-4247-9299-1B33E2392D79" name="GUID-F1550EF0-DC2B-4247-9299-1B33E2392D79"></a><h5 id="ASOAG-GUID-F1550EF0-DC2B-4247-9299-1B33E2392D79" class="sect5">Merging Two Software Keystores into a Third New Keystore in Isolated Mode</h5>
                     <div>
                        <p>In isolated mode, you can merge two software keystores into a third new keystore, so that the two existing keystores are not changed and the new keystore contains the keys of both source keystores.</p>
                        <ol>
                           <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>
                                 <p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Merge the keystores by using the following syntax: </span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE '<span class="italic">keystore1_location</span>' 
[IDENTIFIED BY <span class="italic">software_keystore1_password</span>] AND KEYSTORE '<span class="italic">keystore2_location</span>' 
[IDENTIFIED BY <span class="italic">software_keystore2_password</span>] 
INTO NEW KEYSTORE '<span class="italic">keystore3_location</span>' 
IDENTIFIED BY <span class="italic">software_keystore3_password</span>;
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore1_location</code></span> is the directory location of the first keystore, which will be left unchanged after the merge. Enclose this path in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">IDENTIFIED BY</code> clause is required for the first keystore if it is a password-protected keystore. <span class="italic"><code class="codeph">software_keystore1_password</code></span> is the current password for the first keystore. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore2_location</code></span> is the directory location of the second keystore. Enclose this path in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">IDENTIFIED BY</code> clause is required for the second keystore if it is a password-protected keystore. <span class="italic"><code class="codeph">software_keystore2_password</code></span> is the current password for the second keystore. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore3_location</code></span> specifies the directory location of the new, merged keystore. Enclose this path in single quotation marks (<code class="codeph">' '</code>). If there is already an existing keystore at this location, the command exits with an error. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore3_password</code></span> is the new password for the merged keystore. 
                                       </p>
                                    </li>
                                 </ul>
                                 <p>The following example merges an auto-login software keystore with a password-protected keystore to create a merged password-protected keystore at a new location:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE '/etc/ORACLE/KEYSTORE/DB1' 
AND KEYSTORE '/etc/ORACLE/KEYSTORE/DB2' 
IDENTIFIED BY <span class="italic">existing_password_for_keystore_2</span> 
INTO NEW KEYSTORE '/etc/ORACLE/KEYSTORE/DB3' 
IDENTIFIED BY <span class="italic">new_password_for_keystore_3</span>;

keystore altered.</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0CF462D4-4920-480F-B967-4569F4459C86" title="You can merge any combination of software keystores, but the merged keystore must be password-protected. It can have a password that is different from the constituent keystores.">About Merging Software Keystores</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-D2869448-212E-44CB-8BAA-2A337369DFCD" title="In isolated mode, you can merge software keystores.">Merging Software Keystores in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-04650B68-D7CE-431A-9942-9F7496360FC0" name="GUID-04650B68-D7CE-431A-9942-9F7496360FC0"></a><h4 id="ASOAG-GUID-04650B68-D7CE-431A-9942-9F7496360FC0" class="sect4">Closing Keystores in Isolated Mode</h4>
                  <div>
                     <p>You can close both software and hardware keystores in isolated mode, unless the system tablespace is encrypted. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-483CBCCB-8A55-4739-B0B8-F5633C374BE8">Closing a Software Keystore in Isolated Mode</a><br>You can close password-protected keystores, auto-login keystores, and local auto-login software keystores in isolated mode. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-F71388AF-28E9-42BB-86CF-99C72B6D81C4">Closing a Hardware Keystore in Isolated Mode</a><br>To close a hardware keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE CLOSE</code> clause.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-483CBCCB-8A55-4739-B0B8-F5633C374BE8" name="GUID-483CBCCB-8A55-4739-B0B8-F5633C374BE8"></a><h5 id="ASOAG-GUID-483CBCCB-8A55-4739-B0B8-F5633C374BE8" class="sect5">Closing a Software Keystore in Isolated Mode</h5>
                     <div>
                        <p>You can close password-protected keystores, auto-login keystores, and local auto-login software keystores in isolated mode. </p>
                        <div class="section">In the case of an auto-login keystore, which opens automatically when it is accessed, you must first move it to a new location where it cannot&nbsp;be automatically opened, then you must manually close it. You must do this if you are changing your configuration from an auto-login keystore to a password-protected keystore: you change the configuration to stop using the auto-login keystore (by moving the auto-login keystore to another location where&nbsp;it cannot be automatically opened), and then closing the auto-login keystore.</div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                           <li class="stepexpand"><span>Close the software keystore by using the following syntax. </span><div>Note that the only difference between the following two <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE</code> statements is that a password must be provided for a password-protected keystore. 
                              </div>
                              <ul>
                                 <li>For a password-protected software keystore: <pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">software_keystore_password</span>];</pre><p>Closing a password-protected keystore disables all encryption and decryption operations. Any attempt to encrypt or decrypt data or access encrypted data results in an error.</p>
                                 </li>
                                 <li>For an auto-login or local auto-login software keystore: <pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE;</pre><p>The result of this statement will not necessarily be that the keystore status will change to <code class="codeph">CLOSED</code>, because unless you also moved the <code class="codeph">cwallet.sso</code> file to a location that Oracle Database cannot find, then a background job or background process could automatically re-open the auto-login keystore. This can cause the status to potentially always appear to be <code class="codeph">OPEN</code> even after the <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE</code> statement completed successfully. 
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4" title="After you open a keystore, it remains open until you shut down the database instance.">About Closing Keystores</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-04650B68-D7CE-431A-9942-9F7496360FC0" title="You can close both software and hardware keystores in isolated mode, unless the system tablespace is encrypted.">Closing Keystores in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-F71388AF-28E9-42BB-86CF-99C72B6D81C4" name="GUID-F71388AF-28E9-42BB-86CF-99C72B6D81C4"></a><h5 id="ASOAG-GUID-F71388AF-28E9-42BB-86CF-99C72B6D81C4" class="sect5">Closing a Hardware Keystore in Isolated Mode</h5>
                     <div>
                        <p>To close a hardware keystore, you must use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEYSTORE CLOSE</code> clause.
                        </p>
                        <div class="section">For an Oracle Key Vault keystore, you can only provide the password. No user name is allowed in the <code class="codeph">IDENTIFIED BY</code> clause. Enclose the password in double quotation marks.
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>
                                 <p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Close the hardware keystore by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY [EXTERNAL STORE | "<span class="italic">hardware_keystore_credentials</span>"];</pre><p>For example, for an HSM:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE 
IDENTIFIED BY "psmith:<span class="italic">password</span>";</pre></div>
                           </li>
                        </ol>
                        <div class="section">Closing a keystore disables all encryption and decryption operations. Any attempt to encrypt or decrypt data or access encrypted data results in an error.</div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4" title="After you open a keystore, it remains open until you shut down the database instance.">About Closing Keystores</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-04650B68-D7CE-431A-9942-9F7496360FC0" title="You can close both software and hardware keystores in isolated mode, unless the system tablespace is encrypted.">Closing Keystores in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-92CFFF56-C4C6-471B-9DFB-1CC9CB5FE3FD" name="GUID-92CFFF56-C4C6-471B-9DFB-1CC9CB5FE3FD"></a><h4 id="ASOAG-GUID-92CFFF56-C4C6-471B-9DFB-1CC9CB5FE3FD" class="sect4">Creating a User-Defined TDE Master Encryption Key in Isolated Mode</h4>
                  <div>
                     <p>To create a user-defined TDE master encryption key, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET | CREATE [ENCRYPTION] KEY</code> clause. 
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                        <li class="stepexpand"><span>Create the user-defined TDE master encryption key by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET | CREATE [ENCRYPTION] KEY
'<span class="italic">mkid</span>:<span class="italic">mk</span> | <span class="italic">mk</span>' 
[USING ALGORITHM '<span class="italic">algorithm</span>'] 
[FORCE KEYSTORE]
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];</pre><p>In this specification: </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">SET | CREATE</code> : Enter <code class="codeph">SET</code> if you want to create the master and activate the TDE master encryption key now, or enter <code class="codeph">CREATE</code> if you want to create the key for later use, without activating it yet. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">mkid</span></code> and <code class="codeph"><span class="codeinlineitalic">mk</span></code>: 
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph"><span class="codeinlineitalic">mkid</span></code>, the TDE master encryption key ID, is a 16&#x2013;byte hex-encoded value that you can specify or have Oracle Database generate. 
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph"><span class="codeinlineitalic">mk</span></code>, the TDE master encryption key, is a hex-encoded value that you can specify or have Oracle Database generate, either 32 bytes (for the for <code class="codeph">AES256</code>, <code class="codeph">ARIA256</code>, and <code class="codeph">GOST256</code> algorithms) or 16 bytes (for the <code class="codeph">SEED128</code> algorithm). 
                                          </p>
                                       </li>
                                    </ul>
                                    <p>If you omit the <code class="codeph"><span class="codeinlineitalic">mkid</span>:<span class="codeinlineitalic">mk</span>|<span class="codeinlineitalic">mkid</span></code> clause but include the <code class="codeph"><span class="codeinlineitalic">mk</span></code> value, then Oracle Database generates the <code class="codeph"><span class="codeinlineitalic">mkid</span></code> for the <code class="codeph"><span class="codeinlineitalic">mk</span></code>. 
                                    </p>
                                    <p>If you omit the entire <code class="codeph"><span class="codeinlineitalic">mkid</span>:<span class="codeinlineitalic">mk</span>|<span class="codeinlineitalic">mkid</span></code> clause, then Oracle Database generates these values for you. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">USING ALGORITHM</code>: Specify one of the following supported algorithms:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">AES256</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">ARIA256</code> 
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">SEED128</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">GOST256</code></p>
                                       </li>
                                    </ul>
                                    <p>If you omit the algorithm, then the default, <code class="codeph">AES256</code>, is used. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                    </p>
                                 </li>
                              </ul>
                              <p>The following example includes a user-created TDE master encryption key but no TDE master encryption key ID, so that the TDE master encryption key ID is generated:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
'3D432109DF88967A541967062A6F4E460E892318E307F017BA048707B402493C' 
USING ALGORITHM 'GOST256'
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre><p>The next example creates user-defined keys for both the master encryption ID and the TDE master encryption key. It omits the algorithm specification, so the default algorithm <code class="codeph">AES256</code> is used.
                              </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE ENCRYPTION KEY 
'10203040506070801112131415161718:3D432109DF88967A541967062A6F4E460E892318E307F017BA048707B402493C' 
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="By default, Transparent Data Encryption (TDE) Column encryption uses the Advanced Encryption Standard (AES).">Supported Encryption and Integrity Algorithms</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D5A0169C-CB0B-43CB-9721-3BAF1A851C55" name="GUID-D5A0169C-CB0B-43CB-9721-3BAF1A851C55"></a><h4 id="ASOAG-GUID-D5A0169C-CB0B-43CB-9721-3BAF1A851C55" class="sect4">Creating a TDE Master Encryption Key for Later Use in Isolated Mode</h4>
                  <div>
                     <p>A keystore must be open before you can create a TDE master encryption key for use later on in isolated mode.</p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span><div>
                              <p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create the TDE master encryption key by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEY 
[USING TAG '<span class="italic">tag</span>'] 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification: </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">IDENTIFIED BY</code> is required for the <code class="codeph">BACKUP KEYSTORE</code> operation on a password-protected keystore because although the backup is simply a copy of the existing keystore, the status of the TDE master encryption key in the password-protected keystore must be set to <code class="codeph">BACKED UP</code> and for this change the keystore password is required.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">keystore_location</code></span> is the path at which the backup keystore is stored. This setting is restricted to the PDB when the PDB lockdown profile <code class="codeph">EXTERNAL_FILE_ACCESS</code> setting is blocked in the PDB or when the <code class="codeph">PATH_PREFIX</code> variable was not set when the PDB was created. If you do not specify the <span class="italic"><code class="codeph">keystore_location</code></span>, then the backup is created in the same directory as the original keystore. Enclose this location in single quotation marks (<code class="codeph">' '</code>).
                                    </p>
                                 </li>
                              </ul>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEY 
FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">keystore_password</span>
WITH BACKUP;</pre></div>
                        </li>
                        <li class="stepexpand"><span>If necessary, activate the TDE master encryption key.</span><ol type="a">
                              <li class="substepexpand"><span>Find the key ID.</span><div><pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V$ENCRYPTION_KEYS; 

KEY_ID
----------------------------------------------------
AWsHwVYC2U+Nv3RVphn/yAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</pre></div>
                              </li>
                              <li class="substepexpand"><span>Use this key ID to activate the key. </span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT USE KEY 
'AWsHwVYC2U+Nv3RVphn/yAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' 
USING TAG 'quarter:second;description:Activate Key on standby' 
IDENTIFIED BY <span class="italic">password</span> 
WITH BACKUP;</pre></div>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" title="You can create a TDE master encryption key that can be activated at a later date.">Creating TDE Master Encryption Keys for Later Use</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-A89BB885-B46C-4A86-B55E-29DB08A4FCB2" name="GUID-A89BB885-B46C-4A86-B55E-29DB08A4FCB2"></a><h4 id="ASOAG-GUID-A89BB885-B46C-4A86-B55E-29DB08A4FCB2" class="sect4">Activating a TDE Master Encryption Key in Isolated Mode</h4>
                  <div>
                     <p>To activate a TDE master encryption key in isolated mode, you must open the keystore and use <code class="codeph">ADMINISTER KEY MANAGEMENT</code> with the <code class="codeph">USE KEY</code> clause.
                     </p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>Query the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> view to find the key identifier. 
                              </p>
                              <p>For example: </p><pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V$ENCRYPTION_KEYS; 

KEY_ID
----------------------------------------------------
ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
</pre></li>
                           <li>
                              <p>Use this key identifier to activate the TDE master encryption key by using the following syntax: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT USE KEY '<span class="italic">key_identifier_from_V$ENCRYPTION_KEYS</span>' 
[USING TAG '<span class="italic">tag</span>'] 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification: </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                    </p>
                                 </li>
                              </ul>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT USE KEY 'ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span>
WITH BACKUP;</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0B645D42-A7FE-4199-9A88-AFD416F1ECF1" title="You can activate a previously created or imported TDE master encryption key by using the USE KEY clause of ADMINSTER KEY MANAGEMENT.">About Activating TDE Master Encryption Keys</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-1BC74A51-2930-4B07-880F-0EC761351A22" name="GUID-1BC74A51-2930-4B07-880F-0EC761351A22"></a><h4 id="ASOAG-GUID-1BC74A51-2930-4B07-880F-0EC761351A22" class="sect4">Rekeying the TDE Master Encryption Key in Isolated Mode</h4>
                  <div>
                     <p>You can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">SET KEY</code> clause to rekey a TDE master encryption key.
                     </p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                              </p>
                              <p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                              </p>
                           </li>
                           <li>
                              <p>If you are rekeying the TDE master encryption key for a keystore that has auto login enabled, then ensure that both the auto login keystore, identified by the <code class="codeph">.sso</code> file, and the encryption keystore, identified by the <code class="codeph">.p12</code> file, are present.
                              </p>
                              <p>You can find the location of these files by querying the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view. To find the <code class="codeph">WRL_PARAMETER</code> values for all of the database instances, query the <code class="codeph">GV$ENCRYPTION_WALLET</code> view.
                              </p>
                           </li>
                           <li>
                              <p>Rekey the TDE master encryption key by using the following syntax: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET [ENCRYPTION] KEY 
[FORCE KEYSTORE]
[USING TAG '<span class="italic">tag_name</span>'] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="italic"><code class="codeph">tag</code></span> is the associated attributes and information that you define. Enclose this setting in single quotation marks (<code class="codeph">' '</code>).
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">keystore_password</code></span> is the password that was created for this keystore. 
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP USING 'emp_key_backup';

keystore altered.
</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B" title="Oracle Database uses a unified TDE Master Encryption Key for both TDE column encryption and TDE tablespace encryption.">About Rekeying the TDE Master Encryption Key</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-5F84010F-F74C-41FC-900F-741185B29AA0" name="GUID-5F84010F-F74C-41FC-900F-741185B29AA0"></a><h4 id="ASOAG-GUID-5F84010F-F74C-41FC-900F-741185B29AA0" class="sect4">Moving a TDE Master Encryption Key into a New Keystore in Isolated Mode</h4>
                  <div>
                     <p>In isolated mode, you can move an existing TDE master encryption key into a new keystore from an existing software password keystore. </p>
                     <div class="section">This feature enables you to move a subset, or all, of a keystoreâ€™s keys into a new keystore. After you move the key or keys to the new keystore and then back up the old keystore, optionally you then can delete this old keystore. </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                        <li class="stepexpand"><span>Query the <code class="codeph">CREATION_TIME</code> and <code class="codeph">KEY_ID</code> columns of the <code class="codeph">V$ENCRYPTION_KEYS</code> view to find the key identifier of the key that you want to move.</span><div>For example:<pre class="oac_no_warn" dir="ltr">SELECT CREATION_TIME, KEY_ID FROM V$ENCRYPTION_KEYS; 

CREATION TIME
----------------------------------------------------
22-SEP-17 08.55.12.956170 PM +00:00

KEY_ID
----------------------------------------------------
ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</pre></div>
                        </li>
                        <li class="stepexpand"><span>Move the key into a new keystore by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT 
MOVE [ENCRYPTION] KEYS
TO NEW KEYSTORE '<span class="italic">keystore_location1</span>'
IDENTIFIED BY <span class="italic">keystore1_password</span>
FROM [FORCE] KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span>
[WITH IDENTIFIER IN
{ '<span class="italic">key_identifier</span>' [, '<span class="italic">key_identifier</span>' ]... | ( <span class="italic">subquery</span> ) }]
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>'] ];</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore_location1</span></code> is the path to the <code class="codeph">wallet</code> directory that will store the new keystore <code class="codeph">.p12</code> file. By default, this directory is <code class="codeph">$ORACLE_BASE/admin/<span class="codeinlineitalic">db_unique_name</span>/wallet</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FORCE</code> temporarily opens the keystore for this operation. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore_password</span></code> is the password for the keystore from which the key is moving.
                                    </p>
                                 </li>
                              </ul>
                              <p>For example: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT MOVE KEYS 
TO NEW KEYSTORE '$ORACLE_BASE/admin/orcl/wallet' 
IDENTIFIED BY <span class="italic">keystore_password</span> 
FROM FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH IDENTIFIER IN 
(SELECT KEY_ID FROM V$ENCRYPTION_KEYS WHERE ROWNUM &lt; 2)
WITH BACKUP;</pre></div>
                           <div>After the keys are moved to the new keystore, they no longer exist in the old keystore. </div>
                        </li>
                        <li class="stepexpand"><span> To delete the old keystore, go to the <code class="codeph">wallet</code> directory and do the following: </span><ol type="a">
                              <li><span>Back up the <code class="codeph">.p12</code> file containing the keystore that you want to delete. </span></li>
                              <li><span>Manually delete the <code class="codeph">.p12</code> file containing the keystore.</span></li>
                           </ol>
                           <div>To find the location of the keystore, open the keystore, and then query the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view.
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F" title="Oracle strongly recommends that you do not delete keystores until you have moved the keystore encryption key to a new keystore.">Dangers of Deleting Keystores</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-3178B6A8-E950-479A-B5E1-500F8FF56C7A" name="GUID-3178B6A8-E950-479A-B5E1-500F8FF56C7A"></a><h4 id="ASOAG-GUID-3178B6A8-E950-479A-B5E1-500F8FF56C7A" class="sect4">Creating a Custom Attribute Tag in Isolated Mode</h4>
                  <div>
                     <p>To create a custom attribute tag in isolated mode, you must use the <code class="codeph">SET TAG</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement. 
                     </p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>If necessary, query the <code class="codeph">TAG</code> column of the <code class="codeph">V$ENCRYPTION_KEY</code> dynamic view to find a listing of existing tags for the TDE master encryption keys.
                              </p>
                              <p>When you create a new tag for a TDE master encryption key, it overwrites the existing tag for that TDE master encryption key.</p>
                           </li>
                           <li>
                              <p>Create the custom attribute tag by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET TAG 'tag' 
FOR '<span class="italic">master_key_identifier</span>' 
[FORCE KEYSTORE] 
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification: </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="italic"><code class="codeph">tag</code></span> is the associated attributes or information that you define. Enclose this information in single quotation marks (<code class="codeph">' '</code>).
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">master_key_identifier</code></span> identifies the TDE master encryption key for which the <span class="italic"><code class="codeph">tag</code></span> is set. To find a list of TDE master encryption key identifiers, query the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> dynamic view. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">IDENTIFIED BY</code> can be one of the following settings:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">EXTERNAL STORE</code> uses the keystore password stored in the external store to perform the keystore operation.
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">keystore_password</code></span> is the password that was created for this keystore.
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">backup_identifier</code></span> defines the tag values. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;')</code> and separate each value with a colon.
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                              <p>For example, to create a tag that uses two values, one to capture a specific session ID and the second to capture a specific terminal ID: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
USING TAG 'sessionid=3205062574:terminal=xcvt' 
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP;

keystore altered.
</pre><p>Both the session ID (<code class="codeph">3205062574</code>) and terminal ID (<code class="codeph">xcvt</code>) can derive their values by using either the <code class="codeph">SYS_CONTEXT</code> function with the <code class="codeph">USERENV</code> namespace, or by using the <code class="codeph">USERENV</code> function. 
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-2934A241-AB48-4EEF-8A65-3638209931AB" title="Attribute tags enable you to monitor specific activities users perform, such as accessing a particular terminal ID.">About Creating Custom Attribute Tags</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D678DC98-E77C-4F5D-8E5C-45D5FED0A5AF" name="GUID-D678DC98-E77C-4F5D-8E5C-45D5FED0A5AF"></a><h4 id="ASOAG-GUID-D678DC98-E77C-4F5D-8E5C-45D5FED0A5AF" class="sect4">Exporting and Importing the TDE Master Encryption Key in Isolated Mode</h4>
                  <div>
                     <p>You can export and import the TDE master encryption key in different ways in isolated mode.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-D4384898-E376-43A4-9FC5-380E14AF3C13">Exporting a TDE Master Encryption Key in Isolated Mode</a><br>In isolated mode, you can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to export a TDE master encryption key.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-927A28A5-5F2A-439E-8769-09AD2AF46A2A">Importing a TDE Master Encryption Key in Isolated Mode</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">IMPORT [ENCRYPTION] KEYS WITH SECRET</code> clause can import a TDE master encryption key.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-D4384898-E376-43A4-9FC5-380E14AF3C13" name="GUID-D4384898-E376-43A4-9FC5-380E14AF3C13"></a><h5 id="ASOAG-GUID-D4384898-E376-43A4-9FC5-380E14AF3C13" class="sect5">Exporting a TDE Master Encryption Key in Isolated Mode</h5>
                     <div>
                        <p>In isolated mode, you can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to export a TDE master encryption key.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                              </li>
                              <li>
                                 <p>Export the TDE master encryption keystore by using the following syntax:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT EXPORT [ENCRYPTION] KEYS 
WITH SECRET "<span class="italic">export_secret</span>" 
TO '<span class="italic">file_path</span>' 
[FORCE KEYSTORE]
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>]
[WITH IDENTIFIER IN '<span class="italic">key_id1</span>', '<span class="italic">key_id2</span>', '<span class="italic">key_idn</span>' | (<span class="italic">SQL_query</span>)];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">export_secret</code></span> is a password that you can specify to encrypt the export the file that contains the exported keys. Enclose this secret in double quotation marks (<code class="codeph">"&nbsp;"</code>), or you can omit the quotation marks if the secret has no spaces.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">file_path</code></span> is the complete path and name of the file to which the keys must be exported. Enclose this path in single quotation marks (<code class="codeph">'&nbsp;'</code>). You can export to regular file systems only. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">key_id1</code></span>, <span class="italic"><code class="codeph">key_id2</code></span>, <span class="italic"><code class="codeph">key_idn</code></span> is a string of one or more TDE master encryption key identifiers for the TDE master encryption key being exported. Separate each key identifier with a comma and enclose each of these key identifiers in single quotation marks (<code class="codeph">'&nbsp;'</code>). To find TDE master encryption key identifiers, query the <code class="codeph">KEY_ID</code> column of the <code class="codeph">V$ENCRYPTION_KEYS</code> dynamic view. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">SQL_query</code></span> is a query that fetches a list of the TDE master encryption key identifiers. It should return only one column that contains the TDE master encryption key identifiers. This query is executed with current user rights.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-D678DC98-E77C-4F5D-8E5C-45D5FED0A5AF" title="You can export and import the TDE master encryption key in different ways in isolated mode.">Exporting and Importing the TDE Master Encryption Key in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-927A28A5-5F2A-439E-8769-09AD2AF46A2A" name="GUID-927A28A5-5F2A-439E-8769-09AD2AF46A2A"></a><h5 id="ASOAG-GUID-927A28A5-5F2A-439E-8769-09AD2AF46A2A" class="sect5">Importing a TDE Master Encryption Key in Isolated Mode</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement with the <code class="codeph">IMPORT [ENCRYPTION] KEYS WITH SECRET</code> clause can import a TDE master encryption key.
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                                 <p>Contact your <code class="codeph">SYSDBA</code> administrator for the correct PDB. To check the current container, run the <code class="codeph">SHOW CON_NAME</code> command.
                                 </p>
                              </li>
                              <li>
                                 <p>Run the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT IMPORT [ENCRYPTION] KEYS 
WITH SECRET "<span class="italic">import_secret</span>"  
FROM '<span class="italic">file_name</span>'  
[FORCE KEYSTORE]
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];
</pre><p>In this specification:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="italic"><code class="codeph">import_secret</code></span> is the same password that was used to encrypt the keys during the export operation. Enclose this secret in double quotation marks (<code class="codeph">" "</code>), or you can omit the quotation marks if the secret has no spaces.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">file_name</code></span> is the complete path and name of the file from which the keys need to be imported. Enclose this setting in single quotation marks (<code class="codeph">'&nbsp;'</code>).
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="You can export and import the TDE master encryption key in different ways.">Exporting and Importing the TDE Master Encryption Key</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-D678DC98-E77C-4F5D-8E5C-45D5FED0A5AF" title="You can export and import the TDE master encryption key in different ways in isolated mode.">Exporting and Importing the TDE Master Encryption Key in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-F7052961-ECD0-4AD5-BC14-5E0715C9DE33" name="GUID-F7052961-ECD0-4AD5-BC14-5E0715C9DE33"></a><h4 id="ASOAG-GUID-F7052961-ECD0-4AD5-BC14-5E0715C9DE33" class="sect4">Storing Oracle Database Secrets in Isolated Mode</h4>
                  <div>
                     <p>Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-DE1E8671-BC7F-4B1E-B4A8-35DF0CA37836">Storing Oracle Database Secrets in a Software Keystore in Isolated Mode</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code> statements can add secrets, update secrets, and delete secrets in a keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-C1899D3D-4EB4-4F6E-A08F-7F5736CE41A6">Storing Oracle Database Secrets in a Hardware Keystore in Isolated Mode</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code> statements can add secrets, update secrets, and delete secrets in a keystore.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-DE1E8671-BC7F-4B1E-B4A8-35DF0CA37836" name="GUID-DE1E8671-BC7F-4B1E-B4A8-35DF0CA37836"></a><h5 id="ASOAG-GUID-DE1E8671-BC7F-4B1E-B4A8-35DF0CA37836" class="sect5">Storing Oracle Database Secrets in a Software Keystore in Isolated Mode</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code> statements can add secrets, update secrets, and delete secrets in a keystore.
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                           <li class="stepexpand"><span>Add, update, or delete a database secret in a software keystore by using the following syntax:</span><ul>
                                 <li>To add a secret:<pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
ADD SECRET '<span class="italic">secret</span>' FOR CLIENT '<span class="italic">client_identifier</span>' 
[USING TAG '<span class="italic">tag</span>']
[TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[WITH BACKUP [USING <span class="italic">backup_id</span>]] 
| [FORCE KEYSTORE]  
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING <span class="italic">backup_id</span>]]];</pre></li>
                                 <li>To update a secret: <pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
UPDATE SECRET '<span class="italic">secret</span>' FOR CLIENT '<span class="italic">client_identifier</span>' 
[USING TAG '<span class="italic">tag</span>']
[TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[WITH BACKUP [USING <span class="italic">backup_id</span>]] 
| [FORCE KEYSTORE]  
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING <span class="italic">backup_id</span>]]]; </pre></li>
                                 <li>To delete a secret: <pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
DELETE SECRET FOR CLIENT '<span class="italic">client_identifier</span>' 
[FROM [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[FORCE KEYSTORE]
IDENTIFIED BY [EXTERNAL STORE | <span class="italic">keystore_password</span>] 
[WITH BACKUP [USING <span class="italic">backup_id</span>]]]; </pre></li>
                              </ul>
                              <div>
                                 <p>The specification is as follows:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph"><span class="codeinlineitalic">secret</span></code> is the client secret key to be stored, updated, or deleted. To find information about existing secrets and their client identifiers, query the <code class="codeph">V$CLIENT_SECRETS</code> dynamic view. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph"><span class="codeinlineitalic">client_identifier</span></code> is an alphanumeric string used to identify the secret key.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-F7052961-ECD0-4AD5-BC14-5E0715C9DE33" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-C1899D3D-4EB4-4F6E-A08F-7F5736CE41A6" name="GUID-C1899D3D-4EB4-4F6E-A08F-7F5736CE41A6"></a><h5 id="ASOAG-GUID-C1899D3D-4EB4-4F6E-A08F-7F5736CE41A6" class="sect5">Storing Oracle Database Secrets in a Hardware Keystore in Isolated Mode</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code> statements can add secrets, update secrets, and delete secrets in a keystore.
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                           <li class="stepexpand"><span>Add, update, or delete a database secret in a hardware keystore by using the following syntax:</span><ul>
                                 <li>To add a secret:<pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
ADD SECRET '<span class="italic">secret</span>' FOR CLIENT '<span class="italic">client_identifier</span>' 
[USING TAG '<span class="italic">tag</span>']
[TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[FORCE KEYSTORE]
IDENTIFIED BY "<span class="italic">hardware_keystore_credentials</span>"]
[WITH BACKUP [USING <span class="italic">backup_id</span>]];</pre></li>
                                 <li>To update a secret: <pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
UPDATE SECRET '<span class="italic">secret</span>' FOR CLIENT '<span class="italic">client_identifier</span>' 
[USING TAG '<span class="italic">tag</span>']
 [TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[FORCE KEYSTORE]
IDENTIFIED BY "<span class="italic">hardware_keystore_credentials</span>"
[WITH BACKUP [USING <span class="italic">backup_id</span>]]; </pre></li>
                                 <li>To delete a secret: <pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT
DELETE SECRET FOR CLIENT '<span class="italic">client_identifier</span>' 
[FROM [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> 
[FORCE KEYSTORE]
IDENTIFIED BY "<span class="italic">hardware_keystore_credentials</span>"; </pre></li>
                              </ul>
                              <div>
                                 <p>The specification is as follows:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph"><span class="codeinlineitalic">secret</span></code> is the client secret key to be stored, updated, or deleted. To find information about existing secrets and their client identifiers, query the <code class="codeph">V$CLIENT_SECRETS</code> dynamic view. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph"><span class="codeinlineitalic">client_identifier</span></code> is an alphanumeric string used to identify the secret key.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation. You must open the keystore for this operation. 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code> refers to the credentials for either an HSM or an Oracle Key Vault hardware keystore. For an HSM, specify the credentials using this format, enclosed in quotation marks and separating the components with a colon: <code class="codeph">â€œ<span class="codeinlineitalic">user_name</span>:<span class="codeinlineitalic">password</span>â€</code>, with <code class="codeph"><span class="codeinlineitalic">user_name</span></code> being the user who created the HSM and password being this userâ€™s password. For Oracle Key Vault, enter only the password of the user who created the keystore. Enclose this password with quotation marks.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-F7052961-ECD0-4AD5-BC14-5E0715C9DE33" title="Secrets are data that support internal Oracle Database features that integrate external clients such as Oracle GoldenGate into the database.">Storing Oracle Database Secrets in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0E28EE78-196D-424C-B861-2CDC2181C40A" name="GUID-0E28EE78-196D-424C-B861-2CDC2181C40A"></a><h4 id="ASOAG-GUID-0E28EE78-196D-424C-B861-2CDC2181C40A" class="sect4">Migrating Keystores in Isolated Mode</h4>
                  <div>
                     <p>You can perform migration and reverse migration operations between software keystores and hardware keystores in isolated mode. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-1E3F03F8-A9C6-4D7D-9971-84A563551CC0">Migrating from a Password-Protected Software Keystore to a Hardware Keystore in Isolated Mode</a><br>In isolated mode, you can migrate from a password-protected software keystore to a hardware keystore.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-A1A95DE0-10E6-45C7-91F3-33D09F322FA4">Migrating from a Hardware Keystore to a Password-Protected Software Keystore in Isolated Mode</a><br>In isolated mode, you can migrate from a hardware keystore to a password-protected software keystore.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-1E3F03F8-A9C6-4D7D-9971-84A563551CC0" name="GUID-1E3F03F8-A9C6-4D7D-9971-84A563551CC0"></a><h5 id="ASOAG-GUID-1E3F03F8-A9C6-4D7D-9971-84A563551CC0" class="sect5">Migrating from a Password-Protected Software Keystore to a Hardware Keystore in Isolated Mode</h5>
                     <div>
                        <p>In isolated mode, you can migrate from a password-protected software keystore to a hardware keystore.</p>
                        <ol>
                           <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                           <li class="stepexpand"><span>Convert the software keystore to open with the hardware keystore. </span><div>Some Oracle tools, such as Oracle Data Pump and Oracle Recovery Manager, require access to the old software keystore to encrypt or decrypt data that was exported or backed up using the software keystore. </div>
                              <ul>
                                 <li>To set the software keystore password as that of the hardware keystore, use the following syntax:<pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ALTER KEYSTORE PASSWORD 
[FORCE KEYSTORE]
IDENTIFIED BY <span class="italic">software_keystore_password</span> 
SET "<span class="italic">harware_keystore_credentials</span>" 
WITH BACKUP [USING '<span class="italic">backup_identifier</span>'];</pre><p>In this specification:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph"><span class="codeinlineitalic">software_keystore_password</span></code> is the password that was assigned to this keystore when it was created.
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code> refers to the credentials for either an HSM or an Oracle Key Vault hardware keystore. For an HSM, specify the credentials using this format, enclosed in quotation marks and separating the components with a colon: <code class="codeph">â€œ<span class="codeinlineitalic">user_name</span>:<span class="codeinlineitalic">password</span>â€</code>, with <code class="codeph"><span class="codeinlineitalic">user_name</span></code> being the user who created the HSM and password being this userâ€™s password. For Oracle Key Vault, enter only the password of the user who created the keystore. Enclose this password with quotation marks.
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>To create an auto-login keystore for a software keystore, use the following syntax:<pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT CREATE [LOCAL] AUTO_LOGIN KEYSTORE 
FROM KEYSTORE '<span class="italic">keystore_location</span>' 
IDENTIFIED BY <span class="italic">software_keystore_password</span>;</pre></li>
                              </ul>
                           </li>
                           <li class="stepexpand"><span>Edit the <code class="codeph">WALLET_ROOT</code> parameter in the initialization parameter file for the PDB to point to the new location for the keystore.</span><div>For the software keystore to open with the hardware keystore, either the software keystore must have the same password as the hardware keystore, or alternatively, you can create an auto-login keystore for the software keystore.</div>
                           </li>
                           <li class="stepexpand"><span>Migrate the hardware keystore by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
IDENTIFIED BY "<span class="italic">hardware_keystore_credentials</span>" 
[FORCE KEYSTORE]
MIGRATE USING <span class="italic">software_keystore_password</span> 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']];</pre></div>
                              <div>After you complete the migration, you do not need to restart the database, nor do you need to manually re-open the hardware keystore. The migration process automatically reloads the keystore keys in memory.</div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70" title="After you perform a migration, keystores can be either primary or secondary in their order.">Keystore Order After a Migration</a></li>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8" title="You can use Oracle Key Vault to migrate both software and hardware keystores to and from Oracle Key Vault.">Migration of Keystores to and from Oracle Key Vault</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-0E28EE78-196D-424C-B861-2CDC2181C40A" title="You can perform migration and reverse migration operations between software keystores and hardware keystores in isolated mode.">Migrating Keystores in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-A1A95DE0-10E6-45C7-91F3-33D09F322FA4" name="GUID-A1A95DE0-10E6-45C7-91F3-33D09F322FA4"></a><h5 id="ASOAG-GUID-A1A95DE0-10E6-45C7-91F3-33D09F322FA4" class="sect5">Migrating from a Hardware Keystore to a Password-Protected Software Keystore in Isolated Mode</h5>
                     <div>
                        <p>In isolated mode, you can migrate from a hardware keystore to a password-protected software keystore.</p>
                        <ol>
                           <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                           <li class="stepexpand"><span>Edit the <code class="codeph">WALLET_ROOT</code> parameter in the <code class="codeph">init.ora</code> initialization file for the PDB to point to the new location for the keystore.</span><div>For the software keystore to open with the hardware keystore, either the software keystore must have the same password as the hardware keystore, or alternatively, you can create an auto-login keystore for the software keystore.</div>
                           </li>
                           <li class="stepexpand"><span>Configure the keystore for the reverse migration by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY 
IDENTIFIED BY <span class="italic">software_keystore_password</span> 
REVERSE MIGRATE USING "<span class="italic">harware_keystore_credentials</span>" 
[WITH BACKUP [USING '<span class="italic">backup_identifier</span>']]; </pre></div>
                           </li>
                           <li class="stepexpand"><span>Optionally, change the password of the newly migrated software keystore. </span><div>For example:<pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT ALTER KEYSTORE PASSWORD 
IDENTIFIED BY
<span class="italic">old_password</span> SET <span class="italic">new_password</span> 
WITH BACKUP USING 'pwd_change';</pre></div>
                           </li>
                        </ol>
                        <div class="section">After you complete these steps, the migration process automatically reloads the keystore keys in memory. You do not need to restart the database, nor do you need to manually re-open the software keystore. The hardware keystore may still be required after reverse migration because the old keys are likely to have been used for encrypted backups or by tools such as Oracle Data Pump and Oracle Recovery Manager. You should cache the hardware keystore credentials in the keystore so that the HSM can be opened with the software keystore.</div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C8C054A-0F63-4BD1-9B4C-C2581029B463" title="To switch from using a hardware keystore solution to a software keystore, you can use reverse migration of the keystore.">About Migrating Back from a Hardware Keystore</a></li>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70" title="After you perform a migration, keystores can be either primary or secondary in their order.">Keystore Order After a Migration</a></li>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8" title="You can use Oracle Key Vault to migrate both software and hardware keystores to and from Oracle Key Vault.">Migration of Keystores to and from Oracle Key Vault</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-0E28EE78-196D-424C-B861-2CDC2181C40A" title="You can perform migration and reverse migration operations between software keystores and hardware keystores in isolated mode.">Migrating Keystores in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-717E6E9A-CC84-493F-B5C4-675729DC6ECE" name="GUID-717E6E9A-CC84-493F-B5C4-675729DC6ECE"></a><h4 id="ASOAG-GUID-717E6E9A-CC84-493F-B5C4-675729DC6ECE" class="sect4">Automatically Removing Inactive TDE Master Encryption Keys in Isolated Mode</h4>
                  <div>
                     <p>In isolated mode, the <code class="codeph">REMOVE_INACTIVE_STANDBY_TDE_MASTER_KEY</code> initialization parameter can configure the automatic removal of inactive master encryption keys.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the server where the isolated mode PDB standby database resides. </span></li>
                        <li class="stepexpand"><span>Locate the <code class="codeph">init.ora</code> file for the database. </span><div>By default, <code class="codeph">init.ora</code> file is located in the <code class="codeph">$ORACLE_HOME/dbs</code> directory. 
                           </div>
                        </li>
                        <li class="stepexpand"><span>Edit the <code class="codeph">init.ora</code> file to include the <code class="codeph">REMOVE_INACTIVE_STANDBY_TDE_MASTER_KEY</code> initialization parameter.</span><div>For example:<pre class="oac_no_warn" dir="ltr">remove_inactive_standby_tde_master_key = true</pre><p>Setting this parameter to <code class="codeph">TRUE</code> enables the automatic removal of inactive master encryption keys; setting it to <code class="codeph">FALSE</code> disables the automatic removal. 
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-91E39FB9-025C-4653-AE42-B68D1F22798F" name="GUID-91E39FB9-025C-4653-AE42-B68D1F22798F"></a><h4 id="ASOAG-GUID-91E39FB9-025C-4653-AE42-B68D1F22798F" class="sect4">Uniting a Pluggable Database Keystore</h4>
                  <div>
                     <p>Uniting a PDB keystore moves the TDE master encryption keys from the PDB keystore into the keystore of the CDB root. This enables the administrator of the keystore of the CDB root to manage&nbsp;the keys. </p>
                     <div class="section">The client secrets are not moved. Instead, they are left behind in the keystore that the PDB used while it was configured in isolated mode. Oracle recommends that you delete client secrets from that keystore before you unite the PDB keystore.  Similarly, when a PDB becomes isolated, no client secret contained in the keystore of the CDB root is moved. </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                        <li class="stepexpand"><span>Unite the PDB keystore, which moves the TDE master encryption keys from the PDB keystore into the keystore of the CDB root, by using the following syntax:</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT UNITE KEYSTORE
IDENTIFIED BY <span class="italic">isolated_keystore_password</span>
WITH ROOT KEYSTORE [FORCE KEYSTORE]
IDENTIFIED BY 
[EXTERNAL STORE | <span class="italic">keystore_password_of_cdb_root</span>]
[WITH BACKUP [USING backup_id]];</pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">FORCE KEYSTORE</code> temporarily opens the password-protected keystore for this operation if an auto-login keystore is open (and in use) or if the keystore is closed. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">united_keystore_password</span></code>: Knowledge of this password does not enable the user who performs the <code class="codeph">UNITE KEYSTORE</code> operation privileges to perform <code class="codeph">ADMINISTER KEY MANAGEMENT UNITE KEYSTORE</code> operations on the PDB.
                                    </p>
                                 </li>
                              </ul><pre class="oac_no_warn" dir="ltr"></pre></div>
                           <div>When the keystore of a PDB is united with a keystore in&nbsp;the CDB root, all of the previously active (historical) TDE master encryption keys that were associated with the PDB are moved to the keystore of the CDB root.</div>
                        </li>
                        <li class="stepexpand"><span>Confirm that the isolated mode PDB is now a united mode PDB.</span><div><pre class="oac_no_warn" dir="ltr">SELECT KEYSTORE_MODE FROM V$ENCRYPTION_WALLET;</pre><p>The output should be <code class="codeph">UNITED</code>.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">The keystore no longer exists but its master encryption key is now in the keystore in the CDB root. If you later decide that you want the united mode PDB to be an isolated mode PDB again, then you can use the <code class="codeph">ADMINISTER KEY MANAGEMENT ISOLATE KEYSTORE</code> statement. 
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-732D3890-6A80-4541-8489-B26A08BCEC17" title="Isolating a PDB keystore moves the master encryption key from the CDB root keystore into an isolated mode keystore in the a PDB.">Isolating a Pluggable Database Keystore</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-7B39A544-0B5D-4BE5-9D33-33F0D74D72DD" name="GUID-7B39A544-0B5D-4BE5-9D33-33F0D74D72DD"></a><h4 id="ASOAG-GUID-7B39A544-0B5D-4BE5-9D33-33F0D74D72DD" class="sect4">Creating a Keystore When the PDB Is Closed</h4>
                  <div>
                     <p>When you create a keystore in a PDB that is closed, the new keystore is empty and the PDB is converted to isolated mode. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-AF0A3934-3024-4257-994A-988BEAC6FB89">About Creating a Keystore When the PDB Is Closed</a><br>Creating a keystore in a PDB that is closed could inadvertently cause problems in rekey operations, but the keystore creation can be reverted. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-2E350675-9643-419F-856D-6F264AA15A73">Reverting a Keystore Creation Operation When a PDB Is Closed</a><br>If you have inadvertently created a keystore in a PDB (and thereby caused it to become configured in isolated mode), then you should reverse the keystore creation operation.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B6EBC385-D014-43AA-B9DE-DF08F2082712" title="After you create a keystore and a TDE master encryption key in isolated mode, you can perform administration tasks such as rekeying or tagging encryption keys.">Administering Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-AF0A3934-3024-4257-994A-988BEAC6FB89" name="GUID-AF0A3934-3024-4257-994A-988BEAC6FB89"></a><h5 id="ASOAG-GUID-AF0A3934-3024-4257-994A-988BEAC6FB89" class="sect5">About Creating a Keystore When the PDB Is Closed</h5>
                     <div>
                        <p>Creating a keystore in a PDB that is closed could inadvertently cause problems in rekey operations, but the keystore creation can be reverted. </p>
                        <p>In previous releases, if you tried to create a keystore in a closed PDB, you were prevented and an <code class="codeph">ORA-65040: operation not allowed from within a pluggable database</code> error would appear. Starting in Oracle Database release 18c, for convenience, when the keystore of the PDB is closed and if you run the <code class="codeph">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE</code> statement in the PDB, Oracle Database allows the operation.
                        </p>
                        <p>If the closed PDB has not been configured to use encryption (that is, it has never had an <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEY</code> statement performed in it), after you execute <code class="codeph">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE</code>, resulting in an empty keystore and the configuration of the PDB being changed to isolated mode, then you can create a TDE master encryption key in this empty keystore.
                        </p>
                        <p>If, however, the PDB was already configured to use encryption, then the PDB may be configured in united mode (and thus have its TDE master encryption key being managed in the keystore of the CDB root).</p>
                        <p>Mistakenly running an <code class="codeph">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE</code> statement on such a closed PDB will create an additional keystore (which will be empty), and will then configure the PDB to be in isolated mode. This effectively misconfigures the PDB, because the PDB is now in isolated mode (whereas it should be in united mode), yet its TDE master encryption key is still in the keystore of the CDB root. This misconfiguration can cause problems later on, if you try to rekey the TDE master encryption key by using the <code class="codeph">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY</code> statement . An <code class="codeph">ORA-28362: master key not found</code> error will appear, because when encryption has already been enabled and a key has been set, Oracle Database treats the <code class="codeph">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY</code> statement as a rekey operation. In order to perform a rekey operation, Oracle Database must locate the currently active TDE master encryption key of the PDB. But in this misconfigured PDB, Oracle Database cannot locate the TDE master encryption key, because the PDB is now in isolated mode and the necessary key is in the keystore of the CDB root. Hence, the PDB is no longer configured to search in the keystore of the PDB, and the rekey operation fails. 
                        </p>
                        <p>To remedy the misconfiguration of the PDB, you must reconfigure the PDB to united mode and you must remove the empty keystore. (Always make a backup before removing any keystore.) When the PDB is configured back to united mode, then the currently active TDE master encryption key is once again available for rekey and other TDE master encryption key operations. </p>
                        <p>If later on you want to configure the PDB to be in isolated mode, then you can open the PDB and run the <code class="codeph">ADMINISTER KEY MANAGEMENT ISOLATE KEYSTORE</code> statement, which isolates the PDB and moves its TDE master encryption key and previously-active (historical) keys from the keystore of the CDB root to a newly-created keystore for the isolated PDB.  
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-2E350675-9643-419F-856D-6F264AA15A73" title="If you have inadvertently created a keystore in a PDB (and thereby caused it to become configured in isolated mode), then you should reverse the keystore creation operation.">Reverting a Keystore Creation Operation When a PDB Is Closed</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-7B39A544-0B5D-4BE5-9D33-33F0D74D72DD" title="When you create a keystore in a PDB that is closed, the new keystore is empty and the PDB is converted to isolated mode.">Creating a Keystore When the PDB Is Closed</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-2E350675-9643-419F-856D-6F264AA15A73" name="GUID-2E350675-9643-419F-856D-6F264AA15A73"></a><h5 id="ASOAG-GUID-2E350675-9643-419F-856D-6F264AA15A73" class="sect5">Reverting a Keystore Creation Operation When a PDB Is Closed</h5>
                     <div>
                        <p>If you have inadvertently created a keystore in a PDB (and thereby caused it to become configured in isolated mode), then you should reverse the keystore creation operation.</p>
                        <div class="section">Use this procedure if you created a keystore in a closed PDB that already had encryption enabled (that is, it already had a TDE master encryption key). </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Log in to the isolated mode PDB as a user who has been granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                           <li><span>Confirm the mode of the PDB by querying the <code class="codeph">KEYSTORE_MODE</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> dynamic view.</span></li>
                           <li><span>If the <code class="codeph">V$ENCRYPTION_WALLET</code> output is <code class="codeph">ISOLATED</code>, then execute the <code class="codeph">ALTER SYSTEM</code> statement to reconfigure the PDB to united mode. </span><ul>
                                 <li>When pfile is in use, clear the <code class="codeph">TDE_CONFIGURATION</code> parameter by using the following statement: <pre class="oac_no_warn" dir="ltr">ALTER SYSTEM RESET TDE_CONFIGURATION SCOPE=MEMORY;</pre><p>In an Oracle Real Application Clusters environment, include the <code class="codeph">SID</code> parameter:
                                    </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM RESET TDE_CONFIGURATION SCOPE=MEMORY SID='*';</pre></li>
                                 <li>When spfile is in use, clear the <code class="codeph">TDE_CONFIGURATION</code> parameter by using this statement:<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM RESET TDE_CONFIGURATION SCOPE=BOTH;</pre><p>In an Oracle Real Application Clusters environment, include the <code class="codeph">SID</code> parameter:
                                    </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM RESET TDE_CONFIGURATION SCOPE=BOTH SID='*';</pre></li>
                              </ul>
                           </li>
                           <li><span>In the <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span>/<span class="codeinlineitalic">PDB_GUID</span>/tde</code> directory, find and back up the <code class="codeph">ewallet.p12</code> keystore file that was mistakenly created. </span></li>
                           <li><span>Delete the mistakenly-created empty keystore file. </span></li>
                        </ol>
                        <div class="section">At this stage, the PDB will be in united mode and the correct keystore and TDE master encryption key will be available for any future rekey operations. </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-7B39A544-0B5D-4BE5-9D33-33F0D74D72DD" title="When you create a keystore in a PDB that is closed, the new keystore is empty and the PDB is converted to isolated mode.">Creating a Keystore When the PDB Is Closed</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-5316DC4C-BAFF-4653-9884-34F121AD878C" name="GUID-5316DC4C-BAFF-4653-9884-34F121AD878C"></a><h3 id="ASOAG-GUID-5316DC4C-BAFF-4653-9884-34F121AD878C" class="sect3">Administering Transparent Data Encryption in Isolated Mode</h3>
               <div>
                  <p>You can perform a number of general administrative tasks with Transparent Data Encryption in isolated mode. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-51BFBDC0-F56E-4D77-B85E-9696CCCE10BA">Moving PDBs from One CDB to Another in Isolated Mode</a><br>In isolated mode, you can automatically move a PDB from one CDB to another (for example, for load balancing or adding new functionality).
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-83D12D92-1BCD-4365-A801-279CEDEC51C3">Unplugging and Plugging a PDB with Encrypted Data in a CDB in Isolated Mode</a><br>In isolated mode, for a PDB that has encrypted data, you can plug it into a CDB. Conversely, you can unplug this PDB from the CDB. 
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-75455949-623D-4001-ADDE-E3E6203397AB">Cloning a PDB with Encrypted Data in a CDB in Isolated Mode</a><br>The <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement with the <code class="codeph">KEYSTORE IDENTIFIED BY</code> clause can clone a PDB that has encrypted data.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B17D5C60-7403-4AB1-80A1-8AFDE4186697">Performing a Remote Clone of PDB with Encrypted Data Between Two CDBs in Isolated Mode</a><br>The <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement with the <code class="codeph">KEYSTORE IDENTIFIED BY</code> clause can remotely clone a PDB that has encrypted data.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B50982CD-9A6F-4D3D-8646-ABF2F2C746E8">Relocating Across CDBs a Cloned PDB with Encrypted Data in Isolated Mode</a><br>The <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement with the <code class="codeph">KEYSTORE IDENTIFIED BY</code> clause can relocate across CDBs a cloned PDB that has encrypted data.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-9F9A8D09-AE0C-4AF9-931D-B44B21E8B35B">How Keystore Open and Close Operations Work in Isolated Mode</a><br>You should be aware of how keystore open and close operations work in isolated mode.
                     </li>
                     <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE">Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</a><br>In isolated mode, the <code class="codeph">EXPORT</code> and <code class="codeph">IMPORT</code> clauses of <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code> can export or import master encryption keys for a PDB.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-ED5C479F-435F-47A5-AD96-8D874BEDA0AA" title="Isolated mode enables you to create a keystore for each pluggable database (PDB).">Managing Keystores and TDE Master Encryption Keys in Isolated Mode</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-51BFBDC0-F56E-4D77-B85E-9696CCCE10BA" name="GUID-51BFBDC0-F56E-4D77-B85E-9696CCCE10BA"></a><h4 id="ASOAG-GUID-51BFBDC0-F56E-4D77-B85E-9696CCCE10BA" class="sect4">Moving PDBs from One CDB to Another in Isolated Mode</h4>
                  <div>
                     <p>In isolated mode, you can automatically move a PDB from one CDB to another (for example, for load balancing or adding new functionality).</p>
                     <div class="section">If the PDB has TDE-encrypted tables or tablespaces, then you can set the <code class="codeph">ONE_STEP_PLUGIN_FOR_PDB_WITH_TDE</code> dynamic system parameter to <code class="codeph">TRUE</code> to enable the PDB to include the TDE keys in the PDB move operation. This parameter avoids you having to manually provide a keystore password when you import the TDE keys into the PDB after it has moved to a different CDB. When <code class="codeph">ONE_STEP_PLUGIN_FOR_PDB_WITH_TDE</code> is set to <code class="codeph">TRUE</code>, the database caches the keystore password in memory, obfuscated at the system level, and then uses it for the import operation. The default for <code class="codeph">ONE_STEP_PLUGIN_FOR_PDB_WITH_TDE</code> is <code class="codeph">FALSE</code>. 
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Before you begin the PDB move operation, log in to the CDB root as a user who has been granted the <code class="codeph">SYSDBA</code> administrative privilege.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus c##sec_admin as sysdba
Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Set the <code class="codeph">ONE_STEP_PLUGIN_FOR_PDB_WITH_TDE</code> dynamic initialization parameter <code class="codeph">TRUE</code>.</span><div>For example:<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET ONE_STEP_PLUGIN_FOR_PDB_WITH_TDE = TRUE;</pre></div>
                        </li>
                        <li class="stepexpand"><span>Move (relocate) the PDB. </span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../multi/introduction-to-the-multitenant-architecture.html#MULTI-GUID-D84C3A7F-A1B3-4651-B99B-9F76E7331F83" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5316DC4C-BAFF-4653-9884-34F121AD878C" title="You can perform a number of general administrative tasks with Transparent Data Encryption in isolated mode.">Administering Transparent Data Encryption in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-83D12D92-1BCD-4365-A801-279CEDEC51C3" name="GUID-83D12D92-1BCD-4365-A801-279CEDEC51C3"></a><h4 id="ASOAG-GUID-83D12D92-1BCD-4365-A801-279CEDEC51C3" class="sect4">Unplugging and Plugging a PDB with Encrypted Data in a CDB in Isolated Mode</h4>
                  <div>
                     <p>In isolated mode, for a PDB that has encrypted data, you can plug it into a CDB. Conversely, you can unplug this PDB from the CDB. </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-4B2EBA84-8D8B-4DB9-824A-382BF0588C73">Unplugging a PDB That Has Encrypted Data in Isolated Mode</a><br>You can unplug a PDB (that has encrypted data) from one CDB and then optionally plug it into another CDB.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-B5097C6D-F5A3-43CB-9163-249B4DCD2912">Plugging a PDB That Has Encrypted Data into a CDB in Isolated Mode</a><br>After you plug a PDB that has encrypted data into a CDB, you can set the encryption key in the PDB.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-507B405D-6A95-46ED-A4CC-5AF4B1874EE5">Unplugging a PDB That Has Master Encryption Keys Stored in a Hardware Keystore in Isolated Mode</a><br>You can unplug a PDB from one CDB that has been configured with a hardware keystore and then plug it into another CDB also configured with a hardware keystore. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-463E7580-7D47-4E8D-9F8C-C9D66433C1C1">Plugging a PDB That Has Master Keys Stored in an HSM in Isolated Mode</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement can import a hardware keystore master encryption key to a PDB that has been moved to another CDB. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5316DC4C-BAFF-4653-9884-34F121AD878C" title="You can perform a number of general administrative tasks with Transparent Data Encryption in isolated mode.">Administering Transparent Data Encryption in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-4B2EBA84-8D8B-4DB9-824A-382BF0588C73" name="GUID-4B2EBA84-8D8B-4DB9-824A-382BF0588C73"></a><h5 id="ASOAG-GUID-4B2EBA84-8D8B-4DB9-824A-382BF0588C73" class="sect5">Unplugging a PDB That Has Encrypted Data in Isolated Mode</h5>
                     <div>
                        <p>You can unplug a PDB (that has encrypted data) from one CDB and then optionally plug it into another CDB.</p>
                        <div class="section">Unlike united mode, you do not need to specify the <code class="codeph">ENCRYPT</code> clause in the <code class="codeph">ALTER PLUGGABLE DATABASE</code> statement. The database that is unplugged contains data files and other associated files. Because each PDB can have its own unique keystore, you do not need to export the TDE master encryption key of the PDB that you want to unplug. You can check if a PDB has already been unplugged by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">DBA_PDBS</code> data dictionary view.
                        </div>
                        <!-- class="section" -->
                        <ul>
                           <li class="stepexpand"><span>Unplug the isolated mode PDB as you normally unplug PDBs.</span><div>For example:<pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb1
  UNPLUG INTO '/oracle/data/pdb1.xml';</pre></div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../multi/removing-a-pdb.html#MULTI-GUID-75C46F1B-00D8-4FB9-A8E7-6F7FE3DE4CA0" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a></li>
                              <li><a href="../sqlrf/ALTER-PLUGGABLE-DATABASE.html#SQLRF-GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-83D12D92-1BCD-4365-A801-279CEDEC51C3" title="In isolated mode, for a PDB that has encrypted data, you can plug it into a CDB. Conversely, you can unplug this PDB from the CDB.">Unplugging and Plugging a PDB with Encrypted Data in a CDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-B5097C6D-F5A3-43CB-9163-249B4DCD2912" name="GUID-B5097C6D-F5A3-43CB-9163-249B4DCD2912"></a><h5 id="ASOAG-GUID-B5097C6D-F5A3-43CB-9163-249B4DCD2912" class="sect5">Plugging a PDB That Has Encrypted Data into a CDB in Isolated Mode</h5>
                     <div>
                        <p>After you plug a PDB that has encrypted data into a CDB, you can set the encryption key in the PDB.</p>
                        <div class="section">Unlike united mode, you do not need to specify the <code class="codeph">DECRYPT</code> clause in the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement. When you plug an unplugged PDB into another CDB, the key version is set to <code class="codeph">0</code> because this operation invalidates the history of the previous keys. You can check the key version by querying the <code class="codeph">KEY_VERSION</code> column of the <code class="codeph">V$ENCRYPTED_TABLESPACES</code> dynamic view. Similarly, if a control file is lost and recreated, then the previous history of the keys is reset to <code class="codeph">0</code>. You can check if a PDB has already been plugged in by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">DBA_PDBS</code> data dictionary view.
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Create the PDB by plugging the unplugged PDB into the CDB.</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>For example, if you had exported the PDB data into a metadata XML file:</p><pre class="oac_no_warn" dir="ltr">CREATE PLUGGABLE DATABASE CDB1_PDB2 
USING '/tmp/cdb1_pdb2.xml' 
NOCOPY KEYSTORE 
IDENTIFIED BY <span class="italic">password</span>;</pre></li>
                                    <li>
                                       <p>If you had exported the PDB into an archive file:</p><pre class="oac_no_warn" dir="ltr">CREATE PLUGGABLE DATABASE CDB1_PDB2 
USING '/tmp/cdb1_pdb2.pdb';</pre></li>
                                 </ul>
                                 <p>During the open operation of the PDB after the plug operation, Oracle Database determines if the PDB has encrypted data. If so, it opens the PDB in the <code class="codeph">RESTRICTED</code> mode. 
                                 </p>
                                 <p>You can find if the source database has encrypted data or a TDE master encryption key set in the keystore by querying the <code class="codeph">V$ENCRYPTION_KEYS</code> dynamic view.
                                 </p>
                              </li>
                              <li>
                                 <p>Open the PDB.</p>
                                 <p>For example: </p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE CDB1_PDB2 OPEN;</pre></li>
                              <li>
                                 <p>Open the keystore in the CDB root. </p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY <span class="italic">password</span>;</pre><p>Optionally, open the keystore in the PDB.</p>
                              </li>
                              <li>
                                 <p>In the PDB, open the keystore and set the TDE master encryption key for the PDB.</p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY 
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP USING 'emp_key_backup';</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-83D12D92-1BCD-4365-A801-279CEDEC51C3" title="In isolated mode, for a PDB that has encrypted data, you can plug it into a CDB. Conversely, you can unplug this PDB from the CDB.">Unplugging and Plugging a PDB with Encrypted Data in a CDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-507B405D-6A95-46ED-A4CC-5AF4B1874EE5" name="GUID-507B405D-6A95-46ED-A4CC-5AF4B1874EE5"></a><h5 id="ASOAG-GUID-507B405D-6A95-46ED-A4CC-5AF4B1874EE5" class="sect5">Unplugging a PDB That Has Master Encryption Keys Stored in a Hardware Keystore in Isolated Mode</h5>
                     <div>
                        <p>You can unplug a PDB from one CDB that has been configured with a hardware keystore and then plug it into another CDB also configured with a hardware keystore. </p>
                        <ol>
                           <li class="stepexpand"><span>Unplug the PDB.</span><div>You can check if a PDB has already been unplugged by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">DBA_PDBS</code> data dictionary view.
                              </div>
                           </li>
                           <li class="stepexpand"><span>Move the master encryption keys of the unplugged PDB from the hardware that was used at the source CDB to the hardware that is in use at the destination CDB.</span><div>
                                 <p>Refer to the documentation for the hardware keystore for information about moving master keys between hardware keystores.</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../multi/index.html" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-83D12D92-1BCD-4365-A801-279CEDEC51C3" title="In isolated mode, for a PDB that has encrypted data, you can plug it into a CDB. Conversely, you can unplug this PDB from the CDB.">Unplugging and Plugging a PDB with Encrypted Data in a CDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-463E7580-7D47-4E8D-9F8C-C9D66433C1C1" name="GUID-463E7580-7D47-4E8D-9F8C-C9D66433C1C1"></a><h5 id="ASOAG-GUID-463E7580-7D47-4E8D-9F8C-C9D66433C1C1" class="sect5">Plugging a PDB That Has Master Keys Stored in an HSM in Isolated Mode</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement can import a hardware keystore master encryption key to a PDB that has been moved to another CDB. 
                        </p>
                        <ol>
                           <li class="stepexpand"><span>Plug the unplugged isolated mode PDB into the destination CDB that has been configured with the hardware keystore. </span><div>You can check if a PDB has already been plugged in by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">DBA_PDBS</code> data dictionary view.
                              </div>
                              <div>After the plug-in operation, the PDB that has been plugged in will be in restricted mode. </div>
                           </li>
                           <li class="stepexpand"><span>Ensure that the master keys from the HSM that has been configured with the source CDB are available in the hardware keystore of the destination CDB. </span></li>
                           <li class="stepexpand"><span>Log in to the plugged PDB as a user who was granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege. </span></li>
                           <li class="stepexpand"><span>Open the keystore of the plugged PDB.</span><div>
                                 <p>For example, for a PDB called <code class="codeph">PDB1</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET CONTAINER = PDB1;
ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN 
IDENTIFIED BY "<span class="italic">harware_keystore_credentials</span>";</pre></div>
                           </li>
                           <li class="stepexpand"><span>Import the hardware keystore master encryption key into the PDB.</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT IMPORT ENCRYPTION KEYS 
WITH SECRET "hardware_keystore" FROM 'hardware_keystore' 
IDENTIFIED BY "<span class="italic">hardware_keystore_credentials</span>"; </pre></div>
                           </li>
                           <li class="stepexpand"><span>Close and re-open the PDB.</span><div><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE PDB1 CLOSE;
ALTER PLUGGABLE DATABASE PDB1 OPEN;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../multi/plugging-in-a-pdb.html#MULTI-GUID-F23F5352-F456-48EE-AED7-71E3DEBAAED0" target="_blank"><span><cite>Oracle Multitenant Administrator's Guide</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-83D12D92-1BCD-4365-A801-279CEDEC51C3" title="In isolated mode, for a PDB that has encrypted data, you can plug it into a CDB. Conversely, you can unplug this PDB from the CDB.">Unplugging and Plugging a PDB with Encrypted Data in a CDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-75455949-623D-4001-ADDE-E3E6203397AB" name="GUID-75455949-623D-4001-ADDE-E3E6203397AB"></a><h4 id="ASOAG-GUID-75455949-623D-4001-ADDE-E3E6203397AB" class="sect4">Cloning a PDB with Encrypted Data in a CDB in Isolated Mode</h4>
                  <div>
                     <p>The <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement with the <code class="codeph">KEYSTORE IDENTIFIED BY</code> clause can clone a PDB that has encrypted data.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who was granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                        <li class="stepexpand"><span>Ensure that the software keystore of the PDB that you plan to clone is open. </span><div>
                              <p>You can query the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view to find if the software keystore is open.
                              </p>
                              <p>For example: </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN FORCE KEYSTORE IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></div>
                        </li>
                        <li class="stepexpand"><span>Clone the PDB.</span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">CREATE PLUGGABLE DATABASE cdb1_pdb3 FROM cdb1_pdb1 
FILE_NAME_CONVERT=('cdb1_pdb1', 'pdb3/cdb1_pdb3') KEYSTORE 
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></div>
                           <div>
                              <p>Replace <code class="codeph"><span class="codeinlineitalic">keystore_password</span></code> with the password of the keystore of the CDB where the <code class="codeph">cdb1_pdb3</code> clone is created.
                              </p>
                           </div>
                           <div>After you create the cloned PDB, encrypted data is still accessible by the clone using the master encryption key of the original PDB. After a PDB is cloned, there may be user data in the encrypted tablespaces. This encrypted data is still accessible because the master encryption key of the source PDB is copied over to the destination PDB. Because the clone is a copy of the source PDB but will eventually follow its own course and have its own data and security policies, you should rekey the master encryption key of the cloned PDB.</div>
                        </li>
                        <li class="stepexpand"><span>Rekey the master encryption key of the cloned PDB.</span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>ADMINISTER KEY MANAGEMENT SET KEY 
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP USING 'emp_key_backup';</code></pre></div>
                           <div>Before you rekey the master encryption key of the cloned PDB, the clone can still use master encryption keys that belong to the original PDB. However, these master encryption keys do not appear in the cloned PDB <code class="codeph">V$</code> dynamic views. Rekeying the master encryption key ensures that the cloned PDB uses its own unique keys, which will be viewable in the <code class="codeph">V$</code> views.
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-3A60285F-5CF7-4FA0-9F6E-EF19A1481AA4" title="When you clone a PDB, you must make the master encryption key of the source PDB available to cloned PDB.">About Managing Cloned PDBs That Have Encrypted Data in United Mode</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5316DC4C-BAFF-4653-9884-34F121AD878C" title="You can perform a number of general administrative tasks with Transparent Data Encryption in isolated mode.">Administering Transparent Data Encryption in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B17D5C60-7403-4AB1-80A1-8AFDE4186697" name="GUID-B17D5C60-7403-4AB1-80A1-8AFDE4186697"></a><h4 id="ASOAG-GUID-B17D5C60-7403-4AB1-80A1-8AFDE4186697" class="sect4">Performing a Remote Clone of PDB with Encrypted Data Between Two CDBs in Isolated Mode</h4>
                  <div>
                     <p>The <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement with the <code class="codeph">KEYSTORE IDENTIFIED BY</code> clause can remotely clone a PDB that has encrypted data.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who was granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                        <li class="stepexpand"><span>Query the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view to ensure that the software keystore of the PDB that you plan to clone is open. </span></li>
                        <li class="stepexpand"><span>Create a database link for the PDB that you want to clone remotely. </span><div>Use the <code class="codeph">CREATE DATABASE LINK</code> SQL statement to create the database link. You must create the database link by following the database link prerequisites that are required for cloning a remote PDB or a non-CDB. 
                           </div>
                        </li>
                        <li class="stepexpand"><span>Use the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement with the <code class="codeph">KEYSTORE IDENTIFIED BY</code> clause to perform the clone of the PDB.</span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">CREATE PLUGGABLE DATABASE cdb1_pdb3 
FROM cdb1_pdb1 
FILE_NAME_CONVERT=('cdb1_pdb1', 'pdb3/cdb1_pdb3') KEYSTORE 
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></div>
                           <div>
                              <p>Replace <code class="codeph"><span class="codeinlineitalic">keystore_password</span></code> with the password of the keystore of the CDB where the <code class="codeph">cdb1_pdb3</code> clone is created.
                              </p>
                           </div>
                           <div>After you create the cloned PDB, encrypted data is still accessible by the clone using the master encryption key of the original PDB. After a PDB is cloned, there may be user data in the encrypted tablespaces. This encrypted data is still accessible because the master encryption key of the source PDB is copied over to the destination PDB. Because the clone is a copy of the source PDB but will eventually follow its own course and have its own data and security policies, you should rekey the master encrytion key of the cloned PDB.</div>
                        </li>
                        <li class="stepexpand"><span>Rekey the master encryption key of the remotely cloned PDB.</span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>ADMINISTER KEY MANAGEMENT SET KEY 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP USING 'emp_key_backup';</code></pre><p>In this example, <code class="codeph">FORCE KEYSTORE</code> is included because the keystore must be open during the rekey operation.
                              </p>
                           </div>
                           <div>Before you rekey the master encryption key of the cloned PDB, the clone can still use master encryption keys that belong to the original PDB. However, these master encryption keys do not appear in the cloned PDB <code class="codeph">V$</code> dynamic views. Rekeying the master encryption key ensures that the cloned PDB uses its own unique keys, which will be viewable in the <code class="codeph">V$</code> views.
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-3A60285F-5CF7-4FA0-9F6E-EF19A1481AA4" title="When you clone a PDB, you must make the master encryption key of the source PDB available to cloned PDB.">About Managing Cloned PDBs That Have Encrypted Data in United Mode</a></li>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-765C103D-67A0-4DF1-930E-CFFFA89B2DC2" title="To open a software keystore in united mode, you must use the ADMINISTER KEY MANAGEMENT statement with the SET KEYSTORE OPEN clause.">Step 2: Open the Software Keystore in a United Mode PDB</a></li>
                           <li><a href="../multi/cloning-a-pdb.html#MULTI-GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F" target="_blank"><span><cite><span><cite>Oracle Multitenant Administrator's Guide</cite></span></cite></span></a></li>
                           <li><a href="../multi/cloning-a-pdb.html#MULTI-GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B" target="_blank"><span><cite><span><cite>Oracle Multitenant Administrator's Guide</cite></span></cite></span></a></li>
                           <li><a href="../sqlrf/CREATE-DATABASE-LINK.html#SQLRF-GUID-D966642A-B19E-449D-9968-1121AF06D793" target="_blank"><span><cite><span><cite>Oracle Database SQL Language Reference</cite></span></cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5316DC4C-BAFF-4653-9884-34F121AD878C" title="You can perform a number of general administrative tasks with Transparent Data Encryption in isolated mode.">Administering Transparent Data Encryption in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B50982CD-9A6F-4D3D-8646-ABF2F2C746E8" name="GUID-B50982CD-9A6F-4D3D-8646-ABF2F2C746E8"></a><h4 id="ASOAG-GUID-B50982CD-9A6F-4D3D-8646-ABF2F2C746E8" class="sect4">Relocating Across CDBs a Cloned PDB with Encrypted Data in Isolated Mode</h4>
                  <div>
                     <p>The <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement with the <code class="codeph">KEYSTORE IDENTIFIED BY</code> clause can relocate across CDBs a cloned PDB that has encrypted data.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the isolated mode PDB as a user who was granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.</span></li>
                        <li class="stepexpand"><span>Query the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view to ensure that the the software keystore of the PDB that you plan to clone is open. </span></li>
                        <li class="stepexpand"><span>Create a database link for the PDB that you want to clone remotely. </span><div>Use the <code class="codeph">CREATE DATABASE LINK</code> SQL statement to create the database link. You must create the database link by following the database link prerequisites that are required for cloning a remote PDB or a non-CDB. 
                           </div>
                        </li>
                        <li class="stepexpand"><span>Use the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement with the <code class="codeph">KEYSTORE IDENTIFIED BY</code> clause to clone the PDB.</span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">CREATE PLUGGABLE DATABASE cdb1_pdb3 
FROM cdb1_pdb1 
FILE_NAME_CONVERT=('cdb1_pdb1', 'pdb3/cdb1_pdb3') KEYSTORE 
IDENTIFIED BY <span class="italic">keystore_password</span>;</pre></div>
                           <div>
                              <p>Replace <code class="codeph"><span class="codeinlineitalic">keystore_password</span></code> with the password of the keystore of the CDB where the <code class="codeph">cdb1_pdb3</code> clone is created.
                              </p>
                           </div>
                           <div>After you create the cloned PDB, encrypted data is still accessible by the clone using the master encryption key of the original PDB. After a PDB is cloned, there may be user data in the encrypted tablespaces. This encrypted data is still accessible because the master encryption key of the source PDB is copied over to the destination PDB. Because the clone is a copy of the source PDB but will eventually follow its own course and have its own data and security policies, you should rekey the master encrytion key of the cloned PDB.</div>
                        </li>
                        <li class="stepexpand"><span>Use the <code class="codeph">ALTER PLUGGABLE DATABASE</code> statement to perform the relocation operation. </span><div>For example:<pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE cdb1_pdb3
OPEN RELOCATE TO 'need instance name example';</pre></div>
                        </li>
                        <li class="stepexpand"><span>Rekey the master encryption key of the remotely cloned PDB.</span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>ADMINISTER KEY MANAGEMENT SET KEY 
FORCE KEYSTORE
IDENTIFIED BY <span class="italic">keystore_password</span> 
WITH BACKUP USING 'emp_key_backup';</code></pre><p>In this example, <code class="codeph">FORCE KEYSTORE</code> is included because the keystore must be open during the rekey operation.
                              </p>
                           </div>
                           <div>Before you rekey the master encryption key of the cloned PDB, the clone can still use master encryption keys that belong to the original PDB. However, these master encryption keys do not appear in the cloned PDB <code class="codeph">V$</code> dynamic views. Rekeying the master encryption key ensures that the cloned PDB uses its own unique keys, which will be viewable in the <code class="codeph">V$</code> views.
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-3A60285F-5CF7-4FA0-9F6E-EF19A1481AA4" title="When you clone a PDB, you must make the master encryption key of the source PDB available to cloned PDB.">About Managing Cloned PDBs That Have Encrypted Data in United Mode</a></li>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-765C103D-67A0-4DF1-930E-CFFFA89B2DC2" title="To open a software keystore in united mode, you must use the ADMINISTER KEY MANAGEMENT statement with the SET KEYSTORE OPEN clause.">Step 2: Open the Software Keystore in a United Mode PDB</a></li>
                           <li><a href="../multi/cloning-a-pdb.html#MULTI-GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F" target="_blank"><span><cite><span><cite>Oracle Multitenant Administrator's Guide</cite></span></cite></span></a></li>
                           <li><a href="../multi/cloning-a-pdb.html#MULTI-GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B" target="_blank"><span><cite><span><cite>Oracle Multitenant Administrator's Guide</cite></span></cite></span></a></li>
                           <li><a href="../sqlrf/CREATE-DATABASE-LINK.html#SQLRF-GUID-D966642A-B19E-449D-9968-1121AF06D793" target="_blank"><span><cite><span><cite>Oracle Database SQL Language Reference</cite></span></cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5316DC4C-BAFF-4653-9884-34F121AD878C" title="You can perform a number of general administrative tasks with Transparent Data Encryption in isolated mode.">Administering Transparent Data Encryption in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-9F9A8D09-AE0C-4AF9-931D-B44B21E8B35B" name="GUID-9F9A8D09-AE0C-4AF9-931D-B44B21E8B35B"></a><h4 id="ASOAG-GUID-9F9A8D09-AE0C-4AF9-931D-B44B21E8B35B" class="sect4">How Keystore Open and Close Operations Work in Isolated Mode</h4>
                  <div>
                     <p>You should be aware of how keystore open and close operations work in isolated mode.</p>
                     <p>For each PDB in isolated mode, you must explicitly open the password-protected software keystore or hardware keystore in the PDB to enable the Transparent Data Encryption operations to proceed. (Auto-login and local auto-login software keystores open automatically.) Closing a keystore on a PDB blocks all of the Transparent Data Encryption operations on that PDB. </p>
                     <p>The open and close keystore operations in a PDB depend on the open and close status of the keystore in the PDB.</p>
                     <p>Note the following: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can create a separate keystore password for each PDB in the multitenant environment. </p>
                        </li>
                        <li>
                           <p>Before you can manually open a software password-protected or hardware keystore in an individual PDB, you must open the keystore in the CDB root. </p>
                        </li>
                        <li>
                           <p>If an auto-login keystore is in use, or if the keystore is closed, then include the <code class="codeph">FORCE KEYSTORE</code> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement when you open or close the keystore.
                           </p>
                        </li>
                        <li>
                           <p>If the keystore is a password-protected software keystore that uses an external store for passwords, then set the <code class="codeph">IDENTIFIED BY</code> clause to <code class="codeph">EXTERNAL STORE</code>.
                           </p>
                        </li>
                        <li>
                           <p>Before you can set a TDE master encryption key in an individual PDB, you must set the key in the CDB root.</p>
                        </li>
                        <li>
                           <p>Auto-login and local auto-login software keystores open automatically. You do not need to manually open these from the root first, or from the PDB. </p>
                        </li>
                        <li>
                           <p>If there is any PDB configured in isolated mode that has its keystore open, then an attempt to close the keystore in the CDB root would fail with an <code class="codeph">ORA-46692 cannot close wallet</code> error. Use the <code class="codeph">FORCE CLOSE</code> clause in the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement to override this behavior.
                           </p>
                        </li>
                        <li>
                           <p>If you perform an <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN</code> statement in the CDB root and set the <code class="codeph">CONTAINER</code> clause to <code class="codeph">ALL</code>, then the keystore will only be opened in each PDB that is configured in united mode, and the keystore of any PDB that is configured in isolated mode is not opened.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5316DC4C-BAFF-4653-9884-34F121AD878C" title="You can perform a number of general administrative tasks with Transparent Data Encryption in isolated mode.">Administering Transparent Data Encryption in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10438"></a><div class="props_rev_3"><a id="GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" name="GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE"></a><h4 id="ASOAG-GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" class="sect4">Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</h4>
                  <div>
                     <p>In isolated mode, the <code class="codeph">EXPORT</code> and <code class="codeph">IMPORT</code> clauses of <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code> can export or import master encryption keys for a PDB.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-61722774-8B1C-4B19-A102-FFD25ECDBA74">About Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</a><br>In isolated mode, you can export and import master encryption keys from the CDB root in the same way that you export and import this key for a non-CDB database.
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-FFAC9E80-A2D5-458F-B49B-68E05217B608">Exporting or Importing a Master Encryption Key for a PDB in Isolated Mode</a><br>In isolated mode, the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement can export or import a master encryption key for a PDB. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-516FAA4E-D448-4E42-A153-416096657129">Example: Exporting a Master Encryption Key from a PDB in Isolated Mode</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code> statement can export master encryption keys for a PDB. 
                        </li>
                        <li class="ulchildlink"><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-33C38B9D-C63F-4DE5-ACF1-7F9341AC5AF4">Example: Importing a Master Encryption Key into a PDB in Isolated Mode</a><br>The <code class="codeph">ADMINISTER KEY MANAGEMENT IMPORT ENCRYPTION KEYS</code> statement can import a master encryption key into a PDB.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5316DC4C-BAFF-4653-9884-34F121AD878C" title="You can perform a number of general administrative tasks with Transparent Data Encryption in isolated mode.">Administering Transparent Data Encryption in Isolated Mode</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10532"></a><div class="props_rev_3"><a id="GUID-61722774-8B1C-4B19-A102-FFD25ECDBA74" name="GUID-61722774-8B1C-4B19-A102-FFD25ECDBA74"></a><h5 id="ASOAG-GUID-61722774-8B1C-4B19-A102-FFD25ECDBA74" class="sect5">About Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</h5>
                     <div>
                        <p>In isolated mode, you can export and import master encryption keys from the CDB root in the same way that you export and import this key for a non-CDB database.</p>
                        <p>You can export and import all of the master encryption keys that belong to the PDB by exporting and importing the master encryption keys from within a PDB. Export and import operations of master encryption keys in a PDB supports the PDB unplug and plug operations. During a PDB unplug and plug operations, all the master encryption keys that belong to a PDB, as well as the metadata, are involved. Therefore, the <code class="codeph">WITH IDENTIFIER</code> clause of the <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code> statement is not allowed when you export keys from within a PDB. The <code class="codeph">WITH IDENTIFIER</code> clause is only permitted in the CDB root. 
                        </p>
                        <p>You should include the <code class="codeph">FORCE KEYSTORE</code> clause if the CDB root has an auto-login keystore or if the keystore is closed. If the keystore has been configured to use an external store for the password, then use the <code class="codeph">IDENTIFIED BY EXTERNAL STORE</code> clause. For example, to perform an export operation for this scenario:
                        </p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT EXPORT KEYS 
WITH SECRET "my_secret"
TO '/etc/TDE/export.exp'
FORCE KEYSTORE 
IDENTIFIED BY EXTERNAL STORE;
</pre><p>This <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code> operation exports not only the keys but creates metadata that is necessary for PDB environments (as well as for cloning operations). 
                        </p>
                        <p>Inside a PDB, the export operation of master encryption keys exports the keys that were created or activated by a PDB with the same GUID as the PDB where the keys are being exported. Essentially, all of the keys that belong to a PDB where the export is being performed will be exported.</p>
                        <p>The importing of master encryption keys from an export file within a PDB takes place only if the master encryption key was exported from another PDB with the same GUID. To support the plug-in of a PDB into a CDB, the import will also import the master encryption keys from an export file that contains the master encryption keys of a non-CDB exported without the <code class="codeph">WITH IDENTIFIER</code> clause. Because the PDB-specific details, such as the PDB name and database ID, can change from one CDB to the next, the PDB-specific information is modified during the import to reflect the updated PDB information.
                        </p>
                        <div class="infoboxnote" id="GUID-61722774-8B1C-4B19-A102-FFD25ECDBA74__GUID-5F7509F5-A65D-4F38-BAB4-D379B6240214">
                           <p class="notep1">Note:</p>
                           <p>Within a PDB, you can only export the keys of a PDB as a whole. The ability to export them selectively based on a query or an identifier is restricted to the root.</p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" title="In isolated mode, the EXPORT and IMPORT clauses of ADMINISTER KEY MANAGEMENT EXPORT can export or import master encryption keys for a PDB.">Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10533"></a><div class="props_rev_3"><a id="GUID-FFAC9E80-A2D5-458F-B49B-68E05217B608" name="GUID-FFAC9E80-A2D5-458F-B49B-68E05217B608"></a><h5 id="ASOAG-GUID-FFAC9E80-A2D5-458F-B49B-68E05217B608" class="sect5">Exporting or Importing a Master Encryption Key for a PDB in Isolated Mode</h5>
                     <div>
                        <p>In isolated mode, the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement can export or import a master encryption key for a PDB. 
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Log in to the isolated mode PDB as a user who was granted the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> or <code class="codeph">SYSKM</code> privilege.
                                 </p>
                              </li>
                              <li>
                                 <p>Perform the export or import operation. </p>
                                 <p>For example:</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS 
WITH SECRET "hr_secret" TO '/tmp/export.p12' 
FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">password</span>;</pre><p>Ensure that you include the <code class="codeph">FORCE KEYSTORE</code> clause because the keystore must be open for this operation. 
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-516FAA4E-D448-4E42-A153-416096657129" title="The ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS statement can export master encryption keys for a PDB.">Example: Exporting a Master Encryption Key from a PDB in Isolated Mode</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" title="In isolated mode, the EXPORT and IMPORT clauses of ADMINISTER KEY MANAGEMENT EXPORT can export or import master encryption keys for a PDB.">Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10439"></a><a id="ASOAG10534"></a><div class="props_rev_3"><a id="GUID-516FAA4E-D448-4E42-A153-416096657129" name="GUID-516FAA4E-D448-4E42-A153-416096657129"></a><h5 id="ASOAG-GUID-516FAA4E-D448-4E42-A153-416096657129" class="sect5">Example: Exporting a Master Encryption Key from a PDB in Isolated Mode</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code> statement can export master encryption keys for a PDB. 
                        </p>
                        <p><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-516FAA4E-D448-4E42-A153-416096657129__CIHJEBJI">Example 6-1</a> shows how to export a master encryption key from the PDB <code class="codeph">hrpdb</code>. In this example, the <code class="codeph">FORCE KEYSTORE</code> clause is included in case the auto-login keystore is in use, or if the keystore is closed.
                        </p>
                        <div class="example" id="GUID-516FAA4E-D448-4E42-A153-416096657129__CIHJEBJI">
                           <p class="titleinexample">Example 6-1 Exporting a Master Encryption Key from a PDB</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS 
WITH SECRET "my_secret" TO '/tmp/export.p12' 
FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">password</span>;
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" title="In isolated mode, the EXPORT and IMPORT clauses of ADMINISTER KEY MANAGEMENT EXPORT can export or import master encryption keys for a PDB.">Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10440"></a><div class="sect4"><a id="GUID-33C38B9D-C63F-4DE5-ACF1-7F9341AC5AF4" name="GUID-33C38B9D-C63F-4DE5-ACF1-7F9341AC5AF4"></a><h5 id="ASOAG-GUID-33C38B9D-C63F-4DE5-ACF1-7F9341AC5AF4" class="sect5"> Example: Importing a Master Encryption Key into a PDB in Isolated Mode</h5>
                     <div>
                        <p>The <code class="codeph">ADMINISTER KEY MANAGEMENT IMPORT ENCRYPTION KEYS</code> statement can import a master encryption key into a PDB.
                        </p>
                        <p><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-33C38B9D-C63F-4DE5-ACF1-7F9341AC5AF4__CIHFDGII">Example 6-2</a> shows how to import a master encryption key into the PDB <code class="codeph">hrpdb</code>. 
                        </p>
                        <div class="example" id="GUID-33C38B9D-C63F-4DE5-ACF1-7F9341AC5AF4__CIHFDGII">
                           <p class="titleinexample">Example 6-2 Importing a Master Encryption Key into a PDB</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT IMPORT ENCRYPTION KEYS 
WITH SECRET "my_secret" 
FROM '/tmp/export.p12' 
FORCE KEYSTORE 
IDENTIFIED BY <span class="italic">password</span> 
WITH BACKUP;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" title="In isolated mode, the EXPORT and IMPORT clauses of ADMINISTER KEY MANAGEMENT EXPORT can export or import master encryption keys for a PDB.">Exporting and Importing Master Encryption Keys for a PDB in Isolated Mode</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
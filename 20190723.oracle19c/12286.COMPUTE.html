<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>COMPUTE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide and Reference">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide and Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sqlplus-users-guide-and-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T05:48:09-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96459-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="COLUMN.html" title="Previous" type="text/html">
      <link rel="next" href="CONNECT.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL*Plus User's Guide and Reference">
    <meta name="dcterms.isVersionOf" content="SQPUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="COLUMN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CONNECT.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide and Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Plus-reference.html" property="item" typeof="WebPage"><span property="name">SQL*Plus Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Plus-command-reference.html" property="item" typeof="WebPage"><span property="name">SQL*Plus Command Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">COMPUTE</li>
            </ol>
            <a id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C" name="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C"></a><a id="SQPUG600"></a><a id="SQPUG035"></a>
            
            <h2 id="SQPUG-GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C" class="sect2"><span class="enumeration_section">12.14 </span>COMPUTE
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__GUID-2D4B027E-117C-4742-A2E1-D0FB22DB9A30">Syntax</p><pre class="oac_no_warn" dir="ltr">COMP[UTE] [<span class="italic">function</span> [LAB[EL] <span class="italic">text</span>] ...     OF {<span class="italic">expr</span> | <span class="italic">column</span> | <span class="italic">alias</span>} ...     ON {<span class="italic">expr</span> | <span class="italic">column</span> | <span class="italic">alias</span> | REPORT | ROW} ...]</pre><p>In combination with the BREAK command, calculates<a id="d27678e59" class="indexterm-anchor"></a> and prints summary lines<a id="d27678e64" class="indexterm-anchor"></a>, using various standard computations on subsets of selected rows.<a id="d27678e69" class="indexterm-anchor"></a> It also lists all COMPUTE definitions. For details on how to create summaries, see <span class="bold"><a href="formatting-SQL-Plus-reports.html#GUID-6E7DC1AB-5886-4841-AC40-695FDBCA9BA9">About Clarifying Your Report with Spacing and Summary Lines</a></span>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__GUID-7823985D-7174-4E76-AFC6-8CCDB9CFB110">Terms</p><pre class="oac_no_warn" dir="ltr"><span class="italic">function</span> ...</pre><p>Represents one of the functions listed in <a href="COMPUTE.html#GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__BACGEJEB" title="Shows the COMPUTE functions, their description, and the applicable datatypes.">Table 12-2</a>. If you specify more than one function, use spaces to separate the functions. 
                  </p>
                  <p>COMPUTE command functions are always executed in the sequence AVG, COUNT, MINIMUM, MAXIMUM, NUMBER, SUM, STD, VARIANCE, regardless of their order in the COMPUTE command. </p>
                  <div class="tblformal" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__BACGEJEB">
                     <p class="titleintable">Table 12-2 COMPUTE Functions</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="COMPUTE Functions" summary="Shows the COMPUTE functions, their description, and the applicable datatypes." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="18%" id="d27678e106">Function</th>
                              <th align="left" valign="bottom" width="46%" id="d27678e109">Computes</th>
                              <th align="left" valign="bottom" width="36%" id="d27678e112">Applies to Datatypes</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e117" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">AVG</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e117 d27678e109 ">
                                 <p>Average of non-null values</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e117 d27678e112 ">
                                 <p>NUMBER</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e127" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">COU[NT]</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e127 d27678e109 ">
                                 <p>Count of non-null values</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e127 d27678e112 ">
                                 <p>all types</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e137" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">MIN[IMUM]</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e137 d27678e109 ">
                                 <p>Minimum value</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e137 d27678e112 ">
                                 <p>NUMBER, CHAR, NCHAR, VARCHAR2 (VARCHAR), NVARCHAR2 (NCHAR VARYING)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e147" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">MAX[IMUM]</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e147 d27678e109 ">
                                 <p>Maximum value</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e147 d27678e112 ">
                                 <p>NUMBER, CHAR, NCHAR, VARCHAR2 (VARCHAR), NVARCHAR2 (NCHAR VARYING)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e157" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">NUM[BER]</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e157 d27678e109 ">
                                 <p>Count of rows</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e157 d27678e112 ">
                                 <p>all types</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e167" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">SUM</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e167 d27678e109 ">
                                 <p>Sum of non-null values</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e167 d27678e112 ">
                                 <p>NUMBER</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e177" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">STD</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e177 d27678e109 ">
                                 <p>Standard deviation of non-null values</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e177 d27678e112 ">
                                 <p>NUMBER</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d27678e187" headers="d27678e106 "><pre class="oac_no_warn" dir="ltr">VAR[IANCE]</pre></td>
                              <td align="left" valign="top" width="46%" headers="d27678e187 d27678e109 ">
                                 <p>Variance of non-null values </p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d27678e187 d27678e112 ">
                                 <p>NUMBER</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" --><pre class="oac_no_warn" dir="ltr">LAB[EL] <span class="italic">text</span></pre><p><a id="d27678e201" class="indexterm-anchor"></a>Defines the label to be printed for the computed value. If no <a id="d27678e206" class="indexterm-anchor"></a>LABEL clause is used, <span class="italic">text</span> defaults to the unabbreviated function keyword. You must place single quotes around <span class="italic">text</span> containing spaces or punctuation. The label prints left justified and truncates to the column width or linesize, whichever is smaller. The maximum label length is <a id="d27678e217" class="indexterm-anchor"></a>500 characters.
                  </p>
                  <p>The label for the computed value appears in the break column specified. To suppress the label, use the NOPRINT option of the COLUMN command on the break column.</p>
                  <p>If you repeat a function in a COMPUTE command, SQL*Plus issues a warning and uses the first occurrence of the function.</p>
                  <p>With ON REPORT and ON ROW computations, the label appears in the first column listed in the SELECT statement. The label can be suppressed by using a NOPRINT column first in the SELECT statement. When you compute a function of the first column in the SELECT statement ON REPORT or ON ROW, then the computed value appears in the first column and the label is not displayed. To see the label, select a dummy column first in the SELECT list.</p><pre class="oac_no_warn" dir="ltr">OF {<span class="italic">expr</span> | <span class="italic">column</span> | <span class="italic">alias</span>} ...</pre><p>In the OF clause,<a id="d27678e242" class="indexterm-anchor"></a> you can refer to an expression or function reference in the SELECT statement by placing the expression or function reference in double quotes. Column names and aliases do not need quotes.
                  </p><pre class="oac_no_warn" dir="ltr">ON {<span class="italic">expr</span> | <span class="italic">column</span> | <span class="italic">alias</span> | REPORT | ROW} ...</pre><p>If multiple COMPUTE<a id="d27678e260" class="indexterm-anchor"></a><a id="d27678e264" class="indexterm-anchor"></a><a id="d27678e268" class="indexterm-anchor"></a><a id="d27678e272" class="indexterm-anchor"></a><a id="d27678e276" class="indexterm-anchor"></a><a id="d27678e280" class="indexterm-anchor"></a><a id="d27678e284" class="indexterm-anchor"></a><a id="d27678e288" class="indexterm-anchor"></a> commands reference the same column in the ON clause, only the last COMPUTE command applies.
                  </p>
                  <p>To reference a<a id="d27678e295" class="indexterm-anchor"></a> SQL SELECT expression or function reference in an ON clause, place the expression or function reference in quotes. Column names and aliases do not need quotes.
                  </p>
                  <p>Enter COMPUTE without clauses to list all <a id="d27678e302" class="indexterm-anchor"></a>COMPUTE definitions.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__GUID-6D24D6E8-D1BB-451D-BE8E-AE873202C452">Usage</p>
                  <p>In order for the computations to occur, the following conditions must all be true:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>One or more of the expressions, columns, or column aliases you reference in the OF clause must also be in the SELECT command.</p>
                     </li>
                     <li>
                        <p>The expression, column, or column alias you reference in the ON clause must occur in the SELECT command and in the most recent BREAK<a id="d27678e319" class="indexterm-anchor"></a> command.
                        </p>
                     </li>
                     <li>
                        <p>If you reference either ROW or REPORT in the ON clause, also reference ROW or REPORT in the most recent BREAK command.</p>
                     </li>
                  </ul>
                  <p>To remove all COMPUTE definitions, use the CLEAR COMPUTES command.</p>
                  <p>Note that if you use the NOPRINT option for the column on which the COMPUTE is being performed, the COMPUTE result is also suppressed.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F9E6205D-4C14-4D61-9B90-F6BB1AC08A8C__GUID-BE4DDA63-F5B2-41A4-8BD2-F6DD8791C7F9">Examples</p>
                  <p>To subtotal the salary for the "account manager", AC_MGR, and "salesman", SA_MAN, job classifications with a compute label of "TOTAL", enter</p><pre class="oac_no_warn" dir="ltr">BREAK ON JOB_ID SKIP 1;
COMPUTE SUM LABEL 'TOTAL' OF SALARY ON JOB_ID;
SELECT JOB_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE JOB_ID IN ('AC_MGR', 'SA_MAN')
ORDER BY JOB_ID, SALARY;</pre><pre class="pre codeblock"><code>JOB_ID     LAST_NAME                     SALARY
---------- ------------------------- ----------
AC_MGR     Higgins                        12000
**********                           ----------
TOTAL                                     12000
SA_MAN     Zlotkey                        10500
           Cambrault                      11000
           Errazuriz                      12000
           Partners                       13500
           Russell                        14000
**********                           ----------
TOTAL                                     61000

6 rows selected.</code></pre><p>To calculate the total of salaries greater than 12,000 on a report, enter</p><pre class="oac_no_warn" dir="ltr">COMPUTE SUM OF SALARY ON REPORT
BREAK ON REPORT
COLUMN DUMMY HEADING ''
SELECT '   ' DUMMY, SALARY, EMPLOYEE_ID
FROM EMP_DETAILS_VIEW
WHERE SALARY &gt; 12000
ORDER BY SALARY;</pre><pre class="pre codeblock"><code>        SALARY EMPLOYEE_ID
--- ---------- -----------
         13000         201
         13500         146
         14000         145
         17000         101
         17000         102
         24000         100
    ----------
sum      98500

6 rows selected.</code></pre><p>To calculate the average and maximum salary for the executive and accounting departments, enter</p><pre class="oac_no_warn" dir="ltr">BREAK ON DEPARTMENT_NAME SKIP 1
COMPUTE AVG LABEL 'Dept Average' -
        MAX LABEL 'Dept Maximum' -
        OF SALARY ON DEPARTMENT_NAME
SELECT DEPARTMENT_NAME, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE DEPARTMENT_NAME IN ('Executive', 'Accounting')
ORDER BY DEPARTMENT_NAME;</pre><pre class="pre codeblock"><code>DEPARTMENT_NAME                LAST_NAME                     SALARY
------------------------------ ------------------------- ----------
Accounting                     Higgins                        12000
                               Gietz                           8300
******************************                           ----------
Dept Average                                                  10150
Dept Maximum                                                  12000

Executive                      King                           24000
                               Kochhar                        17000
                               De Haan                        17000
******************************                           ----------
Dept Average                                             19333.3333
Dept Maximum                                                  24000</code></pre><p>To sum salaries for departments &lt;= 20 without printing the compute label, enter</p><pre class="oac_no_warn" dir="ltr">COLUMN DUMMY NOPRINT
COMPUTE SUM OF SALARY ON DUMMY
BREAK ON DUMMY SKIP 1
SELECT DEPARTMENT_ID DUMMY, DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE DEPARTMENT_ID &lt;= 20
ORDER BY DEPARTMENT_ID;</pre><pre class="pre codeblock"><code>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           10 Whalen                          4400
                                        ----------
                                              4400

           20 Hartstein                      13000
           20 Fay                             6000
                                        ----------
                                             19000</code></pre><p>To total the salary at the end of the report without printing the compute label, enter</p><pre class="oac_no_warn" dir="ltr">COLUMN DUMMY NOPRINT
COMPUTE SUM OF SALARY ON DUMMY
BREAK ON DUMMY
SELECT NULL DUMMY, DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE DEPARTMENT_ID &lt;= 30
ORDER BY DEPARTMENT_ID;</pre><pre class="pre codeblock"><code>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           10 Whalen                          4400
           20 Hartstein                      13000
           20 Fay                             6000
           30 Raphaely                       11000
           30 Khoo                            3100
           30 Baida                           2900
           30 Tobias                          2800
           30 Himuro                          2600
           30 Colmenares                      2500
                                        ----------
                                             48300

9 rows selected.</code></pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
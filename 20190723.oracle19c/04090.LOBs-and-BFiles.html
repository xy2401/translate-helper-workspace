<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Working with LOBs and BFILEs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JDBC Developer's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JDBC Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00">
      <meta name="dcterms.title" content="JDBC Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96471-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="Oracle-object-types.html" title="Previous" type="text/html">
      <link rel="next" href="Oracle-object-references.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Oracle-object-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="Oracle-object-references.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="data-access-and-manipulation.html" property="item" typeof="WebPage"><span property="name"> Data Access and Manipulation</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Working with LOBs and BFILEs</li>
            </ol>
            <a id="GUID-401E10DB-16B5-41C9-965E-E5F286F01E4C" name="GUID-401E10DB-16B5-41C9-965E-E5F286F01E4C"></a><a id="JJDBC15000"></a>
            
            <h2 id="JJDBC-GUID-401E10DB-16B5-41C9-965E-E5F286F01E4C" class="sect2"><span class="enumeration_chapter">14 </span> Working with LOBs and BFILEs
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes how to use Java Database Connectivity (JDBC) to access and manipulate large objects (LOB) using either the data interface or the locator interface.</p>
               <p>In previous releases, Oracle JDBC drivers required Oracle extensions to standard JDBC types to perform many operations in the Oracle Database. JDBC 3.0 reduced the requirement of using Oracle extensions and JDBC 4.0 nearly eliminated this limitation. Refer to the Javasoft Javadoc for the <code class="codeph">java.sql</code> and <code class="codeph">javax.sql</code> packages, and to the Oracle JDBC Javadoc for details on Oracle extensions.
               </p>
               <p>This chapter contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="LOBs-and-BFiles.html#GUID-F022FAE8-0EF3-47F1-9ADB-AA2E2EBBB5C0">The LOB Data Types</a></p>
                  </li>
                  <li>
                     <p><a href="LOBs-and-BFiles.html#GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C">Oracle SecureFiles</a></p>
                  </li>
                  <li>
                     <p><a href="LOBs-and-BFiles.html#GUID-B88A9B7F-FFDD-4B9F-9B6D-ED9C70B7545F">Data Interface for LOBs</a></p>
                  </li>
                  <li>
                     <p><a href="LOBs-and-BFiles.html#GUID-6164F905-6CDB-43A0-A80A-780DB358F686">LOB Locator Interface</a></p>
                  </li>
                  <li>
                     <p><a href="LOBs-and-BFiles.html#GUID-8302600F-2799-445E-AFB0-BA8DE15DC71E">About Working With Temporary LOBs</a></p>
                  </li>
                  <li>
                     <p><a href="LOBs-and-BFiles.html#GUID-60B921CA-6907-4910-B71C-CF0CA3B99E80">About Opening Persistent LOBs with the Open and Close Methods</a></p>
                  </li>
                  <li>
                     <p><a href="LOBs-and-BFiles.html#GUID-F06154EF-1D48-4CF4-A991-3839776A442F">About Working with BFILEs</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-401E10DB-16B5-41C9-965E-E5F286F01E4C__GUID-05303C09-B14B-4B96-BE65-BD0CB16FAF16">
                  <p class="notep1">Note:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>In Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the Oracle JDBC drivers support the JDBC 4.0 <code class="codeph">java.sql.NClob</code> interface.
                        </p>
                     </li>
                     <li>
                        <p>In Oracle Database 10<span class="italic">g</span>, the Oracle JDBC drivers support the JDBC 3.0 <code class="codeph">java.sql.Clob</code> and <code class="codeph">java.sql.Blob</code> interfaces. Certain Oracle extensions made in <code class="codeph">oracle.sql.CLOB </code>and <code class="codeph">oracle.sql.BLOB</code> in earlier Oracle Database releases are no longer necessary and are deprecated. You should port your application to the standard JDBC 3.0 interface. 
                        </p>
                     </li>
                     <li>
                        <p>Prior to Oracle Database 10<span class="italic">g</span>, the maximum size of a LOB was 2<sup>32</sup> bytes. This restriction has been removed since Oracle Database 10<span class="italic">g</span>, and the maximum size is limited to the size of available physical storage. The Java LOB application programming interface (API) has not changed.
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="JJDBC28530"></a><div class="props_rev_3"><a id="GUID-F022FAE8-0EF3-47F1-9ADB-AA2E2EBBB5C0" name="GUID-F022FAE8-0EF3-47F1-9ADB-AA2E2EBBB5C0"></a><h3 id="JJDBC-GUID-F022FAE8-0EF3-47F1-9ADB-AA2E2EBBB5C0" class="sect3"><span class="enumeration_section">14.1 </span>The LOB Data Types
               </h3>
               <div>
                  <div class="section">
                     <p>Prior to Oracle Database 10<span class="italic">g</span>, the maximum size of a LOB was 2^32 bytes. This restriction has been removed since Oracle Database 10<span class="italic">g</span>, and the maximum size is limited to the size of available physical storage.
                     </p>
                     <p>The Oracle database supports the following four LOB data types:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Binary large object (BLOB)</p>
                           <p>This data type is used for unstructured binary data.</p>
                        </li>
                        <li>
                           <p>Character large object (CLOB)</p>
                           <p>This data type is used for character data.</p>
                        </li>
                        <li>
                           <p>National character large object (NCLOB)</p>
                           <p>This data type is used for national character data.</p>
                        </li>
                        <li>
                           <p>BFILE</p>
                           <p>This data type is used for large binary data objects stored in operating system files, outside of database tablespaces.</p>
                        </li>
                     </ul>
                     <p>BLOBs, CLOBs, and NCLOBs are stored persistently in a database tablespace and all operations performed on these data types are under transaction control.</p>
                     <p>BFILE is an Oracle proprietary data type that provides read-only access to data located outside the database tablespaces on tertiary storage devices, such as hard disks, network mounted files systems, CD-ROMs, PhotoCDs, and DVDs. BFILE data is not under transaction control and is not stored by database backups.</p>
                     <p>The PL/SQL language supports the LOB data types and the JDBC interface allows passing IN parameters to PL/SQL procedures or functions, and retrieval of OUT parameters or returns. PL/SQL uses value semantics for all data types including LOBs, but reference semantics only for BFILE.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC28532"></a><a id="JJDBC28533"></a><a id="JJDBC28531"></a><div class="props_rev_3"><a id="GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C" name="GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C"></a><h3 id="JJDBC-GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C" class="sect3"><span class="enumeration_section">14.2 </span>Oracle SecureFiles
               </h3>
               <div>
                  <div class="section">
                     <p>Oracle Database 11<span class="italic">g </span>Release 1 (11.1) introduced Oracle SecureFiles, a completely new storage for LOBs.
                     </p>
                     <p>Following Features of Oracle SecureFiles are transparently available to JDBC programs through the existing APIs:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>SecureFile compression enables users to compress data to save disk space.</p>
                        </li>
                        <li>
                           <p>SecureFile encryption introduces a new encryption facility that allows for random reads and writes of the encrypted data.</p>
                        </li>
                        <li>
                           <p>Deduplication enables Oracle database to automatically detect duplicate LOB data and conserve space by storing only one copy of data.</p>
                        </li>
                        <li>
                           <p>LOB data path optimization includes logical cache above storage layer and new caching modes.</p>
                        </li>
                        <li>
                           <p>High performance space management.</p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">setLobOptions</code> and <code class="codeph">getLobOptions</code> APIs are described in the PL/SQL Packages and Types Reference, and may be accessed from JDBC through callable statements.
                     </p>
                     <p>Following Oracle SecureFiles features are implemented in the database through updates to the existing APIs:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="LOBs-and-BFiles.html#GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C__CHDGFDFC">isSecureFile Method</a></p>
                        </li>
                        <li>
                           <p><a href="LOBs-and-BFiles.html#GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C__CHDFEBJD">Zero-Copy I/O for Oracle SecureFiles</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C__CHDGFDFC">
                     <p class="subhead2" id="GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C__GUID-101B81B4-E66A-452A-BE93-A562D573004F">isSecureFile Method</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>You can check whether or not your <code class="codeph">BLOB</code> or <code class="codeph">CLOB</code> data uses Oracle SecureFile storage. To achieve this, use the following method from <code class="codeph">oracle.jdbc.OracleBlob</code> or <code class="codeph">oracle.jdbc.OracleClob</code> class:
                     </p><pre class="oac_no_warn" dir="ltr">public boolean isSecureFile() throws SQLException
</pre><p>If this method returns <code class="codeph">true</code>, then your data uses SecureFile storage.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C__CHDFEBJD">
                     <p class="subhead2" id="GUID-865A776C-AFE1-493D-84AD-E0911F18CA4C__GUID-5D7BDA54-2DBA-4D5E-9715-6580D70B35DA">Zero-Copy I/O for Oracle SecureFiles</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>With the release of Oracle Database 12<span class="italic">c</span> Release 2 (12.2) JDBC Drivers, the performance of Oracle SecureFiles operations is greatly improved because Oracle Net Services now uses zero-copy I/O framework for better buffer management. 
                     </p>
                     <p>Oracle Database 11<span class="italic">g</span> Release 2 introduced a new connection property <code class="codeph">oracle.net.useZeroCopyIO</code>. This property can be used to enable or disable the zero-copy I/O protocol. This connection property is defined as the following constant: <code class="codeph">OracleConnection.CONNECTION_PROPERTY_THIN_NET_USE_ZERO_COPY_IO</code>. If you want to disable the zero-copy I/O framework, then set the value of this connection property to <code class="codeph">false</code>. By default, the value of this connection property is <code class="codeph">true</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC28534"></a><div class="props_rev_3"><a id="GUID-B88A9B7F-FFDD-4B9F-9B6D-ED9C70B7545F" name="GUID-B88A9B7F-FFDD-4B9F-9B6D-ED9C70B7545F"></a><h3 id="JJDBC-GUID-B88A9B7F-FFDD-4B9F-9B6D-ED9C70B7545F" class="sect3"><span class="enumeration_section">14.3 </span>Data Interface for LOBs
               </h3>
               <div>
                  <div class="section">
                     <p>This section describes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="LOBs-and-BFiles.html#GUID-9D0B59D6-0267-4B42-A742-B964E6737CFE">Streamlined Mechanism</a></p>
                        </li>
                        <li>
                           <p><a href="LOBs-and-BFiles.html#GUID-8FD40D53-8D64-4187-9F6F-FF78242188AD">Input</a></p>
                        </li>
                        <li>
                           <p><a href="LOBs-and-BFiles.html#GUID-68B496D6-B82A-4D98-83A8-D5E01D5FF4A8">Output</a></p>
                        </li>
                        <li>
                           <p><a href="LOBs-and-BFiles.html#GUID-4AA41511-A68C-435B-BDFA-A27F8BFD1DD5">CallableSatement and IN OUT Parameter</a></p>
                        </li>
                        <li>
                           <p><a href="LOBs-and-BFiles.html#GUID-214CA60C-AB44-4406-A72F-6AF138D7DA55">Size Limitations</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDBC28535"></a><div class="props_rev_3"><a id="GUID-9D0B59D6-0267-4B42-A742-B964E6737CFE" name="GUID-9D0B59D6-0267-4B42-A742-B964E6737CFE"></a><h4 id="JJDBC-GUID-9D0B59D6-0267-4B42-A742-B964E6737CFE" class="sect4"><span class="enumeration_section">14.3.1 </span>Streamlined Mechanism
                  </h4>
                  <div>
                     <div class="section">
                        <p>The Oracle Database 12<span class="italic">c </span>Release 1 (12.1) JDBC drivers provide a streamlined mechanism for writing and reading the entire LOB contents. This is referred to as the data interface. The data interface uses standard JDBC methods such as <code class="codeph">getString</code> and <code class="codeph">setBytes</code> to read and write LOB data. It is simpler to code and faster in many cases. Unlike the standard <code class="codeph">java.sql.Blob</code>, <code class="codeph">java.sql.Clob</code> and <code class="codeph">java.sql.NClob</code> interfaces, it does not provide random access capability, that is, it does not use LOB locator and cannot access data beyond 2147483648 elements.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28537"></a><a id="JJDBC28536"></a><div class="props_rev_3"><a id="GUID-8FD40D53-8D64-4187-9F6F-FF78242188AD" name="GUID-8FD40D53-8D64-4187-9F6F-FF78242188AD"></a><h4 id="JJDBC-GUID-8FD40D53-8D64-4187-9F6F-FF78242188AD" class="sect4"><span class="enumeration_section">14.3.2 </span>Input
                  </h4>
                  <div>
                     <div class="section">
                        <p>In Oracle Database 12<span class="italic">c </span>Release 1 (12.2), the <code class="codeph">setBytes</code>, <code class="codeph">setBinaryStream</code>, <code class="codeph">setString</code>, <code class="codeph">setCharacterStream</code>, and <code class="codeph">setAsciiStream</code> methods of <code class="codeph">PreparedStatement</code> are extended to enhance the ability to work with <code class="codeph">BLOB</code>, <code class="codeph">CLOB</code>, and <code class="codeph">NCLOB</code> target columns. If the length of the data is known, then for better performance, use the versions of setBinaryStream or setCharacterStream methods that accept the data length as a parameter.
                        </p>
                        <div class="infoboxnote" id="GUID-8FD40D53-8D64-4187-9F6F-FF78242188AD__GUID-104B9DA9-5EC9-4D79-9646-35B6C593DF5F">
                           <p class="notep1">Note:</p>
                           <p>This enhancement does not affect the <code class="codeph">BFILE</code> data because it is read-only.
                           </p>
                        </div>
                        <p>For the JDBC Oracle Call Interface (OCI) and Thin drivers, there is no limitation on the size of the <code class="codeph">byte</code> array or <code class="codeph">String</code>, and no limitation on the length specified for the stream functions, except the limits imposed by the Java language.
                        </p>
                        <div class="infoboxnote" id="GUID-8FD40D53-8D64-4187-9F6F-FF78242188AD__GUID-E59461EB-6A39-4855-BBFB-DFFAFA480538">
                           <p class="notep1">Note:</p>
                           <p> In Java, the array size is limited to positive Java <code class="codeph">int</code> or 2147483648 elements.
                           </p>
                        </div>
                        <p>For the server-side internal driver, currently there is a limitation of 32767 bytes for operations on SQL statements, such as an <code class="codeph">INSERT</code> statement. This limitation does not apply for PL/SQL statements. There is a simple workaround for an <code class="codeph">INSERT</code> statement, where it is wrapped in a PL/SQL block in the following way:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
 INSERT id, c INTO clob_tab VALUES(?,?);
END;
</pre><p>You must bear in mind the following automatic switching of the input mode for large data:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>There are three input modes as follows:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Direct binding</p>
                                    <p>This binding is limited in size but most efficient. It places the data for all input columns inline in the block of data sent to the server. All data, including multiple executions of a batch, is sent in a single network operation.</p>
                                 </li>
                                 <li>
                                    <p>Stream binding</p>
                                    <p>This binding places data at the end. It limits batch size to one and may require multiple round trips to complete.</p>
                                 </li>
                                 <li>
                                    <p>LOB binding</p>
                                    <p>This binding creates a temporary LOB, copies data to the LOB, and binds the LOB locator. The temporary LOB is automatically freed after execution. The operation to create the temporary LOB and then to writing to the LOB requires multiple round trips. The input of the locators may be batched.</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>For SQL statements:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">setBytes</code> and <code class="codeph">setBinaryStream</code> methods use direct binding for data less than 32767 bytes.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">setBytes</code> and <code class="codeph">setBinaryStream</code> methods use stream binding for data larger than 32767 bytes.
                                    </p>
                                 </li>
                                 <li>
                                    <p>In JDBC 4.0 has introduced new forms of the <code class="codeph">setAsciiStream</code>, <code class="codeph">setBinaryStream</code>, and <code class="codeph">setCharacterStream</code> methods. The form, where the methods take a long argument as length, uses LOB binding for length larger than 2147483648. The form, where the length is not specified, always uses LOB binding.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">setString</code>, <code class="codeph">setCharacterStream</code>, and <code class="codeph">setAsciiStream</code> methods use direct binding for data smaller than 32767 characters.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">setString</code>, <code class="codeph">setCharacterStream</code>, and <code class="codeph">setAsciiStream</code> methods use stream binding for data larger than 32766 characters.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The new form of <code class="codeph">setCharacterStream</code> method, which takes a <code class="codeph">long</code> argument for length, uses LOB binding for length larger than 2147483647, in JDBC 4.0. The form, where the length is not specified, always uses LOB binding.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>PL/SQL statements</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">setBytes</code> and <code class="codeph">setBinary</code> stream methods use direct binding for data less than 32767 bytes.
                                    </p>
                                    <div class="infoboxnote" id="GUID-8FD40D53-8D64-4187-9F6F-FF78242188AD__GUID-96DE1EC2-1E5A-4CC8-ACCB-F8D8ABE0DD5E">
                                       <p class="notep1">Note:</p>
                                       <p>If the underlying Database is Oracle Database release 10.x, then this data size limit is 32512 bytes, though you are working with Oracle Database 12<span class="italic">c </span>Release 1 (12.1) JDBC drivers.
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">setBytes</code> and <code class="codeph">setBinaryStream</code> methods use LOB binding for data larger than 32766 bytes.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">setString</code>, <code class="codeph">setCharacterStream</code>, and <code class="codeph">setAsciiStream</code> methods use direct binding for data smaller than 32767 bytes in the database character set.
                                    </p>
                                    <div class="infoboxnote" id="GUID-8FD40D53-8D64-4187-9F6F-FF78242188AD__GUID-8086F663-CA32-4C13-B94B-0B2EFAFF50FE">
                                       <p class="notep1">Note:</p>
                                       <p>If the underlying Database is Oracle Database release 10.x, then this data size limit is 32512 bytes, though you are working with Oracle Database 12<span class="italic">c </span>Release 1 (12.1) JDBC drivers.
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">setString</code>, <code class="codeph">setCharacterStream</code>, and <code class="codeph">setAsciiStream</code> methods use LOB binding for data larger than 32766 bytes in the database character set.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>The automatic switching of the input mode for large data has impact on certain programs. Previously, you used to get <code class="codeph">ORA-17157</code> errors for attempts to use <code class="codeph">setString</code> method for <code class="codeph">String</code> values larger than 32766 characters. Now, depending on the type of the target parameter, an error may occur while the statement is executed or the operation may succeed.
                        </p>
                        <p>Another impact is that the automatic switching may result in additional server-side parsing to adapt to the change in the parameter type. This would result in a performance effect, if the data sizes vary above and below the limit for repeated executions of the statement. Switching to the stream modes will effect batching as well.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8FD40D53-8D64-4187-9F6F-FF78242188AD__GUID-AE879C59-9128-4530-831C-83BD41B9A55E">Forcing conversion to LOB</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The <code class="codeph">setBytesForBlob</code> and <code class="codeph">setStringForClob</code> methods, present in the <code class="codeph">oracle.jdbc.OraclePreparedStatement</code> interface, use LOB binding for any data size.
                        </p>
                        <p>The <code class="codeph">SetBigStringTryClob</code> connection property of Oracle Database 10<span class="italic">g</span> Release 1 is no longer used or needed.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28538"></a><div class="props_rev_3"><a id="GUID-68B496D6-B82A-4D98-83A8-D5E01D5FF4A8" name="GUID-68B496D6-B82A-4D98-83A8-D5E01D5FF4A8"></a><h4 id="JJDBC-GUID-68B496D6-B82A-4D98-83A8-D5E01D5FF4A8" class="sect4"><span class="enumeration_section">14.3.3 </span>Output
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">getBytes</code>, <code class="codeph">getBinaryStream</code>, <code class="codeph">getString</code>, <code class="codeph">getCharacterStream</code>, and <code class="codeph">getAsciiStream</code> methods of <code class="codeph">ResultSet</code> and <code class="codeph">CallableStatement</code> are extended to work with <code class="codeph">BLOB</code>, <code class="codeph">CLOB</code>, and <code class="codeph">BFILE</code> columns or <code class="codeph">OUT</code> parameters. These methods work for any <code class="codeph">LOB</code> of length less than 2147483648.
                        </p>
                        <div class="infoboxnote" id="GUID-68B496D6-B82A-4D98-83A8-D5E01D5FF4A8__GUID-C282EA45-1FA3-4796-BB23-5105D1F0AEF6">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">getString</code> and <code class="codeph">getNString</code> methods cannot be used for retrieving BLOB column values.
                           </p>
                        </div>
                        <p>The data interface operates by accessing the <code class="codeph">LOB</code> locators within the driver and is transparent to application programming. It works with any supported version of the database, that is, Oracle Database 10.1.x and later. For Oracle Database 11<span class="italic">g</span> Release 1 or later versions, LOB prefetching may be used to reduce or eliminate any additional database round trips required.
                        </p>
                        <p>You can read <code class="codeph">BFILE</code> data and read and write <code class="codeph">BLOB</code> or <code class="codeph">CLOB</code> data using the <code class="codeph">defineColumnType</code> method. To read, use <code class="codeph">defineColumnType(nn,</code> <code class="codeph">Types.LONGVARBINARY)</code> or <code class="codeph">defineColumnType(nn,Types.LONGVARCHAR)</code> method on the column. This produces a direct stream on the data as if it were a <code class="codeph">LONG RAW</code> or <code class="codeph">LONG</code> column. This technique is limited to Oracle Database 10<span class="italic">g</span> release 1 (10.1) and later.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="globalization-support.html#GUID-DB3BCB15-C62F-47B1-B527-5F2DF28E5CFB">New Methods for National Character Set Type Data in JDK 6</a></li>
                           <li><a href="LOBs-and-BFiles.html#GUID-6164F905-6CDB-43A0-A80A-780DB358F686">LOB Locator Interface</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDBC28539"></a><div class="props_rev_3"><a id="GUID-4AA41511-A68C-435B-BDFA-A27F8BFD1DD5" name="GUID-4AA41511-A68C-435B-BDFA-A27F8BFD1DD5"></a><h4 id="JJDBC-GUID-4AA41511-A68C-435B-BDFA-A27F8BFD1DD5" class="sect4"><span class="enumeration_section">14.3.4 </span>CallableSatement and IN OUT Parameter
                  </h4>
                  <div>
                     <div class="section">
                        <p>It is a PL/SQL requirement that the Java types used as input and output for an IN OUT parameter must be the same. The automatic switching of types done by the extensions described in this chapter may cause problems with this.</p>
                        <p>Consider that you have an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter of a stored procedure and you wish to use <code class="codeph">setString</code> method for setting the value for this parameter. For any <code class="codeph">IN</code> and <code class="codeph">OUT</code> parameter, the binds must be of the same type. The automatic switching of the input mode will cause problems unless you are sure of the data sizes. For example, if it is known that neither the input nor output data will ever be larger than 32766 bytes, then you could use <code class="codeph">setString</code> method for the input parameter and register the <code class="codeph">OUT</code> parameter as <code class="codeph">Types.VARCHAR</code> and use <code class="codeph">getString</code> method for the output parameter.
                        </p>
                        <p>A better solution is to change the stored procedure to have separate <code class="codeph">IN</code> and <code class="codeph">OUT</code> parameters. That is, if you have:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE PROCEDURE clob_proc( c IN OUT CLOB );
</pre><p>then, change it to:</p><pre class="oac_no_warn" dir="ltr">CREATE PROCEDURE clob_proc( c_in IN CLOB, c_out OUT CLOB );
</pre><p>Another workaround is to use a container block to make the call. The <code class="codeph">clob_proc</code> procedure can be wrapped with a Java String to use for the <code class="codeph">prepareCall</code> statement, as follows:
                        </p><pre class="oac_no_warn" dir="ltr">"DECLARE c_temp; BEGIN c_temp := ?; clob_proc( c_temp); ? := c_temp; END;"
</pre><p>In either case, you may use the <code class="codeph">setString</code> method on the first parameter and the <code class="codeph">registerOutParameter</code> method with <code class="codeph">Types.CLOB</code> on the second.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28540"></a><div class="props_rev_3"><a id="GUID-214CA60C-AB44-4406-A72F-6AF138D7DA55" name="GUID-214CA60C-AB44-4406-A72F-6AF138D7DA55"></a><h4 id="JJDBC-GUID-214CA60C-AB44-4406-A72F-6AF138D7DA55" class="sect4"><span class="enumeration_section">14.3.5 </span>Size Limitations
                  </h4>
                  <div>
                     <div class="section">
                        <p>Be aware of the effect on the performance of the Java memory management system due to creation of very large <code class="codeph">byte</code> array or <code class="codeph">String</code>. Read the information provided by your Java virtual machine (JVM) vendor about the impact of very large data elements on memory management, and consider using the stream interfaces instead.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC28542"></a><a id="JJDBC28543"></a><a id="JJDBC28541"></a><div class="props_rev_3"><a id="GUID-6164F905-6CDB-43A0-A80A-780DB358F686" name="GUID-6164F905-6CDB-43A0-A80A-780DB358F686"></a><h3 id="JJDBC-GUID-6164F905-6CDB-43A0-A80A-780DB358F686" class="sect3"><span class="enumeration_section">14.4 </span>LOB Locator Interface
               </h3>
               <div>
                  <div class="section">
                     <p>Locators are small data structures, which contain information that may be used to access the actual data of the LOB. In a database table, the locator is stored directly in the table, while the data may be in the table or in separate storage. It is common to use separate tablespaces for large LOBs.</p>
                     <p>In JDBC 4.0, LOBs should be read or written using the interfaces <code class="codeph">java.sql.Blob</code>, <code class="codeph">java.sql.Clob</code>, and <code class="codeph">java.sql.NClob</code>. These provide random access to the data in the LOB.
                     </p>
                     <p>The Oracle implementation classes <code class="codeph">oracle.sql.BLOB</code>, <code class="codeph">oracle.sql.CLOB</code>, and <code class="codeph">oracle.sql.NCLOB</code> store the locator and access the data with it. The <code class="codeph">oracle.sql.BLOB</code> and <code class="codeph">oracle.sql.CLOB</code> classes implement the <code class="codeph">java.sql.Blob</code> and <code class="codeph">java.sql.Clob</code> interfaces respectively. In <code class="codeph">ojdbc6.jar</code>, <code class="codeph">oracle.sql.NCLOB</code> implements <code class="codeph">java.sql.NClob</code>, but in <code class="codeph">ojdbc5.jar</code>, it implements the <code class="codeph">java.sql.Clob</code> interface.
                     </p>
                     <div class="infoboxnote" id="GUID-6164F905-6CDB-43A0-A80A-780DB358F686__GUID-D12E3666-BF70-463E-BCAA-05A71C520E66">
                        <p class="notep1">Note:</p>
                        <p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the <code class="codeph">oracle.sql.BLOB</code> and <code class="codeph">oracle.sql.CLOB</code> classes are deprecated and replaced with the <code class="codeph">oracle.jdbc.OracleBlob</code> and <code class="codeph">oracle.jdbc.OracleClob</code> interfaces. Oracle recommends you to use the methods available in the <code class="codeph">java.sql</code> package, where possible, for standard compatibility and methods available in the <code class="codeph">oracle.jdbc</code> package for Oracle specific extensions. Refer to MoS Note 1364193.1 for more information about these interface.
                        </p>
                     </div>
                     <p>In Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the Oracle JDBC drivers support the JDBC 4.0 <code class="codeph">java.sql.NClob</code> interface in <code class="codeph">ojdbc6.jar</code> and <code class="codeph">ojdbc7.jar</code>, which are compiled with JDK 6 (must be used with JRE 6) and JDK 7 (must be used with JRE 7) respectively.
                     </p>
                     <p>In contrast, <code class="codeph">oracle.sql.BFILE</code> is an Oracle extension, without a corresponding <code class="codeph">java.sql</code> interface.
                     </p>
                     <div class="infoboxnotealso" id="GUID-6164F905-6CDB-43A0-A80A-780DB358F686__GUID-B28FEF43-3F12-400D-8013-EB1EC58A5BAE">
                        <p class="notep1">See Also:</p>
                        <p>The JDBC Javadoc for more details.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-6164F905-6CDB-43A0-A80A-780DB358F686__CHDGDGBA">
                     <p class="subhead2" id="GUID-6164F905-6CDB-43A0-A80A-780DB358F686__GUID-9F391CBB-272D-4E99-B87B-3877FE1D6675">LOB prefetching</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>For Oracle Database 12<span class="italic">c </span>Release 1 (12.1) JDBC drivers, the number of round trips is reduced by prefetching the metadata such as the LOB length and the chunk size as well as the beginning of the LOB data along with the locator during regular fetch operations. If you select LOB columns into a result set, some or all of the data is prefetched to the client, when the locator is fetched. It saves the first roundtrip to retrieve data by deferring all preceding operations until fetching from the locator.
                     </p>
                     <div class="infoboxnote" id="GUID-6164F905-6CDB-43A0-A80A-780DB358F686__GUID-BBBD4F19-4B7F-45DC-94CF-66A93DFF1FD6">
                        <p class="notep1">Note:</p>
                        <p>LOB Prefetching is inversely proportional to the size of the LOB data, that is, the benefits of prefetching are more for small LOBs and less for larger LOBs.</p>
                     </div>
                     <p>The prefetch size is specified in bytes for BLOBs and in characters for CLOBs. It can be specified by setting the connection property <code class="codeph">oracle.jdbc.defaultLobPrefetchSize</code>. The value of this property can be overridden in the following two ways:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>At the statement level: By using the <code class="codeph">oracle.jdbc.OracleStatement.setLobPrefetchSize(int)</code> method
                           </p>
                        </li>
                        <li>
                           <p>At the column level: By using the form of <code class="codeph">defineColumnType</code> method that takes length as argument
                           </p>
                        </li>
                     </ul>
                     <p>The default prefetch size is 4000.</p>
                     <div class="infoboxnote" id="GUID-6164F905-6CDB-43A0-A80A-780DB358F686__GUID-0E4B658C-B6E9-4F5C-9DB2-4A37803FDB78">
                        <p class="notep1">Note:</p>
                        <p>Be aware of the possible memory consumption while setting large LOB prefetch sizes in combination with a large row prefetch size and a large number of LOB columns.</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-6164F905-6CDB-43A0-A80A-780DB358F686__GUID-62FF3225-98B9-4A1D-AA5F-6D08C3C0EB1A">
                        <p class="notep1">See Also:</p>
                        <p>The JDBC Javadoc for more details</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6164F905-6CDB-43A0-A80A-780DB358F686__GUID-AB6ADC36-B093-47F1-B5D6-F6BE1B4F620D">New LOB APIs in JDBC 4.0 </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Oracle Database 11<span class="italic">g</span> Release 1 introduced the <code class="codeph">java.sql.NClob</code> interface. The Oracle drivers implement the <code class="codeph">oracle.sql.NCLOB</code> and <code class="codeph">java.sql.NCLOB</code> interface in both <code class="codeph">ojdbc6.jar</code> and <code class="codeph">ojdbc7.jar</code>.
                     </p>
                     <p>The Oracle drivers implement the new factory methods, <code class="codeph">createBlob</code>, <code class="codeph">createClob</code>, and <code class="codeph">createNClob</code> in the <code class="codeph">java.sql.Connection</code> interface to create temporary LOBs.
                     </p>
                     <p>Starting from JDK 6, the <code class="codeph">java.sql.Blob</code>, <code class="codeph">java.sql.Clob</code>, and <code class="codeph">java.sql.NClob</code> interfaces have a new method <code class="codeph">free</code> to free an LOB and release the associated resources. The Oracle drivers use this method to free an LOB, if it is a temporary LOB.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC28544"></a><div class="props_rev_3"><a id="GUID-8302600F-2799-445E-AFB0-BA8DE15DC71E" name="GUID-8302600F-2799-445E-AFB0-BA8DE15DC71E"></a><h3 id="JJDBC-GUID-8302600F-2799-445E-AFB0-BA8DE15DC71E" class="sect3"><span class="enumeration_section">14.5 </span>About Working With Temporary LOBs
               </h3>
               <div>
                  <div class="section">
                     <p>You can use temporary LOBs to store transient data. The data is stored in temporary table space rather than regular table space. You should free temporary LOBs after you no longer need them. If you do not, then the space the LOB consumes in temporary table space will not be reclaimed.</p>
                     <p>You can insert temporary LOBs into a table. When you do this, a permanent copy of the LOB is created and stored.</p>
                     <div class="infoboxnote" id="GUID-8302600F-2799-445E-AFB0-BA8DE15DC71E__GUID-8CA81244-95F2-4CCC-8A82-FD1E5F9700C9">
                        <p class="notep1">Note:</p>
                        <p>Inserting a temporary LOB may be preferable in some situations. For example, when the LOB data is relatively small and the overhead of copying the data is less than the cost of a database round trip to retrieve the empty locator. Remember that the data is initially stored in the temporary table space on the server and then moved into permanent storage.</p>
                     </div>
                     <p>You create a temporary LOB with the <code class="codeph">static</code> method <code class="codeph">createTemporary</code>, defined in both the <code class="codeph">oracle.sql.BLOB</code> and <code class="codeph">oracle.sql.CLOB</code> classes. You free a temporary LOB with the <code class="codeph">freeTemporary</code> method.
                     </p>
                     <p>You can also create a temporary LOB/CLOB or NCLOB by using the connection factory methods available in JDBC 4.0.</p>
                     <p>You can test whether a LOB is temporary or not by calling the <code class="codeph">isTemporary</code> method. If the LOB was created by calling the <code class="codeph">createTemporary</code> method, then the <code class="codeph">isTemporary</code> method returns <code class="codeph">true</code>, else it returns <code class="codeph">false</code>.
                     </p>
                     <p>You can free a temporary LOB by calling the <code class="codeph">freeTemporary</code> method. Free any temporary LOBs before ending the session or call.
                     </p>
                     <div class="infoboxnote" id="GUID-8302600F-2799-445E-AFB0-BA8DE15DC71E__GUID-968C6FA7-3E47-47C0-95C9-444E1A97EE0E">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you do not free a temporary LOB, then it will make the storage used by that LOB in the database unavailable. Frequent failure to free temporary LOBs will result in filling up temporary table space with unavailable LOB storage.</p>
                           </li>
                           <li>
                              <p>When fetching data from a <code class="codeph">ReultSet</code> with columns that are temporary LOBs, use <code class="codeph">getClob</code> or <code class="codeph">getBlob</code> methods instead of <code class="codeph">getString</code> or <code class="codeph">getBytes</code>.
                              </p>
                           </li>
                           <li>
                              <p>The JDBC 4.0 method <code class="codeph">free</code>, present in <code class="codeph">java.sql.Blob</code>, <code class="codeph">java.sql.Clob</code>, and <code class="codeph">java.sql.NClob</code> interfaces, supercedes the <code class="codeph">freeTemporary</code> method.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="JDBC-standards-support.html#GUID-12AE5875-3CFC-48EA-949B-539B7A56FF82">LOB Creation</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDBC28547"></a><div class="props_rev_3"><a id="GUID-60B921CA-6907-4910-B71C-CF0CA3B99E80" name="GUID-60B921CA-6907-4910-B71C-CF0CA3B99E80"></a><h3 id="JJDBC-GUID-60B921CA-6907-4910-B71C-CF0CA3B99E80" class="sect3"><span class="enumeration_section">14.6 </span>About Opening Persistent LOBs with the Open and Close Methods
               </h3>
               <div>
                  <div class="section">
                     <p>This section discusses how to open and close your LOBs. The JDBC implementation of this functionality is provided using the following methods of <code class="codeph">oracle.sql.BLOB</code> and <code class="codeph">oracle.sql.CLOB</code> interfaces:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">void open (int mode)</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">void close()</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">boolean isOpen()</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-60B921CA-6907-4910-B71C-CF0CA3B99E80__GUID-3F8966D0-3864-4AF2-AC88-8D5E4DA90067">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), the <code class="codeph">oracle.sql.BLOB</code> and <code class="codeph">oracle.sql.CLOB</code> classes are deprecated and replaced with the <code class="codeph">oracle.jdbc.OracleBlob</code> and <code class="codeph">oracle.jdbc.OracleClob</code> interfaces. Oracle recommends you to use the methods available in the <code class="codeph">java.sql</code> package, where possible, for standard compatibility and methods available in the <code class="codeph">oracle.jdbc</code> package for Oracle specific extensions. Refer to MoS Note 1364193.1 for more information about these interface.
                              </p>
                           </li>
                           <li>
                              <p>You do not have to necessarily open and close your LOBs. You may choose to open and close them for performance reasons.</p>
                           </li>
                        </ul>
                     </div>
                     <p>If you do not wrap LOB operations inside an <code class="codeph">Open/Close</code> call operation, then each modification to the LOB will implicitly open and close the LOB, thereby firing any triggers on a domain index. Note that in this case, any domain indexes on the LOB will become updated as soon as LOB modifications are made. Therefore, domain LOB indexes are always valid and may be used at any time within the same transaction.
                     </p>
                     <p>If you wrap your LOB operations inside the <code class="codeph">Open/Close</code> call operation, then triggers will not be fired for each LOB modification. Instead, the trigger on domain indexes will be fired at the <code class="codeph">Close</code> call. For example, you might design your application so that domain indexes are not be updated until you call the <code class="codeph">close</code> method. However, this means that any domain indexes on the LOB will not be valid in-between the <code class="codeph">Open/Close</code> calls.
                     </p>
                     <p>You open a LOB by calling the <code class="codeph">open</code> or <code class="codeph">open(int)</code> method. You may then read and write the LOB without any triggers associated with that LOB firing. When you finish accessing the LOB, close the LOB by calling the <code class="codeph">close</code> method. When you close the LOB, any triggers associated with the LOB will fire.
                     </p>
                     <p>You can check if a LOB is open or closed by calling the <code class="codeph">isOpen</code> method. If you open the LOB by calling the <code class="codeph">open(int)</code> method, then the value of the argument must be either <code class="codeph">MODE_READONLY</code> or <code class="codeph">MODE_READWRITE</code>, as defined in the <code class="codeph">oracle.sql.BLOB</code> and <code class="codeph">oracle.sql.CLOB</code> classes. If you open the LOB with <code class="codeph">MODE_READONLY</code>, then any attempt to write to the LOB will result in a SQL exception.
                     </p>
                     <div class="infoboxnote" id="GUID-60B921CA-6907-4910-B71C-CF0CA3B99E80__GUID-EA650665-1AED-4310-9B8A-7606F45ABE31">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An error occurs if you commit the transaction before closing all LOBs that were opened by the transaction. The openness of the open LOBs is discarded, but the transaction is successfully committed. Hence, all the changes made to the LOB and non-LOB data in the transaction are committed, but the triggers for domain indexing are not fixed.</p>
                           </li>
                           <li>
                              <p>The <code class="codeph">open</code> and <code class="codeph">close</code> methods apply only to persistent LOBs. The <code class="codeph">close</code> method is not similar to the <code class="codeph">free</code> or <code class="codeph">freeTemporary</code> methods used for temporary LOBs. The <code class="codeph">free</code> and <code class="codeph">freeTemporary</code> methods release storage and make a LOB unusable. On the other hand, the <code class="codeph">close</code> method indicates to the database that a modification on a LOB is complete, and triggers should be fired and indexes should be updated. A LOB is still usable after a call to the <code class="codeph">close</code> method.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC28550"></a><a id="JJDBC28551"></a><a id="JJDBC28549"></a><div class="props_rev_3"><a id="GUID-F06154EF-1D48-4CF4-A991-3839776A442F" name="GUID-F06154EF-1D48-4CF4-A991-3839776A442F"></a><h3 id="JJDBC-GUID-F06154EF-1D48-4CF4-A991-3839776A442F" class="sect3"><span class="enumeration_section">14.7 </span>About Working with BFILEs
               </h3>
               <div>
                  <div class="section">
                     <p>This section describes how to read data from BFILEs, using file locators. This section covers the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="LOBs-and-BFiles.html#GUID-F06154EF-1D48-4CF4-A991-3839776A442F__CHDDGECF">Retrieving BFILE Locators</a></p>
                        </li>
                        <li>
                           <p><a href="LOBs-and-BFiles.html#GUID-F06154EF-1D48-4CF4-A991-3839776A442F__CHDGDGEI">Writing to BFILES</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-F06154EF-1D48-4CF4-A991-3839776A442F__CHDDGECF">
                     <p class="subhead2" id="GUID-F06154EF-1D48-4CF4-A991-3839776A442F__GUID-09910F40-94F2-4ACE-A4C7-27FAB7C08092">Retrieving BFILE Locators</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The BFILE data type and <code class="codeph">oracle.sql.BFILE</code> classes are Oracle proprietary. So, there is no standard interface for them. You must use Oracle extensions for this type of data.
                     </p>
                     <p>If you have a standard JDBC result set or callable statement object that includes BFILE locators, then you can access the locators by using the standard result set <code class="codeph">getObject </code>method. This method returns an <code class="codeph">oracle.sql.BFILE</code> object.
                     </p>
                     <p>You can also access the locators by casting your result set to <code class="codeph">OracleResultSet</code> or your callable statement to <code class="codeph">OracleCallableStatement</code> and using the <code class="codeph">getOracleObject</code> or <code class="codeph">getBFILE</code> method.
                     </p>
                     <div class="infoboxnote" id="GUID-F06154EF-1D48-4CF4-A991-3839776A442F__GUID-27E01761-E7E3-4EB1-9EB7-C3909B6AE7D6">
                        <p class="notep1">Note:</p>
                        <p>If you are using <code class="codeph">getObject</code> or <code class="codeph">getOracleObject</code> methods, then remember to cast the output, as necessary.
                        </p>
                     </div>
                     <p>Once you have a locator, you can access the BFILE data via the API in <code class="codeph">oracle.sql.BFILE</code>. These APIs are similar to the read methods of the <code class="codeph">java.sql.BLOB</code> interface.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-F06154EF-1D48-4CF4-A991-3839776A442F__CHDGDGEI">
                     <p class="subhead2" id="GUID-F06154EF-1D48-4CF4-A991-3839776A442F__GUID-58B84213-759D-43A1-A1CE-BA1555FFAC70">Writing to BFILES</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>You cannot write data to the contents of the BFILE, but you can use an instance of <code class="codeph">oracle.sql.BFILE</code> as input to a SQL statement or to a PL/SQL procedure. You can achieve this by performing one of the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use the standard <code class="codeph">setObject</code> method.
                           </p>
                        </li>
                        <li>
                           <p>Cast the statement to <code class="codeph">OraclePreparedStatement</code> or <code class="codeph">OracleCallableStatement</code>, and use the <code class="codeph">setOracleObject</code> or <code class="codeph">setBFILE</code> method. These methods take the parameter index and an <code class="codeph">oracle.sql.BFILE</code> object as input.
                           </p>
                           <div class="infoboxnote" id="GUID-F06154EF-1D48-4CF4-A991-3839776A442F__GUID-1ABCC48A-6D8B-4C81-BAEE-7CA5421A367A">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>There is no standard <code class="codeph">java.sql</code> interface for BFILEs.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use the <code class="codeph">getBFILE</code> methods in the <code class="codeph">OracleResultSet</code> and <code class="codeph">OracleCallableStatement</code> interfaces to retrieve an <code class="codeph">oracle.sql.BFILE</code> object. The <code class="codeph">setBFILE</code> methods in <code class="codeph">OraclePreparedStatement</code> and <code class="codeph">OracleCallableStatement</code> interfaces accept <code class="codeph">oracle.sql.BFILE</code> object as an argument. Use these methods to write to a BFILE.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Oracle recommends that you use the <code class="codeph">getBFILE</code>, <code class="codeph">setBFILE</code>, and <code class="codeph">updateBFILE</code> methods instead of the <code class="codeph">getBfile</code>, <code class="codeph">setBfile</code>, and <code class="codeph">updateBfile</code> methods. For example, use the <code class="codeph">setBFILE</code> method instead of the <code class="codeph">setBfile</code> method.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                     <p>BFILEs are read-only. The body of the data resides in the operating system (OS) file system and can be written to using only OS tools and commands. You can create a BFILE for an existing external file by executing the appropriate SQL statement either from JDBC or by using any other way to execute SQL. However, you cannot create an OS file that a BFILE would refer to by SQL or JDBC. Those are created only externally by a process that has access to server file systems.</p>
                     <div class="infoboxnote" id="GUID-F06154EF-1D48-4CF4-A991-3839776A442F__GUID-9EF0AD2C-8963-43D9-9008-0F352BB6AAF8">
                        <p class="notep1">Note:</p>
                        <p>The code examples present in this chapter, in the earlier versions of this guide, have been removed in favor of references to the sample code available for download on OTN.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
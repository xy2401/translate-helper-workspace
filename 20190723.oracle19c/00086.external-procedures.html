<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Developing Applications with Multiple Programming Languages</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Development Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Development Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00">
      <meta name="dcterms.title" content="Database Development Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96334-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="application-architecture.html" title="Previous" type="text/html">
      <link rel="next" href="xa.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="application-architecture.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="xa.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Development Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-part.html" property="item" typeof="WebPage"><span property="name">Advanced Topics for Application Developers</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Developing Applications with Multiple Programming Languages</li>
            </ol>
            <a id="GUID-230B2B41-2A6F-4756-AEC0-DBC99DCA8A37" name="GUID-230B2B41-2A6F-4756-AEC0-DBC99DCA8A37"></a>
            
            <h2 id="ADFNS-GUID-230B2B41-2A6F-4756-AEC0-DBC99DCA8A37" class="sect2"><span class="enumeration_chapter">21 </span>Developing Applications with Multiple Programming Languages
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='external-procedures'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>This chapter explains how you can develop database applications that call external procedures written in other programming languages.</p>
               <div class="section">
                  <p class="subhead1" id="GUID-230B2B41-2A6F-4756-AEC0-DBC99DCA8A37__GUID-BFBF17B1-1D9A-4DAD-B83C-351994A00CF4">Topics:</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="external-procedures.html#GUID-04F2EA73-D17A-4ACF-AF05-BBFBC8F8B6AA">Overview of Multilanguage Programs</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-456B8988-6418-45C7-86EF-77EA0BE0BCEC">What Is an External Procedure?</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-0B590058-1ED5-43D7-B669-E6F94E3B79A9">Overview of Call Specification for External Procedures</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-8D2D291B-4059-4006-98E5-722D682186C2">Loading External Procedures</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-755619F5-8FF7-4380-BCC5-7E6BD86659DE">Publishing External Procedures</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-BC6C93E6-8EE0-47F0-A713-D29AE4942B77">Publishing Java Class Methods</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-CD08EFEE-66AB-47B3-9628-87895C826C22">Publishing External C Procedures</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-ABE1166B-0B2C-4E4C-84D9-2E9AFF45F356">Locations of Call Specifications</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-D6AC5D91-E0A1-44D0-94BE-B84406721B3B">Passing Parameters to External C Procedures with Call Specifications</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-25A8F1CE-2464-47FD-805A-2FE08996AF63">Running External Procedures with CALL Statements</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-7B5ADF42-E345-4D87-8736-78ED62B78A21">Handling Errors and Exceptions in Multilanguage Programs</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-F85C0E81-FBE9-4396-A5B1-6E379B44253D">Using Service Routines with External C Procedures</a></p>
                  </li>
                  <li>
                     <p><a href="external-procedures.html#GUID-2F73AD9E-924D-4955-891E-BCFCB0439F59">Doing Callbacks with External C Procedures</a></p>
                  </li>
               </ul>
            </div><a id="ADFNS1401"></a><div class="props_rev_3"><a id="GUID-04F2EA73-D17A-4ACF-AF05-BBFBC8F8B6AA" name="GUID-04F2EA73-D17A-4ACF-AF05-BBFBC8F8B6AA"></a><h3 id="ADFNS-GUID-04F2EA73-D17A-4ACF-AF05-BBFBC8F8B6AA" class="sect3">Overview of Multilanguage Programs</h3>
               <div>
                  <p>Oracle Database lets you work in different languages:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>PL/SQL, as described in the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS-GUID-2FBCFBBE-6B42-4DB8-83F3-55B63B75B1EB" target="_blank"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a></p>
                     </li>
                     <li>
                        <p>C, through the Oracle Call Interface (OCI), as described in the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI-GUID-27645179-6957-4004-8BB8-38775266B038" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></p>
                     </li>
                     <li>
                        <p>C++, through the Oracle C++ Call Interface (OCCI), as described in the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNCPP-GUID-99077609-BFCC-4FF7-9D23-C45623DDD465" target="_blank"><span><cite>Oracle C++ Call Interface Programmer's Guide</cite></span></a></p>
                     </li>
                     <li>
                        <p>C or C++, through the Pro*C/C++ precompiler, as described in the<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPCC-GUID-20CBCC27-EC6B-4651-92CC-7E008BD73611" target="_blank"><span><cite>Pro*C/C++ Programmer's Guide</cite></span></a></p>
                     </li>
                     <li>
                        <p>COBOL, through the Pro*COBOL precompiler, as described in the<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPCB-GUID-5B383B0F-9628-443B-8CB7-D2C01607EED6" target="_blank"><span><cite>Pro*COBOL Programmer's Guide</cite></span></a></p>
                     </li>
                     <li>
                        <p>Visual Basic, through Oracle Provider for OLE DB, as described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=OLEDB003" target="_blank"><span class="italic">Oracle Provider for OLE DB Developer's Guide for Microsoft Windows</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>.NET , through Oracle Data Provider for .NET, as described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ODPNT-GUID-635BAE6C-7D0B-4CF2-ADD8-8DB531B9C52E" target="_blank"><span><cite>Oracle Data Provider for .NET Developer's Guide for Microsoft Windows</cite></span></a></p>
                     </li>
                     <li>
                        <p>Java, through the JDBC and SQLJ client-side application programming interfaces (APIs). See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC-GUID-864DB502-5E50-4044-8132-33D6AAF8927A" target="_blank"><span><cite>Oracle Database JDBC Developer’s Guide</cite></span></a> and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JSQLJ-GUID-B85E73E1-E3B4-45DA-A07A-40678F164AAE" target="_blank"><span><cite>Oracle Database SQLJ Developer’s Guide</cite></span></a>.
                        </p>
                     </li>
                     <li>
                        <p>Java in the database, as described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDEV-GUID-912A14D4-2621-4955-85BD-A04E17EE6D21" target="_blank"><span><cite>Oracle Database Java Developer’s Guide</cite></span></a>. This includes the use of Java stored procedures (Java methods published to SQL and stored in the database), as described in a chapter in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDEV13234" target="_blank"><span><cite>Oracle Database Java Developer’s Guide</cite></span></a>.
                        </p>
                        <p>The Oracle JVM Web Call-Out utility is also available for generating Java classes to represent database entities, such as SQL objects and PL/SQL packages, in a Java client program; publishing from SQL, PL/SQL, and server-side Java to web services; and enabling the invocation of external web services from inside the database. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDEV-GUID-E66168C4-6043-4A49-9062-A4937B76ABC0" target="_blank"><span><cite>Oracle Database Java Developer’s Guide</cite></span></a>.
                        </p>
                     </li>
                  </ul>
                  <p>How can you choose between these different implementation possibilities? Each of these languages offers different advantages: ease of use, the availability of programmers with specific expertise, the need for portability, and the existence of legacy code are powerful determinants.</p>
                  <p>The choice might narrow depending on how your application must work with Oracle Database:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>PL/SQL is a powerful development tool, specialized for SQL transaction processing. </p>
                     </li>
                     <li>
                        <p>Some computation-intensive tasks are executed most efficiently in a lower level language, such as C. </p>
                     </li>
                     <li>
                        <p>For both portability and security, you might select Java.</p>
                     </li>
                     <li>
                        <p>For familiarity with Microsoft programming languages, you might select .NET.</p>
                     </li>
                  </ul>
                  <p>Most significantly for performance, only PL/SQL and Java methods run within the address space of the server. C/C++ and .NET methods are dispatched as external procedures, and run on the server system but outside the address space of the database server. Pro*COBOL and Pro*C/C++ are precompilers, and Visual Basic accesses Oracle Database through Oracle Provider for OLE DB and subsequently OCI, which is implemented in C.</p>
                  <p>Taking all these factors into account suggests that there might be situations in which you might need to implement your application in multiple languages. For example, because Java runs within the address space of the server, you might want to import existing Java applications into the database, and then leverage this technology by calling Java functions from PL/SQL and SQL.</p>
                  <p>PL/SQL external procedures enable you to write C procedure calls as PL/SQL bodies. These C procedures are callable directly from PL/SQL, and from SQL through PL/SQL procedure calls. The database provides a special-purpose interface, the call specification, that lets you call external procedures from other languages. While this service is designed for intercommunication between SQL, PL/SQL, C, and Java, it is accessible from any base language that can call these languages. For example, your procedure can be written in a language other than Java or C, and if C can call your procedure, then SQL or PL/SQL can use it. Therefore, if you have a candidate C++ procedure, use a C++ <code class="codeph">extern</code> <code class="codeph">"C"</code> statement in that procedure to make it callable by C.
                  </p>
                  <p>Therefore, the strengths and capabilities of different languages are available to you, regardless of your programmatic environment. You are not restricted to one language with its inherent limitations. External procedures promote reusability and modularity because you can deploy specific languages for specific purposes.</p>
               </div>
            </div><a id="ADFNS1402"></a><div class="props_rev_3"><a id="GUID-456B8988-6418-45C7-86EF-77EA0BE0BCEC" name="GUID-456B8988-6418-45C7-86EF-77EA0BE0BCEC"></a><h3 id="ADFNS-GUID-456B8988-6418-45C7-86EF-77EA0BE0BCEC" class="sect3">What Is an External Procedure?</h3>
               <div>
                  <p>An <strong class="term">external procedure</strong> is a procedure stored in a dynamic link library (DLL). You register the procedure with the base language, and then call it to perform special-purpose processing.
                  </p>
                  <p>For example, when you work in PL/SQL, the language loads the library dynamically at runtime, and then calls the procedure as if it were a PL/SQL procedure. These procedures participate fully in the current transaction and can call back to the database to perform SQL operations.</p>
                  <p>The procedures are loaded only when necessary, so memory is conserved. The decoupling of the call specification from its implementation body means that the procedures can be enhanced without affecting the calling programs.</p>
                  <p>External procedures let you:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Isolate execution of client applications and processes from the database instance to ensure that problems on the client side do not adversely affect the database</p>
                     </li>
                     <li>
                        <p>Move computation-bound programs from client to server where they run faster (because they avoid the round trips of network communication)</p>
                     </li>
                     <li>
                        <p>Interface the database server with external systems and data sources</p>
                     </li>
                     <li>
                        <p>Extend the functionality of the database server itself</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-456B8988-6418-45C7-86EF-77EA0BE0BCEC__GUID-551FF649-9A80-4B09-9603-9024B2B130C0">
                     <p class="notep1">Note:</p>
                     <p>The external library (DLL file) must be statically linked. In other words, it must not reference external symbols from other external libraries (DLL files). Oracle Database does not resolve such symbols, so they can cause your external procedure to fail.</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-456B8988-6418-45C7-86EF-77EA0BE0BCEC__GUID-AA5D004E-C155-4334-A3A9-72FC6680A034">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=DBSEG656" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for information about securing external procedures
                     </p>
                  </div>
               </div>
            </div><a id="ADFNS1403"></a><div class="props_rev_3"><a id="GUID-0B590058-1ED5-43D7-B669-E6F94E3B79A9" name="GUID-0B590058-1ED5-43D7-B669-E6F94E3B79A9"></a><h3 id="ADFNS-GUID-0B590058-1ED5-43D7-B669-E6F94E3B79A9" class="sect3">Overview of Call Specification for External Procedures</h3>
               <div>
                  <p>You publish external procedures through <span class="bold">call specifications</span>, which provide a superset of the <code class="codeph">AS</code> <code class="codeph">EXTERNAL</code> function through the <code class="codeph">AS</code> <code class="codeph">LANGUAGE</code> clause. <code class="codeph">AS</code> <code class="codeph">LANGUAGE</code> call specifications allow the publishing of external C procedures. (Java class methods are not external procedures, but they still use call specifications.) 
                  </p>
                  <div class="infoboxnote" id="GUID-0B590058-1ED5-43D7-B669-E6F94E3B79A9__GUID-8B69F41B-2560-4FC9-9A6F-B112AF266E7A">
                     <p class="notep1">Note:</p>
                     <p>To support legacy applications, call specifications also enable you to publish with the <code class="codeph">AS</code> <code class="codeph">EXTERNAL</code> clause. For application development, however, using the <code class="codeph">AS</code> <code class="codeph">LANGUAGE</code> clause is recommended. 
                     </p>
                  </div>
                  <p>In general, call specifications enable:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Dispatching the appropriate C or Java target procedure</p>
                     </li>
                     <li>
                        <p>Data type conversions</p>
                     </li>
                     <li>
                        <p>Parameter mode mappings</p>
                     </li>
                     <li>
                        <p>Automatic memory allocation and cleanup</p>
                     </li>
                     <li>
                        <p>Purity constraints to be specified, where necessary, for package functions called from SQL.</p>
                     </li>
                     <li>
                        <p>Calling Java methods or C procedures from database triggers</p>
                     </li>
                     <li>
                        <p>Location flexibility: you can put <code class="codeph">AS</code> <code class="codeph">LANGUAGE</code> call specifications in package or type specifications, or package (or type) bodies to optimize performance and hide implementation details
                        </p>
                     </li>
                  </ul>
                  <p>To use an existing program as an external procedure, load, publish, and then call it.</p>
               </div>
            </div><a id="ADFNS1404"></a><div class="props_rev_3"><a id="GUID-8D2D291B-4059-4006-98E5-722D682186C2" name="GUID-8D2D291B-4059-4006-98E5-722D682186C2"></a><h3 id="ADFNS-GUID-8D2D291B-4059-4006-98E5-722D682186C2" class="sect3">Loading External Procedures</h3>
               <div>
                  <div class="section">
                     <p>To make your external C procedures or Java methods available to PL/SQL, you must first load them.</p>
                     <div class="infoboxnote" id="GUID-8D2D291B-4059-4006-98E5-722D682186C2__GUID-2B1EF5EE-05A0-42CF-961E-F51A9CC3E71A">
                        <p class="notep1">Note:</p>
                        <p>You can load external C procedures only on platforms that support either DLLs or dynamically loadable shared libraries (such as Solaris .<code class="codeph">so</code> libraries).
                        </p>
                     </div>
                     <p>When an application calls an external C procedure, Oracle Database or Oracle Listener starts the external procedure agent, <code class="codeph">extproc</code>. Using the network connection established by Oracle Database or Oracle Listener, the application passes this information to <code class="codeph">extproc</code>:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Name of DLL or shared library</p>
                        </li>
                        <li>
                           <p>Name of external procedure</p>
                        </li>
                        <li>
                           <p>Any parameters for the external procedure</p>
                        </li>
                     </ul>
                     <p>Then <code class="codeph">extproc</code> loads the DLL or the shared library, runs the external procedure, and passes any values that the external procedure returns back to the application. The application and <code class="codeph">extproc</code> must reside on the same computer.
                     </p>
                     <p><code class="codeph">extproc</code> can call procedures in any library that complies with the calling standard used. 
                     </p>
                     <div class="infoboxnote" id="GUID-8D2D291B-4059-4006-98E5-722D682186C2__GUID-157D539F-6D60-4AED-9AD1-FB39A3AF2BC5">
                        <p class="notep1">Note:</p>
                        <p>The default configuration for external procedures no longer requires a network listener to work with Oracle Database and <code class="codeph">extproc</code>. Oracle Database now spawns <code class="codeph">extproc</code> directly, eliminating the risk that Oracle Listener might spawn <code class="codeph">extproc</code> unexpectedly. This default configuration is recommended for maximum security.
                        </p>
                        <p>You must change this default configuration, so that Oracle Listener spawns <code class="codeph">extproc</code>, if you use any of these:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A multithreaded <code class="codeph">extproc</code> agent
                              </p>
                           </li>
                           <li>
                              <p>Oracle Database in shared mode on Windows</p>
                           </li>
                           <li>
                              <p>An <code class="codeph">AGENT</code> clause in the <code class="codeph">LIBRARY</code> specification or an <code class="codeph">AGENT</code> <code class="codeph">IN</code> clause in the <code class="codeph">PROCEDURE</code> specification that redirects external procedures to a different <code class="codeph">extproc</code> agent
                              </p>
                           </li>
                        </ul>
                        <div class="p">
                           <div class="infoboxnotealso" id="GUID-8D2D291B-4059-4006-98E5-722D682186C2__NOTE-132451-CB0178E6">
                              <p class="notep1">See Also:</p>
                              <p><a href="external-procedures.html#GUID-5D6BE95D-BE07-4CA7-A2B2-9D4F6E83F809">CALLING STANDARD</a> for more information about the calling standard
                              </p>
                           </div>
                        </div>
                        <p>Changing the default configuration requires additional network configuration steps.</p>
                     </div>
                     <p>To configure your database to use external procedures that are written in C, or that can be called from C applications, you or your database administrator must follow these steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="external-procedures.html#GUID-D8EF7373-DD76-4D68-AC5D-6BEF0CBD0BBA">Define the C Procedures</a></span></li>
                     <li><span><a href="external-procedures.html#GUID-7C9FA34E-893C-4DFA-B285-674122C00D62">Set Up the Environment</a></span></li>
                     <li><span><a href="external-procedures.html#GUID-A329C35E-F941-4341-A320-74C55358641B">Identify the DLL</a></span></li>
                     <li><span><a href="external-procedures.html#GUID-1CD345DA-0547-4D6F-BB4D-EA8F4F43F321">Publish the External Procedures</a></span></li>
                  </ol>
               </div><a id="ADFNS702"></a><div class="props_rev_3"><a id="GUID-D8EF7373-DD76-4D68-AC5D-6BEF0CBD0BBA" name="GUID-D8EF7373-DD76-4D68-AC5D-6BEF0CBD0BBA"></a><h4 id="ADFNS-GUID-D8EF7373-DD76-4D68-AC5D-6BEF0CBD0BBA" class="sect4">Define the C Procedures</h4>
                  <div>
                     <div class="section">
                        <p>Define the C procedures using one of these prototypes:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Kernighan &amp; Ritchie style prototypes; for example:</p><pre class="oac_no_warn" dir="ltr">void C_findRoot(x)
 float x;
...
</pre></li>
                           <li>
                              <p>ISO/ANSI prototypes other than numeric data types that are less than full width (such as <code class="codeph">float</code>, <code class="codeph">short</code>, <code class="codeph">char</code>); for example:
                              </p><pre class="oac_no_warn" dir="ltr">void C_findRoot(double x)
...
</pre></li>
                           <li>
                              <p>Other data types that do not change size under default argument promotions.</p>
                              <p>This example changes size under default argument promotions:</p><pre class="oac_no_warn" dir="ltr">void C_findRoot(float x)
...</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS703"></a><div class="props_rev_3"><a id="GUID-7C9FA34E-893C-4DFA-B285-674122C00D62" name="GUID-7C9FA34E-893C-4DFA-B285-674122C00D62"></a><h4 id="ADFNS-GUID-7C9FA34E-893C-4DFA-B285-674122C00D62" class="sect4">Set Up the Environment</h4>
                  <div>
                     <div class="section">
                        <p>When you use the default configuration for external procedures, Oracle Database spawns <code class="codeph">extproc</code> directly. You need not make configuration changes for <code class="codeph">listener</code>.<code class="codeph">ora</code> and <code class="codeph">tnsnames</code>.<code class="codeph">ora</code>. Define the environment variables to be used by external procedures in the file <code class="codeph">extproc</code>.<code class="codeph">ora</code> (located at <code class="codeph">$ORACLE_HOME/hs/admin</code> on UNIX operating systems and at <code class="codeph">ORACLE_HOME\hs\admin</code> on Windows), using this syntax:
                        </p><pre class="oac_no_warn" dir="ltr">SET <span class="italic">name</span>=<span class="italic">value</span> (<span class="italic">environment_variable_name</span> <span class="italic">value</span>)
</pre><p>Set the <code class="codeph">EXTPROC_DLLS</code> environment variable, which restricts the DLLs that <code class="codeph">extproc</code> can load, to one of these values:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">NULL</code>; for example:
                              </p><pre class="oac_no_warn" dir="ltr">SET EXTPROC_DLLS=
</pre><p>This setting, the default, allows <code class="codeph">extproc</code> to load only the DLLs that are in directory <code class="codeph">$ORACLE_HOME</code>/<code class="codeph">bin</code> or <code class="codeph">$ORACLE_HOME</code>/<code class="codeph">lib</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ONLY:</code> followed by a colon-separated (semicolon-separated on Windows systems) list of DLLs; for example:
                              </p><pre class="oac_no_warn" dir="ltr">SET EXTPROC_DLLS=ONLY:DLL1:DLL2
</pre><p>This setting allows <code class="codeph">extproc</code> to load only the DLLs named DLL1 and DLL2. This setting provides maximum security.
                              </p>
                           </li>
                           <li>
                              <p>A colon-separated (semicolon-separated on Windows systems) list of DLLs; for example:</p><pre class="oac_no_warn" dir="ltr">SET EXTPROC_DLLS=DLL1:DLL2
</pre><p>This setting allows <code class="codeph">extproc</code> to load the DLLs named DLL1 and DLL2 and the DLLs that are in directory <code class="codeph">$ORACLE_HOME</code>/<code class="codeph">bin</code> or <code class="codeph">$ORACLE_HOME</code>/<code class="codeph">lib</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ANY</code>; for example:
                              </p><pre class="oac_no_warn" dir="ltr">SET EXTPROC_DLLS=ANY
</pre><p>This setting allows <code class="codeph">extproc</code> to load any DLL.
                              </p>
                           </li>
                        </ul>
                        <p>Set the <code class="codeph">ENFORCE_CREDENTIAL</code> environment variable, which enforces the usage of credentials when spawning an <code class="codeph">extproc</code> process. The <code class="codeph">ENFORCE_CREDENTIAL</code> value can be <code class="codeph">TRUE</code> or <code class="codeph">FALSE</code> (the default). For a discussion of <code class="codeph">ENFORCE_CREDENTIAL</code> and the expected behaviors of an <code class="codeph">extproc</code> process based on possible authentication and impersonation scenarios, see the information about securing external procedures in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=DBSEG755" target="_blank"><span class="italic">Oracle Database Security Guide</span></a>.
                        </p>
                        <p>To change the default configuration for external procedures and have your <code class="codeph">extproc</code> agent spawned by Oracle Listener, configure your database to use external procedures that are written in C, or can be called from C applications, as follows.
                        </p>
                        <div class="infoboxnote" id="GUID-7C9FA34E-893C-4DFA-B285-674122C00D62__GUID-18146EDD-1635-458F-846A-B717B6CA4BF1">
                           <p class="notep1">Note:</p>
                           <p>To use credentials for <span class="bold">extproc</span>, you cannot use Oracle Listener to spawn the <code class="codeph">extproc</code> agent.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Set configuration parameters for the agent, named <code class="codeph">extproc</code> by default, in the configuration files <code class="codeph">tnsnames</code>.<code class="codeph">ora</code> and <code class="codeph">listener</code>.<code class="codeph">ora</code>. This establishes the connection for the external procedure agent, <code class="codeph">extproc</code>, when the database is started.</span></li>
                        <li class="stepexpand"><span>Start a listener process exclusively for external procedures.</span><div>
                              <p>The Listener sets a few required environment variables (such as <code class="codeph">ORACLE_HOME</code>, <code class="codeph">ORACLE_SID</code>, and <code class="codeph">LD_LIBRARY_PATH</code>) for <code class="codeph">extproc</code>. It can also define specific environment variables in the <code class="codeph">ENVS</code> section of its <code class="codeph">listener</code>.<code class="codeph">ora</code> entry, and these variables are passed to the agent process. Otherwise, it provides the agent with a "clean" environment. The environment variables set for the agent are independent of those set for the client and server. Therefore, external procedures, which run in the agent process, cannot read environment variables set for the client or server processes.
                              </p>
                              <div class="infoboxnote" id="GUID-7C9FA34E-893C-4DFA-B285-674122C00D62__GUID-85F1E19F-2B7D-453E-AF17-878458A92224">
                                 <p class="notep1">Note:</p>
                                 <p>It is possible for you to set and read environment variables themselves by using the standard C procedures <code class="codeph">setenv</code> and <code class="codeph">getenv</code>, respectively. Environment variables, set this way, are specific to the agent process, which means that they can be read by all functions executed in that process, but not by any other process running on the same host. 
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Determine whether the agent for your external procedure is to run in dedicated mode (the default) or multithreaded mode.</span><div>
                              <p>In dedicated mode, one "dedicated" agent is launched for each session. In multithreaded mode, a single multithreaded <code class="codeph">extproc</code> agent is launched. The multithreaded <code class="codeph">extproc</code> agent handles calls using different threads for different users. In a configuration where many users can call the external procedures, using a multithreaded <code class="codeph">extproc</code> agent is recommended to conserve system resources.
                              </p>
                              <p>If the agent is to run in dedicated mode, additional configuration of the agent process is not necessary. </p>
                              <p>If the agent is to run in multithreaded mode, your database administrator must configure the database system to start the agent in multithreaded mode (as a multithreaded <code class="codeph">extproc</code> agent). To do this configuration, use the agent control utility, <code class="codeph">agtctl</code>. For example, start <code class="codeph">extproc</code> using this command:
                              </p><pre class="oac_no_warn" dir="ltr">agtctl startup extproc <span class="italic"><code class="codeph">agent_sid</code></span> 
</pre><p>where <span class="italic"><code class="codeph">agent_sid</code></span> is the system identifier that this <code class="codeph">extproc</code> agent services. An entry for this system identifier is typically added as an entry in the file <code class="codeph">tnsnames</code>.<code class="codeph">ora</code>. 
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-7C9FA34E-893C-4DFA-B285-674122C00D62__GUID-0BF9008E-EC02-495A-9C6F-2E6F69386A76">
                           <p class="notep1">Note:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you use a multithreaded <code class="codeph">extproc</code> agent, the library you call must be thread-safe—to avoid errors such as a damaged call stack. 
                                 </p>
                              </li>
                              <li>
                                 <p>The database server, the agent process, and the listener process that spawns the agent process must all reside on the same host. </p>
                              </li>
                              <li>
                                 <p>By default, the agent process runs on the same database instance as your main application. In situations where reliability is critical, you might want to run the agent process for the external procedure on a separate database instance (still on the same host), so that any problems in the agent do not affect the primary database server. To do so, specify the separate database instance using a database link. </p>
                              </li>
                           </ul>
                        </div>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI949" target="_blank">Figure F-1</a> in <span class="italic">Oracle Call Interface Programmer's Guide</span> illustrates the architecture of the multithreaded <code class="codeph">extproc</code> agent.
                        </p>
                        <div class="infoboxnotealso" id="GUID-7C9FA34E-893C-4DFA-B285-674122C00D62__NOTE-1243-CB020252">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI953" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> for more information about using <code class="codeph">agtctl</code> for <code class="codeph">extproc</code> administration
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS704"></a><div class="props_rev_3"><a id="GUID-A329C35E-F941-4341-A320-74C55358641B" name="GUID-A329C35E-F941-4341-A320-74C55358641B"></a><h4 id="ADFNS-GUID-A329C35E-F941-4341-A320-74C55358641B" class="sect4">Identify the DLL</h4>
                  <div>
                     <div class="section">
                        <p>In this context, a DLL is any dynamically loadable operating-system file that stores external procedures.</p>
                        <p>For security reasons, your DBA controls access to the DLL. Using the <code class="codeph">CREATE</code> <code class="codeph">LIBRARY</code> statement, the DBA creates a schema object called an alias library, which represents the DLL. Then, if you are an authorized user, the DBA grants you <code class="codeph">EXECUTE</code> privileges on the <span class="bold">alias</span> library. Alternatively, the DBA might grant you <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">LIBRARY</code> privileges, in which case you can create your own alias libraries using this syntax:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE LIBRARY [<span class="italic">schema_name</span>.]<span class="italic">library_name</span>
  {IS | AS} '<span class="italic">file_path</span>'
  [AGENT '<span class="italic">agent_link</span>'];</pre><div class="infoboxnote" id="GUID-A329C35E-F941-4341-A320-74C55358641B__GUID-62C00C1E-D072-4A25-A590-17BCB4E3269C">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">ANY</code> privileges are very powerful and must not be granted lightly. For more information, see:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=DBSEG004" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for information about managing system privileges, including <code class="codeph">ANY</code></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=DBSEG009" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for guidelines for securing user accounts and privileges
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>Oracle recommends that you specify the path to the DLL using a directory object, rather than only the DLL name. In this example, you create alias library <code class="codeph">c_utils</code>, which represents DLL <code class="codeph">utils</code>.<code class="codeph">so</code>:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE LIBRARY C_utils AS 'utils.so' IN <span class="italic">DLL_DIRECTORY</span>;
</pre><p>where <span class="italic"><code class="codeph">DLL_DIRECTORY</code></span> is a directory object that refers to <code class="codeph">'/DLLs'</code>.
                        </p>
                        <p>As an alternative, you can specify the full path to the DLL, as in this example:</p><pre class="oac_no_warn" dir="ltr">CREATE LIBRARY C_utils AS '/DLLs/utils.so';
</pre><p>To allow flexibility in specifying the DLLs, you can specify the root part of the path as an environment variable using the notation <code class="codeph">${</code><span class="italic"><code class="codeph">VAR_NAME</code></span><code class="codeph">}</code>, and set up that variable in the <code class="codeph">ENVS</code> section of the <code class="codeph">listener</code>.<code class="codeph">ora</code> entry.
                        </p>
                        <p>In this example, the agent specified by the name <code class="codeph">agent_link</code> is used to run any external procedure in the library <code class="codeph">C_Utils</code>:
                        </p><pre class="oac_no_warn" dir="ltr">create database link agent_link using 'agent_tns_alias';
create or replace library C_utils is
  '${EP_LIB_HOME}/utils.so' agent 'agent_link';
</pre><p>The environment variable <code class="codeph">EP_LIB_HOME</code> is expanded by the agent to the appropriate path for that instance, such as <code class="codeph">/usr/bin/dll</code>. Variable <code class="codeph">EP_LIB_HOME</code> must be set in the file <code class="codeph">listener</code>.<code class="codeph">ora</code>, for the agent to be able to access it.
                        </p>
                        <p>For security reasons, <code class="codeph">extproc</code>, by default, loads only DLLs that are in directory <code class="codeph">$ORACLE_HOME/bin</code> or <code class="codeph">$ORACLE_HOME/lib</code>. Also, only local sessions—that is, Oracle Database client processes that run on the same system—are allowed to connect to <code class="codeph">extproc</code>.
                        </p>
                        <p>To load DLLs from other directories, set the environment variable <code class="codeph">EXTPROC_DLLS</code>. The value for this environment variable is a colon-separated (semicolon-separated on Windows systems) list of DLL names qualified with the complete path. For example:
                        </p><pre class="oac_no_warn" dir="ltr">EXTPROC_DLLS=/private1/home/johndoe/dll/myDll.so:/private1/home/johndoe/dll/newDll.so
</pre><p>While you can set up environment variables for <code class="codeph">extproc</code> through the <code class="codeph">ENVS</code> parameter in the file <code class="codeph">listener</code>.<code class="codeph">ora</code>, you can also set up environment variables in the <code class="codeph">extproc</code> initialization file <code class="codeph">extproc</code>.<code class="codeph">ora</code> in directory<code class="codeph"> $ORACLE_HOME/hs/admin</code>. When both <code class="codeph">extproc</code>.<code class="codeph">ora</code> and <code class="codeph">ENVS</code> parameter in <code class="codeph">listener</code>.<code class="codeph">ora</code> are used, the environment variables defined in <code class="codeph">extproc</code>.<code class="codeph">ora</code> take precedence. See the Oracle Net manual for more information about the <code class="codeph">EXTPROC</code> feature.
                        </p>
                        <div class="infoboxnote" id="GUID-A329C35E-F941-4341-A320-74C55358641B__GUID-0E39E4DA-EFEB-4A22-91A8-533597FA10F5">
                           <p class="notep1">Note:</p>
                           <p>In <code class="codeph">extproc.ora</code> on a Windows system, specify the path using a drive letter and using a double backslash (<code class="codeph">\\</code>) for each backslash in the path. (The first backslash in each double backslash serves as an escape character.)
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS705"></a><div class="props_rev_3"><a id="GUID-1CD345DA-0547-4D6F-BB4D-EA8F4F43F321" name="GUID-1CD345DA-0547-4D6F-BB4D-EA8F4F43F321"></a><h4 id="ADFNS-GUID-1CD345DA-0547-4D6F-BB4D-EA8F4F43F321" class="sect4">Publish the External Procedures</h4>
                  <div>
                     <div class="section">
                        <p>You find or write an external C procedure, and add it to the DLL. When the procedure is in the DLL, you publish it using the call specification mechanism described in <a href="external-procedures.html#GUID-755619F5-8FF7-4380-BCC5-7E6BD86659DE">Publishing External Procedures</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS1091"></a><a id="ADFNS1405"></a><div class="props_rev_3"><a id="GUID-755619F5-8FF7-4380-BCC5-7E6BD86659DE" name="GUID-755619F5-8FF7-4380-BCC5-7E6BD86659DE"></a><h3 id="ADFNS-GUID-755619F5-8FF7-4380-BCC5-7E6BD86659DE" class="sect3">Publishing External Procedures</h3>
               <div>
                  <div class="section">
                     <p>Oracle Database can use only external procedures that are published through a call specification, which maps names, parameter types, and return types for your Java class method or C external procedure to their SQL counterparts. It is written like any other PL/SQL stored procedure except that, in its body, instead of declarations and a <code class="codeph">BEGIN</code> <code class="codeph">END</code> block, you code the <code class="codeph">AS</code> <code class="codeph">LANGUAGE</code> clause.
                     </p>
                     <p>The <code class="codeph">AS</code> <code class="codeph">LANGUAGE</code> clause specifies:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Which language the procedure is written in</p>
                        </li>
                        <li>
                           <p>For a Java method:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The signature of the Java method</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>For a C procedure:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The alias library corresponding to the DLL for a C procedure</p>
                              </li>
                              <li>
                                 <p>The name of the C procedure in a DLL</p>
                              </li>
                              <li>
                                 <p>Various options for specifying how parameters are passed</p>
                              </li>
                              <li>
                                 <p>Which parameter (if any) holds the name of the external procedure agent, <code class="codeph">extproc</code>, for running the procedure on a different system
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>You begin the declaration using the normal <code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code> syntax for a procedure, function, package specification, package body, type specification, or type body.
                     </p>
                     <p>The call specification follows the name and parameter declarations. Its syntax is:</p><pre class="oac_no_warn" dir="ltr">{IS | AS} LANGUAGE {C | JAVA}
</pre><p>This is then followed by either:</p><pre class="oac_no_warn" dir="ltr">NAME  <span class="italic">java_string_literal_name</span>
</pre><p>Where <span class="italic">java_string_literal_name</span> is the signature of your Java method
                     </p>
                     <p>Or by:</p><pre class="oac_no_warn" dir="ltr">{ LIBRARY <span class="italic">library_name</span> [ NAME <span class="italic">c_string_literal_name</span> ] |
  [ NAME <span class="italic">c_string_literal_name</span> ] LIBRARY <span class="italic">library_name</span> }
[ AGENT IN ( <span class="italic">argument</span> [, <span class="italic">argument</span>]... ) ]
[ WITH CONTEXT ]
[ PARAMETERS (<span class="italic">external_parameter</span>[, <span class="italic">external_parameter</span>]...) ];
</pre><p>Where <code class="codeph">library_name</code> is the name of your alias library, <code class="codeph">c_string_literal_name</code> is the name of your external C procedure, and <code class="codeph">external_parameter</code> stands for:
                     </p><pre class="oac_no_warn" dir="ltr">{  CONTEXT 
 | SELF [{TDO | property}]
 | {<span class="italic">parameter_name</span> | RETURN} [<span class="italic">property</span>] [BY REFERENCE] [<span class="italic">external_datatype</span>]}
</pre><p><code class="codeph">property</code> stands for:
                     </p><pre class="oac_no_warn" dir="ltr">{INDICATOR [{STRUCT | TDO}] | LENGTH | DURATION | MAXLEN | CHARSETID | CHARSETFORM}</pre><div class="infoboxnote" id="GUID-755619F5-8FF7-4380-BCC5-7E6BD86659DE__GUID-DF2ADAD3-4977-4CAE-944D-8091BFF23B09">
                        <p class="notep1">Note:</p>
                        <p>Unlike Java, C does not understand SQL types; therefore, the syntax is more intricate</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-755619F5-8FF7-4380-BCC5-7E6BD86659DE__GUID-1CB3D220-5831-4298-B077-1E77B0AA2C0A">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="external-procedures.html#GUID-36C76273-69CE-44B3-84E9-367F18935A9C">AS LANGUAGE Clause for Java Class Methods</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-58F3EC2E-5040-4E04-9A07-58861B2D24A3">AS LANGUAGE Clause for External C Procedures</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS708"></a><div class="props_rev_3"><a id="GUID-36C76273-69CE-44B3-84E9-367F18935A9C" name="GUID-36C76273-69CE-44B3-84E9-367F18935A9C"></a><h4 id="ADFNS-GUID-36C76273-69CE-44B3-84E9-367F18935A9C" class="sect4">AS LANGUAGE Clause for Java Class Methods</h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">AS</code> <code class="codeph">LANGUAGE</code> clause is the interface between PL/SQL and a Java class method.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS709"></a><div class="props_rev_3"><a id="GUID-58F3EC2E-5040-4E04-9A07-58861B2D24A3" name="GUID-58F3EC2E-5040-4E04-9A07-58861B2D24A3"></a><h4 id="ADFNS-GUID-58F3EC2E-5040-4E04-9A07-58861B2D24A3" class="sect4">AS LANGUAGE Clause for External C Procedures</h4>
                  <div>
                     <div class="section">
                        <p>These subclauses tell PL/SQL where to locate the external C procedure, how to call it, and what to pass to it:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="external-procedures.html#GUID-7107191C-2A02-48CE-8C08-9576BDAB4844">LIBRARY </a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-E582650B-3F82-4E1F-BEA1-F875B3FED378">NAME </a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-1073D814-FA76-40C4-8FA7-948E66BB8517">LANGUAGE </a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-5D6BE95D-BE07-4CA7-A2B2-9D4F6E83F809">CALLING STANDARD</a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-380DBDEB-5FB9-43E4-B8EE-11A11DEB22C6">WITH CONTEXT </a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-22E70E04-7147-4A61-979A-7E9F561915E8">PARAMETERS </a></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="external-procedures.html#GUID-79BF4402-FBFC-491E-A462-E5395B2BC57C">AGENT IN</a>"</span></p>
                           </li>
                        </ul>
                        <p>Of the preceding subclauses, only <code class="codeph">LIBRARY</code> is required.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS710"></a><div class="props_rev_3"><a id="GUID-7107191C-2A02-48CE-8C08-9576BDAB4844" name="GUID-7107191C-2A02-48CE-8C08-9576BDAB4844"></a><h5 id="ADFNS-GUID-7107191C-2A02-48CE-8C08-9576BDAB4844" class="sect5">LIBRARY </h5>
                     <div>
                        <div class="section">
                           <p>Specifies a local alias library. (You cannot use a database link to specify a remote library.) The library name is a PL/SQL identifier. Therefore, if you enclose the name in double quotation marks, then it becomes case-sensitive. (By default, the name is stored in upper case.) You must have <code class="codeph">EXECUTE</code> privileges on the alias library. 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS711"></a><div class="props_rev_3"><a id="GUID-E582650B-3F82-4E1F-BEA1-F875B3FED378" name="GUID-E582650B-3F82-4E1F-BEA1-F875B3FED378"></a><h5 id="ADFNS-GUID-E582650B-3F82-4E1F-BEA1-F875B3FED378" class="sect5">NAME </h5>
                     <div>
                        <div class="section">
                           <p>Specifies the external C procedure to be called. If you enclose the procedure name in double quotation marks, then it becomes case-sensitive. (By default, the name is stored in upper case.) If you omit this subclause, then the procedure name defaults to the upper-case name of the PL/SQL procedure.</p>
                           <div class="infoboxnote" id="GUID-E582650B-3F82-4E1F-BEA1-F875B3FED378__GUID-4B6A5760-2D62-4979-AF8A-0A9E9505D4AE">
                              <p class="notep1">Note:</p>
                              <p>The terms <code class="codeph">LANGUAGE</code> and <code class="codeph">CALLING</code> <code class="codeph">STANDARD</code> apply only to the superseded <code class="codeph">AS</code> <code class="codeph">EXTERNAL</code> clause.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS712"></a><div class="props_rev_3"><a id="GUID-1073D814-FA76-40C4-8FA7-948E66BB8517" name="GUID-1073D814-FA76-40C4-8FA7-948E66BB8517"></a><h5 id="ADFNS-GUID-1073D814-FA76-40C4-8FA7-948E66BB8517" class="sect5">LANGUAGE </h5>
                     <div>
                        <div class="section">
                           <p>Specifies the third-generation language in which the external procedure was written. If you omit this subclause, then the language name defaults to C.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS713"></a><div class="props_rev_3"><a id="GUID-5D6BE95D-BE07-4CA7-A2B2-9D4F6E83F809" name="GUID-5D6BE95D-BE07-4CA7-A2B2-9D4F6E83F809"></a><h5 id="ADFNS-GUID-5D6BE95D-BE07-4CA7-A2B2-9D4F6E83F809" class="sect5">CALLING STANDARD</h5>
                     <div>
                        <div class="section">
                           <p>Specifies the calling standard under which the external procedure was compiled. The supported calling standard is C. If you omit this subclause, then the calling standard defaults to C.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS714"></a><div class="props_rev_3"><a id="GUID-380DBDEB-5FB9-43E4-B8EE-11A11DEB22C6" name="GUID-380DBDEB-5FB9-43E4-B8EE-11A11DEB22C6"></a><h5 id="ADFNS-GUID-380DBDEB-5FB9-43E4-B8EE-11A11DEB22C6" class="sect5">WITH CONTEXT </h5>
                     <div>
                        <div class="section">
                           <p>Specifies that a context pointer is passed to the external procedure. The context data structure is opaque to the external procedure but is available to service procedures called by the external procedure.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS715"></a><div class="props_rev_3"><a id="GUID-22E70E04-7147-4A61-979A-7E9F561915E8" name="GUID-22E70E04-7147-4A61-979A-7E9F561915E8"></a><h5 id="ADFNS-GUID-22E70E04-7147-4A61-979A-7E9F561915E8" class="sect5">PARAMETERS </h5>
                     <div>
                        <div class="section">
                           <p>Specifies the positions and data types of parameters passed to the external procedure. It can also specify parameter properties, such as current length and maximum length, and the preferred parameter passing method (by value or by reference).</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS716"></a><div class="props_rev_3"><a id="GUID-79BF4402-FBFC-491E-A462-E5395B2BC57C" name="GUID-79BF4402-FBFC-491E-A462-E5395B2BC57C"></a><h5 id="ADFNS-GUID-79BF4402-FBFC-491E-A462-E5395B2BC57C" class="sect5">AGENT IN</h5>
                     <div>
                        <div class="section">
                           <p>Specifies which parameter holds the name of the agent process that runs this procedure. This is intended for situations where the external procedure agent, <code class="codeph">extproc</code>, runs using multiple agent processes, to ensure robustness if the agent process of one external procedure fails. You can pass the name of the agent process (corresponding to the name of a database link), and if <code class="codeph">tnsnames</code>.<code class="codeph">ora</code> and <code class="codeph">listener</code>.<code class="codeph">ora</code> are set up properly across both instances, the external procedure is called on the other instance. Both instances must be on the same host.
                           </p>
                           <p>This is similar to the <code class="codeph">AGENT</code> clause of the <code class="codeph">CREATE</code> <code class="codeph">LIBRARY</code> statement; specifying the value at runtime through <code class="codeph">AGENT</code> <code class="codeph">IN</code> allows greater flexibility.
                           </p>
                           <p>When the agent name is specified this way, it overrides any agent name declared in the alias library. If no agent name is specified, the default is the <code class="codeph">extproc</code> agent on the same instance as the calling program.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1406"></a><div class="props_rev_3"><a id="GUID-BC6C93E6-8EE0-47F0-A713-D29AE4942B77" name="GUID-BC6C93E6-8EE0-47F0-A713-D29AE4942B77"></a><h3 id="ADFNS-GUID-BC6C93E6-8EE0-47F0-A713-D29AE4942B77" class="sect3">Publishing Java Class Methods</h3>
               <div>
                  <div class="section">
                     <p>Java classes and their methods are stored in RDBMS libunits in which you can load Java sources, binaries and resources using the <code class="codeph">LOADJAVA</code> utility or the <code class="codeph">CREATEJAVA</code> SQL statements. Libunits can be considered analogous to DLLs written, for example, in C—although they map one-to-one with Java classes, whereas DLLs can contain multiple procedures.
                     </p>
                     <p>The <code class="codeph">NAME</code>-clause string uniquely identifies the Java method. The PL/SQL function or procedure and Java must have corresponding parameters. If the Java method takes no parameters, then you must code an empty parameter list for it. 
                     </p>
                     <p>When you load Java classes into the RDBMS, they are not published to SQL automatically. This is because only selected public static methods can be explicitly published to SQL. However, all methods can be invoked from other Java classes residing in the database, provided they have proper authorization.</p>
                     <p>Suppose you want to publish this Java method named <code class="codeph">J_calcFactorial</code>, which returns the factorial of its argument:
                     </p><pre class="oac_no_warn" dir="ltr">package myRoutines.math;
public class Factorial {
   public static int J_calcFactorial (int n) {
      if (n == 1) return 1;
      else return n * J_calcFactorial(n - 1);
   }
}
</pre><p>This call specification publishes Java method <code class="codeph">J_calcFactorial</code> as PL/SQL stored function <code class="codeph">plsToJavaFac_func</code>, using SQL*Plus:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION Plstojavafac_func (N NUMBER) RETURN NUMBER AS
   LANGUAGE JAVA
   NAME 'myRoutines.math.Factorial.J_calcFactorial(int) return int';</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS1407"></a><div class="props_rev_3"><a id="GUID-CD08EFEE-66AB-47B3-9628-87895C826C22" name="GUID-CD08EFEE-66AB-47B3-9628-87895C826C22"></a><h3 id="ADFNS-GUID-CD08EFEE-66AB-47B3-9628-87895C826C22" class="sect3">Publishing External C Procedures</h3>
               <div>
                  <div class="section">
                     <p>In this example, you write a PL/SQL standalone function named <code class="codeph">plsCallsCdivisor_func</code> that publishes C function <code class="codeph">Cdivisor_func</code> as an external function:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION Plscallscdivisor_func (
<span class="italic">/* Find greatest common divisor of x and y: */</span>
 x     PLS_INTEGER, 
 y     PLS_INTEGER) 
RETURN PLS_INTEGER 
AS LANGUAGE C
   LIBRARY C_utils
   NAME "Cdivisor_func";<span class="italic"> /* Quotation marks preserve case. */</span></pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS1321"></a><a id="ADFNS1408"></a><div class="props_rev_3"><a id="GUID-ABE1166B-0B2C-4E4C-84D9-2E9AFF45F356" name="GUID-ABE1166B-0B2C-4E4C-84D9-2E9AFF45F356"></a><h3 id="ADFNS-GUID-ABE1166B-0B2C-4E4C-84D9-2E9AFF45F356" class="sect3">Locations of Call Specifications</h3>
               <div>
                  <div class="section">
                     <p>For both Java class methods and external C procedures, call specifications can be specified in any of these locations:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Standalone PL/SQL procedures</p>
                        </li>
                        <li>
                           <p>PL/SQL Package Specifications</p>
                        </li>
                        <li>
                           <p>PL/SQL Package Bodies</p>
                        </li>
                        <li>
                           <p>ADT Specifications</p>
                        </li>
                        <li>
                           <p>ADT Bodies</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ABE1166B-0B2C-4E4C-84D9-2E9AFF45F356__GUID-763D578A-3284-472D-8B8A-D7953219EC02">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="external-procedures.html#GUID-BC9F8058-68D3-40A3-AE2B-3C9261D34AA9">Example: Locating a Call Specification in a PL/SQL Package</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-9DDC222B-B346-41A0-A05E-740986677E2F">Example: Locating a Call Specification in a PL/SQL Package Body</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-8FCFF0E3-A42E-44FC-847F-BF50BF91DC56">Example: Locating a Call Specification in an ADT Specification</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-41FECDBA-0571-4A30-BDDB-97A359617869">Example: Locating a Call Specification in an ADT Body</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-D8528756-9D2F-4ACA-A22D-D059A13D6EFB">Example: Java with AUTHID</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-87C6DA57-0186-4EF2-A5DA-6209D5469FBA">Example: C with Optional AUTHID</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-34131FAB-D6B5-4791-8327-A18AFECEDC2B">Example: Mixing Call Specifications in a Package</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-ABE1166B-0B2C-4E4C-84D9-2E9AFF45F356__GUID-DA2831D4-652F-4C1D-AEEC-D6B4683C86EC">
                        <p class="notep1">Note:</p>
                        <p>In these examples, the <code class="codeph">AUTHID</code> and <code class="codeph">SQL_NAME_RESOLVE</code> clauses might be required to fully stipulate a call specification.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-ABE1166B-0B2C-4E4C-84D9-2E9AFF45F356__GUID-C2C20D1C-FDF3-446B-9568-42F611EA4F91">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00812" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about calling external procedures from PL/SQL
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CALL.html#SQLRF01108" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the SQL <code class="codeph">CALL</code> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS717"></a><div class="props_rev_3"><a id="GUID-BC9F8058-68D3-40A3-AE2B-3C9261D34AA9" name="GUID-BC9F8058-68D3-40A3-AE2B-3C9261D34AA9"></a><h4 id="ADFNS-GUID-BC9F8058-68D3-40A3-AE2B-3C9261D34AA9" class="sect4">Example: Locating a Call Specification in a PL/SQL Package</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE Demo_pack 
AUTHID DEFINER 
AS
   PROCEDURE plsToC_demoExternal_proc (x PLS_INTEGER, y VARCHAR2, z DATE) 
   AS LANGUAGE C
      NAME "C_demoExternal"
      LIBRARY SomeLib
      WITH CONTEXT
      PARAMETERS(CONTEXT, x INT, y STRING, z OCIDATE);
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS718"></a><div class="props_rev_3"><a id="GUID-9DDC222B-B346-41A0-A05E-740986677E2F" name="GUID-9DDC222B-B346-41A0-A05E-740986677E2F"></a><h4 id="ADFNS-GUID-9DDC222B-B346-41A0-A05E-740986677E2F" class="sect4">Example: Locating a Call Specification in a PL/SQL Package Body</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE Demo_pack 
   AUTHID CURRENT_USER
AS 
   PROCEDURE plsToC_demoExternal_proc(x PLS_INTEGER, y VARCHAR2, z DATE);
END;
 
CREATE OR REPLACE PACKAGE BODY Demo_pack 
   SQL_NAME_RESOLVE CURRENT_USER
AS
   PROCEDURE plsToC_demoExternal_proc (x PLS_INTEGER, y VARCHAR2, z DATE)
   AS LANGUAGE JAVA
      NAME 'pkg1.class4.methodProc1(int,java.lang.String,java.sql.Date)';
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS719"></a><div class="props_rev_3"><a id="GUID-8FCFF0E3-A42E-44FC-847F-BF50BF91DC56" name="GUID-8FCFF0E3-A42E-44FC-847F-BF50BF91DC56"></a><h4 id="ADFNS-GUID-8FCFF0E3-A42E-44FC-847F-BF50BF91DC56" class="sect4">Example: Locating a Call Specification in an ADT Specification</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-8FCFF0E3-A42E-44FC-847F-BF50BF91DC56__GUID-66D38C0B-20F8-4199-8371-112339DD5F1F">
                           <p class="notep1">Note:</p>
                           <p>For examples in this topic to work, you must set up this data structure (which requires that you have the privilege <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">LIBRARY</code>):
                           </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE LIBRARY SOMELIB AS '/tmp/lib.so';</pre></div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE Demo_typ 
AUTHID DEFINER 
AS OBJECT
   (Attribute1   VARCHAR2(2000), SomeLib varchar2(20),
   MEMBER PROCEDURE plsToC_demoExternal_proc (x PLS_INTEGER, y VARCHAR2, z DATE) 
   AS LANGUAGE C
      NAME "C_demoExternal"
      LIBRARY SomeLib
      WITH CONTEXT
    --  PARAMETERS(CONTEXT, x INT, y STRING, z OCIDATE)
      PARAMETERS(CONTEXT, x INT, y STRING, z OCIDATE, SELF)
);</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS720"></a><div class="props_rev_3"><a id="GUID-41FECDBA-0571-4A30-BDDB-97A359617869" name="GUID-41FECDBA-0571-4A30-BDDB-97A359617869"></a><h4 id="ADFNS-GUID-41FECDBA-0571-4A30-BDDB-97A359617869" class="sect4">Example: Locating a Call Specification in an ADT Body</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE Demo_typ 
AUTHID CURRENT_USER 
AS OBJECT
   (attribute1 NUMBER,
   MEMBER PROCEDURE plsToJ_demoExternal_proc (x PLS_INTEGER, y VARCHAR2, z DATE)
);

CREATE OR REPLACE TYPE BODY Demo_typ 
AS
   MEMBER PROCEDURE plsToJ_demoExternal_proc (x PLS_INTEGER, y VARCHAR2, z DATE)
   AS LANGUAGE JAVA
      NAME 'pkg1.class4.J_demoExternal(int,java.lang.String,java.sql.Date)';
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS721"></a><div class="props_rev_3"><a id="GUID-D8528756-9D2F-4ACA-A22D-D059A13D6EFB" name="GUID-D8528756-9D2F-4ACA-A22D-D059A13D6EFB"></a><h4 id="ADFNS-GUID-D8528756-9D2F-4ACA-A22D-D059A13D6EFB" class="sect4">Example: Java with AUTHID</h4>
                  <div>
                     <div class="section">
                        <p>Here is an example of a publishing a Java class method in a standalone PL/SQL procedure.</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE plsToJ_demoExternal_proc (x PLS_INTEGER, y VARCHAR2, z DATE)
   AUTHID CURRENT_USER 
AS LANGUAGE JAVA
   NAME 'pkg1.class4.methodProc1(int,java.lang.String,java.sql.Date)';</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS722"></a><div class="props_rev_3"><a id="GUID-87C6DA57-0186-4EF2-A5DA-6209D5469FBA" name="GUID-87C6DA57-0186-4EF2-A5DA-6209D5469FBA"></a><h4 id="ADFNS-GUID-87C6DA57-0186-4EF2-A5DA-6209D5469FBA" class="sect4">Example: C with Optional AUTHID</h4>
                  <div>
                     <div class="section">
                        <p>Here is an example of <code class="codeph">AS</code> <code class="codeph">EXTERNAL</code> publishing a C procedure in a standalone PL/SQL program, in which the <code class="codeph">AUTHID</code> clause is optional. This maintains compatibility with the external procedures of Oracle Database version 8.0.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE plsToC_demoExternal_proc (x PLS_INTEGER, y VARCHAR2, z DATE) 
AS 
   EXTERNAL
   NAME "C_demoExternal"
   LIBRARY SomeLib
   WITH CONTEXT
   PARAMETERS(CONTEXT, x INT, y STRING, z OCIDATE);</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS723"></a><div class="props_rev_3"><a id="GUID-34131FAB-D6B5-4791-8327-A18AFECEDC2B" name="GUID-34131FAB-D6B5-4791-8327-A18AFECEDC2B"></a><h4 id="ADFNS-GUID-34131FAB-D6B5-4791-8327-A18AFECEDC2B" class="sect4">Example: Mixing Call Specifications in a Package</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE Demo_pack 
AUTHID DEFINER 
AS 
   PROCEDURE plsToC_InBodyOld_proc (x PLS_INTEGER, y VARCHAR2, z DATE);
   PROCEDURE plsToC_demoExternal_proc (x PLS_INTEGER, y VARCHAR2, z DATE); 
   PROCEDURE plsToC_InBody_proc (x PLS_INTEGER, y VARCHAR2, z DATE);
   PROCEDURE plsToJ_InBody_proc (x PLS_INTEGER, y VARCHAR2, z DATE);

   PROCEDURE plsToJ_InSpec_proc (x PLS_INTEGER, y VARCHAR2, z DATE)
   IS LANGUAGE JAVA
      NAME 'pkg1.class4.J_InSpec_meth(int,java.lang.String,java.sql.Date)';

PROCEDURE C_InSpec_proc (x PLS_INTEGER, y VARCHAR2, z DATE) 
   AS LANGUAGE C
      NAME "C_demoExternal"
      LIBRARY SomeLib
      WITH CONTEXT
      PARAMETERS(CONTEXT, x INT, y STRING, z OCIDATE);
END;

CREATE OR REPLACE PACKAGE BODY Demo_pack 
AS 
PROCEDURE plsToC_InBodyOld_proc (x PLS_INTEGER, y VARCHAR2, z DATE) 
   AS EXTERNAL
      NAME "C_InBodyOld"
      LIBRARY SomeLib
      WITH CONTEXT
      PARAMETERS(CONTEXT, x INT, y STRING, z OCIDATE); 
PROCEDURE plsToC_demoExternal_proc (x PLS_INTEGER, y VARCHAR2, z DATE) 
   AS LANGUAGE C
      NAME "C_demoExternal"
      LIBRARY SomeLib
      WITH CONTEXT
      PARAMETERS(CONTEXT, x INT, y STRING, z OCIDATE);
   
PROCEDURE plsToC_InBody_proc (x PLS_INTEGER, y VARCHAR2, z DATE) 
   AS LANGUAGE C
      NAME "C_InBody"
      LIBRARY SomeLib
      WITH CONTEXT
      PARAMETERS(CONTEXT, x INT, y STRING, z OCIDATE);
PROCEDURE plsToJ_InBody_proc (x PLS_INTEGER, y VARCHAR2, z DATE)
   IS LANGUAGE JAVA
      NAME 'pkg1.class4.J_InBody_meth(int,java.lang.String,java.sql.Date)';
END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS1092"></a><a id="ADFNS1409"></a><div class="props_rev_3"><a id="GUID-D6AC5D91-E0A1-44D0-94BE-B84406721B3B" name="GUID-D6AC5D91-E0A1-44D0-94BE-B84406721B3B"></a><h3 id="ADFNS-GUID-D6AC5D91-E0A1-44D0-94BE-B84406721B3B" class="sect3">Passing Parameters to External C Procedures with Call Specifications</h3>
               <div>
                  <div class="section">
                     <p>Call specifications allow a mapping between PL/SQL and C data types.</p>
                     <p>Passing parameters to an external C procedure is complicated by several circumstances:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The available set of PL/SQL data types does not correspond one-to-one with the set of C data types.</p>
                        </li>
                        <li>
                           <p>Unlike C, PL/SQL includes the RDBMS concept of nullity. Therefore, PL/SQL parameters can be <code class="codeph">NULL</code>, whereas C parameters cannot.
                           </p>
                        </li>
                        <li>
                           <p>The external procedure might need the current length or maximum length of <code class="codeph">CHAR</code>, <code class="codeph">LONG</code> <code class="codeph">RAW</code>, <code class="codeph">RAW</code>, and <code class="codeph">VARCHAR2</code> parameters.
                           </p>
                        </li>
                        <li>
                           <p>The external procedure might need character set information about <code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, and <code class="codeph">CLOB</code> parameters.
                           </p>
                        </li>
                        <li>
                           <p>PL/SQL might need the current length, maximum length, or null status of values returned by the external procedure. </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-D6AC5D91-E0A1-44D0-94BE-B84406721B3B__GUID-E791EFC0-A7F4-482E-B27B-BD254A0E3D6A">
                        <p class="notep1">Note:</p>
                        <p>The maximum number of parameters that you can pass to a C external procedure is 128. However, if you pass float or double parameters by value, then the maximum is less than 128. How much less depends on the number of such parameters and your operating system. To get a rough estimate, count each float or double passed by value as two parameters.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D6AC5D91-E0A1-44D0-94BE-B84406721B3B__GUID-0C4A5409-194E-46E7-A20B-BD572671252D">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="external-procedures.html#GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C">Specifying Data Types</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-4C42C0B1-4065-473B-B1A5-D86497529978">External Data Type Mappings</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-AAED15F3-B00A-4FD4-8AA0-567B12A67234">Passing Parameters BY VALUE or BY REFERENCE</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-E9F173EF-A940-442C-95F0-CED014259005">Declaring Formal Parameters</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-F0D604FB-D266-4EB4-ACFE-EA24FE5ACF26">Overriding Default Data Type Mapping</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-5689A420-BDEF-46B1-90FB-9003DE792A6E">Specifying Properties</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-D6AC5D91-E0A1-44D0-94BE-B84406721B3B__NOTE-1342-CB02C85E">
                        <p class="notep1">See Also:</p>
                        <p><a href="external-procedures.html#GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C">Specifying Data Types</a> for more information about data type mappings.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS725"></a><a id="ADFNS724"></a><div class="props_rev_3"><a id="GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C" name="GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C"></a><h4 id="ADFNS-GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C" class="sect4">Specifying Data Types</h4>
                  <div>
                     <div class="section">
                        <p>Do not pass parameters to an external procedure directly. Instead, pass them to the PL/SQL procedure that published the external procedure, specifying PL/SQL data types for the parameters. PL/SQL data types map to default external data types, as shown in <a href="external-procedures.html#GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C__g1024826" title="Parameter Datatype Mappings">Table 21-1</a>.
                        </p>
                        <div class="infoboxnote" id="GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C__GUID-82CDF7B0-9D59-4AFC-8D1C-BD3ECE2E1690">
                           <p class="notep1">Note:</p>
                           <p>The PL/SQL data types <code class="codeph">BINARY_INTEGER</code> and <code class="codeph">PLS_INTEGER</code> are identical. For simplicity, this guide uses "<code class="codeph">PLS_INTEGER</code>" to mean both <code class="codeph">BINARY_INTEGER</code> and <code class="codeph">PLS_INTEGER</code>.
                           </p>
                        </div>
                        <div class="tblformalwide" id="GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C__g1024826">
                           <p class="titleintable">Table 21-1  Parameter Data Type Mappings</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title=" Parameter Data Type Mappings" summary="Parameter Datatype Mappings" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="35%" id="d121552e4572">PL/SQL Data Type</th>
                                    <th align="left" valign="bottom" width="40%" id="d121552e4575">Supported External Types</th>
                                    <th align="left" valign="bottom" width="25%" id="d121552e4578">Default External Type</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4583" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">BINARY_INTEGER
BOOLEAN
PLS_INTEGER</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4583 d121552e4575 "><pre class="oac_no_warn" dir="ltr">[UNSIGNED] CHAR
[UNSIGNED] SHORT
[UNSIGNED] INT
[UNSIGNED] LONG
SB1, SB2, SB4
UB1, UB2, UB4
SIZE_T</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4583 d121552e4578 "><pre class="oac_no_warn" dir="ltr">INT</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4593" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">NATURAL<a id="GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C__BEJEAFAE" name="GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C__BEJEAFAE" href="#GUID-0EEB2593-067D-498F-BF8F-FD508E03B09C__BEJEAFAE" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Foot&nbsp;1</sup></a>
NATURALN<a id="fnsrc_d121552e4606" name="fnsrc_d121552e4606" href="#fnsrc_d121552e4606" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a>
POSITIVE<a id="fnsrc_d121552e4609" name="fnsrc_d121552e4609" href="#fnsrc_d121552e4609" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a>
POSITIVEN<a id="fnsrc_d121552e4612" name="fnsrc_d121552e4612" href="#fnsrc_d121552e4612" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a>
SIGNTYPE<a id="fnsrc_d121552e4615" name="fnsrc_d121552e4615" href="#fnsrc_d121552e4615" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a></pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4593 d121552e4575 "><pre class="oac_no_warn" dir="ltr">[UNSIGNED] CHAR
[UNSIGNED] SHORT
[UNSIGNED] INT
[UNSIGNED] LONG
SB1, SB2, SB4
UB1, UB2, UB4
SIZE_T</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4593 d121552e4578 "><pre class="oac_no_warn" dir="ltr">UNSIGNED INT</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4624" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">FLOAT
REAL</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4624 d121552e4575 "><pre class="oac_no_warn" dir="ltr">FLOAT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4624 d121552e4578 "><pre class="oac_no_warn" dir="ltr">FLOAT</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4634" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">DOUBLE PRECISION</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4634 d121552e4575 "><pre class="oac_no_warn" dir="ltr">DOUBLE</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4634 d121552e4578 "><pre class="oac_no_warn" dir="ltr">DOUBLE</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4644" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">CHAR 
CHARACTER
LONG
NCHAR
NVARCHAR2
ROWID
VARCHAR 
VARCHAR2 </pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4644 d121552e4575 "><pre class="oac_no_warn" dir="ltr">STRING
OCISTRING</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4644 d121552e4578 "><pre class="oac_no_warn" dir="ltr">STRING</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4654" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">LONG RAW 
RAW</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4654 d121552e4575 "><pre class="oac_no_warn" dir="ltr">RAW
OCIRAW</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4654 d121552e4578 "><pre class="oac_no_warn" dir="ltr">RAW</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4664" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">BFILE 
BLOB 
CLOB
NCLOB</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4664 d121552e4575 "><pre class="oac_no_warn" dir="ltr">OCILOBLOCATOR</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4664 d121552e4578 "><pre class="oac_no_warn" dir="ltr">OCILOBLOCATOR</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4674" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">NUMBER
DEC<a id="fnsrc_d121552e4677" name="fnsrc_d121552e4677" href="#fnsrc_d121552e4677" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a>
DECIMAL<a id="fnsrc_d121552e4680" name="fnsrc_d121552e4680" href="#fnsrc_d121552e4680" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a>
INT<a id="fnsrc_d121552e4683" name="fnsrc_d121552e4683" href="#fnsrc_d121552e4683" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a>
INTEGER<a id="fnsrc_d121552e4686" name="fnsrc_d121552e4686" href="#fnsrc_d121552e4686" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a>
NUMERIC<a id="fnsrc_d121552e4689" name="fnsrc_d121552e4689" href="#fnsrc_d121552e4689" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a>
SMALLINT<a id="fnsrc_d121552e4693" name="fnsrc_d121552e4693" href="#fnsrc_d121552e4693" onclick="footdisplay(1, "This PL/SQL type compiles only if you use AS EXTERNAL in your call spec.")"><sup>Footref&nbsp;1</sup></a></pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4674 d121552e4575 "><pre class="oac_no_warn" dir="ltr">OCINUMBER</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4674 d121552e4578 "><pre class="oac_no_warn" dir="ltr">OCINUMBER</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4702" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">DATE</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4702 d121552e4575 "><pre class="oac_no_warn" dir="ltr">OCIDATE</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4702 d121552e4578 "><pre class="oac_no_warn" dir="ltr">OCIDATE</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4712" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">TIMESTAMP
TIMESTAMP WITH TIME ZONE
TIMESTAMP WITH LOCAL TIME ZONE</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4712 d121552e4575 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">OCIDateTime</code></pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4712 d121552e4578 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">OCIDateTime</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4724" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">INTERVAL DAY TO SECOND
INTERVAL YEAR TO MONTH</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4724 d121552e4575 "><pre class="oac_no_warn" dir="ltr">OCIInterval</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4724 d121552e4578 "><pre class="oac_no_warn" dir="ltr">OCIInterval</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4735" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">composite object types: ADTs</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4735 d121552e4575 "><pre class="oac_no_warn" dir="ltr">dvoid</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4735 d121552e4578 "><pre class="oac_no_warn" dir="ltr">dvoid</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d121552e4745" headers="d121552e4572 "><pre class="oac_no_warn" dir="ltr">composite object types: collections (associative arrays, varrays, nested tables)</pre></td>
                                    <td align="left" valign="top" width="40%" headers="d121552e4745 d121552e4575 "><pre class="oac_no_warn" dir="ltr">OCICOLL</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4745 d121552e4578 "><pre class="oac_no_warn" dir="ltr">OCICOLL</pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>This PL/SQL type compiles only if you use <code class="codeph">AS</code> <code class="codeph">EXTERNAL</code> in your call spec.
                           </p>
                        <p></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS727"></a><a id="ADFNS726"></a><div class="props_rev_3"><a id="GUID-4C42C0B1-4065-473B-B1A5-D86497529978" name="GUID-4C42C0B1-4065-473B-B1A5-D86497529978"></a><h4 id="ADFNS-GUID-4C42C0B1-4065-473B-B1A5-D86497529978" class="sect4">External Data Type Mappings</h4>
                  <div>
                     <div class="section">
                        <p>Each external data type maps to a C data type, and the data type conversions are performed implicitly. To avoid errors when declaring C prototype parameters, see <a href="external-procedures.html#GUID-4C42C0B1-4065-473B-B1A5-D86497529978__g1024886" title="This table summarizes the external datatype mappings.">Table 21-2</a>, which shows the C data type to specify for a given external data type and PL/SQL parameter mode. For example, if the external data type of an <code class="codeph">OUT</code> parameter is <code class="codeph">STRING</code>, then specify the data type char * in your C prototype.
                        </p>
                        <div class="tblformal" id="GUID-4C42C0B1-4065-473B-B1A5-D86497529978__g1024886">
                           <p class="titleintable">Table 21-2  External Data Type Mappings</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title=" External Data Type Mappings" summary="This table summarizes the external datatype mappings." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d121552e4876">External Data Type Corresponding to PL/SL Type</th>
                                    <th align="left" valign="bottom" width="25%" id="d121552e4879">If Mode is IN or RETURN, Specify in C Prototype...</th>
                                    <th align="left" valign="bottom" width="32%" id="d121552e4882">If Mode is IN by Reference or RETURN by Reference, Specify in C Prototype...</th>
                                    <th align="left" valign="bottom" width="21%" id="d121552e4885">If Mode is IN OUT or OUT, Specify in C Prototype...</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e4890" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">CHAR</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4890 d121552e4879 "><pre class="oac_no_warn" dir="ltr">char</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e4890 d121552e4882 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e4890 d121552e4885 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e4903" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UNSIGNED CHAR</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4903 d121552e4879 "><pre class="oac_no_warn" dir="ltr">unsigned char</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e4903 d121552e4882 "><pre class="oac_no_warn" dir="ltr">unsigned char *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e4903 d121552e4885 "><pre class="oac_no_warn" dir="ltr">unsigned char *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e4916" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">SHORT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4916 d121552e4879 "><pre class="oac_no_warn" dir="ltr">short</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e4916 d121552e4882 "><pre class="oac_no_warn" dir="ltr">short *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e4916 d121552e4885 "><pre class="oac_no_warn" dir="ltr">short *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e4929" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UNSIGNED SHORT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4929 d121552e4879 "><pre class="oac_no_warn" dir="ltr">unsigned short</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e4929 d121552e4882 "><pre class="oac_no_warn" dir="ltr">unsigned short *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e4929 d121552e4885 "><pre class="oac_no_warn" dir="ltr">unsigned short *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e4942" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">INT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4942 d121552e4879 "><pre class="oac_no_warn" dir="ltr">int</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e4942 d121552e4882 "><pre class="oac_no_warn" dir="ltr">int *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e4942 d121552e4885 "><pre class="oac_no_warn" dir="ltr">int *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e4955" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UNSIGNED INT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4955 d121552e4879 "><pre class="oac_no_warn" dir="ltr">unsigned int</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e4955 d121552e4882 "><pre class="oac_no_warn" dir="ltr">unsigned int *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e4955 d121552e4885 "><pre class="oac_no_warn" dir="ltr">unsigned int *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e4968" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">LONG</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4968 d121552e4879 "><pre class="oac_no_warn" dir="ltr">long</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e4968 d121552e4882 "><pre class="oac_no_warn" dir="ltr">long *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e4968 d121552e4885 "><pre class="oac_no_warn" dir="ltr">long *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e4981" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UNSIGNED LONG</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4981 d121552e4879 "><pre class="oac_no_warn" dir="ltr">unsigned long</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e4981 d121552e4882 "><pre class="oac_no_warn" dir="ltr">unsigned long *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e4981 d121552e4885 "><pre class="oac_no_warn" dir="ltr">unsigned long *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e4994" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">CHAR</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e4994 d121552e4879 "><pre class="oac_no_warn" dir="ltr">char</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e4994 d121552e4882 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e4994 d121552e4885 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5007" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UNSIGNED CHAR</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5007 d121552e4879 "><pre class="oac_no_warn" dir="ltr">unsigned char</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5007 d121552e4882 "><pre class="oac_no_warn" dir="ltr">unsigned char *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5007 d121552e4885 "><pre class="oac_no_warn" dir="ltr">unsigned char *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5020" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">SHORT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5020 d121552e4879 "><pre class="oac_no_warn" dir="ltr">short</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5020 d121552e4882 "><pre class="oac_no_warn" dir="ltr">short *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5020 d121552e4885 "><pre class="oac_no_warn" dir="ltr">short *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5034" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UNSIGNED SHORT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5034 d121552e4879 "><pre class="oac_no_warn" dir="ltr">unsigned short</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5034 d121552e4882 "><pre class="oac_no_warn" dir="ltr">unsigned short *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5034 d121552e4885 "><pre class="oac_no_warn" dir="ltr">unsigned short *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5047" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">INT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5047 d121552e4879 "><pre class="oac_no_warn" dir="ltr">int</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5047 d121552e4882 "><pre class="oac_no_warn" dir="ltr">int *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5047 d121552e4885 "><pre class="oac_no_warn" dir="ltr">int *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5060" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UNSIGNED INT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5060 d121552e4879 "><pre class="oac_no_warn" dir="ltr">unsigned int</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5060 d121552e4882 "><pre class="oac_no_warn" dir="ltr">unsigned int *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5060 d121552e4885 "><pre class="oac_no_warn" dir="ltr">unsigned int *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5073" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">LONG</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5073 d121552e4879 "><pre class="oac_no_warn" dir="ltr">long</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5073 d121552e4882 "><pre class="oac_no_warn" dir="ltr">long *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5073 d121552e4885 "><pre class="oac_no_warn" dir="ltr">long *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5086" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UNSIGNED LONG</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5086 d121552e4879 "><pre class="oac_no_warn" dir="ltr">unsigned long</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5086 d121552e4882 "><pre class="oac_no_warn" dir="ltr">unsigned long *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5086 d121552e4885 "><pre class="oac_no_warn" dir="ltr">unsigned long *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5099" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">SIZE_T</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5099 d121552e4879 "><pre class="oac_no_warn" dir="ltr">size_t</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5099 d121552e4882 "><pre class="oac_no_warn" dir="ltr">size_t *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5099 d121552e4885 "><pre class="oac_no_warn" dir="ltr">size_t *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5112" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">SB1</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5112 d121552e4879 "><pre class="oac_no_warn" dir="ltr">sb1</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5112 d121552e4882 "><pre class="oac_no_warn" dir="ltr">sb1 *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5112 d121552e4885 "><pre class="oac_no_warn" dir="ltr">sb1 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5125" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UB1</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5125 d121552e4879 "><pre class="oac_no_warn" dir="ltr">ub1</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5125 d121552e4882 "><pre class="oac_no_warn" dir="ltr">ub1 *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5125 d121552e4885 "><pre class="oac_no_warn" dir="ltr">ub1 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5138" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">SB2</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5138 d121552e4879 "><pre class="oac_no_warn" dir="ltr">sb2</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5138 d121552e4882 "><pre class="oac_no_warn" dir="ltr">sb2 *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5138 d121552e4885 "><pre class="oac_no_warn" dir="ltr">sb2 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5151" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UB2</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5151 d121552e4879 "><pre class="oac_no_warn" dir="ltr">ub2</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5151 d121552e4882 "><pre class="oac_no_warn" dir="ltr">ub2 *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5151 d121552e4885 "><pre class="oac_no_warn" dir="ltr">ub2 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5164" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">SB4</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5164 d121552e4879 "><pre class="oac_no_warn" dir="ltr">sb4</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5164 d121552e4882 "><pre class="oac_no_warn" dir="ltr">sb4 *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5164 d121552e4885 "><pre class="oac_no_warn" dir="ltr">sb4 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5178" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">UB4</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5178 d121552e4879 "><pre class="oac_no_warn" dir="ltr">ub4</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5178 d121552e4882 "><pre class="oac_no_warn" dir="ltr">ub4 *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5178 d121552e4885 "><pre class="oac_no_warn" dir="ltr">ub4 *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5191" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">FLOAT</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5191 d121552e4879 "><pre class="oac_no_warn" dir="ltr">float</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5191 d121552e4882 "><pre class="oac_no_warn" dir="ltr">float *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5191 d121552e4885 "><pre class="oac_no_warn" dir="ltr">float *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5204" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">DOUBLE</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5204 d121552e4879 "><pre class="oac_no_warn" dir="ltr">double</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5204 d121552e4882 "><pre class="oac_no_warn" dir="ltr">double *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5204 d121552e4885 "><pre class="oac_no_warn" dir="ltr">double *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5217" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">STRING</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5217 d121552e4879 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5217 d121552e4882 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5217 d121552e4885 "><pre class="oac_no_warn" dir="ltr">char *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5230" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">RAW</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5230 d121552e4879 "><pre class="oac_no_warn" dir="ltr">unsigned char *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5230 d121552e4882 "><pre class="oac_no_warn" dir="ltr">unsigned char *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5230 d121552e4885 "><pre class="oac_no_warn" dir="ltr">unsigned char *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5243" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">OCILOBLOCATOR</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5243 d121552e4879 "><pre class="oac_no_warn" dir="ltr">OCILobLocator *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5243 d121552e4882 "><pre class="oac_no_warn" dir="ltr">OCILobLocator **</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5243 d121552e4885 "><pre class="oac_no_warn" dir="ltr">OCILobLocator **</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5256" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">OCINUMBER</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5256 d121552e4879 "><pre class="oac_no_warn" dir="ltr">OCINumber *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5256 d121552e4882 "><pre class="oac_no_warn" dir="ltr">OCINumber *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5256 d121552e4885 "><pre class="oac_no_warn" dir="ltr">OCINumber *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5269" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">OCISTRING</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5269 d121552e4879 "><pre class="oac_no_warn" dir="ltr">OCIString *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5269 d121552e4882 "><pre class="oac_no_warn" dir="ltr">OCIString *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5269 d121552e4885 "><pre class="oac_no_warn" dir="ltr">OCIString *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5282" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">OCIRAW</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5282 d121552e4879 "><pre class="oac_no_warn" dir="ltr">OCIRaw *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5282 d121552e4882 "><pre class="oac_no_warn" dir="ltr">OCIRaw *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5282 d121552e4885 "><pre class="oac_no_warn" dir="ltr">OCIRaw *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5295" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">OCIDATE</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5295 d121552e4879 "><pre class="oac_no_warn" dir="ltr">OCIDate *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5295 d121552e4882 "><pre class="oac_no_warn" dir="ltr">OCIDate *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5295 d121552e4885 "><pre class="oac_no_warn" dir="ltr">OCIDate *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5308" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">OCICOLL</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5308 d121552e4879 "><pre class="oac_no_warn" dir="ltr">OCIColl * or OCIArray * or OCITable *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5308 d121552e4882 "><pre class="oac_no_warn" dir="ltr">OCIColl **
or OCIArray **
or OCITable **</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5308 d121552e4885 "><pre class="oac_no_warn" dir="ltr">OCIColl ** or OCIArray ** or OCITable **</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5322" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">OCITYPE</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5322 d121552e4879 "><pre class="oac_no_warn" dir="ltr">OCIType *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5322 d121552e4882 "><pre class="oac_no_warn" dir="ltr">OCIType *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5322 d121552e4885 "><pre class="oac_no_warn" dir="ltr">OCIType *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5335" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">TDO</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5335 d121552e4879 "><pre class="oac_no_warn" dir="ltr">OCIType *</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5335 d121552e4882 "><pre class="oac_no_warn" dir="ltr">OCIType *</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5335 d121552e4885 "><pre class="oac_no_warn" dir="ltr">OCIType *</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5348" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">ADT
(final types)</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5348 d121552e4879 "><pre class="oac_no_warn" dir="ltr">dvoid*</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5348 d121552e4882 "><pre class="oac_no_warn" dir="ltr">dvoid*</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5348 d121552e4885 "><pre class="oac_no_warn" dir="ltr">dvoid*</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d121552e5361" headers="d121552e4876 "><pre class="oac_no_warn" dir="ltr">ADT (nonfinal types)</pre></td>
                                    <td align="left" valign="top" width="25%" headers="d121552e5361 d121552e4879 "><pre class="oac_no_warn" dir="ltr">dvoid*</pre></td>
                                    <td align="left" valign="top" width="32%" headers="d121552e5361 d121552e4882 "><pre class="oac_no_warn" dir="ltr">dvoid*</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e5361 d121552e4885 "><pre class="oac_no_warn" dir="ltr">dvoid**</pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Composite data types are not self describing. Their description is stored in a <strong class="term">Type Descriptor Object</strong> (TDO). Objects and indicator structs for objects have no predefined OCI data type, but must use the data types generated by Oracle Database's <strong class="term">Object</strong> <strong class="term">Type</strong> <strong class="term">Translator</strong> (OTT). The optional TDO argument for <code class="codeph">INDICATOR</code>, and for composite objects, in general, has the C data type, OCIType *.
                        </p>
                        <p><code class="codeph">OCICOLL</code> for <code class="codeph">REF</code> and collection arguments is optional and exists only for completeness. You cannot map a <code class="codeph">REF</code> or collection type onto any other data type, or any other data type onto a <code class="codeph">REF</code> or collection type.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS728"></a><div class="props_rev_3"><a id="GUID-AAED15F3-B00A-4FD4-8AA0-567B12A67234" name="GUID-AAED15F3-B00A-4FD4-8AA0-567B12A67234"></a><h4 id="ADFNS-GUID-AAED15F3-B00A-4FD4-8AA0-567B12A67234" class="sect4">Passing Parameters BY VALUE or BY REFERENCE</h4>
                  <div>
                     <div class="section">
                        <p>If you specify <code class="codeph">BY</code> <code class="codeph">VALUE</code>, then scalar <code class="codeph">IN</code> and <code class="codeph">RETURN</code> arguments are passed by value (which is also the default). Alternatively, you might have them passed by reference by specifying <code class="codeph">BY</code> <code class="codeph">REFERENCE</code>. 
                        </p>
                        <p>By default, or if you specify <code class="codeph">BY</code> <code class="codeph">REFERENCE</code>, then scalar <code class="codeph">IN</code> <code class="codeph">OUT</code>, and <code class="codeph">OUT</code> arguments are passed by reference. Specifying <code class="codeph">BY</code> <code class="codeph">VALUE</code> for <code class="codeph">IN</code> <code class="codeph">OUT</code>, and <code class="codeph">OUT</code> arguments is not supported for C. The usefulness of the <code class="codeph">BY</code> <code class="codeph">REFERENCE</code>/<code class="codeph">VALUE</code> clause is restricted to external data types that are, by default, passed by value. This is true for <code class="codeph">IN</code>, and <code class="codeph">RETURN</code> arguments of these external types:
                        </p><pre class="oac_no_warn" dir="ltr">[UNSIGNED] CHAR
[UNSIGNED] SHORT
[UNSIGNED] INT
[UNSIGNED] LONG
SIZE_T
SB1
SB2
SB4
UB1
UB2
UB4
FLOAT
DOUBLE
</pre><p>All <code class="codeph">IN</code> and <code class="codeph">RETURN</code> arguments of external types not on this list, all <code class="codeph">IN</code> <code class="codeph">OUT</code> arguments, and all <code class="codeph">OUT</code> arguments are passed by reference.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS729"></a><div class="props_rev_3"><a id="GUID-E9F173EF-A940-442C-95F0-CED014259005" name="GUID-E9F173EF-A940-442C-95F0-CED014259005"></a><h4 id="ADFNS-GUID-E9F173EF-A940-442C-95F0-CED014259005" class="sect4">Declaring Formal Parameters</h4>
                  <div>
                     <div class="section">
                        <p>Generally, the PL/SQL procedure that publishes an external procedure declares a list of formal parameters, as this example shows:</p>
                        <div class="infoboxnote" id="GUID-E9F173EF-A940-442C-95F0-CED014259005__GUID-5F303152-4E92-417F-AAB3-39395A68D195">
                           <p class="notep1">Note:</p>
                           <p>You might need to set up this data structure for examples in this topic to work:</p><pre class="oac_no_warn" dir="ltr">CREATE LIBRARY MathLib AS '/tmp/math.so';</pre></div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION Interp_func (
<span class="italic">/* Find the value of y at x degrees using Lagrange interpolation: */ </span>
   x    IN FLOAT, 
   y    IN FLOAT) 
RETURN FLOAT AS 
   LANGUAGE C
   NAME "Interp_func"
   LIBRARY MathLib;
</pre><p>Each formal parameter declaration specifies a name, parameter mode, and PL/SQL data type (which maps to the default external data type). That might be all the information the external procedure needs. If not, then you can provide more information using the <code class="codeph">PARAMETERS</code> clause, which lets you specify:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Nondefault external data types</p>
                           </li>
                           <li>
                              <p>The current or maximum length of a parameter</p>
                           </li>
                           <li>
                              <p><code class="codeph">NULL</code>/<code class="codeph">NOT</code> <code class="codeph">NULL</code> indicators for parameters
                              </p>
                           </li>
                           <li>
                              <p>Character set IDs and forms</p>
                           </li>
                           <li>
                              <p>The position of parameters in the list</p>
                           </li>
                           <li>
                              <p>How <code class="codeph">IN</code> parameters are passed (by value or by reference)
                              </p>
                           </li>
                        </ul>
                        <p>If you decide to use the <code class="codeph">PARAMETERS</code> clause, keep in mind:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For every formal parameter, there must be a corresponding parameter in the <code class="codeph">PARAMETERS</code> clause. 
                              </p>
                           </li>
                           <li>
                              <p>If you include the <code class="codeph">WITH</code> <code class="codeph">CONTEXT</code> clause, then you must specify the parameter <code class="codeph">CONTEXT</code>, which shows the position of the context pointer in the parameter list. 
                              </p>
                           </li>
                           <li>
                              <p>If the external procedure is a function, then you might specify the <code class="codeph">RETURN</code> parameter, but it must be in the last position. If <code class="codeph">RETURN</code> is not specified, the default external type is used.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS730"></a><div class="props_rev_3"><a id="GUID-F0D604FB-D266-4EB4-ACFE-EA24FE5ACF26" name="GUID-F0D604FB-D266-4EB4-ACFE-EA24FE5ACF26"></a><h4 id="ADFNS-GUID-F0D604FB-D266-4EB4-ACFE-EA24FE5ACF26" class="sect4">Overriding Default Data Type Mapping</h4>
                  <div>
                     <div class="section">
                        <p>In some cases, you can use the <code class="codeph">PARAMETERS</code> clause to override the default data type mappings. For example, you can remap the PL/SQL data type <code class="codeph">BOOLEAN</code> from external data type <code class="codeph">INT</code> to external data type <code class="codeph">CHAR</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS732"></a><a id="ADFNS1093"></a><a id="ADFNS731"></a><div class="props_rev_3"><a id="GUID-5689A420-BDEF-46B1-90FB-9003DE792A6E" name="GUID-5689A420-BDEF-46B1-90FB-9003DE792A6E"></a><h4 id="ADFNS-GUID-5689A420-BDEF-46B1-90FB-9003DE792A6E" class="sect4">Specifying Properties</h4>
                  <div>
                     <div class="section">
                        <p>You can also use the <code class="codeph">PARAMETERS</code> clause to pass more information about PL/SQL formal parameters and function results to an external procedure. Do this by specifying one or more of these properties:
                        </p><pre class="oac_no_warn" dir="ltr">INDICATOR [{STRUCT | TDO}]
<code class="codeph">LENGTH</code>
DURATION
<code class="codeph">MAXLEN</code>
<code class="codeph">CHARSETID</code>
<code class="codeph">CHARSETFORM</code>
SELF
</pre><p><a href="external-procedures.html#GUID-5689A420-BDEF-46B1-90FB-9003DE792A6E__g1025084" title="This table summarizes the properties of the PL/SQL datatypes.">Table 21-3</a> shows the allowed and the default external data types, PL/SQL data types, and PL/SQL parameter modes allowed for a given property. <code class="codeph">MAXLEN</code> (used to specify data returned from C back to PL/SQL) cannot be applied to an <code class="codeph">IN</code> parameter.
                        </p>
                        <div class="tblformalwide" id="GUID-5689A420-BDEF-46B1-90FB-9003DE792A6E__g1025084">
                           <p class="titleintable">Table 21-3  Properties and Data Types</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title=" Properties and Data Types" summary="This table summarizes the properties of the PL/SQL datatypes." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="13%" id="d121552e6020">Property</th>
                                    <th align="left" valign="bottom" width="18%" id="d121552e6023">Allowed External Types (C)</th>
                                    <th align="left" valign="bottom" width="17%" id="d121552e6026">Default External Type (C)</th>
                                    <th align="left" valign="bottom" width="16%" id="d121552e6029">Allowed PL/SQL Types</th>
                                    <th align="left" valign="bottom" width="16%" id="d121552e6032">Allowed PL/SQL Modes</th>
                                    <th align="left" valign="bottom" width="21%" id="d121552e6035">Default PL/SQL Passing Method</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d121552e6040" headers="d121552e6020 "><pre class="oac_no_warn" dir="ltr">INDICATOR</pre></td>
                                    <td align="left" valign="top" width="18%" headers="d121552e6040 d121552e6023 "><pre class="oac_no_warn" dir="ltr">SHORT</pre></td>
                                    <td align="left" valign="top" width="17%" headers="d121552e6040 d121552e6026 "><pre class="oac_no_warn" dir="ltr">SHORT</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d121552e6040 d121552e6029 "><pre class="oac_no_warn" dir="ltr">all scalars</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d121552e6040 d121552e6032 "><pre class="oac_no_warn" dir="ltr">IN
IN OUT
OUT
RETURN</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e6040 d121552e6035 "><pre class="oac_no_warn" dir="ltr">BY VALUE
BY REFERENCE
BY REFERENCE
BY REFERENCE</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d121552e6059" headers="d121552e6020 "><pre class="oac_no_warn" dir="ltr">LENGTH</pre></td>
                                    <td align="left" valign="top" width="18%" headers="d121552e6059 d121552e6023 "><pre class="oac_no_warn" dir="ltr">[UNSIGNED] SHORT
[UNSIGNED] INT
[UNSIGNED] LONG</pre></td>
                                    <td align="left" valign="top" width="17%" headers="d121552e6059 d121552e6026 "><pre class="oac_no_warn" dir="ltr">INT</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d121552e6059 d121552e6029 "><pre class="oac_no_warn" dir="ltr">CHAR
LONG RAW
RAW
VARCHAR2</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d121552e6059 d121552e6032 "><pre class="oac_no_warn" dir="ltr">IN
IN OUT
OUT
RETURN</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e6059 d121552e6035 "><pre class="oac_no_warn" dir="ltr">BY VALUE
BY REFERENCE
BY REFERENCE
BY REFERENCE</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d121552e6078" headers="d121552e6020 "><pre class="oac_no_warn" dir="ltr">MAXLEN</pre></td>
                                    <td align="left" valign="top" width="18%" headers="d121552e6078 d121552e6023 "><pre class="oac_no_warn" dir="ltr">[UNSIGNED] SHORT
[UNSIGNED] INT
[UNSIGNED] LONG</pre></td>
                                    <td align="left" valign="top" width="17%" headers="d121552e6078 d121552e6026 "><pre class="oac_no_warn" dir="ltr">INT</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d121552e6078 d121552e6029 "><pre class="oac_no_warn" dir="ltr">CHAR
LONG RAW
RAW
VARCHAR2</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d121552e6078 d121552e6032 "><pre class="oac_no_warn" dir="ltr">IN OUT
OUT
RETURN</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e6078 d121552e6035 "><pre class="oac_no_warn" dir="ltr">BY REFERENCE
BY REFERENCE
BY REFERENCE</pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d121552e6097" headers="d121552e6020 "><pre class="oac_no_warn" dir="ltr">CHARSETID
CHARSETFORM</pre></td>
                                    <td align="left" valign="top" width="18%" headers="d121552e6097 d121552e6023 "><pre class="oac_no_warn" dir="ltr">UNSIGNED SHORT
UNSIGNED INT
UNSIGNED LONG</pre></td>
                                    <td align="left" valign="top" width="17%" headers="d121552e6097 d121552e6026 "><pre class="oac_no_warn" dir="ltr">UNSIGNED INT</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d121552e6097 d121552e6029 "><pre class="oac_no_warn" dir="ltr">CHAR
CLOB
VARCHAR2</pre></td>
                                    <td align="left" valign="top" width="16%" headers="d121552e6097 d121552e6032 "><pre class="oac_no_warn" dir="ltr">IN
IN OUT
OUT
RETURN</pre></td>
                                    <td align="left" valign="top" width="21%" headers="d121552e6097 d121552e6035 "><pre class="oac_no_warn" dir="ltr">BY VALUE
BY REFERENCE
BY REFERENCE
BY REFERENCE</pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>In this example, the <code class="codeph">PARAMETERS</code> clause specifies properties for the PL/SQL formal parameters and function result:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION plsToCparse_func  (
   x   IN PLS_INTEGER,
   Y   IN OUT CHAR) 
RETURN CHAR AS LANGUAGE C
   LIBRARY c_utils 
   NAME "C_parse" 
   PARAMETERS (
      x,            -- stores value of x
      x INDICATOR,  -- stores null status of x 
      y,            -- stores value of y
      y LENGTH,     -- stores current length of y
      y MAXLEN,     -- stores maximum length of y
      RETURN INDICATOR,
      RETURN);
</pre><p>With this <code class="codeph">PARAMETERS</code> clause, the C prototype becomes:
                        </p><pre class="oac_no_warn" dir="ltr">char  *C_parse( int x, short x_ind, char *y, int *y_len, int *y_maxlen,
  short *retind );
</pre><p>The additional parameters in the C prototype correspond to the <code class="codeph">INDICATOR</code> (for <code class="codeph">x</code>), <code class="codeph">LENGTH</code> (of <code class="codeph">y</code>), and <code class="codeph">MAXLEN</code> (of <code class="codeph">y</code>), and the <code class="codeph">INDICATOR</code> for the function result in the <code class="codeph">PARAMETERS</code> clause. The parameter <code class="codeph">RETURN</code> corresponds to the C function identifier, which stores the result value.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5689A420-BDEF-46B1-90FB-9003DE792A6E__GUID-3FDD04DE-132A-4D06-B419-C536D6465D97">Topics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="external-procedures.html#GUID-4EA97657-C287-4840-9E3B-010D0A45C903">INDICATOR</a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-207ADB86-FB6F-44E6-8920-3FD3BD6FC261">LENGTH and MAXLEN</a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-155FC173-B216-486E-9126-3F9064ACA785">CHARSETID and CHARSETFORM</a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-580D15BC-3A1F-4B87-AE45-3D9B04D9F212">Repositioning Parameters</a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-D3A93BDB-AD4F-4843-99D3-A5459BA29B81">SELF</a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-D7472464-DCB9-4305-A5BE-2D4A9C963D15">BY REFERENCE</a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-380DBDEB-5FB9-43E4-B8EE-11A11DEB22C6">WITH CONTEXT </a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-106AB76F-0CBF-4DD9-B2B4-DE6E4A1F3C91">Interlanguage Parameter Mode Mappings</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS733"></a><div class="props_rev_3"><a id="GUID-4EA97657-C287-4840-9E3B-010D0A45C903" name="GUID-4EA97657-C287-4840-9E3B-010D0A45C903"></a><h5 id="ADFNS-GUID-4EA97657-C287-4840-9E3B-010D0A45C903" class="sect5">INDICATOR</h5>
                     <div>
                        <p>An <code class="codeph">INDICATOR</code> is a parameter whose value indicates whether another parameter is <code class="codeph">NULL</code>. PL/SQL does not need indicators, because the RDBMS concept of nullity is built into the language. However, an external procedure might need to determine if a parameter or function result is <code class="codeph">NULL</code>. Also, an external procedure might need to signal the server that a returned value is <code class="codeph">NULL</code>, and must be treated accordingly. 
                        </p>
                        <p>In such cases, you can use the property <code class="codeph">INDICATOR</code> to associate an indicator with a formal parameter. If the PL/SQL procedure is a function, then you can also associate an indicator with the function result, as shown in <a href="external-procedures.html#GUID-5689A420-BDEF-46B1-90FB-9003DE792A6E">Specifying Properties</a>.
                        </p>
                        <p>To check the value of an indicator, you can use the constants <code class="codeph">OCI_IND_NULL</code> and <code class="codeph">OCI_IND_NOTNULL</code>. If the indicator equals <code class="codeph">OCI_IND_NULL</code>, then the associated parameter or function result is <code class="codeph">NULL</code>. If the indicator equals <code class="codeph">OCI_IND_NOTNULL</code>, then the parameter or function result is not <code class="codeph">NULL</code>.
                        </p>
                        <p>For <code class="codeph">IN</code> parameters, which are inherently read-only, <code class="codeph">INDICATOR</code> is passed by value (unless you specify <code class="codeph">BY</code> <code class="codeph">REFERENCE</code>) and is read-only (even if you specify <code class="codeph">BY</code> <code class="codeph">REFERENCE</code>). For <code class="codeph">OUT</code>, <code class="codeph">IN</code> <code class="codeph">OUT</code>, and <code class="codeph">RETURN</code> parameters, <code class="codeph">INDICATOR</code> is passed by reference by default.
                        </p>
                        <p>The <code class="codeph">INDICATOR</code> can also have a <code class="codeph">STRUCT</code> or TDO option. Because specifying <code class="codeph">INDICATOR</code> as a property of an object is not supported, and because arguments of objects have complete indicator structs instead of <code class="codeph">INDICATOR</code> scalars, you must specify this by using the <code class="codeph">STRUCT</code> option. You must use the type descriptor object (TDO) option for composite objects and collections, 
                        </p>
                     </div>
                  </div><a id="ADFNS734"></a><div class="props_rev_3"><a id="GUID-207ADB86-FB6F-44E6-8920-3FD3BD6FC261" name="GUID-207ADB86-FB6F-44E6-8920-3FD3BD6FC261"></a><h5 id="ADFNS-GUID-207ADB86-FB6F-44E6-8920-3FD3BD6FC261" class="sect5">LENGTH and MAXLEN</h5>
                     <div>
                        <p>In PL/SQL, there is no standard way to indicate the length of a <code class="codeph">RAW</code> or string parameter. However, you might want to pass the length of such a parameter to and from an external procedure. Using the properties <code class="codeph">LENGTH</code> and <code class="codeph">MAXLEN</code>, you can specify parameters that store the current length and maximum length of a formal parameter.
                        </p>
                        <div class="infoboxnote" id="GUID-207ADB86-FB6F-44E6-8920-3FD3BD6FC261__GUID-10053271-14AB-4275-B1E5-8E4C465F8B7A">
                           <p class="notep1">Note:</p>
                           <p>With a parameter of type <code class="codeph">RAW</code> or <code class="codeph">LONG</code> <code class="codeph">RAW</code>, you must use the property <code class="codeph">LENGTH</code>. Also, if that parameter is <code class="codeph">IN</code> <code class="codeph">OUT</code> and <code class="codeph">NULL</code> or <code class="codeph">OUT</code> and <code class="codeph">NULL</code>, then you must set the length of the corresponding C parameter to zero.
                           </p>
                        </div>
                        <p>For <code class="codeph">IN</code> parameters, <code class="codeph">LENGTH</code> is passed by value (unless you specify <code class="codeph">BY</code> <code class="codeph">REFERENCE</code>) and is read-only. For <code class="codeph">OUT</code>, <code class="codeph">IN</code> <code class="codeph">OUT</code>, and <code class="codeph">RETURN</code> parameters, <code class="codeph">LENGTH</code> is passed by reference.
                        </p>
                        <p><code class="codeph">MAXLEN</code> does not apply to <code class="codeph">IN</code> parameters. For <code class="codeph">OUT</code>, <code class="codeph">IN</code> <code class="codeph">OUT</code>, and <code class="codeph">RETURN</code> parameters, <code class="codeph">MAXLEN</code> is passed by reference and is read-only.
                        </p>
                     </div>
                  </div><a id="ADFNS735"></a><div class="props_rev_3"><a id="GUID-155FC173-B216-486E-9126-3F9064ACA785" name="GUID-155FC173-B216-486E-9126-3F9064ACA785"></a><h5 id="ADFNS-GUID-155FC173-B216-486E-9126-3F9064ACA785" class="sect5">CHARSETID and CHARSETFORM</h5>
                     <div>
                        <p>Oracle Database provides globalization support, which lets you process single‐byte and multibyte character data and convert between character sets. It also lets your applications run in different language environments.</p>
                        <p>By default, if the server and agent use the exact same <code class="codeph">$ORACLE_HOME</code> value, the agent uses the same globalization support settings as the server (including any settings that were specified with <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> statements).
                        </p>
                        <p>If the agent is running in a separate <code class="codeph">$ORACLE_HOME</code> (even if the same location is specified by two different aliases or symbolic links), the agent uses the same globalization support settings as the server except for the character set; the default character set for the agent is defined by the <code class="codeph">NLS_LANG</code> and <code class="codeph">NLS_NCHAR</code> environment settings for the agent.
                        </p>
                        <p>The properties <code class="codeph">CHARSETID</code> and <code class="codeph">CHARSETFORM</code> identify the nondefault character set from which the character data being passed was formed. With <code class="codeph">CHAR</code>, <code class="codeph">CLOB</code>, and <code class="codeph">VARCHAR2</code> parameters, you can use <code class="codeph">CHARSETID</code> and <code class="codeph">CHARSETFORM</code> to pass the character set ID and form to the external procedure.
                        </p>
                        <p>For <code class="codeph">IN</code> parameters, <code class="codeph">CHARSETID</code> and <code class="codeph">CHARSETFORM</code> are passed by value (unless you specify <code class="codeph">BY</code> <code class="codeph">REFERENCE</code>) and are read-only (even if you specify <code class="codeph">BY</code> <code class="codeph">REFERENCE</code>). For <code class="codeph">OUT</code>, <code class="codeph">IN</code> <code class="codeph">OUT</code>, and <code class="codeph">RETURN</code> parameters, <code class="codeph">CHARSETID</code> and <code class="codeph">CHARSETFORM</code> are passed by reference and are read-only.
                        </p>
                        <p>The OCI attribute names for these properties are <code class="codeph">OCI_ATTR_CHARSET_ID</code> and <code class="codeph">OCI_ATTR_CHARSET_FORM</code>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-155FC173-B216-486E-9126-3F9064ACA785__GUID-B0465005-EFFC-4831-B631-04F3C0968FD8">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI050" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide </span></a>for more information about <code class="codeph">OCI_ATTR_CHARSET_ID</code> and <code class="codeph">OCI_ATTR_CHARSET_FORM</code></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=NLSPG465" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a> for more information about using national language data with the OCI
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADFNS736"></a><div class="props_rev_3"><a id="GUID-580D15BC-3A1F-4B87-AE45-3D9B04D9F212" name="GUID-580D15BC-3A1F-4B87-AE45-3D9B04D9F212"></a><h5 id="ADFNS-GUID-580D15BC-3A1F-4B87-AE45-3D9B04D9F212" class="sect5">Repositioning Parameters</h5>
                     <div>
                        <div class="section">
                           <p>Remember, each formal parameter of the external procedure must have a corresponding parameter in the <code class="codeph">PARAMETERS</code> clause. Their positions can differ, because PL/SQL associates them by name, not by position. However, the <code class="codeph">PARAMETERS</code> clause and the C prototype for the external procedure must have the same number of parameters, and they must be in the same order.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS737"></a><div class="props_rev_3"><a id="GUID-D3A93BDB-AD4F-4843-99D3-A5459BA29B81" name="GUID-D3A93BDB-AD4F-4843-99D3-A5459BA29B81"></a><h5 id="ADFNS-GUID-D3A93BDB-AD4F-4843-99D3-A5459BA29B81" class="sect5">SELF</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">SELF</code> is the always-present argument of an object type's member procedure, namely the object instance itself. In most cases, this argument is implicit and is not listed in the argument list of the PL/SQL procedure. However, <code class="codeph">SELF</code> must be explicitly specified as an argument of the <code class="codeph">PARAMETERS</code> clause.
                           </p>
                           <p>For example, assume that you want to create a <code class="codeph">Person</code> object, consisting of a person's name and date of birth, and then create a table of this object type. You eventually want to determine the age of each <code class="codeph">Person</code> object in this table.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>In SQL*Plus, the <code class="codeph">Person</code> object type can be created by:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE Person1_typ AS OBJECT (
  Name_     VARCHAR2(30),
  B_date    DATE,
  MEMBER FUNCTION calcAge_func RETURN NUMBER
);
/
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Declare the body of the member function as follows:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE BODY Person1_typ AS
  MEMBER FUNCTION calcAge_func RETURN NUMBER
  AS LANGUAGE C
  NAME "age"
  LIBRARY agelib
  WITH CONTEXT
  PARAMETERS (
    CONTEXT,
    SELF,
    SELF INDICATOR STRUCT,
    SELF TDO,
    RETURN INDICATOR
  );
END;
/
</pre><p>(Typically, the member function is implemented in PL/SQL, but in this example it is an external procedure.)</p>
                                 <p>The <code class="codeph">calcAge_func</code> member function takes no arguments and returns a number. A member function is always called on an instance of the associated object type. The object instance itself always is an implicit argument of the member function. To refer to the implicit argument, the <code class="codeph">SELF</code> keyword is used. This is incorporated into the external procedure syntax by supporting references to <code class="codeph">SELF</code> in the parameters clause.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create and populate the matching table.</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE Person_tab OF Person1_typ;

INSERT INTO Person_tab
VALUES ('BOB', TO_DATE('14-MAY-85'));

INSERT INTO Person_tab
VALUES ('JOHN', TO_DATE('22-DEC-71'));
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Retrieve the information of interest from the table.</span><div><pre class="oac_no_warn" dir="ltr">SELECT p.name, p.b_date, p.calcAge_func() FROM Person_tab p; 

NAME                           B_DATE    P.CALCAGE_ 
------------------------------ --------- ---------- 
BOB                            14-MAY-85          0 
JOHN                           22-DEC-71          0
 </pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>This is sample C code that implements the <code class="codeph">external</code> member function and the Object-Type-Translator (OTT)-generated <code class="codeph">struct</code> definitions:
                           </p><pre class="oac_no_warn" dir="ltr">#include &lt;oci.h&gt;

struct PERSON 
{ 
    OCIString   *NAME; 
    OCIDate      B_DATE; 
}; 
typedef struct PERSON PERSON; 
 
struct PERSON_ind 
{ 
    OCIInd    _atomic; 
    OCIInd    NAME; 
    OCIInd    B_DATE; 
}; 
typedef struct PERSON_ind PERSON_ind; 
 
OCINumber *age (ctx, person_obj, person_obj_ind, tdo, ret_ind) 
OCIExtProcContext *ctx; 
PERSON         *person_obj; 
PERSON_ind     *person_obj_ind; 
OCIType        *tdo; 
OCIInd         *ret_ind; 
{ 
    sword      err; 
    text       errbuf[512]; 
    OCIEnv    *envh; 
    OCISvcCtx *svch; 
    OCIError  *errh; 
    OCINumber *age; 
    int        inum = 0;
    sword      status;
  
<span class="italic">    /* get OCI Environment */</span>
    err = OCIExtProcGetEnv( ctx, &amp;envh, &amp;svch, &amp;errh ); 

<span class="italic">    /* initialize return age to 0 */</span>
    age = (OCINumber *)OCIExtProcAllocCallMemory(ctx, sizeof(OCINumber));
    status = OCINumberFromInt(errh, &amp;inum, sizeof(inum), OCI_NUMBER_SIGNED,
                              age);
    if (status != OCI_SUCCESS)
    {
      OCIExtProcRaiseExcp(ctx, (int)1476);
      return (age);
    }

<span class="italic">    /* return NULL if the person object is null or the birthdate is null */</span>
    if ( person_obj_ind-&gt;_atomic == OCI_IND_NULL || 
         person_obj_ind-&gt;B_DATE  == OCI_IND_NULL ) 
    { 
        *ret_ind = OCI_IND_NULL;
        return (age); 
    } 

<span class="italic">    /* The actual implementation to calculate the age is left to the reader,</span>
<span class="italic">       but an easy way of doing this is a callback of the form:</span>
<span class="italic">            select trunc(months_between(sysdate, person_obj-&gt;b_date) / 12) </span>
<span class="italic">            from DUAL;   </span>
<span class="italic">    */ </span>
    *ret_ind = OCI_IND_NOTNULL;
    return (age);
} </pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS738"></a><div class="props_rev_3"><a id="GUID-D7472464-DCB9-4305-A5BE-2D4A9C963D15" name="GUID-D7472464-DCB9-4305-A5BE-2D4A9C963D15"></a><h5 id="ADFNS-GUID-D7472464-DCB9-4305-A5BE-2D4A9C963D15" class="sect5">BY REFERENCE</h5>
                     <div>
                        <div class="section">
                           <p>In C, you can pass <code class="codeph">IN</code> scalar parameters by value (the value of the parameter is passed) or by reference (a pointer to the value is passed). When an external procedure expects a pointer to a scalar, specify <code class="codeph">BY</code> <code class="codeph">REFERENCE</code> phrase to pass the parameter by reference:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE findRoot_proc (
   x IN DOUBLE PRECISION)
AS LANGUAGE C
   LIBRARY c_utils
   NAME "C_findRoot"
   PARAMETERS (
      x BY REFERENCE);
</pre><p>In this case, the C prototype is:</p><pre class="oac_no_warn" dir="ltr">void C_findRoot(double *x);
</pre><p>The default (used when there is no <code class="codeph">PARAMETERS</code> clause) is:
                           </p><pre class="oac_no_warn" dir="ltr">void C_findRoot(double x);</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS739"></a><div class="props_rev_3"><a id="GUID-22EB523E-2E94-4674-A560-8D0DB46A060A" name="GUID-22EB523E-2E94-4674-A560-8D0DB46A060A"></a><h5 id="ADFNS-GUID-22EB523E-2E94-4674-A560-8D0DB46A060A" class="sect5">WITH CONTEXT</h5>
                     <div>
                        <div class="section">
                           <p>By including the <code class="codeph">WITH</code> <code class="codeph">CONTEXT</code> clause, you can give an external procedure access to information about parameters, exceptions, memory allocation, and the user environment. The <code class="codeph">WITH</code> <code class="codeph">CONTEXT</code> clause specifies that a context pointer is passed to the external procedure. For example, if you write this PL/SQL function:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION getNum_func (
   x IN REAL) 
RETURN PLS_INTEGER AS LANGUAGE C
   LIBRARY c_utils
   NAME "C_getNum"
   WITH CONTEXT
   PARAMETERS (
      CONTEXT,
      x BY REFERENCE,
      RETURN INDICATOR);
</pre><p>The C prototype is:</p><pre class="oac_no_warn" dir="ltr">int C_getNum(
   OCIExtProcContext *with_context, 
   float *x, 
   short *retind);
</pre><p>The context data structure is opaque to the external procedure; but, is available to service procedures called by the external procedure.</p>
                           <p>If you also include the <code class="codeph">PARAMETERS</code> clause, then you must specify the parameter <code class="codeph">CONTEXT</code>, which shows the position of the context pointer in the parameter list. If you omit the <code class="codeph">PARAMETERS</code> clause, then the context pointer is the first parameter passed to the external procedure. 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS740"></a><div class="props_rev_3"><a id="GUID-106AB76F-0CBF-4DD9-B2B4-DE6E4A1F3C91" name="GUID-106AB76F-0CBF-4DD9-B2B4-DE6E4A1F3C91"></a><h5 id="ADFNS-GUID-106AB76F-0CBF-4DD9-B2B4-DE6E4A1F3C91" class="sect5">Interlanguage Parameter Mode Mappings</h5>
                     <div>
                        <p>PL/SQL supports the <code class="codeph">IN</code>, <code class="codeph">IN</code> <code class="codeph">OUT</code>, and <code class="codeph">OUT</code> parameter modes, and the <code class="codeph">RETURN</code> clause for procedures returning values. 
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS741"></a><a id="ADFNS1094"></a><a id="ADFNS1410"></a><div class="props_rev_3"><a id="GUID-25A8F1CE-2464-47FD-805A-2FE08996AF63" name="GUID-25A8F1CE-2464-47FD-805A-2FE08996AF63"></a><h3 id="ADFNS-GUID-25A8F1CE-2464-47FD-805A-2FE08996AF63" class="sect3">Running External Procedures with CALL Statements</h3>
               <div>
                  <div class="section">
                     <p>Now that you have published your Java class method or external C procedure, you are ready to call it.</p>
                     <p>Do not call an external procedure directly. Instead, use the <code class="codeph">CALL</code> statement to call the PL/SQL procedure that published the external procedure. 
                     </p>
                     <p>Such calls, which you code in the same manner as a call to a regular PL/SQL procedure, can appear in:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Anonymous blocks</p>
                        </li>
                        <li>
                           <p>Standalone and package procedures</p>
                        </li>
                        <li>
                           <p>Methods of an object type</p>
                        </li>
                        <li>
                           <p>Database triggers</p>
                        </li>
                        <li>
                           <p>SQL statements (calls to package functions only). </p>
                        </li>
                     </ul>
                     <p>Any PL/SQL block or procedure running on the server side, or on the client side, (for example, in a tool such as Oracle Forms) can call an external procedure. On the server side, the external procedure runs in a separate process address space, which safeguards your database. <a href="external-procedures.html#GUID-25A8F1CE-2464-47FD-805A-2FE08996AF63__I1007591">Figure 21-1</a> shows how Oracle Database and external procedures interact.
                     </p>
                     <div class="figure" id="GUID-25A8F1CE-2464-47FD-805A-2FE08996AF63__I1007591">
                        <p class="titleinfigure">Figure 21-1 Oracle Database and External Procedures</p><img src="img/adfns063.gif" width="452" alt="Description of Figure 21-1 follows" title="Description of Figure 21-1 follows" longdesc="img_text/adfns063.html"><br><a href="img_text/adfns063.html">Description of "Figure 21-1 Oracle Database and External Procedures"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-25A8F1CE-2464-47FD-805A-2FE08996AF63__GUID-130C1436-899D-4068-8DB4-4F23ACCA68CE">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="external-procedures.html#GUID-9151266B-312D-4920-AC78-7E2963DCF117">Preconditions for External Procedures</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-DC718BF7-49A2-41FC-9431-4222C9E35849">CALL Statement Syntax</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-500C7401-B6B7-4465-8C13-88720167275D">Calling Java Class Methods</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-D5F492F9-624A-481C-84B3-9B1E24EFAB0C">Calling External C Procedures</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-25A8F1CE-2464-47FD-805A-2FE08996AF63__NOTE-1342-CB041D0D">
                        <p class="notep1">See Also:</p>
                        <p><a href="external-procedures.html#GUID-DC718BF7-49A2-41FC-9431-4222C9E35849">CALL Statement Syntax</a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS1095"></a><a id="ADFNS742"></a><div class="props_rev_3"><a id="GUID-9151266B-312D-4920-AC78-7E2963DCF117" name="GUID-9151266B-312D-4920-AC78-7E2963DCF117"></a><h4 id="ADFNS-GUID-9151266B-312D-4920-AC78-7E2963DCF117" class="sect4">Preconditions for External Procedures</h4>
                  <div>
                     <p>Before calling external procedures, consider the privileges, permissions, and synonyms that exist in the execution environment.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9151266B-312D-4920-AC78-7E2963DCF117__GUID-11B5B971-E77C-4A87-966D-16D40DABE579">Topics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="external-procedures.html#GUID-885B57AC-AE81-4D3E-B2ED-5EE5DA034121">Privileges of External Procedures</a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-C571C888-052E-4086-84C9-E66D26040C30">Managing Permissions</a></p>
                           </li>
                           <li>
                              <p><a href="external-procedures.html#GUID-C473C588-E6DD-4CC4-B174-A920E28F7702">Creating Synonyms for External Procedures</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS743"></a><div class="props_rev_3"><a id="GUID-885B57AC-AE81-4D3E-B2ED-5EE5DA034121" name="GUID-885B57AC-AE81-4D3E-B2ED-5EE5DA034121"></a><h5 id="ADFNS-GUID-885B57AC-AE81-4D3E-B2ED-5EE5DA034121" class="sect5">Privileges of External Procedures</h5>
                     <div>
                        <p>When external procedures are called through <code class="codeph">CALL</code> specifications, they run with definer's privileges, rather than invoker privileges. 
                        </p>
                        <p>A program running with invoker privileges is not bound to a particular schema. It runs at the calling site and accesses database items (such as tables and views) with the caller's visibility and permissions. However, a program running with definer's privileges is bound to the schema in which it is defined. It runs at the defining site, in the definer's schema, and accesses database items with the definer's visibility and permissions.</p>
                     </div>
                  </div><a id="ADFNS744"></a><div class="props_rev_3"><a id="GUID-C571C888-052E-4086-84C9-E66D26040C30" name="GUID-C571C888-052E-4086-84C9-E66D26040C30"></a><h5 id="ADFNS-GUID-C571C888-052E-4086-84C9-E66D26040C30" class="sect5">Managing Permissions</h5>
                     <div>
                        <div class="section">
                           <p>To call an external procedure, a user must have the <code class="codeph">EXECUTE</code> privilege on its call specification. To grant this privilege, use the <code class="codeph">GRANT</code> statement. For example, this statement allows the user johndoe to call the external procedure whose call specification is <code class="codeph">plsToJ_demoExternal_proc</code>:
                           </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON plsToJ_demoExternal_proc TO johndoe;
</pre><p>Grant the <code class="codeph">EXECUTE</code> privilege on a call specification only to users who must call the procedure.
                           </p>
                           <div class="infoboxnotealso" id="GUID-C571C888-052E-4086-84C9-E66D26040C30__NOTE-1214-CB0465CB">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about <code class="codeph">GRANT</code> statement
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS745"></a><div class="props_rev_3"><a id="GUID-C473C588-E6DD-4CC4-B174-A920E28F7702" name="GUID-C473C588-E6DD-4CC4-B174-A920E28F7702"></a><h5 id="ADFNS-GUID-C473C588-E6DD-4CC4-B174-A920E28F7702" class="sect5">Creating Synonyms for External Procedures</h5>
                     <div>
                        <div class="section">
                           <p>For convenience, you or your DBA can create synonyms for external procedures using the <code class="codeph">CREATE</code> <code class="codeph">PUBLIC</code> <code class="codeph">SYNONYM</code> statement. In this example, your DBA creates a public synonym, which is accessible to all users. If <code class="codeph">PUBLIC</code> is not specified, then the synonym is private and accessible only within its schema.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE PUBLIC SYNONYM Rfac FOR johndoe.RecursiveFactorial;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADFNS746"></a><div class="props_rev_3"><a id="GUID-DC718BF7-49A2-41FC-9431-4222C9E35849" name="GUID-DC718BF7-49A2-41FC-9431-4222C9E35849"></a><h4 id="ADFNS-GUID-DC718BF7-49A2-41FC-9431-4222C9E35849" class="sect4">CALL Statement Syntax</h4>
                  <div>
                     <div class="section">
                        <p>Call the external procedure through the SQL <code class="codeph">CALL</code> statement. You can run the <code class="codeph">CALL</code> statement interactively from SQL*Plus. The syntax is:
                        </p><pre class="oac_no_warn" dir="ltr">CALL [schema.][{object_type_name | package_name}]procedure_name[@dblink_name]
   [(parameter_list)] [INTO :host_variable][INDICATOR][:indicator_variable];
</pre><p>This is equivalent to running a procedure <code class="codeph">myproc</code> using a SQL statement of the form "<code class="codeph">SELECT</code> <code class="codeph">myproc(</code>...<code class="codeph">)</code> <code class="codeph">FROM</code> <code class="codeph">DUAL</code>," except that the overhead associated with performing the <code class="codeph">SELECT</code> is not incurred.
                        </p>
                        <p>For example, here is an anonymous PL/SQL block that uses dynamic SQL to call <code class="codeph">plsToC_demoExternal_proc</code>, which you published. PL/SQL passes three parameters to the external C procedure <code class="codeph">C_demoExternal_proc</code>.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
   xx NUMBER(4);
   yy VARCHAR2(10);
   zz DATE; 
 BEGIN 
 EXECUTE IMMEDIATE
 'CALL plsToC_demoExternal_proc(:xxx, :yyy, :zzz)' USING xx,yy,zz;
 END;
</pre><p>The semantics of the <code class="codeph">CALL</code> statement are identical to the that of an equivalent <code class="codeph">BEGIN</code> <code class="codeph">END</code> block.
                        </p>
                        <div class="infoboxnote" id="GUID-DC718BF7-49A2-41FC-9431-4222C9E35849__GUID-9D2EFCF1-657C-4019-80ED-7BAE28FD4238">
                           <p class="notep1">Note:</p>
                           <p><code class="codeph">CALL</code> is the only SQL statement that cannot be put, by itself, in a PL/SQL <code class="codeph">BEGIN</code> <code class="codeph">END</code> block. It can be part of an <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement within a <code class="codeph">BEGIN</code> <code class="codeph">END</code> block.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS747"></a><div class="props_rev_3"><a id="GUID-500C7401-B6B7-4465-8C13-88720167275D" name="GUID-500C7401-B6B7-4465-8C13-88720167275D"></a><h4 id="ADFNS-GUID-500C7401-B6B7-4465-8C13-88720167275D" class="sect4">Calling Java Class Methods</h4>
                  <div>
                     <div class="section">
                        <p>To call the <code class="codeph">J_calcFactorial</code> class method published in <a href="external-procedures.html#GUID-BC6C93E6-8EE0-47F0-A713-D29AE4942B77">Publishing Java Class Methods</a>:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Declare and initialize two SQL*Plus host variables:</span><div><pre class="oac_no_warn" dir="ltr">VARIABLE x NUMBER
VARIABLE y NUMBER
EXECUTE :x := 5;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Call <code class="codeph">J_calcFactorial</code>:</span><div><pre class="oac_no_warn" dir="ltr">CALL J_calcFactorial(:x) INTO :y;
PRINT y
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Result:</p><pre class="oac_no_warn" dir="ltr">Y
------
   120</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS748"></a><div class="props_rev_3"><a id="GUID-D5F492F9-624A-481C-84B3-9B1E24EFAB0C" name="GUID-D5F492F9-624A-481C-84B3-9B1E24EFAB0C"></a><h4 id="ADFNS-GUID-D5F492F9-624A-481C-84B3-9B1E24EFAB0C" class="sect4">Calling External C Procedures</h4>
                  <div>
                     <div class="section">
                        <p>To call an external C procedure, PL/SQL must find the path of the appropriate DLL. The PL/SQL engine retrieves the path from the data dictionary, based on the library alias from the <code class="codeph">AS</code> <code class="codeph">LANGUAGE</code> clause of the procedure declaration.
                        </p>
                        <p>Next, PL/SQL alerts a Listener process which, in turn, spawns a session-specific agent. By default, this agent is named <code class="codeph">extproc</code>, although you can specify other names in the <code class="codeph">listener</code>.<code class="codeph">ora</code> file. The Listener hands over the connection to the agent, and PL/SQL passes to the agent the name of the DLL, the name of the external procedure, and any parameters. 
                        </p>
                        <p>Then, the agent loads the DLL and runs the external procedure. Also, the agent handles service calls (such as raising an exception) and callbacks to Oracle Database. Finally, the agent passes to PL/SQL any values returned by the external procedure.</p>
                        <div class="infoboxnote" id="GUID-D5F492F9-624A-481C-84B3-9B1E24EFAB0C__GUID-801AB3E9-9603-43A7-A8E0-2776A1C233C6">
                           <p class="notep1">Note:</p>
                           <p>Although some DLL caching takes place, your DLL might not remain in the cache; therefore, do not store global variables in your DLL.</p>
                        </div>
                        <p>After the external procedure completes, the agent remains active throughout your Oracle Database session; when you log off, the agent is stopped. Consequently, you incur the cost of launching the agent only once, no matter how many calls you make. Still, call an external procedure only when the computational benefits outweigh the cost.</p>
                        <p>Here, you call PL/SQL function <code class="codeph">plsCallsCdivisor_func</code>, which you published in <a href="external-procedures.html#GUID-CD08EFEE-66AB-47B3-9628-87895C826C22">Publishing External C Procedures</a>, from an anonymous block. PL/SQL passes the two integer parameters to external function <code class="codeph">Cdivisor_func</code>, which returns their greatest common divisor. 
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
   g    PLS_INTEGER;
   a    PLS_INTEGER;
   b    PLS_INTEGER;
CALL plsCallsCdivisor_func(a, b); 
IF g IN (2,4,8) THEN ... </pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS1411"></a><div class="props_rev_3"><a id="GUID-7B5ADF42-E345-4D87-8736-78ED62B78A21" name="GUID-7B5ADF42-E345-4D87-8736-78ED62B78A21"></a><h3 id="ADFNS-GUID-7B5ADF42-E345-4D87-8736-78ED62B78A21" class="sect3">Handling Errors and Exceptions in Multilanguage Programs</h3>
               <div>
                  <div class="section">
                     <p>The PL/SQL compiler raises compile-time exceptions if an <code class="codeph">AS</code> <code class="codeph">EXTERNAL</code> call specification is found in a <code class="codeph">TYPE</code> or <code class="codeph">PACKAGE</code> specification.
                     </p>
                     <p>C programs can raise exceptions through the <code class="codeph">OCIExtproc</code> functions.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS1412"></a><div class="props_rev_3"><a id="GUID-F85C0E81-FBE9-4396-A5B1-6E379B44253D" name="GUID-F85C0E81-FBE9-4396-A5B1-6E379B44253D"></a><h3 id="ADFNS-GUID-F85C0E81-FBE9-4396-A5B1-6E379B44253D" class="sect3">Using Service Routines with External C Procedures</h3>
               <div>
                  <div class="section">
                     <p>When called from an external procedure, a <span class="bold">service routine</span> can raise exceptions, allocate memory, and call OCI handles for callbacks to the server. To use a service routine, you must specify the <code class="codeph">WITH</code> <code class="codeph">CONTEXT</code> clause, which lets you pass a context structure to the external procedure. The context structure is declared in header file <code class="codeph">ociextp</code>.<code class="codeph">h</code> as follows:
                     </p><pre class="oac_no_warn" dir="ltr">typedef struct OCIExtProcContext OCIExtProcContext;</pre><div class="infoboxnote" id="GUID-F85C0E81-FBE9-4396-A5B1-6E379B44253D__GUID-93D083FA-2228-4F6A-A709-D72F0EBA74E1">
                        <p class="notep1">Note:</p>
                        <p><code class="codeph">ociextp.h</code> is located in <code class="codeph">$ORACLE_HOME/plsql/public</code> on Linux and UNIX.
                        </p>
                     </div>
                     <p>Service procedures:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="external-procedures.html#GUID-A6A621A2-D82F-49E9-929D-2E93D9C04429">OCIExtProcAllocCallMemory</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-D86CFB89-2DF8-44B3-B4E5-248D516C8003">OCIExtProcRaiseExcp</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-20BF4EB1-5529-401B-A330-CF847DC36017">OCIExtProcRaiseExcpWithMsg</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS749"></a><div class="props_rev_3"><a id="GUID-A6A621A2-D82F-49E9-929D-2E93D9C04429" name="GUID-A6A621A2-D82F-49E9-929D-2E93D9C04429"></a><h4 id="ADFNS-GUID-A6A621A2-D82F-49E9-929D-2E93D9C04429" class="sect4">OCIExtProcAllocCallMemory</h4>
                  <div>
                     <p>The <code class="codeph">OCIExtProcAllocCallMemory</code> service routine allocates <span class="italic">n</span> bytes of memory for the duration of the external procedure call. Any memory allocated by the function is freed automatically as soon as control returns to PL/SQL.
                     </p>
                     <div class="infoboxnote" id="GUID-A6A621A2-D82F-49E9-929D-2E93D9C04429__GUID-957F894C-AABE-480E-8869-8962BB2F0D01">
                        <p class="notep1">Note:</p>
                        <p>Do not have the external procedure call the C function <code class="codeph">free</code> to free memory allocated by this service routine, as this is handled automatically.
                        </p>
                     </div>
                     <p>The C prototype for this function is as follows:</p><pre class="oac_no_warn" dir="ltr">dvoid *OCIExtProcAllocCallMemory(
   OCIExtProcContext *with_context, 
   size_t amount);
</pre><p>The parameters <code class="codeph">with_context</code> and <code class="codeph">amount</code> are the context pointer and number of bytes to allocate, respectively. The function returns an untyped pointer to the allocated memory. A return value of zero indicates failure. 
                     </p>
                     <p>In SQL*Plus, suppose you publish external function <code class="codeph">plsToC_concat_func</code>, as follows:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION plsToC_concat_func ( 
   str1 IN VARCHAR2,  
   str2 IN VARCHAR2)  
RETURN VARCHAR2 AS LANGUAGE C 
NAME "concat" 
LIBRARY stringlib 
WITH CONTEXT 
PARAMETERS ( 
CONTEXT,  
str1   STRING,  
str1   INDICATOR short,  
str2   STRING,  
str2   INDICATOR short,  
RETURN INDICATOR short,  
RETURN LENGTH short,  
RETURN STRING); 
</pre><p>When called, <code class="codeph">C_concat</code> concatenates two strings, then returns the result:
                     </p><pre class="oac_no_warn" dir="ltr">select plsToC_concat_func('hello ', 'world') from DUAL; 
PLSTOC_CONCAT_FUNC('HELLO','WORLD') 
-----------------------------------------------------------------------------
hello world
</pre><p>If either string is <code class="codeph">NULL</code>, the result is also <code class="codeph">NULL</code>. As this example shows, <code class="codeph">C_concat</code> uses <code class="codeph">OCIExtProcAllocCallMemory</code> to allocate memory for the result string:
                     </p><pre class="oac_no_warn" dir="ltr">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;oci.h&gt;
#include &lt;ociextp.h&gt;

char *concat(ctx, str1, str1_i, str2, str2_i, ret_i, ret_l) 
OCIExtProcContext *ctx; 
char   *str1; 
short  str1_i; 
char   *str2; 
short  str2_i; 
short  *ret_i; 
short  *ret_l; 
{ 
  char *tmp; 
  short len; 
<span class="italic">  /* Check for null inputs. */ </span>
  if ((str1_i == OCI_IND_NULL) || (str2_i == OCI_IND_NULL)) 
  { 
      *ret_i = (short)OCI_IND_NULL; 
<span class="italic">      /* PL/SQL has no notion of a NULL ptr, so return a zero-byte string. */  </span>
      tmp = OCIExtProcAllocCallMemory(ctx, 1);  
      tmp[0] = '\0';  
      return(tmp);  
  } 
<span class="italic">  /* Allocate memory for result string, including NULL terminator. */ </span>
  len = strlen(str1) + strlen(str2); 
  tmp = OCIExtProcAllocCallMemory(ctx, len + 1); 
 
  strcpy(tmp, str1); 
  strcat(tmp, str2); 
 
<span class="italic">  /* Set NULL indicator and length. */ </span>
  *ret_i = (short)OCI_IND_NOTNULL; 
  *ret_l = len; 
  /* Return pointer, which PL/SQL frees later. */ 
  return(tmp); 
} 

#ifdef LATER
static void checkerr (/*_ OCIError *errhp, sword status _*/);

void checkerr(errhp, status)
OCIError *errhp;
sword status;
{
  text errbuf[512];
  sb4 errcode = 0;

  switch (status)
  {
  case OCI_SUCCESS:
    break;
  case OCI_SUCCESS_WITH_INFO:
    (void) printf("Error - OCI_SUCCESS_WITH_INFO\n");
    break;
  case OCI_NEED_DATA:
    (void) printf("Error - OCI_NEED_DATA\n");
    break;
  case OCI_NO_DATA:
    (void) printf("Error - OCI_NODATA\n");
    break;
  case OCI_ERROR:
    (void) OCIErrorGet((dvoid *)errhp, (ub4) 1, (text *) NULL, &amp;errcode,
                        errbuf, (ub4) sizeof(errbuf), OCI_HTYPE_ERROR);
    (void) printf("Error - %.*s\n", 512, errbuf);
    break;
  case OCI_INVALID_HANDLE:
    (void) printf("Error - OCI_INVALID_HANDLE\n");
    break;
  case OCI_STILL_EXECUTING:
    (void) printf("Error - OCI_STILL_EXECUTE\n");
    break;
  case OCI_CONTINUE:
    (void) printf("Error - OCI_CONTINUE\n");
    break;
  default:
    break;
  }
}

char *concat(ctx, str1, str1_i, str2, str2_i, ret_i, ret_l)
OCIExtProcContext *ctx;
char   *str1;
short  str1_i;
char   *str2;
short  str2_i;
short  *ret_i;
short  *ret_l;
{
  char *tmp;
  short len;
<span class="italic">  /* Check for null inputs. */</span>
  if ((str1_i == OCI_IND_NULL) || (str2_i == OCI_IND_NULL))
  {
      *ret_i = (short)OCI_IND_NULL;
      /* PL/SQL has no notion of a NULL ptr, so return a zero-byte string. */ 
      tmp = OCIExtProcAllocCallMemory(ctx, 1); 
      tmp[0] = '\0'; 
      return(tmp); 
  }
<span class="italic">  /* Allocate memory for result string, including NULL terminator. */</span>
  len = strlen(str1) + strlen(str2);
  tmp = OCIExtProcAllocCallMemory(ctx, len + 1);

  strcpy(tmp, str1);
  strcat(tmp, str2);

<span class="italic">  /* Set NULL indicator and length. */</span>
  *ret_i = (short)OCI_IND_NOTNULL;
  *ret_l = len;
<span class="italic">  /* Return pointer, which PL/SQL frees later. */</span>
  return(tmp);
}

/*======================================================================*/
int main(char *argv, int argc)
{
  OCIExtProcContext *ctx;
  char           *str1;
  short          str1_i;
  char           *str2;
  short          str2_i;
  short          *ret_i;
  short          *ret_l;
<span class="italic">  /* OCI Handles */</span>
  OCIEnv        *envhp;
  OCIServer     *srvhp;
  OCISvcCtx     *svchp;
  OCIError      *errhp;
  OCISession    *authp;
  OCIStmt       *stmthp;
  OCILobLocator *clob, *blob;
  OCILobLocator *Lob_loc;

<span class="italic">  /* Initialize and Logon */</span>
  (void) OCIInitialize((ub4) OCI_DEFAULT, (dvoid *)0,
                       (dvoid * (*)(dvoid *, size_t)) 0,
                       (dvoid * (*)(dvoid *, dvoid *, size_t))0,
                       (void (*)(dvoid *, dvoid *)) 0 );

  (void) OCIEnvInit( (OCIEnv **) &amp;envhp, 
                    OCI_DEFAULT, (size_t) 0, 
                    (dvoid **) 0 );

  (void) OCIHandleAlloc( (dvoid *) envhp, (dvoid **) &amp;errhp, OCI_HTYPE_ERROR, 
                   (size_t) 0, (dvoid **) 0);

<span class="italic">  /* Server contexts */</span>
  (void) OCIHandleAlloc( (dvoid *) envhp, (dvoid **) &amp;srvhp, OCI_HTYPE_SERVER,
                   (size_t) 0, (dvoid **) 0);

<span class="italic">  /* Service context */</span>
  (void) OCIHandleAlloc( (dvoid *) envhp, (dvoid **) &amp;svchp, OCI_HTYPE_SVCCTX,
                   (size_t) 0, (dvoid **) 0);

<span class="italic">  /* Attach to Oracle Database */</span>
  (void) OCIServerAttach( srvhp, errhp, (text *)"", strlen(""), 0);

<span class="italic">  /* Set attribute server context in the service context */</span>
  (void) OCIAttrSet ((dvoid *) svchp, OCI_HTYPE_SVCCTX, 
                     (dvoid *)srvhp, (ub4) 0,
                    OCI_ATTR_SERVER, (OCIError *) errhp);

  (void) OCIHandleAlloc((dvoid *) envhp, 
                        (dvoid **)&amp;authp, (ub4) OCI_HTYPE_SESSION,
                        (size_t) 0, (dvoid **) 0);
 
  (void) OCIAttrSet((dvoid *) authp, (ub4) OCI_HTYPE_SESSION,
                 (dvoid *) "samp", (ub4)4,
                 (ub4) OCI_ATTR_USERNAME, errhp);
 
  (void) OCIAttrSet((dvoid *) authp, (ub4) OCI_HTYPE_SESSION,
                 (dvoid *) "<span class="italic">password</span>", (ub4) 4,
                 (ub4) OCI_ATTR_PASSWORD, errhp);

<span class="italic">  /* Begin a User Session */</span>
  checkerr(errhp, OCISessionBegin ( svchp,  errhp, authp, OCI_CRED_RDBMS, 
                          (ub4) OCI_DEFAULT));

  (void) OCIAttrSet((dvoid *) svchp, (ub4) OCI_HTYPE_SVCCTX,
                   (dvoid *) authp, (ub4) 0,
                   (ub4) OCI_ATTR_SESSION, errhp);

<span class="italic">  /* -----------------------User Logged In------------------------------*/</span>
  printf ("user logged in \n");

  /* allocate a statement handle */
  checkerr(errhp, OCIHandleAlloc( (dvoid *) envhp, (dvoid **) &amp;stmthp,
           OCI_HTYPE_STMT, (size_t) 0, (dvoid **) 0));

  checkerr(errhp, OCIDescriptorAlloc((dvoid *)envhp, (dvoid **) &amp;Lob_loc, 
                                     (ub4) OCI_DTYPE_LOB, 
                                     (size_t) 0, (dvoid **) 0)); 

<span class="italic">  /* ------- subprogram called  here-----------------------*/ </span>
  printf ("calling concat...\n");
  concat(ctx, str1, str1_i, str2, str2_i, ret_i, ret_l);

  return 0;
}

#endif</pre></div>
               </div><a id="ADFNS750"></a><div class="props_rev_3"><a id="GUID-D86CFB89-2DF8-44B3-B4E5-248D516C8003" name="GUID-D86CFB89-2DF8-44B3-B4E5-248D516C8003"></a><h4 id="ADFNS-GUID-D86CFB89-2DF8-44B3-B4E5-248D516C8003" class="sect4">OCIExtProcRaiseExcp</h4>
                  <div>
                     <p>The <code class="codeph">OCIExtProcRaiseExcp</code> service routine raises a predefined exception, which must have a valid Oracle Database error number in the range 1..32,767. After doing any necessary cleanup, your external procedure must return immediately. (No values are assigned to <code class="codeph">OUT</code> or <code class="codeph">IN</code> <code class="codeph">OUT</code> parameters.) The C prototype for this function follows:
                     </p><pre class="oac_no_warn" dir="ltr">int OCIExtProcRaiseExcp(
   OCIExtProcContext *with_context, 
   size_t errnum);
</pre><p>The parameters <code class="codeph">with_context</code> and <code class="codeph">error_number</code> are the context pointer and Oracle Database error number. The return values <code class="codeph">OCIEXTPROC_SUCCESS</code> and <code class="codeph">OCIEXTPROC_ERROR</code> indicate success or failure. 
                     </p>
                     <p>In SQL*Plus, suppose you publish external procedure <code class="codeph">plsTo_divide_proc</code>, as follows:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE plsTo_divide_proc (
   dividend IN PLS_INTEGER, 
   divisor  IN PLS_INTEGER, 
   result   OUT FLOAT) 
AS LANGUAGE C
   NAME "C_divide"
   LIBRARY MathLib
   WITH CONTEXT
   PARAMETERS (
      CONTEXT, 
      dividend INT, 
      divisor  INT, 
      result   FLOAT);
</pre><p>When called, <code class="codeph">C_divide</code> finds the quotient of two numbers. As this example shows, if the divisor is zero, <code class="codeph">C_divide</code> uses <code class="codeph">OCIExtProcRaiseExcp</code> to raise the predefined exception <code class="codeph">ZERO_DIVIDE</code>:
                     </p><pre class="oac_no_warn" dir="ltr">void C_divide (ctx, dividend, divisor, result)
OCIExtProcContext *ctx;
int    dividend;
int    divisor;
float  *result;
{
  /* Check for zero divisor. */
  if (divisor == (int)0) 
  {
    /* Raise exception ZERO_DIVIDE, which is Oracle Database error 1476. */
    if (OCIExtProcRaiseExcp(ctx, (int)1476) == OCIEXTPROC_SUCCESS)
    {
      return;
    }
    else
    {
      /* Incorrect parameters were passed. */
      assert(0);
    }
  }
  *result = (float)dividend / (float)divisor;
}</pre></div>
               </div><a id="ADFNS751"></a><div class="props_rev_3"><a id="GUID-20BF4EB1-5529-401B-A330-CF847DC36017" name="GUID-20BF4EB1-5529-401B-A330-CF847DC36017"></a><h4 id="ADFNS-GUID-20BF4EB1-5529-401B-A330-CF847DC36017" class="sect4">OCIExtProcRaiseExcpWithMsg</h4>
                  <div>
                     <p>The <code class="codeph">OCIExtProcRaiseExcpWithMsg</code> service routine raises a user-defined exception and returns a user-defined error message. The C prototype for this function follows:
                     </p><pre class="oac_no_warn" dir="ltr">int OCIExtProcRaiseExcpWithMsg(
   OCIExtProcContext *with_context, 
   size_t  error_number,
   text   *error_message, 
   size_t  len);
</pre><p>The parameters <code class="codeph">with_context</code>, <code class="codeph">error_number</code>, and <code class="codeph">error_message</code> are the context pointer, Oracle Database error number, and error message text. The parameter <code class="codeph">len</code> stores the length of the error message. If the message is a null-terminated string, then <code class="codeph">len</code> is zero. The return values <code class="codeph">OCIEXTPROC_SUCCESS</code> and <code class="codeph">OCIEXTPROC_ERROR</code> indicate success or failure. 
                     </p>
                     <p>In the previous example, you published external procedure <code class="codeph">plsTo_divide_proc</code>. In this example, you use a different implementation. With this version, if the divisor is zero, then <code class="codeph">C_divide</code> uses <code class="codeph">OCIExtProcRaiseExcpWithMsg</code> to raise a user-defined exception:
                     </p><pre class="oac_no_warn" dir="ltr">void C_divide (ctx, dividend, divisor, result)
OCIExtProcContext *ctx;
int    dividend;
int    divisor;
float  *result;
  /* Check for zero divisor. */
  if (divisor == (int)0) 
  {
<span class="italic">    /* Raise a user-defined exception, which is Oracle Database error 20100,</span>
<span class="italic">       and return a null-terminated error message. */</span>
    if (OCIExtProcRaiseExcpWithMsg(ctx, (int)20100, 
          "divisor is zero", 0) == OCIEXTPROC_SUCCESS)
    {
      return;
    }
    else
    {
      /*  Incorrect parameters were passed. */
      assert(0);
    }
  }
  *result = dividend / divisor;

}</pre></div>
               </div>
            </div><a id="ADFNS1096"></a><a id="ADFNS1413"></a><div class="props_rev_3"><a id="GUID-2F73AD9E-924D-4955-891E-BCFCB0439F59" name="GUID-2F73AD9E-924D-4955-891E-BCFCB0439F59"></a><h3 id="ADFNS-GUID-2F73AD9E-924D-4955-891E-BCFCB0439F59" class="sect3">Doing Callbacks with External C Procedures</h3>
               <div>
                  <div class="section">
                     <p>To enable callbacks, use the function OCIExtProcGetEnv.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2F73AD9E-924D-4955-891E-BCFCB0439F59__GUID-38667157-422D-4DFA-8F8F-64BC6FE38901">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="external-procedures.html#GUID-596B4098-93D2-48BE-A257-630AF36FAA3F">OCIExtProcGetEnv</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-770F32C0-931D-4F20-8819-7B28CD2A92C5">Object Support for OCI Callbacks</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-7E6E02AA-9D21-4196-8045-0DC038EB66AD">Restrictions on Callbacks</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-415FB609-F482-4B99-8F06-E3477BDDA910">Debugging External C Procedures</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-F9F9F129-5C83-4AE1-ABCA-550D6425FB0D">Example: Calling an External C Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-AD5DF1F7-096E-49FD-A8C9-2BF7184F89D5">Global Variables in External C Procedures</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-2827F334-5989-4DDB-BDC0-2DD37A91212D">Static Variables in External C Procedures</a></p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-7416A1E4-5EAC-4AB0-B4B0-803B24ABB959">Restrictions on External C Procedures</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS752"></a><div class="props_rev_3"><a id="GUID-596B4098-93D2-48BE-A257-630AF36FAA3F" name="GUID-596B4098-93D2-48BE-A257-630AF36FAA3F"></a><h4 id="ADFNS-GUID-596B4098-93D2-48BE-A257-630AF36FAA3F" class="sect4">OCIExtProcGetEnv</h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">OCIExtProcGetEnv</code> service routine enables OCI callbacks to the database during an external procedure call. The environment handles obtained by using this function reuse the existing connection to go back to the database. If you must establish a new connection to the database, you cannot use these handles; instead, you must create your own.
                        </p>
                        <p>The C prototype for this function follows:</p><pre class="oac_no_warn" dir="ltr">sword OCIExtProcGetEnv ( OCIExtProcContext *with_context,
   OCIEnv envh,
   OCISvcCtx svch,
   OCIError errh )
</pre><p>The parameter <code class="codeph">with_context</code> is the context pointer, and the parameters <code class="codeph">envh</code>, <code class="codeph">svch</code>, and <code class="codeph">errh</code> are the OCI environment, service, and error handles, respectively. The return values <code class="codeph">OCIEXTPROC_SUCCESS</code> and <code class="codeph">OCIEXTPROC_ERROR</code> indicate success or failure.
                        </p>
                        <p>Both external C procedures and Java class methods can call-back to the database to do SQL operations. For a working example, see <a href="external-procedures.html#GUID-F9F9F129-5C83-4AE1-ABCA-550D6425FB0D">Example: Calling an External C Procedure</a>.
                        </p>
                        <div class="infoboxnote" id="GUID-596B4098-93D2-48BE-A257-630AF36FAA3F__GUID-104AE6D8-D8A7-4875-933D-77D601DB3F5A">
                           <p class="notep1">Note:</p>
                           <p>Callbacks are not necessarily a same-session phenomenon; you might run an SQL statement in a different session through <code class="codeph">OCIlogon</code>.
                           </p>
                        </div>
                        <p>An external C procedure running on Oracle Database can call a service routine to obtain OCI environment and service handles. With the OCI, you can use callbacks to run SQL statements and PL/SQL subprograms, fetch data, and manipulate LOBs. Callbacks and external procedures operate in the same user session and transaction context, and so have the same user privileges. </p>
                        <p>In SQL*Plus, suppose you run this script:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab (empno NUMBER(10))

CREATE PROCEDURE plsToC_insertIntoEmpTab_proc (
   empno PLS_INTEGER)
AS LANGUAGE C
   NAME "C_insertEmpTab"
   LIBRARY insert_lib
   WITH CONTEXT
   PARAMETERS (
      CONTEXT, 
      empno LONG);
</pre><p>Later, you might call service routine <code class="codeph">OCIExtProcGetEnv</code> from external procedure <code class="codeph">plsToC_insertIntoEmpTab_proc</code>, as follows:
                        </p><pre class="oac_no_warn" dir="ltr">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;oratypes.h&gt;
#include &lt;oci.h&gt;   /* includes ociextp.h */
...
void C_insertIntoEmpTab (ctx, empno) 
OCIExtProcContext *ctx; 
long empno; 
{ 
  OCIEnv    *envhp; 
  OCISvcCtx *svchp; 
  OCIError  *errhp; 
  int        err; 
  ... 
  err = OCIExtProcGetEnv(ctx, &amp;envhp, &amp;svchp, &amp;errhp); 
  ... 
}
</pre><p>If you do not use callbacks, you need not include <code class="codeph">oci</code>.<code class="codeph">h</code>; instead, include <code class="codeph">ociextp</code>.<code class="codeph">h</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS753"></a><div class="props_rev_3"><a id="GUID-770F32C0-931D-4F20-8819-7B28CD2A92C5" name="GUID-770F32C0-931D-4F20-8819-7B28CD2A92C5"></a><h4 id="ADFNS-GUID-770F32C0-931D-4F20-8819-7B28CD2A92C5" class="sect4">Object Support for OCI Callbacks</h4>
                  <div>
                     <p>To run object-related callbacks from your external procedures, the OCI environment in the <code class="codeph">extproc</code> agent is fully initialized in object mode. You retrieve handles to this environment with the <code class="codeph">OCIExtProcGetEnv</code> procedure.
                     </p>
                     <p>The object runtime environment lets you use static and dynamic object support provided by OCI. To use static support, use the OTT to generate C structs for the appropriate object types, and then use conventional C code to access the object attributes.</p>
                     <p>For those objects whose types are unknown at external procedure creation time, an alternative, dynamic, way of accessing objects is first to call <code class="codeph">OCIDescribeAny</code> to obtain attribute and method information about the type. Then, <code class="codeph">OCIObjectGetAttr</code> and <code class="codeph">OCIObjectSetAttr</code> can be called to retrieve and set attribute values.
                     </p>
                     <p>Because the current external procedure model is stateless, <code class="codeph">OCIExtProcGetEnv</code> must be called in every external procedure that wants to run callbacks, or call <code class="codeph">OCIExtProc</code>. service routines. After every external procedure call, the callback mechanism is cleaned up and all OCI handles are freed.
                     </p>
                  </div>
               </div><a id="ADFNS754"></a><div class="props_rev_3"><a id="GUID-7E6E02AA-9D21-4196-8045-0DC038EB66AD" name="GUID-7E6E02AA-9D21-4196-8045-0DC038EB66AD"></a><h4 id="ADFNS-GUID-7E6E02AA-9D21-4196-8045-0DC038EB66AD" class="sect4">Restrictions on Callbacks</h4>
                  <div>
                     <p>With callbacks, this SQL statements and OCI subprograms are not supported:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Transaction control statements such as <code class="codeph">COMMIT</code></p>
                        </li>
                        <li>
                           <p>Data definition statements such as <code class="codeph">CREATE</code></p>
                        </li>
                        <li>
                           <p>These object-oriented OCI subprograms:</p><pre class="oac_no_warn" dir="ltr">OCIObjectNew 
OCIObjectPin 
OCIObjectUnpin 
OCIObjectPinCountReset 
OCIObjectLock 
OCIObjectMarkUpdate 
OCIObjectUnmark 
OCIObjectUnmarkByRef 
OCIObjectAlwaysLatest 
OCIObjectNotAlwaysLatest 
OCIObjectMarkDeleteByRef 
OCIObjectMarkDelete 
OCIObjectFlush 
OCIObjectFlushRefresh 
OCIObjectGetTypeRef 
OCIObjectGetObjectRef 
OCIObjectExists 
OCIObjectIsLocked 
OCIObjectIsDirtied 
OCIObjectIsLoaded 
OCIObjectRefresh 
OCIObjectPinTable 
OCIObjectArrayPin 
OCICacheFlush, 
OCICacheFlushRefresh, 
OCICacheRefresh 
OCICacheUnpin 
OCICacheFree 
OCICacheUnmark 
OCICacheGetObjects 
OCICacheRegister </pre></li>
                     </ul>
                     <ul class="simple" style="list-style-type: none;padding-left:0;">
                        <li></li>
                     </ul>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Polling-mode OCI subprograms such as <code class="codeph">OCIGetPieceInfo</code> 
                           </p>
                        </li>
                        <li>
                           <p>These OCI subprograms:</p><pre class="oac_no_warn" dir="ltr">OCIEnvInit
OCIInitialize
OCIPasswordChange
OCIServerAttach
OCIServerDetach
OCISessionBegin
OCISessionEnd
OCISvcCtxToLda
OCITransCommit
OCITransDetach
OCITransRollback
OCITransStart</pre></li>
                     </ul><pre class="oac_no_warn" dir="ltr"></pre><p>Also, with OCI subprogram <code class="codeph">OCIHandleAlloc</code>, these handle types are not supported:
                     </p><pre class="oac_no_warn" dir="ltr"><code class="codeph">OCI_HTYPE_SERVER</code> 
<code class="codeph">OCI_HTYPE_SESSION</code> 
<code class="codeph">OCI_HTYPE_SVCCTX</code> 
<code class="codeph">OCI_HTYPE_TRANS</code></pre></div>
               </div><a id="ADFNS755"></a><div class="props_rev_3"><a id="GUID-415FB609-F482-4B99-8F06-E3477BDDA910" name="GUID-415FB609-F482-4B99-8F06-E3477BDDA910"></a><h4 id="ADFNS-GUID-415FB609-F482-4B99-8F06-E3477BDDA910" class="sect4">Debugging External C Procedures</h4>
                  <div>
                     <div class="section">
                        <p>Usually, when an external procedure fails, its prototype is faulty. In other words, the prototype does not match the one generated internally by PL/SQL. This can happen if you specify an incompatible C data type. For example, to pass an <code class="codeph">OUT</code> parameter of type <code class="codeph">REAL</code>, you must specify <code class="codeph">float *</code>. Specifying <code class="codeph">float</code>, <code class="codeph">double</code> <code class="codeph">*</code>, or any other C data type results in a mismatch.
                        </p>
                        <p>In such cases, you might get:</p><pre class="oac_no_warn" dir="ltr">lost RPC connection to external routine agent 
</pre><p>This error, which means that <code class="codeph">extproc</code> terminated abnormally because the external procedure caused a core dump. To avoid errors when declaring C prototype parameters, see the preceding tables.
                        </p>
                        <p>To help you debug external procedures, PL/SQL provides the utility package <code class="codeph">DEBUG_EXTPROC</code>. To install the package, run the script <code class="codeph">dbgextp</code>.<code class="codeph">sql</code>, which you can find in the PL/SQL demo directory. (For the location of the directory, see your Oracle Database Installation or User's Guide.) 
                        </p>
                        <p>To use the package, follow the instructions in <code class="codeph">dbgextp</code>.<code class="codeph">sql</code>. Your Oracle Database account must have <code class="codeph">EXECUTE</code> privileges on the package and <code class="codeph">CREATE</code> <code class="codeph">LIBRARY</code> privileges.
                        </p>
                        <div class="infoboxnote" id="GUID-415FB609-F482-4B99-8F06-E3477BDDA910__GUID-B327715C-AC18-4342-9CBE-AD431D0E44D5">
                           <p class="notep1">Note:</p>
                           <p><code class="codeph">DEBUG_EXTPROC</code> works only on platforms with debuggers that can attach to a running process.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS756"></a><div class="props_rev_3"><a id="GUID-F9F9F129-5C83-4AE1-ABCA-550D6425FB0D" name="GUID-F9F9F129-5C83-4AE1-ABCA-550D6425FB0D"></a><h4 id="ADFNS-GUID-F9F9F129-5C83-4AE1-ABCA-550D6425FB0D" class="sect4">Example: Calling an External C Procedure</h4>
                  <div>
                     <div class="section">
                        <p>Also in the PL/SQL demo directory is the script <code class="codeph">extproc</code>.<code class="codeph">sql</code>, which demonstrates the calling of an external procedure. The companion file <code class="codeph">extproc</code>.<code class="codeph">c</code> contains the C source code for the external procedure. 
                        </p>
                        <p>To run the demo, follow the instructions in <code class="codeph">extproc</code>.<code class="codeph">sql</code>. You must use the <code class="codeph">SCOTT</code> account, which must have <code class="codeph">CREATE</code> <code class="codeph">LIBRARY</code> privileges.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS757"></a><div class="props_rev_3"><a id="GUID-AD5DF1F7-096E-49FD-A8C9-2BF7184F89D5" name="GUID-AD5DF1F7-096E-49FD-A8C9-2BF7184F89D5"></a><h4 id="ADFNS-GUID-AD5DF1F7-096E-49FD-A8C9-2BF7184F89D5" class="sect4">Global Variables in External C Procedures</h4>
                  <div>
                     <p>A global variable is declared outside of a function, and its value is shared by all functions of a program. Therefore, in external procedures, all functions in a DLL share the value of the global variable. Global variables are also used to store data that is intended to persist beyond the lifetime of a function. However, Oracle discourages the use of global variables for two reasons:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Threading</p>
                           <p>In the nonthreaded configuration of the agent process, one function is active at a time. For the multithreaded <code class="codeph">extproc</code> agent, multiple functions can be active at the same time, and they might try to access the global variable concurrently, with unsuccessful results.
                           </p>
                        </li>
                        <li>
                           <p>DLL caching</p>
                           <p>Suppose that function <code class="codeph">func1</code> tries to pass data to function <code class="codeph">func2</code> by storing the data in a global variable. After <code class="codeph">func1</code> completes, the DLL cache might be unloaded, causing all global variables to lose their values. Then, when <code class="codeph">func2</code> runs, the DLL is reloaded, and all global variables are initialized to 0.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS758"></a><div class="props_rev_3"><a id="GUID-2827F334-5989-4DDB-BDC0-2DD37A91212D" name="GUID-2827F334-5989-4DDB-BDC0-2DD37A91212D"></a><h4 id="ADFNS-GUID-2827F334-5989-4DDB-BDC0-2DD37A91212D" class="sect4">Static Variables in External C Procedures</h4>
                  <div>
                     <p>There are two types of static variables: external and internal. An external static variable is a special case of a global variable, so its usage is discouraged. Internal static variables are local to a particular function, but remain in existence rather than coming and going each time the function is activated. Therefore, they provide private, permanent storage within a single function. These variables are used to pass on data to subsequent calls to the same function. But, because of the DLL caching feature mentioned in <a href="external-procedures.html#GUID-AD5DF1F7-096E-49FD-A8C9-2BF7184F89D5">Global Variables in External C Procedures</a>, the DLL might be unloaded and reloaded between calls, which means that the internal static variable loses its value.
                     </p>
                     <div class="infoboxnote" id="GUID-2827F334-5989-4DDB-BDC0-2DD37A91212D__GUID-C61155CD-219D-4B4A-B169-2C82E7B22F5C">
                        <p class="notep1">:</p>
                        <p>Template <code class="codeph">makefile</code> in the RDBMS subdirectory <code class="codeph">/public</code> for help creating a dynamic link library
                        </p>
                     </div>
                     <p>When calling external procedures:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Never write to <code class="codeph">IN</code> parameters or overflow the capacity of <code class="codeph">OUT</code> parameters. (PL/SQL does no runtime checks for these error conditions.) 
                           </p>
                        </li>
                        <li>
                           <p>Never read an <code class="codeph">OUT</code> parameter or a function result. 
                           </p>
                        </li>
                        <li>
                           <p>Always assign a value to <code class="codeph">IN</code> <code class="codeph">OUT</code> and <code class="codeph">OUT</code> parameters and to function results. Otherwise, your external procedure will not return successfully. 
                           </p>
                        </li>
                        <li>
                           <p>If you include the <code class="codeph">WITH</code> <code class="codeph">CONTEXT</code> and <code class="codeph">PARAMETERS</code> clauses, then you must specify the parameter <code class="codeph">CONTEXT</code>, which shows the position of the context pointer in the parameter list.
                           </p>
                        </li>
                        <li>
                           <p>If you include the <code class="codeph">PARAMETERS</code> clause, and if the external procedure is a function, then you must specify the parameter <code class="codeph">RETURN</code> in the last position.
                           </p>
                        </li>
                        <li>
                           <p>For every formal parameter, there must be a corresponding parameter in the <code class="codeph">PARAMETERS</code> clause. Also, ensure that the data types of parameters in the <code class="codeph">PARAMETERS</code> clause are compatible with those in the C prototype, because no implicit conversions are done. 
                           </p>
                        </li>
                        <li>
                           <p>With a parameter of type <code class="codeph">RAW</code> or <code class="codeph">LONG</code> <code class="codeph">RAW</code>, you must use the property <code class="codeph">LENGTH</code>. Also, if that parameter is <code class="codeph">IN</code> <code class="codeph">OUT</code> or <code class="codeph">OUT</code> and null, then you must set the length of the corresponding C parameter to zero.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS759"></a><div class="props_rev_3"><a id="GUID-7416A1E4-5EAC-4AB0-B4B0-803B24ABB959" name="GUID-7416A1E4-5EAC-4AB0-B4B0-803B24ABB959"></a><h4 id="ADFNS-GUID-7416A1E4-5EAC-4AB0-B4B0-803B24ABB959" class="sect4">Restrictions on External C Procedures</h4>
                  <div>
                     <p>These restrictions apply to external procedures:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>This feature is available only on platforms that support DLLs.</p>
                        </li>
                        <li>
                           <p>Only C procedures and procedures callable from C code are supported.</p>
                        </li>
                        <li>
                           <p>External procedure callouts combined with distributed transactions is not supported.</p>
                        </li>
                        <li>
                           <p>You cannot pass PL/SQL cursor variables or records to an external procedure. For records, use instances of object types instead.</p>
                        </li>
                        <li>
                           <p>In the <code class="codeph">LIBRARY</code> subclause, you cannot use a database link to specify a remote library.
                           </p>
                        </li>
                        <li>
                           <p>The maximum number of parameters that you can pass to a external procedure is 128. However, if you pass float or double parameters by value, then the maximum is less than 128. How much less depends on the number of such parameters and your operating system. To get a rough estimate, count each float or double passed by value as two parameters.</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
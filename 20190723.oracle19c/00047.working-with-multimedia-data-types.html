<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Working with Unstructured Data Types</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Cartridge Developer's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Cartridge Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00">
      <meta name="dcterms.title" content="Data Cartridge Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96431-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="implementing-data-cartridges-in-C-CPP-and-java.html" title="Previous" type="text/html">
      <link rel="next" href="using-extensible-indexing.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="implementing-data-cartridges-in-C-CPP-and-java.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-extensible-indexing.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Cartridge Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="building-data-cartridges.html" property="item" typeof="WebPage"><span property="name">Building Data Cartridges</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Working with Unstructured Data Types</li>
            </ol>
            <a id="GUID-5469F1F7-BD5B-4FB4-8F13-AE4CA0915F6D" name="GUID-5469F1F7-BD5B-4FB4-8F13-AE4CA0915F6D"></a><a id="ADDCI260"></a>
            
            <h2 id="ADDCI-GUID-5469F1F7-BD5B-4FB4-8F13-AE4CA0915F6D" class="sect2"><span class="enumeration_chapter">6 </span>Working with Unstructured Data Types
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Some data types that are not native to the Oracle Database can be represented in the Oracle Database as Large Objects (LOBs). You can implement them in PL/SQL and OCI for Data Cartridges.</p>
            </div><a id="ADDCI4362"></a><div class="props_rev_3"><a id="GUID-D6949474-AD4D-41A3-8AF3-2C9A0B9291F5" name="GUID-D6949474-AD4D-41A3-8AF3-2C9A0B9291F5"></a><h3 id="ADDCI-GUID-D6949474-AD4D-41A3-8AF3-2C9A0B9291F5" class="sect3"><span class="enumeration_section">6.1 </span>Overview of Cartridges and Unstructured Data Types
               </h3>
               <div>
                  <p>Some data cartridges must handle large amounts oMultif raw binary data, such as graphic images or sound waveforms, or character data, such as text or streams of numbers. Oracle supports large objects, <code class="codeph">LOB</code>s, to handle these kinds of data.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Internal LOBs</span> <a id="d13586e125" class="indexterm-anchor"></a><a id="d13586e127" class="indexterm-anchor"></a><a id="d13586e129" class="indexterm-anchor"></a>are stored in the database tablespaces in a way that optimizes space and provides efficient access. Internal <code class="codeph">LOB</code>s participate in the transactional model of the server. 
                        </p>
                        <p><a id="d13586e136" class="indexterm-anchor"></a><a id="d13586e138" class="indexterm-anchor"></a><a id="d13586e140" class="indexterm-anchor"></a>Internal <code class="codeph">LOBs</code> can store binary data (<code class="codeph">BLOB</code>s), single-byte character data (<code class="codeph">CLOB</code>s), or fixed-width single-byte or multibyte character data (<code class="codeph">NCLOB</code>s). An <code class="codeph">NCLOB</code> consists of character data that corresponds to the national character set defined for the Oracle database. Varying width character data is not supported in Oracle. 
                        </p>
                     </li>
                     <li>
                        <p><a id="d13586e161" class="indexterm-anchor"></a><a id="d13586e165" class="indexterm-anchor"></a><span class="bold">External </span><code class="codeph">LOBs</code> are stored in operating system files outside the database tablespaces as <code class="codeph">BFILE</code>s, binary data. They cannot participate in transactions.
                        </p>
                     </li>
                  </ul>
                  <p>Both internal <code class="codeph">LOB</code>s and in <code class="codeph">BFILE</code>s provide considerable flexibility in handling large amounts of data. 
                  </p>
                  <p><a id="d13586e184" class="indexterm-anchor"></a><a id="d13586e188" class="indexterm-anchor"></a><a id="d13586e192" class="indexterm-anchor"></a>Data stored in a <code class="codeph">LOB</code> is called the <code class="codeph">LOB</code>'s <span class="bold">value</span>. To the Oracle server, a <code class="codeph">LOB</code>'s value is unstructured and cannot be queried. You must unpack and interpret a <code class="codeph">LOB</code>'s value in cartridge-specific ways.
                  </p>
                  <p><code class="codeph">LOB</code>s can be manipulated using the Oracle Call Interface, OCI, or the PL/SQL <code class="codeph">DBMS_LOB</code> package. You can write functions, including methods on object types that can contain <code class="codeph">LOB</code>s, to manipulate parts of <code class="codeph">LOB</code>s.
                  </p>
                  <div class="infoboxnotealso" id="GUID-D6949474-AD4D-41A3-8AF3-2C9A0B9291F5__GUID-6DB47E1E-DFF6-42E0-B1A7-F36A64BC4CF6">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADLOB-GUID-1A2B0023-9EE8-48AF-AA76-171D1FC5C241" target="_blank"><span class="variable" translate="no">Oracle Database SecureFiles and Large Objects Developer's Guide</span></a> for details on <code class="codeph">LOBs</code></p>
                  </div>
               </div>
            </div><a id="ADDCI4363"></a><div class="props_rev_3"><a id="GUID-93F55770-0EB5-4F90-B086-EE1D8146B774" name="GUID-93F55770-0EB5-4F90-B086-EE1D8146B774"></a><h3 id="ADDCI-GUID-93F55770-0EB5-4F90-B086-EE1D8146B774" class="sect3"><span class="enumeration_section">6.2 </span>Using DDL for LOBs
               </h3>
               <div>
                  <p><a id="d13586e289" class="indexterm-anchor"></a><a id="d13586e293" class="indexterm-anchor"></a>LOB definition can involve the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> and the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statements. <a href="working-with-multimedia-data-types.html#GUID-61143C61-B438-437F-99D1-EFC792B54D0E__BABBJIJJ">Example 6-1</a> specifies a <code class="codeph">CLOB</code> within a data type named <code class="codeph">lob_type</code>.
                  </p>
                  <p><a href="working-with-multimedia-data-types.html#GUID-87822A0C-02FF-4E86-BA84-1817A40A13B8__BABGJJFH">Example 6-2</a> creates an object table, <code class="codeph">lob_table</code>, in which each row is an instance of <code class="codeph">lob_type</code> data:
                  </p>
                  <p><a href="working-with-multimedia-data-types.html#GUID-1AB23E62-1CF2-4AC3-94FB-DDEE5E350E06__BABHBICA">Example 6-3</a> shows how to store <code class="codeph">LOBs</code> in a regular table, as opposed to an object table as in <a href="working-with-multimedia-data-types.html#GUID-87822A0C-02FF-4E86-BA84-1817A40A13B8__BABGJJFH">Example 6-2</a>.
                  </p>
                  <p>When creating LOBs in tables, you can set the LOB storage, buffering, and caching properties. </p>
                  <div class="infoboxnotealso" id="GUID-93F55770-0EB5-4F90-B086-EE1D8146B774__GUID-5AADFE6D-A97C-49E2-A63C-21D1ABF69E59">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=SQLRF-GUID-049B7AE8-11E1-4110-B3E4-D117907D77AC" target="_blank"><span class="variable" translate="no">Oracle Database SQL Language Reference</span></a> manual and the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADLOB-GUID-1A2B0023-9EE8-48AF-AA76-171D1FC5C241" target="_blank"><span class="variable" translate="no">Oracle Database SecureFiles and Large Objects Developer's Guide</span></a> for information about using LOBs in <code class="codeph">CREATE TABLE</code>, <code class="codeph">ALTER TABLE</code>, <code class="codeph">CREATE TYPE</code> and <code class="codeph">ALTER TYPE</code> statements
                     </p>
                  </div>
               </div><a id="ADDCI4364"></a><div class="props_rev_3"><a id="GUID-61143C61-B438-437F-99D1-EFC792B54D0E" name="GUID-61143C61-B438-437F-99D1-EFC792B54D0E"></a><h4 id="ADDCI-GUID-61143C61-B438-437F-99D1-EFC792B54D0E" class="sect4"><span class="enumeration_section">6.2.1 </span>Creating a LOB Attribute of a Type
                  </h4>
                  <div>
                     <div class="example" id="GUID-61143C61-B438-437F-99D1-EFC792B54D0E__BABBJIJJ">
                        <p class="titleinexample">Example 6-1 Creating a CLOB Attribute of a Type</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE lob_type AS OBJECT ( 
&nbsp;&nbsp;id  INTEGER, 
&nbsp;&nbsp;data CLOB );
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4365"></a><div class="props_rev_3"><a id="GUID-87822A0C-02FF-4E86-BA84-1817A40A13B8" name="GUID-87822A0C-02FF-4E86-BA84-1817A40A13B8"></a><h4 id="ADDCI-GUID-87822A0C-02FF-4E86-BA84-1817A40A13B8" class="sect4"><span class="enumeration_section">6.2.2 </span>Creating a LOB Object Table
                  </h4>
                  <div>
                     <div class="example" id="GUID-87822A0C-02FF-4E86-BA84-1817A40A13B8__BABGJJFH">
                        <p class="titleinexample">Example 6-2 Creating a LOB Object Table</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE lob_table OF lob_type;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4366"></a><div class="props_rev_3"><a id="GUID-1AB23E62-1CF2-4AC3-94FB-DDEE5E350E06" name="GUID-1AB23E62-1CF2-4AC3-94FB-DDEE5E350E06"></a><h4 id="ADDCI-GUID-1AB23E62-1CF2-4AC3-94FB-DDEE5E350E06" class="sect4"><span class="enumeration_section">6.2.3 </span>Creating LOB Columns
                  </h4>
                  <div>
                     <div class="example" id="GUID-1AB23E62-1CF2-4AC3-94FB-DDEE5E350E06__BABHBICA">
                        <p class="titleinexample">Example 6-3 Creating LOB Columns in a Table</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE lob_table1  (
&nbsp;&nbsp;id  INTEGER,
&nbsp;&nbsp;b_lob   BLOB,
&nbsp;&nbsp;c_lob   CLOB,
&nbsp;&nbsp;nc_lob  NCLOB,
&nbsp;&nbsp;b_file  BFILE );
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4367"></a><div class="props_rev_3"><a id="GUID-F4531245-D6C3-4CCA-9A20-2DA6D2A26C23" name="GUID-F4531245-D6C3-4CCA-9A20-2DA6D2A26C23"></a><h3 id="ADDCI-GUID-F4531245-D6C3-4CCA-9A20-2DA6D2A26C23" class="sect3"><span class="enumeration_section">6.3 </span>LOB Locators
               </h3>
               <div>
                  <p><code class="codeph">LOBs</code> can be stored with other row data or separate from row data. Regardless of the storage location, each <code class="codeph">LOB</code> has a <span class="bold">locator</span>, which can be viewed as a handle or pointer to the actual location. Selecting a <code class="codeph">LOB</code> returns the <code class="codeph">LOB</code> locator instead of the <code class="codeph">LOB</code> value. <a href="working-with-multimedia-data-types.html#GUID-0C7A5625-64C9-4136-B178-A23B59D3BB09__BABJHDFE">Example 6-4</a> selects the <code class="codeph">LOB</code> locator for <code class="codeph">b_lob</code> and places it a PL/SQL local variable named <code class="codeph">image1</code>.
                  </p>
                  <p>When you use an API function to manipulate the <code class="codeph">LOB</code> value, you refer to the <code class="codeph">LOB</code> using the locator. The PL/SQL <code class="codeph">DBMS_LOB</code> package contains useful routines to manipulate <code class="codeph">LOBs</code>, such as <code class="codeph">PUT_LINE()</code> and <code class="codeph">GETLENGTH()</code>, as in <a href="working-with-multimedia-data-types.html#GUID-D9C704E8-38DB-47FA-8FD2-782462C0A3C9__BABHDCHH">Example 6-5</a>.
                  </p>
                  <p>In the OCI, <code class="codeph">LOB</code> locators are mapped to <code class="codeph">LOBLocatorPointers</code>, such as <code class="codeph">OCILobLocator *</code>. 
                  </p>
                  <p>For a <code class="codeph">BFILE</code>, the <code class="codeph">LOB</code> column has its own distinct locator, which refers to the <code class="codeph">LOB's</code> value that is stored in an external file in the server's file system. This implies that two rows in a table with a <code class="codeph">BFILE</code> column may refer to the same file or two distinct files. A <code class="codeph">BFILE</code> locator variable in a PL/SQL or OCI program behaves like any other automatic variable. With respect to file operations, it behaves like a file descriptor available as part of the standard I/O library of most conventional programming languages.
                  </p>
                  <div class="infoboxnotealso" id="GUID-F4531245-D6C3-4CCA-9A20-2DA6D2A26C23__GUID-BD5B2FB8-DCE8-42DB-940D-826D73FC77C7">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADLOB-GUID-1A2B0023-9EE8-48AF-AA76-171D1FC5C241" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ADLOB-GUID-EC76077B-3EE9-491E-AC6D-171DA919B84C" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a> for <code class="codeph">DBMS_LOB</code> API
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4368"></a><div class="props_rev_3"><a id="GUID-0C7A5625-64C9-4136-B178-A23B59D3BB09" name="GUID-0C7A5625-64C9-4136-B178-A23B59D3BB09"></a><h4 id="ADDCI-GUID-0C7A5625-64C9-4136-B178-A23B59D3BB09" class="sect4"><span class="enumeration_section">6.3.1 </span>Selecting a LOBs and Assigning it to a Local Variable
                  </h4>
                  <div>
                     <div class="example" id="GUID-0C7A5625-64C9-4136-B178-A23B59D3BB09__BABJHDFE">
                        <p class="titleinexample">Example 6-4 Selecting a LOB Locator and Assigning it to a Local Variable</p><pre class="oac_no_warn" dir="ltr">DECLARE
       image1  BLOB;
       image_no  INTEGER := 101;
BEGIN
       SELECT b_lob  INTO image1 FROM lob_table
                  WHERE key_value = image_no;
             ...
END;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4369"></a><div class="props_rev_3"><a id="GUID-D9C704E8-38DB-47FA-8FD2-782462C0A3C9" name="GUID-D9C704E8-38DB-47FA-8FD2-782462C0A3C9"></a><h4 id="ADDCI-GUID-D9C704E8-38DB-47FA-8FD2-782462C0A3C9" class="sect4"><span class="enumeration_section">6.3.2 </span>Manipulating LOBs
                  </h4>
                  <div>
                     <div class="example" id="GUID-D9C704E8-38DB-47FA-8FD2-782462C0A3C9__BABHDCHH">
                        <p class="titleinexample">Example 6-5 Manipulating LOBs with PUT_LINE() and GETLENGTH()</p><pre class="oac_no_warn" dir="ltr">BEGIN
     DBMS_OUTPUT.PUT_LINE('Size of the Image is: ', 
                       DBMS_LOB.GETLENGTH(image1));
END;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4370"></a><div class="props_rev_3"><a id="GUID-FD83F576-F342-4097-AF0C-DE653EC52703" name="GUID-FD83F576-F342-4097-AF0C-DE653EC52703"></a><h3 id="ADDCI-GUID-FD83F576-F342-4097-AF0C-DE653EC52703" class="sect3"><span class="enumeration_section">6.4 </span>Emptying LOBs
               </h3>
               <div>
                  <p><a id="d13586e863" class="indexterm-anchor"></a><a id="d13586e865" class="indexterm-anchor"></a><a id="d13586e867" class="indexterm-anchor"></a><a id="d13586e871" class="indexterm-anchor"></a>Use the special functions <code class="codeph">EMPTY_BLOB</code> and <code class="codeph">EMPTY_CLOB</code> in <code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> statements of SQL DML to initialize a <code class="codeph">NULL</code> or non-<code class="codeph">NULL</code> internal <code class="codeph">LOB</code> to empty. These are available as special functions in Oracle SQL DML, and are not part of the <code class="codeph">DBMS_LOB</code> package.
                  </p>
                  <p>Before writing data to an internal <code class="codeph">LOB</code> using OCI or the <code class="codeph">DBMS_LOB</code> package, the <code class="codeph">LOB</code> column must be made non-null; it must contain a locator that points to an empty or populated <code class="codeph">LOB</code> value. You can initialize a <code class="codeph">BLOB</code> column's value to empty by using the function <code class="codeph">EMPTY_BLOB</code> in the <code class="codeph">VALUES</code> clause of an <code class="codeph">INSERT</code> statement. Similarly, a <code class="codeph">CLOB</code> or <code class="codeph">NCLOB</code> column's value can be initialized by using the function <code class="codeph">EMPTY_CLOB</code>. Here is the syntax of these functions:
                  </p><pre class="oac_no_warn" dir="ltr">FUNCTION EMPTY_BLOB() RETURN BLOB;
FUNCTION EMPTY_CLOB() RETURN CLOB;
</pre><p><code class="codeph">EMPTY_BLOB</code> returns an empty locator of type <code class="codeph">BLOB</code> and <code class="codeph">EMPTY_CLOB</code> returns an empty locator of type <code class="codeph">CLOB</code>, which can also be used for <code class="codeph">NCLOBs</code>. The functions don't have an associated pragma.
                  </p>
                  <p>An exception is raised if you use these functions anywhere but in the <code class="codeph">VALUES</code> clause of a SQL <code class="codeph">INSERT</code> statement or as the source of the <code class="codeph">SET</code> clause in a SQL <code class="codeph">UPDATE</code> statement. 
                  </p>
                  <p><a href="working-with-multimedia-data-types.html#GUID-14969C25-1BDD-4949-89FB-04F6C35931E4__BABHDFFG">Example 6-6</a> shows <code class="codeph">EMPTY_BLOB()</code> used with SQL DML.
                  </p>
                  <p><a href="working-with-multimedia-data-types.html#GUID-76A690D6-FA22-4A4E-BF52-2E82FB2A7678__BABICAAD">Example 6-7</a> shows how to use <code class="codeph">EMPTY_CLOB()</code> in PL/SQL programs.
                  </p>
               </div><a id="ADDCI4372"></a><div class="props_rev_3"><a id="GUID-14969C25-1BDD-4949-89FB-04F6C35931E4" name="GUID-14969C25-1BDD-4949-89FB-04F6C35931E4"></a><h4 id="ADDCI-GUID-14969C25-1BDD-4949-89FB-04F6C35931E4" class="sect4"><span class="enumeration_section">6.4.1 </span>Using EMPTY_BLOB() in SQL
                  </h4>
                  <div>
                     <div class="example" id="GUID-14969C25-1BDD-4949-89FB-04F6C35931E4__BABHDFFG">
                        <p class="titleinexample">Example 6-6 Using EMPTY_BLOB() with SQL DML</p><pre class="oac_no_warn" dir="ltr">INSERT INTO lob_table VALUES (1001, EMPTY_BLOB(), 'abcde', NULL);
UPDATE lob_table SET c_lob = EMPTY_CLOB() WHERE key_value = 1001;
INSERT INTO lob_table VALUES (1002, NULL, NULL, NULL);
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4373"></a><div class="props_rev_3"><a id="GUID-76A690D6-FA22-4A4E-BF52-2E82FB2A7678" name="GUID-76A690D6-FA22-4A4E-BF52-2E82FB2A7678"></a><h4 id="ADDCI-GUID-76A690D6-FA22-4A4E-BF52-2E82FB2A7678" class="sect4"><span class="enumeration_section">6.4.2 </span>Using EMPTY_CLOB() in PL/SQL
                  </h4>
                  <div>
                     <div class="example" id="GUID-76A690D6-FA22-4A4E-BF52-2E82FB2A7678__BABICAAD">
                        <p class="titleinexample">Example 6-7 Using EMPTY_CLOB() in PL/SQL Programs</p><pre class="oac_no_warn" dir="ltr">DECLARE 
&nbsp;&nbsp;lobb         CLOB; 
&nbsp;&nbsp;read_offset  INTEGER; 
&nbsp;&nbsp;read_amount  INTEGER; 
&nbsp;&nbsp;rawbuf       RAW(20); 
&nbsp;&nbsp;charbuf      VARCHAR2(20);
BEGIN
&nbsp;&nbsp;read_amount := 10; read_offset := 1;
&nbsp;&nbsp;UPDATE lob_table SET c_lob = EMPTY_CLOB() 
&nbsp;&nbsp;WHERE key_value = 1002 RETURNING c_lob INTO lobb;
&nbsp;&nbsp;dbms_lob.read(lobb, read_amount, read_offset, charbuf); 
&nbsp;&nbsp;dbms_output.put_line('lobb value: ' || charbuf);
END</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4374"></a><div class="props_rev_3"><a id="GUID-2D71AE31-E5DA-4B81-80ED-A4F92ABCB922" name="GUID-2D71AE31-E5DA-4B81-80ED-A4F92ABCB922"></a><h3 id="ADDCI-GUID-2D71AE31-E5DA-4B81-80ED-A4F92ABCB922" class="sect3"><span class="enumeration_section">6.5 </span>Using the OCI to Manipulate LOBs
               </h3>
               <div>
                  <p><a id="d13586e1151" class="indexterm-anchor"></a><a id="d13586e1155" class="indexterm-anchor"></a><a id="d13586e1159" class="indexterm-anchor"></a>The OCI includes functions that enable access to data stored in <code class="codeph">BLOB</code>s, <code class="codeph">CLOB</code>s, <code class="codeph">NCLOB</code>s, and <code class="codeph">BFILE</code>s. These functions are introduced in <a href="working-with-multimedia-data-types.html#GUID-042E45FA-42D0-4F3C-B5A5-1009DD053913__BABGGIFB" title="Lists the OCI functions used to manipulate LOBs and describes the function of each">Table 6-1</a>.
                  </p>
                  <p><a id="d13586e1181" class="indexterm-anchor"></a><a id="d13586e1185" class="indexterm-anchor"></a><a href="working-with-multimedia-data-types.html#GUID-58B9AA75-7B63-4103-9996-DE3AEA436BB7__BABEEBBC" title="Side-by-side list of comparable OC and PL/SQL (DBMS_LOB) interfaces">Table 6-2</a> compares the OCI and PL/SQL (<code class="codeph">DBMS_LOB</code> package) interfaces in terms of <code class="codeph">LOB</code> access.
                  </p>
                  <p><a href="working-with-multimedia-data-types.html#GUID-8CDF3D3F-59A0-4B92-9B43-E802E15374A9__BABEAIFE">Example 6-8</a> shows how to select a <code class="codeph">LOB</code> from the database into a locator. It assumes that the type <code class="codeph">lob_type</code> has two attributes, <code class="codeph">id</code> of type <code class="codeph">INTEGER</code> and <code class="codeph">data</code> of type <code class="codeph">CLOB</code>, and that a table, <code class="codeph">lob_table</code>, of type <code class="codeph">lob_type</code>, exists.
                  </p>
                  <p>A sample program, <code class="codeph">populate.c</code>, uses the OCI to populate a <code class="codeph">CLOB</code> with the contents of a file.
                  </p>
                  <div class="infoboxnotealso" id="GUID-2D71AE31-E5DA-4B81-80ED-A4F92ABCB922__GUID-066E33B4-2ABA-4DBE-8AB0-11646E9D8FB8">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=LNOCI-GUID-699FFE4B-07C8-4904-959F-3686E73B8188" target="_blank"><span class="variable" translate="no">Oracle Call Interface Programmer's Guide</span></a> for detailed documentation, including parameters, parameter types, return values, and example code.
                     </p>
                  </div>
               </div><a id="ADDCI4375"></a><div class="props_rev_3"><a id="GUID-042E45FA-42D0-4F3C-B5A5-1009DD053913" name="GUID-042E45FA-42D0-4F3C-B5A5-1009DD053913"></a><h4 id="ADDCI-GUID-042E45FA-42D0-4F3C-B5A5-1009DD053913" class="sect4"><span class="enumeration_section">6.5.1 </span>OCI Functions for Manipulating LOBs
                  </h4>
                  <div>
                     <div class="tblformal" id="GUID-042E45FA-42D0-4F3C-B5A5-1009DD053913__BABGGIFB">
                        <p class="titleintable">Table 6-1 Summary of OCI Functions for Manipulating LOBs </p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Summary of OCI Functions for Manipulating LOBs " summary="Lists the OCI functions used to manipulate LOBs and describes the function of each" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="41%" id="d13586e1306">Function</th>
                                 <th align="left" valign="bottom" width="59%" id="d13586e1309">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1314" headers="d13586e1306 "><code class="codeph">OCILobAppend()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1314 d13586e1309 ">
                                    <p>Appends LOB value to another <code class="codeph">LOB</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1324" headers="d13586e1306 "><code class="codeph">OCILobArrayRead()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1324 d13586e1309 ">
                                    <p>Reads LOB data for multiple locators in one round-trip.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1331" headers="d13586e1306 "><code class="codeph">OCILobArrayWrite()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1331 d13586e1309 ">
                                    <p>Writes LOB data for multiple locators in one round-trip.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1338" headers="d13586e1306 "><code class="codeph">OCILobAssign() </code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1338 d13586e1309 ">
                                    <p>Assigns one LOB locator to another. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1345" headers="d13586e1306 "><code class="codeph">OCILobCharSetForm()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1345 d13586e1309 ">
                                    <p>Returns the character set form of a <code class="codeph">LOB</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1355" headers="d13586e1306 "><code class="codeph">OCILobCharSetId()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1355 d13586e1309 ">
                                    <p>Returns the character set ID of a <code class="codeph">LOB</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1365" headers="d13586e1306 "><code class="codeph">OCILobClose()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1365 d13586e1309 ">
                                    <p>Closes a previously opened LOB or <code class="codeph">BFILE</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1375" headers="d13586e1306 "><code class="codeph">OCILobCopy2()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1375 d13586e1309 ">
                                    <p>Copies all or a portion of a LOB into another LOB; replaces the deprecated method <code class="codeph">OCILobCopy()</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1385" headers="d13586e1306 "><code class="codeph">OCILobCreateTemporary()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1385 d13586e1309 ">
                                    <p>Creates a temporary LOB.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1392" headers="d13586e1306 "><code class="codeph">OCILobDisableBuffering()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1392 d13586e1309 ">
                                    <p>Disables the buffering subsystem use. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1399" headers="d13586e1306 "><code class="codeph">OCILobEnableBuffering()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1399 d13586e1309 ">
                                    <p>Uses the LOB buffering subsystem for subsequent read and write operations of <code class="codeph">LOB</code> data. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1410" headers="d13586e1306 "><code class="codeph">OCILobErase2()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1410 d13586e1309 ">
                                    <p>Erases all or part of aLOB, starting at a specified offset; replaces the deprecated method <code class="codeph">OCILobErase()</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1420" headers="d13586e1306 "><code class="codeph">OCILobFileClose()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1420 d13586e1309 ">
                                    <p>Closes an open <code class="codeph">BFILE</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1430" headers="d13586e1306 "><code class="codeph">OCILobFileCloseAll()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1430 d13586e1309 ">
                                    <p>Closes all open <code class="codeph">BFILEs</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1440" headers="d13586e1306 "><code class="codeph">OCILobFileExists()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1440 d13586e1309 ">
                                    <p>Determines if a <code class="codeph">BFILE</code> exists. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1450" headers="d13586e1306 "><code class="codeph">OCILobFileGetName()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1450 d13586e1309 ">
                                    <p>Returns the name of a <code class="codeph">BFILE</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1460" headers="d13586e1306 "><code class="codeph">OCILobFileIsOpen()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1460 d13586e1309 ">
                                    <p>Determines if the <code class="codeph">BFILE</code> is open.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1470" headers="d13586e1306 "><code class="codeph">OCILobFileOpen()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1470 d13586e1309 ">
                                    <p>Opens a <code class="codeph">BFILE</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1480" headers="d13586e1306 "><code class="codeph">OCILobFileSetName()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1480 d13586e1309 ">
                                    <p>Sets the name of a <code class="codeph">BFILE</code> in a locator. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1490" headers="d13586e1306 "><code class="codeph">OCILobFlushBuffer()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1490 d13586e1309 ">
                                    <p>Flushes changes made to the LOB buffering subsystem to the database (server) </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1497" headers="d13586e1306 "><code class="codeph">OCILobFreeTemporary()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1497 d13586e1309 ">
                                    <p>Frees a temporary LOB.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1504" headers="d13586e1306 "><code class="codeph">OCILobGetChunkSize()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1504 d13586e1309 ">
                                    <p>Gets the chunk size of a LOB.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1512" headers="d13586e1306 "><code class="codeph">OCILobGetContentType()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1512 d13586e1309 ">
                                    <p>Gets the user-specified content type string for the data in a SecureFile, if set.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1519" headers="d13586e1306 "><code class="codeph">OCILobGetLength2()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1519 d13586e1309 ">
                                    <p>Gets the length of a LOB; replaced the deprecated method <code class="codeph">OCILobGetLength()</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1529" headers="d13586e1306 "><code class="codeph">OCILobGetOptions()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1529 d13586e1309 ">
                                    <p>Gets the enabled settings that correspond to the specified input option types for a specified <span>SecureFile</span> LOB.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1539" headers="d13586e1306 "><code class="codeph">OCILobGetStorageLimit()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1539 d13586e1309 ">
                                    <p>Gets the maximum length of a LOB (<code class="codeph">BLOB</code>, <code class="codeph">CLOB</code>, or <code class="codeph">NCLOB</code>), in bytes. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1555" headers="d13586e1306 "><code class="codeph">OCILobIsEqual()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1555 d13586e1309 ">
                                    <p>Determines if two LOB locators refer to the same <code class="codeph">LOB</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1565" headers="d13586e1306 "><code class="codeph">OCILobIsOpen()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1565 d13586e1309 ">
                                    <p>Determines if a LOB or <code class="codeph">BFILE</code> is open.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1575" headers="d13586e1306 "><code class="codeph">OCILobIsTemporary()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1575 d13586e1309 ">
                                    <p>Determines if a locator points to a temporary LOB.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1582" headers="d13586e1306 "><code class="codeph">OCILobLoadFromFile2()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1582 d13586e1309 ">
                                    <p>Loads <code class="codeph">BFILE</code> data into an internal LOB; replaced the deprecated method <code class="codeph">OCILobLoadFromFile()</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1595" headers="d13586e1306 "><code class="codeph">OCILobLocatorAssign()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1595 d13586e1309 ">
                                    <p>Assigns one LOB or <code class="codeph">BFILE</code> locator to another.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1605" headers="d13586e1306 "><code class="codeph">OCILobLocatorIsInit()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1605 d13586e1309 ">
                                    <p>Tests to see if a LOB locator is initialized. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1612" headers="d13586e1306 "><code class="codeph">OCILobOpen()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1612 d13586e1309 ">
                                    <p>Opens a LOB in the specified mode. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1620" headers="d13586e1306 "><code class="codeph">OCILobRead2()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1620 d13586e1309 ">
                                    <p>Reads a specified portion of a non-null LOB or a <code class="codeph">BFILE</code> into a buffer; replaces the deprecated method <code class="codeph">OCILobRead()</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1633" headers="d13586e1306 "><code class="codeph">OCILobSetContentType()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1633 d13586e1309 ">
                                    <p>Sets a content type string for the data in the  <code class="codeph">SecureFile</code> LOB.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1643" headers="d13586e1306 "><code class="codeph">OCILobSetOptions()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1643 d13586e1309 ">
                                    <p>Enables option settings for a <code class="codeph">SecureFile</code> LOB.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1653" headers="d13586e1306 "><code class="codeph">OCILobTrim2()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1653 d13586e1309 ">
                                    <p>Truncates a LOB; replaces the deprecated method <code class="codeph">OCILobTrim()</code>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1663" headers="d13586e1306 "><code class="codeph">OCILobWrite2()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1663 d13586e1309 ">
                                    <p>Writes data from a buffer into a LOB, writing over existing data; replaces the deprecated method  <code class="codeph">OCILobWrite()</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d13586e1673" headers="d13586e1306 "><code class="codeph">OCILobWriteAppend2()</code></td>
                                 <td align="left" valign="top" width="59%" headers="d13586e1673 d13586e1309 ">
                                    <p>Writes data starting at the current end of a LOB; replaces the deprecated method  <code class="codeph">OCILobWriteAppend()</code>.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADDCI4376"></a><div class="props_rev_3"><a id="GUID-58B9AA75-7B63-4103-9996-DE3AEA436BB7" name="GUID-58B9AA75-7B63-4103-9996-DE3AEA436BB7"></a><h4 id="ADDCI-GUID-58B9AA75-7B63-4103-9996-DE3AEA436BB7" class="sect4"><span class="enumeration_section">6.5.2 </span>Comparing OCI and PL/SQL Interfaces
                  </h4>
                  <div>
                     <div class="tblformal" id="GUID-58B9AA75-7B63-4103-9996-DE3AEA436BB7__BABEEBBC">
                        <p class="titleintable">Table 6-2 OCI and PL/SQL (DBMS_LOB) Interfaces Compared </p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="OCI and PL/SQL (DBMS_LOB) Interfaces Compared " summary="Side-by-side list of comparable OC and PL/SQL (DBMS_LOB) interfaces" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d13586e1745">OCI (ociap.h) </th>
                                 <th align="left" valign="bottom" width="62%" id="d13586e1748">PL/SQL DBMS_LOB (dbmslob.sql) </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1753" headers="d13586e1745 ">
                                    <p>N/A </p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1753 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.COMPARE() </pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1760" headers="d13586e1745 ">
                                    <p>N/A </p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1760 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.INSTR() </pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1767" headers="d13586e1745 ">
                                    <p>N/A </p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1767 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.SUBSTR() </pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1774" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobAppend()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1774 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.APPEND() </pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1781" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobAssign()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1781 d13586e1748 ">
                                    <p>N/A [use PL/SQL assign operator] </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1788" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobCharSetForm()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1788 d13586e1748 ">
                                    <p>N/A </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1795" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobCharSetId()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1795 d13586e1748 ">
                                    <p>N/A </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1802" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobCopy()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1802 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.COPY() </pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1809" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobDisableBuffering()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1809 d13586e1748 ">
                                    <p>N/A </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1816" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobEnableBuffering()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1816 d13586e1748 ">
                                    <p>N/A </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1823" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobErase()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1823 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.ERASE()</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1831" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobFileClose()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1831 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.FILECLOSE()</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1838" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobFileCloseAll()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1838 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.FILECLOSEALL()</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1845" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobFileExists()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1845 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.FILEEXISTS()</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1852" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobFileGetName()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1852 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.FILEGETNAME()</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1859" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobFileIsOpen()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1859 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.FILEISOPEN()</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1866" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobFileOpen()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1866 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.FILEOPEN()</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1873" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobFileSetName()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1873 d13586e1748 ">
                                    <p>N/A (use <code class="codeph">BFILENAME</code> operator)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1883" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobFlushBuffer()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1883 d13586e1748 ">
                                    <p>N/A</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1890" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobGetLength()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1890 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.GETLENGTH()</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1897" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobIsEqual()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1897 d13586e1748 ">
                                    <p>N/A</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1904" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobLocatorIsInit()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1904 d13586e1748 ">
                                    <p>N/A [always initialize] </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1912" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobRead()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1912 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.READ() </pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1919" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobTrim()</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1919 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.TRIM() </pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d13586e1926" headers="d13586e1745 "><pre class="oac_no_warn" dir="ltr">OCILobWrite() </pre></td>
                                 <td align="left" valign="top" width="62%" headers="d13586e1926 d13586e1748 "><pre class="oac_no_warn" dir="ltr">DBMS_LOB.WRITE() </pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADDCI4377"></a><div class="props_rev_3"><a id="GUID-8CDF3D3F-59A0-4B92-9B43-E802E15374A9" name="GUID-8CDF3D3F-59A0-4B92-9B43-E802E15374A9"></a><h4 id="ADDCI-GUID-8CDF3D3F-59A0-4B92-9B43-E802E15374A9" class="sect4"><span class="enumeration_section">6.5.3 </span>Selecting a Stored LOB into a Locator
                  </h4>
                  <div>
                     <div class="example" id="GUID-8CDF3D3F-59A0-4B92-9B43-E802E15374A9__BABEAIFE">
                        <p class="titleinexample">Example 6-8 Selecting a LOB from the Database into a Locator</p><pre class="oac_no_warn" dir="ltr">/*-----------------------------------------------------------------------*/ 
/* Select lob locators from a CLOB column                                */ 
/* Use the 'FOR UPDATE' clause for writing to the LOBs.                  */ 
/*-----------------------------------------------------------------------*/ 
static OCIEnv        *envhp;
static OCIServer     *srvhp;
static OCISvcCtx     *svchp;
static OCIError      *errhp;
static OCISession    *authp;
static OCIStmt       *stmthp;
static OCIDefine     *defnp1;
static OCIBind       *bndhp;
 
sb4 select_locator(int rowind) 
{ 
&nbsp;&nbsp;sword retval; 
&nbsp;&nbsp;boolean flag; 
&nbsp;&nbsp;int colc = rowind; 
&nbsp;&nbsp;OCILobLocator *clob;
&nbsp;&nbsp;text  *sqlstmt = (text *)"SELECT DATA FROM LOB_TABLE WHERE ID = :1 FOR UPDATE"; 

&nbsp;&nbsp;if (OCIStmtPrepare(stmthp, errhp, sqlstmt, (ub4) strlen((char *)sqlstmt), 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ub4) OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT)) 
&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;(void) printf("FAILED: OCIStmtPrepare() sqlstmt\n"); 
&nbsp;&nbsp;&nbsp;&nbsp;return OCI_ERROR; 
&nbsp;&nbsp;} 

&nbsp;&nbsp;if (OCIStmtBindByPos(stmthp, bndhp, errhp, (ub4) 1, (dvoid *) &amp;colc, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sb4) sizeof(colc), SQLT_INT, (dvoid *) 0, (ub2 *)0, (ub2 *)0, (ub4) 0, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ub4 *) 0, (ub4) OCI_DEFAULT)) 
&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;(void) printf("FAILED: OCIStmtBindByPos()\n"); 
&nbsp;&nbsp;&nbsp;&nbsp;return OCI_ERROR; 
&nbsp;&nbsp;}
&nbsp;&nbsp;
&nbsp;&nbsp;if (OCIDefineByPos(stmthp, &amp;defnp1, errhp, (ub4) 1, (dvoid *) &amp;clob, (sb4) -1,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ub2) SQLT_CLOB, (dvoid *) 0, (ub2 *) 0, (ub2 *) 0, (ub4) OCI_DEFAULT)) 
&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;(void) printf("FAILED: OCIDefineByPos()\n"); 
&nbsp;&nbsp;&nbsp;&nbsp;return OCI_ERROR; 
&nbsp;&nbsp;} 

&nbsp;&nbsp;/* Execute the select and fetch one row */ 
&nbsp;&nbsp;if (OCIStmtExecute(svchp, stmthp, errhp, (ub4) 1, (ub4) 0, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(CONST OCISnapshot*) 0, (OCISnapshot*) 0, (ub4) OCI_DEFAULT)) 
&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;(void) printf("FAILED: OCIStmtExecute() sqlstmt\n"); 
&nbsp;&nbsp;&nbsp;&nbsp;report_error(); 
&nbsp;&nbsp;&nbsp;&nbsp;return OCI_ERROR; 
&nbsp;&nbsp;} 
 
&nbsp;&nbsp;/* Now test to see if the LOB locator is initialized */ 
&nbsp;&nbsp;retval = OCILobLocatorIsInit(envhp, errhp, clob, &amp;flag); 
&nbsp;&nbsp;if ((retval != OCI_SUCCESS) &amp;&amp; (retval != OCI_SUCCESS_WITH_INFO)) 
&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;(void) printf("Select_Locator --ERROR: OCILobLocatorIsInit(), 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retval = %d\n", retval); 
&nbsp;&nbsp;&nbsp;&nbsp;report_error(); 
&nbsp;&nbsp;&nbsp;&nbsp;checkerr(errhp, retval); 
&nbsp;&nbsp;&nbsp;&nbsp;return OCI_ERROR; 
&nbsp;&nbsp;} 

&nbsp;&nbsp;if (!flag) 
&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;(void) printf("Select_Locator --ERROR: LOB Locator is not initialized.\n"); 
&nbsp;&nbsp;&nbsp;&nbsp;return OCI_ERROR;  
&nbsp;&nbsp;} 

&nbsp;&nbsp;return OCI_SUCCESS; 
}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4378"></a><div class="props_rev_3"><a id="GUID-9F67DBF8-F49A-4346-B2B2-B7369A849C31" name="GUID-9F67DBF8-F49A-4346-B2B2-B7369A849C31"></a><h3 id="ADDCI-GUID-9F67DBF8-F49A-4346-B2B2-B7369A849C31" class="sect3"><span class="enumeration_section">6.6 </span>Using DBMS_LOB Package to Manipulate LOBs
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d13586e2047" class="indexterm-anchor"></a>The <code class="codeph">DBMS_LOB</code> package can be used to manipulate <code class="codeph">LOBs</code> from PL/SQL. <a href="working-with-multimedia-data-types.html#GUID-F299D3AA-27F1-44A6-B118-FC453C57A0B6__BABHCJHA" title="Column 1 names the routine, and column 2 provides its description">Table 6-3</a> introduces its routines.
                     </p>
                     <p><a href="working-with-multimedia-data-types.html#GUID-E7AE8D33-8513-489D-AB73-640D5B4E659C__BABDDJGI">Example 6-9</a> calls the <code class="codeph">TRIM</code> procedure to trim a <code class="codeph">CLOB</code> value to a smaller length. It assumes that the type <code class="codeph">lob_type</code> has two attributes, <code class="codeph">id</code> of type <code class="codeph">INTEGER</code> and <code class="codeph">data</code> of type <code class="codeph">CLOB</code>, and that a table, <code class="codeph">lob_table</code>, of type <code class="codeph">lob_type</code>, exists. Because this example deals with <code class="codeph">CLOB</code> data, the second argument to <code class="codeph">DBMS_LOB</code>.<code class="codeph">TRIM</code>, the literal <code class="codeph">834004</code>, specifies the number of characters. If the example dealt with <code class="codeph">BLOB</code> data, this argument would be interpreted as a number of bytes.
                     </p>
                     <div class="infoboxnotealso" id="GUID-9F67DBF8-F49A-4346-B2B2-B7369A849C31__GUID-916DC57A-E5AE-4F2B-A936-0C43973E8A9C">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ARPLS600" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>  provides full details on using the routines of the <code class="codeph">DBMS_LOB</code> package. 
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADDCI4379"></a><div class="props_rev_3"><a id="GUID-F299D3AA-27F1-44A6-B118-FC453C57A0B6" name="GUID-F299D3AA-27F1-44A6-B118-FC453C57A0B6"></a><h4 id="ADDCI-GUID-F299D3AA-27F1-44A6-B118-FC453C57A0B6" class="sect4"><span class="enumeration_section">6.6.1 </span>DBMS_LOB Package Routines
                  </h4>
                  <div>
                     <div class="tblformal" id="GUID-F299D3AA-27F1-44A6-B118-FC453C57A0B6__BABHCJHA">
                        <p class="titleintable">Table 6-3 Summary of DBMS_LOB Package Routines</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Summary of DBMS_LOB Package Routines" summary="Column 1 names the routine, and column 2 provides its description" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d13586e2181">Routine</th>
                                 <th align="left" valign="bottom" width="69%" id="d13586e2184">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2189" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">APPEND()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2189 d13586e2184 ">
                                    <p>Appends the contents of the source <code class="codeph">LOB</code> to the destination <code class="codeph">LOB</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2202" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">COPY()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2202 d13586e2184 ">
                                    <p>Copies all or part of the source <code class="codeph">LOB</code> to the destination <code class="codeph">LOB</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2215" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">ERASE()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2215 d13586e2184 ">
                                    <p>Erases all or part of a <code class="codeph">LOB</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2225" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">LOADBLOBFROMFILE()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2225 d13586e2184 ">
                                    <p>Loads <code class="codeph">BFILE</code> data into an internal <code class="codeph">BLOB</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2238" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">LOADCLOBFROMFILE()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2238 d13586e2184 ">
                                    <p>Loads <code class="codeph">BFILE</code> data into an internal <code class="codeph">CLOB</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2251" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">TRIM()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2251 d13586e2184 ">
                                    <p>Trims the <code class="codeph">LOB</code> value to the specified shorter length.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2261" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">WRITE()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2261 d13586e2184 ">
                                    <p>Write data to the <code class="codeph">LOB</code> from a specified offsets
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2271" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">GETLENGTH</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2271 d13586e2184 ">
                                    <p>Gets the length of the <code class="codeph">LOB</code> value.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2281" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">INSTR()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2281 d13586e2184 ">
                                    <p>Return the matching position of the <span class="italic">n</span><sup>th</sup> occurrence of the pattern in the <code class="codeph">LOB</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2296" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">READ()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2296 d13586e2184 ">
                                    <p>Reads data from the <code class="codeph">LOB</code> starting at the specified offset
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2306" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">SUBSTR()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2306 d13586e2184 ">
                                    <p>Returns part of the <code class="codeph">LOB</code> value starting at the specified offset.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2317" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">FILECLOSE()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2317 d13586e2184 ">
                                    <p>Closes the file.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2324" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">FILECLOSEALL()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2324 d13586e2184 ">
                                    <p>Closes all previously opened files.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2331" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">FILEEXISTS()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2331 d13586e2184 ">
                                    <p>Tests if the file exists on the server.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2338" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">FILEGETNAME()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2338 d13586e2184 ">
                                    <p>Gets the directory alias and file name.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2345" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">FILEISOPEN()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2345 d13586e2184 ">
                                    <p>Tests the file was opened using the input <code class="codeph">BFILE</code> locators.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d13586e2355" headers="d13586e2181 "><pre class="oac_no_warn" dir="ltr">FILEOPEN()</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d13586e2355 d13586e2184 ">
                                    <p>Opens a file.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADDCI4380"></a><div class="props_rev_3"><a id="GUID-E7AE8D33-8513-489D-AB73-640D5B4E659C" name="GUID-E7AE8D33-8513-489D-AB73-640D5B4E659C"></a><h4 id="ADDCI-GUID-E7AE8D33-8513-489D-AB73-640D5B4E659C" class="sect4"><span class="enumeration_section">6.6.2 </span>Trimming a CLOB
                  </h4>
                  <div>
                     <div class="example" id="GUID-E7AE8D33-8513-489D-AB73-640D5B4E659C__BABDDJGI">
                        <p class="titleinexample">Example 6-9 Trimming a CLOB</p><pre class="oac_no_warn" dir="ltr">PROCEDURE Trim_Clob IS
        clob_loc  CLOB;
BEGIN
 -- get the LOB Locator
       SELECT data into clob_loc  FROM lob_table
       WHERE id  =  179 FOR UPDATE;
   -- call the TRIM Routine
       DBMS_LOB.TRIM(clob_loc, 834004);
       COMMIT;
END;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4381"></a><div class="props_rev_3"><a id="GUID-51396AA7-B3E9-4F4C-B88D-EC5741C8F2FC" name="GUID-51396AA7-B3E9-4F4C-B88D-EC5741C8F2FC"></a><h3 id="ADDCI-GUID-51396AA7-B3E9-4F4C-B88D-EC5741C8F2FC" class="sect3"><span class="enumeration_section">6.7 </span>LOBs in External Procedures
               </h3>
               <div>
                  <p><a id="d13586e2473" class="indexterm-anchor"></a><a id="d13586e2477" class="indexterm-anchor"></a>LOB locators can be passed as arguments to an external procedure, as defined in <a href="working-with-multimedia-data-types.html#GUID-61143C61-B438-437F-99D1-EFC792B54D0E__BABBJIJJ">Example 6-1</a>. 
                  </p>
                  <p>The corresponding C function gets an argument of type <code class="codeph">OCILobLocator</code> *. When the function defined in <a href="working-with-multimedia-data-types.html#GUID-8F349729-FF06-4ACD-A92D-CCB1449D6E7D__BABHEHIC">Example 6-10</a> is called, it invokes a c routine, <code class="codeph">c_findmin()</code>, with the signature <code class="codeph">int c_findmin(OCILobLocator*)</code>.
                  </p>
                  <p>The routine <code class="codeph">c_findmin</code> is in a shared library associated with <code class="codeph">DS_Lib</code>. To use the pointer <code class="codeph">OCILobLocator*</code> to get data from the <code class="codeph">LOB</code>, you must reconnect to the database by making a callback.
                  </p>
               </div><a id="ADDCI4382"></a><div class="props_rev_3"><a id="GUID-8F349729-FF06-4ACD-A92D-CCB1449D6E7D" name="GUID-8F349729-FF06-4ACD-A92D-CCB1449D6E7D"></a><h4 id="ADDCI-GUID-8F349729-FF06-4ACD-A92D-CCB1449D6E7D" class="sect4"><span class="enumeration_section">6.7.1 </span>Defining an External Procedure (PL/SQL)
                  </h4>
                  <div>
                     <div class="example" id="GUID-8F349729-FF06-4ACD-A92D-CCB1449D6E7D__BABHEHIC">
                        <p class="titleinexample">Example 6-10 Defining a PL/SQL External Procedure</p><pre class="oac_no_warn" dir="ltr">FUNCTION DS_Findmin(data CLOB) RETURN PLS_INTEGER IS EXTERNAL 
                   NAME "c_findmin" LIBRARY DS_Lib LANGUAGE C;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4383"></a><div class="props_rev_3"><a id="GUID-EC06BBB2-B824-46AE-B9B5-E4A668D4CFBB" name="GUID-EC06BBB2-B824-46AE-B9B5-E4A668D4CFBB"></a><h3 id="ADDCI-GUID-EC06BBB2-B824-46AE-B9B5-E4A668D4CFBB" class="sect3"><span class="enumeration_section">6.8 </span>LOBs and Triggers
               </h3>
               <div>
                  <p><a id="d13586e2623" class="indexterm-anchor"></a><a id="d13586e2627" class="indexterm-anchor"></a>You cannot write to a <code class="codeph">LOB</code> (<code class="codeph">:old</code> or <code class="codeph">:new</code> value) in any kind of trigger.
                  </p>
                  <p>In regular triggers, you can read the <code class="codeph">:old</code> value, but you cannot read the <code class="codeph">:new</code> value. In <code class="codeph">INSTEAD</code> <code class="codeph">OF</code> triggers, you can read both the <code class="codeph">:old</code> and the <code class="codeph">:new</code> values.
                  </p>
                  <p>You cannot specify <code class="codeph">LOB</code> type columns in an <code class="codeph">OF</code> clause, because <code class="codeph">BFILE</code> types can be updated without updating the underlying table on which the trigger is defined. 
                  </p>
                  <p>Using OCI functions or the <code class="codeph">DBMS_LOB</code> package to update <code class="codeph">LOB</code> values or <code class="codeph">LOB</code> attributes of object columns does not fire triggers defined on the table that contains the columns or attributes.
                  </p>
               </div>
            </div><a id="ADDCI4384"></a><div class="props_rev_3"><a id="GUID-6CB4DCD4-D752-4AD9-8F4F-D59C847C2775" name="GUID-6CB4DCD4-D752-4AD9-8F4F-D59C847C2775"></a><h3 id="ADDCI-GUID-6CB4DCD4-D752-4AD9-8F4F-D59C847C2775" class="sect3"><span class="enumeration_section">6.9 </span>Using Open/Close as Bracketing Operations for Efficient Performance
               </h3>
               <div>
                  <p>The <code class="codeph">Open/Close</code> functions let you indicate the beginning and end of a series of LOB operations, so that large-scale operations, such updating indexes, can be performed when the <code class="codeph">Close</code> function is called. This means that when the <code class="codeph">Open</code> call is made, the index would not be updated each time the LOB is modified, and that such updating would not resume until the <code class="codeph">Close</code> call. 
                  </p>
                  <p>You do not have to wrap all <code class="codeph">LOB</code> operations inside the <code class="codeph">Open/Close</code> operations, but code block can be very valuable for the following reasons:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you do not wrap <code class="codeph">LOB</code> operations inside an <code class="codeph">Open/Close</code> call, then each modification to the <code class="codeph">LOB</code> implicitly opens and closes the <code class="codeph">LOB,</code> thereby firing all triggers. If you do wrap the <code class="codeph">LOB</code> operations inside a pair of <code class="codeph">Open...Close</code> operations, then the triggers are not fired for each <code class="codeph">LOB</code> modification. Instead, one trigger is fired when the <code class="codeph">Close</code> call is made. Likewise, extensible indexes are not updated until the <code class="codeph">Close</code> call. This means that any extensible indexes on the <code class="codeph">LOB</code> are not valid between the <code class="codeph">Open...Close</code> calls.
                        </p>
                     </li>
                     <li>
                        <p>You must apply this technology carefully because state, which reflects the changes to the <code class="codeph">LOB</code>, is not saved between the <code class="codeph">Open</code> and the <code class="codeph">Close</code> operations. When you have called <code class="codeph">Open</code>, Oracle no longer keeps track of what portions of the <code class="codeph">LOB</code> value were modified, nor of the old and new values of the <code class="codeph">LOB</code> that result from any modifications. The <code class="codeph">LOB</code> value is still updated directly for each <code class="codeph">OCILob*</code> or <code class="codeph">DBMS_LOB</code> operation, and the usual read consistency mechanism is still in place. You may also want extensible indexes on the <code class="codeph">LOB</code> to be updated, as <code class="codeph">LOB</code> modifications are made because the extensible <code class="codeph">LOB</code> indexes are always valid and may be used at any time.
                        </p>
                     </li>
                     <li>
                        <p>The API enables you to determine if the <code class="codeph">LOB</code> is open. In all cases, openness is associated with the <code class="codeph">LOB</code>, not the locator. The locator does not save any state information.
                        </p>
                     </li>
                  </ul>
               </div><a id="ADDCI4385"></a><div class="props_rev_3"><a id="GUID-57359987-41A2-4450-B685-33AA1AB8E5BC" name="GUID-57359987-41A2-4450-B685-33AA1AB8E5BC"></a><h4 id="ADDCI-GUID-57359987-41A2-4450-B685-33AA1AB8E5BC" class="sect4"><span class="enumeration_section">6.9.1 </span>Errors and Restrictions Regarding Open/Close Operations
                  </h4>
                  <div>
                     <p>It is an error to commit the transaction before closing all previously opened <code class="codeph">LOB</code>s. At transaction rollback time, all <code class="codeph">LOB</code>s that are still open are discarded, which means that they are not closed, which fires the triggers.
                     </p>
                     <p>It is an error to <code class="codeph">Open/Close</code> the same <code class="codeph">LOB</code> twice, either with different locators or with the same locator. It is an error to close a <code class="codeph">LOB</code> that has not been opened.
                     </p>
                     <p><a href="working-with-multimedia-data-types.html#GUID-47D73CF4-8AC8-4A86-98CC-D81396E63E1E__BABGDIAJ">Example 6-11</a> assumes that <code class="codeph">loc1</code> is refers to an open <code class="codeph">LOB</code>, and is assigned to <code class="codeph">loc2</code>. If <code class="codeph">loc2</code> is subsequently used to modify the <code class="codeph">LOB</code> value, the modification is grouped with <code class="codeph">loc1</code>'s modifications. This means that there is only one entry in the <code class="codeph">LOB</code> manager's state, not one for each locator. When the <code class="codeph">LOB</code> is closed, either through <code class="codeph">loc1</code> or <code class="codeph">loc2</code>, the triggers are fired, so all updates made to the <code class="codeph">LOB</code> through either locator are committed. After the close of the <code class="codeph">LOB</code>, if the user tries to use either locator to modify the <code class="codeph">LOB</code>, the operation performs an implicit <code class="codeph">Open()</code> and <code class="codeph">Close()</code>, as <code class="codeph">Open() ... </code><span class="italic"><code class="codeph">operation</code></span><code class="codeph"> ... Close()</code>. Note that consistent read is still maintained for each locator. Remember that it is the <code class="codeph">LOB</code>, not the locator, that is opened and closed. No matter how many copies of the locator are made, the triggers for the <code class="codeph">LOB</code> are fired only one time on the first <code class="codeph">Close()</code> call.
                     </p>
                  </div><a id="ADDCI4386"></a><div class="props_rev_3"><a id="GUID-47D73CF4-8AC8-4A86-98CC-D81396E63E1E" name="GUID-47D73CF4-8AC8-4A86-98CC-D81396E63E1E"></a><h5 id="ADDCI-GUID-47D73CF4-8AC8-4A86-98CC-D81396E63E1E" class="sect5"><span class="enumeration_section">6.9.1.1 </span>Working with Open() and Close() Code Blocks
                     </h5>
                     <div>
                        <div class="example" id="GUID-47D73CF4-8AC8-4A86-98CC-D81396E63E1E__BABGDIAJ">
                           <p class="titleinexample">Example 6-11 Using Open() and Close() Code Block</p><pre class="oac_no_warn" dir="ltr">open (loc1);
loc2 := loc1;
write (loc1);
write (loc2); 
open (loc2);  /* error because the LOB is open */
close (loc1); /* triggers are fired and all LOB updates made before this 
                 statement by any locator are incorporated in the extensible
                 index */
write (loc2); /* implicit open, write, implicit close */
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
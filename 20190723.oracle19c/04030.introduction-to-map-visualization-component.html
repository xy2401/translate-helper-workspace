<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">
      <meta name="description" content="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">
      <title>Introduction to the Map Visualization Component</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Map Visualization Developer's Guide ">
      <meta property="og:description" content="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Map Visualization Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-map-visualization-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T11:37:22-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94797-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="preface.html" title="Previous" type="text/html">
      <link rel="next" href="map-visualization-concepts.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Map Visualization Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JIMPV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="preface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="map-visualization-concepts.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Map Visualization Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Introduction to the Map Visualization Component</li>
            </ol>
            <a id="GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" name="GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F"></a><a id="JIMPV1000"></a>
            
            <h2 id="JIMPV-GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" class="sect2"><span class="enumeration_chapter">1 </span>Introduction to the Map Visualization Component
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The Oracle Spatial and Graph map visualization component (sometimes referred to <span class="italic">the visualization component</span>) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.
               </p>
               <p>The map visualization component provides tools that hide the complexity of spatial data queries and cartographic rendering, while providing customizable options for more advanced users. These tools can be deployed in a platform-independent manner and are designed to integrate with map-rendering applications.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC">Overview of the Map Visualization Component</a><br>The map visualization component enables developers to incorporate highly interactive maps and spatial analysis into business applications.
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-10F9DF2C-F517-49E2-9C07-871441663FE5">Getting Started with the Map Visualization Component</a><br>To get started, follow these steps.
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C">Prerequisite Software for the Map Visualization Component</a><br>To use the map visualization component, you must have the following software.
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-DDB6A642-4CA3-4019-848A-D96995B338A9">Deploying MapViewer-Based Applications with the Map Visualization Component</a><br>If you have any MapViewer-based applications, you can deploy them with the map visualization component.
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0">Administering the Map Visualization Component</a><br>This topic introduces the map visualization component Administration page and some administrative and configuration tasks that you can perform, such as adding new data sources, managing map tile layers used by Oracle Maps, and setting logging levels.
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15">Oracle Real Application Clusters and the Map Visualizer</a><br>When the database is an Oracle Real Application Cluster (Oracle RAC), you can connect to the Oracle RAC database using either of the following options.
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-B1C71001-5981-45E1-8B2E-986D53251A60">High Availability and the Map Visualizer (WebLogic Server Only)</a><br>Users can benefit from the high availability features of Oracle WebLogic Server.
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879">Secure Map Rendering</a><br>You can implement secure map rendering based on a web user's identity.
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-93D5B57C-ED0A-4574-9149-A76CAEBD344D">Map Visualizer Demos and Tutorials</a><br>Several map visualizer demos and tutorials are included in a separate application archive named <code class="codeph">mvdemo.ear</code>, and deployed to the same Java EE container where <code class="codeph">mapviewer.ear</code> is deployed.
                  </li>
               </ul>
            </div>
            <a id="JIMPV9457"></a><div class="props_rev_3"><a id="GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC" name="GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC"></a><h3 id="JIMPV-GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC" class="sect3"><span class="enumeration_section">1.1 </span>Overview of the Map Visualization Component
               </h3>
               <div>
                  <p>The map visualization component enables developers to incorporate highly interactive maps and spatial analysis into business applications.</p>
                  <p>Application content can be combined with maps and data from a variety of web services and data formats such as GeoJSON. It is deployed in a Java EE container or in the Oracle Java Cloud Service.</p>
                  <p>The map visualization component includes the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A map rendering engine to expose cartographic render functions to web applications.</p>
                     </li>
                     <li>
                        <p>A suite of application programming interfaces (APIs) that allow programmable access to visualization features. These APIs include XML, Java, and an HTML5-based JavaScript API.</p>
                     </li>
                     <li>
                        <p>A graphical map builder tool that enables you to create map symbols, define spatial data rendering rules, and create and edit map visualization component objects.</p>
                     </li>
                     <li>
                        <p>Oracle Maps, which includes map cache and FOI (feature of interest) servers that facilitate the development of interactive geospatial web applications.</p>
                     </li>
                     <li>
                        <p>Packaged content for admin areas (countries, states, counties, and so on) as JSON files.</p>
                     </li>
                  </ul>
                  <p>The core rendering engine connects to the Oracle database through Java Database Connectivity (JDBC). It also reads the map metadata (such as map definitions, styling rules, and symbology created through the Map Builder tool) from the database, and applies the metadata to the retrieved spatial data during rendering operations.</p>
                  <p>The JavaScript API enables you to create highly interactive web applications that use the Oracle Maps feature of the map visualization component.</p>
                  <p>The Map Builder tool simplifies the process of creating and managing map, theme, and symbology metadata in a spatial database. For information about this tool, see <a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="This chapter briefly describes the map visualization component Map Builder tool, also referred to as Oracle Map Builder. It does not provide detailed information about the tool's interface; for that you should use see online help available when you use Oracle Map Builder.">Oracle Map Builder Tool</a>.
                  </p>
                  <p>Oracle Maps, built on core map visualization component features, uses a map tile server that caches map image tiles, and a feature of interest (FOI) server that streams live data out of a database to be displayed as interactive features on a map. You can use the HTML5-based JavaScript API with Oracle Maps to provide sophisticated mapping solutions. Oracle Maps also allows for advanced customization and querying capabilities.</p>
                  <p>The map visualization component supports two-dimensional vector geometries stored in Oracle Spatial and Graph, as well as GeoRaster data and data in the Oracle Spatial and Graph topology and network data models. The map visualization component is also an Open Geospatial Consortium (OGC)-compliant web map service (WMS) and web map tile service (WMTS) server.</p>
                  <p>The </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-15001A52-4F67-45CF-BF44-2F5BAA717789">Map Visualization Component Architecture</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">Introduction to the Map Visualization Component</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9461"></a><a id="JIMPV9460"></a><div class="props_rev_3"><a id="GUID-15001A52-4F67-45CF-BF44-2F5BAA717789" name="GUID-15001A52-4F67-45CF-BF44-2F5BAA717789"></a><h4 id="JIMPV-GUID-15001A52-4F67-45CF-BF44-2F5BAA717789" class="sect4"><span class="enumeration_section">1.1.1 </span>Map Visualization Component Architecture
                  </h4>
                  <div>
                     <p>The following figure illustrates the architecture of the map visualization component.</p>
                     <div class="figure" id="GUID-15001A52-4F67-45CF-BF44-2F5BAA717789__MAPVISUALIZATIONCOMPONENTARCHITECTU-AEC9E6E6">
                        <p class="titleinfigure">Figure 1-1 Map Visualization Component Architecture</p><img src="img/architecture.gif" alt="Description of Figure 1-1 follows" title="Description of Figure 1-1 follows" longdesc="img_text/architecture.html"><br><a href="img_text/architecture.html">Description of "Figure 1-1 Map Visualization Component Architecture"</a></div>
                     <!-- class="figure" -->
                     <p>As shown in the preceding figure:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The map visualization component can communicate with a client web browser or application or external web services using the HTTP protocol.</p>
                        </li>
                        <li>
                           <p>With a client web browser or application, it communicates using HTTP protocol with the map visualization rendering engine in a JEE container or the Java cloud service.</p>
                        </li>
                        <li>
                           <p>It performs spatial data access (reading and writing Oracle Spatial and Graph data) through JDBC calls to the database or the database cloud service.</p>
                        </li>
                        <li>
                           <p>The database or database cloud service includes Oracle Spatial and Graph, as well as mapping metadata.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-3D6CDFDB-0BB1-49D1-B4B1-1457E24D02FC" title="The map visualization component enables developers to incorporate highly interactive maps and spatial analysis into business applications.">Overview of the Map Visualization Component</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9462"></a><div class="props_rev_3"><a id="GUID-10F9DF2C-F517-49E2-9C07-871441663FE5" name="GUID-10F9DF2C-F517-49E2-9C07-871441663FE5"></a><h3 id="JIMPV-GUID-10F9DF2C-F517-49E2-9C07-871441663FE5" class="sect3"><span class="enumeration_section">1.2 </span>Getting Started with the Map Visualization Component
               </h3>
               <div>
                  <p>To get started, follow these steps.</p>
                  <ol>
                     <li><span>Either before or after you install and deploy the map visualization component, read <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a> to be sure you understand important terms and concepts.</span></li>
                     <li><span>Ensure that you have the prerequisite software (see <a href="introduction-to-map-visualization-component.html#GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C" title="To use the map visualization component, you must have the following software.">Prerequisite Software for the Map Visualization Component</a>).</span></li>
                     <li><span>Install (if necessary) and deploy the map visualization component.</span></li>
                     <li><span>Use the map visualization component for some basic tasks. For example, create an Oracle Maps application (see <a href="oracle-maps.html#GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E" title="Oracle Maps is the name for a suite of technologies for developing high-performance interactive web-based mapping applications.">Oracle Maps</a>).</span></li>
                     <li><span>Optionally, use the Map Builder tool (described in <a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="This chapter briefly describes the map visualization component Map Builder tool, also referred to as Oracle Map Builder. It does not provide detailed information about the tool's interface; for that you should use see online help available when you use Oracle Map Builder.">Oracle Map Builder Tool</a>) to familiarize yourself with styles, themes, and maps, and the options for each, and optionally to preview spatial data.</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">Introduction to the Map Visualization Component</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9463"></a><div class="props_rev_3"><a id="GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C" name="GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C"></a><h3 id="JIMPV-GUID-23484C6A-01CF-4B38-BF4D-6AC0A144C24C" class="sect3"><span class="enumeration_section">1.3 </span>Prerequisite Software for the Map Visualization Component
               </h3>
               <div>
                  <p>To use the map visualization component, you must have the following software.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A supported JEE server (see <a href="http://www.oracle.com/technetwork/database/options/spatialandgraph/documentation/jee-server-support-3659112.html" target="_blank">http://www.oracle.com/technetwork/database/options/spatialandgraph/documentation/jee-server-support-3659112.html</a>)
                        </p>
                     </li>
                     <li>
                        <p>Java SDK 1.8 or later</p>
                     </li>
                  </ul>
                  <p><a id="d2937e373" class="indexterm-anchor"></a><a id="d2937e375" class="indexterm-anchor"></a><a id="d2937e377" class="indexterm-anchor"></a>The map visualization component also supports the headless AWT mechanism in J2SE SDK, which enables the visualization component to run on Linux or UNIX systems without setting any <code class="codeph">X11 DISPLAY</code> variable. To enable AWT headless mode on Linux or UNIX systems, specify the following in the command line to start the map visualization component:
                  </p><pre class="oac_no_warn" dir="ltr">-Djava.awt.headless=true</pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">Introduction to the Map Visualization Component</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV10007"></a><div class="props_rev_3"><a id="GUID-DDB6A642-4CA3-4019-848A-D96995B338A9" name="GUID-DDB6A642-4CA3-4019-848A-D96995B338A9"></a><h3 id="JIMPV-GUID-DDB6A642-4CA3-4019-848A-D96995B338A9" class="sect3"><span class="enumeration_section">1.4 </span>Deploying MapViewer-Based Applications with the Map Visualization Component
               </h3>
               <div>
                  <p>If you have any MapViewer-based applications, you can deploy them with the map visualization component.</p>
                  <p>If you want to continue to use your existing MapViewer configuration, follow the instructions in this section.</p>
                  <p>Applications written using the MapViewer V2 API will work with the map visualization component. </p>
                  <p>(You can also use an existing MapViewer configuration in WebLogic Server on Oracle Fusion Middleware Release 12.2.1.x.0 and later.)</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">Introduction to the Map Visualization Component</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9483"></a><div class="props_rev_3"><a id="GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" name="GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0"></a><h3 id="JIMPV-GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" class="sect3"><span class="enumeration_section">1.5 </span>Administering the Map Visualization Component
               </h3>
               <div>
                  <p>This topic introduces the map visualization component Administration page and some administrative and configuration tasks that you can perform, such as adding new data sources, managing map tile layers used by Oracle Maps, and setting logging levels.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC">Logging in to the Map Visualization Component Administration Page</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-28AA44A7-5021-43C5-84A9-730C945A8760">Performing Map Visualizer Administrative Tasks</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">Introduction to the Map Visualization Component</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9485"></a><a id="JIMPV9486"></a><a id="JIMPV9484"></a><div class="props_rev_3"><a id="GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC" name="GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC"></a><h4 id="JIMPV-GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC" class="sect4"><span class="enumeration_section">1.5.1 </span>Logging in to the Map Visualization Component Administration Page
                  </h4>
                  <div>
                     <p>After you have verified that the map visualization component is running properly, it is suggested that you log in to the map visualization component Administration page. To do this, go first to the map visualization component Welcome page, which is typically <code class="codeph">http://</code><span class="italic"><code class="codeph">&lt;host&gt;:&lt;port&gt;</code></span>/<code class="codeph">mapviewer</code>, where <span class="italic"><code class="codeph">&lt;host&gt;</code></span> and <span class="italic"><code class="codeph">&lt;port&gt;</code></span> should be replaced by the correct value for your installation.
                     </p>
                     <p>Click the <span class="bold">Admin</span> link at the top right to display the map visualization component Administration page.
                     </p>
                     <p>You can use this administration page to perform administrative tasks, such as clearing cached data, creating tile layers, managing tile layers, and restarting the server (use the <span class="bold">Monitoring</span> link to restart).
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" title="This topic introduces the map visualization component Administration page and some administrative and configuration tasks that you can perform, such as adding new data sources, managing map tile layers used by Oracle Maps, and setting logging levels.">Administering the Map Visualization Component</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9488"></a><a id="JIMPV9487"></a><div class="props_rev_3"><a id="GUID-15A469ED-6429-4ECD-B636-D27CD58C2283" name="GUID-15A469ED-6429-4ECD-B636-D27CD58C2283"></a><h4 id="JIMPV-GUID-15A469ED-6429-4ECD-B636-D27CD58C2283" class="sect4"><span class="enumeration_section">1.5.2 </span>Configuring the Map Visualization Component
                  </h4>
                  <div>
                     <p>If the default configuration settings for running the map visualization component are not adequate, you can configure the map visualization component by editing the visualization component configuration file, <code class="codeph">mapViewerConfig.xml</code>, which is located in the <span class="italic"><code class="codeph">$MAPVIEWER_HOME</code></span><code class="codeph">/WEB-INF/conf</code> directory. To modify this file, you can use a text editor, or you can use the map visualization component Administration page.
                     </p>
                     <p>After you modify this file, you must restart the container to have the changes take effect; however, you can instead use the map visualization component Administration page to restart only the map visualization component servlet (instead of the entire Java EE instance, which may have other applications deployed and running) if you installed the map visualization component with a standalone Glassfish instance.</p>
                     <p>The map visualization component configuration file defines the following information in XML format:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Logging information, defined either through container-controlled logging (recommended) or in the <code class="codeph">&lt;logging&gt;</code> element (see <a href="introduction-to-map-visualization-component.html#GUID-98388D57-FF15-41D3-9448-0158840F38AF">Specifying Logging Information</a>)
                           </p>
                        </li>
                        <li>
                           <p>Map image file information, defined in the <code class="codeph">&lt;save_images_at&gt;</code> element (see <a href="introduction-to-map-visualization-component.html#GUID-82293405-04DB-4226-9A33-FC5692AC44AB">Specifying Map File Storage and Life Cycle Information</a>)
                           </p>
                        </li>
                        <li>
                           <p>Web proxy information for accessing external information across a firewall, defined in the <code class="codeph">&lt;web_proxy&gt;</code> element (see <a href="introduction-to-map-visualization-component.html#GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE">Specifying a Web Proxy</a>)
                           </p>
                        </li>
                        <li>
                           <p>Global map "look and feel" configuration, defined in the <code class="codeph">&lt;global_map_config&gt;</code> element (see <a href="introduction-to-map-visualization-component.html#GUID-69148567-C00C-441A-BBA7-D42EB32879A7">Specifying Global Map Configuration Options</a>)
                           </p>
                        </li>
                        <li>
                           <p>Internal spatial data cache settings, defined in the <code class="codeph">&lt;spatial_data_cache&gt;</code> element (see <a href="introduction-to-map-visualization-component.html#GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781">Customizing the Spatial Data Cache</a>)
                           </p>
                        </li>
                        <li>
                           <p>Permanent map data sources, defined in the <code class="codeph">&lt;map_data_source&gt;</code> element (see <a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">Defining Permanent Map Data Sources</a>)
                           </p>
                        </li>
                        <li>
                           <p>Security configurations, defined in the <code class="codeph">&lt;security_config&gt;</code> element
                           </p>
                        </li>
                        <li>
                           <p>WMS services configurations, defined in the <code class="codeph">&lt;wms_config&gt;</code> element
                           </p>
                        </li>
                        <li>
                           <p>External attribute data provider registration, defined in <code class="codeph">&lt;ns_data_provider&gt;</code> elements
                           </p>
                        </li>
                        <li>
                           <p>Map tile server configurations, defined in the <code class="codeph">&lt;map_tile_server&gt;</code> element
                           </p>
                        </li>
                        <li>
                           <p>UTF grid lifecycle parameters, defined in the <code class="codeph">&lt;utfgrid_life_cycle&gt;</code> element
                           </p>
                        </li>
                        <li>
                           <p>External spatial data provider registration, defined in the <code class="codeph">&lt;s_data_provider&gt;</code> element
                           </p>
                        </li>
                        <li>
                           <p>Map data sources, defined in the <code class="codeph">&lt;map_data_source&gt;</code> element
                           </p>
                        </li>
                        <li>
                           <p>Map data server stream parameters, defined in the <code class="codeph">&lt;mds_config&gt;</code> element
                           </p>
                        </li>
                        <li>
                           <p>OAM logout parameters, defined in the <code class="codeph">&lt;oam_logout&gt;</code> element
                           </p>
                        </li>
                     </ul>
                     <p>All path names in the <code class="codeph">mapViewerConfig.xml</code> file are relative to the directory in which the file is stored, unless otherwise specified.
                     </p>
                     <div class="example" id="GUID-15A469ED-6429-4ECD-B636-D27CD58C2283__CHDHDFJH">
                        <p class="titleinexample">Example 1-1 Sample Map Visualization Component Configuration File</p>
                        <p><a id="d2937e725" class="indexterm-anchor"></a><a id="d2937e729" class="indexterm-anchor"></a><a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283__CHDHDFJH">Example 1-1</a> shows a sample <code class="codeph">mapViewerConfig.xml</code> file.
                        </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" ?&gt;
&lt;!-- This is the configuration file for the map visualization component. --&gt;
&lt;!-- Note: All paths are resolved relative to this directory (where 
           this config file is located), unless specified as an absolute 
           path name.
 --&gt;
 
&lt;MapperConfig&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- ************************ Logging Settings ************************ --&gt;
  &lt;!-- ****************************************************************** --&gt;
 
  &lt;!-- Uncomment the following to modify logging. Possible values are:
       log_level = "fatal"|"error"|"warn"|"info"|"debug"|"finest"  
                 default: info) ;
       log_thread_name = "true" | "false" ;
       log_time = "true" | "false" ;
       one or more log_output elements.
  --&gt;
  &lt;!--
    &lt;logging log_level="info" log_thread_name="false"
             log_time="true"&gt;
       &lt;log_output name="System.err" /&gt;
       &lt;log_output name="../log/mapviewer.log" /&gt;
    &lt;/logging&gt;
  --&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- ********************** Map Image Settings ************************ --&gt;
  &lt;!-- ****************************************************************** --&gt;
 
  &lt;!-- Uncomment the following only if you want generated images to 
       be stored in a different directory, or if you want to customize
       the life cycle of generated image files.
 
       By default, all maps are generated under 
       $ORACLE_HOME/lbs/mapviewer/web/images. 
 
       Images location-related attributes:
       file_prefix: image file prefix, default value is "omsmap"
       url:  the URL at which images can be accessed. It must match the 'path'
             attribute below. Its default value is "%HOST_URL%/mapviewer/images"
       path: the corresponding path in the server where the images are
             saved; default value is "%ORACLE_HOME%/lbs/mapviewer/web/images"
 
       Images life cycle-related attributes:
       life: the life period of generated images, specified in minutes. 
             If not specified or if the value is 0, images saved on disk will 
             never be deleted. 
       recycle_interval:  this attribute specifies how often the recycling 
             of generated map images will be performed. The unit is minute.
             The default interval (when not specified or if the value is 0) 
             is 8*60, or 8 hours.
             
   --&gt;
  &lt;!--
   &lt;save_images_at  file_prefix="omsmap"
                   url="http://mypc.mycorp.com:8888/mapviewer/images"
                   path="../web/images"
   /&gt; 
  --&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- ********************* IP Monitoring Settings ********************* --&gt;
  &lt;!-- ****************************************************************** --&gt;
 
  &lt;!-- Uncomment the following to enable IP filtering for administrative 
        requests.
    Note:
    - Use &lt;ips&gt; and &lt;ip_range&gt; to specify which IPs (and ranges) are allowed.
      Wildcard form such as 20.* is also accepted. Use a comma-delimited 
      list in &lt;ips&gt;.
 
    - Use &lt;ips_exclude&gt; and &lt;ip_range_exclude&gt; for IPs and IP ranges
      prohibited from accessing eLocation.
 
    - If an IP falls into both "allowed" and "prohibited" categories, it is
      prohibited.
 
    - If you put  "*" in an &lt;ips&gt; element, then all IPs are allowed, except
      those specified in &lt;ips_exclude&gt; and &lt;ip_range_exclude&gt;.
      On the other hand, if you put "*" in an &lt;ips_exclude&gt; element, no one
      will be able to access the map visualization component (regardless of whether an IP is in
      &lt;ips&gt; or &lt;ip_range&gt;).
 
    - You can have multiple &lt;ips&gt;, &lt;ip_range&gt;, &lt;ips_exclude&gt;, and
      &lt;ip_range_exclude&gt; elements under &lt;ip_monitor&gt;.
 
    - If no &lt;ip_monitor&gt; element is present in the XML configuration
      file, then no IP filtering will be performed (all allowed).
 
    - The way the map visualization component determines if an IP is allowed is:
 
          if(IP filtering is not enabled) then allow;
          if(IP is in exclude-list) then not allow;
          else if(IP is in allow-list) then allow;
          else not allow;  
   --&gt;
 
  &lt;!--
     &lt;ip_monitor&gt;
          &lt;ips&gt; 138.1.17.9, 138.1.17.21, 138.3.*, 20.* &lt;/ips&gt;
          &lt;ip_range&gt; 24.17.1.3 - 24.17.1.20 &lt;/ip_range&gt;
          &lt;ips_exclude&gt; 138.3.29.* &lt;/ips_exclude&gt;
          &lt;ip_range_exclude&gt;20.22.34.1 - 20.22.34.255&lt;/ip_range_exclude&gt;
     &lt;/ip_monitor&gt;
   --&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- ********************** Web Proxy Setting  ************************ --&gt;
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- Uncomment and modify the following to specify the web proxy setting.
       This is only needed for passing background image URLs to
       the map visualization component in map requests or for setting a logo image URL, if
       such URLs cannot be accessed without the proxy.
   --&gt;
 
  &lt;!--
    &lt;web_proxy host="www-proxy.my_corp.com"  port="80" /&gt;
  --&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- *********************** Security Configuration ******************* --&gt;
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- Here you can set various security related configurations of the map visualization component.
  --&gt;
 
  &lt;security_config&gt;
    &lt;disable_direct_info_request&gt; false &lt;/disable_direct_info_request&gt;
  &lt;/security_config&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- *********************** Global Map Configuration ***************** --&gt;
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- Uncomment and modify the following to specify systemwide parameters
       for generated maps. You can specify your copyright note, map title, and
       an image to be used as a custom logo shown on maps. The logo image must 
       be accessible to this map visualization component and in either GIF or JPEG format.
       Notes:
         -  To disable a global note or title, specify an empty string ("") for
            the text attribute of &lt;note&gt; and &lt;title&gt; element.
         - position specifies a relative position on the map where the
                  logo, note, or title  will be displayed. Possible values are
                  NORTH, EAST, SOUTH, WEST, NORTH_EAST, SOUTH_EAST,
                  SOUTH_WEST, NORTH_WEST, and CENTER.
         - image_path specifies a file path or a URL (starts with "http://")
                    for the image.
 
       &lt;rendering&gt; element attributes:
       - Local geodetic data adjustment: If allow_local_adjustment="true",
         The map visualization component automatically performs local data
         "flattening" with geodetic data if the data window is less than
         3 decimal degrees. Specifically, the map visualization component performs a simple
         mathematical transformation of the coordinates using a tangential
         plane at the current map request center.
         If allow_local_adjustment="false" (default), no adjustment is
         performed.
       - Automatically applies a globular map projection (geodetic data only): 
         If use_globular_projection="true", The map visualization component will 
         apply a globular projection on the fly to geometries being displayed. 
         If use_globular_projection="false" (the default), The map visualization component does no map 
         projection to geodetic geometries. This option has no effect on 
         non-geodetic data.
   --&gt;
 
  &lt;!--
    &lt;global_map_config&gt;
        &lt;note text="Copyright 2009, Oracle Corporation" 
              font="sans serif" 
              position="SOUTH_EAST"/&gt;
        &lt;title  text="MapViewer Demo" 
                font="Serif"
                position="NORTH" /&gt;
        &lt;logo image_path="C:\\images\\a.gif"  
              position="SOUTH_WEST" /&gt;
 
        &lt;rendering allow_local_adjustment="false" 
                   use_globular_projection="false" /&gt;
    &lt;/global_map_config&gt;
  --&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- ****************** Spatial Data Cache Setting  ******************* --&gt;
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- Uncomment and modify the following to customize the spatial data cache
       used by the map visualization component. The default is 64 MB for in-memory cache.
 
       To disable the cache, set max_cache_size to 0.
 
       max_cache_size:  Maximum size of in-memory spatial cache of the map visualization component.
                        Size must be specified in megabytes (MB).
       report_stats:    If you would like to see periodic output of cache
                        statistics, set this attribute to true. The default
                        is false.
   --&gt;
 
  &lt;!--
    &lt;spatial_data_cache   max_cache_size="64"
                          report_stats="false" 
    /&gt;
  --&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- ****************** Custom WMS Capabilities Info ****************** --&gt;
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- Uncomment and modify the following tag if you want the map visualization component to
       use the following information in its getCapabilities response.
       Note: all attributes and elements of &lt;wms_config&gt; are optional.
  --&gt;
  &lt;!--
  &lt;wms_config host="www.my_corp.com" port="80"&gt;
    &lt;title&gt;
        WMS 1.1 interface for Oracle Map visualization component
    &lt;/title&gt;
    &lt;abstract&gt;
        This WMS service is provided through the map visualization component.
    &lt;/abstract&gt;
    &lt;keyword_list&gt;
       &lt;keyword&gt;bird&lt;/keyword&gt;
       &lt;keyword&gt;roadrunner&lt;/keyword&gt;
       &lt;keyword&gt;ambush&lt;/keyword&gt;
    &lt;/keyword_list&gt;    
    &lt;sdo_epsg_mapfile&gt;
      ../config/epsg_srids.properties
    &lt;/sdo_epsg_mapfile&gt;
  &lt;/wms_config&gt;
  --&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- **************** Custom Non-Spatial Data Provider **************** --&gt;
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- Uncomment and add as many custom non-spatial data provider as
       needed here, each in its own &lt;ns_data_provider&gt; element.
       You must provide the id and full class name here. Optionally you
       can also specify any number of global parameters, which the map visualization component
       will pass to the data provider implementation during initialization. 
       The name and value of each parameter is interpreted only by the 
       implementation.
  --&gt;
 
  &lt;!-- this is the default data provider that comes with the map visualization component; 
       refer to the documentation on how to use it.
 
  &lt;ns_data_provider
    id="defaultNSDP" 
    class="oracle.sdovis.NSDataProviderDefault" 
  /&gt;
  --&gt;
 
  &lt;!-- this is a sample NS data provider with prameters:
  &lt;ns_data_provider
    id="myProvider1" class="com.mycorp.bi.NSDataProviderImpl" &gt;
 
    &lt;parameters&gt;
      &lt;parameter name="myparam1" value="value1" /&gt;
      &lt;parameter name="p2"       value="v2"     /&gt;
    &lt;/parameters&gt;
 
  &lt;/ns_data_provider&gt;
  --&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- *******************  Map Tile Server Setting  ******************* --&gt;
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- Uncomment and modify the following to customize the map tile server. 
 
       &lt;tile_storage&gt; specifies the default root directory under which the 
       cached tile images are to be stored if the cache instance configuration
       does not specify the root directory for the cache instance. If the 
       default root directory is not set or not valid, the default root 
       direcotry will be set to be $MAPVIEWER_HOME/web/tilecache
       
          default_root_path:  The default root directory under which the cached 
                              tile images are stored. 
  --&gt;
 
  &lt;!--
     &lt;map_tile_server&gt;
       &lt;tile_storage default_root_path="/scratch/tilecachetest/"/&gt;
    &lt;/map_tile_server&gt;
  --&gt;
 
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- ******************** Predefined Data Sources  ******************** --&gt;
  &lt;!-- ****************************************************************** --&gt;
  &lt;!-- Uncomment and modify the following to predefine one or more data 
       sources.
       Note: You must precede the jdbc_password value with a '!' 
             (exclamation point), so that when the map visualization component starts the next
             time, it will encrypt and replace the clear text password. 
  --&gt;
 
  &lt;!-- 
  &lt;map_data_source name="mvdemo"
                   jdbc_host="elocation.example.com"
                   jdbc_sid="orcl"
                   jdbc_port="1521"
                   jdbc_user="scott"
                   jdbc_password="!<span class="italic">password</span>" 
                   jdbc_mode="thin"
                   number_of_mappers="3"
   /&gt;
   --&gt;
 
&lt;/MapperConfig&gt;
</pre><p>This map visualization component configuration topic includes the following subtopics.</p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-98388D57-FF15-41D3-9448-0158840F38AF">Specifying Logging Information</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-82293405-04DB-4226-9A33-FC5692AC44AB">Specifying Map File Storage and Life Cycle Information</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE">Specifying a Web Proxy</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-69148567-C00C-441A-BBA7-D42EB32879A7">Specifying Global Map Configuration Options</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781">Customizing the Spatial Data Cache</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-4C9589D6-82E4-46B4-8BA3-71E349330336">Specifying the Security Configuration</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-7586978A-C25A-4ED8-90EF-C085DF2B347A">Registering a Custom Spatial Provider</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-1F9F83CB-4D9B-42ED-A6ED-010E755D0C85">Registering Custom Nonspatial Data Providers</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-431C67C1-3566-4490-AF9E-647606A28073">Customizing SRS Mapping</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0">Customizing WMS GetCapabilities Responses</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-AD01DA31-9656-4F68-A4A8-34C41D443D41">Customizing WMTS GetCapabilities Responses</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-6334E96D-142C-4F17-AACB-5456ADF13C4A">Configuring the Map Tile Server for Oracle Maps</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">Defining Permanent Map Data Sources</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F">Configuring and Securing the Map Data Server for the HTML5 API</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" title="This topic introduces the map visualization component Administration page and some administrative and configuration tasks that you can perform, such as adding new data sources, managing map tile layers used by Oracle Maps, and setting logging levels.">Administering the Map Visualization Component</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9490"></a><a id="JIMPV9491"></a><a id="JIMPV9489"></a><div class="props_rev_3"><a id="GUID-98388D57-FF15-41D3-9448-0158840F38AF" name="GUID-98388D57-FF15-41D3-9448-0158840F38AF"></a><h5 id="JIMPV-GUID-98388D57-FF15-41D3-9448-0158840F38AF" class="sect5"><span class="enumeration_section">1.5.2.1 </span>Specifying Logging Information
                     </h5>
                     <div>
                        <p>The map visualization component provides a flexible logging mechanism to record runtime information and events. You can configure the granularity, volume, format, and destination of the log output. You can also configure the maximum size of log files as well as automatic log file rotation.</p>
                        <p>There are two ways to configure the map visualization component's logging: container-controlled logging, and using the <code class="codeph">&lt;logging&gt;</code> element in the configuration file.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-98388D57-FF15-41D3-9448-0158840F38AF__GUID-23A787E1-5BA7-4BB9-8D2A-3B5EB308684C">Container-Controlled Logging</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>If the <code class="codeph">&lt;logging&gt;</code> element in the <code class="codeph">mapViewerConfig.xml</code> file is commented out or missing, the map visualization component uses container-controlled logging, specifically using the following loggers:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">oracle.mapviewer.ws</code> for all web server (maps, tiles, features) messages
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.mapviewer.access</code> for all user access
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.mapviewer.sdovis</code> for all rendering (maps, themes, features) messages
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.mapviewer.webconsole</code> for all administrative console log messages
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-98388D57-FF15-41D3-9448-0158840F38AF__GUID-646E870F-2CE2-4C1C-B526-C8FFE4DB5989">Using the &lt;logging&gt; Element</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>If the <code class="codeph">&lt;logging&gt;</code> element in the <code class="codeph">mapViewerConfig.xml</code> file is in use (that is, if the <code class="codeph">&lt;logging&gt;</code> element is not commented out or missing), The map visualization component uses that information instead of using container-controlled logging. The <code class="codeph">&lt;logging&gt;</code> element can have the following attributes and subelements:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">console_log_level</code> attribute controls the levels of information that are recorded in the log, which in turn affect the log output volume. Set the <code class="codeph">console_log_level</code> attribute value to one of the following, listed from most restrictive logging to least restrictive logging: <code class="codeph">FATAL</code>, <code class="codeph">ERROR</code>, <code class="codeph">WARN</code>, <code class="codeph">INFO</code>, <code class="codeph">DEBUG</code>, and <code class="codeph">FINEST</code>. The <code class="codeph">FATAL</code> level outputs the least log information (only unrecoverable events are logged), and the other levels are progressively more inclusive, with the <code class="codeph">FINEST</code> level causing the most information to be logged. For production work, a level of <code class="codeph">WARN</code> or more restrictive (<code class="codeph">ERROR</code> or <code class="codeph">FATAL</code>) is recommended; however, for debugging you may want to set a less restrictive level.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">file_limit</code> attribute controls the maximum file size of a log file. The unit is Mb and the default value is 50 (that is, by the default value for the maximum log file size is 50Mb).
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">file_count</code> attribute determines the number of log files created. The files are rotated (that is, when the last log file reaches its maximum size, the first log file is reused). The default value is 10.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">&lt;logger&gt;</code> subelement specifies the log level for a particular logger.
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">&lt;log_output&gt;</code> subelement identifies output for the logging information. By default, log records are written to the system error console. You can change this to the system output console or to one or more files, or some combination. If you specify more than one device through multiple <code class="codeph">&lt;log_output&gt;</code> subelements, the logging records are sent to all devices, using the same logging level and attributes.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9492"></a><div class="props_rev_3"><a id="GUID-82293405-04DB-4226-9A33-FC5692AC44AB" name="GUID-82293405-04DB-4226-9A33-FC5692AC44AB"></a><h5 id="JIMPV-GUID-82293405-04DB-4226-9A33-FC5692AC44AB" class="sect5"><span class="enumeration_section">1.5.2.2 </span>Specifying Map File Storage and Life Cycle Information
                     </h5>
                     <div>
                        <p>Map image file information is specified in the <code class="codeph">&lt;save_images_at&gt;</code> element. By default, images are stored in the <span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/lbs/mapviewer/web/images</code> directory. You do not need to modify the <code class="codeph">&lt;save_images_at&gt;</code> element unless you want to specify a different directory for storing images. 
                        </p>
                        <p>A mapping client can request that the map visualization component send back the URL for an image file instead of the actual map image data, by setting the <code class="codeph">format</code> attribute of the <code class="codeph">&lt;map_request&gt;</code> element to <code class="codeph">GIF_URL</code> or <code class="codeph">PNG_URL</code>. In this case, the map visualization component saves the requested map image as a file on the host system where the map visualization component is running and sends a response containing the URL of the image file back to the map client.
                        </p>
                        <p>You can specify the following map image file information as attributes of the <code class="codeph">&lt;save_images_at&gt;</code> element:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">file_prefix</code> attribute identifies the map image file prefix. A map image file name will be a fixed file prefix followed by a serial number and the image type suffix. For example, if the map image file prefix is <code class="codeph">omsmap</code>, a possible GIF map image file could be <code class="codeph">omsmap1.gif</code>.
                              </p>
                              <p>Default value: <code class="codeph">file_prefix=omsmap</code></p>
                           </li>
                           <li>
                              <p>The <code class="codeph">url</code> attribute identifies the map image base URL, which points to the directory under which all map image files are saved on the map visualization component host. The map image URL sent to the mapping client is the map image base URL plus the map image file name. For example, if the map image base URL is <code class="codeph">http://dev04.example.com:1521/mapviewer/images</code>, the map image URL for <code class="codeph">omsmap1.gif </code>will be <code class="codeph">http://dev04.example.com:1521/mapviewer/images/omsmap1.gif</code>.
                              </p>
                              <p>Default value: <code class="codeph">url=</code><span class="italic"><code class="codeph">$HOST_URL</code></span><code class="codeph">/mapviewer/images</code></p>
                           </li>
                           <li>
                              <p>The <code class="codeph">path</code> attribute identifies the path of the directory where all map image files are saved on the map visualization component host system. This directory must be accessible by HTTP and must match the map image URL. Map image files saved in the directory specified by the <code class="codeph">path</code> attribute should be accessible from the URL specified by the <code class="codeph">url</code> attribute.
                              </p>
                              <p>However, if you are deploying the map visualization component to WebLogic Server, the default value for the <code class="codeph">path</code> attribute (<code class="codeph">../web/images</code>) is not correct. The path attribute value in this case should be <code class="codeph">../../images,</code> because the physical "images" directory is <code class="codeph">mapviewer.ear/web.war/images</code>; so using relative path, the value should be <code class="codeph">../../images</code> for the <code class="codeph">path</code> attribute to resolve to the physical directory.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">life</code> attribute specifies the number of minutes that a generated map image is guaranteed to stay on the file system before the image is deleted. If the <code class="codeph">life</code> attribute is specified, the <code class="codeph">recycle_interval</code> attribute controls how frequently the map visualization component checks for possible files to delete.
                              </p>
                              <p>Default: The map visualization component never deletes the generated map images.</p>
                           </li>
                           <li>
                              <p>The <code class="codeph">recycle_interval</code> attribute specifies the number of minutes between times when the map visualization component checks to see if it can delete any image files that have been on the file system longer than the number of minutes for the <code class="codeph">life</code> attribute value. 
                              </p>
                              <p>Default value: <code class="codeph">480</code> (8 hours)
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9495"></a><div class="props_rev_3"><a id="GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE" name="GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE"></a><h5 id="JIMPV-GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE" class="sect5"><span class="enumeration_section">1.5.2.3 </span>Specifying a Web Proxy
                     </h5>
                     <div>
                        <p>Sometimes the map visualization component server needs to make HTTP connections to external web servers, such as to obtain a background image through a URL or to contact an external WMS server to fetch its map images. In such cases, if there is a firewall between the map visualization component server and the target web server, you may need to specify the HTTP proxy information to the map visualization component so that it will not be blocked by the firewall. The following example specifies web proxy information:</p><pre class="oac_no_warn" dir="ltr">&lt;web_proxy host="www-proxy.mycorp.com" port="80" /&gt;
</pre><p>If the web proxy requires authentication, you can specify the <code class="codeph">user</code> and <code class="codeph">password</code> attributes. If the password value is preceded by the exclamation mark (<code class="codeph">!</code>) character, the password value will be encrypted on the first loading of the configuration file. For example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;web_proxy host="www-proxy.mycorp.com" port="80" user="uservalue" password="!pwdvalue" /&gt;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9496"></a><div class="props_rev_3"><a id="GUID-69148567-C00C-441A-BBA7-D42EB32879A7" name="GUID-69148567-C00C-441A-BBA7-D42EB32879A7"></a><h5 id="JIMPV-GUID-69148567-C00C-441A-BBA7-D42EB32879A7" class="sect5"><span class="enumeration_section">1.5.2.4 </span>Specifying Global Map Configuration Options
                     </h5>
                     <div>
                        <p>You can specify the following global "look and feel" options for the display of each map generated by the map visualization component:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Title</p>
                           </li>
                           <li>
                              <p>Note (such as a copyright statement or a footnote)</p>
                           </li>
                           <li>
                              <p>Logo (custom symbol or corporate logo)</p>
                           </li>
                           <li>
                              <p>Local geodetic data adjustment</p>
                           </li>
                           <li>
                              <p>Splitting geometries along the 180 meridian</p>
                           </li>
                        </ul>
                        <p>To specify any of these options, use the <code class="codeph">&lt;global_map_config&gt;</code> element. For example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;global_map_config&gt;
    &lt;note text="Copyright (c) 2009, Example Corporation"
              font="sans serif"
              position="SOUTH_EAST"/&gt;
    &lt;title  text="Map Courtesy of Example Corp."
              font="Serif"
              position="NORTH"/&gt;
    &lt;logo image_path="C:\\images\\a.gif"
              position="SOUTH_WEST"/&gt;

    &lt;rendering allow_local_adjustment="false"
               use_globular_projection="false"/&gt;
&lt;/global_map_config&gt;
</pre><p>Set the map title through the <code class="codeph">&lt;title&gt;</code> element of the <code class="codeph">&lt;global_map_config&gt;</code> element. You can also set the map title in an individual map request by specifying the <code class="codeph">title</code> attribute with the <code class="codeph">&lt;map_request&gt;</code> element, and in this case, the title in the map request is used instead of the global title in the map visualization component configuration file. Note the following information about the attributes of the <code class="codeph">&lt;title&gt;</code> element:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">text</code> attribute specifies the title string.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">font</code> attribute specifies a font. The font must exist on the system where the map visualization component is running.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">position</code> attribute provides a positioning hint to the map visualization component when determining where the map title will be drawn on a map. Possible values are: <code class="codeph">NORTH</code>, <code class="codeph">EAST</code>, <code class="codeph">SOUTH</code>, <code class="codeph">WEST</code>, <code class="codeph">NORTH_EAST</code>, <code class="codeph">SOUTH_EAST</code>, <code class="codeph">SOUTH_WEST</code>, <code class="codeph">NORTH_WEST</code>, and <code class="codeph">CENTER</code>.
                              </p>
                              <p>Default value: <code class="codeph">NORTH</code></p>
                           </li>
                        </ul>
                        <p>Set the map note through the <code class="codeph">&lt;note&gt;</code> element of the <code class="codeph">&lt;global_map_config&gt;</code> element. Note the following information about the attributes of the <code class="codeph">&lt;note&gt;</code> element:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">text</code> attribute specifies the note string.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">font</code> attribute specifies a font. The font must exist on the system where the map visualization component is running.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">position</code> attribute provides a positioning hint to the map visualization component when determining where the map note will be drawn on a map. Possible values are: <code class="codeph">NORTH</code>, <code class="codeph">EAST</code>, <code class="codeph">SOUTH</code>, <code class="codeph">WEST</code>, <code class="codeph">NORTH_EAST</code>, <code class="codeph">SOUTH_EAST</code>, <code class="codeph">SOUTH_WEST</code>, <code class="codeph">NORTH_WEST</code>, and <code class="codeph">CENTER</code>.
                              </p>
                              <p>Default value: <code class="codeph">SOUTH_EAST</code></p>
                           </li>
                        </ul>
                        <p>Set the map logo through the <code class="codeph">&lt;logo&gt;</code> element of the <code class="codeph">&lt;global_map_config&gt;</code> element. The map logo image must be in either JPEG or GIF format. The image can be stored in a local file system where the map visualization component instance will have access to it, or it can be obtained from the web by specifying its URL. To specify a map logo, uncomment the <code class="codeph">&lt;map_logo&gt;</code> element in the map visualization component configuration file and edit its attributes as needed.
                        </p>
                        <p>Note the following information about the attributes of the <code class="codeph">&lt;logo&gt;</code> element:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">image_path</code> attribute must specify a valid file path name, or a URL starting with <code class="codeph">http://</code>.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">position</code> attribute provides a positioning hint to the map visualization component when determining where the map logo will be drawn on a map. Possible values are: <code class="codeph">NORTH</code>, <code class="codeph">EAST</code>, <code class="codeph">SOUTH</code>, <code class="codeph">WEST</code>, <code class="codeph">NORTH_EAST</code>, <code class="codeph">SOUTH_EAST</code>, <code class="codeph">SOUTH_WEST</code>, <code class="codeph">NORTH_WEST</code>, and <code class="codeph">CENTER</code>.
                              </p>
                              <p>Default value: <code class="codeph">SOUTH_WEST</code></p>
                           </li>
                        </ul>
                        <p>If the logo image is obtained through a URL that is outside your firewall, you may need to set the web proxy in order for the map visualization component to retrieve the logo image. For information about specifying a web proxy, see <a href="introduction-to-map-visualization-component.html#GUID-A83F8DC5-3199-46BC-A5FB-BE0169F6D1AE">Specifying a Web Proxy</a>.
                        </p>
                        <p>If you also specify a map legend, be sure that its position is not the same as any position for a map title, note, or logo. (Map legends are explained in <a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D">Map Legend</a>. The default position for a map legend is <code class="codeph">SOUTH_WEST</code>.)
                        </p>
                        <p><a id="d2937e1515" class="indexterm-anchor"></a><a id="d2937e1519" class="indexterm-anchor"></a><a id="d2937e1521" class="indexterm-anchor"></a><a id="d2937e1523" class="indexterm-anchor"></a>To have the map visualization component automatically project geodetic data to a local non-geodetic coordinate system before displaying it if the map data window is less than 3 decimal degrees, specify <code class="codeph">allow_local_adjustment="true"</code> in the <code class="codeph">&lt;rendering&gt;</code> element.
                        </p>
                        <p><a id="d2937e1535" class="indexterm-anchor"></a><a id="d2937e1537" class="indexterm-anchor"></a><a id="d2937e1539" class="indexterm-anchor"></a>To have the map visualization component automatically apply a globular map projection (that is, a map projection suitable for viewing the world, and specifically the azimuthal equidistant projection for the map visualization component), specify <code class="codeph">use_globular_projection="true"</code> in the <code class="codeph">&lt;rendering&gt;</code> element. This option applies to geodetic data only.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9497"></a><div class="props_rev_3"><a id="GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781" name="GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781"></a><h5 id="JIMPV-GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781" class="sect5"><span class="enumeration_section">1.5.2.5 </span>Customizing the Spatial Data Cache
                     </h5>
                     <div>
                        <p>You can customize the in-memory cache that the map visualization component uses for spatial data by using the <code class="codeph">&lt;spatial_data_cache&gt;</code> element. For example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;spatial_data_cache   max_cache_size="64"
                      report_stats="true"
/&gt;
</pre><p>You can specify the following information as attributes of the <code class="codeph">&lt;spatial_data_cache&gt;</code> element:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">max_cache_size</code> attribute specifies the maximum number of megabytes (MB) of in-memory cache.
                              </p>
                              <p>Default value: <code class="codeph">64</code></p>
                           </li>
                           <li>
                              <p>The <code class="codeph">report_stats</code> attribute, if set to <code class="codeph">true</code>, instructs the map visualization component server to periodically (every 5 minutes) output cache statistics, such as the number of objects cached, the total size of cache objects, and data relating to the efficiency of the internal cache structure. The statistics are provided for each data source and for each predefined theme. They can help you to determine the optimal setting of the in-memory cache. For example, if you want to pin all geometry data for certain themes in the memory cache, you need to specify a <code class="codeph">max_cache_size</code> value that is large enough to accommodate these themes.
                              </p>
                              <p>Default value: <code class="codeph">false</code></p>
                           </li>
                        </ul>
                        <p>The spatial data cache is always enabled by default, even if the element is commented out in the configuration file. To completely disable the caching of spatial data, you must specify the <code class="codeph">max_cache_size</code> attribute value as <code class="codeph">0</code> (zero).
                        </p>
                        <div class="infoboxnote" id="GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781__GUID-04F5FF7F-2E82-4567-A7A4-2933636066D2">
                           <p class="notep1">Note:</p>
                           <p>The disk-based spatial cache, which was supported in the previous release, is no longer supported, because performance tests have shown that disk-based spatial caching was often less efficient than fetching spatial objects directly from the database when needed (that is, in cases where the cached objects frequently did not need to be retrieved again after caching).</p>
                        </div>
                        <p>For detailed information about the caching of predefined themes, see <a href="map-visualization-concepts.html#GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB">Caching of Predefined Themes</a>.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9498"></a><div class="props_rev_3"><a id="GUID-4C9589D6-82E4-46B4-8BA3-71E349330336" name="GUID-4C9589D6-82E4-46B4-8BA3-71E349330336"></a><h5 id="JIMPV-GUID-4C9589D6-82E4-46B4-8BA3-71E349330336" class="sect5"><span class="enumeration_section">1.5.2.6 </span>Specifying the Security Configuration
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">&lt;security_config&gt;</code> element to specify whether the map visualization component should reject <code class="codeph">&lt;info_request&gt;</code> elements in requests. An <code class="codeph">&lt;info_request&gt;</code> element is a type of request from a client that asks the map visualization component to execute a simple SQL statement and return the result rows in plain text or XML format. This request is often used by the map visualization component applications to identify features displayed on a map, or to run simple spatial search queries.
                        </p>
                        <p>However, if the map visualization component data source information is exposed, malicious attackers might be able to abuse this capability and obtain sensitive information. To prevent this from happening, you can make sure the map visualization component always connects to a database schema that has very limited access rights and hosts only non-sensitive information, and you can also reject all <code class="codeph">&lt;info_request&gt;</code> requests by specifying the <code class="codeph">&lt;security_config&gt;</code> element as follows:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;security_config&gt;
  &lt;disable_direct_info_request&gt; true &lt;/disable_direct_info_request&gt;
&lt;/security_config&gt;
</pre><p>Note, however, that this setting affects some map visualization component features. For example, the <code class="codeph">identify()</code> method of the map visualization component Java API will no longer work, and applications will need to implement their own <code class="codeph">identify()</code> method through other means.
                        </p>
                        <p>You can also define remote URLs that the map visualization component built-in proxy servlet is allowed to communicate with. Use commas to separate such URLs. You can end a URL with the * (asterisk) wildcard character to allow multiple URLs that start with a path. The following example specifies one remote URL:</p><pre class="oac_no_warn" dir="ltr">&lt;security-config&gt;
    
    &lt;proxy_enabled_hosts&gt;
      foo.com:8080/mapviewer 
    &lt;/proxy_enabled_hosts&gt;
    
&lt;/security-config&gt;
</pre><p>To facilitate the map visualization component's HTTPS (SSL) connection with external web sites that use self-signed certificates, you may register those certificates here. Use one entry for each server that requires an HTTPS connection. The following example shows an excerpt specifying one entry:</p><pre class="oac_no_warn" dir="ltr">&lt;security_config&gt;
    
    &lt;certificates&gt;
        &lt;entry&gt;
           &lt;host_name&gt;fooserver.com&lt;/host_name&gt;
           &lt;keystore_file&gt;/scratch/fooserver.jks&lt;/keystore_file&gt;
           &lt;key&gt;123456&lt;/key&gt;
        &lt;/entry&gt;
    &lt;/certificates&gt;
    
&lt;/security_config&gt;
</pre><p>The subelements for each certificate's <code class="codeph">&lt;entry&gt;</code> element are the following.
                        </p>
                        <p>The <code class="codeph">host_name</code> attribute specifies the IP address or domain name of the server that requires an HTTPS connection.
                        </p>
                        <p>The <code class="codeph">keystore_file</code> attribute specifies the file containing a single self-signed certificate. After you obtain the certificate (typically a <code class="codeph">.pem</code> file) from the server site, you can create a key store by using the Java <code class="codeph">keytool</code> command. For example:
                        </p><pre class="oac_no_warn" dir="ltr">keytool -import -file fooserver.pem -alias fooserver -keystore fooserver.jks
</pre><p>The <code class="codeph">key</code> attribute specifies the password that you provided when creating the key store file. (It is used to ensure the integrity of the key store file itself.)
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9500"></a><div class="props_rev_3"><a id="GUID-7586978A-C25A-4ED8-90EF-C085DF2B347A" name="GUID-7586978A-C25A-4ED8-90EF-C085DF2B347A"></a><h5 id="JIMPV-GUID-7586978A-C25A-4ED8-90EF-C085DF2B347A" class="sect5"><span class="enumeration_section">1.5.2.7 </span> Registering a Custom Spatial Provider
                     </h5>
                     <div>
                        <p>The map visualization component can render spatial data that is in an external (non-Oracle Spatial and Graph) native format, such as shapefile, if there is a spatial provider implementation registered for the format. For information about implementing an external spatial data provider (in connection with custom geometry themes), see <a href="map-visualization-concepts.html#GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42">Custom Geometry Themes</a>.
                        </p>
                        <p>To register an external spatial data provider, use the <code class="codeph">&lt;s_data_provider&gt;</code> element, as shown in the following example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;s_data_provider
  id="shapefileSDP"
  class="oracle.sdovis.ShapefileDataProvider"
  &gt;
  &lt;parameters&gt;
    &lt;parameter name="datadir" value="/temp/data" /&gt;
  &lt;/parameters&gt;
&lt;/s_data_provider&gt;
</pre><p>The <code class="codeph">class</code> attribute specifies the name of the class that implements the external spatial data provider.
                        </p>
                        <p>The <code class="codeph">&lt;parameters&gt;</code> element specifies a set of initialization parameters that are used by the data provider during its initialization process. In this example, the shapefile provider has a data directory (<code class="codeph">"datadir</code><code class="codeph">"</code>) parameter that points to directory where the map visualization component can look for the data.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9501"></a><div class="props_rev_3"><a id="GUID-1F9F83CB-4D9B-42ED-A6ED-010E755D0C85" name="GUID-1F9F83CB-4D9B-42ED-A6ED-010E755D0C85"></a><h5 id="JIMPV-GUID-1F9F83CB-4D9B-42ED-A6ED-010E755D0C85" class="sect5"><span class="enumeration_section">1.5.2.8 </span>Registering Custom Nonspatial Data Providers
                     </h5>
                     <div>
                        <p>When generating thematic map layers, the map visualization component can dynamically join nonspatial attribute data (such as sales for each region) that originates from an external source with the base geometries (boundaries of all the regions) that are stored in the database. For information about thematic mapping using external attribute data from nonspatial data providers, see <a href="map-visualization-concepts.html#GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C">Thematic Mapping Using External Attribute Data</a>.
                        </p>
                        <p>To register a nonspatial data provider, use the <code class="codeph">&lt;ns_data_provider&gt;</code> element, as shown in the following example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;ns_data_provider id="testProvider"
                  class="com.mycorp.GetSalesData" &gt;
  &lt;parameters&gt;
    &lt;parameter name="bi_database" value="stadb32.mycorp.com" /&gt;
    &lt;parameter name="sid" value="bidata"  /&gt;
  &lt;/parameters&gt;
&lt;/ns_data_provider&gt;
</pre><p>The <code class="codeph">id</code> attribute uniquely identifies a nonspatial data provider. Use this <code class="codeph">id</code> value in any map request that involves the provider.
                        </p>
                        <p>The <code class="codeph">class</code> attribute specifies the name of the class that implements the nonspatial data provider.
                        </p>
                        <p>The <code class="codeph">&lt;parameters&gt;</code> element specifies a set of initialization parameters that are used by the nonspatial data provider during its initialization process.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9502"></a><div class="props_rev_3"><a id="GUID-431C67C1-3566-4490-AF9E-647606A28073" name="GUID-431C67C1-3566-4490-AF9E-647606A28073"></a><h5 id="JIMPV-GUID-431C67C1-3566-4490-AF9E-647606A28073" class="sect5"><span class="enumeration_section">1.5.2.9 </span>Customizing SRS Mapping
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">&lt;srs_mapping&gt;</code> element to specify an SDO to EPSG SRID mapping file, which define mappings between Oracle Spatial and Graph SDO_SRID values and EPSG codes. As explained in <a href="ogc-wms-support-map-visualzation-component.html#GUID-D08A8C06-CFF8-4F18-BAC7-072422481DAD">SDO to EPSG SRID Mapping File</a>, each line in the specified mapping file must contain an SDO_SRID value and the corresponding EPSG code. The <code class="codeph">&lt;srs_mapping&gt;</code> element can be used with WMS and WFS themes.
                        </p>
                        <p>The following example uses the <code class="codeph">&lt;srs_mapping&gt;</code> element to specify an SDO to EPSG SRID mapping file:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;srs_mapping&gt;
  &lt;sdo_epsg_mapfile&gt;
    ../config/epsg_srids.properties
  &lt;/sdo_epsg_mapfile&gt;
&lt;/srs_mapping&gt;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9503"></a><div class="props_rev_3"><a id="GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0" name="GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0"></a><h5 id="JIMPV-GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0" class="sect5"><span class="enumeration_section">1.5.2.10 </span>Customizing WMS GetCapabilities Responses
                     </h5>
                     <div>
                        <p>The map visualization component can be used as an Open Geospatial Consortium WMS (Web Map Server) 1.1.1 compliant server. As such, a WMS client can send the map visualization component the <code class="codeph">GetCapabilities</code> request. In response, the map visualization component will send back the list of themes that it hosts and other important information, such as the data provider's name and a list of keywords that might of interest to the requesting client.
                        </p>
                        <div class="infoboxnote" id="GUID-5DB2D2A6-702E-4E0B-9A4A-4B170588DCF0__GUID-D47C3DD0-8A66-4AF3-8368-C6E065A9839D">
                           <p class="notep1">Note:</p>
                           <p>There is a separate WMS configuration file (<code class="codeph">wmsConfig.xml</code>) that contains more information than is in the <code class="codeph">&lt;wms_config&gt;</code> element in the map visualization component configuration file. It is recommended that you define any custom WMS configuration parameters in this separate WMS configuration file; any settings there will override any conflicting settings in the <code class="codeph">&lt;wms_config&gt;</code> element in the map visualization component configuration file.
                           </p>
                           <p>For more information about the wmsXonfig.xml file, see <a href="ogc-wms-support-map-visualzation-component.html#GUID-0C7C5BE0-81F4-4F94-B2BB-74DA58476745">Customizing GetCapabilities Responses: Additional Options</a>.
                           </p>
                        </div>
                        <p>You can use the <code class="codeph">&lt;wms_config&gt;</code> element to customize the descriptive information sent back to the client as part of the <code class="codeph">GetCapabilities</code> response, as shown in the following example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;wms_config host="www.my_corp.com" port="80"
            protocol="http" default_datasource="dsrc1"
            public_datasources="dsrc1,dsrc2"&gt;
  &lt;title&gt;
    WMS 1.1 interface for Oracle Application Server 10g MapViewer
  &lt;/title&gt;
  &lt;abstract&gt;
    This WMS service is provided through Oracle MapViewer.
  &lt;/abstract&gt;
  &lt;keyword_list&gt;
    &lt;keyword&gt;bird&lt;/keyword&gt;
    &lt;keyword&gt;roadrunner&lt;/keyword&gt;
    &lt;keyword&gt;ambush&lt;/keyword&gt;
  &lt;/keyword_list&gt;
  &lt;sdo_epsg_mapfile&gt;
    ../config/epsg_srids.properties
  &lt;/sdo_epsg_mapfile&gt;
&lt;/wms_config&gt;
</pre><p>The <code class="codeph">host</code> attribute specifies the host part of the service request URL that the client should use for future WMS requests made to this map visualization component server.
                        </p>
                        <p>The <code class="codeph">port</code> attribute specifies the port part of the service request URL that the client should use for future WMS requests made to this map visualization component server.
                        </p>
                        <p>The <code class="codeph">protocol</code> attribute specifies the protocol part of the service request URL that the client should use for future WMS requests made to this map visualization component server.
                        </p>
                        <p>The <code class="codeph">default_datasource</code> attribute specifies the base data source used to retrieve the capabilities response. If this attribute is not defined, the data source <code class="codeph">WMS</code> is used, and that data source must exist in this map visualization component server.
                        </p>
                        <p>The <code class="codeph">public_datasources</code> attribute specifies which data source contents are to be listed in the GetCapabilities response. If this attribute is not defined, all data source contents will be listed.
                        </p>
                        <p>The <code class="codeph">&lt;title&gt;</code> element specifies the service title to be included as part of the response.
                        </p>
                        <p>The <code class="codeph">&lt;abstract&gt;</code> element specifies the abstract to be included as part of the response.
                        </p>
                        <p>The <code class="codeph">&lt;keyword_list&gt;</code> element specifies a list of keywords that best describe the types of layers served by this map visualization component server.
                        </p>
                        <p>The <code class="codeph">&lt;sdo_epsg_mapfile&gt;</code> element specifies a text file that defines mappings from Oracle Spatial and Graph (SDO) SRID values to the corresponding EPSG SRID values that are typically used in most WMS requests and responses. For information about this mapping file, see <a href="ogc-wms-support-map-visualzation-component.html#GUID-D08A8C06-CFF8-4F18-BAC7-072422481DAD">SDO to EPSG SRID Mapping File</a>.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9990"></a><div class="props_rev_3"><a id="GUID-AD01DA31-9656-4F68-A4A8-34C41D443D41" name="GUID-AD01DA31-9656-4F68-A4A8-34C41D443D41"></a><h5 id="JIMPV-GUID-AD01DA31-9656-4F68-A4A8-34C41D443D41" class="sect5"><span class="enumeration_section">1.5.2.11 </span>Customizing WMTS GetCapabilities Responses
                     </h5>
                     <div>
                        <p>The map visualization component can be used as an Open Geospatial Consortium WMTS (Web Map Tile Service) 1.0.0 compliant server, enabling tile layers defined in the USER_SDO_CACHED_MAPS metadata view to be retrieved through WMTS requests. A WMTS client can send to the map visualization component the <code class="codeph">GetCapabilities</code> request. In response, the map visualization component will send back the list of tile layers that it hosts and other important information, such as the data provider's name and a list of keywords that might of interest to the requesting client. You can edit the WMTS configuration file, which is stored in the same folder as that for <code class="codeph">mapViewerConfig.xml</code> with a name of <code class="codeph">wmtsConfig.xml</code>, to provide such customized information.
                        </p>
                        <p>In the <code class="codeph">wmtsConfig.xml</code> file, you can use the <code class="codeph">&lt;wmts_config&gt;</code> element to customize the descriptive information sent back to the client as part of the <code class="codeph">GetCapabilities</code> response, as shown in the following example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;wmts_config&gt;
     &lt;public_datasources&gt;
        &lt;public_datasource name="MVDEMO" include_all_tile_layers="true"/&gt;
        &lt;public_datasource name="ELOCATION"&gt;
          &lt;tile_layers&gt;
            &lt;tile_layer name="WORLD_MAP"/&gt;
          &lt;/tile_layers&gt;
        &lt;/public_datasource&gt; 
    &lt;/public_datasources&gt;
    &lt;sdo_epsg_mapfile&gt;
      ../config/epsg_srid.properties
    &lt;/sdo_epsg_mapfile&gt;
   &lt;ServiceAttributes&gt;              
    &lt;ServiceIdentification&gt; 
        &lt;Title&gt;Web Map Tile Service by myCorp&lt;/Title&gt; 
        &lt;Abstract&gt; U.S. maps for state and county boundaries and big cities&lt;/Abstract&gt;
        &lt;Keywords&gt; 
           &lt;Keyword&gt;Maps,U.S. State Boundaries,Cities&lt;/Keyword&gt;
        &lt;/Keywords&gt; 
    &lt;/ServiceIdentification&gt;     
    &lt;ServiceProvider&gt; 
      &lt;ProviderName&gt;provider's name&lt;/ProviderName&gt; 
        &lt;ProviderSite url="http://www.myCorp.com/mySite"/&gt; 
    &lt;/ServiceProvider&gt; 
  &lt;/ServiceAttributes&gt;
&lt;/wmts_config&gt;
</pre><p>The <code class="codeph">&lt;public_datasources&gt;</code> element can contain <code class="codeph">&lt;public_datasource</code>&gt; subelements, which specify which data sources' tile layers to list in the WMTS GetCapabilities response. If this <code class="codeph">&lt;public_datasources&gt;</code> element is not defined, all data sources' tile layers will be listed; if this element is defined but contains no <code class="codeph">&lt;public_datasource&gt;</code> subelement, then no tile layers from any data source will be listed in the response. 
                        </p>
                        <p>The <code class="codeph">&lt;public_datasource&gt;</code> element must contain a <code class="codeph">name</code> attribute, which indicates the name of the data source.
                        </p>
                        <p>The <code class="codeph">include_all_tile_layers</code> attribute is optional, and the default is <code class="codeph">false</code>. When set to <code class="codeph">true</code>, it indicates that all tile layers in that data source are to be listed in the response.
                        </p>
                        <p>The <code class="codeph">&lt;tile_layer&gt;</code> element must contain a <code class="codeph">name</code> attribute, which indicates the name of the tile layer to be included in the response from the data source defined in its parent element. 
                        </p>
                        <p>The <code class="codeph">&lt;sdo_epsg_mapfile&gt;</code> element specifies a text file that defines mappings from Oracle Spatial and Graph (SDO) SRID values to the corresponding EPSG SRID values that are typically used in most WMTS requests and responses. For information about this mapping file, see <a href="ogc-wms-support-map-visualzation-component.html#GUID-D08A8C06-CFF8-4F18-BAC7-072422481DAD">SDO to EPSG SRID Mapping File</a>.
                        </p>
                        <p>The <code class="codeph">&lt;Title&gt;</code> element specifies the service title to be included as part of the response.
                        </p>
                        <p>The <code class="codeph">&lt;Abstract&gt;</code> element specifies the abstract to be included as part of the response.
                        </p>
                        <p>The <code class="codeph">&lt;Keywords&gt;</code> element specifies a collection of keywords (from its <code class="codeph">&lt;Keyword&gt;</code> subelements) that best describe the types of layers served by this map visualization component server.
                        </p>
                        <p>More information can be found in the comments in the <code class="codeph">wmtsConfig.xml</code> file.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9504"></a><div class="props_rev_3"><a id="GUID-6334E96D-142C-4F17-AACB-5456ADF13C4A" name="GUID-6334E96D-142C-4F17-AACB-5456ADF13C4A"></a><h5 id="JIMPV-GUID-6334E96D-142C-4F17-AACB-5456ADF13C4A" class="sect5"><span class="enumeration_section">1.5.2.12 </span>Configuring the Map Tile Server for Oracle Maps
                     </h5>
                     <div>
                        <p>The Oracle Maps feature of the map visualization component can pre-generate base map image tiles and cache them through the map tile server. You can use the &lt;map_tile_server&gt; element to provide configuration information to the map tile server, such as default location for map tile file storage, and logging information, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">&lt;map_tile_server&gt;
   &lt;tile_storage default_root_path="/scratch/tilecache/" /&gt;
   &lt;logging log_level="finest" log_thread_name="false" log_time="true"&gt;
      &lt;log_output name="System.err"/&gt;
   &lt;/logging&gt;
&lt;/map_tile_server&gt;
</pre><p>The <code class="codeph">&lt;tile_storage&gt;</code> element specifies the default root directory where all map image tiles generated by this map visualization component server will be stored.
                        </p>
                        <p>The <code class="codeph">&lt;logging&gt;</code> element specifies logging information specific to the map tile server.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9505"></a><div class="props_rev_3"><a id="GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342" name="GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342"></a><h5 id="JIMPV-GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342" class="sect5"><span class="enumeration_section">1.5.2.13 </span>Defining Permanent Map Data Sources
                     </h5>
                     <div>
                        <p>Every map request must have a data source attribute that specifies a map data source, which is a database user with geospatial data. You can predefine available map data sources by using the <code class="codeph">&lt;map_data_source&gt;</code> element. For example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name="mvdemo"
                 jdbc_host="mapsrus.example.com"
                 jdbc_sid="orcl"
                 jdbc_port="1521"
                 jdbc_user="scott"
                 jdbc_password="!<span class="italic">password</span>"
                 jdbc_mode="thin"
                 number_of_mappers="5"
                 allow_jdbc_theme_based_foi="true"
                 plsql_package="web_user_info"
/&gt;
</pre><p>You can specify the following information as attributes of the <code class="codeph">&lt;map_data_source&gt;</code> element:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">name</code> attribute specifies a unique data source name to the map visualization component. You must specify the data source name in all map requests that identify a data source.
                              </p>
                           </li>
                           <li>
                              <p>You must specify all necessary connection information, or a container data source name, or a net service name (TNS name). That is, you must specify only one of the following, which are described in this section: <code class="codeph">jdbc_host</code>, <code class="codeph">jdbc_sid</code>, <code class="codeph">jdbc_port</code>, and <code class="codeph">jdbc_user</code>; or <code class="codeph">container_ds</code>; or <code class="codeph">jdbc_tns_name</code>.
                              </p>
                              <p>If the database on which you defined a data source on is restarted, and if the data source is created from <code class="codeph">jdbc_host</code>/<code class="codeph">jdbc_sid</code>/<code class="codeph">jdbc_port</code> or <code class="codeph">jdbc_tns_name</code> attributes, The map visualization component will resume normal operation (for example responding to map requests with properly created maps) as soon as the database is back online.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">jdbc_host</code>, <code class="codeph">jdbc_sid</code>, <code class="codeph">jdbc_port</code>, and <code class="codeph">jdbc_user</code> attributes specify the database connection information and the database user name. (As an alternative to specifying these attributes and the <code class="codeph">jdbc_password</code> and <code class="codeph">jdbc_mode</code> attributes, you can specify the <code class="codeph">container_ds</code> attribute, described later in this section.)
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">jdbc_password</code> attribute specifies the database user's login password. It must be prefixed with an exclamation point (!) when you specify the password for the first time. When the map visualization component next restarts, it will automatically obfuscate and replace the clear text password.
                              </p>
                              <p>The map visualization component does not change this password string in any way; no conversion to upper or lower case is performed. If the database uses case-sensitive passwords, the specified password must exactly match the password in the database.</p>
                           </li>
                           <li>
                              <p>The <code class="codeph">jdbc_mode</code> attribute tells the map visualization component which Oracle JDBC driver to use when connecting to the database. The default is <code class="codeph">thin</code> (for the "thin" driver). The other possible value is <code class="codeph">oci8</code>, which requires that you also have the Oracle Database client installed on the same host on which the map visualization component is running.
                              </p>
                           </li>
                           <li>
                              <p><a id="d2937e2402" class="indexterm-anchor"></a><a id="d2937e2404" class="indexterm-anchor"></a><a id="d2937e2408" class="indexterm-anchor"></a>The <code class="codeph">container_ds</code> attribute lets you specify the Java EE container name (JNDI name) instead of specifying the <code class="codeph">jdbc_host</code>, <code class="codeph">jdbc_sid</code>, <code class="codeph">jdbc_port</code>, <code class="codeph">jdbc_user</code>, <code class="codeph">jdbc_password</code>, and <code class="codeph">jdbc_mode</code> attributes. For example, assume you created a JDBC data source and gave it a JNDI name of <code class="codeph">jdbc/OracleDS</code>. You can then define the permanent map visualization component data source as follows:
                              </p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name="mvdemo"
                 container_ds="jdbc/OracleDS"
                 number_of_mappers="5"
/&gt;
</pre><p>If you use the <code class="codeph">container_ds</code> attribute, and if you want the map visualization component to resume normal operation (for example, responding to map requests with properly created maps) automatically after the database on which you defined a data source is restarted, you must instruct the container data source to always validate a connection before it can be returned to the application.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">jdbc_tns_name</code> attribute identifies a net service name that is defined in the <code class="codeph">tnsnames.ora</code> file.
                              </p>
                           </li>
                           <li>
                              <p><a id="d2937e2454" class="indexterm-anchor"></a><a id="d2937e2456" class="indexterm-anchor"></a><a id="d2937e2460" class="indexterm-anchor"></a>The <code class="codeph">number_of_mappers</code> attribute identifies the maximum number of map renderers available (and thus the maximum number of map requests that the map visualization component can process in parallel for the data source) for this data source. Any unprocessed map requests are queued and eventually processed. For example, if the value is 3, the map visualization component will be able to process at most three mapping requests concurrently. If a fourth map request comes while three requests are being processed, it will wait until the map visualization component has finished processing one of the current requests.
                              </p>
                              <p>Specifying a large <code class="codeph">number_of_mappers</code> value (such as 50 or 100) can improve the overall throughput, but it will also increase runtime memory and CPU usage at times of peak loads, since the map visualization component will attempt to process more concurrent map requests. It will also increase the number of active database sessions. Therefore, be sure that you do not set too large a number for this attribute.
                              </p>
                              <div class="infoboxnote" id="GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342__GUID-7016182E-2E33-4A46-850F-0210ED925FCB">
                                 <p class="notep1">Note:</p>
                                 <p>The obsolete <code class="codeph">max_connections</code> attribute no longer affects rendering and is ignored. The <code class="codeph">number_of_mappers</code> attribute value affects the actual maximum number of database connections or sessions open for the data source at any given time. 
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p><a id="d2937e2484" class="indexterm-anchor"></a><a id="d2937e2486" class="indexterm-anchor"></a><a id="d2937e2490" class="indexterm-anchor"></a><a id="d2937e2494" class="indexterm-anchor"></a>The <code class="codeph">allow_jdbc_theme_based_foi</code> attribute lets you specify whether to allow JDBC theme-based FOI requests to be performed against this data source. A JDBC theme-based FOI request is based on a dynamic SQL query constructed by the JavaScript client application.
                              </p>
                              <p>By default, such FOI requests are not allowed unless you set this attribute to <code class="codeph">true</code>. Due to the potential security threat, JDBC theme-based FOI requests should be used with caution. You should only allow JDBC theme-based FOI requests on database connections that are granted very low privilege and contain only data that you want to expose.
                              </p>
                           </li>
                           <li>
                              <p><a id="d2937e2507" class="indexterm-anchor"></a><a id="d2937e2509" class="indexterm-anchor"></a>The <code class="codeph">plsql_package</code> attribute lets you specify a PL/SQL package to be used for secure map rendering, as explained in <a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" title="You can implement secure map rendering based on a web user's identity.">Secure Map Rendering</a>.
                              </p>
                           </li>
                           <li>
                              <p><a id="d2937e2525" class="indexterm-anchor"></a><a id="d2937e2527" class="indexterm-anchor"></a>The <code class="codeph">web_user_type</code> attribute (not shown in the example in this section) lets you specify the source for the authenticated user's name. It is especially useful for getting the authenticated user's name from a cookie, in conjunction with specifying a PL/SQL package to be used for secure map rendering. For more information about the <code class="codeph">web_user_type</code> attribute and an example of its use, see <a href="introduction-to-map-visualization-component.html#GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2">Getting the User Name from a Cookie</a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9984"></a><a id="JIMPV9983"></a><div class="props_rev_3"><a id="GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F" name="GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F"></a><h5 id="JIMPV-GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F" class="sect5"><span class="enumeration_section">1.5.2.14 </span>Configuring and Securing the Map Data Server for the HTML5 API
                     </h5>
                     <div>
                        <p>Themes can be streamed by default, and the only way to protect them is by adding authentication, that is, by adding a security constraint in the map visualization component <code class="codeph">web.xml</code> file and by configuring the <code class="codeph">&lt;mds_config&gt;</code> element in the configuration file to authorize access to various themes.
                        </p>
                        <p>The Map Data Server (MDS) server component facilitates the streaming of geospatial data in vector format to the Oracle Maps API (described in <a href="oracle-maps.html#GUID-0D5BC30A-40AC-4347-89FA-E95D44918E32" title="The Oracle Maps JavaScript client is a browser-based map visualization engine that works on top of the map tile server and that uses HTML5 technology.">Oracle Maps JavaScript API</a>). The MDS provides a RESTful API for browser clients to request the vector data of any predefined or dynamic (JDBC) theme from a map visualization component server instance. The only way to secure or protect the access to this service is by adding a security constraint in the map visualization component <code class="codeph">web.xml</code> deployment file, as in the following example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;security-constraint&gt;
&lt;web-resource-collection&gt;
. . .
&lt;url-pattern&gt;/dataserver/*&lt;/url-pattern&gt;
&lt;/web-resource-collection&gt;
&lt;auth-constraint&gt;
&lt;role-name&gt;map_admin_role&lt;/role-name&gt;
&lt;/auth-constraint&gt;
&lt;/security-constraint&gt;
</pre><p>The preceding example adds a security constraint to any incoming URL with the relative path <code class="codeph">/dataserver/</code> in it. Because the MDS servlet responds only to URLs with <code class="codeph">/dataserver</code> in its path, this constraint effectively protects all access to the MDS. This means that any application or web client accessing the Map Data Server will require proper authentication, and only those users with the role <code class="codeph">map_admin_role</code> will be granted access. (For more information on how to secure a Java EE servlet such as MDS, check the Java EE and WebLogic Server documentation.)
                        </p>
                        <p>Access to any predefined or dynamic (JDBC) theme's vector data is blocked by default, regardless of whether you added a security constraint on the MDS URL patterns. In other words, for example, even if the <code class="codeph">/dataserver/*</code> URLs are protected and an HTML5 application has passed authentication, it still cannot access a theme's data without proper authorization. When an Oracle Maps HTML5 application attempts to load or display a theme without proper authorization, the error message typically contains a statement like "This data source does not allow streaming access."
                        </p>
                        <p>To grant access to a data source's themes, you must explicitly configure the <code class="codeph">&lt;mds_config&gt;</code> element in the configuration file.
                        </p>
                        <div class="example" id="GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F__BEHCIFCF">
                           <p class="titleinexample">Example 1-2 Configuring the mds.xml File</p>
                           <p><a href="introduction-to-map-visualization-component.html#GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F__BEHCIFCF">Example 1-2</a> shows an <code class="codeph">&lt;mds_config&gt;</code> element in which two map visualization component data sources, <code class="codeph">mvdemo</code> and <code class="codeph">my-data</code>, are configured such that certain themes of theirs can be streamed to clients.
                           </p><pre class="oac_no_warn" dir="ltr">&lt;mds_config&gt;
 
&lt;data_source name="mvdemo"&gt;
&lt;allow_predefined_themes&gt;true&lt;/allow_predefined_themes&gt;
&lt;deny&gt;my_secret_theme&lt;/deny&gt;
&lt;allow_dynamic_themes&gt;true&lt;/allow_dynamic_themes&gt;
&lt;/data_source&gt;
 
&lt;data_source name="my-data"&gt;
&lt;allow_predefined_themes&gt;false&lt;/allow_predefined_themes&gt;
&lt;allow&gt;
&lt;theme&gt;public_points_theme&lt;/theme&gt;
&lt;theme&gt;office_locations*&lt;/theme&gt;
&lt;/allow&gt;
&lt;allow_dynamic_themes&gt;false&lt;/allow_dynamic_themes&gt;
&lt;/data_source&gt;
 
&lt;/mds_config&gt;
</pre><p>In <a href="introduction-to-map-visualization-component.html#GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F__BEHCIFCF">Example 1-2</a>:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Each data source authorizes its themes in its own <code class="codeph">&lt;data_source&gt;</code> element. With this element, the two tags <code class="codeph">&lt;allow_predefined_themes&gt;</code> and <code class="codeph">&lt;allow_dynamic_themes&gt;</code> provide the overall or default access control on these two types of themes. Note that for dynamic/JDBC themes, you can also disable them in the data source definition (in the main <code class="codeph">mapViewerConfig.xml</code> file). If a dynamic theme is disabled in the data source definition, then that setting always has precedence (regardless of how it is set in the <code class="codeph">&lt;mds_config&gt;</code> element.).
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">mvdemo</code> data source grants all clients with access to both predefined and dynamic (JDBC) theme vector data by default; this is a reasonable choice given the nature of the data (data from publicly available samples). An exception is added, however, for the <code class="codeph">my_secret_theme</code> theme, through the use of the <code class="codeph">&lt;deny&gt;</code> tag.
                                 </p>
                              </li>
                              <li>
                                 <p>For the <code class="codeph">my-data</code> data source, access to both types of themes is blocked by default. In this case exceptions (to open certain themes to streaming) are added through the <code class="codeph">&lt;allow&gt;</code> tag. In both <code class="codeph">&lt;allow&gt;</code> and <code class="codeph">&lt;deny&gt;</code> tags, the theme names or patterns are case insensitive, and the wild card character * (asterisk) can be used to match multiple themes. The example uses the <code class="codeph">&lt;allow&gt;</code> tag to open the theme <code class="codeph">public_points_theme</code> and all the themes whose name starts with <code class="codeph">office_locations</code> to streaming, while all other themes are blocked. No dynamic/SQL theme is allowed on this data source.
                                 </p>
                              </li>
                           </ul>
                           <p>If you modify the <code class="codeph">&lt;mds_config&gt;</code> element, you must restart the deployed map visualization component instance for the modifications to take effect.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-15A469ED-6429-4ECD-B636-D27CD58C2283">Configuring the Map Visualization Component</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9506"></a><div class="props_rev_3"><a id="GUID-28AA44A7-5021-43C5-84A9-730C945A8760" name="GUID-28AA44A7-5021-43C5-84A9-730C945A8760"></a><h4 id="JIMPV-GUID-28AA44A7-5021-43C5-84A9-730C945A8760" class="sect4"><span class="enumeration_section">1.5.3 </span>Performing Map Visualizer Administrative Tasks
                  </h4>
                  <div>
                     <p>Besides knowing how to configure the map visualizer, you should also know how to perform other important administrative tasks using the map visualizer administration page. To log in to this page, see the instructions in <a href="introduction-to-map-visualization-component.html#GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC">Logging in to the Map Visualization Component Administration Page</a>.
                     </p>
                     <p>The tasks you can do as a map visualizer administrator include the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Editing the configuration file</p>
                           <p>Click <span class="bold">Configuration</span>.
                           </p>
                        </li>
                        <li>
                           <p>Refreshing the list of data sources</p>
                           <p>Click <span class="bold">Admin</span> to refresh the list automatically, or click <span class="bold">Refresh</span> to perform a manual refresh.
                           </p>
                        </li>
                        <li>
                           <p>Clearing cached definitions of map visualizer styles, themes, and base maps</p>
                           <p>Click <span class="bold">Admin</span>, select the data source, then click <span class="bold">Purge Cached Metadata</span>.
                           </p>
                        </li>
                        <li>
                           <p>Clearing cached geometry data for predefined themes</p>
                           <p>Click <span class="bold">Admin</span>, then <span class="bold">Geometry Cache</span>, then <span class="bold">Purge</span> for a selected theme or all themes.
                           </p>
                        </li>
                        <li>
                           <p>Creating map tile layers for Oracle Maps</p>
                           <p>Click <span class="bold">Admin</span>, then <span class="bold">Create Tile Layer</span>, select the tile layer type, and click <span class="bold">Next</span>.
                           </p>
                           <p><span class="bold">Internal</span> map source: Enter the map cache name, then select the data source and base map. Also define parameters for cache storage (where tiles will be stored), zoom levels, minimum and maximum scale, spatial reference ID (SRID), data bounding box (MBR), and tile size and format. Click <span class="bold">Next</span> and <span class="bold">Submit</span> to create the map tile layer. You can also define the map cache properties in XML by clicking XML.
                           </p>
                           <p><span class="bold">External</span> map source: Enter the map cache name, then select the data source. To provide access to the external source, define parameters such as the map service URL, the request method (GET or POST), the proxy information (if needed), the java adapter class name and its location on the server, and additional adapter properties. Also define parameters for cache storage (where tiles will be stored), zoom levels, minimum and maximum scale, spatial reference ID (SRID), data bounding box (MBR), and tile size and format. Click <span class="bold">Next</span> and <span class="bold">Submit</span> to create the map tile layer. You can also define the map cache properties in XML by clicking XML.
                           </p>
                           <p>For other types of tile layers (Oracle Maps, Here, Google, TomTom), follow similar steps.</p>
                        </li>
                        <li>
                           <p>Managing map tile layers for Oracle Maps</p>
                           <p>Click <span class="bold">Admin</span>, then <span class="bold">Manage Tile Layers</span>. Then do any of the following:
                           </p>
                           <p>To manually refresh the tile layer list, click <span class="bold">Refresh</span>.
                           </p>
                           <p>To edit a map tile layer, select the row for that layer and click <span class="bold">Edit/View Details</span>.
                           </p>
                           <p>To view and manage map tile layer, select the row for that layer and click <span class="bold">View Map/Manage Tiles</span>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-9BD48DAB-B1D2-42F0-A6A0-F0E1977277E0" title="This topic introduces the map visualization component Administration page and some administrative and configuration tasks that you can perform, such as adding new data sources, managing map tile layers used by Oracle Maps, and setting logging levels.">Administering the Map Visualization Component</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9507"></a><div class="props_rev_3"><a id="GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" name="GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15"></a><h3 id="JIMPV-GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" class="sect3"><span class="enumeration_section">1.6 </span>Oracle Real Application Clusters and the Map Visualizer
               </h3>
               <div>
                  <p>When the database is an Oracle Real Application Cluster (Oracle RAC), you can connect to the Oracle RAC database using either of the following options.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Let the map visualizer connect to the database through the data source of the Java EE container, such as WebLogic Server 12<span class="italic">c</span>.
                        </p>
                        <p>Create a JDBC data source that connects to the Oracle RAC database, as explained in <a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">Creating a Container Oracle RAC Data Source for the Map Visualizer Server</a>. The data source can then be used by the map visualizer and other applications through JNDI lookup.
                        </p>
                        <p>This option is often used at sites where administrators create and monitor these kinds of connections, and/or where connections are used by multiple applications. This option also hides the database connection details (such as database user name and password) from the applications.</p>
                     </li>
                     <li>
                        <p>Enable the map visualizer to connect to the database service directly.</p>
                        <p>Define a map visualizer data source directly using the Oracle RAC service name (not the database SID), as explained in <a href="introduction-to-map-visualization-component.html#GUID-1AD38B02-674B-44DA-8536-7A4D11812C00">Creating a Map Visualizer Data Source Using the Oracle RAC Service Name</a>.
                        </p>
                        <p>This option is simpler to implement than the preceding option.</p>
                     </li>
                  </ul>
                  <p>After doing either of the these options, restart the map visualizer, as explained in <a href="introduction-to-map-visualization-component.html#GUID-9B0D09B9-8867-486E-A575-3853C7134527">Restarting the Map Visualizer</a>.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">Creating a Container Oracle RAC Data Source for the Map Visualizer Server</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-1AD38B02-674B-44DA-8536-7A4D11812C00">Creating a Map Visualizer Data Source Using the Oracle RAC Service Name</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-9B0D09B9-8867-486E-A575-3853C7134527">Restarting the Map Visualizer</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">Introduction to the Map Visualization Component</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9508"></a><div class="props_rev_3"><a id="GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43" name="GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43"></a><h4 id="JIMPV-GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43" class="sect4"><span class="enumeration_section">1.6.1 </span>Creating a Container Oracle RAC Data Source for the Map Visualizer Server
                  </h4>
                  <div>
                     <p>You can create a JDBC data source in the map visualizer container for Oracle RAC, and then use that container data source in the map visualizer configuration file, as follows:</p>
                     <ol>
                        <li>
                           <p><a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD">Create a Container Oracle RAC Data Source</a>.
                           </p>
                        </li>
                        <li>
                           <p><a href="introduction-to-map-visualization-component.html#GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485">Create a Map Visualizer Data Source Using a Container Data Source</a>.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD">Create a Container Oracle RAC Data Source</a><br></li>
                        <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485">Create a Map Visualizer Data Source Using a Container Data Source</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" title="When the database is an Oracle Real Application Cluster (Oracle RAC), you can connect to the Oracle RAC database using either of the following options.">Oracle Real Application Clusters and the Map Visualizer</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV10059"></a><a id="JIMPV10060"></a><a id="JIMPV10061"></a><a id="JIMPV10062"></a><a id="JIMPV10063"></a><a id="JIMPV10064"></a><a id="JIMPV10058"></a><div class="props_rev_3"><a id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD" name="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD"></a><h5 id="JIMPV-GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD" class="sect5"><span class="enumeration_section">1.6.1.1 </span>Create a Container Oracle RAC Data Source
                     </h5>
                     <div>
                        <p>You can use Oracle Enterprise Manager 12<span class="italic">c</span> or later to create a data source that connects to the Oracle RAC database.
                        </p>
                        <p>The following steps show how to create GridLink data source. (These are followed by steps showing how to create a Multi data source.)</p>
                        <ol>
                           <li>
                              <p>Log in to Enterprise Manager and in the Target Navigation pane, click the server instance that contains the map visualizer server.</p>
                              <p>In <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHECFDI">Figure 1-2</a>, clicking <span class="bold">map_viewer1</span> under WebLogic Domain causes the <code class="codeph">map_viewer1</code> server information to appear in the main area of the window.
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHECFDI">
                                 <p class="titleinfigure">Figure 1-2 Selecting the Server Instance</p><img src="img/mv_serv_instance.jpg" alt="Description of Figure 1-2 follows" title="Description of Figure 1-2 follows" longdesc="img_text/mv_serv_instance.html"><br><a href="img_text/mv_serv_instance.html">Description of "Figure 1-2 Selecting the Server Instance"</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>Click <span class="bold">WebLogic Server</span> and select <span class="bold">JDBC Data Sources</span>, as shown in <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHJHCBJ">Figure 1-3</a>.
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHJHCBJ">
                                 <p class="titleinfigure">Figure 1-3 Displaying JDBC Data Sources</p><img src="img/display_jdbc_ds.jpg" alt="Description of Figure 1-3 follows" title="Description of Figure 1-3 follows" longdesc="img_text/display_jdbc_ds.html"><br><a href="img_text/display_jdbc_ds.html">Description of "Figure 1-3 Displaying JDBC Data Sources"</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>Under JDBC Data Sources, click <span class="bold">Create</span> and select <span class="bold">GridLink Data Source</span>, as shown in <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHHJGFC">Figure 1-4</a>.
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHHJGFC">
                                 <p class="titleinfigure">Figure 1-4 Creating a GridLink Data Source</p><img src="img/create_gridlink_ds.jpg" alt="Description of Figure 1-4 follows" title="Description of Figure 1-4 follows" longdesc="img_text/create_gridlink_ds.html"><br><a href="img_text/create_gridlink_ds.html">Description of "Figure 1-4 Creating a GridLink Data Source"</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>Enter any necessary information in the Creating New JDBC Data Source wizard. For example, to create a container data source named <code class="codeph">jdbc/mvdemo</code>:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p><span class="bold">Data Source Properties</span>: Specify <span class="bold">Data Source Name</span> as <code class="codeph">mvdemo</code>, <span class="bold">Driver Service Name</span> as <code class="codeph">Oracle Driver (Thin XA) for GridLink Connections Versions: Any</code>, and <span class="bold">JNDI Name</span> as <code class="codeph">jdbc/mvdemo</code>. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Connection Properties</span>: Generate the URL for database user <code class="codeph">mvdemo</code> on the appropriate host.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Transaction Properties</span>: Accept the displayed transaction properties.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">ONS Properties</span>: Accept the displayed transaction properties, or make any changes as needed.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Select Targets</span>: Select (check) <code class="codeph">map_viewer1</code> under <span class="bold">Name</span> to deploy the JDBC data source on the desired server.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Review</span>: Review the properties for the new data source to be created. If you need to make any changes, go back and make them and then return to this page.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <p><a id="d2937e3178" class="indexterm-anchor"></a><span class="bold">To create a Multi data source</span> instead of a GridLink data source as in the preceding instructions, adapt the steps as appropriate. For example:
                        </p>
                        <ol>
                           <li>
                              <p>Log in to Enterprise Manager and in the Target Navigation pane, click the server instance that contains the map visualizer server.</p>
                              <p>In <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHCHIHA">Figure 1-5</a>, clicking <span class="bold">map_viewer1</span> under WebLogic Domain causes the <code class="codeph">map_viewer1</code> server information to appear in the main area of the window.
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHCHIHA">
                                 <p class="titleinfigure">Figure 1-5 Selecting the Server Instance</p><img src="img/mv_serv_instance.jpg" alt="Description of Figure 1-5 follows" title="Description of Figure 1-5 follows" longdesc="img_text/mv_serv_instance.html"><br><a href="img_text/mv_serv_instance.html">Description of "Figure 1-5 Selecting the Server Instance"</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>Click <span class="bold">WebLogic Server</span> and select <span class="bold">JDBC Data Sources</span>, as shown in <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHHHBEH">Figure 1-6</a>.
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHHHBEH">
                                 <p class="titleinfigure">Figure 1-6 Displaying JDBC Data Sources</p><img src="img/display_jdbc_ds.jpg" alt="Description of Figure 1-6 follows" title="Description of Figure 1-6 follows" longdesc="img_text/display_jdbc_ds.html"><br><a href="img_text/display_jdbc_ds.html">Description of "Figure 1-6 Displaying JDBC Data Sources"</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>Under JDBC Data Sources, click <span class="bold">Create</span> and select <span class="bold">Multi Data Source</span>, as shown in <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHBDCEA">Figure 1-7</a>.
                              </p>
                              <div class="figure" id="GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD__BEHBDCEA">
                                 <p class="titleinfigure">Figure 1-7 Creating a Multi Data Source</p><img src="img/create_multi_ds.jpg" alt="Description of Figure 1-7 follows" title="Description of Figure 1-7 follows" longdesc="img_text/create_multi_ds.html"><br><a href="img_text/create_multi_ds.html">Description of "Figure 1-7 Creating a Multi Data Source"</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>Enter any necessary information. For example:</p>
                              <ol type="a">
                                 <li>
                                    <p><span class="bold">Data Source Properties</span>: Specify <span class="bold">Data Source Name</span> as <code class="codeph">mvdemo</code>, J<span class="bold">NDI Name</span> as <code class="codeph">jdbc/mvdemo</code>, and <span class="bold">Algorithm Type</span> as <code class="codeph">Failover</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Select Targets</span>: Select (check) <code class="codeph">map_viewer1</code> under <span class="bold">Name</span> .
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Select Data Source Type</span>: Accept the default values (<code class="codeph">non-XA Driver</code>).
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click <span class="bold">Create New Data Source</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Specify properties for the first data source node, such as: <span class="bold">Name</span>: <code class="codeph">mvdemo-rac0</code>, <span class="bold">JNDI Name</span>: <code class="codeph">jdbc/mvdemo-rac0</code>, <span class="bold">Database Type</span>: <code class="codeph">Oracle</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>For <span class="bold">Database Driver</span>, select <code class="codeph">Oracle's Driver (Thin) for Oracle RAC Service-Instance connections: Versions: Any</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Accept the default values (<code class="codeph">Supports Global Transactions</code> and <code class="codeph">One-Phase Commit</code>).
                                    </p>
                                 </li>
                                 <li>
                                    <p>Define the connection properties for Node 1. Provide values for Service Name, Database Name, Host Name, Port, Database User Name, Password, and Protocol.</p>
                                 </li>
                                 <li>
                                    <p>Verify the properties and click <span class="bold">Test Configuration</span>. If it succeeds, click <span class="bold">Next</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Select (check) the server in which the map visualizer is deployed (<code class="codeph">map_viewer1</code>), and click <span class="bold">Finish</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>On the next page, click <span class="bold">Create a New Data Source</span> to create and configure the second node.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Specify properties for the second data source node, such as: <span class="bold">Name</span>: <code class="codeph">mvdemo-rac1</code>, <span class="bold">JNDI Name</span>: <code class="codeph">jdbc/mvdemo-rac1</code>, <span class="bold">Database Type</span>: <code class="codeph">Oracle</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>For <span class="bold">Database Driver</span>, select <code class="codeph">Oracle's Driver (Thin) for Oracle RAC Service-Instance connections: Versions: Any</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Accept the default values (<code class="codeph">Supports Global Transactions</code> and <code class="codeph">One-Phase Commit</code>).
                                    </p>
                                 </li>
                                 <li>
                                    <p>Define the connection properties for Node 2. Provide values for Service Name, Database Name, Host Name, Port, Database User Name, Password, and Protocol.</p>
                                 </li>
                                 <li>
                                    <p>Verify the properties and click <span class="bold">Test Configuration</span>. If it succeeds, click <span class="bold">Next</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Select (check) the server in which the map visualizer is deployed (<code class="codeph">map_viewer1</code>), and click <span class="bold">Finish</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If you need to add more nodes, click Create a New Data Source and create each in the same way as before.</p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">Creating a Container Oracle RAC Data Source for the Map Visualizer Server</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10065"></a><div class="props_rev_3"><a id="GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485" name="GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485"></a><h5 id="JIMPV-GUID-AF239C28-1F62-4C07-81AF-B2BD43C96485" class="sect5"><span class="enumeration_section">1.6.1.2 </span>Create a Map Visualizer Data Source Using a Container Data Source
                     </h5>
                     <div>
                        <p>After creating a container data source in the map visualizer container (explained in <a href="introduction-to-map-visualization-component.html#GUID-6D0372E6-AAF8-4EAD-934C-C0CD021D1BFD">Create a Container Oracle RAC Data Source</a>), create a new map visualizer data source that enables it to connect to the Oracle RAC database by adding the <code class="codeph">container_ds</code> attribute in the map visualizer data source. For example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source  name="mvdemo"
                  <span class="bold">container_ds="jdbc/mvdemo"</span>
                  number_of_mappers="7" /&gt;
</pre><p>In the preceding example:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">name</code> attribute specifies the map visualizer data source name, which is required for map requests.
                              </p>
                           </li>
                           <li>
                              <p>The value for the <code class="codeph">container_ds</code> attribute must match the JNDI Name that you specified on the Data Source Properties page of the Creating New JDBC Data Source wizard.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">number_of_mappers</code> attribute specifies the maximum number of supported concurrent map requests that can target this data source.
                              </p>
                           </li>
                        </ul>
                        <p>For more information about these attributes, see <a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">Defining Permanent Map Data Sources</a>.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">Creating a Container Oracle RAC Data Source for the Map Visualizer Server</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9514"></a><div class="props_rev_3"><a id="GUID-1AD38B02-674B-44DA-8536-7A4D11812C00" name="GUID-1AD38B02-674B-44DA-8536-7A4D11812C00"></a><h4 id="JIMPV-GUID-1AD38B02-674B-44DA-8536-7A4D11812C00" class="sect4"><span class="enumeration_section">1.6.2 </span>Creating a Map Visualizer Data Source Using the Oracle RAC Service Name
                  </h4>
                  <div>
                     <p>As an alternative to creating a JDBC container data source for use with the <code class="codeph">container_ds</code> attribute in the map visualizer configuration file (as explained in <a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">Creating a Container Oracle RAC Data Source for the Map Visualizer Server</a>), you can create a map visualizer data source directly in the map visualizer configuration file by specifying the connection parameters to the Oracle RAC data service. (This type of connection works only with Oracle Database Release 11.2 and later.) For example:
                     </p><pre class="oac_no_warn" dir="ltr">    &lt;map_data_source name="mvdemo"
         jdbc_host="rac.mycompany.com"
         jdbc_sid="//srv.mycompany.com"
         jdbc_port="1521"
         jdbc_user="mvdemo"
         jdbc_password="!mypassword" 
         jdbc_mode="thin"
         number_of_mappers="8"
         allow_jdbc_theme_based_foi="true"
         editable="false"
    /&gt;
</pre><p>In the preceding example:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">jdbc_host</code> attribute must be the Oracle RAC SCAN IP address or host name.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">jdbc_sid</code> attribute (note the leading <code class="codeph">//</code> characters in j<code class="codeph">dbc_sid="//srv.mycompany.com"</code>) specifies the Oracle RAC database service name, not the SID value.
                           </p>
                        </li>
                     </ul>
                     <p>For more information about the attributes in this example, see <a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">Defining Permanent Map Data Sources</a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" title="When the database is an Oracle Real Application Cluster (Oracle RAC), you can connect to the Oracle RAC database using either of the following options.">Oracle Real Application Clusters and the Map Visualizer</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV10066"></a><div class="props_rev_3"><a id="GUID-9B0D09B9-8867-486E-A575-3853C7134527" name="GUID-9B0D09B9-8867-486E-A575-3853C7134527"></a><h4 id="JIMPV-GUID-9B0D09B9-8867-486E-A575-3853C7134527" class="sect4"><span class="enumeration_section">1.6.3 </span>Restarting the Map Visualizer
                  </h4>
                  <div>
                     <p>After performing the instructions in <a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">Creating a Container Oracle RAC Data Source for the Map Visualizer Server</a> or <a href="introduction-to-map-visualization-component.html#GUID-1AD38B02-674B-44DA-8536-7A4D11812C00">Creating a Map Visualizer Data Source Using the Oracle RAC Service Name</a>, you must restart the map visualizer to have the newly created data source take effect.
                     </p>
                     <p>After you have restarted the map visualizer, whenever you request a map from the data source, the map visualizer obtains the necessary database connections (from the container if you chose the option in <a href="introduction-to-map-visualization-component.html#GUID-2FD12553-8489-44D1-BC71-3B57D16D9E43">Creating a Container Oracle RAC Data Source for the Map Visualizer Server</a>, or directly from the connection parameters if you chose the option in <a href="introduction-to-map-visualization-component.html#GUID-1AD38B02-674B-44DA-8536-7A4D11812C00">Creating a Map Visualizer Data Source Using the Oracle RAC Service Name</a>).
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-10956812-5638-483F-A2E4-6FC6B2D0DA15" title="When the database is an Oracle Real Application Cluster (Oracle RAC), you can connect to the Oracle RAC database using either of the following options.">Oracle Real Application Clusters and the Map Visualizer</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9515"></a><div class="props_rev_3"><a id="GUID-B1C71001-5981-45E1-8B2E-986D53251A60" name="GUID-B1C71001-5981-45E1-8B2E-986D53251A60"></a><h3 id="JIMPV-GUID-B1C71001-5981-45E1-8B2E-986D53251A60" class="sect3"><span class="enumeration_section">1.7 </span>High Availability and the Map Visualizer (WebLogic Server Only)
               </h3>
               <div>
                  <p>Users can benefit from the high availability features of Oracle WebLogic Server.</p>
                  <div class="infoboxnote" id="GUID-B1C71001-5981-45E1-8B2E-986D53251A60__GUID-254EFAE9-2FC2-4CF4-9370-0309367485D5">
                     <p class="notep1">Note:</p>
                     <p>This section is intended for advanced users who want to take full advantage of high availability features with the map visualizer. You must have a strong understanding of high availability features, which are described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/jimpv&amp;id=ASHIA" target="_blank"><span class="italic">Oracle Fusion Middleware High Availability Guide</span></a>.
                     </p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-69E6991D-A5AD-49F8-B994-989DEBF92DAB">Deploying the Map Visualizer on a Middle-Tier Cluster</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">Introduction to the Map Visualization Component</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9517"></a><div class="props_rev_3"><a id="GUID-69E6991D-A5AD-49F8-B994-989DEBF92DAB" name="GUID-69E6991D-A5AD-49F8-B994-989DEBF92DAB"></a><h4 id="JIMPV-GUID-69E6991D-A5AD-49F8-B994-989DEBF92DAB" class="sect4"><span class="enumeration_section">1.7.1 </span>Deploying the Map Visualizer on a Middle-Tier Cluster
                  </h4>
                  <div>
                     <p>The map visualizer can be deployed to a WebLogic Server cluster. You must take care, however, about how the generated image files on each host are named and referenced through URLs by client applications.</p>
                     <p>Consider the following sample scenario. When a map request is sent to the front web server, it reaches the map visualizer server running on host A. map visualizer on host A then sends back the URL for the generated map image, and the client then sends a second request to fetch the actual image. This second request might be received by WebLogic Server running on host B, which has no such image (or which will send back an incorrect image with the same name). </p>
                     <p><a id="d2937e3714" class="indexterm-anchor"></a>There is no single best solution for this problem in all environments. One option is to have the hosts share common networked storage, so that the map images are deposited in the same virtual (networked) file system by different map visualizer servers running on different hosts. You must configure the map file storage information (see <a href="introduction-to-map-visualization-component.html#GUID-82293405-04DB-4226-9A33-FC5692AC44AB">Specifying Map File Storage and Life Cycle Information</a>) for each map visualizer instance so that the images are deposited in different subdirectories or so that they have different file prefixes. Otherwise, the image files generated by the multiple map visualizer servers might overwrite each other on the disk. By properly configuring the map file storage information, you ensure that each URL sent back to the client uniquely identifies the correct map on the network drive.
                     </p>
                     <p><a id="d2937e3723" class="indexterm-anchor"></a>If you cannot use networked drives, consider using a load balancer. You may first need to configure the map file storage information for each map visualizer instance (as explained in the preceding paragraph), so that each map visualizer instance names its generated images using an appropriate scheme to ensure uniqueness. You can then specify rules in the load balancer to have it redirect image requests to a certain host if the URL matches a certain pattern, such as containing a specified map image file prefix.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-B1C71001-5981-45E1-8B2E-986D53251A60" title="Users can benefit from the high availability features of Oracle WebLogic Server.">High Availability and the Map Visualizer (WebLogic Server Only)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9518"></a><div class="props_rev_3"><a id="GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" name="GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879"></a><h3 id="JIMPV-GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" class="sect3"><span class="enumeration_section">1.8 </span>Secure Map Rendering
               </h3>
               <div>
                  <p>You can implement secure map rendering based on a web user's identity.</p>
                  <p>Users with different roles or permissions will see different feature sets when viewing the same theme. The basic idea is that the map visualizer will always invoke a specified PL/SQL package to set the web user's identity in the database whenever accessing the database for any themes. This user information can be used by the database to enforce data access control.</p>
                  <div class="infoboxnote" id="GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879__GUID-BA9BB183-BF67-4F51-BF7B-30FC2000F3A4">
                     <p class="notep1">Note:</p>
                     <p>In this section, the terms <span class="italic">user</span> and <span class="italic">authenticated user</span> refer to the application or web user that logs into Oracle Fusion Middleware or Oracle Single Sign-On (SSO). It is <span class="italic">not</span> the same as the database user. that the map visualizer itself will connect directly to a database schema that stores all the geospatial data.
                     </p>
                  </div>
                  <p>The map visualizer will connect directly to a database schema that stores all the geospatial data. To enforce access control for the map visualizer on the data in this schema, you must perform the following steps:</p>
                  <ol>
                     <li>
                        <p>Create a PL/SQL package in the database schema. The package must have at least two named procedures: <code class="codeph">set_user(username)</code> and <code class="codeph">clear_user()</code>.
                        </p>
                     </li>
                     <li>
                        <p>Create views, set access rights on database objects, and perform other tasks, based on the user identity stored in the PL/SQL package (which is set by the map visualizer through the set_user procedure for each database session).</p>
                     </li>
                     <li>
                        <p>Create a map visualizer data source to the schema, providing the name of the PL/SQL package as part of the data source definition. This is considered a secured data source.</p>
                     </li>
                     <li>
                        <p>Create map visualizer themes that are based on the views created in step 2.</p>
                     </li>
                     <li>
                        <p>Establish web authentication for users accessing your map visualizer application page or pages, so that when a map request reaches the map visualizer servlet, the web session object should contain an authenticated user's identity.</p>
                     </li>
                     <li>
                        <p>Issue map and FOI (feature of interest) requests that view the themes defined in step 4, either directly or through the use of base maps and Oracle Maps.</p>
                        <p>The map visualizer will automatically pass the user identity to the database using the PL/SQL package before it executes any query for these themes. Only those rows that are visible to the identified user will be returned from the database and rendered by the map visualizer.</p>
                     </li>
                  </ol>
                  <p><a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19">How Secure Map Rendering Works</a> explains how secure map rendering works and provides implementation details and examples. <a href="introduction-to-map-visualization-component.html#GUID-505739B5-794D-4342-B3FA-4CA7F61786A1">Authenticating Users: Options and Demo</a> describes some options for authenticating users and refers to a supplied demo.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19">How Secure Map Rendering Works</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2">Getting the User Name from a Cookie</a><br></li>
                     <li class="ulchildlink"><a href="introduction-to-map-visualization-component.html#GUID-505739B5-794D-4342-B3FA-4CA7F61786A1">Authenticating Users: Options and Demo</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">Introduction to the Map Visualization Component</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9520"></a><a id="JIMPV9521"></a><a id="JIMPV9522"></a><a id="JIMPV9519"></a><div class="props_rev_3"><a id="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19" name="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19"></a><h4 id="JIMPV-GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19" class="sect4"><span class="enumeration_section">1.8.1 </span>How Secure Map Rendering Works
                  </h4>
                  <div>
                     <p>The map visualizer, as a Java EE application, can obtain the identity of a web user that has been authenticated to Oracle Fusion Middleware or Oracle Single Sign-On (SSO). This user information can then be preserved and propagated to the database, where secure access to map layers and tables can be set up based on the user identity. For example, a database administrator (DBA) can create a view of a base table that selects only those spatial features visible to a specific user.</p>
                     <p>To pass the web user identity from Oracle Fusion Middleware or Oracle Single Sign-On (SSO) to the database, use a secure PL/SQL package that sets the user identity in the database. This PL/SQL package is created by a DBA or application developer and installed in the data source schema. Such a package can have any number of procedures and functions, but it must contain at least the following two procedures:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">set_user(username)</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">clear_user()</code></p>
                        </li>
                     </ul>
                     <p>Whenever a theme is requested from a secured data source, The map visualizer invokes the <code class="codeph">set_user</code> procedure in the associated PL/SQL package before it executes any data query for the theme, and it invokes the <code class="codeph">clear_user</code> procedure when the querying process is complete for the theme.
                     </p>
                     <p>After you have installed the PL/SQL package, you can pass the name of this package to the map visualizer as part of the definition of a data source by using the <code class="codeph">plsql_package</code> attribute, as shown in <a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHEJDHH">Example 1-5</a>.
                     </p>
                     <p>When you specify a PL/SQL package name in a data source definition, the map visualizer flags the data source as a secure data source, and it automatically invokes the package's <code class="codeph">set_user</code> and <code class="codeph">clear_user</code> procedures whenever performing any theme queries on the data source.
                     </p>
                     <div class="example" id="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHCBJGJ">
                        <p class="titleinexample">Example 1-3 PL/SQL Package for Secure Map Rendering</p>
                        <p><a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHCBJGJ">Example 1-3</a> shows a PL/SQL package that you can use for secure map rendering. You can create this package in the example MVDEMO schema.
                        </p>
                        <p>In <a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHCBJGJ">Example 1-3</a>, set_user and clear_user are two required methods, and get_user is a convenience function that can be used in creating views or for other data access control purposes
                        </p>
                        <p>After you create the package (which essentially contains the user identity for the current database session), you can set up an elaborate virtual private database that uses this user information (see <a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG007" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for information about using Oracle Virtual Private Database, or VPD). For simplicity, however, this section does not discuss VPD creation, but shows that you can create views that use this user information to enforce data access control.
                        </p>
                        <p>For example, in the example MVDEMO schema you can add a column named ACCOUNT_MGR to the existing CUSTOMERS table, and assign an account manager to each customer stored in this table. You can then create a view that returns only customer rows for a specific account manager, as shown in <a href="introduction-to-map-visualization-component.html#GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHJDBFB">Example 1-4</a>.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE web_user_info
AS
    PROCEDURE set_user (p_name IN VARCHAR2);
    PROCEDURE clear_user;
    FUNCTION  get_user
        RETURN VARCHAR2;
END;
CREATE OR REPLACE PACKAGE BODY web_user_info
AS
    w_name VARCHAR2 (32767);
 
  PROCEDURE set_user (p_name IN VARCHAR2)
  AS
  BEGIN
     w_name := LOWER (p_name);
  END;
 
  PROCEDURE clear_user
  AS
  BEGIN
      w_name := null;
  END;
 
  FUNCTION get_user
    RETURN VARCHAR2
  AS
  BEGIN
    RETURN w_name;
  END;
END;
/
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHJDBFB">
                        <p class="titleinexample">Example 1-4 View for Secure Map Rendering</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE VIEW customers_view
AS
  SELECT * FROM customers
  WHERE account_mgr = web_user_info.get_user;
</pre><p>You can now define a map visualizer theme based on this view, so that whenever account managers log in and want to view customer data on a map, each will only see his or her own customers.</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-569AAFAF-245B-4E81-A586-8B4E0E90EB19__BEHEJDHH">
                        <p class="titleinexample">Example 1-5 Data Source Definition for Secure Map Rendering</p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name="mvdemo"
                 jdbc_host="system32.example.com"
                 jdbc_sid="mv"
                 jdbc_port="15214"
                 jdbc_user="mvdemo"
                 jdbc_password="<span class="italic">password</span>"
                 jdbc_mode="thin"
                 number_of_mappers="3"
                 allow_jdbc_theme_based_foi="true"
                 <span class="bold">plsql_package="web_user_info"</span>
   /&gt;
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" title="You can implement secure map rendering based on a web user's identity.">Secure Map Rendering</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9524"></a><a id="JIMPV9523"></a><div class="props_rev_3"><a id="GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2" name="GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2"></a><h4 id="JIMPV-GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2" class="sect4"><span class="enumeration_section">1.8.2 </span>Getting the User Name from a Cookie
                  </h4>
                  <div>
                     <p>Sometimes the authenticated user's name is not passed to the map visualizer through a Java EE or OSSO session. such as when you integrate the map visualizer within Application Express (APEX), where authentication is carried out by APEX and the user name is not available through a Java EE or OSSO session. To enable you to work around this issue, The map visualizer also supports getting the user name from a cookie. It is your responsibility to set up the cookie within APEX to hold the authenticated user name.</p>
                     <p>To ensure that the map visualizer picks up the user name from a named cookie, you must specify the <code class="codeph">web_user_type</code> attribute in the data source definition (in addition to the mandatory <code class="codeph">plsql_package</code> attribute). For example, if you want the map visualizer to pick up the user name from a cookie named MON_USER, your secure data source definition should look like <a href="introduction-to-map-visualization-component.html#GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2__BEHHCICC">Example 1-6</a>.
                     </p>
                     <div class="example" id="GUID-CBCBB737-B169-4617-AA9A-E945AEB370B2__BEHHCICC">
                        <p class="titleinexample">Example 1-6 Data Source Definition Specifying Cookie Name</p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name="mvdemo"
                  jdbc_host="system32.example.com"
                  jdbc_sid="mv"
                  jdbc_port="25650"
                  jdbc_user="mvdemo"
                  jdbc_password="LfCDQ6NH59nuV7zbeY5QY06sqN7XhiUQ"
                  jdbc_mode="thin"
                  number_of_mappers="3"
                  allow_jdbc_theme_based_foi="true"
                  plsql_package="web_user_info"
                  <span class="bold">web_user_type="MON_USER"</span>
  /&gt;
</pre><p>The possible values for the <code class="codeph">web_user_type</code> attribute are:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">J2EE_USER</code>: tells the map visualizer to get the authenticated user name from a Java EE session
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OSSO_USER</code>: tells the map visualizer to get the authenticated user from an OSSO session.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">&lt;cookie-name&gt;</code></span>: tells the map visualizer to get the authenticated user from a cookie with the specified name. The cookie name is not case sensitive.
                              </p>
                           </li>
                        </ul>
                        <p>If <code class="codeph">web_user_type</code> is not specified, the map visualizer first looks for the user name in the Java EE session; and if none is found, it looks for the user name in the OSSO session (if present).
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" title="You can implement secure map rendering based on a web user's identity.">Secure Map Rendering</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9525"></a><div class="props_rev_3"><a id="GUID-505739B5-794D-4342-B3FA-4CA7F61786A1" name="GUID-505739B5-794D-4342-B3FA-4CA7F61786A1"></a><h4 id="JIMPV-GUID-505739B5-794D-4342-B3FA-4CA7F61786A1" class="sect4"><span class="enumeration_section">1.8.3 </span>Authenticating Users: Options and Demo
                  </h4>
                  <div>
                     <p>How, when, and where users are authenticated depend on the requirements of your application and the setup of your installation. For example, your options include the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Deploy the map visualizer as part of an enterprise portal site, so that end users always first log onto the portal before performing any mapping functions through the map visualizer.</p>
                        </li>
                        <li>
                           <p>Deploy the map visualizer on a separate system, and have users authenticate to a central Oracle SSO server.</p>
                        </li>
                     </ul>
                     <p>As long as the HTTP requests reaching the map visualizer contain the authenticated user information, the map visualizer will be able to pass the requests on to the database, and the secure data access approach will work as expected.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-041AD4E3-3439-4FE4-8A8F-498FB0BE5879" title="You can implement secure map rendering based on a web user's identity.">Secure Map Rendering</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9526"></a><div class="props_rev_3"><a id="GUID-93D5B57C-ED0A-4574-9149-A76CAEBD344D" name="GUID-93D5B57C-ED0A-4574-9149-A76CAEBD344D"></a><h3 id="JIMPV-GUID-93D5B57C-ED0A-4574-9149-A76CAEBD344D" class="sect3"><span class="enumeration_section">1.9 </span>Map Visualizer Demos and Tutorials
               </h3>
               <div>
                  <p>Several map visualizer demos and tutorials are included in a separate application archive named <code class="codeph">mvdemo.ear</code>, and deployed to the same Java EE container where <code class="codeph">mapviewer.ear</code> is deployed.
                  </p>
                  <p>Once deployed, the demos and tutorials will be accessible from a URL in this format: <code class="codeph">http://</code><span class="italic"><code class="codeph">host:port</code></span><code class="codeph">/mvdemo/</code></p>
                  <p>See also the resources available at:</p><pre class="oac_no_warn" dir="ltr"><a href="http://www.oracle.com/technetwork/middleware/mapviewer/downloads/" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/middleware/mapviewer/downloads/</code></a></pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="introduction-to-map-visualization-component.html#GUID-7FB22908-D1D4-4EF1-A229-3A1D50F3CB9F" title="The Oracle Spatial and Graph map visualization component (sometimes referred to the visualization component) is a programmable tool for rendering maps using spatial data managed by Oracle Spatial and Graph.">Introduction to the Map Visualization Component</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
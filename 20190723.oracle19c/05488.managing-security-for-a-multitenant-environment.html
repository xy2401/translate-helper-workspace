<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">
      <meta name="description" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">
      <title>Managing Security for a Multitenant Environment</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator’s Guide ">
      <meta property="og:description" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96136-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="administering-application-containers-with-sql-plus.html" title="Previous" type="text/html">
      <link rel="next" href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="MULTI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administering-application-containers-with-sql-plus.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">Administering a Multitenant Environment</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Managing Security for a Multitenant Environment</li>
            </ol>
            <a id="GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" name="GUID-92E55FB3-F968-473F-927C-A95745CE5EBA"></a>
            
            <h2 id="MULTI-GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" class="sect2"><span class="enumeration_chapter">18 </span> Managing Security for a Multitenant Environment
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.</p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391">Managing Commonly and Locally Granted Privileges</a><br><span>In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.</span></li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29">Managing Common Roles and Local Roles</a><br>A common role is a role that is created in the root; a local role is created in a PDB.
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275">Restricting Operations on PDBs Using PDB Lockdown Profiles</a><br>You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs). 
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459">Configuring Operating System Users for a PDB</a><br>The <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure configures user accounts to be operating system users for a PDB. 
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE">Using Application Contexts in a Multitenant Environment</a><br>An application context stores user identification that can enable or prevent a user from accessing data in the database.
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22">Using Oracle Virtual Private Database in a Multitenant Environment</a><br>Oracle Virtual Private Database (VPD) enables you to filter users who access data.
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E">Using Transport Layer Security in a Multitenant Environment</a><br>Transport Layer Security (TLS) can be used in a multitenant environment for application containers.
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-52FA95B1-8823-43F9-9D96-8F801BF16178">Oracle Data Redaction in a Multitenant Environment</a><br>In a multitenant environment, Oracle Data Redaction policies apply only to the objects within the current pluggable database (PDB). 
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890">Auditing in a Multitenant Environment</a><br>Auditing tracks changes that users make in the multitenant container database (CDB).
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="managing-a-multitenant-environment.html#GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" title="You can administer a multitenant environment using SQL*Plus or Enterprise Manager Cloud Control (Cloud Control).">Administering a Multitenant Environment</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-9BA29009-8148-426C-AD8F-DA2679384391" name="GUID-9BA29009-8148-426C-AD8F-DA2679384391"></a><h3 id="MULTI-GUID-9BA29009-8148-426C-AD8F-DA2679384391" class="sect3"><span class="enumeration_section">18.1 </span>Managing Commonly and Locally Granted Privileges
               </h3>
               <div>
                  <p><span>In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.</span></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D">How the Oracle Multitenant Option Affects Privileges</a><br>In a multitenant environment, all users, including common users, can exercise their privileges only within the current container. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926">About Commonly and Locally Granted Privileges</a><br>In a multitenant environment, both common users and local users can grant privileges to one another. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B">How Commonly Granted System Privileges Work</a><br>Users can exercise system privileges only within the PDB in which they were granted. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-A804A571-D104-451E-83E0-8CEF716DBC68">How Commonly Granted Object Privileges Work</a><br>Object privileges on common objects applies to the object as well as all associated links on this common object. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD">Granting or Revoking Privileges to Access a PDB</a><br>You can grant and revoke privileges for PDB access in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051">Example: Granting a Privilege in a Multitenant Environment</a><br>You can use the <span class="apiname" translate="no">GRANT</span> statement to grant privileges in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3">Enabling Common Users to View CONTAINER_DATA Object Information</a><br>Common users can view information about <code class="codeph">CONTAINER_DATA</code> objects in the root or for data in specific PDBs.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D" name="GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D"></a><h4 id="MULTI-GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D" class="sect4"><span class="enumeration_section">18.1.1 </span>How the Oracle Multitenant Option Affects Privileges
                  </h4>
                  <div>
                     <p>In a multitenant environment, all users, including common users, can exercise their privileges only within the current container. </p>
                     <p>However, a user connected to the root can perform certain operations that affect other pluggable databases (PDBs). These operations include <code class="codeph">ALTER PLUGGABLE DATABASE</code>, <code class="codeph">CREATE USER</code>, <code class="codeph">CREATE ROLE</code>, and <code class="codeph">ALTER USER</code>. The common user must possess the commonly granted privileges that enable these operations. A common user connected to the root can see metadata pertaining to PDBs by way of the container data objects (for example, multitenant container database (CDB) views and <code class="codeph">V$</code> views) in the root, provided that the common user has been granted privileges required to access these views and his <code class="codeph">CONTAINER_DATA</code> attribute has been set to allow seeing data about various PDBs. The common user cannot query tables or views in a PDB.
                     </p>
                     <p>Common users cannot exercise their privileges across other PDBs. They must first switch to the PDB that they want, and then exercise their privileges from there. To switch to a different container, the common user must have the <code class="codeph">SET CONTAINER</code> privilege. The <code class="codeph">SET CONTAINER</code> privilege must be granted either commonly or in the container to which the user is attempting to switch. Alternatively, the common user can start a new database session whose initial current container is the container this user wants, relying on the <code class="codeph">CREATE SESSION</code> privilege in that PDB.
                     </p>
                     <p>Be aware that commonly granted privileges may interfere with the security configured for individual PDBs. For example, suppose an application PDB database administrator wants to prevent any user in the PDB from modifying a particular application common object. A privilege (such as <code class="codeph">UPDATE</code>) granted commonly to <code class="codeph">PUBLIC</code> or to a common user or common role on the object would circumvent the PDB database administrator’s intent.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" name="GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926"></a><h4 id="MULTI-GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" class="sect4"><span class="enumeration_section">18.1.2 </span>About Commonly and Locally Granted Privileges
                  </h4>
                  <div>
                     <p>In a multitenant environment, both common users and local users can grant privileges to one another. </p>
                     <p></p>
                     <p>Privileges by themselves are neither common nor local. How the privileges are applied depends on whether the privilege is granted commonly or granted locally. </p>
                     <p>For commonly granted privileges:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A privilege that is granted commonly can be used in every existing and future container. </p>
                        </li>
                        <li>
                           <p>Only common users can grant privileges commonly, and only if the grantee is common.</p>
                        </li>
                        <li>
                           <p>A common user can grant privileges to another common user or to a common role. </p>
                        </li>
                        <li>
                           <p>The grantor must be connected to the root and must specify <code class="codeph">CONTAINER=ALL</code> in the <code class="codeph">GRANT</code> statement. 
                           </p>
                        </li>
                        <li>
                           <p>Both system and object privileges can be commonly granted. (Object privileges become actual only with regard to the specified object.)</p>
                        </li>
                        <li>
                           <p>When a common user connects to or switches to a given container, this user's ability to perform various activities (such as creating a table) is controlled by privileges granted commonly as well as privileges granted locally in the given container.</p>
                        </li>
                        <li>
                           <p>Do not grant privileges to <code class="codeph">PUBLIC</code> commonly.
                           </p>
                        </li>
                     </ul>
                     <p>For locally granted privileges:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A privilege granted locally can be used only in the container in which it was granted. When the privilege is granted in the root, it applies only to the root.</p>
                        </li>
                        <li>
                           <p>Both common users and local users can grant privileges locally.</p>
                        </li>
                        <li>
                           <p>A common user and a local user can grant privileges to other common or local roles.</p>
                        </li>
                        <li>
                           <p>The grantor must be connected to the container and must specify <code class="codeph">CONTAINER=CURRENT</code> in the <code class="codeph">GRANT</code> statement. 
                           </p>
                        </li>
                        <li>
                           <p>Any user can grant a privilege locally to any other user or role (both common and local) or to the <code class="codeph">PUBLIC</code> role.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-16473474-7F47-4E40-A592-01836E7D911C" title="Just as in a non-CDB, users in a CDB can grant and be granted roles and privileges. Roles and privileges in a CDB, however, are either locally or commonly granted.">Overview of Privilege and Role Grants in a CDB</a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" title="All privileges that Oracle grants to the PUBLIC role are granted locally.">How the PUBLIC Role Works in a Multitenant Environment</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B" name="GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B"></a><h4 id="MULTI-GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B" class="sect4"><span class="enumeration_section">18.1.3 </span>How Commonly Granted System Privileges Work
                  </h4>
                  <div>
                     <p>Users can exercise system privileges only within the PDB in which they were granted. </p>
                     <p>For example, if a system privilege is locally granted to a common user <code class="codeph">A</code> in a PDB <code class="codeph">B</code>, user <code class="codeph">A</code> can exercise that privilege only while connected to PDB <code class="codeph">B</code>. 
                     </p>
                     <p>System privileges can apply in the root and in all existing and future PDBs if the following requirements are met:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The system privilege grantor is a common user and the grantee is a common user, a common role, or the <code class="codeph">PUBLIC</code> role. Do not commonly grant system privileges to the <code class="codeph">PUBLIC</code> role, because this in effect makes the system privilege available to all users.
                           </p>
                        </li>
                        <li>
                           <p>The system privilege grantor possesses the <code class="codeph">ADMIN OPTION</code> for the commonly granted privilege
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">GRANT</code> statement must contain the <code class="codeph">CONTAINER=ALL</code> clause.
                           </p>
                        </li>
                     </ul>
                     <p>The following example shows how to commonly grant a privilege to the common user <code class="codeph">c##hr_admin</code>.
                     </p><pre class="pre codeblock"><code>CONNECT SYSTEM 
Enter password: <span class="italic">password</span>
Connected.

GRANT CREATE ANY TABLE TO c##hr_admin CONTAINER=ALL;</code></pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-CB7E6FE8-8DFE-445F-A521-6A1D82BBA925" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A804A571-D104-451E-83E0-8CEF716DBC68" name="GUID-A804A571-D104-451E-83E0-8CEF716DBC68"></a><h4 id="MULTI-GUID-A804A571-D104-451E-83E0-8CEF716DBC68" class="sect4"><span class="enumeration_section">18.1.4 </span>How Commonly Granted Object Privileges Work
                  </h4>
                  <div>
                     <p>Object privileges on common objects applies to the object as well as all associated links on this common object. </p>
                     <p>These links include all metadata links, data links (previously called object links), or extended data links that are associated with it in the root and in all PDBs belonging to the container (including future PDBs) if certain requirements are met.</p>
                     <p>These requirements are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The object privilege grantor is a common user and the grantee is a common user, a common role, or the <code class="codeph">PUBLIC</code> role. 
                           </p>
                        </li>
                        <li>
                           <p>The object privilege grantor possesses the commonly granted <code class="codeph">GRANT OPTION</code> for the privilege
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">GRANT</code> statement contains the <code class="codeph">CONTAINER=ALL</code> clause.
                           </p>
                        </li>
                     </ul>
                     <p>The following example shows how to grant an object privilege to the common user <code class="codeph">c##hr_admin</code> so that he can select from the <code class="codeph">DBA_PDBS</code> view in the CDB root or in any of the associated PDBs that he can access.
                     </p><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.

GRANT SELECT ON DBA_OBJECTS TO c##hr_admin 
CONTAINER=ALL;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-1592480B-9EFC-4C3F-B84F-F518A5B80CF9" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-A356382A-413A-4A42-98DC-6C2464808202" title="From the user and application perspective, the data dictionary in each container in a CDB is separate, as it would be in a non-CDB.">Data Dictionary Architecture in a CDB</a></li>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-6A7183B5-E0AA-47E1-992C-838FDF21C3D9" title="In a CDB, the namespace for every object is scoped to its container.">Namespaces in a CDB</a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" title="All privileges that Oracle grants to the PUBLIC role are granted locally.">How the PUBLIC Role Works in a Multitenant Environment</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD" name="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD"></a><h4 id="MULTI-GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD" class="sect4"><span class="enumeration_section">18.1.5 </span>Granting or Revoking Privileges to Access a PDB
                  </h4>
                  <div>
                     <p>You can grant and revoke privileges for PDB access in a multitenant environment.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD__GUID-C330F2CE-7F39-404D-9086-5D858CB7596B">To grant a privilege in a multitenant environment:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Include the <code class="codeph">CONTAINER</code> clause in the <code class="codeph">GRANT</code> or <code class="codeph">REVOKE</code> statement. 
                              </p>
                           </li>
                        </ul>
                        <p>Setting <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> applies the privilege to all existing and future containers; setting it to <code class="codeph">CURRENT</code> applies the privilege to the local container only. Omitting the <code class="codeph">CONTAINER</code> clause applies the privilege to the local container. If you issue the <code class="codeph">GRANT</code> statement from the root and omit the <code class="codeph">CONTAINER</code> clause, then the privilege is applied locally. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../sqlrf/GRANT.html#SQLRF-GUID-20B4E2C0-A7F8-4BC8-A5E8-BE61BDC41AC3" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051" name="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051"></a><h4 id="MULTI-GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051" class="sect4"><span class="enumeration_section">18.1.6 </span>Example: Granting a Privilege in a Multitenant Environment
                  </h4>
                  <div>
                     <p>You can use the <span class="apiname" translate="no">GRANT</span> statement to grant privileges in a multitenant environment.
                     </p>
                     <p><a href="managing-security-for-a-multitenant-environment.html#GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051__CACJGEJA">Example 18-1</a> shows how to commonly grant the <code class="codeph">CREATE TABLE</code> privilege to common user <code class="codeph">c##hr_admin</code> so that this user can use this privilege in all existing and future containers.
                     </p>
                     <div class="example" id="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051__CACJGEJA">
                        <p class="titleinexample">Example 18-1 Granting a Privilege in a Multitenant Environment</p><pre class="pre codeblock"><code>CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.

GRANT CREATE TABLE TO c##hr_admin CONTAINER=ALL;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" name="GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3"></a><h4 id="MULTI-GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" class="sect4"><span class="enumeration_section">18.1.7 </span>Enabling Common Users to View CONTAINER_DATA Object Information
                  </h4>
                  <div>
                     <p>Common users can view information about <code class="codeph">CONTAINER_DATA</code> objects in the root or for data in specific PDBs.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E">Viewing Data About the Root, CDB, and PDBs While Connected to the Root</a><br>You can restrict view information for the <code class="codeph">X$</code> table and the <code class="codeph">V$</code>,  <code class="codeph">GV$</code> and <code class="codeph">CDB_*</code> views when common users perform queries.
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C">Enabling Common Users to Query Data in Specific PDBs</a><br>You can enable common users to access data pertaining to specific PDBs by adjusting the users’ <code class="codeph">CONTAINER_DATA</code> attribute.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="In a multitenant environment, privileges can be granted commonly for an entire CDB or application container, or granted locally to a specific PDB.">Managing Commonly and Locally Granted Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E" name="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E"></a><h5 id="MULTI-GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E" class="sect5"><span class="enumeration_section">18.1.7.1 </span>Viewing Data About the Root, CDB, and PDBs While Connected to the Root
                     </h5>
                     <div>
                        <p>You can restrict view information for the <code class="codeph">X$</code> table and the <code class="codeph">V$</code>,  <code class="codeph">GV$</code> and <code class="codeph">CDB_*</code> views when common users perform queries.
                        </p>
                        <div class="section">
                           <p>The <code class="codeph">X$</code> table and these views contain  information about the application root and its associated application PDBs or, if you are connected to the CDB root, the entire CDB. 
                           </p>
                           <p>Restricting this information is useful when you do not want to expose sensitive information about other PDBs. To enable this functionality, Oracle Database provides these tables and views as container data objects. You can find if a specific table or view is a container data object by querying the <code class="codeph">TABLE_NAME</code>, <code class="codeph">VIEW_NAME</code>, and <code class="codeph">CONTAINER_DATA</code> columns of the <code class="codeph">USER_</code>|<code class="codeph">DBA_</code>|<code class="codeph">ALL_VIEWS</code>|<code class="codeph">TABLES</code> dictionary views. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E__GUID-8877E116-47B2-401F-BB4F-5BEA0B56A8F2">To find information about the default (user-level) and object-specific <code class="codeph">CONTAINER_DATA</code> attributes:
                           </p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus or SQL Developer, log in to the root.</p>
                              </li>
                              <li>
                                 <p>Query the <code class="codeph">CDB_CONTAINER_DATA</code> data dictionary view.
                                 </p>
                                 <p>For example:</p><pre class="pre codeblock"><code>COLUMN USERNAME FORMAT A15
COLUMN DEFAULT_ATTR FORMAT A7
COLUMN OWNER FORMAT A15
COLUMN OBJECT_NAME FORMAT A15
COLUMN ALL_CONTAINERS FORMAT A3
COLUMN CONTAINER_NAME FORMAT A10
COLUMN CON_ID FORMAT A6

SELECT USERNAME, DEFAULT_ATTR, OWNER, OBJECT_NAME, 
       ALL_CONTAINERS, CONTAINER_NAME, CON_ID 
FROM   CDB_CONTAINER_DATA 
ORDER BY OBJECT_NAME;

USERNAME        DEFAULT OWNER           OBJECT_NAME     ALL CONTAINERS CON_ID
--------------- ------- --------------- --------------- --- ---------- ------
C##HR_ADMIN     N       SYS             V$SESSION       N   CDB$ROOT        1
C##HR_ADMIN     N       SYS             V$SESSION       N   SALESPDB        1
C##HR_ADMIN     Y                                       N   HRPDB           1
C##HR_ADMIN     Y                                       N   CDB$ROOT        1
DBSNMP          Y                                       Y                   1
SYSTEM          Y                                       Y                   1</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="overview-of-the-multitenant-architecture.html#GUID-1A22B2C5-B302-450E-BB41-6CB6B1AE75B0" title="A container data object is a table or view containing data pertaining to multiple containers or the whole CDB.">Container Data Objects in a CDB</a></li>
                              <li><a href="../refrn/DBA_CONTAINER_DATA.html#REFRN-GUID-094B1D4B-F6BB-43CE-A1FC-3D6DA51CE1BA" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" title="Common users can view information about CONTAINER_DATA objects in the root or for data in specific PDBs.">Enabling Common Users to View CONTAINER_DATA Object Information</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C" name="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C"></a><h5 id="MULTI-GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C" class="sect5"><span class="enumeration_section">18.1.7.2 </span>Enabling Common Users to Query Data in Specific PDBs
                     </h5>
                     <div>
                        <p>You can enable common users to access data pertaining to specific PDBs by adjusting the users’ <code class="codeph">CONTAINER_DATA</code> attribute.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C__GUID-12E0B2F6-83BF-46B7-961B-06AFD757E71E">To enable common users to access data about specific PDBs:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Issue the <code class="codeph">ALTER USER</code> statement in the root. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C__GUID-62CF107D-0766-4CF3-BABD-0DA884B6BE79">
                           <p class="titleinexample">Example 18-2 Setting the CONTAINER_DATA Attribute</p>
                           <p>This example shows how to issue the <code class="codeph">ALTER USER</code> statement to enable the common user <code class="codeph">c##hr_admin</code> to view information pertaining to the <code class="codeph">CDB$ROOT</code>, <code class="codeph">SALES_PDB</code>, and <code class="codeph">HRPDB</code> containers in the <code class="codeph">V$SESSION</code> view (assuming this user can query that view). 
                           </p><pre class="pre codeblock"><code>CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.

ALTER USER c##hr_admin
SET CONTAINER_DATA = (CDB$ROOT, SALESPDB, HRPDB) 
FOR V$SESSION CONTAINER=CURRENT;
</code></pre><p>In this specification: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">SET CONTAINER_DATA</code> lists containers, data pertaining to which can be accessed by the user.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">FOR V$SESSION </code>specifies the <code class="codeph">CONTAINER_DATA</code> dynamic view, which common user <code class="codeph">c##hr_admin</code> will query.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CONTAINER = CURRENT</code> must be specified because when you are connected to the root, <code class="codeph">CONTAINER=ALL</code> is the default for the <code class="codeph">ALTER USER</code> statement, but modification of the <code class="codeph">CONTAINER_DATA</code> attribute must be restricted to the root.
                                 </p>
                              </li>
                           </ul>
                           <p>If you want to enable user <code class="codeph">c##hr_admin</code> to view information that pertains to the <code class="codeph">CDB$ROOT</code>, <code class="codeph">SALES_PDB</code>, <code class="codeph">HRPDB</code> containers in all <code class="codeph">CONTAINER_DATA</code> objects that this user can access, then omit <code class="codeph">FOR V$SESSION</code>. For example: 
                           </p><pre class="pre codeblock"><code>ALTER USER c##hr_admin
SET CONTAINER_DATA = (CDB$ROOT, SALESPDB, HRPDB) 
CONTAINER=CURRENT;
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../sqlrf/ALTER-USER.html#SQLRF-GUID-9FCD038D-8193-4241-85CD-2F4723B27D44" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" title="Common users can view information about CONTAINER_DATA objects in the root or for data in specific PDBs.">Enabling Common Users to View CONTAINER_DATA Object Information</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F87A4196-186D-4D31-83B4-E097325C3A29" name="GUID-F87A4196-186D-4D31-83B4-E097325C3A29"></a><h3 id="MULTI-GUID-F87A4196-186D-4D31-83B4-E097325C3A29" class="sect3"><span class="enumeration_section">18.2 </span>Managing Common Roles and Local Roles
               </h3>
               <div>
                  <p>A common role is a role that is created in the root; a local role is created in a PDB.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0">About Common Roles and Local Roles</a><br><span>In a multitenant environment, database roles can be specific to a PDB or used throughout the entire system container or application container. </span> 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1557398B-E8F0-4792-A8FA-3F805F198B47">How Common Roles Work</a><br>Common roles are visible in the root and in every PDB of a container within which they are defined in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9">How the PUBLIC Role Works in a Multitenant Environment</a><br>All privileges that Oracle grants to the <code class="codeph">PUBLIC</code> role are granted locally.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-34E18048-D157-415D-AA7F-33C5AC315DC8">Privileges Required to Create, Modify, or Drop a Common Role</a><br><span>Only common users who have the commonly granted <code class="codeph">CREATE ROLE</code>, <code class="codeph">ALTER ROLE</code>, and <code class="codeph">DROP ROLE</code> privileges can create, alter, or drop common roles.</span> 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62">Rules for Creating Common Roles</a><br>When you create a common role, you must follow special rules.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D">Creating a Common Role</a><br>You can use the <code class="codeph">CREATE ROLE</code> statement to create a common role.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5">Rules for Creating Local Roles</a><br>To create a local role, you must follow special rules.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F">Creating a Local Role</a><br>You can use the <code class="codeph">CREATE ROLE</code> statement to create a role. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C">Role Grants and Revokes for Common Users and Local Users</a><br>Role grants and revokes apply only to the scope of access of the common user or the local user.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0" name="GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0"></a><h4 id="MULTI-GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0" class="sect4"><span class="enumeration_section">18.2.1 </span>About Common Roles and Local Roles
                  </h4>
                  <div>
                     <p><span>In a multitenant environment, database roles can be specific to a PDB or used throughout the entire system container or application container. </span> 
                     </p>
                     <p>A common role is a role whose identity and (optional) password are created in the root of a container and will be known in the root and in all existing and future PDBs belonging to that container. </p>
                     <p>A local role exists in only one PDB and can only be used within this PDB. It does not have any commonly granted privileges. </p>
                     <p>Note the following: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Common users can both create and grant common roles to other common and local users.</p>
                        </li>
                        <li>
                           <p>You can grant a role (local or common) to a local user or role only locally.</p>
                        </li>
                        <li>
                           <p>If you grant a common role locally, then the privileges of that common role apply only in the container where the role is granted.</p>
                        </li>
                        <li>
                           <p>Local users cannot create common roles, but they can grant them to common and other local users. </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">CONTAINER = ALL</code> clause is the default when you create a common role in the CDB root or an application root. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-A5B26A03-32CF-4F5D-A6BE-F2452AD8CB8A" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-1557398B-E8F0-4792-A8FA-3F805F198B47" name="GUID-1557398B-E8F0-4792-A8FA-3F805F198B47"></a><h4 id="MULTI-GUID-1557398B-E8F0-4792-A8FA-3F805F198B47" class="sect4"><span class="enumeration_section">18.2.2 </span>How Common Roles Work
                  </h4>
                  <div>
                     <p>Common roles are visible in the root and in every PDB of a container within which they are defined in a multitenant environment.</p>
                     <p>A privilege can be granted commonly to a common role if: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The grantor is a common user.</p>
                        </li>
                        <li>
                           <p>The grantor possesses the commonly granted <code class="codeph">ADMIN OPTION</code> for the privilege that is being granted.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">GRANT</code> statement contains the <code class="codeph">CONTAINER=ALL</code> clause.
                           </p>
                        </li>
                     </ul>
                     <p>If the common role contains locally granted privileges, then these privileges apply only within the PDB in which they were granted to the common role. A local role cannot be granted commonly.</p>
                     <p>For example, suppose the CDB common user <code class="codeph">c##hr_mgr</code> has been commonly granted the <code class="codeph">DBA</code> role. This means that user <code class="codeph">c##hr_mgr</code> can use the privileges associated with the <code class="codeph">DBA</code> role in the root and in every PDB in the multitenant environment. However, if the CDB common user <code class="codeph">c##hr_mgr</code> has only been locally granted the <code class="codeph">DBA</code> role for the <code class="codeph">hr_pdb</code> PDB, then this user can only use the <code class="codeph">DBA</code> role's privileges in the <code class="codeph">hr_pdb</code> PDB. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" name="GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9"></a><h4 id="MULTI-GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" class="sect4"><span class="enumeration_section">18.2.3 </span>How the PUBLIC Role Works in a Multitenant Environment
                  </h4>
                  <div>
                     <p>All privileges that Oracle grants to the <code class="codeph">PUBLIC</code> role are granted locally.
                     </p>
                     <p>This feature enables you to revoke privileges or roles that have been granted to the <code class="codeph">PUBLIC</code> role individually in each PDB as needed. If you must grant any privileges to the <code class="codeph">PUBLIC</code> role, then grant them locally. Never grant privileges to <code class="codeph">PUBLIC</code> commonly.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" title="In a multitenant environment, both common users and local users can grant privileges to one another.">About Commonly and Locally Granted Privileges</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-34E18048-D157-415D-AA7F-33C5AC315DC8" name="GUID-34E18048-D157-415D-AA7F-33C5AC315DC8"></a><h4 id="MULTI-GUID-34E18048-D157-415D-AA7F-33C5AC315DC8" class="sect4"><span class="enumeration_section">18.2.4 </span>Privileges Required to Create, Modify, or Drop a Common Role
                  </h4>
                  <div>
                     <p><span>Only common users who have the commonly granted <code class="codeph">CREATE ROLE</code>, <code class="codeph">ALTER ROLE</code>, and <code class="codeph">DROP ROLE</code> privileges can create, alter, or drop common roles.</span> 
                     </p>
                     <p>Common users can also create local roles, but these roles are available only in the PDB in which they were created. </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62" name="GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62"></a><h4 id="MULTI-GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62" class="sect4"><span class="enumeration_section">18.2.5 </span>Rules for Creating Common Roles
                  </h4>
                  <div>
                     <p>When you create a common role, you must follow special rules.</p>
                     <p>The rules are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Ensure that you are in the correct root.</span> For the creation of common roles, you must be in the correct root, either the CDB root or the application root. You cannot create common roles from a PDB. To check if you are in the correct root, run one of the following: 
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To confirm that you are in the CDB root, you can issue the <code class="codeph">show_con_name</code> command. The output should be <code class="codeph">CDB$ROOT</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>To confirm that you are in an application root, verify that the following query returns <code class="codeph">YES</code>:
                                 </p><pre class="pre codeblock"><code>SELECT APPLICATION_ROOT FROM V$PDBS WHERE CON_ID=SYS_CONTEXT('USERENV', 'CON_ID');</code></pre></li>
                              <li>
                                 <p><span class="bold">Ensure that the name that you give the common role starts with the value of the COMMON_USER_PREFIX parameter (which defaults to C##).</span> Note that this requirement does not apply to the names of existing Oracle-supplied roles, such as <code class="codeph">DBA</code> or <code class="codeph">RESOURCE</code>.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="bold">Optionally, set the CONTAINER clause to ALL.</span> As long as you are in the root, if you omit the <code class="codeph">CONTAINER = ALL</code> clause, then by default the role is created as a common role for the CDB root or the application root. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D" name="GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D"></a><h4 id="MULTI-GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D" class="sect4"><span class="enumeration_section">18.2.6 </span>Creating a Common Role
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">CREATE ROLE</code> statement to create a common role.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Connect to the root of the CDB or the application container in which you want to create the common role. </span><div>
                              <p>For example: </p><pre class="pre codeblock"><code>CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE ROLE</code> statement with the <code class="codeph">CONTAINER</code> clause set to <code class="codeph">ALL</code>.</span><div>
                              <p>For example: </p><pre class="pre codeblock"><code>CREATE ROLE c##sec_admin IDENTIFIED BY <span class="italic">password</span> CONTAINER=ALL; </code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-B8165502-1075-4B7D-9892-2D1EDE2ECB82" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5" name="GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5"></a><h4 id="MULTI-GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5" class="sect4"><span class="enumeration_section">18.2.7 </span>Rules for Creating Local Roles
                  </h4>
                  <div>
                     <p>To create a local role, you must follow special rules.</p>
                     <p>These rules are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You must be connected to the PDB in which you want to create the role, and have the <code class="codeph">CREATE ROLE</code> privilege.
                           </p>
                        </li>
                        <li>
                           <p>The name that you give the local role must not start with the value of the <code class="codeph">COMMON_USER_PREFIX</code> parameter (which defaults to <code class="codeph">C##</code>). 
                           </p>
                        </li>
                        <li>
                           <p>You can include <code class="codeph">CONTAINER=CURRENT</code> in the <code class="codeph">CREATE ROLE</code> statement to specify the role as a local role. If you are connected to a PDB and omit this clause, then the  <code class="codeph">CONTAINER=CURRENT</code> clause is implied.
                           </p>
                        </li>
                        <li>
                           <p>You cannot have common roles and local roles with the same name. However, you can use the same name for local roles in different PDBs. To find the names of existing roles, query the <code class="codeph">CDB_ROLES</code> and <code class="codeph">DBA_ROLES</code> data dictionary views.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F" name="GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F"></a><h4 id="MULTI-GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F" class="sect4"><span class="enumeration_section">18.2.8 </span>Creating a Local Role
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">CREATE ROLE</code> statement to create a role. 
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Connect to the PDB in which you want to create the local role. </span><div>
                              <p>For example: </p><pre class="pre codeblock"><code>CONNECT SYSTEM@hrpdb
Enter password: <span class="italic">password</span>
Connected.
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE ROLE</code> statement with the <code class="codeph">CONTAINER</code> clause set to <code class="codeph">CURRENT</code>.</span><div>
                              <p>For example: </p><pre class="pre codeblock"><code>CREATE ROLE sec_admin CONTAINER=CURRENT;</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-B8165502-1075-4B7D-9892-2D1EDE2ECB82" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C" name="GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C"></a><h4 id="MULTI-GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C" class="sect4"><span class="enumeration_section">18.2.9 </span>Role Grants and Revokes for Common Users and Local Users
                  </h4>
                  <div>
                     <p>Role grants and revokes apply only to the scope of access of the common user or the local user.</p>
                     <p>Common users can grant and revoke common roles to and from other common users. A local user can grant a common role to any user in a PDB, including common users, but this grant applies only within the PDB.</p>
                     <p>The following example shows how to grant the common user <code class="codeph">c##sec_admin</code> the <code class="codeph">AUDIT_ADMIN</code> common role for use in all containers.
                     </p><pre class="pre codeblock"><code>CONNECT SYSTEM
Enter password: <span class="italic">password</span>
Connected.

GRANT AUDIT_ADMIN TO c##sec_admin CONTAINER=ALL;
</code></pre><p>Similarly, the next example shows how local user <code class="codeph">aud_admin</code> can grant the common user <code class="codeph">c##sec_admin</code> the <code class="codeph">AUDIT_ADMIN</code> common role for use within the <code class="codeph">hrpdb</code> PDB. 
                     </p><pre class="pre codeblock"><code>CONNECT aud_admin@hrpdb
Enter password: <span class="italic">password</span>
Connected.

GRANT AUDIT_ADMIN TO c##sec_admin CONTAINER=CURRENT;
</code></pre><p>This example shows how a local user <code class="codeph">aud_admin</code> can revoke a role from another user in a PDB. If you omit the <code class="codeph">CONTAINER</code> clause, then <code class="codeph">CURRENT</code> is implied.
                     </p><pre class="pre codeblock"><code>CONNECT aud_admin@hrpdb
Enter password: <span class="italic">password</span>
Connected.

REVOKE sec_admin FROM psmith CONTAINER=CURRENT;</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="A common role is a role that is created in the root; a local role is created in a PDB.">Managing Common Roles and Local Roles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" name="GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275"></a><h3 id="MULTI-GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" class="sect3"><span class="enumeration_section">18.3 </span>Restricting Operations on PDBs Using PDB Lockdown Profiles
               </h3>
               <div>
                  <p>You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs). </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1">About PDB Lockdown Profiles</a><br>A PDB lockdown profile is a named set of features that controls a group of operations.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D">Default PDB Lockdown Profiles</a><br>Oracle Database provides a set of default PDB lockdown profiles that you can customize for your site requirements.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70">Creating a PDB Lockdown Profile</a><br>To create a PDB lockdown profile, you must have the <code class="codeph">CREATE LOCKDOWN PROFILE</code> system privilege. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F">Enabling or Disabling a PDB Lockdown Profile</a><br>To enable or disable a PDB lockdown profile, use the <code class="codeph">PDB_LOCKDOWN</code> initialization parameter
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B">Dropping a PDB Lockdown Profile</a><br>To drop a PDB lockdown profile, you must have the <code class="codeph">DROP LOCKDOWN PROFILE</code> system privilege and be logged into the CDB or application root.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1" name="GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1"></a><h4 id="MULTI-GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1" class="sect4"><span class="enumeration_section">18.3.1 </span>About PDB Lockdown Profiles
                  </h4>
                  <div>
                     <p>A PDB lockdown profile is a named set of features that controls a group of operations.</p>
                     <p>In some cases, you can enable or disable operations individually. For example, a PDB lockdown profile can contain settings to disable specific clauses that come with the <code class="codeph">ALTER SYSTEM</code> statement.
                     </p>
                     <p>PDB lockdown profiles restrict user access to the functionality the features provided, similar to resource limits that are defined for users. As the name suggests, you use PDB lockdown profiles in a CDB, for an application container, or for a PDB or application PDB. You can create custom profiles to accommodate the requirements of your site. PDB profiles enable you to define custom security policies for an application. In addition, you can create a lockdown profile that is based on another profile, called a <strong class="term">base profile</strong>. You can configure this profile to be dynamically updated when the base profile is modified, or configure it to be static (unchanging) when the base profile is updated. Lockdown profiles are designed for both Oracle Cloud and on-premise environments.
                     </p>
                     <p>When identities are shared between PDBs, elevated privileges may exist. You can use lockdown profiles to prevent this elevation of privileges. Identities can be shared in the following situations:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>At the operating system level, when the database interacts with operating system resources such as files or processes</p>
                        </li>
                        <li>
                           <p>At the network level, when the database communicates with other systems, and network identity is important</p>
                        </li>
                        <li>
                           <p>Inside the database, as PDBs access or create common objects or they communicate across container boundaries using features such as database links</p>
                        </li>
                     </ul>
                     <p>The features that use shared identifies and that benefit from PDB lockdown profiles are in the following categories:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Network access features.</span> These are operations that use the network to communicate outside the PDB. For example, the PL/SQL packages <code class="codeph">UTL_TCP</code>, <code class="codeph">UTL_HTTP</code>, <code class="codeph">UTL_MAIL</code>, <code class="codeph">UTL_SNMP</code>, <code class="codeph">UTL_INADDR</code>, and <code class="codeph">DBMS_DEBUG_JDWP</code> perform these kinds of operations. Currently, ACLs are used to control this kind of access to share network identity. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Common user or object access.</span> These are operations in which a local user in the PDB can proxy through common user accounts or access objects in a common schema. These kinds of operations include adding or replacing objects in a common schema, granting privileges to common objects, accessing common directory objects, granting the <code class="codeph">INHERIT PRIVILEGES</code> role to a common user, and manipulating a user proxy to a common user. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Operating System access.</span> For example, you can restrict access to the <code class="codeph">UTL_FILE</code> or <code class="codeph">DBMS_FILE_TRANSFER</code> PL/SQL packages.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Connections.</span> For example, you can restrict common users from connecting to the PDB or you can restrict a local user who has the <code class="codeph">SYSOPER</code> administrative privilege from connecting to a PDB that is open in restricted mode.
                           </p>
                        </li>
                     </ul>
                     <p>The general procedure for creating a PDB lockdown profile is to first create it in the CDB root or the application root using the <code class="codeph">CREATE LOCKDOWN PROFILE</code> statement, and then use the <code class="codeph">ALTER LOCKDOWN PROFILE</code> statement to add the restrictions.
                     </p>
                     <p>To enable a PDB lockdown profile, you can use the <code class="codeph">ALTER SYSTEM</code> statement to set the <code class="codeph">PDB_LOCKDOWN</code> parameter. You can find information about existing PDB lockdown profiles by connecting to CDB or application root and querying the <code class="codeph">DBA_LOCKDOWN_PROFILES</code> data dictionary view. A local user can find the contents of a PDB lockdown parameter by querying the <code class="codeph">V$LOCKDOWN_RULES</code> dynamic data dictionary view.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D" name="GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D"></a><h4 id="MULTI-GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D" class="sect4"><span class="enumeration_section">18.3.2 </span>Default PDB Lockdown Profiles
                  </h4>
                  <div>
                     <p>Oracle Database provides a set of default PDB lockdown profiles that you can customize for your site requirements.</p>
                     <p>By default, most of these profiles are empty. They are designed to be a placeholder or template for you to configure, depending on your deployment requirements. </p>
                     <p>Detailed information about these profiles is as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">PRIVATE_DBAAS</code> incorporates restrictions that are suitable for private Cloud Database-as-a-Service (DBaaS) deployments. These restrictions are:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Must have the same database administrator for each PDB</p>
                              </li>
                              <li>
                                 <p>Different users permitted to connect to the database </p>
                              </li>
                              <li>
                                 <p>Different applications permitted</p>
                              </li>
                           </ul>
                           <p><code class="codeph">PRIVATE_DBAAS</code> permits users to connect to the PDBs but prevents them from using Oracle Database administrative features.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SAAS</code> incorporates restrictions that are suitable for Software-as-a-Service (SaaS) deployments. These restrictions are:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Must have the same database administrator for each PDB</p>
                              </li>
                              <li>
                                 <p>Different users permitted to connect to the database</p>
                              </li>
                              <li>
                                 <p>Must use the same application</p>
                              </li>
                           </ul>
                           <p>The <code class="codeph">SAAS</code> lockdown profile is more restrictive than the <code class="codeph">PRIVATE_DBAAS</code> profile. Users can be different, but the application code is the same; users are prevented from directly connecting and must connect only through the application; and users are not granted the ability to perform any administrative features. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">PUBLIC_DBAAS</code> incorporates restrictions that are suitable for public Cloud Database-as-a-Service (DBaaS) deployments. The restrictions are as follows:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Different DBAs in each PDB</p>
                              </li>
                              <li>
                                 <p>Different users</p>
                              </li>
                              <li>
                                 <p>Different applications</p>
                              </li>
                           </ul>
                           <p>The <code class="codeph">PUBLIC_DBAAS</code> lockdown profile is the most restrictive of the lockdown profiles. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70" name="GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70"></a><h4 id="MULTI-GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70" class="sect4"><span class="enumeration_section">18.3.3 </span>Creating a PDB Lockdown Profile
                  </h4>
                  <div>
                     <p>To create a PDB lockdown profile, you must have the <code class="codeph">CREATE LOCKDOWN PROFILE</code> system privilege. 
                     </p>
                     <div class="section">After you create the lockdown profile, you can add restrictions before enabling it.</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the CDB root or the application root as a user who has the <code class="codeph">CREATE LOCKDOWN PROFILE</code> system privilege.</span><div>For example, to connect to the CDB root:<pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE LOCKDOWN PROFILE</code> statement to create the profile by using the following syntax: </span><div><pre class="pre codeblock"><code>CREATE LOCKDOWN PROFILE <span class="italic">profile_name</span>
[FROM <span class="italic">static_base_profile</span> | INCLUDING <span class="italic">dynamic_base_profile</span>];</code></pre><p>In this specification:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">profile_name</span></code> is the name that you assign the lockdown profile. You can find existing names by querying the <code class="codeph">PROFILE_NAMES</code> column of the <code class="codeph">DBA_LOCKDOWN_PROFILES</code> data dictionary view. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FROM <span class="codeinlineitalic">static_base_profile</span></code> creates a new lockdown profile by using the values from an existing profile. Any subsequent changes to the base profile will not affect the new profile.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">INCLUDING <span class="codeinlineitalic">dynamic_base_profile</span></code> also creates a new lockdown profile by using the values from an existing base profile, except that this new lockdown profile will inherit the <code class="codeph">DISABLE STATEMENT</code> rules that comprise the base profile, as well as any subsequent changes to the base profile. If rules that are explicitly added to the new profile conflict with the rules in the base profile, then the rules in the base profile take precedence. For example, an <code class="codeph">OPTION_VALUE</code> clause in the base profile takes precedence over the <code class="codeph">OPTION_VALUE</code> clause in the new profile.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div>The following two PDB lockdown profile statements demonstrate how the inheritance works:<pre class="pre codeblock"><code>CREATE LOCKDOWN PROFILE hr_prof INCLUDING PRIVATE_DBAAS;
CREATE LOCKDOWN PROFILE hr_prof2 FROM hr_prof;</code></pre><p>In the first statement, <code class="codeph">hr_prof</code> inherits any changes made to the <code class="codeph">PRIVATE_DBAAS</code> base profile. If a new statement is enabled for <code class="codeph">PRIVATE_DBAAS</code>, then it is enabled for <code class="codeph">hr_prof</code>. In the second statement, in contrast, when <code class="codeph">hr_prof</code> changes, then <code class="codeph">hr_prof2</code> does <span class="italic">not</span> change because it is independent of its base profile.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">ALTER LOCKDOWN PROFILE</code> statement to provide restrictions for the profile.</span><div>For example:<pre class="pre codeblock"><code>ALTER LOCKDOWN PROFILE hr_prof DISABLE STATEMENT  = ('ALTER SYSTEM');
ALTER LOCKDOWN PROFILE hr_prof ENABLE STATEMENT = ('ALTER SYSTEM') clause = ('flush shared_pool');
ALTER LOCKDOWN PROFILE hr_prof DISABLE FEATURE = ('XDB_PROTOCOLS');</code></pre><p>In the preceding example:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">DISABLE STATEMENT  = ('ALTER SYSTEM')</code> disables the use of all <code class="codeph">ALTER SYSTEM</code> statements for the PDB.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ENABLE STATEMENT = ('ALTER SYSTEM') clause = ('flush shared_pool')</code> enables only the use of the <code class="codeph">FLUSH_SHARED_POOL</code> clause for <code class="codeph">ALTER SYSTEM</code>. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DISABLE FEATURE = ('XDB_PROTOCOLS')</code> prohibits the use of the XDB protocols (FTP, HTTP, HTTPS) by this PDB
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div>After you create a PDB lockdown profile, you are ready to enable it by using the <code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> SQL statement.
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" name="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F"></a><h4 id="MULTI-GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" class="sect4"><span class="enumeration_section">18.3.4 </span>Enabling or Disabling a PDB Lockdown Profile
                  </h4>
                  <div>
                     <p>To enable or disable a PDB lockdown profile, use the <code class="codeph">PDB_LOCKDOWN</code> initialization parameter
                     </p>
                     <div class="section">
                        <p>You can use <code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> to enable a lockdown profile in any of the following contexts:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>CDB (affects all PDBs)</p>
                           </li>
                           <li>
                              <p>Application root (affects all application PDBs in the container)</p>
                           </li>
                           <li>
                              <p>Application PDB</p>
                           </li>
                           <li>
                              <p>PDB</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F__GUID-483F47A9-11D8-4AA5-9B14-A98F2D379C69">
                           <p class="notep1">Note:</p>
                           <p>It is not necessary to restart the instance to enable the profile. When the <code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> statement completes, the profile rules take effect immediately.
                           </p>
                        </div>
                        <p>When you set <code class="codeph">PDB_LOCKDOWN</code> in the CDB root, every PDB and application root inherits this setting unless <code class="codeph">PDB_LOCKDOWN</code> is set at the container level. To disable lockdown profiles, set <code class="codeph">PDB_LOCKDOWN</code> to null. If you set this parameter to null in the CDB root, then lockdown profiles are disabled for all PDBs except those that explicitly set a profile within the PDB.
                        </p>
                        <p>A CDB common user who has been commonly granted the <code class="codeph">SYSDBA</code> administrative privilege or the <code class="codeph">ALTER SYSTEM</code> system privilege can set <code class="codeph">PDB_LOCKDOWN</code> only to a lockdown profile that was created in the CDB root. An application common user with the application common <code class="codeph">SYSDBA</code> administrative privilege or the <code class="codeph">ALTER SYSTEM</code> system privilege can set <code class="codeph">PDB_LOCKDOWN</code> only to a lockdown profile created in an application root.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in to the desired container as a user who has the commonly granted <code class="codeph">ALTER SYSTEM</code> or commonly granted <code class="codeph">SYSDBA</code> privilege.</span><div>For example, to enable the profile for all PDBs, log in to the CDB root:<pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> statement. </span><div>For example, the following statement enables the lockdown profile named <code class="codeph">hr_prof</code> for all PDBs:<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_LOCKDOWN = hr_prof;
</code></pre></div>
                           <div>The following statement resets the <code class="codeph">PDB_LOCKDOWN</code> parameter:<pre class="pre codeblock"><code>ALTER SYSTEM RESET PDB_LOCKDOWN;
</code></pre></div>
                           <div>This variation of the preceding statement includes the <code class="codeph">SCOPE</code> clause::<pre class="pre codeblock"><code>ALTER SYSTEM RESET PDB_LOCKDOWN SCOPE = BOTH;
</code></pre></div>
                           <div>The following statement disables all lockdown profiles in the CDB except those that are explicitly set at the PDB level:<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_LOCKDOWN = '' SCOPE = BOTH;
</code></pre></div>
                           <div>To find the names of PDB lockdown profiles, query the <code class="codeph">PROFILE_NAME</code> column of the <code class="codeph">DBA_LOCKDOWN_PROFILES</code> data dictionary view.
                           </div>
                        </li>
                        <li class="stepexpand"><span>Optionally, review information about the profiles by querying <code class="codeph">DBA_LOCKDOWN_PROFILES</code>.</span><div>For example, run the following query:<pre class="pre codeblock"><code>SET LINESIZE 150
COL PROFILE_NAME FORMAT a20
COL RULE FORMAT a20
COL CLAUSE FORMAT a25

SELECT PROFILE_NAME, RULE, CLAUSE, STATUS FROM CDB_LOCKDOWN_PROFILES;</code></pre></div>
                           <div>
                              <p>Sample output appears below:</p><pre class="pre codeblock"><code>PROFILE_NAME         RULE                 CLAUSE                    STATUS
-------------------- -------------------- ------------------------- -------
HR_PROF              XDB_PROTOCOLS                                  DISABLE
HR_PROF              ALTER SYSTEM                                   DISABLE
HR_PROF              ALTER SYSTEM         FLUSH SHARED_POOL         ENABLE
HR_PROF2                                                            EMPTY
PRIVATE_DBAAS                                                       EMPTY
PUBLIC_DBAAS                                                        EMPTY
SAAS                                                                EMPTY</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B" name="GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B"></a><h4 id="MULTI-GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B" class="sect4"><span class="enumeration_section">18.3.5 </span>Dropping a PDB Lockdown Profile
                  </h4>
                  <div>
                     <p>To drop a PDB lockdown profile, you must have the <code class="codeph">DROP LOCKDOWN PROFILE</code> system privilege and be logged into the CDB or application root.
                     </p>
                     <div class="section">You can find the names of existing PDB lockdown profiles by querying the <code class="codeph">DBA_LOCKDOWN_PROFILES</code> data dictionary view.
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the CDB root or the application root as a user who has the <code class="codeph">DROP LOCKDOWN PROFILE</code> system privilege.</span><div>For example, to connect to the CDB root:<pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">DROP LOCKDOWN_PROFILE</code> statement.</span><div>For example:<pre class="oac_no_warn" dir="ltr">DROP LOCKDOWN PROFILE hr_prof2;</pre></div>
                        </li>
                        <li class="stepexpand"><span>Optionally, review the current list of profiles by querying <code class="codeph">DBA_LOCKDOWN_PROFILES</code>.</span><div>For example, run the following query:<pre class="pre codeblock"><code>SET LINESIZE 150
COL PROFILE_NAME FORMAT a20
COL RULE FORMAT a20
COL CLAUSE FORMAT a25

SELECT PROFILE_NAME, RULE, CLAUSE, STATUS FROM CDB_LOCKDOWN_PROFILES;</code></pre></div>
                           <div>
                              <p>Sample output appears below:</p><pre class="pre codeblock"><code>PROFILE_NAME         RULE                 CLAUSE                    STATUS
-------------------- -------------------- ------------------------- -------
HR_PROF              XDB_PROTOCOLS                                  DISABLE
HR_PROF              ALTER SYSTEM                                   DISABLE
HR_PROF              ALTER SYSTEM         FLUSH SHARED_POOL         ENABLE
PRIVATE_DBAAS                                                       EMPTY
PUBLIC_DBAAS                                                        EMPTY
SAAS                                                                EMPTY
</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="You can use PDB lockdown profiles in a multitenant environment to restrict sets of user operations in pluggable databases (PDBs).">Restricting Operations on PDBs Using PDB Lockdown Profiles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" name="GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459"></a><h3 id="MULTI-GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" class="sect3"><span class="enumeration_section">18.4 </span>Configuring Operating System Users for a PDB
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure configures user accounts to be operating system users for a PDB. 
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-79F8BC77-3B74-4A29-9C97-6337917F1652">About Configuring Operating System Users for a PDB</a><br>Instead the <code class="codeph">oracle</code> operating system user, you can set a specific user account to be the operating system user for that PDB. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B">Configuring an Operating System User for a PDB</a><br>The <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure can set an operating system user for a PDB.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D">Setting the Default Credential in a PDB</a><br>You can set the database property <code class="codeph">DEFAULT_CREDENTIAL</code> for a specified PDB.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-79F8BC77-3B74-4A29-9C97-6337917F1652" name="GUID-79F8BC77-3B74-4A29-9C97-6337917F1652"></a><h4 id="MULTI-GUID-79F8BC77-3B74-4A29-9C97-6337917F1652" class="sect4"><span class="enumeration_section">18.4.1 </span>About Configuring Operating System Users for a PDB
                  </h4>
                  <div>
                     <p>Instead the <code class="codeph">oracle</code> operating system user, you can set a specific user account to be the operating system user for that PDB. 
                     </p>
                     <p>If you do not set a specific user to be the operating system user for the PDB, then by default the PDB uses the <code class="codeph">oracle</code> operating system user. For the root, you can use the <code class="codeph">oracle</code> operating system user when you must interact with the operating system. 
                     </p>
                     <p>For better security, Oracle recommends that you set a unique operating system user for each PDB in a multitenant environment. Doing so helps to ensure that operating system interactions are performed as a less powerful user than the <code class="codeph">oracle</code> operating system user, and helps to protect data that belongs to one PDB from being accessed by users who are connected to other PDBs.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="The DBMS_CREDENTIAL.CREATE_CREDENTIAL procedure configures user accounts to be operating system users for a PDB.">Configuring Operating System Users for a PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B" name="GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B"></a><h4 id="MULTI-GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B" class="sect4"><span class="enumeration_section">18.4.2 </span>Configuring an Operating System User for a PDB
                  </h4>
                  <div>
                     <p>The <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure can set an operating system user for a PDB.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the database instance root as a user who has the <code class="codeph">EXECUTE</code> privilege for the <code class="codeph">DBMS_CREDENTIAL</code> PL/SQL package and the <code class="codeph">ALTER SYSTEM</code> system privilege.</span><div>For example:<pre class="pre codeblock"><code>sqlplus c##sec_admin
Enter password: <span class="italic">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code> procedure to create an Oracle credential for the operating system user.</span><div>For example, to set the credential for a user named <code class="codeph">os_admin</code>: <pre class="pre codeblock"><code>BEGIN 
 DBMS_CREDENTIAL.CREATE_CREDENTIAL (
    credential_name =&gt; 'PDB1_OS_USER',
    username        =&gt; 'os_admin',
    password        =&gt; '<span class="italic">password</span>');
END;
/
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect to the PDB for which the operating system user will be used.</span><div>For example:<pre class="pre codeblock"><code>CONNECT cc##sec_admin@hrpdb
Enter password: <span class="italic">password</span>
</code></pre><p>To find the available PDBs, run the <code class="codeph">show pdbs</code> command. To check the current PDB, run the show <code class="codeph">con_name</code> command. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Set the <code class="codeph">PDB_OS_CREDENTIAL</code> initialization parameter for the user whose credential was set in Step 2. </span><div>For example:<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_OS_CREDENTIAL = PDB1_OS_USER SCOPE = SPFILE;</code></pre><p>The <code class="codeph">PDB_OS_CREDENTIAL</code> parameter is a static parameter, so you must set it using the <code class="codeph">SCOPE = SPFILE</code> clause. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Restart the database instance.</span><div><pre class="pre codeblock"><code>SHUTDOWN IMMEDIATE
STARTUP</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-authentication.html#DBSEG-GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                           <li><a href="../refrn/PDB_OS_CREDENTIAL.html#REFRN-GUID-E563FDDA-6840-42CC-944D-5B0FD60C9003" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></li>
                           <li><a href="../arpls/DBMS_CREDENTIAL.html#ARPLS-GUID-D5791B72-E0F6-4C41-AD3E-DDEDFFCA7D0C" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" title="You can set the database property DEFAULT_CREDENTIAL for a specified PDB.">Setting the Default Credential in a PDB</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="The DBMS_CREDENTIAL.CREATE_CREDENTIAL procedure configures user accounts to be operating system users for a PDB.">Configuring Operating System Users for a PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" name="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D"></a><h4 id="MULTI-GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" class="sect4"><span class="enumeration_section">18.4.3 </span>Setting the Default Credential in a PDB
                  </h4>
                  <div>
                     <p>You can set the database property <code class="codeph">DEFAULT_CREDENTIAL</code> for a specified PDB.
                     </p>
                     <div class="section">
                        <p>A default credential is useful when importing files from an object store into a PDB. If you do not specify a credential name when using <code class="codeph">impdp</code>, then Oracle Data Pump and the object store module can use the <code class="codeph">DEFAULT_CREDENTIAL</code> object to retrieve the user name and password. When running <code class="codeph">impdp</code> without specifying a credential, you must prefix the dump file name with <code class="codeph">DEFAULT_CREDENTIAL:</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-C96AC8C8-4190-4540-84CF-5361EE8D35CE">To set the default credential:</p>
                        <ol>
                           <li>
                              <p>Log in to a PDB with administrator privileges.</p>
                           </li>
                           <li>
                              <p>Use an <code class="codeph">ALTER DATABASE</code> statement to set the default credential.
                              </p>
                              <p>For example, enter the following statement to set the credential to <code class="codeph">SYSTEM.HR_CRED</code>.
                              </p><pre class="pre codeblock"><code>ALTER DATABASE PROPERTY SET DEFAULT_CREDENTIAL = 'SYSTEM.HR_CRED';</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-A5DA945E-7F7D-46C8-BFB4-BA6F5E28C352">
                        <p class="titleinexample">Example 18-3 Importing Data into a PDB Using the Default Credential</p>
                        <p>This example assumes that a default credential exists. The following command imports data from an object store , prefacing the URL with the string <code class="codeph">DEFAULT_CREDENTIAL</code>:
                        </p><pre class="pre codeblock"><code>impdp hr@pdb1 table_exists_action=replace dumpfile=DEFAULT_CREDENTIAL:https://example.com/ostore/obucket/myt.dmp</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-E6FE01B3-80DA-4A0F-9740-A6B1EA71089B">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="using-database-utilities-in-a-cdb.html#GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71" title="After you create an empty PDB, you can use an Oracle Data Pump full-mode export and import operation to move data into the PDB.">Using Data Pump to Move Data Into a CDB</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sutil/datapump-import-utility.html#GUID-D11E340E-14C6-43B8-AB09-6335F0C1F71B" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> to learn about Data Pump Import
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="The DBMS_CREDENTIAL.CREATE_CREDENTIAL procedure configures user accounts to be operating system users for a PDB.">Configuring Operating System Users for a PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" name="GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE"></a><h3 id="MULTI-GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" class="sect3"><span class="enumeration_section">18.5 </span>Using Application Contexts in a Multitenant Environment
               </h3>
               <p>An application context stores user identification that can enable or prevent a user from accessing data in the database.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-5841261E-988F-4A56-A2B4-71114AB3D51D">What Is an Application Context?</a><br>An <strong class="term">application context</strong> is a set of name-value pairs that Oracle Database stores in memory. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-60DBA142-691E-4710-B8F2-2522E5B37745">Application Contexts in a Multitenant Environment</a><br>Where you create an application in a multitenant environment determines where you must create the application context. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" name="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D"></a><h4 id="MULTI-GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" class="sect4"><span class="enumeration_section">18.5.1 </span>What Is an Application Context?
                  </h4>
                  <div>
                     <p>An <strong class="term">application context</strong> is a set of name-value pairs that Oracle Database stores in memory. 
                     </p>
                     <p>The context has a label called a <strong class="term">namespace</strong> (for example, <code class="codeph">empno_ctx</code> for an application context that retrieves employee IDs). This context enables Oracle Database to find information about both database and nondatabase users during authentication.
                     </p>
                     <p>Inside the context are the name-value pairs (an associative array): the name points to a location in memory that holds the value. An application can use the application context to access session information about a user, such as the user ID or other user-specific information, or a client ID, and then securely pass this data to the database. </p>
                     <p>You can then use this information to either permit or prevent the user from accessing data through the application. You can use application contexts to authenticate both database and non-database users.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-application-contexts-to-retrieve-user-information.html#DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-60DBA142-691E-4710-B8F2-2522E5B37745" name="GUID-60DBA142-691E-4710-B8F2-2522E5B37745"></a><h4 id="MULTI-GUID-60DBA142-691E-4710-B8F2-2522E5B37745" class="sect4"><span class="enumeration_section">18.5.2 </span>Application Contexts in a Multitenant Environment
                  </h4>
                  <div>
                     <p>Where you create an application in a multitenant environment determines where you must create the application context. </p>
                     <p>If an application is installed in the application root or CDB root, then it becomes accessible across the application container or system container and associated application PDBs. You will need to create a common application context in this root. </p>
                     <p>When you create a common application context for use with an application container, note the following: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can create application contexts in a multitenant environment by setting the <code class="codeph">CONTAINER</code> clause in the <code class="codeph">CREATE CONTEXT</code> SQL statement. For example, to create a common application context in the application root, you must execute <code class="codeph">CREATE CONTEXT</code> with <code class="codeph">CONTAINER</code> set to <code class="codeph">ALL</code>. To create the application context in a PDB, set <code class="codeph">CONTAINER</code> to <code class="codeph">CURRENT</code>.
                           </p>
                        </li>
                        <li>
                           <p>You cannot use the same name for a local application context for a common application context. You can find the names of existing application contexts by running the following query: </p><pre class="pre codeblock"><code>SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</code></pre></li>
                        <li>
                           <p>The PL/SQL package that you create to manage a common application context must be a common PL/SQL package. That is, it must exist in the application root or CDB root. If you create the application context for a specific PDB, then you must store the associated PL/SQL package in that PDB. </p>
                        </li>
                        <li>
                           <p>The name-value pairs that you set under a common session application context from an application container or a system container for a common application context are not accessible from other application containers or system containers when a common user accesses a different container.</p>
                        </li>
                        <li>
                           <p>The name-value pairs that you set under a common global application context from an application container or a system container, are accessible only within the same container in the same user session. </p>
                        </li>
                        <li>
                           <p>An application can retrieve the value of an application context whether it resides in the application root, the CDB root, or a PDB.</p>
                        </li>
                        <li>
                           <p>During a plug-in operation of a PDB into a CDB or an application container, if the name of the common application context conflicts with a PDB’s local application context, then the PDB must open in restricted mode. A database administrator would then need to correct the conflict before opening the PDB in normal mode. </p>
                        </li>
                        <li>
                           <p>During an unplug operation, a common application context retains its common semantics, so that later on, if the PDB is plugged into another CDB where a common application context with the same name exists, it would continue to behave like a common object. If a PDB is plugged into an application container or a system container, where the same common application context does not exist, then it behaves like a local object. </p>
                        </li>
                     </ul>
                     <p>To find if an application context is a local application context or an application common application context, query the <code class="codeph">SCOPE</code> column of the <code class="codeph">DBA_CONTEXT</code> or <code class="codeph">ALL_CONTEXT</code> data dictionary view.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-application-contexts-to-retrieve-user-information.html#DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" title="An application context stores user identification that can enable or prevent a user from accessing data in the database.">Using Application Contexts in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" name="GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22"></a><h3 id="MULTI-GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" class="sect3"><span class="enumeration_section">18.6 </span>Using Oracle Virtual Private Database in a Multitenant Environment
               </h3>
               <div>
                  <p>Oracle Virtual Private Database (VPD) enables you to filter users who access data.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE">What Is Oracle Virtual Private Database?</a><br>Oracle Virtual Private Database (VPD) creates security policies to control database access at the row and column level. 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5">Oracle Virtual Private Database in a Multitenant Environment</a><br> <span>You can create Virtual Private Database policies in an application root for use throughout any associated application PDBs.</span></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE" name="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE"></a><h4 id="MULTI-GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE" class="sect4"><span class="enumeration_section">18.6.1 </span>What Is Oracle Virtual Private Database?
                  </h4>
                  <div>
                     <p>Oracle Virtual Private Database (VPD) creates security policies to control database access at the row and column level. </p>
                     <div class="infoboxnote" id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE__GUID-CC44D99A-1031-411E-B725-04DC6A003550">
                        <p class="notep1">Note:</p>
                        <p>Oracle Database release 12c introduced Real Application Security (RAS) to supersede VPD. Oracle recommends that you use RAS for new projects that require row and column level access controls for their applications.</p>
                     </div>
                     <p>Essentially, Oracle Virtual Private Database adds a dynamic <code class="codeph">WHERE</code> clause to a SQL statement that is issued against the table, view, or synonym to which an Oracle Virtual Private Database security policy was applied. 
                     </p>
                     <p>Oracle Virtual Private Database enforces security, to a fine level of granularity, directly on database tables, views, or synonyms. Because you attach security policies directly to these database objects, and the policies are automatically applied whenever a user accesses data, there is no way to bypass security.</p>
                     <p>When a user directly or indirectly accesses a table, view, or synonym that is protected with an Oracle Virtual Private Database policy, Oracle Database dynamically modifies the SQL statement of the user. This modification creates a <code class="codeph">WHERE</code> condition (called a predicate) returned by a function implementing the security policy. Oracle Database modifies the statement dynamically, transparently to the user, using any condition that can be expressed in or returned by a function. You can apply Oracle Virtual Private Database policies to <code class="codeph">SELECT</code>, <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">INDEX</code>, and <code class="codeph">DELETE</code> statements.
                     </p>
                     <p>For example, suppose a user performs the following query: </p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS;
</code></pre><p>The Oracle Virtual Private Database policy dynamically appends the statement with a <code class="codeph">WHERE</code> clause. For example:
                     </p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS 
 WHERE SALES_REP_ID = 159;
</code></pre><p>In this example, the user can only view orders by Sales Representative 159. </p>
                     <p>If you want to filter the user based on the session information of that user, such as the ID of the user, then you can create the <code class="codeph">WHERE</code> clause to use an application context. For example:
                     </p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS 
 WHERE SALES_REP_ID = SYS_CONTEXT('USERENV','SESSION_USER'); </code></pre><div class="infoboxnote" id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE__GUID-6C59F3CD-71C6-4728-AA45-A01CE1527BEE">
                        <p class="notep1">Note:</p>
                        <p>Oracle Virtual Private Database does not support filtering for DDLs, such as <code class="codeph">TRUNCATE</code> or <code class="codeph">ALTER TABLE</code> statements.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbfsg/indroducing-oracle-database-real-application-security.html#DBFSG-GUID-4CA063EE-9405-439A-AAA1-5919E3C1470B" target="_blank"><span><cite>Oracle Database Real Application Security Administrator's and Developer's Guide</cite></span></a></li>
                           <li><a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG-GUID-06022729-9210-4895-BF04-6177713C65A7" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" title="Oracle Virtual Private Database (VPD) enables you to filter users who access data.">Using Oracle Virtual Private Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5" name="GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5"></a><h4 id="MULTI-GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5" class="sect4"><span class="enumeration_section">18.6.2 </span>Oracle Virtual Private Database in a Multitenant Environment
                  </h4>
                  <div>
                     <p> <span>You can create Virtual Private Database policies in an application root for use throughout any associated application PDBs.</span></p>
                     <p>The CDB restriction applies to shared context sensitive policies and views related to Virtual Private Database policies as well. You cannot create a Virtual Private Database policy for an entire multitenant environment.</p>
                     <p> With regard to application containers, you can create Virtual Private Database policies to protect application common objects by applying the common policy to all PDBs that belong to the application root. In other words, when you install an application in the application root, all the common Virtual Private Database policies that protect the common objects will be applied to and immediately enforced for all PDBs in the application container.</p>
                     <p>Note the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can only create the common Virtual Private Database policy and its associated PL/SQL function in the application root and only attach it to application common objects. If the function is not in the same location as the policy, then an error is raised at runtime.</p>
                        </li>
                        <li>
                           <p>A Virtual Private Database policy that is applied to common objects is considered a common policy that will be automatically enforced in PDBs that belong to the application container when it accesses the application common objects from application PDBs.</p>
                        </li>
                        <li>
                           <p>Application common Virtual Private Database policies can only protect application common objects.</p>
                        </li>
                        <li>
                           <p>A Virtual Private Database policy that is applied to application common objects in the application root and is applied to all application PDBs is considered a common Virtual Private Database policy. A policy that is applied to a local database table and enforced in one PDB is considered a local Virtual Private Database policy. </p>
                           <p>For example, if policy <code class="codeph">VPD_P1</code> is applied to the application common table <code class="codeph">T1</code> in the application root, then it is a considered to be a common policy. It will be enforced in each application PDB. If a policy named <code class="codeph">VPD_P1</code> is applied to a local table called <code class="codeph">T1</code> in <code class="codeph">PDB1</code>, then it is considered a local policy, which means that it affects only <code class="codeph">PDB1</code>. If a policy called <code class="codeph">VPD_P1</code> is applied to a local table <code class="codeph">T1</code> in the application root, then it is still considered a local policy because it affects only the application root. This concept applies to other operations, such as enabling, disabling, and removing Virtual Private Database policies. 
                           </p>
                        </li>
                        <li>
                           <p>Application common Virtual Private Database policies only protect application common objects, while local Virtual Private Database policies only protect local objects. </p>
                        </li>
                        <li>
                           <p>If you are using application contexts, then ensure common database session-based application contexts and common global application context objects are used in the common Virtual Private Database configuration. </p>
                        </li>
                        <li>
                           <p>Application container Virtual Private Database policies are stored in the application root. PDBs store only local policies. If you plug a PDB into the application container, then the common policies are not converted to local policies. Instead, Oracle Database loads them from the application root and enforces them in the local PDB when the policies access common objects in the local PDB.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG-GUID-06022729-9210-4895-BF04-6177713C65A7" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" title="Oracle Virtual Private Database (VPD) enables you to filter users who access data.">Using Oracle Virtual Private Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E" name="GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E"></a><h3 id="MULTI-GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E" class="sect3"><span class="enumeration_section">18.7 </span>Using Transport Layer Security in a Multitenant Environment
               </h3>
               <div>
                  <p>Transport Layer Security (TLS) can be used in a multitenant environment for application containers.</p>
                  <div class="section">If you want to use Transport Layer Security (TLS) in a multitenant environment for an application container, then you must ensure that each PDB is able to use its own wallet with its own certificates for TLS authentication.</div>
                  <!-- class="section" -->
                  <ul>
                     <li class="stepexpand"><span>Because there is no individual <code class="codeph">sqlnet.ora</code> file for each PDB, place the wallet in a subdirectory of the <code class="codeph">wallet</code> directory where the name of the subdirectory is the GUID of the PDB that uses the wallet.</span><div>For example, suppose the <code class="codeph">WALLET_LOCATION</code> parameter in <code class="codeph">sqlnet.ora</code> is set as follows:<pre class="pre codeblock"><code>(SOURCE=(METHOD=FILE)(METHOD_DATA=
   (DIRECTORY=/home/oracle/wallet)))</code></pre><p>Place each PDB’s wallet in the <code class="codeph">/home/oracle/wallet</code> directory. You can find the existing PDBs and their GUIDs by querying the <code class="codeph">DBA_PDBS</code> data dictionary view.
                           </p>
                           <p>If the <code class="codeph">WALLET_LOCATION</code> parameter is not specified, then you must place the PDB wallet in a subdirectory of the default wallet path where the name of the subdirectory is the GUID of the PDB. For example:
                           </p><pre class="pre codeblock"><code>$ORACLE_BASE/admin/<span class="italic">db_unique_name</span>/wallet/<span class="italic">PDB_GUID</span></code></pre><p>Or if the <code class="codeph">ORACLE_BASE</code> environment variable is not set, then you can use the Oracle home:
                           </p><pre class="pre codeblock"><code>$ORACLE_HOME/admin/<span class="italic">db_unique_name</span>/wallet/<span class="italic">PDB_GUID</span></code></pre><p>These default locations correspond to the default that is used by Oracle Enterprise User Security to locate wallets for authentication to LDAP.</p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../dbseg/configuring-secure-sockets-layer-authentication.html#DBSEG-GUID-6AD89576-526F-4D6B-A539-ADF4B840819F" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-52FA95B1-8823-43F9-9D96-8F801BF16178" name="GUID-52FA95B1-8823-43F9-9D96-8F801BF16178"></a><h3 id="MULTI-GUID-52FA95B1-8823-43F9-9D96-8F801BF16178" class="sect3"><span class="enumeration_section">18.8 </span>Oracle Data Redaction in a Multitenant Environment
               </h3>
               <div>
                  <p>In a multitenant environment, Oracle Data Redaction policies apply only to the objects within the current pluggable database (PDB). </p>
                  <p>You cannot create a Data Redaction policy for a multitenant container database (CDB). This is because the objects for which you create Data Redaction policies typically reside in a PDB. If you have the <code class="codeph">SYSDBA</code> privilege, then you can list all the PDBs in a CDB by running the <code class="codeph">SHOW PDBS</code> command.
                  </p>
                  <p>As with the CDB root, you cannot create Data Redaction policies in an application root. </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-F4AE4724-5E1F-478C-BF40-999E21189890" name="GUID-F4AE4724-5E1F-478C-BF40-999E21189890"></a><h3 id="MULTI-GUID-F4AE4724-5E1F-478C-BF40-999E21189890" class="sect3"><span class="enumeration_section">18.9 </span>Auditing in a Multitenant Environment
               </h3>
               <div>
                  <p>Auditing tracks changes that users make in the multitenant container database (CDB).</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-562D382F-356F-46FE-B061-CF5E589CCEB8">About Auditing in a Multitenant Environment</a><br>You can use unified auditing in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-335779FD-3DF8-4CBD-AC29-A02389749F93">Example: Auditing the DBA Role in a Multitenant Environment</a><br>The <code class="codeph">CREATE AUDIT POLICY</code> statement can audit roles in a multitenant environment.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a><br>In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6F15B297-08C6-4904-938D-3DAA429E14B0">Fine-Grained Auditing in a Multitenant Environment</a><br><span>You can create fine-grained audit policies in the CDB root, application root, CDB PDBs, and application PDBs.</span></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager.">Managing Security for a Multitenant Environment</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-562D382F-356F-46FE-B061-CF5E589CCEB8" name="GUID-562D382F-356F-46FE-B061-CF5E589CCEB8"></a><h4 id="MULTI-GUID-562D382F-356F-46FE-B061-CF5E589CCEB8" class="sect4"><span class="enumeration_section">18.9.1 </span>About Auditing in a Multitenant Environment
                  </h4>
                  <div>
                     <p>You can use unified auditing in a multitenant environment.</p>
                     <p>You can apply audit settings to individual PDBs or to the CDB, depending on the type of policy. In a multitenant environment, each PDB, including the root, has own unified audit trail.</p>
                     <p>See the following sections for more information:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Unified audit policies created with the CREATE AUDIT POLICY and AUDIT statements:</span> You can create policies for both the root and individual PDBs. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Fine-grained audit policies:</span> You can create policies for individual PDBs only, not the root. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Purging the audit trail:</span> You can perform purge operations for both the root and individual PDBs. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/introduction-to-auditing.html#DBSEG-GUID-94381464-53A3-421B-8F13-BD171C867405" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="Auditing tracks changes that users make in the multitenant container database (CDB).">Auditing in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93" name="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93"></a><h4 id="MULTI-GUID-335779FD-3DF8-4CBD-AC29-A02389749F93" class="sect4"><span class="enumeration_section">18.9.2 </span>Example: Auditing the DBA Role in a Multitenant Environment
                  </h4>
                  <div>
                     <p>The <code class="codeph">CREATE AUDIT POLICY</code> statement can audit roles in a multitenant environment.
                     </p>
                     <p>The following example shows how to audit a predefined common role <code class="codeph">DBA</code> in a multitenant environment.
                     </p>
                     <div class="example" id="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93__CHDFEBFF">
                        <p class="titleinexample">Example 18-4 Auditing the DBA Role in a Multitenant Environment</p><pre class="pre codeblock"><code>CREATE AUDIT POLICY role_dba_audit_pol 
 ROLES DBA
 CONTAINER = ALL;

AUDIT POLICY role_dba_audit_pol;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="Auditing tracks changes that users make in the multitenant container database (CDB).">Auditing in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" name="GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB"></a><h4 id="MULTI-GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" class="sect4"><span class="enumeration_section">18.9.3 </span>Unified Audit Policies or AUDIT Settings in a Multitenant Environment
                  </h4>
                  <div>
                     <p>In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF">About Local, CDB Common, and Application Common Audit Policies</a><br><span>An audit policy can be either a local audit policy, a CDB common audit policy, or an application common audit policy.</span> 
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-BFCF47B5-4A96-4984-A07E-F210DD625590">Traditional Auditing in a Multitenant Environment</a><br>In traditional auditing (not unified auditing), the <code class="codeph">AUDIT</code> and <code class="codeph">NOAUDIT</code> statements can audit statements and privileges in a multitenant environment.
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F">Configuring a Local Unified Audit Policy or Common Unified Audit Policy</a><br>The <code class="codeph">CONTAINER</code> clause is specific to multitenant environment use for the <code class="codeph">CREATE AUDIT POLICY</code> statement. 
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-92AAA230-841F-4214-940E-C7C47AB0CA39">Example: Local Unified Audit Policy</a><br>The <span class="apiname" translate="no">CREATE AUDIT POLICY</span> statement can create a local unified audit policy in either the root or a PDB.
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0">Example: CDB Common Unified Audit Policy</a><br>The <span class="apiname" translate="no">CREATE AUDIT POLICY</span> statement can create a CDB common unified audit policy.
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C">Example: Application Common Unified Audit Policy</a><br>For application container common unified audit policies, you can audit action options and system privilege options, and refer to common objects and roles. 
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E">How Local or Common Audit Policies or Settings Appear in the Audit Trail</a><br>You can query unified audit policy views from either the root or the PDB in which the action occurred.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="Auditing tracks changes that users make in the multitenant container database (CDB).">Auditing in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF" name="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF"></a><h5 id="MULTI-GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF" class="sect5"><span class="enumeration_section">18.9.3.1 </span><span>About Local, CDB Common, and Application Common Audit Policies</span></h5>
                     <div>
                        <p><span>An audit policy can be either a local audit policy, a CDB common audit policy, or an application common audit policy.</span> 
                        </p>
                        <p>This applies to both unified audit policies and policies that are created using the <code class="codeph">AUDIT</code> SQL statement.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Local audit policy.</span> This type of policy can exist in either the root (CDB or application) or the PDB (CDB or application). A local audit policy that exists in the root can contain object audit options for both local and common objects. Both local and common users who have been granted the <code class="codeph">AUDIT_ADMIN</code> role can enable local policies: local users from their PDBs and common users from the root or the PDB to which they have privileges. You can enable a local audit policy for both local and common users and roles. 
                              </p>
                              <p>You can create local audit policies for application local objects and application local roles, as well as system action options and system privilege options. You cannot enforce a local audit policy for a common user across all containers, nor can you enforce a common audit policy for a local user.</p>
                           </li>
                           <li>
                              <p><span class="bold">CDB common audit policy.</span> This type of policy is available to all PDBs in the multitenant environment. Only common users who have been granted the <code class="codeph">AUDIT_ADMIN</code> role can create and maintain common audit policies. You can enable common audit policies only for common users. You must create common audit policies only in the root. This type of policy can contain object audit options of only common objects, and be enabled only for common users. You can enable a common audit policy for common users and roles only. 
                              </p>
                              <p>You cannot enforce a common audit policy for a local user across all containers.</p>
                           </li>
                           <li>
                              <p><span class="bold">Application common audit policy.</span> Similar to CDB common audit policies, this type of policy is available to all PDBs in the multitenant environment. You can create common audit policies for application common objects and application common roles, as well as system action options and system privilege options. You can only create this type of policy in the application root container, but you can enable it on both application common users and CDB common users. If you want to audit objects, then ensure that these objects are application common objects. You can determine whether an object is an application common object by querying the <code class="codeph">SHARING</code> column of the <code class="codeph">DBA_OBJECTS</code> data dictionary view. 
                              </p>
                           </li>
                        </ul>
                        <p>By default, audit policies are local to the current PDB, for both CDB and application scenarios. </p>
                        <p>The following table explains how audit policies apply in different multitenant environments.</p>
                        <div class="tblformal" id="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF__HOWAUDITPOLICIESAPPLYTOTHECDBROOTAP-FE335581">
                           <p class="titleintable">Table 18-1 How Audit Policies Apply to the CDB Root, Application Root, and Individual PDBs </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="How Audit Policies Apply to the CDB Root, Application Root, and Individual PDBs " summary="This table shows how audit policies apply to the CDB root, application root, and individual PDBs. Columns are from left to right Audit Option Type, CDB Root, Application Root, and Individual PDB." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d87660e6641">Audit Option Type</th>
                                    <th align="left" valign="bottom" id="d87660e6643">CDB Root</th>
                                    <th align="left" valign="bottom" id="d87660e6645">Application Root</th>
                                    <th align="left" valign="bottom" id="d87660e6647">Individual PDB</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6651" headers="d87660e6641 ">
                                       <p>Common audit statement or audit policy</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6643 ">
                                       <p>Applies to CDB common users</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6645 ">
                                       <p>Applies to CDB common users</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6647 ">
                                       <p>Applies to CDB common users</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6664" headers="d87660e6641 ">
                                       <p>Application container common audit statement or audit policy</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6643 ">
                                       <p>Not applicable</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6645 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Applies to CDB common users and are valid for the current application container only</p>
                                          </li>
                                          <li>
                                             <p>Applies to application container common users</p>
                                          </li>
                                       </ul>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6647 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Applies to CDB common users and are valid for this application container only</p>
                                          </li>
                                          <li>
                                             <p>Applies to application common users</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6687" headers="d87660e6641 ">
                                       <p>Local audit statement or audit policy</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6643 ">
                                       <p>Local configurations not allowed</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6645 ">
                                       <p>Local configurations not allowed</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6647 ">
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Applies to CDB common users</p>
                                          </li>
                                          <li>
                                             <p>Applies to application common users</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590" name="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590"></a><h5 id="MULTI-GUID-BFCF47B5-4A96-4984-A07E-F210DD625590" class="sect5"><span class="enumeration_section">18.9.3.2 </span>Traditional Auditing in a Multitenant Environment
                     </h5>
                     <div>
                        <p>In traditional auditing (not unified auditing), the <code class="codeph">AUDIT</code> and <code class="codeph">NOAUDIT</code> statements can audit statements and privileges in a multitenant environment.
                        </p>
                        <p>To configure the audit policy to be either a local audit policy or a common audit policy, you must include the <code class="codeph">CONTAINER</code> clause, as you normally do for other SQL creation or modification statements. If you want to audit an application container, then you can audit SQL statement and system privileges performed by local and common users and roles. The audit record will be created in the container in which the action was performed.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you want to apply the <code class="codeph">AUDIT</code> or <code class="codeph">NOAUDIT</code> statement to the current CDB or application PDB, then in this PDB, you must set <code class="codeph">CONTAINER</code> to <code class="codeph">CURRENT</code>. For example:
                              </p><pre class="pre codeblock"><code>AUDIT DROP ANY TABLE BY SYSTEM BY ACCESS CONTAINER = CURRENT;</code></pre></li>
                           <li>
                              <p><span>If you want to apply the <code class="codeph">AUDIT</code> or <code class="codeph">NOAUDIT</code> statement to the entire multitenant environment, then in the CDB root, then you must set <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code>. For an application container, you would set it in the application root. For example: </span></p><pre class="pre codeblock"><code>AUDIT DROP ANY TABLE BY SYSTEM BY ACCESS CONTAINER = ALL;</code></pre></li>
                        </ul>
                        <p>To find if a traditional audit option is designed for use in an application container, perform a join query with the <code class="codeph">DBA_OBJ_AUDIT_OPTS</code> and <code class="codeph">DBA_OBJECTS</code> data dictionary views, by using the <code class="codeph">OWNER</code> and <code class="codeph">OBJECT_NAME</code> columns in both views, and the <code class="codeph">APPLICATION</code> column in <code class="codeph">DBA_OBJECTS</code>.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF-GUID-ADF45B07-547A-4096-8144-50241FA2D8DD" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590__GUID-E65E8AEE-C77D-41EC-A5E0-144B6C44090D">
                           <p class="notep1">See Also:</p>
                           <p><span><cite>Oracle Database SQL Language Reference</cite></span> for more information about the traditional <a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF01107" target="_blank"><code class="codeph">AUDIT</code></a> and <a href="../sqlrf/NOAUDIT-Traditional-Auditing.html#SQLRF01607" target="_blank"><code class="codeph">NOAUDIT</code></a> SQL statements
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F" name="GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F"></a><h5 id="MULTI-GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F" class="sect5"><span class="enumeration_section">18.9.3.3 </span>Configuring a Local Unified Audit Policy or Common Unified Audit Policy
                     </h5>
                     <div>
                        <p>The <code class="codeph">CONTAINER</code> clause is specific to multitenant environment use for the <code class="codeph">CREATE AUDIT POLICY</code> statement. 
                        </p>
                        <div class="section">To create a local or common<span> (CDB or application)</span> unified audit policy in either the CDB environment or an application container environment, include the <code class="codeph">CONTAINER</code> clause in the <code class="codeph">CREATE AUDIT POLICY</code> statement. 
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the following syntax to create a local or common unified audit policy: </p><pre class="pre codeblock"><code>CREATE AUDIT POLICY policy_name
 <span class="italic">action1</span> [,<span class="italic">action2</span> ]
 [CONTAINER = {CURRENT | ALL}];
</code></pre></li>
                           </ul>
                           <p>In this specification:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">CURRENT</code> sets the audit policy to be local to the current PDB.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ALL</code> makes the audit policy a common audit policy, that is, available to the entire multitenant environment.
                                 </p>
                              </li>
                           </ul>
                           <p>For example, for a common unified audit policy: </p><pre class="pre codeblock"><code>CREATE AUDIT POLICY dict_updates 
 ACTIONS UPDATE ON SYS.USER$, 
  DELETE ON SYS.USER$, 
  UPDATE ON SYS.LINK$, 
  DELETE ON SYS.LINK$ 
  CONTAINER = ALL;
</code></pre><p>Note the following: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You can set the <code class="codeph">CONTAINER</code> clause for the <code class="codeph">CREATE AUDIT POLICY</code> statement but not for <code class="codeph">ALTER AUDIT POLICY</code> or <code class="codeph">DROP AUDIT POLICY</code>. If you want to change the scope of an existing unified audit policy to use this setting, then you must drop and re-create the policy.
                                 </p>
                              </li>
                              <li>
                                 <p>For <code class="codeph">AUDIT</code> statements, you can set the <code class="codeph">CONTAINER</code> clause for audit settings only if you have an Oracle database that has not been migrated to the Release 12.<span class="italic">x</span> audit features. You cannot use the <code class="codeph">CONTAINER</code> clause in an <code class="codeph">AUDIT</code> statement that is used to enable a unified audit policy. 
                                 </p>
                              </li>
                              <li>
                                 <p>If you are in a PDB, then you can only set the <code class="codeph">CONTAINER</code> clause to <code class="codeph">CURRENT</code>, not <code class="codeph">ALL</code>. If you omit the setting while in the PDB, then the default is <code class="codeph">CONTAINER = CURRENT</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>If you are in the root, then you can set the <code class="codeph">CONTAINER</code> clause to either <code class="codeph">CURRENT</code> if you want the policy to apply to the root only, or to <code class="codeph">ALL</code> if you want the policy to apply to the entire CDB. If you omit the <code class="codeph">CONTAINER</code> clause, then default is <code class="codeph">CONTAINER = CURRENT</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>For objects:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Common audit policies can have common objects only and local audit policies can have both local objects and common objects.</p>
                                    </li>
                                    <li>
                                       <p>You cannot set <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> if the objects involved are local. They must be common objects. 
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>For privileges:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>You can set the <code class="codeph">CONTAINER</code> to <code class="codeph">CURRENT</code> (or omit the <code class="codeph">CONTAINER</code> clause) if the user accounts involved are a mixture of local and common accounts. This creates a local audit configuration that applies only to the current PDB.
                                       </p>
                                    </li>
                                    <li>
                                       <p>You cannot set <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> if the users involved are local users. They must be common users. 
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you set <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> and do not specify a user list (using the <code class="codeph">BY</code> clause in the <code class="codeph">AUDIT</code> statement), then the configuration applies to all common users in each PDB.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>For application containers, you can run a common unified audit policy from the application container script that is used for application install, upgrade, patch, and uninstall operations. To do so: </p>
                                 <ol>
                                    <li>
                                       <p>Create a common unified audit policy in the application container root, and set this policy to <code class="codeph">CONTAINER = ALL</code>. Alternatively, you can include this policy in the script that is described in this next step.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Create a custom version of the script you normally would use to install, upgrade, patch, or uninstall Oracle Database. </p>
                                    </li>
                                    <li>
                                       <p>Within this script, include the SQL statements that you want to audit within the following lines:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL
<span class="italic">List SQL statements here. Separate each statement with a semi-colon.
</span>ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code></pre><p>If you include the unified audit policy in the script, then ensure that you include both the <code class="codeph">CREATE AUDIT POLICY</code> and <code class="codeph">AUDIT POLICY</code> statements.
                                       </p>
                                    </li>
                                 </ol>
                                 <p>After the audit policy is created and enabled, all user access to the application common objects is audited irrespective of whether the audit policy is defined in the database or from the script. </p>
                              </li>
                              <li>
                                 <p>To audit application install, upgrade, patch, and uninstall operations locally in an application root or an application PDB, follow a procedure similar to the preceding procedure for common unified audit policies, but synchronize the application PDB afterward. For example:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION <span class="italic">application_name</span> SYNC;</code></pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="You install, upgrade, or patch an application in an application container.">Managing Applications in an Application Container</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39" name="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39"></a><h5 id="MULTI-GUID-92AAA230-841F-4214-940E-C7C47AB0CA39" class="sect5"><span class="enumeration_section">18.9.3.4 </span>Example: Local Unified Audit Policy
                     </h5>
                     <div>
                        <p>The <span class="apiname" translate="no">CREATE AUDIT POLICY</span> statement can create a local unified audit policy in either the root or a PDB.
                        </p>
                        <p>When you create a local unified audit policy in the root, it only applies to the root and not across the multitenant environment. </p>
                        <p>The following example shows a local unified audit policy that has been created by the common user <code class="codeph">c##sec_admin</code> from a PDB and applied to common user <code class="codeph">c##hr_admin</code>. 
                        </p>
                        <div class="example" id="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39__CHDGAGBG">
                           <p class="titleinexample">Example 18-5 Local Unified Audit Policy</p><pre class="pre codeblock"><code>CONNECT c##sec_admin@hrpdb
Enter password: <span class="italic">password</span>
Connected.

CREATE AUDIT POLICY table_privs
 PRIVILEGES CREATE ANY TABLE, DROP ANY TABLE
 CONTAINER = CURRENT;

AUDIT POLICY table_privs BY c##hr_admin;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0" name="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0"></a><h5 id="MULTI-GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0" class="sect5"><span class="enumeration_section">18.9.3.5 </span>Example: CDB Common Unified Audit Policy
                     </h5>
                     <div>
                        <p>The <span class="apiname" translate="no">CREATE AUDIT POLICY</span> statement can create a CDB common unified audit policy.
                        </p>
                        <p><a href="managing-security-for-a-multitenant-environment.html#GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0__CHDDFHEH">Example 18-6</a> shows a common unified audit policy that has been created by the common user <code class="codeph">c##sec_admin</code> from the root and applied to common user <code class="codeph">c##hr_admin</code>. 
                        </p>
                        <div class="example" id="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0__CHDDFHEH">
                           <p class="titleinexample">Example 18-6 Common Unified Audit Policy</p><pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
Connected.

CREATE AUDIT POLICY admin_pol
 ACTIONS CREATE TABLE, ALTER TABLE, DROP TABLE
 ROLES c##hr_mgr, c##hr_sup
 CONTAINER = ALL;

AUDIT POLICY admin_pol BY c##hr_admin;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C" name="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C"></a><h5 id="MULTI-GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C" class="sect5"><span class="enumeration_section">18.9.3.6 </span>Example: Application Common Unified Audit Policy
                     </h5>
                     <div>
                        <p>For application container common unified audit policies, you can audit action options and system privilege options, and refer to common objects and roles. </p>
                        <p>You can create the application common audit policy only from the application root, and enable the policy for both application common users and CDB common users. </p>
                        <p>The following example shows how to create a policy that audits the application common user <code class="codeph">SYSTEM</code> for the application container <code class="codeph">app_pdb</code>. The audit policy audits <code class="codeph">SELECT</code> actions on the <code class="codeph">SYSTEM.utils_tab</code> table and on <code class="codeph">DROP TABLE</code> actions on any of the PDBs in the container database, including the CDB root. The policy also audits the use of the <code class="codeph">SELECT ANY TABLE</code> system privilege across all containers.
                        </p>
                        <div class="example" id="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C__EXAMPLETITLE-FE09F6DA">
                           <p class="titleinexample">Example 18-7 Application Common Unified Audit Policy</p><pre class="pre codeblock"><code>CONNECT c##sec_admin@app_pdb
Enter password: <span class="italic">password</span>
Connected.

CREATE AUDIT POLICY app_pdb_admin_pol
 ACTIONS SELECT ON hr_app_cdb.utils_tab, DROP TABLE
 PRIVILEGES SELECT ANY TABLE
 CONTAINER = ALL;

AUDIT POLICY app_pdb_admin_pol by SYSTEM, c##hr_admin;</code></pre><p>In the preceding example, setting <code class="codeph">CONTAINER</code> to <code class="codeph">ALL</code> applies the policy only to all the relevant object accesses in the application root and on all the application PDBs that belong to the application root. It does not apply the policy outside this scope. 
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E" name="GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E"></a><h5 id="MULTI-GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E" class="sect5"><span class="enumeration_section">18.9.3.7 </span>How Local or Common Audit Policies or Settings Appear in the Audit Trail
                     </h5>
                     <div>
                        <p>You can query unified audit policy views from either the root or the PDB in which the action occurred.</p>
                        <p>You can perform the following types of queries:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Audit records from all PDBs.</span> The audit trail reflects audited actions that have been performed in the PDBs. For example, if user <code class="codeph">lbrown</code> in <code class="codeph">PDB1</code> performs an action that has been audited by either a common or a local audit policy, then the audit trail will capture this action. The <code class="codeph">DBID</code> column in the <code class="codeph">UNIFIED_AUDIT_TRAIL</code> data dictionary view indicates the PDB in which the audited action takes place and to which the policy applies. If you want to see audit records from all PDBs, you should query the <code class="codeph">CDB_UNIFIED_AUDIT_TRAIL</code> data dictionary view from the root.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Audit records from common audit policies.</span> This location is where the common audit policy results in an audit record. The audit record can be generated anywhere in the multitenant environment—the root or the PDBs, depending on where the action really occurred. For example, the common audit policy <code class="codeph">fga_pol</code> audits the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_FGA</code> PL/SQL package, and if this action occurs in <code class="codeph">PDB1</code>, then the audit record is generated in <code class="codeph">PDB1</code> and not in the root. Hence, the audit record can be seen in PDB1. 
                              </p>
                              <p>You can query the <code class="codeph">UNIFIED_AUDIT_TRAIL</code> data dictionary view for the policy from either the root or a PDB if you include a <code class="codeph">WHERE</code> clause for the policy name (for example, <code class="codeph">WHERE UNIFIED_AUDIT_POLICIES = 'FGA_POL'</code>).
                              </p>
                           </li>
                        </ul>
                        <p>The following example shows how to find the results of a common unified audit policy:</p><pre class="pre codeblock"><code>CONNECT c##sec_admin
Enter password: <span class="italic">password</span>
Connected.

SELECT DBID, ACTION_NAME, OBJECT_SCHEMA, OBJECT_NAME FROM CDB_UNIFIED_AUDIT_TRAIL WHERE DBUSERNAME = 'c##hr_admin';
46892-1
DBID        ACTION_NAME  OBJECT_SCHEMA  OBJECT_NAME
----------- -----------  -------------  -----------
653916017   UPDATE       HR             EMPLOYEES
653916018   UPDATE       HR             JOB_HISTORY
653916017   UPDATE       HR             JOBS </code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="In a multitenant environment, you can create unified audit policies for individual PDBs and in the root.">Unified Audit Policies or AUDIT Settings in a Multitenant Environment</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6F15B297-08C6-4904-938D-3DAA429E14B0" name="GUID-6F15B297-08C6-4904-938D-3DAA429E14B0"></a><h4 id="MULTI-GUID-6F15B297-08C6-4904-938D-3DAA429E14B0" class="sect4"><span class="enumeration_section">18.9.4 </span>Fine-Grained Auditing in a Multitenant Environment
                  </h4>
                  <div>
                     <p><span>You can create fine-grained audit policies in the CDB root, application root, CDB PDBs, and application PDBs.</span></p>
                     <p>Note the following general rules about fine-grained audit policies in a multitenant environment: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You cannot create fine-grained audit policies on <code class="codeph">SYS</code> objects. 
                           </p>
                        </li>
                        <li>
                           <p>You cannot create fine-grained audit policies, either local or application common, for extended data link objects. </p>
                        </li>
                        <li>
                           <p>When you create a fine-grained audit policy in the CDB root, the policy cannot be applied to all PDBs. It only applies to objects within the CDB root. (In other words, there is no such thing as a common fine-grained audit policy for the CDB root.) If you want to create a fine-grained audit policy to audit a common object’s access in all the PDBs, then you must explicitly create that policy in each PDB and then enable it on the common objects that is accessible in the PDB.</p>
                        </li>
                        <li>
                           <p>When you create a fine-grained audit policy in a PDB, it applies only to objects within the PDB.</p>
                        </li>
                        <li>
                           <p>You can create application common fine-grained audit policies only if you are connected to the application root and only within the <code class="codeph">BEGIN</code>/<code class="codeph">END</code> block. If you are connected to the application root and create the fine-grained audit policy outside the <code class="codeph">BEGIN</code>/<code class="codeph">END</code> block, then the fine-grained audit policy is created in the application root.
                           </p>
                        </li>
                        <li>
                           <p>You cannot create application common fine-grained audit policies on local PDB objects.</p>
                        </li>
                        <li>
                           <p>If the application common fine-grained audit policy has a handler, then this handler must be owned by either an application common user or a CDB common user. </p>
                        </li>
                        <li>
                           <p>You can create an application fine-grained audit policy on local (PDB) objects and CDB common objects. Because the policy is local to its container, the object on which the policy is defined is audited only in the particular container where the policy is defined. For example, if you create a fine-grained audit policy in the <code class="codeph">hr_pdb</code> PDB, the object for which you create this policy must exist in the <code class="codeph">hr_pdb</code> PDB.
                           </p>
                        </li>
                        <li>
                           <p>You cannot create local fine-grained audit policies in an application PDB on object linked and extended data link objects. On metadata-linked objects are allowed in the fine-grained audit policy.</p>
                        </li>
                        <li>
                           <p>Application root local policies are allowed for all application common objects. </p>
                        </li>
                        <li>
                           <p>When you create a fine-grained audit policy as a common audit policy in an application root, it will be effective in each PDB that belongs to this application root. Therefore, any access to the application common object and CDB common object (on which the application common fine-grained audit policy is defined) from the application PDB is audited in the fine-grained audit trail in that application PDB.</p>
                        </li>
                        <li>
                           <p>When you create scripts for application install, upgrade, patch, or uninstall operations, you can include SQL statements within the <code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code> and <code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> END INSTALL</code> blocks to perform various operations. You can include fine-grained audit policy statements only within these blocks.
                           </p>
                        </li>
                        <li>
                           <p>You can only enable, disable, or drop application common fine-grained audit policies from the application root, and from within a <code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code> and <code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> END INSTALL</code> block in a script.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-audit-policies.html#DBSEG-GUID-B706FF6F-13A6-4944-AFCB-29971F5076FD" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="Auditing tracks changes that users make in the multitenant container database (CDB).">Auditing in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
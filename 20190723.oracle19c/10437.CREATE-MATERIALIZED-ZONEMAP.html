<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>CREATE MATERIALIZED ZONEMAP</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="CREATE-MATERIALIZED-VIEW-LOG.html" title="Previous" type="text/html">
      <link rel="next" href="CREATE-OPERATOR.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-MATERIALIZED-VIEW-LOG.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CREATE-OPERATOR.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-CREATE-LIBRARY-to-CREATE-SCHEMA.html" property="item" typeof="WebPage"><span property="name"> SQL Statements: CREATE LIBRARY to CREATE SCHEMA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">CREATE MATERIALIZED ZONEMAP</li>
            </ol>
            <a id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702" name="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702"></a><a id="SQLRF56868"></a><a id="SQLRF56869"></a><a id="SQLRF56870"></a><a id="SQLRF56871"></a><a id="SQLRF56872"></a><a id="SQLRF56873"></a><a id="SQLRF56886"></a><a id="SQLRF56874"></a><a id="SQLRF56877"></a><a id="SQLRF56888"></a><a id="SQLRF56875"></a><a id="SQLRF56876"></a><a id="SQLRF56878"></a><a id="SQLRF56879"></a><a id="SQLRF56938"></a><a id="SQLRF56880"></a><a id="SQLRF56881"></a><a id="SQLRF56882"></a><a id="SQLRF56884"></a><a id="SQLRF56939"></a><a id="SQLRF56940"></a><a id="SQLRF56941"></a><a id="SQLRF56942"></a><a id="SQLRF56943"></a><a id="SQLRF56944"></a><a id="SQLRF56945"></a><a id="SQLRF56946"></a><a id="SQLRF56885"></a><a id="SQLRF56947"></a><a id="SQLRF56867"></a>
            
            <h2 id="SQLRF-GUID-1E5048FC-3D28-49BC-80FE-7871568B4702" class="sect2">CREATE MATERIALIZED ZONEMAP</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-4ECDEB02-88A0-4C9B-8286-835C5839272D">Purpose</p>
                  <p>Use the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> statement to create a zone map.
                  </p>
                  <p>A <span class="bold">zone</span> <span class="bold">map</span> is a special type of materialized view that stores information about zones. A <span class="bold">zone</span> is a set of contiguous data blocks on disk that stores the values of one or more table columns. Multiple zones are usually required to store all of the values of the table columns. A zone map tracks the minimum and maximum table column values stored in each zone.
                  </p>
                  <p>Zone maps enable you to reduce the I/O and CPU costs of table scans. When a SQL statement contains predicates on columns in a zone map, the database compares the predicate values to the minimum and maximum table column values stored in each zone to determine which zones to read during SQL execution.</p>
                  <p>Oracle Database supports the following types of zone maps:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A <span class="bold">basic</span> <span class="bold">zone</span> <span class="bold">map</span> is defined on a single table and maintains zone information for specified columns in that table.
                        </p>
                        <p>You can create a basic zone map either by specifying the <span class="italic"><code class="codeph">create_zonemap_on_table</code></span> clause, or by specifying the <span class="italic"><code class="codeph">create_zonemap_as_subquery</code></span> clause where the <code class="codeph">FROM</code> clause of the defining subquery specifies a single table.
                        </p>
                     </li>
                     <li>
                        <p>A <span class="bold">join</span> <span class="bold">zone</span> <span class="bold">map</span> is defined on two or more joined tables and maintains zone information for specified columns in any of the joined tables.
                        </p>
                        <p>You can create a join zone map by specifying the <span class="italic"><code class="codeph">create_zonemap_as_subquery</code></span> clause. The <code class="codeph">FROM</code> clause of the defining subquery must specify a table that is left outer joined with one or more other tables.
                        </p>
                     </li>
                  </ul>
                  <p>Zone maps are commonly used with star schemas in data warehousing environments. However, a star schema is not a requirement for creating a zone map. In either case, this reference uses star schema terminology to refer to the tables in a zone map. In a join zone map, the outer table of the join(s) is referred to as the <span class="bold">fact</span> <span class="bold">table</span>, and the tables with which this table is joined are referred to as <span class="bold">dimension</span> <span class="bold">tables</span>. Collectively these tables are called the <span class="bold">base</span> <span class="bold">tables</span> of the zone map. In a basic zone map, the single table on which the zone map is defined is referred to as both the fact table and the base table of the zone map.
                  </p>
                  <p>A base table of a zone map can be a partitioned or composite-partitioned table. In this case, the zone map maintains minimum and maximum column values for each partition (and subpartition) as well as for each zone.</p>
                  <p>You can create zone maps for use with or without attribute clustering:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>To create a zone map for use with attribute clustering, use either of the following methods:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> statement and include attribute clustered columns in the zone map. Refer to the <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__CEGIDCDI">attribute_clustering_clause</a></span> of <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> and the <span class="italic"><a href="ALTER-TABLE.html#GUID-552E7373-BF93-477D-9DA3-B2C9386F2877__CIHFJJFI">attribute_clustering_clause</a></span> clause of <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> for more information.
                              </p>
                           </li>
                           <li>
                              <p>Specify the <code class="codeph">WITH</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> clause while creating or modifying an attribute clustered table. Refer to the <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__CEGDJAGF">zonemap_clause</a></span> of <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> and the <a href="ALTER-TABLE.html#GUID-552E7373-BF93-477D-9DA3-B2C9386F2877__CIHGEACD">MODIFY CLUSTERING</a> clause of <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> for more information.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>To create a zone map for use without attribute clustering, use the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> statement and include columns that are not attribute clustered in the zone map.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-8331187C-B5D5-4064-B70D-CE35AE446193">
                     <p class="notep1">See Also:</p>
                     <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information on zone maps
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACECGEF">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-D635E12D-3252-4861-8E36-60FA5BA365E1">Prerequisites</p>
                  <p>To create a zone map <span class="bold">in your own schema:</span></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You must have the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> system privilege and either the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege. 
                        </p>
                     </li>
                     <li>
                        <p>You must have access to any base tables of the zone map that you do not own, either through a <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege on each of the tables or through the <code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> or <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege.
                        </p>
                     </li>
                  </ul>
                  <p>To create a zone map <span class="bold">in another user's schema:</span></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You must have the <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> system privilege.
                        </p>
                     </li>
                     <li>
                        <p>The owner of the zone map must have the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> system privilege. The owner must also have access to any base tables of the zone map that the schema owner does not own, either through a <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege on each of the tables or through the <code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> or <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege.
                        </p>
                     </li>
                  </ul>
                  <p>To create a refresh-on-commit zone map (<code class="codeph">REFRESH</code> <code class="codeph">ON</code> <code class="codeph">COMMIT</code> clause), in addition to the preceding privileges, you must have the <code class="codeph">ON</code> <code class="codeph">COMMIT</code> <code class="codeph">REFRESH</code> object privilege on any base tables that you do not own or you must have the <code class="codeph">ON</code> <code class="codeph">COMMIT</code> <code class="codeph">REFRESH</code> system privilege. Unlike materialized views, you can create a refresh-on-commit zone map even if there are no materialized view logs on the base tables.
                  </p>
                  <p>When you create a zone map, Oracle Database creates one internal table and at least one index, all in the schema of the zone map. Oracle Database uses these objects to maintain the zone map data. You must have the privileges necessary to create these objects, and you must have sufficient quota in the target tablespace to store these objects or you must have the <code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code> system privilege.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-19457C1D-CFC8-4D1D-9D0C-2F46E807627A">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-6D2C23A8-A05A-437F-BC76-CFEFF8AEDF61"><span class="italic">create_materialized_zonemap</span>::=
                  </p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-33701F6B-9FB1-4ED4-A9D1-B6764C83598E"><img src="img/create_materialized_zonemap.gif" alt="Description of create_materialized_zonemap.eps follows" title="Description of create_materialized_zonemap.eps follows" longdesc="img_text/create_materialized_zonemap.html"><br><a href="img_text/create_materialized_zonemap.html">Description of the illustration create_materialized_zonemap.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-957066EA-FECA-4CBA-A24D-211CBFE63DAC"><span class="italic">create_zonemap_on_table</span>::=
                  </p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-7D3315BF-5260-4EFD-B251-251DA2B32B9C"><img src="img/create_zonemap_on_table.gif" alt="Description of create_zonemap_on_table.eps follows" title="Description of create_zonemap_on_table.eps follows" longdesc="img_text/create_zonemap_on_table.html"><br><a href="img_text/create_zonemap_on_table.html">Description of the illustration create_zonemap_on_table.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-95A94D92-F6AB-40B4-9711-F71C73ABA049"><span class="italic">create_zonemap_as_subquery</span>::=
                  </p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-E36B94DD-84EB-46D4-A91F-DFBAB224841B"><img src="img/create_zonemap_as_subquery.gif" alt="Description of create_zonemap_as_subquery.eps follows" title="Description of create_zonemap_as_subquery.eps follows" longdesc="img_text/create_zonemap_as_subquery.html"><br><a href="img_text/create_zonemap_as_subquery.html">Description of the illustration create_zonemap_as_subquery.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-6E21C8DE-7667-4A46-9FD8-1EAB0D447143"><span class="italic">zonemap_attributes</span>::=
                  </p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-0DC61354-39AE-465F-AF54-2BEDB759FB07"><img src="img/zonemap_attributes.gif" alt="Description of zonemap_attributes.eps follows" title="Description of zonemap_attributes.eps follows" longdesc="img_text/zonemap_attributes.html"><br><a href="img_text/zonemap_attributes.html">Description of the illustration zonemap_attributes.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-7F754CF6-A50E-472F-9F8F-539A0DBAA730"><span class="italic">zonemap_refresh_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-E7973BF2-8022-483F-9938-29BA82BEFAEA"><img src="img/zonemap_refresh_clause.gif" alt="Description of zonemap_refresh_clause.eps follows" title="Description of zonemap_refresh_clause.eps follows" longdesc="img_text/zonemap_refresh_clause.html"><br><a href="img_text/zonemap_refresh_clause.html">Description of the illustration zonemap_refresh_clause.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnote" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-35CA59B3-CEDE-4E2D-B2C7-4AB29C0787FE">
                     <p class="notep1">Note:</p>
                     <p>When specifying the <span class="italic"><code class="codeph">zonemap_refresh_clause</code></span>, you must specify at least one clause after the <code class="codeph">REFRESH</code> keyword.
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-A7B1C367-8080-48B8-9395-25EA76684493">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-87F05393-524C-41BD-A763-A10119116694"><span class="italic">create_zonemap_on_table</span></p>
                  <p>Use this clause to create a basic zone map.</p>
                  <p><span class="bold">ON Clause</span></p>
                  <p>In the <code class="codeph">ON</code> clause, first specify the fact table for the zone map, and then inside the parentheses specify one or more columns of the fact table to be included in the zone map.
                  </p>
                  <p>For each specified fact table <span class="italic"><code class="codeph">column</code></span>, Oracle creates two columns in the zone map. These two columns contain the minimum and maximum values of the fact table column in each zone. Oracle generates names for the zone map columns of the form <code class="codeph">MIN_1_</code><span class="italic"><code class="codeph">column</code></span> and <code class="codeph">MAX_1_</code><span class="italic"><code class="codeph">column</code></span> for the first specified fact table <span class="italic"><code class="codeph">column</code></span>, <code class="codeph">MIN_2_</code><span class="italic"><code class="codeph">column</code></span> and <code class="codeph">MAX_2_</code><span class="italic"><code class="codeph">column</code></span> for the second specified fact table <span class="italic"><code class="codeph">column</code></span>, and so on.
                  </p>
                  <p>If you omit <span class="italic"><code class="codeph">schema</code></span>, then Oracle assumes the fact table is in your own schema. The fact table can be a table or a materialized view
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-B5F4646C-5EE6-4CEF-9A4A-3016FC5F10CA"><span class="italic">create_zonemap_as_subquery</span></p>
                  <p>Use this clause to create a basic zone map or a join zone map. To create a basic zone map, specify a single base table in the <code class="codeph">FROM</code> clause of the defining subquery. To create a join zone map, specify a table that is left outer joined to one or more other tables in the <code class="codeph">FROM</code> clause of the defining subquery.
                  </p>
                  <p><span class="bold"><span class="italic">column_alias</span></span></p>
                  <p>You can specify a column alias for each table column to be included in the zone map. The column alias list explicitly resolves any column name conflict, eliminating the need to specify aliases in the <code class="codeph">SELECT</code> list of the defining subquery. If you specify any column alias in this clause, then you must specify an alias for each column in the <code class="codeph">SELECT</code> list of the defining subquery. The first column alias you specify must be <code class="codeph">ZONE_ID$</code>, which corresponds to the first column in the <code class="codeph">SELECT</code> list, the <code class="codeph">SYS_OP_ZONE_ID</code> function expression.
                  </p>
                  <p><span class="bold">AS</span> <span class="bold"><span class="italic">query_block</span></span></p>
                  <p>Specify the defining subquery of the zone map. The subquery must consist of a single <span class="italic"><code class="codeph">query_block</code></span>. You can specify only the <code class="codeph">SELECT</code>, <code class="codeph">FROM</code>, <code class="codeph">WHERE</code>, and <code class="codeph">GROUP</code> <code class="codeph">BY</code> clauses of <span class="italic"><code class="codeph">query_block</code></span>, and those clauses must satisfy the following requirements:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The first column in the <code class="codeph">SELECT</code> list must be the <code class="codeph">SYS_OP_ZONE_ID</code> function expression. Refer to <a href="SYS_OP_ZONE_ID.html#GUID-947900CE-F4E0-43B5-B30C-4FDDA3913F17">SYS_OP_ZONE_ID</a> for more information.
                        </p>
                     </li>
                     <li>
                        <p>The remaining columns in the <code class="codeph">SELECT</code> list must be function expressions that return minimum and maximum values for the columns you want to include in the zone map. For each column, specify a pair of function expressions of the following form:
                        </p><pre class="oac_no_warn" dir="ltr">MIN([<span class="italic">table</span>.]<span class="italic">column</span>), MAX([<span class="italic">table</span>.]<span class="italic">column</span>)
</pre><p>For <span class="italic"><code class="codeph">table</code></span>, specify the name or table alias for the table that contains the column. The table can be a fact table or dimension table. For <span class="italic"><code class="codeph">column</code></span>, specify the name or column alias for the column.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">FROM</code> clause can specify a fact table alone, or a fact table and one or more dimension tables with each dimension table left outer joined to the fact table. You can specify <code class="codeph">LEFT</code> <code class="codeph">[OUTER]</code> <code class="codeph">JOIN</code> syntax in the <code class="codeph">FROM</code> clause, or apply the outer join operator (+) to dimension table columns in the join condition in the <code class="codeph">WHERE</code> clause. You can optionally specify a table alias for any of the tables in the <code class="codeph">FROM</code> clause. Fact tables and dimension tables can be tables or materialized views.
                        </p>
                     </li>
                     <li>
                        <p>In the <code class="codeph">WHERE</code> clause, you can specify only left outer join conditions using the outer join operator(+).
                        </p>
                     </li>
                     <li>
                        <p>You must specify a <code class="codeph">GROUP</code> <code class="codeph">BY</code> clause with the same <code class="codeph">SYS_OP_ZONE_ID</code> function expression that you specified for the first column of the <code class="codeph">SELECT</code> list.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-88272DE3-A721-440B-BAF6-C01086DFEB02"><span class="italic">schema</span></p>
                  <p>Specify the schema to contain the zone map. If you omit <span class="italic"><code class="codeph">schema</code></span>, then Oracle Database creates the zone map in your schema. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-48650BBD-B2F9-4400-8BB4-84A900A7EFAC"><span class="italic">zonemap_name</span></p>
                  <p>Specify the name of the zone map to be created. The name must satisfy the requirements listed in <span class="q">"<a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">Database Object Naming Rules</a>"</span>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-B1DEF4D7-B40B-441C-BE38-F599759AEADC"><span class="italic">zonemap_attributes</span></p>
                  <p>Use this clause to specify the following attributes for the zone map: <code class="codeph">TABLESPACE</code>, <code class="codeph">SCALE</code>, <code class="codeph">PCTFREE</code>, <code class="codeph">PCTUSED</code>, and <code class="codeph">CACHE</code> or <code class="codeph">NOCACHE</code>.
                  </p>
                  <p><span class="bold">TABLESPACE</span></p>
                  <p>Specify the <span class="italic"><code class="codeph">tablespace</code></span> in which the zone map is to be created. If you omit this clause, then Oracle Database creates the zone map in the default tablespace of the schema containing the zone map.
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACFGGDJ"><span class="bold">SCALE</span></p>
                  <p>This clause lets you specify the zone map scale, which determines the number of contiguous disk blocks that form a zone. The scale is an integer value that represents a power of 2. For example, a scale of 10 means up to 2 raised to the 10th power, or 1024, contiguous disk blocks will form a zone. For <span class="italic"><code class="codeph">integer</code></span>, specify a value between 4 and 16, inclusive. The recommended value is 10; this is the default.
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACDIEDG"><span class="bold">PCTFREE</span></p>
                  <p>Specify an <span class="italic"><code class="codeph">integer</code></span> representing the percentage of space in each data block of the zone map reserved for future updates to rows of the zone map. The integer value must be between 0 and 99, inclusive. The default value is 10. Refer to <span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393">physical_attributes_clause</a></span> for more information on the <code class="codeph">PCTFREE</code> parameter.
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACJGFEF"><span class="bold">PCTUSED</span></p>
                  <p>Specify an <span class="italic"><code class="codeph">integer</code></span> representing the minimum percentage of used space that Oracle maintains for each data block of the zone map. The integer value must be between 0 and 99, inclusive. The default value is 40. Refer to <span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393">physical_attributes_clause</a></span> for more information on the <code class="codeph">PCTUSED</code> parameter.
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACIGEHI"><span class="bold">CACHE | NOCACHE</span></p>
                  <p>For data that will be accessed frequently, <code class="codeph">CACHE</code> specifies that the blocks retrieved for this zone map are placed at the most recently used end of the least recently used (LRU) list in the buffer cache when a full table scan is performed.
                  </p>
                  <p><code class="codeph">NOCACHE</code> specifies that the blocks are placed at the least recently used end of the LRU list. The default is <code class="codeph">NOCACHE</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACBDIJH">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-69785C68-079A-415F-AFCB-6E79A66A205B"><span class="italic">zonemap_refresh_clause</span></p>
                  <p>Use this clause to specify the default refresh method and mode for the zone map. If you do not specify a refresh method (<code class="codeph">FAST</code>, <code class="codeph">COMPLETE</code>, or <code class="codeph">FORCE</code>), then <code class="codeph">FORCE</code> is the default method. If you do not specify a refresh mode (<code class="codeph">ON</code> clauses), then <code class="codeph">ON</code> <code class="codeph">LOAD</code> <code class="codeph">DATA</code> <code class="codeph">MOVEMENT</code> is the default mode.
                  </p>
                  <p><span class="bold">FAST</span></p>
                  <p>Specify <code class="codeph">FAST</code> to indicate the fast refresh method, which performs the refresh according to the changes that have occurred to the base tables. While zone maps are internally implemented as a type of materialized view, materialized view logs on base tables are not needed to perform a fast refresh of a zone map
                  </p>
                  <p><span class="bold">COMPLETE</span></p>
                  <p>Specify <code class="codeph">COMPLETE</code> to indicate the complete refresh method, which is implemented by executing the defining query of the zone map. If you request a complete refresh, then Oracle Database performs a complete refresh even if a fast refresh is possible.
                  </p>
                  <p><span class="bold">FORCE</span></p>
                  <p>Specify <code class="codeph">FORCE</code> to indicate that when a refresh occurs, Oracle Database will perform a fast refresh if one is possible or a complete refresh if fast refresh is not possible. This is the default.
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACFCGJJ"><span class="bold">ON DEMAND</span></p>
                  <p>Specify <code class="codeph">ON</code> <code class="codeph">DEMAND</code> to indicate that database will not refresh the zone map unless you manually issue an <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> ... <code class="codeph">REBUILD</code> statement. If you specify this clause, then the zone map is referred to as a refresh-on-demand zone map. Refer to <a href="ALTER-MATERIALIZED-ZONEMAP.html#GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__BGBHEFFI">REBUILD</a> in the documentation on <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> for more information on rebuilding a zone map.
                  </p>
                  <p><span class="bold">ON COMMIT</span></p>
                  <p>Specify <code class="codeph">ON</code> <code class="codeph">COMMIT</code> to indicate that a refresh is to occur whenever the database commits a transaction that operates on a base table of the zone map. If you specify this clause, then the zone map is referred to as a refresh-on-commit zone map. This clause may increase the time taken to complete the commit, because the database performs the refresh operation as part of the commit process.
                  </p>
                  <p><span class="bold">ON LOAD</span></p>
                  <p>Specify <code class="codeph">ON</code> <code class="codeph">LOAD</code> to indicate that a refresh is to occur at the end of a direct-path insert (serial or parallel) resulting either from an <code class="codeph">INSERT</code> or a <code class="codeph">MERGE</code> operation.
                  </p>
                  <p><span class="bold">ON DATA MOVEMENT</span></p>
                  <p>Specify <code class="codeph">ON</code> <code class="codeph">DATA</code> <code class="codeph">MOVEMENT</code> to indicate that a refresh is to occur at the end of the following data movement operations:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Data redefinition using the <code class="codeph">DBMS_REDEFINITION</code> package
                        </p>
                     </li>
                     <li>
                        <p>Table partition maintenance operations that are specified by the following clauses of <code class="codeph">ALTER</code> <code class="codeph">TABLE</code>: <span class="italic"><code class="codeph">coalesce_table</code></span>, <span class="italic"><code class="codeph">merge_table_partitions</code></span>, <span class="italic"><code class="codeph">move_table_partition</code></span>, and <span class="italic"><code class="codeph">split_table_partition</code></span></p>
                     </li>
                  </ul>
                  <p><span class="bold">ON LOAD DATA MOVEMENT</span></p>
                  <p>Specify <code class="codeph">ON</code> <code class="codeph">LOAD</code> <code class="codeph">DATA</code> <code class="codeph">MOVEMENT</code> to indicate that a refresh is to occur at the end of a direct-path insert or a data movement operation. This is the default.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACEAADH">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-3743570F-B8CB-4353-81D6-29DE95A408CF">ENABLE | DISABLE PRUNING</p>
                  <p>This clause lets you control the use of the zone map for pruning.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Specify <code class="codeph">ENABLE</code> <code class="codeph">PRUNING</code> to enable use of the zone map for pruning. This is the default.
                        </p>
                     </li>
                     <li>
                        <p>Specify <code class="codeph">DISABLE</code> <code class="codeph">PRUNING</code> to disable use of the zone map for pruning. The optimizer will not use the zone map for pruning, but the database will continue to maintain the zone map.
                        </p>
                     </li>
                  </ul>
                  <p>If the setting is <code class="codeph">ENABLE</code> <code class="codeph">PRUNING</code>, then the optimizer will consider using the zone map for pruning during SQL operations that include any of the following conditions:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Comparison conditions: <code class="codeph">=</code>, <code class="codeph">&lt;=</code>, <code class="codeph">&lt;</code>, <code class="codeph">&gt;=</code>, <code class="codeph">&gt;</code></p>
                        <p>The condition must be a simple comparison condition that has a column name on one side and a literal or bind variable on the other side. For example:</p><pre class="oac_no_warn" dir="ltr">WHERE country_name = 'United States of America'
WHERE country_name = :country1
WHERE 10000 &gt;= salary
</pre></li>
                     <li>
                        <p><code class="codeph">IN</code> condition
                        </p>
                        <p>The <code class="codeph">IN</code> condition must have a column name on the left side and an expression list of literals or bind variables on the right side. For example:
                        </p><pre class="oac_no_warn" dir="ltr">WHERE country_name IN ('Germany', 'India', 'United Kingdom')
WHERE country_name IN (:country1, :country2, :country3)
WHERE prod_id IN (20, 48, 132, 143)
</pre></li>
                     <li>
                        <p><code class="codeph">LIKE</code> condition 
                        </p>
                        <p>The <code class="codeph">LIKE</code> condition must have a column name on the left side and a text literal on the right side. The text literal is the pattern for the <code class="codeph">LIKE</code> condition and it must contain at least one pattern matching character. Valid pattern matching characters are the underscore (<code class="codeph">_</code>), which matches exactly one character, and the percent sign (<code class="codeph">%</code>), which matches zero or more characters. The first character of the pattern cannot be a pattern matching character. For example:
                        </p><pre class="oac_no_warn" dir="ltr">WHERE prod_name LIKE 'DVD%'
WHERE prod_name LIKE 'Model%Cordless%Battery'
WHERE prod_name LIKE 'CD%Pack of _'</pre></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-4BAA03E2-EA4D-4D3E-AA16-A27EB4482EF7">
                     <p class="notep1">See Also:</p>
                     <p><a href="Conditions.html#GUID-C2E3ED44-16E7-4924-9125-E1693B1022A8">Conditions</a> for more information on conditions
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-F8C924ED-3C0D-47F8-B1EA-E92A006A4E18">Restrictions on Zone Maps</p>
                  <p>Zone maps are subject to the following restrictions:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A table can be a fact table for at most one zone map. A table can be a dimension table for multiple zone maps. A table can be a fact table for one zone map and a dimension table for other zone maps.</p>
                     </li>
                     <li>
                        <p>A base table of a zone map cannot be an external table, an index-organized table, a remote table, a temporary table, or a view.</p>
                     </li>
                     <li>
                        <p>A base table of a zone map cannot be in the schema of the user <code class="codeph">SYS</code>.
                        </p>
                     </li>
                     <li>
                        <p>A zone map cannot be partitioned.</p>
                     </li>
                     <li>
                        <p>You can define a zone map on a column of any scalar data type other than <code class="codeph">BFILE</code>, <code class="codeph">BLOB</code>, <code class="codeph">CLOB</code>, <code class="codeph">LONG</code>, <code class="codeph">LONG</code> <code class="codeph">RAW</code>, or <code class="codeph">NCLOB</code>.
                        </p>
                     </li>
                     <li>
                        <p>All joins specified in the defining subquery of a zone map must be left outer equijoins with the fact table on the left side.</p>
                     </li>
                     <li>
                        <p>If the <code class="codeph">FROM</code> clause of the defining subquery for a zone map references a materialized view, then you must refresh that materialized view before refreshing the zone map.
                        </p>
                     </li>
                     <li>
                        <p>You cannot perform DML operations directly on a zone map.</p>
                     </li>
                     <li>
                        <p>Each column of the zone map must have one of the following declared collations: <code class="codeph">BINARY</code> or <code class="codeph">USING_NLS_COMP</code>.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-999F9887-6C82-4432-8ADF-E129BDD020A4">Examples</p>
                  <p>The following statement creates a basic zone map called <code class="codeph">sales_zmap</code>. The zone map tracks columns <code class="codeph">cust_id</code> and <code class="codeph">prod_id</code> in the table <code class="codeph">sales</code>.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap
  ON sales(cust_id, prod_id);
</pre><p>The following statement creates a basic zone map called <code class="codeph">sales_zmap</code> that is similar to the zone map created in the previous example. However, this statement uses a defining subquery to create the zone map.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap
  AS SELECT SYS_OP_ZONE_ID(rowid),
            MIN(cust_id), MAX(cust_id),
            MIN(prod_id), MAX(prod_id)
     FROM sales
     GROUP BY SYS_OP_ZONE_ID(rowid);
</pre><p>The following statement creates a join zone map called <code class="codeph">sales_zmap</code>. The fact table for the zone map is <code class="codeph">sales</code> and the zone map has one dimension table: <code class="codeph">customers</code>. The zone map tracks two columns in the dimension table: <code class="codeph">cust_state_province</code> and <code class="codeph">cust_city</code>.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap
  AS SELECT SYS_OP_ZONE_ID(s.rowid),
            MIN(cust_state_province), MAX(cust_state_province),
            MIN(cust_city), MAX(cust_city)
     FROM sales s
          LEFT OUTER JOIN customers c ON s.cust_id = c.cust_id
     GROUP BY SYS_OP_ZONE_ID(s.rowid);
</pre><p>The following statement creates a join zone map called <code class="codeph">sales_zmap</code>. The fact table for the zone map is <code class="codeph">sales</code> and the zone map has two dimension tables: <code class="codeph">products</code> and <code class="codeph">customers</code>. The zone map tracks five columns in the dimension tables: <code class="codeph">prod_category</code> and <code class="codeph">prod_subcategory</code> in the <code class="codeph">products</code> table, and <code class="codeph">country_id</code>, <code class="codeph">cust_state_province</code>, and <code class="codeph">cust_city</code> in the <code class="codeph">customers</code> table.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap
  AS SELECT SYS_OP_ZONE_ID(s.rowid),
            MIN(prod_category), MAX(prod_category),
            MIN(prod_subcategory), MAX(prod_subcategory),
            MIN(country_id), MAX(country_id),
            MIN(cust_state_province), MAX(cust_state_province),
            MIN(cust_city), MAX(cust_city)
    FROM sales s
       LEFT OUTER JOIN products p ON s.prod_id = p.prod_id
       LEFT OUTER JOIN customers c ON s.cust_id = c.cust_id
    GROUP BY sys_op_zone_id(s.rowid);
</pre><p>The following statement creates a join zone map that is identical to the zone map created in the previous example. The only difference is that the previous example uses the <code class="codeph">LEFT</code> <code class="codeph">OUTER</code> <code class="codeph">JOIN</code> syntax in the <code class="codeph">FROM</code> clause and the following example uses the outer join operator (+) in the <code class="codeph">WHERE</code> clause.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap
  AS SELECT SYS_OP_ZONE_ID(s.rowid),
            MIN(prod_category), MAX(prod_category),
            MIN(prod_subcategory), MAX(prod_subcategory),
            MIN(country_id), MAX(country_id),
            MIN(cust_state_province), MAX(cust_state_province),
            MIN(cust_city), MAX(cust_city)
     FROM sales s, products p, customers c
     WHERE s.prod_id = p.prod_id(+) AND
           s.cust_id = c.cust_id(+)
     GROUP BY sys_op_zone_id(s.rowid);</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
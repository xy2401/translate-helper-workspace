<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter explains concepts that you should be familiar with before using the map visualizer.">
      <meta name="description" content="This chapter explains concepts that you should be familiar with before using the map visualizer.">
      <title>Map Visualization Concepts</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Map Visualization Developer's Guide ">
      <meta property="og:description" content="This chapter explains concepts that you should be familiar with before using the map visualizer.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Map Visualization Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-map-visualization-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T11:37:22-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94797-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="introduction-to-map-visualization-component.html" title="Previous" type="text/html">
      <link rel="next" href="map-visualization-servers.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Map Visualization Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JIMPV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-map-visualization-component.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="map-visualization-servers.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Map Visualization Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Map Visualization Concepts</li>
            </ol>
            <a id="GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" name="GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9"></a><a id="JIMPV2000"></a>
            
            <h2 id="JIMPV-GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" class="sect2"><span class="enumeration_chapter">2 </span>Map Visualization Concepts
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains concepts that you should be familiar with before using the map visualizer.</p>
               <p>Some fundamental concepts include <span class="italic">style</span>, <span class="italic">theme</span>, <span class="italic">base map</span>, <span class="italic">mapping metadata</span>, and <span class="italic">map</span>.
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>Styles define rendering properties for features that are associated with styles. For example, a text style determines how such a feature is labeled on a map, while a line style determines the rendition of a linear feature such as a road.</p>
                  </li>
                  <li>
                     <p>A theme is a collection of features (entities with spatial and nonspatial attributes) that are associated with styles through the use of styling rules.</p>
                  </li>
                  <li>
                     <p>A base map consists of one or more themes. (A base map should not have the same name as any theme.)</p>
                  </li>
                  <li>
                     <p>Mapping metadata consists of a repository of styles, themes, and base maps stored in a database.</p>
                  </li>
                  <li>
                     <p>A map is one of the components that the map visualizer creates in response to a map request. The map can be an image file, the object representation of an image file, or a URL referring to an image file.</p>
                  </li>
               </ul>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-58B56611-5D1C-41ED-A994-D5BEEDD5CFFB">Overview of the Map Visualizer</a><br>When an application uses the map visualizer, it applies specific styles (such as colors and patterns) to specific themes (that is, collections of spatial features, such as cities, rivers, and highways) to render a map (such as a GIF image for display on a web page).
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997">Styles</a><br>A <span class="bold">style</span> is a visual attribute that can be used to represent a spatial feature.
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705">Themes</a><br><span class="italic">Theme</span> is perhaps the most important concept in the map visualizer. A <span class="bold">theme</span> is a visual representation of a particular data layer.
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95">Maps</a><br>A map can consist of a combination of elements and attributes.
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925">Data Sources</a><br>A data source corresponds to a database schema or user.
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59">How a Map Is Generated</a><br>When a map request arrives at the map visualizer server, the server picks a free renderer associated with the master data source in the request.
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8">Cross-Schema Map Requests</a><br>A database user can issue a map request specifying a theme that uses data associated with another database user, to select data from tables that the other data source user is authorized to access.
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4">Workspace Manager Support in the Map Visualizer</a><br>Workspace Manager is an Oracle Database feature that lets you version-enable one or more tables in the database.
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5">Map Visualizer Metadata Views</a><br>The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.
                  </li>
                  <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-F68E694A-F27A-4E89-9D65-D37D232C1254">Oracle Maps</a><br>Oracle Maps is the name for a suite of technologies for developing high-performance interactive web-based mapping applications. It consists of components from both the server side and the client side.
                  </li>
               </ul>
            </div>
            <a id="JIMPV9527"></a><div class="props_rev_3"><a id="GUID-58B56611-5D1C-41ED-A994-D5BEEDD5CFFB" name="GUID-58B56611-5D1C-41ED-A994-D5BEEDD5CFFB"></a><h3 id="JIMPV-GUID-58B56611-5D1C-41ED-A994-D5BEEDD5CFFB" class="sect3"><span class="enumeration_section">2.1 </span>Overview of the Map Visualizer
               </h3>
               <div>
                  <p>When an application uses the map visualizer, it applies specific styles (such as colors and patterns) to specific themes (that is, collections of spatial features, such as cities, rivers, and highways) to render a map (such as a GIF image for display on a web page).</p>
                  <p>For example, the application might display a map in which state parks appear in green and restaurants are marked by red stars. A map typically has several themes representing political or physical entities, or both. For example, a map might show national and state boundaries, cities, mountain ranges, rivers, and historic sites. When the map is rendered, each theme represents a layer in the complete image.</p>
                  <p>The map visualizer lets you define styles, themes, and base maps, including the rules for applying one or more styles to each theme. These styles, themes, base maps, and associated rules are stored in the database in map definition tables under the MDSYS schema, and they are visible to you through metadata views. All styles in a database instance are shared by all users. The mapping metadata (the set of styles, themes, and base maps) that you can access is determined by the map visualizer metadata views described in <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.">Map Visualizer Metadata Views</a> (for example, USER_SDO_STYLES, USER_SDO_THEMES, and USER_SDO_MAPS). <a id="d7682e181" class="indexterm-anchor"></a>The set of map definition objects that a given user can access is sometimes called that user's <span class="italic">mapping profile</span>. You can manage styles, themes, and base maps with the standalone Map Builder tool, described in <a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="This chapter briefly describes the map visualization component Map Builder tool, also referred to as Oracle Map Builder. It does not provide detailed information about the tool's interface; for that you should use see online help available when you use Oracle Map Builder.">Oracle Map Builder Tool</a>.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9529"></a><a id="JIMPV9528"></a><div class="props_rev_3"><a id="GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" name="GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997"></a><h3 id="JIMPV-GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" class="sect3"><span class="enumeration_section">2.2 </span>Styles
               </h3>
               <div>
                  <p>A <span class="bold">style</span> is a visual attribute that can be used to represent a spatial feature.
                  </p>
                  <p>The basic map symbols and labels for representing point, line, and area features are defined and stored as individual styles. Each style has a unique name and defines one or more graphical elements in an XML syntax.</p>
                  <p>Each style is of one of the following types:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Color</span>: a color for the fill or the stroke (border), or both.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Marker</span>: a shape with a specified fill and stroke color, or an image. Markers are often icons for representing point features, such as airports, ski resorts, and historical attractions.
                        </p>
                        <p>When a marker style is specified for a line feature, the rendering engine selects a suitable point on the line and applies the marker style (for example, a shield marker for a U.S. interstate highway) to that point. </p>
                     </li>
                     <li>
                        <p><span class="bold">Line</span>: a line style (width, color, end style, join style) and optionally a center line, edges, and hash mark. Lines are often used for linear features such as highways, rivers, pipelines, and electrical transmission lines. You can also use cased line styles, which are useful for drawing streets and highways.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Area</span>: a color or texture, and optionally a stroke color. Areas are often used for polygonal features such as counties and census tracts.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Text</span>: a font specification (size and family) and optionally highlighting (bold, italic) and a foreground color. Text is often used for annotation and labeling (such as names of cities and rivers).
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Advanced</span>: a composite used primarily for thematic mapping, which is described in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754">Thematic Mapping</a>. The key advanced style is <code class="codeph">BucketStyle</code>, which defines the relationship between a set of simple rendering (and optionally labeling) styles and a set of buckets. For each feature to be plotted, a designated value or set of values from that feature is used to determine which bucket the feature falls into, and then the style associated with that bucket is used to plot the feature. Bucket styles are described in <a href="xml-formats-map-visualizer.html#GUID-85FE8BC7-DA9E-4264-8045-D8B3C54050AF">Bucket Styles</a>.
                        </p>
                        <p>Two special types of bucket styles are also provided: color scheme (described in <a href="xml-formats-map-visualizer.html#GUID-577FABC2-FFA1-458C-9C0B-2E93D21EA1A3">Color Scheme Styles</a>) and variable (graduated) marker (described in <a href="xml-formats-map-visualizer.html#GUID-3AA7E47E-8C54-4382-AC5A-42D5ED73856A">Variable Marker Styles</a>). Other advanced styles are dot density (described in <a href="xml-formats-map-visualizer.html#GUID-64F7BB3E-94E3-433C-AF2C-F6C3D51B2A56">Dot Density Marker Styles</a>), bar chart (described in <a href="xml-formats-map-visualizer.html#GUID-F878EE21-DBCE-47C3-A842-CF69DEA0F92C">Bar Chart Marker Styles</a>), collection (described in <a href="xml-formats-map-visualizer.html#GUID-786D9C05-C3C2-4A90-B5DE-6B5718DC792E">Collection Styles</a>), variable pie chart (described in <a href="xml-formats-map-visualizer.html#GUID-4F10A15B-88D4-4941-8063-834932D4F481">Variable Pie Chart Styles</a>), and heat map (described in <a href="xml-formats-map-visualizer.html#GUID-751BB8F1-237A-4688-A0DA-229225771FDF">Heat Map Styles</a>).
                        </p>
                     </li>
                  </ul>
                  <p><a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997__BABFHDAJ" title="Style Types and Associated Java Classes">Table 2-1</a> lists the applicable geometry types for each type of style.
                  </p>
                  <div class="tblformal" id="GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997__BABFHDAJ">
                     <p class="titleintable">Table 2-1 <span>Style Types and Applicable Geometry Types</span></p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Style Types and Applicable Geometry Types" summary="Style Types and Associated Java Classes" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d7682e361">Style Type</th>
                              <th align="left" valign="bottom" width="80%" id="d7682e364">Applicable Geometry Types</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e369" headers="d7682e361 ">
                                 <p>Color</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e369 d7682e364 ">
                                 <p>(any type)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e376" headers="d7682e361 ">
                                 <p>Marker</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e376 d7682e364 ">
                                 <p>point, line </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e383" headers="d7682e361 ">
                                 <p>Line</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e383 d7682e364 ">
                                 <p>line</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e390" headers="d7682e361 ">
                                 <p>Area</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e390 d7682e364 ">
                                 <p>polygon</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e397" headers="d7682e361 ">
                                 <p>Text</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e397 d7682e364 ">
                                 <p>(any type)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d7682e404" headers="d7682e361 ">
                                 <p>Advanced</p>
                              </td>
                              <td align="left" valign="top" width="80%" headers="d7682e404 d7682e364 ">
                                 <p>(any type)</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>All styles for a database user are stored in that user's USER_SDO_STYLES view, which is described in <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.">Map Visualizer Metadata Views</a> and <a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B">xxx_SDO_STYLES Views</a>.
                  </p>
                  <p><a id="d7682e422" class="indexterm-anchor"></a><a id="d7682e424" class="indexterm-anchor"></a><a id="d7682e428" class="indexterm-anchor"></a>You can also create <span class="bold">dynamically defined styles</span> (that is, temporary styles) of any style type as part of a map request. To create them, use the Oracle Maps JavaScript API, using classes and methods to create all types of styles dynamically.
                  </p>
                  <p>What you are actually creating is the XML definition of the styles; it is the map visualizer server that actually creates such dynamically defined styles from the definitions when it processes the map request, and it discards the dynamically created styles when the request is completed.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF">Scaling the Size of a Style (Scalable Styles)</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB">Specifying a Label Style for a Bucket</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520">Orienting Text Labels and Markers</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F">Making a Text Style Sticky</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-443058E1-C632-4068-B50E-D34CEED7C0EF">Getting a Sample Image of Any Style</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9">Allowing a Text Style to Overlap or Be Overlapped</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9531"></a><a id="JIMPV9532"></a><a id="JIMPV9530"></a><div class="props_rev_3"><a id="GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF" name="GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF"></a><h4 id="JIMPV-GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF" class="sect4"><span class="enumeration_section">2.2.1 </span>Scaling the Size of a Style (Scalable Styles)
                  </h4>
                  <div>
                     <p>If you specify a unit other than the default of pixels (<code class="codeph">px</code>) in a style definition, the style becomes scalable: that is, the size of features associated with the style is scaled as users zoom in or out on a map. For example, if you specify a marker style's width and height as <code class="codeph">100m</code>, the marker is displayed as a square 100 meters on each side according to the map scale at the current zoom level.
                     </p>
                     <p>The following are style types and the attributes that can have an associated size unit:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Marker styles: marker size (height and width) and text attributes (font size, label offsets)</p>
                        </li>
                        <li>
                           <p>Line styles: overall line width, center line width and dash pattern, wing line width and dash pattern, hash mark, and marker pattern (size, offset, interval)</p>
                        </li>
                        <li>
                           <p>Text styles: font size, halo width</p>
                        </li>
                        <li>
                           <p>Bar chart styles: bar width and height</p>
                        </li>
                        <li>
                           <p>Dot density styles: dot width and height</p>
                        </li>
                        <li>
                           <p>Pie chart styles: pit radius</p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF__CIHGAAHE">
                        <p class="titleinexample">Example 2-1 Scalable Marker Style</p>
                        <p><a href="map-visualization-concepts.html#GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF__CIHGAAHE">Example 2-1</a> defines a star-shaped marker within a bounding box 15 kilometers (<code class="codeph">15.0km</code>) on each size. This definition might be useful for identifying capital cities of states on a map showing all or a large part of a country; however, it would not be useful for a display zoomed in on a specific city and its local surrounding area.
                        </p><pre class="oac_no_warn" dir="ltr">&lt;style name="M.STAR_CAPITAL_CITY"&gt;
  &lt;svg width="1in" height="1in"&gt;
    &lt;desc/&gt;
    &lt;g class="marker" style="stroke:#000000;fill:#FF0000;fill-opacity:0;<span class="bold">width:15.0km;height:15.0km</span>;font-family:Dialog;font-size:12;font-fill:#FF0000"&gt;
        &lt;polyline points="138.0,123.0,161.0,198.0,100.0,152.0,38.0,198.0,61.0,123.0,0.0,76.0,76.0,76.0,100.0,0.0,123.0,76.0,199.0,76.0"/&gt;
    &lt;/g&gt;
  &lt;/svg&gt;
&lt;/style&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF__CIHJGEFJ">
                        <p class="titleinexample">Example 2-2 Scalable Line Style</p>
                        <p><a href="map-visualization-concepts.html#GUID-C61A80D2-0B3A-4B5C-BA2A-B3B2202585DF__CIHJGEFJ">Example 2-2</a> defines a line style with an overall line width of 10 meters (<code class="codeph">10.0m</code>) and a border line width of 1 meter (<code class="codeph">1.0m</code>). This definition might be useful for identifying capital cities of primary highways.
                        </p><pre class="oac_no_warn" dir="ltr">&lt;style name="L.PRIMARY_HIGHWAY"&gt;
  &lt;svg width="1in" height="1in"&gt;
    &lt;desc&gt;&lt;/desc&gt;
    &lt;g class="line" cased="true" style="fill:#33a9ff;<span class="bold">stroke-width:10.0m</span>"&gt;
      &lt;line class="parallel" style="fill:#aa55cc;<span class="bold">stroke-width:1.0m</span>"/&gt;
    &lt;/g&gt;
  &lt;/svg&gt;
&lt;/style&gt;
</pre><p>When the map visualizer renders or labels styles that have size units other than pixel, it first transforms the size units into screen pixels based on the current map area and display area, and it then renders the or labels the style. The size of a scalable style changes as users zoom in or out on a map. If zooming out results in an overall style size less than or equal to zero, the style is not rendered or labeled.</p>
                        <p>Size units can be used only with data associated with a known spatial reference system (SRS). If the data has no SRS or an unknown SRS, pixels are used for all size values. Note also that pixel values are used instead of any specified size unit in legends and in previews rendered by the Map Builder utility. (Legends are explained in <a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D">Map Legend</a>.)
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="A style is a visual attribute that can be used to represent a spatial feature.">Styles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9535"></a><a id="JIMPV9534"></a><a id="JIMPV9533"></a><div class="props_rev_3"><a id="GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB" name="GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB"></a><h4 id="JIMPV-GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB" class="sect4"><span class="enumeration_section">2.2.2 </span>Specifying a Label Style for a Bucket
                  </h4>
                  <div>
                     <p>For collection-based bucket styles and individual range-based bucket styles (described in <a href="xml-formats-map-visualizer.html#GUID-85FE8BC7-DA9E-4264-8045-D8B3C54050AF">Bucket Styles</a> and <a href="xml-formats-map-visualizer.html#GUID-577FABC2-FFA1-458C-9C0B-2E93D21EA1A3">Color Scheme Styles</a>, respectively), you can specify a labeling style by using the <code class="codeph">label_style</code> attribute in each bucket element. <a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABFAACF">Example 2-3</a> creates an advanced style named <code class="codeph">V.COUNTY_POP_DENSITY</code> in which each bucket is assigned a text label style (using the <code class="codeph">label_style</code> attribute), with some styles being used for several buckets.
                     </p>
                     <div class="example" id="GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABFAACF">
                        <p class="titleinexample">Example 2-3 Advanced Style with Text Label Style for Each Bucket</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" ?&gt;
&lt;AdvancedStyle&gt;
     &lt;BucketStyle&gt;
        &lt;Buckets&gt;
            &lt;RangedBucket seq="0" label="&amp;lt;150k" 
              low="-Infinity" high="150000" 
              style="C.CB_QUAL_8_CLASS_DARK2_1" 
              label_style="T.BLUE_SERIF_12"/&gt;
            &lt;RangedBucket seq="1" label="150k - 350k" 
              low="150000" high="350000" 
              style="C.CB_QUAL_8_CLASS_DARK2_2" 
              label_style="T.BLUE_SERIF_12"/&gt;
            &lt;RangedBucket seq="2" label="350k - 600k" 
              low="350000" high="600000" 
              style="C.CB_QUAL_8_CLASS_DARK2_3" 
              label_style="T.BROWN_SERIF_12"/&gt;
            &lt;RangedBucket seq="3" label="600k - 1000k" 
              low="600000" high="1000000" 
              style="C.CB_QUAL_8_CLASS_DARK2_4" 
              label_style="T.BROWN_SERIF_12"/&gt;
            &lt;RangedBucket seq="4" label="1000k - 1500k" 
              low="1000000" high="1500000" 
              style="C.CB_QUAL_8_CLASS_DARK2_5" 
              label_style="T.GREY_SERIF_12"/&gt;
            &lt;RangedBucket seq="5" label="1500k - 2500k" 
              low="1500000" high="2500000" 
              style="C.CB_QUAL_8_CLASS_DARK2_6" 
              label_style="T.GREY_SERIF_12"/&gt;
            &lt;RangedBucket seq="6" label="2500k - 5000k" 
              low="2500000" high="5000000" 
              style="C.CB_QUAL_8_CLASS_DARK2_7" 
              label_style="T.GREEN_SERIF_12"/&gt;
            &lt;RangedBucket seq="7" label="&amp;gt;=5000k" 
              low="5000000" high="Infinity" 
              style="C.CB_QUAL_8_CLASS_DARK2_8" 
              label_style="T.GREEN_SERIF_12"/&gt;
    &lt;/Buckets&gt;
   &lt;/BucketStyle&gt;
&lt;/AdvancedStyle&gt;
</pre><p>For individual range-based buckets, the lower-bound value is inclusive, while the upper-bound value is exclusive (except for the range that has values greater than any value in the other ranges; its upper-bound value is inclusive). No range is allowed to have a range of values that overlaps values in other ranges.</p>
                        <p>If the <code class="codeph">V.COUNTY_POP_DENSITY</code> style in <a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABFAACF">Example 2-3</a> is used in a map request, it displays a map that might look like the display in <a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABGAHJE">Figure 2-1</a>, where the county names are shown with labels that reflect various text styles (in this case depending on the county's total population).
                        </p>
                        <div class="figure" id="GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABGAHJE">
                           <p class="titleinfigure">Figure 2-1 Varying Label Styles for Different Buckets</p><img src="img/thematic_map_display.gif" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" longdesc="img_text/thematic_map_display.html"><br><a href="img_text/thematic_map_display.html">Description of "Figure 2-1 Varying Label Styles for Different Buckets"</a></div>
                        <!-- class="figure" -->
                        <p>In <a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABFAACF">Example 2-3</a>, all buckets except the last one specify a label style. For any features that fall into a bucket that has no specified label style, the label style (if any) applied to the feature depends on the following:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the <code class="codeph">&lt;label&gt;</code> element of the theme's styling rules specifies a label style other than the advanced style itself, the specified label style is used to label the feature. In the following example, because the <code class="codeph">&lt;label&gt;</code> element's style specification (<code class="codeph">T.STATE_NAME</code>) is different from the <code class="codeph">&lt;features&gt;</code> element's style specification (<code class="codeph">V.COUNTY_POP_DENSITY</code>), features that fall into a bucket with no specified label style are labeled using the <code class="codeph">T.STATE_NAME </code>style:
                              </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules&gt;
  &lt;rule column="TOTPOP"&gt;
    &lt;features style="<span class="bold">V.COUNTY_POP_DENSITY</span>"&gt;
    &lt;/features&gt;
    &lt;label column="county" style="<span class="bold">T.STATE NAME</span>"&gt;
        1
    &lt;/label&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;
</pre></li>
                           <li>
                              <p>If the <code class="codeph">&lt;label&gt;</code> element of the theme's styling rules specifies the advanced style as its label style, the feature is <span class="italic">not</span> labeled. (This is why some counties in <a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB__BABGAHJE">Figure 2-1</a> are not labeled.) In the following example, because the <code class="codeph">&lt;features&gt;</code> and <code class="codeph">&lt;label&gt;</code> elements both specify the advanced style <code class="codeph">V.COUNTY_POP_DENSITY</code>, features that fall into a bucket with no specified label style are not labeled:
                              </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules&gt;
  &lt;rule column="TOTPOP"&gt;
    &lt;features style="<span class="bold">V.COUNTY_POP_DENSITY</span>"&gt;
    &lt;/features&gt;
    &lt;label column="county" style="<span class="bold">V.COUNTY_POP_DENSITY</span>"&gt;
        1
    &lt;/label&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;</pre></li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="A style is a visual attribute that can be used to represent a spatial feature.">Styles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9536"></a><div class="props_rev_3"><a id="GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520" name="GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520"></a><h4 id="JIMPV-GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520" class="sect4"><span class="enumeration_section">2.2.3 </span>Orienting Text Labels and Markers
                  </h4>
                  <div>
                     <p>You can control the orientation of text labels and markers on a map by using oriented points. The oriented point is a special type of point geometry in Oracle Spatial and Graph. In an oriented point, the coordinates represent both the location of the point and a virtual end point, to indicate an orientation vector. The text is aligned or the marker symbol is rotated according to the orientation vector, which is explained and illustrated in <a href="map-visualization-concepts.html#GUID-D684505E-36E9-4DC5-920F-734C57FA016D">Controlling Marker Orientation</a>. For more information about oriented points, see <a href="../spatl/spatial-datatypes-metadata.html#SPATL534" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a>.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9">Controlling Text Style Orientation</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-D684505E-36E9-4DC5-920F-734C57FA016D">Controlling Marker Orientation</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="A style is a visual attribute that can be used to represent a spatial feature.">Styles</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9539"></a><a id="JIMPV9538"></a><a id="JIMPV9537"></a><div class="props_rev_3"><a id="GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9" name="GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9"></a><h5 id="JIMPV-GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9" class="sect5"><span class="enumeration_section">2.2.3.1 </span>Controlling Text Style Orientation
                     </h5>
                     <div>
                        <p>To orient the text label of a point in the direction of an orientation vector, you can specify the point as an Oracle Spatial and Graph oriented point in the map request. When the map visualizer labels an oriented point, it automatically centers the text label on the point position, and aligns the label so that it points in the direction of the orientation vector.</p>
                        <p>For each feature to be so labeled, you must specify its location as an oriented point. You can group these oriented points in a single table and create a spatial index on the column containing the point geometries. You can then create a theme based on the table, specifying a desired text style as the labeling, and specifying transparent color style as the rendering style so that the points themselves are not displayed on the map.</p>
                        <p><a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBCCFJ">Example 2-4</a> is a map request that labels a single oriented point with coordinates (12,14, 0.3,0.2), where (12,14) represents the X and Y coordinates of the point and (0.3,0.2) represents the orientation vector. It renders the point using a dynamically defined transparent color style (named <code class="codeph">transparent_color</code>) to ensure that the text is displayed but the underlying point is not displayed.
                        </p>
                        <div class="example" id="GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBCCFJ">
                           <p class="titleinexample">Example 2-4 Labeling an Oriented Point</p><pre class="oac_no_warn" dir="ltr">&lt;map_request
  title="Labeling Oriented Points"
  datasource="my_datasource"   width="400"  height="300"
  antialiase="true"
  format="PNG_STREAM"&gt;
 
  &lt;themes&gt;
    &lt;theme name="theme1"&gt;
       &lt;jdbc_query
         spatial_column="geom"  jdbc_srid="8265"
         render_style="transparent_color" 
         label_column="label" label_style="t.street name"
         datasource="tilsmenv"&gt;
         SELECT SDO_GEOMETRY(2001, 8265, NULL, 
                      SDO_ELEM_INFO_ARRAY(1, 1, 1, 3, 1, 0), 
                      SDO_ORDINATE_ARRAY<span class="bold">(12, 14, .3, .2)</span>)
         geom, 'Oriented Point' label FROM dual
       &lt;/jdbc_query&gt;
     &lt;/theme&gt;
  &lt;/themes&gt;
 
  &lt;styles&gt;
    &lt;style name="<span class="bold">transparent_color</span>"&gt;
      &lt;svg width="1in" height="1in"&gt;
        &lt;g class="color" style="stroke:#ff0000;stroke-opacity:0"&gt;
          &lt;rect width="50" height="50"/&gt;
        &lt;/g&gt;
      &lt;/svg&gt;
    &lt;/style&gt;
  &lt;/styles&gt;
&lt;/map_request&gt;
</pre><p><a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBIHFF">Figure 2-2</a> shows part of the map generated by the request in <a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBCCFJ">Example 2-4</a>. (The label is the phrase <span class="italic">Oriented Point</span>.)
                           </p>
                           <div class="figure" id="GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBIHFF">
                              <p class="titleinfigure">Figure 2-2 Map Display of the Label for an Oriented Point</p><img src="img/mv_oriented_pt_label.gif" alt="Description of Figure 2-2 follows" title="Description of Figure 2-2 follows" longdesc="img_text/mv_oriented_pt_label.html"><br><a href="img_text/mv_oriented_pt_label.html">Description of "Figure 2-2 Map Display of the Label for an Oriented Point"</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520">Orienting Text Labels and Markers</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9541"></a><a id="JIMPV9540"></a><div class="props_rev_3"><a id="GUID-D684505E-36E9-4DC5-920F-734C57FA016D" name="GUID-D684505E-36E9-4DC5-920F-734C57FA016D"></a><h5 id="JIMPV-GUID-D684505E-36E9-4DC5-920F-734C57FA016D" class="sect5"><span class="enumeration_section">2.2.3.2 </span>Controlling Marker Orientation
                     </h5>
                     <div>
                        <p>When a marker style is applied to an oriented point, the map visualizer automatically rotates the marker style so that it points to the orientation vector. Any necessary rotation of the marker style is around the center of the marker.</p>
                        <p><a href="map-visualization-concepts.html#GUID-D684505E-36E9-4DC5-920F-734C57FA016D__BABIIJGD">Figure 2-3</a> shows how you can use an oriented point to control the orientation of marker styles. In this figure, the original marker style is first shown without any rotation. However, when the marker is applied to the same oriented point shown in <a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9__BABBCCFJ">Example 2-4</a> in <a href="map-visualization-concepts.html#GUID-80B27932-62FA-4EBF-892D-3C4A98A22AA9">Controlling Text Style Orientation</a>, the marker style is rotated accordingly (in this case about 34 degrees counterclockwise) to reflect the orientation vector.
                        </p>
                        <div class="figure" id="GUID-D684505E-36E9-4DC5-920F-734C57FA016D__BABIIJGD">
                           <p class="titleinfigure">Figure 2-3 Oriented Marker</p><img src="img/oriented_marker.gif" alt="Description of Figure 2-3 follows" title="Description of Figure 2-3 follows" longdesc="img_text/oriented_marker.html"><br><a href="img_text/oriented_marker.html">Description of "Figure 2-3 Oriented Marker"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-31B76F08-5FEE-4AC6-8764-ABEA95DBF520">Orienting Text Labels and Markers</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9543"></a><a id="JIMPV9542"></a><div class="props_rev_3"><a id="GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F" name="GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F"></a><h4 id="JIMPV-GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F" class="sect4"><span class="enumeration_section">2.2.4 </span>Making a Text Style Sticky
                  </h4>
                  <div>
                     <p>You can specify that a text style is "sticky," which means that any feature that uses it as a label style will always have its text label drawn on a map. <a href="map-visualization-concepts.html#GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F__BABIIHBJ">Example 2-5</a> shows an XML definition of a style with the <code class="codeph">sticky</code> attribute set to <code class="codeph">true</code>.
                     </p>
                     <div class="example" id="GUID-7F9C9BF3-6C59-4F1C-B3B9-78D36D7D6B0F__BABIIHBJ">
                        <p class="titleinexample">Example 2-5 Text Style with Sticky Attribute</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;svg width="1in" height="1in"&gt;
&lt;desc&gt;&lt;/desc&gt;
 &lt;g class="text" <span class="bold">sticky="true"</span> style = "font-style:plain;font-family:Serif;font-size:11pt;font-weight:bold;fill:#000000"&gt;
    Hello World!
&lt;/g&gt;
&lt;/svg&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="A style is a visual attribute that can be used to represent a spatial feature.">Styles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9545"></a><a id="JIMPV9546"></a><a id="JIMPV9544"></a><div class="props_rev_3"><a id="GUID-443058E1-C632-4068-B50E-D34CEED7C0EF" name="GUID-443058E1-C632-4068-B50E-D34CEED7C0EF"></a><h4 id="JIMPV-GUID-443058E1-C632-4068-B50E-D34CEED7C0EF" class="sect4"><span class="enumeration_section">2.2.5 </span>Getting a Sample Image of Any Style
                  </h4>
                  <div>
                     <p>To get a sample image for any pre-defined style stored in a database, you can issue a simple HTTP request to the map visualizer server. This request can specify the size of the sample image, the background color, and the format of the returned image. Such requests are useful if you want to display a visual list of styles on a web page, to build a custom map legend, or just to see how various styles will appear.</p>
                     <p>The HTTP request has the following parameters, all of which are optional except for <code class="codeph">sty</code>:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">sty</code> (required) specifies the name of the style.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ds</code> specifies the data source where the style can be accessed. By default, the default map visualizer data source is used.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">w</code> specifies the width of the sample image in pixels. The default value is 20.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">h</code> specifies the height of the sample image in pixels. The default value is 20.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">f</code> specifies the format of the sample image. Possible values are <code class="codeph">png</code> for direct PNG image stream, <code class="codeph">png_url</code> for the URL of a PNG image, <code class="codeph">gif</code> for direct GIF image stream, or <code class="codeph">gif_url</code> for the URL of a GIF image. The default value is <code class="codeph">png</code>, which means the map visualizer server will directly stream the generated PNG image data back to the client without first saving it to the server disk.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">bg</code> specifies the background color of the sample image. The format must be a hexadecimal string in the form of <code class="codeph">0x</code><span class="italic"><code class="codeph">rrggbb</code></span>, such as 0x808080 for a gray color. The default value is 0xffffff (white).
                           </p>
                           <p>For a transparent background, specify <code class="codeph">bg</code> as an extended hexadecimal string to include the alpha values, in the format of <code class="codeph">0x</code><span class="italic"><code class="codeph">aarrggbb</code></span>. For example, 0x00ffffff will make the style image's background completely transparent, while 0x55ffffff is a white background with a transparency value of 0x55 (decimal value 80). The alpha value can range from 0x00 (completely transparent) to 0xff (completely opaque).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">aa</code> specifies whether the sample image should be rendered in antialiasing mode. The default value is the string <code class="codeph">true</code>. Specify the string <code class="codeph">false</code> if you do not want to use antialiasing.
                           </p>
                        </li>
                     </ul>
                     <p><a id="d7682e1146" class="indexterm-anchor"></a>The following example generates an antialiased PNG image with a gray background with the default size of 20x20 pixels, displaying the marker style named <code class="codeph">M.STAR</code> from the map visualizer default data source:
                     </p><pre class="oac_no_warn" dir="ltr">http://www.mycorp.com/mapviewer/omserver?sty=m.star&amp;bg=808080
</pre><p>The preceding request generates a display similar to that in <a href="map-visualization-concepts.html#GUID-443058E1-C632-4068-B50E-D34CEED7C0EF__BABJABJF">Figure 2-4</a>.
                     </p>
                     <div class="figure" id="GUID-443058E1-C632-4068-B50E-D34CEED7C0EF__BABJABJF">
                        <p class="titleinfigure">Figure 2-4 Sample Image of a Specified Marker Style</p><img src="img/sample_image_1.gif" alt="Description of Figure 2-4 follows" title="Description of Figure 2-4 follows" longdesc="img_text/sample_image_1.html"><br><a href="img_text/sample_image_1.html">Description of "Figure 2-4 Sample Image of a Specified Marker Style"</a></div>
                     <!-- class="figure" -->
                     <p>The following example generates an antialiased GIF image with the default white background, a width of 60 pixels, and a height of 25 pixels, displaying the line style named <code class="codeph">L.PH</code> from the map visualizer data source named <code class="codeph">mvdemo</code>:
                     </p><pre class="oac_no_warn" dir="ltr">http://www.mycorp.com/mapviewer/omserver?sty=l.ph&amp;ds=mvdemo&amp;f=gif&amp;w=60&amp;h=25&amp;aa=true
</pre><p>The preceding request generates a display similar to that in <a href="map-visualization-concepts.html#GUID-443058E1-C632-4068-B50E-D34CEED7C0EF__BABGICDG">Figure 2-5</a>.
                     </p>
                     <div class="figure" id="GUID-443058E1-C632-4068-B50E-D34CEED7C0EF__BABGICDG">
                        <p class="titleinfigure">Figure 2-5 Sample Image of a Specified Line Style</p><img src="img/sample_image_2.gif" alt="Description of Figure 2-5 follows" title="Description of Figure 2-5 follows" longdesc="img_text/sample_image_2.html"><br><a href="img_text/sample_image_2.html">Description of "Figure 2-5 Sample Image of a Specified Line Style"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="A style is a visual attribute that can be used to represent a spatial feature.">Styles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV10102"></a><a id="JIMPV10101"></a><div class="props_rev_3"><a id="GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9" name="GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9"></a><h4 id="JIMPV-GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9" class="sect4"><span class="enumeration_section">2.2.6 </span>Allowing a Text Style to Overlap or Be Overlapped
                  </h4>
                  <div>
                     <p>You can specify that a text style <code class="codeph">allow-overlap</code>, which means that any area feature, such as a polygon that uses it as a label style, will allow its text label be overlapped on a map. The following example shows an XML definition of a style with the <code class="codeph">allow-overlap</code> attribute set to <code class="codeph">true</code>.
                     </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;svg width="1in" height="1in"&gt;
&lt;desc&gt;&lt;/desc&gt;
 &lt;g class="text" allow-overlap="true" style = "font-style:plain;font-family:Serif;font-size:11pt;font-weight:bold;fill:#000000"&gt;
    Hello World!
&lt;/g&gt;
&lt;/svg&gt;
</pre><p>For example, if a country's name is used as a label text, and if its style has the attribute value <code class="codeph">allow-overlap="true"</code>, then other features' labels (such as state names) are allowed to overlap with it. The following figure shows part of a rendered map in which the country label "United States" overlaps slightly with the state labels "Colorado" and "Kansas".
                     </p>
                     <div class="figure" id="GUID-6BC2C93D-008E-434E-B7EE-9F870F8A5EC9__GUID-20DBD3F8-DB86-4AFF-B7FA-FD0FCEFE9856">
                        <p class="titleinfigure">Figure 2-6 Text Style with allow-overlap="true"</p><img src="img/allow_overlap.jpg" alt="Description of Figure 2-6 follows" title="Description of Figure 2-6 follows" longdesc="img_text/allow_overlap.html"><br><a href="img_text/allow_overlap.html">Description of "Figure 2-6 Text Style with allow-overlap="true""</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-504BDFBD-CBF4-4A6F-A989-134E51DDE997" title="A style is a visual attribute that can be used to represent a spatial feature.">Styles</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9547"></a><div class="props_rev_3"><a id="GUID-DABE41E7-BF70-4892-8842-99D947B6A705" name="GUID-DABE41E7-BF70-4892-8842-99D947B6A705"></a><h3 id="JIMPV-GUID-DABE41E7-BF70-4892-8842-99D947B6A705" class="sect3"><span class="enumeration_section">2.3 </span>Themes
               </h3>
               <div>
                  <p><span class="italic">Theme</span> is perhaps the most important concept in the map visualizer. A <span class="bold">theme</span> is a visual representation of a particular data layer.
                  </p>
                  <p>Conceptually, a theme is a collection of geographic features that share similar attributes, plus the rendering and labeling rules that tell the map visualizer what styles to use to render and label the features. To be more exact, when you define a theme, you are actually providing the map visualizer with the following information: where and how to get the data, and how to render and label the data.</p>
                  <p>Depending on how a theme is created, it can also be categorized as either a predefined theme or a dynamic (JDBC) theme. For a <span class="bold">predefined theme</span>, the theme's definition is created in the standalone Map Builder tool and stored in the database. For a <span class="bold">dynamic theme</span>, the theme's definition (XML) is created in real time by an application. Dynamic themes typically employee a custom SQL query constructed by the application to get its data.
                  </p>
                  <p>Typically, the data for a theme comes from a spatially enabled table, that is, a database table or view with a column of type SDO_GEOMETRY. For example, a theme named <code class="codeph">US_STATES</code> might be based on a STATES table that has a column named GEOMETRY, plus any other nonspatial attribute columns. This type of theme is often called a geometry theme. Besides geometric data, other types of database-managed geographic data can be associated with corresponding types of themes; for example:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Georeferenced images stored in BLOBs (image themes)</p>
                     </li>
                     <li>
                        <p>Oracle Spatial and Graph GeoRaster data (GeoRaster themes)</p>
                     </li>
                     <li>
                        <p>Oracle Spatial and Graph network data model (network themes)</p>
                     </li>
                     <li>
                        <p>Oracle Spatial and Graph topology data model (topology themes)</p>
                     </li>
                     <li>
                        <p>Cartographic annotation text (annotation themes)</p>
                     </li>
                  </ul>
                  <p>Map visualizer themes can be used to render not only geographic data stored in a database, but also data originating from other sources, such as web services (WFS, WMS, and WMTS) or the local file system (through the custom spatial data provider interface).</p>
                  <p>Regardless of what type of data is associated with a theme (except for WMS and WMTS themes, which represent externally rendered map layers), the map visualizer styling rules still need to be defined for each theme, and the styles referenced by the styling rules must exist and be stored in the database as part of the mapping metadata.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">Predefined Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E">JDBC Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575">Image Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9">Network Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5A7910EC-68E5-4310-A816-217FCD1E4460">Topology Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-C0538735-A453-4161-BADF-1FB8BA628B26">WFS Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8">WMTS Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42">Custom Geometry Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9">Annotation Text Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024">LRS (Linear Referencing System) Themes</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754">Thematic Mapping</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-F07E0F57-702A-4C14-923D-52BAEE467762">Attributes Affecting Theme Appearance</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9548"></a><div class="props_rev_3"><a id="GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED" name="GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED"></a><h4 id="JIMPV-GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED" class="sect4"><span class="enumeration_section">2.3.1 </span>Predefined Themes
                  </h4>
                  <div>
                     <p>A <span class="bold">predefined theme</span> is a theme whose definition is stored in a user's database schema. All predefined themes for a database user are stored in that user's USER_SDO_THEMES view (described in <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.">Map Visualizer Metadata Views</a>, especially <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a>). When you include a predefined theme in a map request, you need to specify only the theme name. The map visualizer automatically finds the theme's definition, constructs a query based on it, retrieves the relevant spatial and attribute data, and renders the data according to the styling rules for the theme.
                     </p>
                     <p><a id="d7682e1470" class="indexterm-anchor"></a>Each predefined theme must have an associated base table or view. If you base a theme on a view, you must insert a row in the view owner's <a id="d7682e1475" class="indexterm-anchor"></a>USER_SDO_GEOM_METADATA view (described in <a href="../spatl/spatial-datatypes-metadata.html#SPATL545" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a>) specifying the view and its spatial column. If the view is a join view (that is, if it is based on multiple tables), you must specify the <code class="codeph">key_column</code> attribute (described in <a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="A theme definition contains one <styling_rules&gt; element, which may have several other elements depending on the theme type.">Themes: Styling Rules</a>) in the theme's styling rules. The reason for this requirement is that the map visualizer by default caches geometries for a predefined theme based on the rowid in the base table; however, for a join view there is no ROWID pseudocolumn, so you must specify a key column.
                     </p>
                     <p>For most types of predefined themes (but not WMS themes), you can use the Map Builder tool to create and preview themes. For information about the Map Builder tool, see <a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="This chapter briefly describes the map visualization component Map Builder tool, also referred to as Oracle Map Builder. It does not provide detailed information about the tool's interface; for that you should use see online help available when you use Oracle Map Builder.">Oracle Map Builder Tool</a>.
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD">Styling Rules in Predefined Spatial Geometry Themes</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB">How the Map Visualizer Formulates a SQL Query for a Styling Rule</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-FA13BA3E-86EF-45B4-8888-E755E3A04C5C">Styling Rules with Binding Parameters</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB">Applying Multiple Rendering Styles in a Single Styling Rule</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B">Using Multiple Rendering Styles with Scale Ranges</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB">Caching of Predefined Themes</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203">Feature Labels and Internationalization</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-9108FDF5-54BF-49C7-B390-B9E2D7B07CA5">Primary and Secondary Labels for Linear Features</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9550"></a><a id="JIMPV9549"></a><div class="props_rev_3"><a id="GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD" name="GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD"></a><h5 id="JIMPV-GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD" class="sect5"><span class="enumeration_section">2.3.1.1 </span>Styling Rules in Predefined Spatial Geometry Themes
                     </h5>
                     <div>
                        <p>Each predefined theme is always associated with one or more <span class="bold">styling rules</span>, specifications in XML format that control aspects of how the theme is displayed. This section describes styling rules for predefined spatial geometry themes, such as the airport theme shown in <a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">Example 2-6</a>. Other types of themes, such as image, GeoRaster, network, and topology themes, have their own distinct styling rules requirements, and these are discussed in sections that explain these themes. However, the styling rules for all types of themes are grouped under the <code class="codeph">&lt;styling_rules&gt;</code> element in an XML document, which is stored in the STYLING_RULES column for each predefined theme in the USER_SDO_THEMES view. (The <code class="codeph">&lt;styling_rules&gt;</code> DTD is described in <a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="A theme definition contains one <styling_rules&gt; element, which may have several other elements depending on the theme type.">Themes: Styling Rules</a>.)
                        </p>
                        <div class="infoboxnote" id="GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__GUID-0DF1FEC8-91A1-40DF-ABB7-5BC726F4CF04">
                           <p class="notep1">Note:</p>
                           <p>The following naming conventions are used for prefixes in style names in the examples in this chapter: <code class="codeph">v.</code> indicates variable (advanced style), <code class="codeph">m.</code> indicates marker, <code class="codeph">c.</code> indicates color, <code class="codeph">l.</code> indicates line, and <code class="codeph">t.</code> indicates text. (If the style is not under the current user's schema, you must specify the owner's schema name followed by a colon. For example: <code class="codeph">mdsys:c.red</code>.)
                           </p>
                           <p>In the content (character data) of an XML document, <code class="codeph">&amp;lt;</code> and <code class="codeph">&amp;gt;</code> must be used to represent <code class="codeph">&lt;</code> and <code class="codeph">&gt;</code>, respectively. Otherwise, <code class="codeph">&lt;</code> or <code class="codeph">&gt;</code>, such as in <code class="codeph">WHERE CATEGORY &gt; 'B'</code>, will be interpreted by the XML parser as part of an XML tag. 
                           </p>
                        </div>
                        <div class="example" id="GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">
                           <p class="titleinexample">Example 2-6 XML Definition of Styling Rules for an Airport Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules&gt;
  &lt;rule&gt;
    &lt;features style="c.black gray"&gt;
    runway_number &amp;gt; 1
    &lt;/features&gt;
    &lt;label column="name" style="t.airport name"&gt;
      1
    &lt;/label&gt;
  &lt;/rule&gt;
  &lt;rule&gt;
    &lt;features style="m.airplane"&gt;
    runway_number = 1
    &lt;/features&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;
</pre><p>Each styling rule has a required <code class="codeph">&lt;features&gt;</code> element and an optional <code class="codeph">&lt;label&gt;</code> element. The <code class="codeph">&lt;features&gt;</code> element specifies which row or rows (features) in the table or view will be selected based on the user-defined predicate and on the style to be used for the selected features. You can specify any valid SQL predicate as the value of this element. The <code class="codeph">&lt;label&gt;</code> element specifies whether or not to annotate the selected features, and if so, which column in the table or view to use for text labels.
                           </p>
                           <p>In <a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">Example 2-6</a>, there are two styling rules associated with the <code class="codeph">Airport</code> theme:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The first rule specifies that only those rows that satisfy the condition <code class="codeph">runway_number &amp;gt; 1</code> (that is, runway number greater than 1) will be selected, and these will be rendered using the style named <code class="codeph">c.black gray</code>. If no value is supplied, no WHERE clause condition is applied. For example, assume that the definition had been the following (that is, omitting the <code class="codeph">runway_number &amp;gt; 1</code> condition):
                                 </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules&gt;
  &lt;rule&gt;
    &lt;features style="c.black gray"/&gt;
    &lt;label column="name" style="t.airport name"&gt;
      1
    &lt;/label&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;
</pre><p>In this case, all airport features would be selected and would be rendered using the color style named <code class="codeph">c.black gray</code>.
                                 </p>
                                 <p><a id="d7682e1716" class="indexterm-anchor"></a>The first rule also has a <code class="codeph">&lt;label&gt;</code> element, which specifies that the NAME column in the table or view will be used to annotate each airport, using the text style <code class="codeph">t.airport name</code>. The value of the <code class="codeph">&lt;label&gt;</code> element, which can be any SQL expression that evaluates to a numeric value, is used to determine whether or not a feature will be annotated. If the numeric value is greater than zero, the feature will be annotated. In this case, because the value is the constant 1, all features specified by the <code class="codeph">&lt;features&gt;</code> element will be annotated, using the values in the NAME column. If the value is less than or equal to zero for a feature, that feature will not be annotated.
                                 </p>
                              </li>
                              <li>
                                 <p>The second rule, which applies to those airports with only one runway, does not have a <code class="codeph">&lt;label&gt;</code> element, thus preventing all such airports from being annotated. In addition, the features that satisfy the second rule will be rendered using a different style (<code class="codeph">m.airplane</code>), as specified in its <code class="codeph">&lt;features&gt;</code> element.
                                 </p>
                              </li>
                           </ul>
                           <p>You can think of each styling rule as a filter into the base table or view of the theme, because it selects only a subset of the rows and applies the rendering and labeling styles of that rule. In fact, the map visualizer formulates a complete SQL query for each styling rule. This query string follows a fixed format, as described in <a href="map-visualization-concepts.html#GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB">How the Map Visualizer Formulates a SQL Query for a Styling Rule</a>.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">Predefined Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9551"></a><div class="props_rev_3"><a id="GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB" name="GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB"></a><h5 id="JIMPV-GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB" class="sect5"><span class="enumeration_section">2.3.1.2 </span>How the Map Visualizer Formulates a SQL Query for a Styling Rule
                     </h5>
                     <div>
                        <p>To see how the map visualizer formulates a SQL query for a styling rule, consider the first styling rule from the airport theme example (<a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">Example 2-6</a> in <a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD">Styling Rules in Predefined Spatial Geometry Themes</a>):
                        </p><pre class="oac_no_warn" dir="ltr">&lt;styling_rules&gt;
  &lt;rule&gt;
    &lt;features style="c.black gray"&gt;
    runway_number &amp;gt; 1
    &lt;/features&gt;
    &lt;label column="name" style="t.airport name"&gt;
      1
    &lt;/label&gt;
  &lt;/rule&gt;
  . . .
&lt;/styling_rules&gt;
</pre><p>When the map visualizer processes this theme, it formulates a query string for this styling rule that looks like this:</p><pre class="oac_no_warn" dir="ltr">SELECT ROWID, GEOMETRY, 'C.BLACK GRAY', NAME, 'T.AIRPORT NAME', 1, 'rule#0' 
  FROM AIRPORT_POINT 
  WHERE MDSYS.SDO_FILTER(GEOMETRY, 
    MDSYS.SDO_GEOMETRY(2003, 8265, NULL, MDSYS.SDO_ELEM_INFO_ARRAY(1, 1003, 3),
    MDSYS.SDO_ORDINATE_ARRAY(:mvqboxxl, :mvqboxyl, :mvqboxxh, :mvqboxyh)), 
    'querytype=WINDOW') = 'TRUE'
</pre><p>In the preceding query string:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The base table name of the theme, <code class="codeph">AIRPORT_POINT</code>, appears in the FROM clause
                              </p>
                           </li>
                           <li>
                              <p>The SELECT list includes ROWID as the first column. ROWID is the default key_column attribute of a predefined theme.</p>
                           </li>
                           <li>
                              <p>The next column in the SELECT list is GEOMETRY. This is the geometry column of this theme.</p>
                           </li>
                           <li>
                              <p>The next column in the SELECT list is the literal string <code class="codeph">'C.BLACK GRAY'</code>, which is the rendering style name for this rule.
                              </p>
                           </li>
                           <li>
                              <p>The next column in the SELECT list is the column NAME, which will provide the label text. It is specified in the <code class="codeph">&lt;label&gt;</code> element of this styling rule.
                              </p>
                           </li>
                           <li>
                              <p>The next column in the SELECT list is the literal string <code class="codeph">'T.AIRPORT NAME'</code>, which is the labeling style name specified in the <code class="codeph">&lt;label&gt;</code> element.
                              </p>
                           </li>
                           <li>
                              <p>The next column in the SELECT list is the literal value <code class="codeph">1</code>, which is the value of the <code class="codeph">&lt;label&gt;</code> element itself.
                              </p>
                           </li>
                           <li>
                              <p>The next column in the SELECT list is the literal string <code class="codeph">'rule#0'</code>. This is used internally by the map visualizer only.
                              </p>
                           </li>
                           <li>
                              <p>The large WHERE clause is essentially an Oracle Spatial and Graph filtering operator, SDO_FILTER. This WHERE clause is automatically added by the map visualizer (and is <span class="italic">not</span> something you need to specify when defining a theme). It ensures that only those geographic features that are in contact with the current map viewing window will be fetched from the base table. The four binding variables, <code class="codeph">mvqboxxl</code>, <code class="codeph">mvqboxyl</code>, <code class="codeph">mvqboxxh</code> and <code class="codeph">mvqboxyh</code>, will be automatically filled in with the coordinates for the current map viewing window.
                              </p>
                           </li>
                        </ul>
                        <p>The map visualizer always uses the preceding format when constructing SQL queries for the styling rules of a predefined geometry theme's styling rules. It uses different formats for the queries for other types of themes, such as a topology or GeoRaster theme. The formats for these other queries are not described here; however, if you are interested, you can set the logging level of your map visualizer instance to <code class="codeph">FINEST</code>, submit a map request containing a particular type of theme, and check the map visualizer log file to see the exact query that the map visualizer constructs.
                        </p>
                        <p>Each row (or feature) in the query's result set now contains all the information the map visualizer needs: the spatial data, the rendering and labeling style names, the label text, and the labeling conditions. The map visualizer then constructs an in-memory feature object for each row and sends them to the rendering pipeline to be displayed on the map.</p>
                        <p>If two or more styling rules are specified for a theme, a UNION ALL operation is performed on the SQL queries for the rules (from first to last) to fetch the qualified features from the table or view. </p>
                        <p>If an advanced style is specified in a rule, the SELECT list of the query for that rule will include the additional attribute column or columns that are required by the advanced style.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">Predefined Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9552"></a><div class="props_rev_3"><a id="GUID-FA13BA3E-86EF-45B4-8888-E755E3A04C5C" name="GUID-FA13BA3E-86EF-45B4-8888-E755E3A04C5C"></a><h5 id="JIMPV-GUID-FA13BA3E-86EF-45B4-8888-E755E3A04C5C" class="sect5"><span class="enumeration_section">2.3.1.3 </span>Styling Rules with Binding Parameters
                     </h5>
                     <div>
                        <p><a id="d7682e1905" class="indexterm-anchor"></a><a id="d7682e1907" class="indexterm-anchor"></a><a id="d7682e1911" class="indexterm-anchor"></a><a id="d7682e1913" class="indexterm-anchor"></a>As explained in <a href="map-visualization-concepts.html#GUID-BEB362E3-D58B-47CF-A74A-DC584F9BCECB">How the Map Visualizer Formulates a SQL Query for a Styling Rule</a>, the <code class="codeph">&lt;features&gt;</code> element of a styling rule can define a query condition to select features from the base table or view. This query condition typically contains hard-coded SQL expressions, such as <code class="codeph">runway_num &gt; 1</code> in the airport theme. However, you can instead include binding variables in the query predicate. Such a theme is often called a <span class="italic">templated theme</span>, because it is essentially defining a template for how to display certain features, and the exact set of features is determined at runtime by providing a binding value to the query predicate.
                        </p>
                        <p>The concept of templated theme allows you to define a single theme and to have the binding values change between map requests. For example, consider the following styling rule:</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules&gt;
  &lt;rule&gt;
    &lt;features style="C.RED"&gt; (<span class="bold">state_abrv=:1</span>) &lt;/features&gt;
    &lt;label column="STATE" style="T.STATE NAME"&gt; 1 &lt;/label&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;
</pre><p>The preceding styling rule defines a <code class="codeph">&lt;features&gt;</code> element with a query condition based on the value of the <code class="codeph">state_abrv</code> attribute, which the application must supply. In map visualizer requests, the binding parameter must be defined on the theme section, and each binding parameter is defined by a value and by a SQL type. In the following theme definition on a map request, the state abbreviation value is <code class="codeph">ME</code> and the variable SQL type is <code class="codeph">String</code>. The value <code class="codeph">ME</code> will be used with the predefined theme styling rule.
                        </p><pre class="oac_no_warn" dir="ltr">&lt;theme name="THEME_US_DYN_STATES" &gt;
   &lt;binding_parameters&gt;
      &lt;parameter value="ME" type="String"/&gt;
   &lt;/binding_parameters&gt;
&lt;/theme&gt;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">Predefined Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9554"></a><a id="JIMPV9553"></a><div class="props_rev_3"><a id="GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB" name="GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB"></a><h5 id="JIMPV-GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB" class="sect5"><span class="enumeration_section">2.3.1.4 </span>Applying Multiple Rendering Styles in a Single Styling Rule
                     </h5>
                     <div>
                        <p>The <code class="codeph">&lt;feature&gt;</code> element of a styling rule allows you to specify only one rendering style using the <code class="codeph">style</code> attribute. If you want to apply multiple rendering styles to a feature without using multiple themes, you cannot specify multiple styling rules, because each rule selects a different subset of features. To apply multiple rendering styles to a feature without using multiple themes, you must use the <code class="codeph">&lt;rendering&gt;</code> element instead of the <code class="codeph">style</code> attribute of the <code class="codeph">&lt;features&gt;</code> element.
                        </p>
                        <p>The <code class="codeph">&lt;rendering&gt;</code> element has the format shown in the following example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;rendering&gt;
 &lt;style name="V.POIVMK" value_columns="FEATURE_CODE"&gt;
  &lt;substyle name="V.POIVBKT" value_columns="POINT_ID" changes="FILL_COLOR"/&gt;
 &lt;/style&gt;
&lt;/rendering&gt;
</pre><p>In the <code class="codeph">&lt;rendering&gt;</code> element, the <code class="codeph">&lt;style&gt;</code> element specifies the name of the style to use when rendering features, and one or more value columns (comma-delimited) for use with advanced styles. In the preceding example, the style name is <code class="codeph">V.POIMVK</code> and the value column is FEATURE_CODE.
                        </p>
                        <p>In the <code class="codeph">&lt;style&gt;</code> element, the <code class="codeph">&lt;substyle&gt;</code> element enables rendering of a feature using a combination of two attribute values.,such as defining the feature shape by the <code class="codeph">&lt;style&gt;</code> element and the feature color by the <code class="codeph">&lt;substyle&gt;</code> element. This is useful for rendering point features once but based on two attribute values. You can specify one or more value columns (comma-delimited), and the change to be applied (only <code class="codeph">FILL_COLOR</code> is currently supported).
                        </p>
                        <p>You can specify multiple <code class="codeph">&lt;style&gt;</code> elements with a <code class="codeph">&lt;rendering&gt;</code> element, to achieve the following goals:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To create an advanced style in which a base advanced style, associated with some attributes (columns), can have its rendering affected by some other attributes through the use of a substyle. For example, an advanced style can display markers of different sized based on one value column, while using a secondary color style to change the fill color of those markers based on another value column.</p>
                           </li>
                           <li>
                              <p>To use multiple styles to render a feature (achieving the effect of stacked styles).</p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB__CIHJEEFJ">Example 2-7</a> shows a predefined theme styling rule that uses the <code class="codeph">&lt;rendering&gt;</code> element. The <code class="codeph">&lt;features&gt;</code> element is part of the rules and must be define, because it also specified the query condition, but no style attribute is specified. The <code class="codeph">&lt;rendering&gt;</code> element defines how to render the features.
                        </p>
                        <div class="example" id="GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB__CIHJEEFJ">
                           <p class="titleinexample">Example 2-7 Styling Rules Using the &lt;rendering&gt; Element</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules&gt;
 &lt;rule&gt;
   &lt;features&gt; &lt;/features&gt;
   &lt;label column="NAME" style="T.STREET2"&gt; 1 &lt;/label&gt;
   &lt;rendering&gt;
      &lt;style name="V.POIVMK" value_columns="FEATURE_CODE"&gt;
        &lt;substyle name="V.POIVBKT" value_columns="POINT_ID" changes="FILL_COLOR"/&gt;
      &lt;/style&gt;
   &lt;/rendering&gt;
 &lt;/rule&gt;
&lt;/styling_rules&gt;
</pre><p>The <code class="codeph">&lt;rendering&gt;</code> element can also be used with dynamic themes, geometry themes, and topology themes.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">Predefined Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10068"></a><a id="JIMPV10067"></a><div class="props_rev_3"><a id="GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B" name="GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B"></a><h5 id="JIMPV-GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B" class="sect5"><span class="enumeration_section">2.3.1.5 </span>Using Multiple Rendering Styles with Scale Ranges
                     </h5>
                     <div>
                        <p>The <code class="codeph">&lt;rendering&gt;</code> element (see <a href="map-visualization-concepts.html#GUID-7C2040AC-5A09-4303-8AAE-B0772BB4EBAB">Applying Multiple Rendering Styles in a Single Styling Rule</a>) can have multiple <code class="codeph">&lt;style&gt;</code> elements defined. You can also assign scale ranges for each <code class="codeph">&lt;style&gt;</code> element. By using multiple stacked styles with scale ranges, you can define a single theme with different representations for different scales.
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B__CIHGCCIJ">Example 2-8</a> shows the theme styling rules with stacked styles. Each style has a scale range defined.
                        </p>
                        <div class="example" id="GUID-EB140A54-D39F-4FA4-B282-DF413DF5C94B__CIHGCCIJ">
                           <p class="titleinexample">Example 2-8 Theme Styling Rules with Stacked Styles</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules&gt;
  &lt;rule&gt;
    &lt;features&gt; &lt;/features&gt;
    &lt;label column="STATE" style="T.S02_STATE_ABBREVS"&gt; 1 &lt;/label&gt;
    &lt;rendering&gt;
     &lt;style name="C.COUNTIES" max_scale="5.0E7" scale_mode="RATIO"/&gt;
     &lt;style name="C.RB13_1" min_scale="5.0E7" max_scale="1.0E7" scale_mode="RATIO"/&gt;
     &lt;style name="L.DPH" min_scale="1.0E7" scale_mode="RATIO"/&gt;
    &lt;/rendering&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">Predefined Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9555"></a><div class="props_rev_3"><a id="GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB" name="GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB"></a><h5 id="JIMPV-GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB" class="sect5"><span class="enumeration_section">2.3.1.6 </span>Caching of Predefined Themes
                     </h5>
                     <div>
                        <p>By default, the map visualizer automatically caches the spatial data for a predefined theme when it is fetched from the database for processing by the map visualizer rendering engine. By contrast, data for dynamic (JDBC) themes is never cached in the map visualizer. If you do not want any data for a predefined theme to be cached (such as for a theme whose underlying base table is constantly being updated), you can set the <code class="codeph">caching</code> attribute to <code class="codeph">NONE</code> in the <code class="codeph">&lt;styling_rules&gt;</code> element for the theme. (The <code class="codeph">&lt;styling_rules&gt;</code> element, including the <code class="codeph">caching</code> attribute, is described in <a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="A theme definition contains one <styling_rules&gt; element, which may have several other elements depending on the theme type.">Themes: Styling Rules</a>.)
                        </p>
                        <p>For frequently used themes whose base data is static or read-only, specify <code class="codeph">caching ALL</code> for the best performance. This causes the map visualizer, when it first accesses the theme definition, to fetch all the features (including spatial data, attribute data, and styling information associated with them) and cache them in the map visualizer memory, creating an in-memory R-tree for the theme's spatial data. All subsequent requests requiring that theme occur locally instead of going to the database. 
                        </p>
                        <p><a id="d7682e2217" class="indexterm-anchor"></a>If the <code class="codeph">caching</code> attribute value is <code class="codeph">NORMAL</code> (the default), each time a map involving that theme is requested, the map visualizer queries the database to get the spatial data and any associated attribute data. However, if any of the spatial geometry data, as referenced by rowid or a user-specified key column, has already been cached, the unpickling process (the conversion from the raw database geometry format to a Java geometry object) is skipped. Still, if memory is not an issue and if a frequently used theme can completely fit in the cache, you should specify <code class="codeph">caching ALL</code>, to eliminate virtually all database access for that theme after the initial loading.
                        </p>
                        <p>Because the map visualizer spatial data cache is global, all predefined themes that are accessed by the map visualizer compete for a global fixed-sized memory cache. The cache resides completely in memory, and you can specify the maximum size of the cache as explained in <a href="introduction-to-map-visualization-component.html#GUID-4ABC70FC-73E2-4E81-8A72-0FB3BEF3E781">Customizing the Spatial Data Cache</a>. When the cache limit is reached, older cached data is removed from the cache to make room for the most recently accessed data, except that data for themes specified with <code class="codeph">caching ALL</code> is not removed from the cache, and the map visualizer does not requery the database for these themes.
                        </p>
                        <p>Caching is currently disabled for predefined annotation and custom geometry themes. For custom geometry themes, you can implement a caching mechanism in your provider implementation. However, for each request, a new instance of your provider is created; and if you implement a local caching mechanism, it will be lost.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">Predefined Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9928"></a><a id="JIMPV9927"></a><div class="props_rev_3"><a id="GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203" name="GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203"></a><h5 id="JIMPV-GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203" class="sect5"><span class="enumeration_section">2.3.1.7 </span>Feature Labels and Internationalization
                     </h5>
                     <div>
                        <p>The map visualizer includes support for translated theme labels. Typically with a predefined map visualizer theme, you can specify a label column that will provide all the text strings for labeling each feature of the theme. These text strings are string values stored in the database table column, in a specific language (such as English). However, you can also supply different translations of these stored string values by using a <span class="italic">resource bundle</span>. When such translated text strings are available, you can instruct the map visualizer to label the features of a theme using a specific language or locale.
                        </p>
                        <div class="infoboxnote" id="GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203__GUID-DB7CE037-FF1E-4752-B4C0-121CB65B4603">
                           <p class="notep1">Note:</p>
                           <p>Only predefined geometry themes support resource bundles at this time.</p>
                        </div>
                        <p>The steps for supplying translations and instructing the map visualizer to label a theme using a specific user language are as follows:</p>
                        <ol>
                           <li>
                              <p>Prepare the translations.</p>
                              <p>A typical map visualizer predefined geometry theme gets all the underlying data from a table. You can specify one of the (string type) columns as the labeling column for this theme. This is called the label column. When a label column needs to be translated into different languages, you extract all the values from the table, and store them in a properties file, such as <code class="codeph">StringResources.properties</code>. (Note that the file name <code class="codeph">StringResources.properties</code> assumes that the extracted texts are all in English. If they are not, then the properties file name needs to follow a convention where the language code, and an optional region or country code, is a suffix in the file name. For example, <code class="codeph">StringResources_fr.properties</code> will contain French translations only, while <code class="codeph">StringResources_zh_CN.properties</code> is for simplified Chinese.)
                              </p>
                              <p>A properties file is a plain text file that follows a very simple format. For example, a simple <code class="codeph">StringResources.properties</code> file might contain the following:
                              </p><pre class="oac_no_warn" dir="ltr"># This is the English version of the strings.
California = California
Nevada = Nevada
Montana = Montana
</pre><p>The first line is a comment, and starts with the <code class="codeph">#</code> character. Each subsequent line contains one pair of key (first string) and value (second string). The keys come directly from the label column, whereas the values are corresponding translations. Because this particular file contains the default English text strings, the key and the value (translation) are the same in each case. Note that the keys should always be in English.
                              </p>
                              <p>From this default properties file, your translation specialists should create a set of property files, one file for each translation. Using the preceding simple example, the translated file for simplified Chinese (<code class="codeph">StringResources_zh_CN.properties</code>) should look like the following, in which the value of each key has been replaced by the Chinese translation of the key, encoded as a Unicode string:
                              </p><pre class="oac_no_warn" dir="ltr"># This is the Chinese version of the strings.
California =  \u6CA1\u6709\u8981\u5448\u73B0\u7684\u4E3B\u9898\u3002
Nevada = \u65E0\u6CD5\u52A0\u8F7D\u4E3B\u9898\u3002
Montana = \u65E0\u6CD5\u52A0\u8F7D\u6837\u5F0F\u3002
</pre><p>The default properties file, <code class="codeph">StringResouces.properties</code>, plus all the language specific files that share the same file name (except for the language and region suffixes) collectively form what is called a<span class="italic"> resource bundle</span>. In this case the resource bundle is named <code class="codeph">StringResources</code>. You can name your resource bundles with any name you like, but different bundles (containing different set of keys) should always use different base names.
                              </p>
                              <p>For more information about Java resource bundles and properties files, see the Java language documentation.</p>
                           </li>
                           <li>
                              <p>Supply the translated text strings as a Java Resource Bundle, which can be based on either Java resource classes or plain properties files.</p>
                              <p>After all the label text strings have been translated, you must place all the files (the resource bundle) in the map visualizer CLASSPATH so that the map visualizer can find these files at runtime. Typically, you can use the map visualizer <code class="codeph">WEB-INF/classes</code> folder: copy all the files including the base <code class="codeph">StringResources.properties</code> and language-specific files (such as <code class="codeph">StringResources_fr.properties</code> and <code class="codeph">StringResources_zh_CN.properties</code>) into this folder.
                              </p>
                              <p>If you place all the files of a resource bundle into a subfolder under <code class="codeph">WEB-INF/classes</code>, then the name of the resource bundle (as known to the map visualizer) will need to be prefixed with this subfolder name. This is similar to how one places a Java class in a directory structure that follows the package names. For example, if you put all the <code class="codeph">StringResources*.properties</code> files in <code class="codeph">WEB-INF/classes/i18n/</code>, then later when you register the resource bundle with the map visualizer, the actual name of your resource bundle should be <code class="codeph">i18n.StringResources</code>.
                              </p>
                           </li>
                           <li>
                              <p>Specify the name of the resource bundle in the theme definition by registering the resource bundle with the map visualizer.</p>
                              <p>For the map visualizer to find your translated classes, you must specify the complete name of your resource bundle in the theme definition. The easiest way to do this is with the Map Builder utility, specifying the resource bundle name as the Translation Class in the Advanced Parameters pane of the theme editor. <a href="map-visualization-concepts.html#GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203__CIHFFACC">Figure 2-7</a> shows <code class="codeph">StringResources</code> being specified for the Translation Class.
                              </p>
                              <div class="figure" id="GUID-EB3FD1EC-2022-4813-9F1D-0966D1141203__CIHFFACC">
                                 <p class="titleinfigure">Figure 2-7 Specifying a Resource Bundle for a Theme</p><img src="img/translation_class.gif" alt="Description of Figure 2-7 follows" title="Description of Figure 2-7 follows" longdesc="img_text/translation_class.html"><br><a href="img_text/translation_class.html">Description of "Figure 2-7 Specifying a Resource Bundle for a Theme"</a></div>
                              <!-- class="figure" -->
                              <p>As mentioned in the preceding step, if your resource bundle files are located in a subfolder of , then the subfolder name must the base name of your resource bundle, separated by a period, as if the resource bundle files were Java classes in a package.</p>
                           </li>
                           <li>
                              <p>Specify a language parameter when requesting a map or theme.</p>
                              <p>Specify the preferred language for each map request the Oracle Maps JavaScript API (described in <a href="oracle-maps.html#GUID-0D5BC30A-40AC-4347-89FA-E95D44918E32" title="The Oracle Maps JavaScript client is a browser-based map visualization engine that works on top of the map tile server and that uses HTML5 technology.">Oracle Maps JavaScript API</a>) or the XML map request API (described in <a href="map-visualization-servers.html#GUID-0D2CF483-95C0-45D0-B4E8-5A4578741A63" title="The map visualizer, as a set of Java Enterprise Edition packages, contains a collection of servers to provide mapping services.">Map Visualization Servers</a>).
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>In JavaScript code, specify the label language code in the call to the MVThemeBasedFOI class. The following example causes the FOI theme to display its labels in simplified Chinese:</p><pre class="oac_no_warn" dir="ltr">themebasedfoi = new MVThemeBasedFOI('themebasedfoi1','mvdemo.theme_demo_states');
<span class="bold">themebasedfoi.setLabelLanguageCode("zh-cn")</span>;
themebasedfoi.enableLabels(true);
</pre><p>With the <code class="codeph">setLabelLanguageCode(lang_code)</code> method, you can specify a language code so that the map visualizer labels the features using the text strings for the specified language, which must be a 2 letter language code (such as <code class="codeph">zh</code>), followed optionally a hyphen (-) and a 2-letter country code (such as <code class="codeph">zh-cn</code>). The language codes are defined by the ISO 639 standards and are listed at several websites, such as <a href="http://www.loc.gov/standards/iso639-2/php/English_list.php" target="_blank"><code class="codeph">http://www.loc.gov/standards/iso639-2/php/English_list.php</code></a>. If no translated text strings for the specified language code are found, the English text strings (or whatever the default strings are for the theme) will be used for labeling.
                                    </p>
                                 </li>
                                 <li>
                                    <p>In an XML map request, specify the language in the <code class="codeph">lang</code> attribute. The following example causes the labels to be displayed in simplified Chinese:
                                    </p><pre class="oac_no_warn" dir="ltr">&lt;map_request title="Oracle LBS MAP" 
basemap="demo_map" 
datasource = "mvdemo" 
width="640" height="480" 
<span class="bold">lang="zh-CN"</span> 
format="PNG_STREAM"&gt; 
 
&lt;center size="5.15"&gt; 
&lt;geoFeature&gt; &lt;geometricProperty typeName="center"&gt; 
  &lt;Point&gt; &lt;coordinates&gt;-122.2615, 37.5266&lt;/coordinates&gt; 
  &lt;/Point&gt; &lt;/geometricProperty&gt; 
&lt;/geoFeature&gt; 
&lt;/center&gt; 
&lt;/map_request&gt;
</pre><p>Only language codes and country codes specified by the ISO 639 standards can be used as possible <code class="codeph">lang</code> values. If an optional country code is used, it must be connected to the language code by a hyphen (-). Country codes and language codes are not case sensitive.
                                    </p>
                                    <p>If the <code class="codeph">lang</code> attribute is specified as part of the XML map request, every theme rendered to the result map it checked to see if it has an associated resource bundle. If a theme does not have an associated resource bundle, or the translated text strings for the specified language cannot be found, the default values (those stored in the table column) are used.
                                    </p>
                                    <p>If the <code class="codeph">lang</code> attribute is not specified as part of the XML map request, the default text string values (those stored in the table column) are always used, regardless of which locale in effect for the map visualizer itself (or rather, its containing JVM).
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">Predefined Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10103"></a><div class="props_rev_3"><a id="GUID-9108FDF5-54BF-49C7-B390-B9E2D7B07CA5" name="GUID-9108FDF5-54BF-49C7-B390-B9E2D7B07CA5"></a><h5 id="JIMPV-GUID-9108FDF5-54BF-49C7-B390-B9E2D7B07CA5" class="sect5"><span class="enumeration_section">2.3.1.8 </span>Primary and Secondary Labels for Linear Features
                     </h5>
                     <div>
                        <p>The map visualizer includes support for labeling a linear feature with a primary and a secondary label. For example, a street name can be labeled with its English name as the primary label and with its local (native) language as the secondary label (or vice versa). When labeling a linear feature, the primary and secondary labels are labeled alternately along the feature when applicable.</p>
                        <p>When you specify a label column for a map visualizer theme, that column will provide both the primary and secondary text strings, delimited by "|||" (three vertical lines). For example, a text string of "Garden St|||Rua Jardim" contains the primary text string of "Garden St" (English) and secondary text string of "Rua Jardim" (Portuguese). In practice, that label column may be a concatenation of two existing columns, and database triggers can be employed to maintain its consistency with its two base columns.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-E2AF20DB-2610-4220-BF5E-3B66701F44ED">Predefined Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9557"></a><a id="JIMPV9556"></a><div class="props_rev_3"><a id="GUID-78BAAC41-964B-401F-A30E-31544CF4B73E" name="GUID-78BAAC41-964B-401F-A30E-31544CF4B73E"></a><h4 id="JIMPV-GUID-78BAAC41-964B-401F-A30E-31544CF4B73E" class="sect4"><span class="enumeration_section">2.3.2 </span>JDBC Themes
                  </h4>
                  <div>
                     <p>A <span class="bold">JDBC theme</span> is a theme that is dynamically defined with a map request. JDBC themes are not stored permanently in the database, as is done with predefined themes.
                     </p>
                     <p>For a JDBC theme, you must specify a valid SQL query that retrieves all the necessary spatial data (geometries or other types of data, such as image, GeoRaster, network, or topology). If attribute data is needed, such as for thematic mapping or spatial data analysis, the query must also select it. In other words, you must provide a correct and complete query for a JDBC theme. In addition to the query, you can also specify the rendering and labeling styles to be used for the theme.</p>
                     <p>For a JDBC theme based on spatial geometries, the map visualizer processed the columns specified in the query according to the following rules:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The column of type SDO_GEOMETRY is treated as the spatial data column.</p>
                        </li>
                        <li>
                           <p>Any column whose name or alias matches that specified in the JDBC theme's <code class="codeph">label_column</code> attribute is treated as the labeling column, whose values are used as text for labels.
                           </p>
                        </li>
                        <li>
                           <p>Any other columns are treated as attribute data columns, which may or may not be used by the map visualizer. For example, if the rendering style is an advanced style, any attribute columns are processed by that style in the order in which they appear in the SELECT list in the query. Thus, if you are performing thematic mapping and using an advanced style, you must specify all attribute columns that are needed for the thematic mapping, in addition to the geometry column and optional labeling column. (A labeling column can also be an attribute column, in which case you do not need to specify that column in the SELECT list.)</p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E__I1011943">Example 2-9</a> is a map request that includes a JDBC theme.
                     </p>
                     <div class="example" id="GUID-78BAAC41-964B-401F-A30E-31544CF4B73E__I1011943">
                        <p class="titleinexample">Example 2-9 JDBC Theme in a Map Request</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;map_request title="My MAP" datasource = "mvdemo"&gt;

  &lt;themes&gt;
    &lt;theme name="jdbc_theme_1"&gt;
       &lt;jdbc_query
            datasource="mvdemo"
            jdbc_srid="41052"
            spatial_column="geometry"
            render_style="C.RED"&gt;
          SELECT geometry from states where name='MA' 
       &lt;/jdbc_query&gt;
     &lt;/theme&gt;
  &lt;/themes&gt;

&lt;/map_request&gt; 
</pre><p>The full query that the map visualizer executes for the JDBC theme in <a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E__I1011943">Example 2-9</a> is:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT geometry FROM states WHERE name='MA';
</pre><p>For this request, the map visualizer generates a map that contains only the selected geometry as a result of executing this JDBC theme's query. In a more typical case, however, the map request will need to use several JDBC themes to plot additional dynamic data on top of the base map. Furthermore, the map request may have a query window associated with it; that is, the user may want to see only a portion of the area included in the whole base map. In this case, the SQL queries in the JDBC themes will be subjected to a spatial window query, to eliminate any unwanted results.</p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9">Defining a Point JDBC Theme Based on Two Columns</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1">Storing Complex JDBC Themes in the Database</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9559"></a><a id="JIMPV9560"></a><a id="JIMPV9558"></a><div class="props_rev_3"><a id="GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9" name="GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9"></a><h5 id="JIMPV-GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9" class="sect5"><span class="enumeration_section">2.3.2.1 </span>Defining a Point JDBC Theme Based on Two Columns
                     </h5>
                     <div>
                        <p>If a database table uses two columns (such as longitude and latitude) to represent a point coordinate, you can define a JDBC theme based on the two columns to render points. The table does not need to have a spatial geometry column, but it can have one; however, if the theme request defines the point columns and also the geometry column, the map visualizer will try to render the points using the two columns, not the geometry column.</p>
                        <p><a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHJHEFF">Example 2-10</a> is a JDBC theme that renders points from two columns, named LONG_LOC and LAT_LOC, of a table named POI. The x_column and y_column attributes specify the columns containing the point coordinate values. In this example, the points are rendered using the C.RED style, and the table values from the NAME column are rendered using the T.POI_NAME style.
                        </p>
                        <div class="example" id="GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHJHEFF">
                           <p class="titleinexample">Example 2-10 JDBC Theme Based on Columns</p><pre class="oac_no_warn" dir="ltr">&lt;map_request&gt;
  . . .
  &lt;center&gt;
   . . .
  &lt;/center&gt;
  &lt;themes&gt;
    &lt;theme name="theme1" &gt;
       &lt;jdbc_query
         datasource="mvdemo"
         jdbc_srid="8265"
         <span class="bold">x_column="long_loc"</span>
         <span class="bold">y_column="lat_loc"</span>
         render_style="C.RED"
         label_column="name"
         label_style="T.POI_NAME"
         &gt;SELECT long_loc, lat_loc,name FROM poi
       &lt;/jdbc_query&gt;
     &lt;/theme&gt;
  &lt;/themes&gt;
&lt;/map_request&gt;
</pre><p>If the request specifies a valid query window (that is, not the full extent), a WHERE expression based on the size of the request window is automatically added to the query.</p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHCIHJD">
                           <p class="titleinexample">Example 2-11 JDBC Theme Based on Columns, with Query Window</p>
                           <p>If the table has a geometry column, you can specify SQL code to use the geometry column as a filter. <a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHCIHJD">Example 2-11</a> is similar to <a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHJHEFF">Example 2-10</a>, but it adds the use of the SDO_FILTER operator to specify a query window based on the geometry in the column named GEOMETRY. In <a href="map-visualization-concepts.html#GUID-37138549-BCDA-452C-A2CB-DAE1B2B896C9__CIHCIHJD">Example 2-11</a>, the question mark (?) characters indicate that the lower-left and upper-right coordinates of the query window rectangle are taken from values supplied at runtime (not shown in this example).
                           </p><pre class="oac_no_warn" dir="ltr">&lt;map_request&gt;
  . . .
  &lt;center&gt;
   . . .
  &lt;/center&gt;
  &lt;themes&gt;
    &lt;theme name="theme1" &gt;
       &lt;jdbc_query
         datasource="mvdemo"
         jdbc_srid="8265"
         <span class="bold">x_column="long_loc"</span>
         <span class="bold">y_column="lat_loc"</span>
         render_style="C.RED"
         label_column="name"
         label_style="T.POI_NAME"
         &gt;SELECT long_loc, lat_loc FROM poi <span class="bold">WHERE</span>
           <span class="bold">SDO_FILTER</span>(geometry,MDSYS.SDO_GEOMETRY(2003, 8265, NULL, 
           MDSYS.SDO_ELEM_INFO_ARRAY(1, 1003, 3),
           MDSYS.SDO_ORDINATE_ARRAY(<span class="bold">?,?,?,?</span>)),
           'querytype=WINDOW') = 'TRUE'
       &lt;/jdbc_query&gt;
     &lt;/theme&gt;
  &lt;/themes&gt;
&lt;/map_request&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E">JDBC Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9562"></a><a id="JIMPV9561"></a><div class="props_rev_3"><a id="GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1" name="GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1"></a><h5 id="JIMPV-GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1" class="sect5"><span class="enumeration_section">2.3.2.2 </span>Storing Complex JDBC Themes in the Database
                     </h5>
                     <div>
                        <p>Sometimes the SQL query for a JDBC theme is so complex that you may want to save the query. In such cases, you can define a predefined theme (whose definition is stored in the database's USER_SDO_THEMES view), and then include the full SQL query as the content of the <code class="codeph">&lt;features&gt;</code> element in the styling rules for that theme.
                        </p>
                        <p>The feature style specified in the <code class="codeph">&lt;features&gt;</code> element is then used to render the geometries retrieved using the full query. The base table as defined for such a theme is ignored because the full SQL query already includes a FROM clause. The geometry column defined in the USER_SDO_THEMES view is still needed, and it must be the same as the geometry column selected in the user-supplied SQL query. If you have a <code class="codeph">&lt;label&gt;</code> element for a styling rule, the label style specified is used to label the geometries, as long as the query selects a column that contains label text.
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1__I1012691">Example 2-12</a> is a sample <code class="codeph">&lt;styling_rules&gt;</code> element of a predefined theme with a complex SQL query.
                        </p>
                        <div class="example" id="GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1__I1012691">
                           <p class="titleinexample">Example 2-12 Complex Query in a Predefined Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
 &lt;styling_rules&gt;
   &lt;rule&gt;
     &lt;features style="L.POOR_ROADS" asis="true"&gt;
        select sdo_lrs.clip_geom_segment(geometry,start_measure,end_measure)
              geometry 
        from (select /*+ no_merge use_hash(a b) */
                a.street_id, name, start_measure, end_measure, geometry
             from (select /*+ no_merge */ a.street_id, name, geometry
                   from philly_roads a
                   where sdo_filter(geometry,sdo_geometry(2002,41124,null,
                    sdo_elem_info_array(1,2,1),
                                       sdo_ordinate_array(?,?,?,?)),
                                 'querytype=window')='TRUE') a,
                   philly_road_conditions b
             where condition='POOR' and a.street_id = b.street_id)
     &lt;/features&gt;
   &lt;/rule&gt;
 &lt;/styling_rules&gt;
</pre><p>Even though <a href="map-visualization-concepts.html#GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1__I1012691">Example 2-12</a> is defined as a predefined theme, the map visualizer still treats it as a JDBC theme at runtime when a user requests a map that includes this theme. As with a normal JDBC theme, the map visualizer by default imposes a window filtering process (if a query window was included in the map request) on top of the SQL query. To override this default behavior and have the supplied query string executed without any modification, specify <code class="codeph">asis="true"</code> in the <code class="codeph">&lt;features&gt;</code> element, as shown in <a href="map-visualization-concepts.html#GUID-05198248-2EBA-4171-AAE7-CD6FA2CD70E1__I1012691">Example 2-12</a>.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E">JDBC Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9577"></a><a id="JIMPV9576"></a><div class="props_rev_3"><a id="GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575" name="GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575"></a><h4 id="JIMPV-GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575" class="sect4"><span class="enumeration_section">2.3.3 </span>Image Themes
                  </h4>
                  <div>
                     <p>An <span class="bold">image theme</span> is a special kind of map visualizer theme useful for visualizing geographically referenced imagery (raster) data, such as from remote sensing and aerial photography.
                     </p>
                     <p>You can define an image theme dynamically or permanently (as a predefined theme) in the database. You can use image themes with vector (nonimage) themes in a map. <a href="map-visualization-concepts.html#GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575__I1012823">Figure 2-8</a> shows a map in which an image theme (showing an aerial photograph of part of the city of Boston) is overlaid with themes showing several kinds of roadways in the city.
                     </p>
                     <div class="figure" id="GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575__I1012823">
                        <p class="titleinfigure">Figure 2-8 Image Theme and Other Themes Showing Boston Roadways</p><img src="img/img_boston.gif" alt="Description of Figure 2-8 follows" title="Description of Figure 2-8 follows" longdesc="img_text/img_boston.html"><br><a href="img_text/img_boston.html">Description of "Figure 2-8 Image Theme and Other Themes Showing Boston Roadways"</a></div>
                     <!-- class="figure" -->
                     <p>Before you can define an image theme, you must follow these rules in organizing your image data:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Store image data in its original format (such as JPEG) in a BLOB column in a database table, or as an Oracle Multimedia object (ORDSYS.ORDImage) that points to the original image file.</p>
                        </li>
                        <li>
                           <p>Add a geometry (SDO_GEOMETRY) column to the same table, and store the minimum bounding rectangle (MBR) for each image in that column.</p>
                           <p>Each geometry in the MBR column contains the geographic bounds for an image, not its size in the pixel space. For example, if an orthophoto image is 2000 by 2000 pixels in size, but covers a ground rectangle starting at the corner of (936000, 248000) and having a width and height of 8000 meters, the MBR for the geometry column should be populated with (936000, 248000, 944000, 256000).</p>
                        </li>
                        <li>
                           <p>Insert an entry for the geometry column in the USER_SDO_GEOM_METADATA view.</p>
                        </li>
                        <li>
                           <p>Create a spatial index on the geometry column.</p>
                        </li>
                     </ul>
                     <p>To predefine an image theme, follow the guidelines in <a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984">Creating Predefined Image Themes</a>. To define a dynamic image theme in a map request, follow the guidelines for defining a JDBC theme, as explained in <a href="map-visualization-concepts.html#GUID-78BAAC41-964B-401F-A30E-31544CF4B73E">JDBC Themes</a>, but note the following additional considerations with dynamic image themes:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You must provide the original image resolution information when defining an image theme.</p>
                        </li>
                        <li>
                           <p>The map visualizer by default automatically scales the image data when generating a map with an image theme, so that it fits the current query window. To disable this automatic scaling, specify <code class="codeph">imagescaling="false"</code> in the map request.
                           </p>
                        </li>
                     </ul>
                     <p>For any image theme definition, the map visualizer supports only GIF, JPEG, PNG, and TIFF image formats.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984">Creating Predefined Image Themes</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9579"></a><a id="JIMPV9578"></a><div class="props_rev_3"><a id="GUID-B8E43D15-B170-4A62-BE5B-F6115D534984" name="GUID-B8E43D15-B170-4A62-BE5B-F6115D534984"></a><h5 id="JIMPV-GUID-B8E43D15-B170-4A62-BE5B-F6115D534984" class="sect5"><span class="enumeration_section">2.3.3.1 </span>Creating Predefined Image Themes
                     </h5>
                     <div>
                        <p>To create a predefined image theme, you must store the definition of the image theme in the database by inserting a row into the USER_SDO_THEMES view (described in <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a>). <a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984__I1012335">Example 2-13</a> stores the definition of an image theme.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">theme_type</code> must be <code class="codeph">image</code> in order for this theme to be recognized as an image theme. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image_column</code> specifies the column in the base table or view that stores the actual image data.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image_format</code> is a string identifying the format of the image data. If you specify <code class="codeph">GIF</code> or <code class="codeph">JPEG</code>, the map visualizer can always render the image data.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image_resolution</code> is an optional attribute that identifies the original image resolution (number of <code class="codeph">image_unit</code> units for each pixel).
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">image_unit</code> is an optional attribute, except it is required if you specify the   <code class="codeph">image_resolution</code> attribute. The <code class="codeph">image_unit</code> attribute specifies the unit of the resolution, such as <code class="codeph">M</code> for meter. The value for this attribute must be one of the values in the SDO_UNIT column of the MDSYS.SDO_DIST_UNITS table. In <a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984__I1012335">Example 2-13</a>, the image resolution is 2 meters per pixel.
                              </p>
                           </li>
                        </ul>
                        <p>The DTD for the <code class="codeph">&lt;styling_rules&gt;</code> element is presented in <a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="A theme definition contains one <styling_rules&gt; element, which may have several other elements depending on the theme type.">Themes: Styling Rules</a>.
                        </p>
                        <div class="example" id="GUID-B8E43D15-B170-4A62-BE5B-F6115D534984__I1012335">
                           <p class="titleinexample">Example 2-13 Creating a Predefined Image Theme</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes  VALUES (
   'IMAGE_LEVEL_2', 
   'Orthophotos at pyramid level 2', 
   'IMAGES',
   'IMAGE_MBR', 
   '&lt;?xml version="1.0" standalone="yes"?&gt;
    &lt;styling_rules theme_type="image" image_column="image"
                   image_format="JPEG" image_resolution="2"
                   image_unit="M"&gt;
      &lt;rule &gt;
        &lt;features style="C.RED"&gt; plevel=2 &lt;/features&gt;
      &lt;/rule&gt;
    &lt;/styling_rules&gt;' );
</pre><p><a href="map-visualization-concepts.html#GUID-B8E43D15-B170-4A62-BE5B-F6115D534984__I1012335">Example 2-13</a> creates an image theme named <code class="codeph">IMAGE_LEVEL_2</code>. The base table (where all image data and associated MBRs are stored) is named IMAGES, and the minimum bounding rectangles (MBRs) for the images are stored in the column named IMAGE_MBR. In the STYLING_RULES column of the USER_SDO_THEMES view, an XML document with one <code class="codeph">&lt;styling_rules&gt;</code> element is inserted.
                           </p>
                           <p>The <code class="codeph">&lt;styling_rules&gt;</code> element for an image theme has the following attributes:
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-1F285D16-1E1B-40B1-BB4D-EFF8886A2575">Image Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9581"></a><a id="JIMPV9582"></a><a id="JIMPV9580"></a><div class="props_rev_3"><a id="GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297" name="GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297"></a><h4 id="JIMPV-GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297" class="sect4"><span class="enumeration_section">2.3.4 </span>GeoRaster Themes
                  </h4>
                  <div>
                     <p>A <span class="bold">GeoRaster theme</span> is a special kind of map visualizer theme useful for visualizing GeoRaster objects. GeoRaster is a feature of Oracle Spatial and Graph that lets you store, index, query, analyze, and deliver raster image and gridded data and its associated metadata. GeoRaster objects are defined using the SDO_GEORASTER data type. For detailed information about GeoRaster, see <a href="../geors/georaster-overview-and-concepts.html#GEORS100" target="_blank"><span class="italic">Oracle Spatial and Graph GeoRaster Developer's Guide</span></a>.
                     </p>
                     <p>Before you can use the map visualizer with GeoRaster themes, you must ensure that the Java Advanced Imaging (JAI) library files (<code class="codeph">jai_core.jar</code> and <code class="codeph">jai_codec.jar</code>) are in the map visualizer library path. You must also perform the following actions with the GeoRaster data:
                     </p>
                     <ol>
                        <li>
                           <p>Georeference the GeoRaster data to establish the relationship between cell coordinates of the GeoRaster data and real-world ground coordinates (or some other local coordinates).</p>
                           <p>If you are using Oracle Database Release 10.1, you must also set the spatial resolution values.</p>
                        </li>
                        <li>
                           <p>Generate or define the spatial extent (footprint) associated with the raster data.</p>
                        </li>
                        <li>
                           <p>Optionally, generate pyramid levels that represent the raster image or data at different sizes and degrees of resolution.</p>
                        </li>
                        <li>
                           <p>Insert a row into the USER_SDO_GEOM_METADATA view that specifies the name of the GeoRaster table and the SPATIALEXTENT attribute of the GeoRaster column (that is, the column of type SDO_GEORASTER). The following example inserts a row for a table named GEOR_TABLE with a GeoRaster column named GEOR_COLUMN:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO USER_SDO_GEOM_METADATA VALUES
( 'geor_table',
  'geor_column.spatialextent',
  SDO_DIM_ARRAY(
    SDO_DIM_ELEMENT('X', 496602.844, 695562.844, 0.000005),
    SDO_DIM_ELEMENT('Y',8788409.499,8973749.499, 0.000005)
  ),
  82279   -- SRID
);
</pre></li>
                        <li>
                           <p>Create a spatial index on the spatial extent of the GeoRaster table. The following example creates a spatial index named GEOR_IDX on the spatial extent of the table named GEOR_TABLE:</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX geor_idx ON geor_table(geor_column.spatialextent)
  INDEXTYPE IS MDSYS.SPATIAL_INDEX;
</pre></li>
                     </ol>
                     <p><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABDJIBH">Example 2-17</a> in <a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3">Creating Predefined GeoRaster Themes</a> prepares GeoRaster data for use and stores a GeoRaster theme in the database.
                     </p>
                     <p>The map visualizer supports two types of map requests with objects from a GeoRaster table:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A request containing a SQL statement to select one or more GeoRaster objects</p>
                        </li>
                        <li>
                           <p>A request specifying a single GeoRaster object by the combination of its raster data table name and its <code class="codeph">rasterID</code> attribute value in the SDO_GEORASTER object. (The <code class="codeph">rasterID</code> attribute value in the SDO_GEORASTER object is distinct from and unrelated to any primary key or ID column in the GeoRaster table.)
                           </p>
                        </li>
                     </ul>
                     <p>The following elements and attributes apply to the definition of a GeoRaster theme:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">&lt;jdbc_georaster_query&gt;</code> element: Specifies that this is a dynamically defined GeoRaster theme. For a theme that uses a SQL statement to select one or more GeoRaster objects, this element contains the SQL query statement (without a terminating semicolon).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">georaster_table</code> attribute: Specifies the name of the GeoRaster table.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">georaster_column</code> attribute: Specifies the name of the column of type SDO_GEORASTER in the GeoRaster table.
                           </p>
                        </li>
                        <li>
                           <p><a id="d7682e3124" class="indexterm-anchor"></a><a id="d7682e3126" class="indexterm-anchor"></a><a id="d7682e3130" class="indexterm-anchor"></a><a id="d7682e3134" class="indexterm-anchor"></a><a id="d7682e3138" class="indexterm-anchor"></a><code class="codeph">polygon_mask</code> attribute (optional): Specifies a set of two-dimensional coordinates representing a polygon, to be used as a mask to make transparent the part of the GeoRaster image that is outside the polygon mask. The coordinates are defined as x1,y1,x2,y2, . . . . The mask coordinates must be in the data coordinate space.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">raster_bands</code> attribute (optional): Specifies the band composition to be assigned to the red, green, and blue channels. If you specify only one value, the resulting image uses one band (gray levels for monochromatic images). If you specify two values, they are used for the red and green channels, and the default blue band stored in the GeoRaster metadata is used for the blue channel. If you do not specify this attribute, the map visualizer uses the default values stored in the GeoRaster metadata.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">raster_pyramid</code> attribute (optional): Specifies the pyramid level (level of resolution). If you do not specify this attribute, the map visualizer calculates the best pyramid level for the current window query and device area.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">raster_id</code> attribute (only if the definition does not include a SQL statement): Specifies the <code class="codeph">rasterID</code> attribute value in the SDO_GEORASTER object definition of the single GeoRaster object for the map request.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">raster_table</code> attribute (optional, and only if the definition does not include a SQL statement): Specifies the raster data table associated with the single GeoRaster object for the map request.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">transparent_nodata</code> attribute (optional): Specifies if any GeoRaster NODATA value is to be rendered as transparent. The default value is "<code class="codeph">false</code>".
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABHEAEG">Example 2-14</a> defines a GeoRaster theme that contains a SQL statement that selects a single GeoRaster object. The theme assigns band 1 to the red channel, band 2 to the green channel, and band 3 to the blue channel. Because the <code class="codeph">raster_pyramid</code> attribute is not specified, the map visualizer calculates the best pyramid level by using the spatial resolution values set during or after the georeferencing process. (In <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABHEAEG">Example 2-14</a>, <code class="codeph">georid=1</code> in the WHERE clause refers to a column named GEORID in the GeoRaster table named PCI_IMAGE.)
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABFDHAB">Example 2-15</a> defines a GeoRaster theme that specifies the single GeoRaster object whose <code class="codeph">rasterID</code> attribute value in the SDO_GEORASTER object is 1 (<code class="codeph">raster_id="1"</code>) and associated with the raster data table named RDT_PCI. The theme specifies 2 as the pyramid level.
                     </p>
                     <p>Subtopics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3">Creating Predefined GeoRaster Themes</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610">Using Bitmap Masks with GeoRaster Themes</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75">Reprojection of GeoRaster Themes</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53">Virtual Mosaic Themes</a></p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABHEAEG">
                        <p class="titleinexample">Example 2-14 GeoRaster Theme Containing a SQL Statement</p><pre class="oac_no_warn" dir="ltr">&lt;theme name="georaster_theme"&gt;
  &lt;jdbc_georaster_query
    georaster_table="pci_image" 
    georaster_column="georaster"
    raster_bands="1,2,3"
    jdbc_srid="82301"
    datasource="mvdemo"
    asis="false"&gt; SELECT georaster FROM pci_image WHERE georid =1
  &lt;/jdbc_georaster_query&gt;
&lt;/theme&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297__BABFDHAB">
                        <p class="titleinexample">Example 2-15 GeoRaster Theme Specifying a Raster ID and Raster Data Table</p><pre class="oac_no_warn" dir="ltr">&lt;theme name="georaster_theme"&gt;
  &lt;jdbc_georaster_query
    georaster_table="pci_image"
    georaster_column="georaster"
    raster_id="1"
    raster_table="rdt_pci"
    raster_pyramid="2"
    raster_bands="1,2,3"
    jdbc_srid="82301"
    datasource="mvdemo"
    asis="false"&gt;
  &lt;/jdbc_georaster_query&gt;
&lt;/theme&gt;
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3">Creating Predefined GeoRaster Themes</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610">Using Bitmap Masks with GeoRaster Themes</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75">Reprojection of GeoRaster Themes</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53">Virtual Mosaic Themes</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9584"></a><a id="JIMPV9585"></a><a id="JIMPV9583"></a><div class="props_rev_3"><a id="GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3" name="GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3"></a><h5 id="JIMPV-GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3" class="sect5"><span class="enumeration_section">2.3.4.1 </span>Creating Predefined GeoRaster Themes
                     </h5>
                     <div>
                        <p>To create a predefined GeoRaster theme, you must store the definition of the GeoRaster theme in the database by inserting a row into the USER_SDO_THEMES view (described in <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a>). <a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">Example 2-16</a> stores the definition of a GeoRaster theme.
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">Example 2-16</a> creates a GeoRaster theme named <code class="codeph">GEOR_BANDS_012</code>, in which band 0 is assigned to the red channel, band 1 to the green channel, and band 2 to the blue channel. The GeoRaster table name (GEOR_TABLE in this example) is inserted in the BASE_TABLE column of the USER_SDO_THEMES view, the GeoRaster column name (GEOR_COLUMN in this example) is inserted in the GEOMETRY_COLUMN column, and an XML document with one <code class="codeph">&lt;styling_rules&gt;</code> element is inserted in the STYLING_RULES column.
                        </p>
                        <p>In the <code class="codeph">&lt;styling_rules&gt;</code> element for a GeoRaster theme, <code class="codeph">theme_type</code> must be <code class="codeph">georaster</code> in order for this theme to be recognized as a GeoRaster theme.
                        </p>
                        <p>The <code class="codeph">&lt;styling_rules&gt;</code> element for a GeoRaster theme can contain the attributes described in <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster Themes</a>, including <code class="codeph">raster_bands</code>, <code class="codeph">raster_pyramid</code>, <code class="codeph">raster_id</code>, and <code class="codeph">raster_table</code>, as shown in <a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">Example 2-16</a>. Alternatively, the <code class="codeph">&lt;styling_rules&gt;</code> element for a GeoRaster theme can be a rule definition. For example, to create a GeoRaster theme that selects a GeoRaster object from the GeoRaster table satisfying the WHERE clause condition <code class="codeph">georid=1</code>, replace the <code class="codeph">&lt;styling_rules&gt;</code> element in <a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">Example 2-16</a> with the following:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;styling_rules theme_type="georaster"&gt;
  &lt;rule&gt;
    &lt;features&gt; georid=1
    &lt;/features&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;
</pre><p>The <code class="codeph">&lt;styling_rules&gt;</code> element for a GeoRaster theme can also specify one or more bitmap masks, as explained in <a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610">Using Bitmap Masks with GeoRaster Themes</a>.
                        </p>
                        <p>The DTD for the <code class="codeph">&lt;styling_rules&gt;</code> element is presented in <a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="A theme definition contains one <styling_rules&gt; element, which may have several other elements depending on the theme type.">Themes: Styling Rules</a>.
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABDJIBH">Example 2-17</a> prepares GeoRaster data for use with a GeoRaster theme that is stored in the database. Comments in the code example briefly describe the main steps. For detailed information about requirements and steps for using GeoRaster data, see <a href="../geors/georaster-database-creation-management.html#GEORS300" target="_blank"><span class="italic">Oracle Spatial and Graph GeoRaster Developer's Guide</span></a>.
                        </p>
                        <div class="example" id="GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABFBHGB">
                           <p class="titleinexample">Example 2-16 Creating a Predefined GeoRaster Theme</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes  VALUES (
   'GEOR_BANDS_012', 
   'Band 0 for red, 1 for green, 2 for blue', 
   'GEOR_TABLE',
   'GEOR_COLUMN', 
   '&lt;?xml version="1.0" standalone="yes"?&gt;
    &lt;styling_rules theme_type="georaster" raster_table="RDT_PCI"
                   raster_id="1" raster_bands="0,1,2"&gt;
    &lt;/styling_rules&gt;' );
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-92762463-B391-4506-BEEA-BEC2D1A1AFE3__BABDJIBH">
                           <p class="titleinexample">Example 2-17 Preparing GeoRaster Data for Use with a GeoRaster Theme</p><pre class="oac_no_warn" dir="ltr">connect scott
Enter password: <span class="italic">password</span>
 
SET ECHO ON
SET FEEDBACK 1
SET NUMWIDTH 10
SET LINESIZE 100
SET PAGESIZE 10000
SET SERVEROUTPUT ON SIZE 5000
SET LONG 20000
SET TIMING ON
call dbms_java.set_output(5000);
 
-------------------------------------------------------------------
-- Create a GeoRaster table (a table that has a 
-- column of SDO_GEORASTER object type).
-------------------------------------------------------------------
 
create table georaster_table
    (georid     number primary key, 
     type       varchar2(32), 
     georaster  sdo_georaster);
 
-------------------------------------------------------------------
-- Create the GeoRaster DML trigger on the GeoRaster table, if
-- the Oracle Database release is before 11.1. (In Release 11.1 and later
-- this trigger is created automatically, so you do not need to create
-- it manually.)
-------------------------------------------------------------------
 
call sdo_geor_utl.createDMLTrigger('georaster_table', 'georaster');
 
-------------------------------------------------------------------
-- Create a raster data table (RDT).
--
-- It is used to store cell data of GeoRaster objects.
-- This step is not a requirement. If the RDT table does not
-- exist, the GeoRaster procedures or functions will generate it
-- automatically whenever needed.
-- However, for huge GeoRaster objects, some tuning and setup on those
-- tables can improve the scalability and performance significantly.
-- In those cases, it is better for users to create the RDTs.
-- The primary key must be added to the RDT if you create it.
-------------------------------------------------------------------
 
create table rdt_geor of sdo_raster 
  (primary key (rasterId, pyramidLevel, bandBlockNumber,
                rowBlockNumber, columnBlockNumber))
  lob(rasterblock) store as (nocache nologging);
 
commit;
 
----------------
-- Import the image.
----------------
 
connect system;
Enter password: <span class="italic">password</span>
 
call dbms_java.grant_permission('MDSYS','SYS:java.io.FilePermission',
  'lbs/demo/images/l7_ms.tif', 'read' );
 
call dbms_java.grant_permission('SCOTT','SYS:java.io.FilePermission',
  'lbs/demo/images/l7_ms.tif', 'read' );
  
connect scott;
Enter password: <span class="italic">password</span>
 
 declare 
  geor SDO_GEORASTER;
begin
  delete from georaster_table where georid = 1;
 insert into georaster_table 
    values( 1, 'TIFF', sdo_geor.init('rdt_geor', 1) );
 select georaster into geor 
    from georaster_table where georid = 1 for update;
  sdo_geor.importFrom(geor, '', 'TIFF', 'file',
    'lbs/demo/images/l7_ms.tif');
  update georaster_table set georaster = geor where georid = 1;
  commit;
end;/
 
connect system;
Enter password: <span class="italic">password</span>
 
call dbms_java.revoke_permission('MDSYS','SYS:java.io.FilePermission',
       'lbs/demo/images/l7_ms.tif', 'read' );
 
call dbms_java.revoke_permission('SCOTT','SYS:java.io.FilePermission',
       'lbs/demo/images/l7_ms.tif', 'read' );
       
connect scott;
Enter password: <span class="italic">password</span>
 
--------------------------
-- Change the GeoRaster format, if needed.
-- To do this, you can call SDO_GEOR.changeFormatCopy.
-- The following operations for pyramiding, spatial resolution setup, and 
-- spatial extent generation can also be combined into one PLSQL block.
--------------------------
 
declare
  gr1 sdo_georaster;
begin
  --
  -- Using changeFormat with a GeoRaster object:
  --
 
  -- 1. Select the source GeoRaster object.
  select georaster into gr1 
    from georaster_table where georid = 1;
 
  -- 2. Make changes. (Interleaving is application-dependent. For TIFF images,
  --    the default interleaving is BSQ.)
  sdo_geor.changeFormat(gr1, 'blocksize=(512,512,3) interleaving=BIP');
 
  -- 3. Update the GeoRaster object in the GeoRaster table.
  update georaster_table set georaster = gr1 where georid = 1;
 
  commit;
end;/
 
---------------------------
-- Generate pyramid levels (strongly recommended, but optional).
---------------------------
 
declare
  gr sdo_georaster;
begin
 
  -- 1. Select the source GeoRaster object.
  select georaster into gr 
    from georaster_table where georid = 1 for update;
 
  -- 2. Generate pyramids.
  sdo_geor.generatePyramid(gr, 'resampling=NN');
 
  -- 3. Update the original GeoRaster object.
  update georaster_table set georaster = gr where georid = 1;
 
  commit;
end;/
 
-----------------------------
-- Georeference the GeoRaster object.
-----------------------------
 
DECLARE
  gr sdo_georaster;
BEGIN
  SELECT georaster INTO gr FROM georaster_table WHERE georid = 1 FOR UPDATE;
  sdo_geor.georeference(gr, 82216, 1,
                        sdo_number_array(30, 0, 410000.000000),
                        sdo_number_array(0, -30,3759000.000000));
  UPDATE georaster_table SET georaster = gr WHERE georid = 1;
  COMMIT;
END;/

-----------------------------
-- Set the spatial resolutions (required for 10gR1 only)
-----------------------------
-- If you are using Oracle Database Release 10.1, set spatial resolutions. (Not
-- required if you are using Release 10.2.) The spatial resolution values of 
-- (30, 30) are from the ESRI world file or from the georeferencing information; 
-- however, you may have to compute these values if they are not part of 
-- the original georeferencing metadata.
DECLARE
  gr sdo_georaster;
BEGIN
  SELECT georaster INTO gr FROM georaster_table WHERE georid = 1 FOR UPDATE;
  sdo_geor.setSpatialResolutions(gr, sdo_number_array(30, 30));
  UPDATE georaster_table SET georaster = gr WHERE georid = 1;
  COMMIT;
END;
/

------------------------
-- Update the spatial extent.
------------------------
 
DECLARE
  sptext sdo_geometry;
BEGIN
  SELECT sdo_geor.generateSpatialExtent(a.georaster) INTO sptext 
          FROM georaster_table a WHERE a.georid=1 FOR UPDATE;
  UPDATE georaster_table a SET a.georaster.spatialextent = sptext WHERE a.georid=1;
  COMMIT;
END;/
 
commit;
 
------------------------------------------------------------------
-- Create metadata information for the GeoRaster spatial extent column.
------------------------------------------------------------------
 
INSERT INTO USER_SDO_GEOM_METADATA 
  VALUES (
  'GEORASTER_TABLE',
  'georaster.spatialextent',
  SDO_DIM_ARRAY(
    SDO_DIM_ELEMENT('X', 410000.0, 470000.0, 0.000005),
    SDO_DIM_ELEMENT('Y', 3699000.0,3759000., 0.000005)
     ),
  82216   -- SRID
);
 
------------------------
-- Create a spatial index on the spatial extent.
------------------------
 
CREATE INDEX georaster_idx ON georaster_table(georaster.spatialextent) 
INDEXTYPE IS MDSYS.SPATIAL_INDEX;
 
--------------------------------------------------------
-- Create a predefined GeoRaster theme for the map visualizer.
--------------------------------------------------------
 
INSERT INTO user_sdo_themes  VALUES (
   'GEORASTER_TABLE', 
   'GeoTiff image', 
   'GEORASTER_TABLE',
   'GEORASTER', 
   '&lt;?xml version="1.0" standalone="yes"?&gt;
    &lt;styling_rules theme_type="georaster" raster_table="RDT_GEOR"
                   raster_id="1" raster_bands="0,1,2"&gt;
    &lt;/styling_rules&gt;' );
    
commit;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9587"></a><a id="JIMPV9586"></a><div class="props_rev_3"><a id="GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610" name="GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610"></a><h5 id="JIMPV-GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610" class="sect5"><span class="enumeration_section">2.3.4.2 </span>Using Bitmap Masks with GeoRaster Themes
                     </h5>
                     <div>
                        <p>In Oracle Spatial and Graph GeoRaster, bitmap masks can be assigned to GeoRaster layers stored in the database. A <span class="bold">bitmap mask</span> is a special one-bit deep rectangular raster grid with each pixel having either the value of 0 or 1. It is used to define an irregularly shaped region inside another image. The 1-bits define the interior of the region, and the 0-bits define the exterior of the region. For more information about bitmap masks, see <a href="../geors/georaster-overview-and-concepts.html#GEORS941" target="_blank"><span class="italic">Oracle Spatial and Graph GeoRaster Developer's Guide</span></a>.
                        </p>
                        <p>To specify a bitmap mask with a GeoRaster theme, use the <code class="codeph">&lt;bitmap_masks&gt;</code> element in the <code class="codeph">&lt;styling_rules&gt;</code> element for the predefined theme, as shown in <a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610__CIHJBHAF">Example 2-18</a>. 
                        </p>
                        <p>The <code class="codeph">&lt;bitmap_masks&gt;</code> element contains one or more <code class="codeph">&lt;mask&gt;</code> elements, each with a mask definition for a specific GeoRaster object. In <a href="map-visualization-concepts.html#GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610__CIHJBHAF">Example 2-18</a>, a mask is defined for layers 1 and 2 of the GeoRaster object with the raster ID of 1 in the RDT_MASS_COLOR_MOSAIC table. The <code class="codeph">&lt;mask&gt;</code> element has the following attributes:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">raster_id</code> specifies the raster ID value of the GeoRaster object. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">raster_table</code> specifies the raster data table (RDT).
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">layers</code> specifies the layer numbers in the GeoRaster object to be used for the mask.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">zeromapping</code> specifies the transparency value to be applied during rendering on bitmap pixels with a value of 0 (zero). The attribute value can be from 0 (completely transparent) to 255 (completely opaque).
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">onemapping</code> specifies the transparency value to be applied during rendering on bitmap pixels with a value of 1. The attribute value can be from 0 (completely transparent) to 255 (completely opaque).
                              </p>
                           </li>
                        </ul>
                        <div class="example" id="GUID-5F90C8E1-E627-4B54-8966-13C6E2BC6610__CIHJBHAF">
                           <p class="titleinexample">Example 2-18 Bitmap Mask in Predefined GeoRaster Theme</p><pre class="oac_no_warn" dir="ltr">&lt;styling_rules theme_type="georaster" raster_id="1"
  raster_table="RDT_MASS_COLOR_MOSAIC"&gt;
    &lt;bitmap_masks&gt;
      &lt;mask layers="1,2" zeromapping="0" onemapping="255"/&gt;
    &lt;/bitmap_masks&gt;
&lt;/styling_rules&gt;
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9930"></a><a id="JIMPV9929"></a><div class="props_rev_3"><a id="GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75" name="GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75"></a><h5 id="JIMPV-GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75" class="sect5"><span class="enumeration_section">2.3.4.3 </span>Reprojection of GeoRaster Themes
                     </h5>
                     <div>
                        <p>Effective with Oracle Spatial and Graph GeoRaster for Release 11.2.0.1, GeoRaster objects can be reprojected into a different SRID. It is recommended that you apply Oracle Database patch 10259201, to avoid black boundaries for adjacent reprojected GeoRaster objects when the objects are rendered in the map visualizer. For more information, see My Oracle Support document ID 1272931.1, <span class="italic">Black Lines After Reprojection Of Georaster Data Via Wms In Oracle Mapviewer</span>.
                        </p>
                        <p>In the map visualizer, a GeoRaster theme will be reprojected if its SRID is different from the map request SRID. The reprojection is just for rendering, with no changes made to the original GeoRaster object. For older databases without reprojection support, the GeoRaster object will not be reprojected.</p>
                        <p>The reprojection modes available are BILINEAR (used as default), NN, CUBIC, AVERAGE4, AVERAGE16. For more information about reprojection, see <a href="../geors/image-processing-virtual-mosaic.html#GEORS1274" target="_blank"><span class="italic">Oracle Spatial and Graph GeoRaster Developer's Guide</span></a>.
                        </p>
                        <p>To specify a reprojection mode with a GeoRaster theme, use the <code class="codeph">reproj_mode</code> keyword in the <code class="codeph">&lt;styling_rules&gt;</code> element for the predefined theme, as shown in <a href="map-visualization-concepts.html#GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75__CIHBDFAI">Example 2-19</a>. 
                        </p>
                        <div class="example" id="GUID-9C893C29-E48A-42DE-B5F7-93111CE7DB75__CIHBDFAI">
                           <p class="titleinexample">Example 2-19 Reprojection Mode in Predefined GeoRaster Theme</p><pre class="oac_no_warn" dir="ltr">&lt;styling_rules theme_type="georaster" reproj_mode="CUBIC"&gt;
&lt;/styling_rules&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10104"></a><div class="props_rev_3"><a id="GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53" name="GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53"></a><h5 id="JIMPV-GUID-C46972F3-7E5B-4EEF-B806-F3CD976ABB53" class="sect5"><span class="enumeration_section">2.3.4.4 </span>Virtual Mosaic Themes
                     </h5>
                     <div>
                        <p>In Oracle Spatial and Graph GeoRaster, a virtual mosaic is defined as any large collection of georeferenced GeoRaster objects, rectified or unrectified, from one or more GeoRaster tables or views that is treated as if it is a single GeoRaster object.</p>
                        <p>The virtual mosaic can be defined in different ways, like using a single or multiple GeoRaster tables (or views with a GeoRaster column), and using a full SQL query statement that results in a collection of GeoRaster objects.</p>
                        <p>The map visualizer supports the creation of the following types of predefined GeoRaster virtual mosaic themes:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A theme based on table with a GeoRaster column and possibly containing a query condition. A list of tables with GeoRaster column can also be defined. The following XML definition defines a virtual mosaic theme based table LANDSAT5_IMAGES and GeoRaster column IMAGE:</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules theme_type="georaster" virtual_mosaic="true"&gt;
    &lt;virtual_mosaic srid="32617" nodata_cell="true"&gt;
        &lt;tables&gt;
            &lt;table name="LANDSAT5_IMAGES" georaster_column="IMAGE"/&gt;
    &lt;/tables&gt;
  &lt;/virtual_mosaic&gt;
&lt;/styling_rules&gt;
</pre></li>
                           <li>
                              <p>A theme based on a full SQL query. The following XML definition specifies a virtual mosaic theme based on a SQL query:</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules theme_type="georaster" virtual_mosaic="true"&gt;
    &lt;virtual_mosaic srid="32617" nodata_cell="true"&gt;
        &lt;sql&gt;select image from landsat5_images&lt;/sql&gt;
  &lt;/virtual_mosaic&gt;
&lt;/styling_rules&gt;
</pre></li>
                        </ul>
                        <p>The following parameters can be defined for a virtual mosaic theme.</p>
                        <p><code class="codeph">srid</code>: The spatial reference system (coordinate system) value.
                        </p>
                        <p><code class="codeph">nodata_cell</code>: Specifies whether or not to consider NODATA (NODATA value or NODATA bitmap mask) when handling the overlap area. <code class="codeph">TRUE</code> causes any cell with NODATA values to be considered as a NODATA cell, and the cell value is not involved in the overlap area calculation; <code class="codeph">FALSE</code> causes any cell with NODATA values to be considered as normal cell, and the cell value is involved in the overlap area calculation.The default value is <code class="codeph">FALSE</code>. If the value is <code class="codeph">TRUE</code> and the resampling method is <code class="codeph">BILINEAR</code>, <code class="codeph">BIQUADRATIC</code>, <code class="codeph">CUBIC</code>, <code class="codeph">AVERAGE4</code>, or <code class="codeph">AVERAGE16</code>, whenever a cell value involved in the resampling calculation is a NODATA value, the result of the resampling is also a NODATA value. The resulting NODATA value is the minimum NODATA value associated with the current raster layer, if multiple NODATA values or value ranges exist.
                        </p>
                        <p><code class="codeph">common_point_rule</code>: The method for getting the cell value at the overlapping area. Can have one of the following values:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">OLDEST</code>: The value from the GeoRaster object that has the oldest <code class="codeph">EndDataTime</code> in the metadata is used.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">END</code>: The value from the last encountered GeoRaster object is used.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">LATEST</code>: The value from the GeoRaster object that has the most recent <code class="codeph">EndDataTime</code> in the metadata is used.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OLDEST</code>: The value from the GeoRaster object that has the oldest <code class="codeph">EndDataTime</code> in the metadata is used.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CTC</code>: The value from the GeoRaster object that is closest to the center of the output window is used.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">HIGH</code>: The maximum cell value of all the overlapping GeoRaster objects is used.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">LOW</code>: The minimum cell value of all the overlapping GeoRaster objects is used
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AVERAGE</code>: The average of all cell values from the overlapping GeoRaster objects is used.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">HISHRES</code>: The value from the GeoRaster object that has the highest spatial resolution is used.
                              </p>
                           </li>
                        </ul>
                        <p><code class="codeph">resampling_mode</code>: Specifies the resampling method (if resampling is involved or rectification is needed) to be used during the mosaic operation. Can have one of the following values: <code class="codeph">NN</code>, <code class="codeph">BILINEAR</code>, <code class="codeph">BIQUADRATIC</code>, <code class="codeph">CUBIC</code>, <code class="codeph">AVERAGE4</code>, or <code class="codeph">AVERAGE16</code>.
                        </p>
                        <p><code class="codeph">resampling_tolerance</code>: Specifies the tolerance for not doing resampling when the source GeoRaster objects are not perfectly aligned. The value should be between 0 and 0.5, where the unit is pixel or cell (for example, 0.5 meaning one-half pixel or cell). If not specified, 0.5 is used, which means no resampling will occur.
                        </p>
                        <p><code class="codeph">color_balance</code>: Specifies the method for color balancing. Can have one of the following values: <code class="codeph">NONE</code>, <code class="codeph">LINEARSTRETCHING</code>, <code class="codeph">NORMALIZATION</code>.
                        </p>
                        <p><code class="codeph">min_stretch_value</code>: Ignored if <code class="codeph">color_balance</code> is not <code class="codeph">LINEARSTRETCHING</code>; otherwise, specifies the lowest value in the range of the linear stretching method. Defaults to 0.
                        </p>
                        <p><code class="codeph">max_stretch_value</code>: Ignored if <code class="codeph">color_balance</code> is not <code class="codeph">LINEARSTRETCHING</code>; otherwise, specifies the highest value in the range of the linear stretching method. Defaults to 255.
                        </p>
                        <p><code class="codeph">mean</code>: Ignored if <code class="codeph">color_balance</code> is not <code class="codeph">NORMALIZATION</code>; otherwise, specifies the reference mean for the normalization method.
                        </p>
                        <p><code class="codeph">standard_deviation</code>: Ignored if <code class="codeph">color_balance</code> is not <code class="codeph">NORMALIZATION</code>; otherwise, specifies the reference standard deviation for the normalization method.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-BAC98AAC-B274-42F3-AB60-54C73E4E4297">GeoRaster Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9589"></a><a id="JIMPV9588"></a><div class="props_rev_3"><a id="GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9" name="GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9"></a><h4 id="JIMPV-GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9" class="sect4"><span class="enumeration_section">2.3.5 </span>Network Themes
                  </h4>
                  <div>
                     <p>A <span class="bold">network theme</span> is a special kind of map visualizer theme useful for visualizing networks defined using the Oracle Spatial and Graph network data model. A network consists of a set of nodes and links. A network can be directed or undirected, although links and paths typically have direction. A network can be organized into different levels of abstraction, called a network hierarchy. The map visualizer assumes that network spatial tables in a network use the same coordinate system, and that these tables are indexed and registered as described in <a href="../topol/network-data-model-graph-overview.html#TOPOL700" target="_blank"><span class="italic">Oracle Spatial and Graph Topology Data Model and Network Data Model Graph Developer's Guide</span></a>.
                     </p>
                     <p>Network node, link, and path tables store geometries of type SDO_GEOMETRY. You can create JDBC themes that use these geometries. In addition, you can define dynamic themes that consider aspects of the network, such as the direction of links for a directed network. </p>
                     <p>The following elements and attributes apply to the definition of a network theme:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">&lt;jdbc_network_query&gt;</code> element: Specifies that this is a dynamically defined network theme.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">network_name</code> attribute: Specifies the name of the network.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">network_level</code> attribute (optional): Specifies the network hierarchy level to which this theme applies. (For a nonhierarchical network, specify 1, which is the default value.)
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">link_style</code> attribute (optional): Specifies the style name to be used for links.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">direction_style</code> attribute (optional): Specifies the style name to be used for a link direction marker (for example, a directional arrow image).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">bidirection_style</code> attribute (optional): Specifies the style name to be used for a bidirected link.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">direction_position</code> attribute (optional): Specifies the position of the direction marker relative to the link start, as a number between 0 and 1. For example, 0.85 indicates 85 percent of the way between the link start and end points.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">direction_markersize</code> attribute (optional): Specifies the size (number of pixels) of the direction marker.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">direction_multimarker</code> attribute (optional): Specifies if the direction marker should be repeated over the link: <code class="codeph">true</code> repeats the marker at a specified start position and each subsequent interval of that distance; <code class="codeph">false</code> (the default) does not repeat the marker.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">link_labelstyle</code> attribute (optional): Specifies the style name to be used for link labels in the column specified in the <code class="codeph">link_labelcolumn</code> attribute.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">link_labelcolumn</code> attribute (optional): Specifies the name of the column containing link labels to be rendered using the style specified in the <code class="codeph">link_labelstyle</code> attribute.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_style</code> attribute (optional): Specifies the style name to be used for nodes.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_markersize</code> attribute (optional): Specifies the size (number of pixels) of the node marker.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_labelstyle</code> attribute (optional): Specifies the style name to be used for node labels in the column specified in the <code class="codeph">node_labelcolumn</code> attribute.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_labelcolumn</code> attribute (optional): Specifies the name of the column containing node labels to be rendered using the style specified in the <code class="codeph">node_labelstyle</code> attribute.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">path_ids</code> attribute (optional): Specifies one or more path ID values of stored paths to be rendered. For more than one path, use commas to delimit the path ID values. For example, <code class="codeph">path_ids="1,3,4"</code> specifies that the paths with path ID values 1, 3, and 4 are to be rendered.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">path_styles</code> attribute (optional): Specifies one or more style names associated with the paths specified in the <code class="codeph">path_ids</code> attribute. For example, <code class="codeph">path_styles="C.RED,C.GREEN,C.BLUE"</code> specifies styles to be used to render the first, second, and third paths (respectively) specified in the <code class="codeph">path_ids</code> attribute.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">path_labelstyle</code> attribute (optional): Specifies the style name to be used for path labels in the column specified in the <code class="codeph">path_labelcolumn</code> attribute.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">path_labelcolumn</code> attribute (optional): Specifies the name of the column containing path labels to be rendered using the style specified in the <code class="codeph">path_labelstyle</code> attribute.
                           </p>
                        </li>
                     </ul>
                     <p>Additional network theme attributes related to network analysis are described in <a href="map-visualization-concepts.html#GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896">Using the Map Visualizer for Network Analysis</a>.
                     </p>
                     <p>A network theme can combine attributes for links, nodes, and paths, or any combination. In such cases, the map visualizer first renders the links, then the paths, and then the nodes.</p>
                     <p><a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9__BABIIGDI">Example 2-20</a> defines a network theme that specifies attributes for the display of links and nodes in the network named <code class="codeph">NYC_NET</code>.
                     </p>
                     <div class="example" id="GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9__BABIIGDI">
                        <p class="titleinexample">Example 2-20 Network Theme</p><pre class="oac_no_warn" dir="ltr">&lt;theme name="net_theme" user_clickable="false"&gt;
  &lt;jdbc_network_query
    network_name="NYC_NET"
    network_level="1"
    jdbc_srid="8307"
    datasource="mvdemo"
    link_style="C.RED"
    direction_style="M.IMAGE105_BW"
    direction_position="0.85"
    direction_markersize="8"
    node_style="M.STAR"
    node_markersize="5"
    asis="false"&gt;
  &lt;/jdbc_network_query&gt;
&lt;/theme&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D">Creating Predefined Network Themes</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896">Using the Map Visualizer for Network Analysis</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9591"></a><a id="JIMPV9590"></a><div class="props_rev_3"><a id="GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D" name="GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D"></a><h5 id="JIMPV-GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D" class="sect5"><span class="enumeration_section">2.3.5.1 </span>Creating Predefined Network Themes
                     </h5>
                     <div>
                        <p>To create a predefined network theme, you must store the definition of the network theme in the database by inserting a row into the USER_SDO_THEMES view (described in <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a>). <a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">Example 2-21</a> stores the definition of a network theme.
                        </p>
                        <div class="example" id="GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">
                           <p class="titleinexample">Example 2-21 Creating a Predefined Network Theme</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes  VALUES (
   'NYC_NET_1',
   'New York City network',
   'NYC_NET_LINK_TABLE',
   'GEOMETRY',
   '&lt;?xml version="1.0" standalone="yes"?&gt;
    &lt;styling_rules
              theme_type="network"
              network_name="NYC_NET"
              network_level="1"&gt;
      &lt;rule&gt;
         &lt;features&gt;
           &lt;link
              style="C.RED"
              direction_style="M.IMAGE105_BW"
              direction_position="0.85"
              direction_markersize="8"&gt;
           &lt;/link&gt;
           &lt;path
              ids="1,3"
              styles="C.BLUE,C.GREEN"&gt;
           &lt;/path&gt;
           &lt;node
              style="M.CIRCLE"
              markersize="5"&gt;
           &lt;/node&gt;
         &lt;/features&gt;
         &lt;label&gt;
           &lt;link column="LINK_ID" style="T.STREET NAME"&gt; 1 &lt;/link&gt;
         &lt;/label&gt;
      &lt;/rule&gt;
    &lt;/styling_rules&gt;' );
</pre><p><a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">Example 2-21</a> creates a network theme named <code class="codeph">NYC_NET_1</code> for level 1 of the network named <code class="codeph">NYC_NET</code>. The network table name (NYC_NET_LINK_TABLE in this example) is inserted in the BASE_TABLE column of the USER_SDO_THEMES view, the link geometry column name (GEOMETRY in this example) is inserted in the GEOMETRY_COLUMN column, and an XML document with one <code class="codeph">&lt;styling_rules&gt;</code> element is inserted in the STYLING_RULES column.
                           </p>
                           <p>In the <code class="codeph">&lt;styling_rules&gt;</code> element for a network theme, <code class="codeph">theme_type</code> must be <code class="codeph">network</code> in order for this theme to be recognized as a network theme. Elements for links, paths, and nodes can be specified in the same <code class="codeph">&lt;features&gt;</code> element, as is done in <a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">Example 2-21</a>:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The link feature rule specifies the style <code class="codeph">C.RED</code> and direction marker attributes for all links.
                                 </p>
                              </li>
                              <li>
                                 <p>The path feature rule specifies the style <code class="codeph">C.BLUE</code> for paths with the path ID value 1, and the style <code class="codeph">C.GREEN</code> for paths with the path ID value 3.
                                 </p>
                              </li>
                              <li>
                                 <p>The node feature rule specifies the style <code class="codeph">M.CIRCLE</code> and a marker size of 5.
                                 </p>
                              </li>
                           </ul>
                           <p><a href="map-visualization-concepts.html#GUID-BE51D1BF-BFF3-4B96-99AC-EFBD1A5AF23D__BABDBBAD">Example 2-21</a> also contains a <code class="codeph">&lt;label&gt;</code> element for links, specifying the link column <code class="codeph">LINK_ID</code> and the label style <code class="codeph">T.STREET NAME</code>.
                           </p>
                           <p>The DTD for the <code class="codeph">&lt;styling_rules&gt;</code> element is presented in <a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="A theme definition contains one <styling_rules&gt; element, which may have several other elements depending on the theme type.">Themes: Styling Rules</a>.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9">Network Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9593"></a><a id="JIMPV9594"></a><a id="JIMPV9592"></a><div class="props_rev_3"><a id="GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896" name="GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896"></a><h5 id="JIMPV-GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896" class="sect5"><span class="enumeration_section">2.3.5.2 </span>Using the Map Visualizer for Network Analysis
                     </h5>
                     <div>
                        <p>The network model Java API provides several network analysis capabilities. You can define map visualizer network themes that support the shortest-path and within-cost analysis capabilities. Some attributes apply to both capabilities, and some attributes apply only to the relevant associated capability.</p>
                        <p>For all network analysis capabilities, the <code class="codeph">&lt;jdbc_network_query&gt;</code> element and the network-related attributes described in <a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9">Network Themes</a> apply to the definition of the network theme.
                        </p>
                        <p><a id="d7682e4218" class="indexterm-anchor"></a><a id="d7682e4220" class="indexterm-anchor"></a>For shortest-path analysis, the following attributes apply to the definition of the network theme:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">analysis_algorithm</code> attribute: Specifies the shortest-path analysis algorithm to use. Must be either <code class="codeph">DIJKSTRA</code> or <code class="codeph">ASEARCH</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_style</code> attribute: Specifies the style name to be used for the shortest path.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_startnode</code> attribute: Specifies the start node to be used for the analysis.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_endnode</code> attribute: Specifies the end node to be used for the analysis.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_startstyle</code> attribute (optional): Specifies the style name to be used for the start node.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">shortestpath_endstyle</code> attribute (optional): Specifies the style name to be used for the end node.
                              </p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896__BABJEBHC">Example 2-22</a> defines a network theme that can be used for shortest-path analysis.
                        </p>
                        <p><a id="d7682e4266" class="indexterm-anchor"></a><a id="d7682e4268" class="indexterm-anchor"></a>For within-cost analysis, the following attributes apply to the definition of the network theme:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">analysis_algorithm</code> attribute: Must be <code class="codeph">WITHINCOST</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">withincost_startnode</code> attribute: Specifies the start node to be used for the analysis.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">withincost_cost</code> attribute: Specifies the cost cutoff value for nodes to be included. All nodes that can be reached from the start node at a cost less than or equal to the specified value are included in the resulting display. Nodes that cannot be reached from the start node or that can be reached only at a cost greater than the specified value are not included.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">withincost_startstyle</code> attribute (optional): Specifies the style name to be used for the start node.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">withincost_style</code> attribute: Specifies the style name to be used for links in the displayed paths between the start node and each node that is within the specified cost cutoff value.
                              </p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896__BABCJADC">Example 2-23</a> defines a network theme that can be used for within-cost analysis.
                        </p>
                        <div class="example" id="GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896__BABJEBHC">
                           <p class="titleinexample">Example 2-22 Network Theme for Shortest-Path Analysis</p><pre class="oac_no_warn" dir="ltr">&lt;theme name="shortest_path_theme" user_clickable="false"&gt;
  &lt;jdbc_network_query
    network_name="BI_TEST"
    network_level="1"
    jdbc_srid="0"
    datasource="mvdemo"
    analysis_algorithm="DIJKSTRA"
    shortestpath_style="L.PH"
    shortestpath_startnode="20"
    shortestpath_endnode="101"
    shortestpath_startstyle="M.STAR"
    shortestpath_endstyle="M.CIRCLE"
    asis="false"&gt;
  &lt;/jdbc_network_query&gt;
&lt;/theme&gt;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-53D0ADD4-4241-4C3E-B623-40ED7B42D896__BABCJADC">
                           <p class="titleinexample">Example 2-23 Network Theme for Within-Cost Analysis</p><pre class="oac_no_warn" dir="ltr">&lt;theme name="within_cost_theme" user_clickable="false"&gt;
  &lt;jdbc_network_query
    network_name="BI_TEST"
    network_level="1"
    jdbc_srid="0"
    datasource="mvdemo"
    analysis_algorithm="WITHINCOST"
    withincost_startnode="20"
    withincost_style="L.PH"
    withincost_cost="1"
    withincost_startstyle="M.STAR"
    asis="false"&gt;
  &lt;/jdbc_network_query&gt;
&lt;/theme&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-BE69B5B4-06B2-4378-A24B-455DF943B2F9">Network Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9596"></a><a id="JIMPV9597"></a><a id="JIMPV9595"></a><div class="props_rev_3"><a id="GUID-5A7910EC-68E5-4310-A816-217FCD1E4460" name="GUID-5A7910EC-68E5-4310-A816-217FCD1E4460"></a><h4 id="JIMPV-GUID-5A7910EC-68E5-4310-A816-217FCD1E4460" class="sect4"><span class="enumeration_section">2.3.6 </span>Topology Themes
                  </h4>
                  <div>
                     <p>A <span class="bold">topology theme</span> is a special kind of map visualizer theme useful for visualizing topologies defined using the Oracle Spatial and Graph topology data model. The topology data model lets you work with data about nodes, edges, and faces in a topology. The spatial representations of nodes, edges, and faces are spatial geometries of type SDO_GEOMETRY. For nodes and edges, the geometries are explicitly stored; for faces, the initial lines (exterior and interior) are stored, allowing the face geometry to be generated.
                     </p>
                     <p>In addition to the spatial representation of nodes, edges, and faces, a topology can have features. A feature (also called a topology geometry) is a spatial representation of a real-world object. Each feature is defined as an object of type SDO_TOPO_GEOMETRY, which identifies the topology geometry type, topology geometry ID, topology geometry layer ID, and topology ID. For detailed information, see <a href="../topol/topology-data-model-overview.html#TOPOL100" target="_blank"><span class="italic">Oracle Spatial and Graph Topology Data Model and Network Data Model Graph Developer's Guide</span></a>.
                     </p>
                     <p>The map visualizer can render topology features. It can also render a theme in debug mode (explained later in this section) to show the nodes, edges, and faces of a topology. For each topology theme, the map visualizer uses the topology metadata information stored in the USER_SDO_TOPO_METADATA view.</p>
                     <p>The following elements and attributes apply to the definition of a topology theme:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">&lt;jdbc_topology_query&gt;</code> element: Specifies that this is a dynamically defined topology theme. The element can specify a SQL query statement (without a terminating semicolon).
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">topology_name</code> attribute: Specifies the name of the topology.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">feature_table</code> attribute: Specifies the name of the feature table.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">spatial_column</code> attribute: Specifies the name of the spatial feature column of type SDO_TOPO_GEOMETRY.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">label_column</code> attribute: Specifies the column in the feature table that contains the text label to be used with each feature.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">label_style</code> attribute: Specifies the name of the text style to be used to render the labels in the label column.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">render_style</code> attribute: Specifies the name of the style to be used to render the topology.
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-5A7910EC-68E5-4310-A816-217FCD1E4460__BABFJGJF">Example 2-24</a> defines a topology theme that specifies attributes for the display of features and labels from the LAND_PARCELS table in the CITY_DATA topology. The SQL statement specifies the spatial feature column and the label column, and it includes all rows in the feature table.
                     </p>
                     <p><a id="d7682e4412" class="indexterm-anchor"></a><a id="d7682e4416" class="indexterm-anchor"></a><a id="d7682e4422" class="indexterm-anchor"></a>The map visualizer also supports a <span class="bold">debug mode</span> that renders the nodes, edges, and faces of a topology. To specify debug mode, include the <code class="codeph">mode="debug"</code> attribute in the <code class="codeph">&lt;theme&gt;</code> element. In addition to the <code class="codeph">&lt;jdbc_topology_query&gt;</code> attributes mentioned earlier in this section, the following attributes can be used in debug mode:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">edge_style</code> attribute: Specifies the name of the style to be used to render edges.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">edge_label_style</code> attribute: Specifies the name of the text style to be used to render edge labels.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">edge_marker_style</code> attribute: Specifies the name of the marker style to be used for edge markers.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">edge_marker_size</code> attribute: Specifies the size (number of pixels) of for edge markers.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_style</code> attribute: Specifies the name of the style to be used to render nodes.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">node_label_style</code> attribute: Specifies the name of the text style to be used to render node labels.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">face_style</code> attribute: Specifies the name of the style to be used to render faces.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">face_label_style</code> attribute: Specifies the name of the text style to be used to render face labels.
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-5A7910EC-68E5-4310-A816-217FCD1E4460__BABJADBJ">Example 2-25</a> defines a debug-mode topology theme for rendering features, edges, nodes, and faces from all feature tables in the CITY_DATA topology.
                     </p>
                     <div class="example" id="GUID-5A7910EC-68E5-4310-A816-217FCD1E4460__BABFJGJF">
                        <p class="titleinexample">Example 2-24 Topology Theme</p><pre class="oac_no_warn" dir="ltr">&lt;theme name="topo_theme" user_clickable="false"&gt;
  &lt;jdbc_topology_query
    topology_name="CITY_DATA"
    feature_table="LAND_PARCELS"
    label_column="FEATURE_NAME"
    spatial_column="FEATURE"
    label_style="T.CITY NAME"
    render_style="C.COUNTIES"
    jdbc_srid="0"
    datasource="topology"
    asis="false"&gt;select feature, feature_name from land_parcels
  &lt;/jdbc_topology_query&gt;
&lt;/theme&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5A7910EC-68E5-4310-A816-217FCD1E4460__BABJADBJ">
                        <p class="titleinexample">Example 2-25 Topology Theme Using Debug Mode</p><pre class="oac_no_warn" dir="ltr">&lt;theme name="topo_theme" mode="debug" user_clickable="false"&gt;
  &lt;jdbc_topology_query
    topology_name="CITY_DATA"
    edge_style="C.RED"
    edge_marker_style="M.IMAGE105_BW"
    edge_marker_size="8"
    edge_label_style="T.EDGE"
    node_style="M.CIRCLE"
    node_label_style="T.NODE"
    face_style="C.BLUE"
    face_label_style="T.FACE"
    jdbc_srid="0"
    datasource="topology"
    asis="false"&gt;
  &lt;/jdbc_topology_query&gt;
&lt;/theme&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5ED5586B-833F-4477-954C-58CD78006733">Creating Predefined Topology Themes</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9599"></a><a id="JIMPV9598"></a><div class="props_rev_3"><a id="GUID-5ED5586B-833F-4477-954C-58CD78006733" name="GUID-5ED5586B-833F-4477-954C-58CD78006733"></a><h5 id="JIMPV-GUID-5ED5586B-833F-4477-954C-58CD78006733" class="sect5"><span class="enumeration_section">2.3.6.1 </span>Creating Predefined Topology Themes
                     </h5>
                     <div>
                        <p>To create a predefined topology theme, you must store the definition of the topology theme in the database by inserting a row into the USER_SDO_THEMES view (described in <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a>). <a href="map-visualization-concepts.html#GUID-5ED5586B-833F-4477-954C-58CD78006733__BABGJCBH">Example 2-26</a> stores the definition of a topology theme.
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-5ED5586B-833F-4477-954C-58CD78006733__BABGJCBH">Example 2-26</a> creates a topology theme named <code class="codeph">LANDPARCELS</code> for the topology named <code class="codeph">CITY_DATA</code>. The feature table name (LAND_PARCELS in this example) is inserted in the BASE_TABLE column of the USER_SDO_THEMES view, the feature column name (FEATURE in this example) is inserted in the GEOMETRY_COLUMN column, and an XML document with one <code class="codeph">&lt;styling_rules&gt;</code> element is inserted in the STYLING_RULES column.
                        </p>
                        <p>In the <code class="codeph">&lt;styling_rules&gt;</code> element for a topology theme, <code class="codeph">theme_type</code> must be <code class="codeph">topology</code> in order for this theme to be recognized as a topology theme. The theme in <a href="map-visualization-concepts.html#GUID-5ED5586B-833F-4477-954C-58CD78006733__BABGJCBH">Example 2-26</a> defines one styling rule that renders all land parcel features from the <code class="codeph">CITY_DATA</code> topology using the <code class="codeph">C.RED</code> style and using the <code class="codeph">T.TEXT STYLE</code> label style for values in the FEATURE_NAME column of the feature table.
                        </p>
                        <p>The DTD for the <code class="codeph">&lt;styling_rules&gt;</code> element is presented in <a href="xml-formats-map-visualizer.html#GUID-45D7DCB4-5218-4469-9712-5F8AC338088B" title="A theme definition contains one <styling_rules&gt; element, which may have several other elements depending on the theme type.">Themes: Styling Rules</a>.
                        </p>
                        <div class="example" id="GUID-5ED5586B-833F-4477-954C-58CD78006733__BABGJCBH">
                           <p class="titleinexample">Example 2-26 Creating a Predefined Topology Theme</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes  VALUES (
   'LANDPARCELS',
   'Topology theme for land parcels',
   'LAND_PARCELS',
   'FEATURE',
   '&lt;?xml version="1.0" standalone="yes"?&gt;
    &lt;styling_rules theme_type="topology" topology_name="CITY_DATA"&gt;
      &lt;rule&gt;
        &lt;features style="C.RED"&gt;&lt;/features&gt;
        &lt;label column="FEATURE_NAME" style="T.TEXT STYLE"&gt; &lt;/label&gt;
      &lt;/rule&gt;
    &lt;/styling_rules&gt;' );
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-5A7910EC-68E5-4310-A816-217FCD1E4460">Topology Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9601"></a><a id="JIMPV9600"></a><div class="props_rev_3"><a id="GUID-C0538735-A453-4161-BADF-1FB8BA628B26" name="GUID-C0538735-A453-4161-BADF-1FB8BA628B26"></a><h4 id="JIMPV-GUID-C0538735-A453-4161-BADF-1FB8BA628B26" class="sect4"><span class="enumeration_section">2.3.7 </span>WFS Themes
                  </h4>
                  <div>
                     <p>A <span class="bold">WFS theme</span> is a special kind of map visualizer theme that supports the rendering of data delivered using the Open GIS Consortium (OGC) Web Feature Service (WFS) protocol, specifically the WFS 1.0.0 implementation specification.
                     </p>
                     <p>WFS theme are conceptually similar to geometry themes, and users are able to render and label features. The WFS operations <code class="codeph">GetCapabilities</code>, <code class="codeph">DescribeFeatureType</code>, and <code class="codeph">GetFeature</code> are used when rendering a WFS theme. When a WFS service is accessed, the map visualizer caches the information about capabilities and feature types.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">GetCapabilities</code> retrieves the server general information, including the URL addresses to issue requests and the features available. In general, a WFS capability request has the form:
                           </p><pre class="oac_no_warn" dir="ltr">http://localhost:1979/geoserver/wfs/GetCapabilities?SERVICE=WFS&amp;VERSION=1.0.0&amp;REQUEST=GetCapabilities
</pre><p>The result includes a &lt;Capabilities&gt; element with the URL addresses for the WFS requests. For example, the following includes the GetCapabilities URLs for HTTP <code class="codeph">GET</code> and <code class="codeph">POST</code> requests.
                           </p><pre class="oac_no_warn" dir="ltr">&lt;Capability&gt;
 &lt;Request&gt;
  &lt;GetCapabilities&gt;
   &lt;DCPType&gt;
    &lt;HTTP&gt;
     &lt;Get onlineResource="http://localhost:1979/geoserver/wfs/GetCapabilities?" /&gt;
    &lt;/HTTP&gt;
   &lt;/DCPType&gt;
   &lt;DCPType&gt;
    &lt;HTTP&gt;
     &lt;Post onlineResource="http://localhost:1979/geoserver/wfs/GetCapabilities?" /&gt; 
    &lt;/HTTP&gt;
    &lt;/DCPType&gt;
  &lt;/GetCapabilities&gt;
. . .
&lt;/Capability&gt;
</pre></li>
                        <li>
                           <p><code class="codeph">DescribeFeatureType</code> retrieves the feature information, including attributes and types.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GetFeature</code> retrieves the feature geometries and attributes. The output format for <code class="codeph">GetFeature</code> requests is GML2.
                           </p>
                        </li>
                     </ul>
                     <p>The following attributes apply to the definition of a WFS theme:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">datasource</code> attribute: Specifies the map visualizer data source from which styles will be loaded.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">feature_attributes</code> attribute: Specifies feature attributes (besides geometry and label columns) that can be used with advanced styles.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">feature_ids</code> attribute: Specifies the WFS feature IDs to be retrieved. Feature IDs are represented with the <code class="codeph">fid</code> name in the WFS responses. If feature IDs are specified, spatial filter and query conditions are not used in the WFS request.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">feature_name</code> attribute: Specifies the WFS feature name.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">key_column</code> attribute: Specifies the attribute to be used as a key column. Applies to predefined themes, and can be used in Oracle Maps applications. If <code class="codeph">key_column</code> is not specified, <code class="codeph">fid</code> is used as the key column.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">label_column</code> attribute: Specifies the column in the feature table that contains the text label to be used with each WFS feature.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">label_style</code> attribute: Specifies the name of the text style to be used to render the labels in the label column.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">query_condition</code> attribute: Specifies a <code class="codeph">WHERE</code> clause condition to be applied to the WFS theme. Cannot be a complex condition with a hierarchy of expressions defined using multiple parentheses. Each string in the query must be separated by a blank space. If the condition cannot be parsed, it is ignored on the WFS request. Any query conditions are ignored if you specify the <code class="codeph">feature_ids</code> attribute. The following are examples of valid expressions:
                           </p><pre class="oac_no_warn" dir="ltr">state_name = 'New Hampshire' or state_name = 'New York'
(state_name = 'New Hampshire' or state_name = 'New York') and top_pop &gt; 700000
(state_name = 'New Hampshire' or state_name = 'New York') and (top_pop &gt; 700000)
</pre></li>
                        <li>
                           <p><code class="codeph">render_style</code> attribute: Specifies the name of the style to be used to render the geometry.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">service_url</code> attribute: Corresponds to the capabilities address for HTTP <code class="codeph">GET</code> requests. The service_url parameter for the map visualizer must be the online resource address for HTTP <code class="codeph">GET</code> in the <code class="codeph">&lt;GetCapabilities&gt;</code> element. In the preceding example, the value to be used is: <code class="codeph">http://localhost:1979/geoserver/wfs/GetCapabilities?</code></p>
                           <p>Do not include the Capabilities parameters <code class="codeph">SERVICE</code>, <code class="codeph">VERSION</code>, and <code class="codeph">REQUEST</code>; use just the URL from the capabilities information.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">spatial_column</code> attribute: Specifies the name of the spatial feature column of type SDO_TOPO_GEOMETRY.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">srs</code> attribute: Specifies the spatial reference system (coordinate system) name for the WFS feature, in EPSG or Oracle Spatial and Graph format. For example, <code class="codeph">EPSG:4325</code>, <code class="codeph">SDO:8307</code>, and <code class="codeph">8307</code> (the Spatial and Graph SRID value) specify the same SRS. If an EPSG SRS value is specified, the map visualizer tries to identify an equivalent Spatial and Graph (SDO) SRID; and if no matching SRID is found, the SRID for the theme is assumed to be zero (0). The map visualizer looks for matching SRID values as follows:
                           </p>
                           <ol>
                              <li>
                                 <p>Use any custom mapping specified in an SDO to EPSG SRID mapping file specified map visualizer configuration file, as explained in<a href="introduction-to-map-visualization-component.html#GUID-431C67C1-3566-4490-AF9E-647606A28073">Customizing SRS Mapping</a>.
                                 </p>
                              </li>
                              <li>
                                 <p>Use the Spatial and Graph function SDO_CS.MAP_EPSG_SRID_TO_ORACLE to get the equivalent SDO code (if this function is available in the version of Oracle Database used to store the data).</p>
                              </li>
                              <li>
                                 <p>Use the EPSG code that is in the MDSYS.CS_SRS table, if a match can be found.</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p><code class="codeph">user</code> and <code class="codeph">password</code> attributes can be defined to access a secured WFS server that uses basic authentication.
                           </p>
                           <p>If the WFS server is deployed in WebLogic Application Server, the parameter <code class="codeph">-DUseSunHttpHandler=true</code> must be added to the startup script of WebLogic server.
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-C0538735-A453-4161-BADF-1FB8BA628B26__CIHCJGJB">Example 2-27</a> shows a request with a dynamic WFS theme. The WFS service is <code class="codeph">geoserver</code>, and it is installed on the local system.
                     </p>
                     <div class="example" id="GUID-C0538735-A453-4161-BADF-1FB8BA628B26__CIHCJGJB">
                        <p class="titleinexample">Example 2-27 WFS Request with a Dynamic WFS Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;map_request
             title="WFS MAP"
             datasource = "mvdemo"
             width="640"
             height="480"
             bgcolor="#a6cae0"
             antialiase="true"
             mapfilename="wfs_map"
             format="PNG_URL"&gt;
  &lt;center size="20."&gt;
     &lt;geoFeature  &gt;
         &lt;geometricProperty typeName="center"&gt;
             &lt;Point&gt;
                 &lt;coordinates&gt;-70., 44.&lt;/coordinates&gt;
             &lt;/Point&gt;
         &lt;/geometricProperty&gt;
     &lt;/geoFeature&gt;
  &lt;/center&gt;
 
  &lt;themes&gt;
   &lt;theme name="wfs" &gt;
     &lt;wfs_feature_request 
         service_url="http://localhost:1979/geoserver/wfs/GetCapabilities?"
         srs="EPSG:4326"
         feature_name="states"
         spatial_column="the_geom"
         render_style="C.COUNTIES"
         label_column="STATE_NAME"
         label_style="T.STATE NAME"
         datasource="mvdemo" /&gt;
    &lt;/theme&gt; 
  &lt;/themes&gt;
 
&lt;/map_request&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282">Creating Predefined WFS Themes</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9603"></a><a id="JIMPV9604"></a><a id="JIMPV9602"></a><div class="props_rev_3"><a id="GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282" name="GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282"></a><h5 id="JIMPV-GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282" class="sect5"><span class="enumeration_section">2.3.7.1 </span>Creating Predefined WFS Themes
                     </h5>
                     <div>
                        <p>To create a predefined WFS theme, you must store the definition of the WFS theme in the database by inserting a row into the USER_SDO_THEMES view (described in <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a>). <a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">Example 2-28</a> stores the definition of a WFS theme.
                        </p>
                        <p>In <a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">Example 2-28</a>, the WFS feature <code class="codeph">POI</code> is used as the base table, and the attribute <code class="codeph">THE_GEOM</code> is the spatial column. The styling rule information contains the <code class="codeph">service_url</code> and <code class="codeph">srs</code> information; and although not shown in<a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">Example 2-28</a>, it can also specify a <code class="codeph">key_column</code> value. The <code class="codeph">&lt;features&gt;</code> and <code class="codeph">&lt;label&gt;</code> elements of the styling rules are similar to the rules used in geometry themes. Hidden information (<code class="codeph">&lt;hidden_info&gt;</code> element) can also be defined and used in Oracle Maps applications.
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHDHCJD">Example 2-29</a> shows a map request that uses the predefined theme created in <a href="map-visualization-concepts.html#GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">Example 2-28</a>.
                        </p>
                        <p>In some cases, proxy information may affect the access to WFS servers. If this occurs, specify the appropriate proxy parameters in the map visualizer configuration file.</p>
                        <div class="example" id="GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHHFAFF">
                           <p class="titleinexample">Example 2-28 Creating a Predefined WFS Theme</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes  VALUES (
   'WFS_THEME1', 
   'WFS', 
   'POI',
   'THE_GEOM',
'&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules theme_type="wfs" service_url="http://localhost:1979/geoserver/wfs/GetCapabilities?" srs="EPSG:4326"&gt;
    &lt;hidden_info&gt;
        &lt;field column="NAME" name="name"/&gt;
        &lt;field column="MAINPAGE" name="mainpage"/&gt;
  &lt;/hidden_info&gt;
    &lt;rule&gt;
        &lt;features style="M.STAR"&gt; &lt;/features&gt;
        &lt;label column="NAME" style="T.STREET NAME"&gt; 1 &lt;/label&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;' );
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8CB5F8CF-FC5E-4404-93EA-117D03341282__CIHDHCJD">
                           <p class="titleinexample">Example 2-29 Map Request with Predefined WFS Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;map_request
             title="Predefined WFS MAP"
             datasource = "mvdemo"
             width="640"
             height="480"
             bgcolor="#a6cae0"
             antialiase="true"
             format="PNG_STREAM"&gt;
 
  &lt;themes&gt;
   &lt;theme name="wfs_theme1" /&gt;
  &lt;/themes&gt;
 
&lt;/map_request&gt;
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-C0538735-A453-4161-BADF-1FB8BA628B26">WFS Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9932"></a><a id="JIMPV9931"></a><div class="props_rev_3"><a id="GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8" name="GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8"></a><h4 id="JIMPV-GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8" class="sect4"><span class="enumeration_section">2.3.8 </span>WMTS Themes
                  </h4>
                  <div>
                     <p>A <span class="bold">WMTS theme</span> supports the rendering of data delivered using the Open GIS Consortium (OGC) Web Map Tile Service (WMTS) standard, specifically the WMTS 1.0.0 implementation standard.
                     </p>
                     <p>A WMTS theme fetches tile images from a WMTS-enabled server over the Internet and renders the images. The tile images on a WMTS-enabled server are spatially referenced with predefined content, extent, and resolution.</p>
                     <p>The WMTS operations <code class="codeph">GetCapabilities</code>, <code class="codeph">GetTile</code>, and <code class="codeph">GetFeatureInfo</code> are used when rendering a WMTS theme. When a WMTS service is accessed by the map visualizer, it caches the capabilities information of that WMTS service. You may need to specify a proxy server in Map Builder when creating a WMTS theme and to edit the map visualizer configuration file (<code class="codeph">MapViewerConfig.xml</code>) when a WMTS theme is being used.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A <code class="codeph">GetCapabilities</code> operation retrieves the server's general information, including the URL addresses to issue requests and the features available. In general, a WMTS capability request has the form:
                           </p><pre class="oac_no_warn" dir="ltr">http://maps.opengeo.org/geowebcache/service/wmts?service=WMTS&amp;version=1.0.0&amp;request=GetCapabilities
</pre><p>The result includes a <code class="codeph">&lt;Capabilities&gt;</code> element with the URL addresses for the WMTS requests. For example, the following includes the <code class="codeph">GetCapabilities</code> URLs for HTTP GET or POST requests:
                           </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Capabilities xmlns="http://www.opengis.net/wmts/1.0"
xmlns:ows="http://www.opengis.net/ows/1.1"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:gml="http://www.opengis.net/gml" xsi:schemaLocation="http://www.opengis.net/wmts/1.0 http://schemas.opengis.net/wmts/1.0/wmtsGetCapabilities_response.xsd"
version="1.0.0"&gt;
&lt;ows:ServiceIdentification&gt;
  &lt;ows:Title&gt;<span class="bold">Web Map Tile Service - GeoWebCache</span>&lt;/ows:Title&gt;
  &lt;ows:ServiceType&gt;<span class="bold">OGC WMTS</span>&lt;/ows:ServiceType&gt;
  &lt;ows:ServiceTypeVersion&gt;1.0.0&lt;/ows:ServiceTypeVersion&gt;
&lt;/ows:ServiceIdentification&gt;
&lt;ows:ServiceProvider&gt;
  &lt;ows:ProviderName&gt;<span class="bold">http://maps.opengeo.org/geowebcache/service/wmts</span>&lt;/ows:ProviderName&gt;
  &lt;ows:ProviderSite xlink:href="http://maps.opengeo.org/geowebcache/service/wmts" /&gt;
  &lt;ows:ServiceContact&gt;
    &lt;ows:IndividualName&gt;<span class="bold">GeoWebCache User</span>&lt;/ows:IndividualName&gt;
  &lt;/ows:ServiceContact&gt;
&lt;/ows:ServiceProvider&gt;
&lt;ows:OperationsMetadata&gt;
  &lt;ows:Operation name="GetCapabilities"&gt;
    &lt;ows:DCP&gt;
      &lt;ows:HTTP&gt;
        &lt;ows:Get xlink:href="http://maps.opengeo.org/geowebcache/service/wmts?"&gt;
          &lt;ows:Constraint name="GetEncoding"&gt;
            &lt;ows:AllowedValues&gt;
              &lt;ows:Value&gt;<span class="bold">KVP</span>&lt;/ows:Value&gt;
            &lt;/ows:AllowedValues&gt;
          &lt;/ows:Constraint&gt;
        &lt;/ows:Get&gt;
      &lt;/ows:HTTP&gt;
    &lt;/ows:DCP&gt;
  &lt;/ows:Operation&gt;
  &lt;ows:Operation name="GetTile"&gt;
    &lt;ows:DCP&gt;
      &lt;ows:HTTP&gt;
        &lt;ows:Get xlink:href="http://maps.opengeo.org/geowebcache/service/wmts?"&gt;
          &lt;ows:Constraint name="GetEncoding"&gt;
            &lt;ows:AllowedValues&gt;
              &lt;ows:Value&gt;<span class="bold">KVP</span>&lt;/ows:Value&gt;
            &lt;/ows:AllowedValues&gt;
          &lt;/ows:Constraint&gt;
        &lt;/ows:Get&gt;
      &lt;/ows:HTTP&gt;
    &lt;/ows:DCP&gt;
  &lt;/ows:Operation&gt;
  &lt;ows:Operation name="GetFeatureInfo"&gt;
    &lt;ows:DCP&gt;
      &lt;ows:HTTP&gt;
        &lt;ows:Get xlink:href="http://maps.opengeo.org/geowebcache/service/wmts?"&gt;
          &lt;ows:Constraint name="GetEncoding"&gt;
            &lt;ows:AllowedValues&gt;
              &lt;ows:Value&gt;KVP&lt;/ows:Value&gt;
            &lt;/ows:AllowedValues&gt;
          &lt;/ows:Constraint&gt;
        &lt;/ows:Get&gt;
      &lt;/ows:HTTP&gt;
    &lt;/ows:DCP&gt;
  &lt;/ows:Operation&gt;
&lt;/ows:OperationsMetadata&gt;
&lt;Contents&gt;
  &lt;Layer&gt;
    &lt;ows:Title&gt;bluemarble&lt;/ows:Title&gt;
    &lt;ows:WGS84BoundingBox&gt;
      &lt;ows:LowerCorner&gt;-180.0 -90.0&lt;/ows:LowerCorner&gt;
      &lt;ows:UpperCorner&gt;180.0 90.0&lt;/ows:UpperCorner&gt;
    &lt;/ows:WGS84BoundingBox&gt;
    &lt;ows:Identifier&gt;<span class="bold">bluemarble</span>&lt;/ows:Identifier&gt;
    &lt;Style isDefault="true"&gt;
      &lt;ows:Identifier&gt;<span class="bold">_null</span>&lt;/ows:Identifier&gt;
    &lt;/Style&gt;
    &lt;Format&gt;<span class="bold">image/png</span>&lt;/Format&gt;
    &lt;Format&gt;<span class="bold">image/jpeg</span>&lt;/Format&gt;
    &lt;TileMatrixSetLink&gt;      
      &lt;TileMatrixSet&gt;<span class="bold">EPSG:4326</span>&lt;/TileMatrixSet&gt;
    &lt;/TileMatrixSetLink&gt;    
    &lt;TileMatrixSetLink&gt;
      &lt;TileMatrixSet&gt;<span class="bold">EPSG:900913</span>&lt;/TileMatrixSet&gt;
    &lt;/TileMatrixSetLink&gt;  
  &lt;/Layer&gt;
  ...
  &lt;TileMatrixSet&gt;
    &lt;ows:Identifier&gt;<span class="bold">EPSG:4326</span>&lt;/ows:Identifier&gt;
    &lt;ows:SupportedCRS&gt;<span class="bold">urn:ogc:def:crs:EPSG::4326</span>&lt;/ows:SupportedCRS&gt;
    &lt;TileMatrix&gt;
      &lt;ows:Identifier&gt;E<span class="bold">PSG:4326:0</span>&lt;/ows:Identifier&gt;
      &lt;ScaleDenominator&gt;<span class="bold">2.795411320143589E8</span>&lt;/ScaleDenominator&gt;
      &lt;TopLeftCorner&gt;<span class="bold">90.0 -180.0</span>&lt;/TopLeftCorner&gt;
      &lt;TileWidth&gt;<span class="bold">256</span>&lt;/TileWidth&gt;
      &lt;TileHeight&gt;<span class="bold">256</span>&lt;/TileHeight&gt;
      &lt;MatrixWidth&gt;<span class="bold">2</span>&lt;/MatrixWidth&gt;
      &lt;MatrixHeight&gt;<span class="bold">1</span>&lt;/MatrixHeight&gt;
    &lt;/TileMatrix&gt;
   ...
  &lt;/TileMatrixSet&gt;
  ...
&lt;/Contents&gt;
&lt;ServiceMetadataURL xlink:href="http://maps.opengeo.org/geowebcache/service/wmts?REQUEST=getcapabilities&amp;amp;VERSION=1.0.0"/&gt;
&lt;/Capabilities&gt;
</pre></li>
                        <li>
                           <p>A <code class="codeph">GetTile</code> operation retrieves a tile image from a WMTS server. A request to the server contains parameters of key-value pairs (KVP) that define the tile image.
                           </p>
                        </li>
                        <li>
                           <p>A <code class="codeph">GetFeatureInfo</code> operation allows WMTS clients to request information at a specific position of a specific tile for a specific query layer.
                           </p>
                        </li>
                     </ul>
                     <p>Detailed descriptions of these operations can be found at <a href="http://www.opengeospatial.org/standards/wmts" target="_blank"><code class="codeph">http://www.opengeospatial.org/standards/wmts</code></a>.
                     </p>
                     <p>The following attributes apply to the definition of a WMTS theme:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">current_threads</code> attribute (optional): an integer (int) variable; the default is 8. It is the number of concurrent threads for retrieving tile images from a WMTS server. In general, a larger number of concurrent threads allows more threads to retrieve image tiles in parallel from a map server. Other constraining factors may prevent you from using a number in the hundreds, but you may try to set it 16, 32, or a slightly larger value for faster processing.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">format</code> attribute: Specifies the tile image formats stored in the WMTS server. The tif, jpeg, png, and png8 formats are supported in the map visualizer.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">layer</code> attribute: Specifies the layer name for which the tile images are to be fetched.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">matrix_set_id</code> attribute: Specifies the ID of the matrix set from which the tile images are to be fetched.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">service_url</code> attribute: Corresponds to the capabilities address for HTTP GET requests. The <code class="codeph">service_url</code> parameter for the map visualizer must be the online resource address for HTTP GET in the <code class="codeph">&lt;GetCapabilities&gt;</code> element. In the preceding example, the value to be used is: <code class="codeph">http://maps.opengeo.org/geowebcache/service/wmts?</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">snap_to_tile_scale</code> attribute (optional): a Boolean value (<code class="codeph">true</code> or <code class="codeph">false</code>); the default is <code class="codeph">false</code>.
                           </p>
                           <p>When <code class="codeph">snap_to_tile_scale</code> is set to <code class="codeph">true</code>, a request scale (derived from a device-window size and a request-data-window size) is snapped to a closest tile scale; the map scale will be in the tile scale. For example, if there are tiles in scale series of , 1:4000, 1:2000, 1.1000, 1:500, ., a request scale of 1:1600 will be snapped to the 1:2000 tile scale, and the map will be using the same 1:2000 scale, as shown in <a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8__CIHIFFFH">Figure 2-9</a>.
                           </p>
                           <div class="figure" id="GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8__CIHIFFFH">
                              <p class="titleinfigure">Figure 2-9 snap_to_tile_scale Attribute</p><img src="img/snap_to_tile_scale.jpg" alt="Description of Figure 2-9 follows" title="Description of Figure 2-9 follows" longdesc="img_text/snap_to_tile_scale.html"><br><a href="img_text/snap_to_tile_scale.html">Description of "Figure 2-9 snap_to_tile_scale Attribute"</a></div>
                           <!-- class="figure" -->
                           <p>If a map request has more than one WMTS theme that specifies <code class="codeph">snap_to_tile_scale</code> as <code class="codeph">true</code>, then only the first WMTS <code class="codeph">snap_to_tile_scale</code> specification is set to <code class="codeph">true</code> and all others are reset to <code class="codeph">false</code>. This is the logical behavior. For example, if two such themes both have the attribute set to <code class="codeph">true</code>, but the two WMTS tile scale series are different from each other (the two map servers may be from different institutions using different scale series), the first theme will then use its closest tile scale to retrieve tile data and for the final request scale; at the same time, the second theme has to reset its <code class="codeph">snap_to_tile_scale</code> to <code class="codeph">false</code>, then has to find its own tile scale according to its <code class="codeph">tile_resizing_option</code>, then retrieve tiles, and finally resize the tiles to match the first theme's tile scale.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">style</code> attribute: Currently not used in the map visualizer; the default is the string <code class="codeph">default</code>.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">tile_resizing_option</code> attribute (optional): the string <code class="codeph">unbiased</code>, <code class="codeph">expand_biased</code>, or <code class="codeph">contract_biased</code>; the default is <code class="codeph">unbiased</code>. If <code class="codeph">snap_to_tile_scale</code> is set to <code class="codeph">true</code>, <code class="codeph">tile_resizing_option</code> is ignored.
                           </p>
                           <p>For more information, see <a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478">How the tile_resizing_option Attribute Works</a>.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">timeout</code> attribute (optional): an integer specifying a request's timeout period in milliseconds; the default is 0, (that is, no limit for a request to wait for a response).
                           </p>
                           <p>Specifying this attribute ensures that a map request is terminated when the map server does not respond within the specified time period, and thus frees the resources. You might try a value of 30000 (30,000 milliseconds, or 30 seconds).</p>
                        </li>
                        <li>
                           <p><code class="codeph">top_left_corner_x</code> attribute (optional): the x coordinate value of the top left corner of the whole tile images' extent that is served by a WMTS server. If not specified, the value retrieved from the WMTS server is used. If you specify this attribute, also specify the <code class="codeph">top_left_corner_y</code> attribute.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">top_left_corner_y</code> attribute (optional): the y coordinate value of the top left corner of the whole tile images' extent that is served by a WMTS server. If not specified, the value retrieved from the WMTS server is used. If you specify this attribute, also specify the <code class="codeph">top_left_corner_x</code> attribute.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">version</code> attribute: the version of the WMTS specification implemented by the WMTS server.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478">How the tile_resizing_option Attribute Works</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B">snap_to_tile_scale and tile_resizing_option Attribute Usage Guidelines</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA">Creating Predefined WMTS Themes</a><br></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8__GUID-B82708F2-7365-42AD-84B1-148FA1AFEF56">
                        <p class="notep1">See Also:</p>
                        <p><a href="ogc-wmts-support-map-visualzation-component.html#GUID-FD2428ED-0400-4D11-83F4-9AB59FE766C9" title="The map visualization component supports the rendering of data delivered using the Open GIS Consortium (OGC) Web Map Tile Service (WMTS) protocol, specifically the WMS 1.0.0 implementation specifications">OGC WMTS Support in the Map Visualization Component</a> for information about the WMTS service for map visualizer, WMTS Operations, and preparing the WMTS service for the map visualizer.
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9934"></a><a id="JIMPV9935"></a><a id="JIMPV9936"></a><a id="JIMPV9933"></a><div class="props_rev_3"><a id="GUID-5B11247C-C383-4DED-8DE2-AED637647478" name="GUID-5B11247C-C383-4DED-8DE2-AED637647478"></a><h5 id="JIMPV-GUID-5B11247C-C383-4DED-8DE2-AED637647478" class="sect5"><span class="enumeration_section">2.3.8.1 </span>How the tile_resizing_option Attribute Works
                     </h5>
                     <div>
                        <p>If a WMTS theme's <code class="codeph">snap_to_tile_scale</code> attribute is false (the default) or omitted, a request scale is always honored and the <code class="codeph">tile_resizing_option</code> attribute value (specified or defaulted) is used when choosing a proper tile scale. However, if snap_to_tile_scale is true, the <code class="codeph">tile_resizing_option</code> attribute value is ignored.
                        </p>
                        <p>The <code class="codeph">tile_resizing_option</code> attribute value can be one of the following string values: string <code class="codeph">unbiased</code> (the default), <code class="codeph">expand_biased</code>, or <code class="codeph">contract_biased</code>.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">unbiased</code> (the default): The closest tile scale level is chosen, and then the tile images are expanded or contracted to generate a map in the request scale. For example, in <a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHBBJGE">Figure 2-10</a> the tile scale 1:2000 is used to generate any request scale map if a request scale falls within a scale range of 1:3000 and 1:1500.
                              </p>
                              <div class="figure" id="GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHBBJGE">
                                 <p class="titleinfigure">Figure 2-10 unbiased tile_resizing_option Value</p><img src="img/unbiased_option.jpg" alt="Description of Figure 2-10 follows" title="Description of Figure 2-10 follows" longdesc="img_text/unbiased_option.html"><br><a href="img_text/unbiased_option.html">Description of "Figure 2-10 unbiased tile_resizing_option Value"</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p><code class="codeph">expand_biased</code>: When identifying a proper tile scale to generate a map in a request scale, a preference for expanding tile images to render a request map is used. In other words, you prefer to use a smaller tile scale to generate a map for a request scale. An 8:2 preference ratio for expanding is currently implemented. For example, in <a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHHJCGF">Figure 2-11</a> the tile scale 1:2000 is used for generating a request map if its scale is in the range of 1:2400 to 1:1200.
                              </p>
                              <div class="figure" id="GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHHJCGF">
                                 <p class="titleinfigure">Figure 2-11 expand_biased tile_resizing_option Value</p><img src="img/expand_biased_option.jpg" alt="Description of Figure 2-11 follows" title="Description of Figure 2-11 follows" longdesc="img_text/expand_biased_option.html"><br><a href="img_text/expand_biased_option.html">Description of "Figure 2-11 expand_biased tile_resizing_option Value"</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p><code class="codeph">contract_biased</code>: When identifying a proper tile scale to generate a map in request scale, a preference for contracting tiles to render a request map is used. In other words, you prefer to use a larger tile scale to generate a map for a request scale. An 8:2 preference ratio for contracting is currently implemented. For example, in <a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHIEEBB">Figure 2-12</a> the tile scale 1:2000 is used for generating a request map if its scale is in the range of 1:3600 to 1:1800.
                              </p>
                              <div class="figure" id="GUID-5B11247C-C383-4DED-8DE2-AED637647478__CIHIEEBB">
                                 <p class="titleinfigure">Figure 2-12 contract_biased tile_resizing_option Value</p><img src="img/contract_biased_option.jpg" alt="Description of Figure 2-12 follows" title="Description of Figure 2-12 follows" longdesc="img_text/contract_biased_option.html"><br><a href="img_text/contract_biased_option.html">Description of "Figure 2-12 contract_biased tile_resizing_option Value"</a></div>
                              <!-- class="figure" -->
                           </li>
                        </ul>
                        <p>See also <a href="map-visualization-concepts.html#GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B">snap_to_tile_scale and tile_resizing_option Attribute Usage Guidelines</a>.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8">WMTS Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9938"></a><a id="JIMPV9937"></a><div class="props_rev_3"><a id="GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B" name="GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B"></a><h5 id="JIMPV-GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B" class="sect5"><span class="enumeration_section">2.3.8.2 </span>snap_to_tile_scale and tile_resizing_option Attribute Usage Guidelines
                     </h5>
                     <div>
                        <p>This section presents general guidelines for using the <code class="codeph">snap_to_tile_scale</code> and <code class="codeph">tile_resizing_option</code> attributes to generate better quality maps. Because mapping has a wide variety of applications, you may also use your domain knowledge to set attribute values that best meet your needs.
                        </p>
                        <p>Whenever possible, set <code class="codeph">snap_to_tile_scale</code> to <code class="codeph">true</code> to use a closest tile scale instead of a request scale, because original tile maps have the best map quality.
                        </p>
                        <p>However, if you must honor a request scale, consider the following when setting the attributes:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you set a <code class="codeph">tile_resizing_option</code> value, omit the <code class="codeph">snap_to_tile_scale</code> attribute or set it to <code class="codeph">false</code> (the default). If <code class="codeph">snap_to_tile_scale</code> is set to <code class="codeph">true</code>, a request scale will not be honored, and instead the closest tile scale will be used.
                              </p>
                           </li>
                           <li>
                              <p>If a map is a topographic map with annotations and thin linear features, you may want to use the <code class="codeph">expand_biased</code> option.
                              </p>
                           </li>
                           <li>
                              <p>If a map is a thematic map, such as a land cover map, you may want to use the <code class="codeph">contract_biased</code> option.
                              </p>
                           </li>
                           <li>
                              <p>If a map is a satellite image, you may want to use the <code class="codeph">unbiased</code> or <code class="codeph">contract_biased</code> option.
                              </p>
                           </li>
                        </ul>
                        <p>Regarding the tile_resizing_option possible values:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>In general, a <code class="codeph">contract_biased</code> option may generate maps with more details, but these maps may need more tiles than maps from an <code class="codeph">expand_biased</code> option, and retrieving more tiles takes more time.
                              </p>
                           </li>
                           <li>
                              <p>If a request scale is honored (when the <code class="codeph">snap_to_tile_scale</code> attribute is set to <code class="codeph">false</code>), when a request scale is close enough to a tile scale, then the same operation will be employed (either expanding or contracting), regardless of the specified <code class="codeph">tile_resizing_option</code>. For example, if a request scale is 1:1900 in the figures in <a href="map-visualization-concepts.html#GUID-5B11247C-C383-4DED-8DE2-AED637647478">How the tile_resizing_option Attribute Works</a>, tile maps in 1:2000 will be retrieved and expanded to render the request map in a map scale of 1:1900, regardless of whether the <code class="codeph">unbiased</code>, <code class="codeph">expand_biased</code>, or <code class="codeph">contract_biased</code> option is specified; similarly, if a request scale is 1:2100, then tile maps in 1:2000 will also be retrieved and then contracted to render the requested map in a scale of 1:2100.
                              </p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B__CIHDIAIA">Example 2-30</a> shows a request with a dynamic WMTS theme, in which <code class="codeph">snap_to_tile_scale="true"</code> is specified.
                        </p>
                        <div class="example" id="GUID-FB3A6245-C970-408B-BC3A-F3135D3BFF7B__CIHDIAIA">
                           <p class="titleinexample">Example 2-30 Request with a Dynamic WMTS Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;map_request title="OpenGeo wmts theme (bluemarble)" 
  datasource="mvdemo" 
  width="1024" 
  height="900" 
  mapfilename="Bluemarble" 
  format="PNG_STREAM"&gt;
  &lt;center size="80.0"&gt;
    &lt;geoFeature&gt;
      &lt;geometricProperty typeName="center"&gt;
        &lt;Point&gt;
          &lt;coordinates&gt;-112, 42.0&lt;/coordinates&gt;
        &lt;/Point&gt;
      &lt;/geometricProperty&gt;
    &lt;/geoFeature&gt;
  &lt;/center&gt;
&lt;themes&gt;
  &lt;theme name="wmtstheme: Earth" timeout="10000" <span class="bold">snap_to_tile_scale="true"</span>&gt;
    &lt;wmts_gettile_request&gt;
      &lt;service_url&gt; http://maps.opengeo.org/geowebcache/service/wmts &lt;/service_url&gt;
      &lt;version&gt; 1.0.0 &lt;/version&gt;
      &lt;layer&gt; bluemarble &lt;/layer&gt;
      &lt;matrix_set_id&gt; EPSG:4326 &lt;/matrix_set_id&gt;
      &lt;format&gt; image/png &lt;/format&gt;
      &lt;style&gt; default &lt;/style&gt;
      &lt;top_left_corner_x&gt; -180.0 &lt;/top_left_corner_x&gt;
      &lt;top_left_corner_y&gt; 90.0 &lt;/top_left_corner_y&gt;
    &lt;/wmts_gettile_request&gt;
  &lt;/theme&gt;&lt;/themes&gt;
&lt;/map_request&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8">WMTS Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV9940"></a><a id="JIMPV9941"></a><a id="JIMPV9939"></a><div class="props_rev_3"><a id="GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA" name="GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA"></a><h5 id="JIMPV-GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA" class="sect5"><span class="enumeration_section">2.3.8.3 </span>Creating Predefined WMTS Themes
                     </h5>
                     <div>
                        <p>To create a predefined WMTS theme, you must store the definition of the WMTS theme in the database by inserting a row into the USER_SDO_THEMES view (described in <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a>). <a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHGFJEE">Example 2-31</a> stores the definition of a WMTS theme.
                        </p>
                        <p>In <a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHGFJEE">Example 2-31</a>, <code class="codeph">earth_image</code> is the name of the WMTS theme, and <code class="codeph">table_spaceholder</code> and <code class="codeph">geom_col_spaceholder</code> are dummy values to fill the BASE_TABLE and GEOMETRY_COLUMN columns in the USER_SDO_THEMES view. The styling rule information contains the <code class="codeph">service_url</code>, <code class="codeph">layer</code>, <code class="codeph">matrix_set_id</code>, <code class="codeph">format</code>, and <code class="codeph">style</code> information. The <code class="codeph">top_left_corner_x</code> and <code class="codeph">top_left_corner_y</code> attributes are not specified, so by default the values retrieved from the WMTS server are used.
                        </p>
                        <p><a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHDGFIJ">Example 2-32</a> shows a map request that uses the predefined theme created in <a href="map-visualization-concepts.html#GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHGFJEE">Example 2-31</a>.
                        </p>
                        <div class="example" id="GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHGFJEE">
                           <p class="titleinexample">Example 2-31 Creating a Predefined WMTS Theme</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes  VALUES (
'earth_image',
'Opengeo.org demo',
'table_spaceholder',
'geom_col_spaceholder',
'&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules theme_type="wmts"&gt;
    &lt;version&gt; 1.0.0 &lt;/version&gt;
    &lt;service_url&gt; http://maps.opengeo.org/geowebcache/service/wmts &lt;/service_url&gt;
    &lt;layer&gt; bluemarble &lt;/layer&gt;
    &lt;matrix_set_id&gt; EPSG:4326 &lt;/matrix_set_id&gt;
    &lt;format&gt; image/png &lt;/format&gt;
    &lt;style&gt; default &lt;/style&gt;
&lt;/styling_rules&gt;');
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-ADCA2AAF-6115-4401-8C9C-4ADD79B832BA__CIHDGFIJ">
                           <p class="titleinexample">Example 2-32 Map Request with Predefined WMTS Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;map_request 
  title="OpenGeo predefined wmts theme" 
  datasource="mvdemo" 
  width="1024" 
  height="768"   mapfilename="Bluemarle: Earth" 
  format="PNG_STREAM"&gt;
  &lt;center size="10.0"&gt;
    &lt;geoFeature&gt;
      &lt;geometricProperty typeName="center"&gt;
        &lt;Point&gt;
          &lt;coordinates&gt;-75.0,42.0&lt;/coordinates&gt;
        &lt;/Point&gt;
      &lt;/geometricProperty&gt;
    &lt;/geoFeature&gt;
  &lt;/center&gt;
&lt;themes&gt;
  &lt;theme name="earth_image" /&gt;
&lt;/themes&gt;
&lt;/map_request&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-2B9DDF26-EFBB-4215-BCFF-88E8B3A15EC8">WMTS Themes</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9606"></a><a id="JIMPV9607"></a><a id="JIMPV9605"></a><div class="props_rev_3"><a id="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42" name="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42"></a><h4 id="JIMPV-GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42" class="sect4"><span class="enumeration_section">2.3.9 </span>Custom Geometry Themes
                  </h4>
                  <div>
                     <div class="section">
                        <p>Custom geometry themes are associated with external spatial data (spatial data in a native format other than Oracle Spatial and Graph, such as shapefile). A custom geometry theme uses a spatial provider class to retrieve the native data, and the external provider must use the spatial data provider plug-in mechanism. The map visualizer provides a spatial provider interface class that the external provider must implement. The interface implementation has the following methods (some of them mainly provide information that can be used in user interfaces of applications like Map Builder):</p><pre class="oac_no_warn" dir="ltr">public interface SDataProvider
{
  /**
   * Returns the initialization parameters for the provider.
   * @return String[] - array with initialization parameter names
   */
  public String[] getInitParameterNames();
 
  /**
   * Returns runtime parameter names. Runtime parameters are additional parameters
   * that the provider may use when retrieving the data objects.
   * @return String[] - array with runtime parameter names
   */
  public String[] getRuntimeParameterNames();
 
  /**
   * Returns a value that gives a hint for the runtime parameter value.
   * This hin can be used as a tooltip in user intefaces.
   * @param runtimeParam
   * @return   a String representing the hint value, or null if no hint is available
   */
  public String getRuntimeParameterHintValue(String runtimeParam);
 
  /**
   * This method is used to set the initialization parameters for the specific
   * data provider.
   * @param params - parameters to be used by the initialization method.
   * @return boolean - true if success; false otherwise
   */
  public boolean init(Properties params);
 
  /**
   * This method creates and returns an instance of SDataSet which contains
   * all the Spatial data produced by this provider, based on
   * the given parameters for a specific incoming map request.
   * &lt;br&gt;
   * The map visualizer calls this method on the custom theme producer implementation.
   *
   * @param queryWin the search area to retrieve spatial objects. The window is
   * assumed to be already on data provider spatial reference system.
   * @param nonSpatialColumns - the list of attributes that will return with objects.
   * @param queryCondition - query condition expression (may have binding parameters).
   * @param bindingParameters - binding variables for query condition with binding parameters.
   * @param params  - parameters that the provider may use to retrieve the data.
   * @return SDataObject - an instance of SDataSet class; null if failed.
   */
  public SDataSet buildDataSet(Rectangle2D queryWin,String []nonSpatialColumns,
                               String queryCondition,Object[] bindingParameters,
                                Properties params);
 
  /**
   * Returns the list of existing attributes for this data provider.
   * @param params  parameters that the provider may use to get the attribute list.
   * @return Field[] - array of attributes for this provider.
   */
  public Field[] getAttributeList(Properties params);
 
  /**
   * Returns the data set spatial extent MBR.
   * @param params  parameters that the provider may use to get the data extents
   * @return Rectangle2D - data spatial extent for this provider.
   */
  public Rectangle2D getDataExtents(Properties params);
 
 /**
   * Returns if provider can build spatial indexes.
   * If true, means that buildSpatialIndex method can be called.
   * @return
   */
  public boolean canBuildSpatialIndex();
 
  /**
   * Builds a spatial index on the data set.
   * @param params  parameters that the provider may use to build the spatial index.
   * @return boolean - true if saptial index creation is successful.
   */
  public boolean buildSpatialIndex(Properties params);
 
  /**
   * Clears provider internal caches (if provider implement caches).
   */
  public void clearCache();
 
 
  /**
   * Returns the parameter names that can be used to query for spatial tables.
   * Can be used more as information for user interfaces.
   * @return
   */
  public String[] getParametersToQuerySpatialMetadata();
 
  /**
   * Returns the spatial tables and spatial columns.
   * @param params must define the parameters returned from
   * getParametersToQuerySpatialMetadata.
   * @return  an array list defining the table name(index [0])
   *          and spatial column (index[1])
   */
  public String[][] getSpatialTables(Properties params);
}
</pre><p>The <code class="codeph">init</code> and <code class="codeph">buildDataSet</code> methods must be implemented. The other method implementations can be empty; however applications (such as the Oracle Map Builder Tool) can make use of these methods to handle the information about spatial data providers. A provider can implement its own spatial indexing mechanism; the map visualizer offers an implementation for the shapefile provider, and the <code class="codeph">buildSpatialIndex</code> method creates an indexing file with the <code class="codeph">.oix</code> extension in the <code class="codeph">shapefile</code> directory. <a href="creating-registering-custom-spatial-data-provider.html#GUID-EEDC5892-3E42-477E-BCC8-140873665EC4" title="This appendix shows a sample implementation of a spatial data provider, and explains how to register this provider to be used with the map visualization component.">Creating and Registering a Custom Spatial Data Provider</a> contains an example of how to implement and register a sample spatial provider with the map visualizer.
                        </p>
                        <p>To render native data in the map visualizer with custom geometry themes, follow these steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Implement a spatial provider class based on the plug-in interface, and generate a jar file with the provider implementation. Copy the jar file to a directory that is part of the map visualizer CLASSPATH definition.</span></li>
                        <li class="stepexpand"><span>Register the provider in the map visualizer configuration. The map visualizer ships with a shapefile provider to access ESRI shapefiles, a GDAL-OGR provider to access data formats supported by OGR, and a Teradata provider to access data stored in a Teradata database. (See the GDAL-OGR and Teradata documentation for detailed information about handling spatial data in these environments.) The GDAL-OGR library <code class="codeph">gdal.jar</code>, and Teradata libraries <code class="codeph">terajdbc4.jar</code> and <code class="codeph">tdgssconfig.jar</code>, must be on server classpath. The registration section in the map visualizer configuration file looks like this:</span><div><pre class="oac_no_warn" dir="ltr">&lt;s_data_provider
  id="shapefileSDP"
  class="oracle.sdovis.ShapefileDataProvider"
  &gt;
  &lt;parameters&gt;
    &lt;parameter name="datadir" value="/temp/data" /&gt;
  &lt;/parameters&gt;
&lt;/s_data_provider&gt;
</pre><p>Each provider must have <code class="codeph">id</code> and <code class="codeph">class</code> names defined: <code class="codeph">id</code> is a unique name that identifies the provider, and <code class="codeph">class</code> corresponds to the Java class implementation. The <code class="codeph">&lt;parameters&gt;</code> element defines the initialization parameters of the provider.
                              </p>
                              <p>For the shapefile provider, the initialization parameter <code class="codeph">datadir</code> defines where the map visualizer will look for the data files, and thus it should be a directory that is accessible to the map visualizer. The map visualizer first looks for data files based on the theme definition information; and if the data path defined in the theme definition is not accessible, the map visualizer looks for the data path defined in the configuration file.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create custom geometry themes associated with the external spatial data provider.</span></li>
                     </ol>
                     <div class="example" id="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__CIHJBHJG">
                        <p class="titleinexample">Example 2-33 Defining a Dynamic Custom Geometry Theme</p><pre class="oac_no_warn" dir="ltr">&lt;theme name="custom_geom_theme_1" &gt;
   &lt;custom_geom_theme
     provider_id="shapefileSDP"
     srid="26986"
     render_style="C.RED"
     label_column="parcel_id"
     label_style="T.CITY NAME"
     datasource="mvdemo"&gt;
   &lt;parameters&gt;
    &lt;parameter name="filename" value="/lbs/demo/shapefile/parcel.shp"/&gt;
   &lt;/parameters&gt;
  &lt;/custom_geom_theme&gt;
&lt;/theme&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__CIHFJCGI">
                        <p class="titleinexample">Example 2-34 Storing a Predefined Custom Geometry Theme</p><pre class="oac_no_warn" dir="ltr">insert into user_sdo_themes values ( 
'SHAPE_THEME', 
'Shapefile theme', 
'CUSTOM_TABLE', 
'GEOMETRY', 
'&lt;?xml version="1.0" standalone="yes"?&gt; 
&lt;styling_rules theme_type="geom_custom" srid="26986" provider_id="shapefileSDP"&gt; 
  &lt;rule&gt; 
    &lt;features style="C.RED"&gt; &lt;/features&gt; 
    &lt;label column="PARCEL_ID" style="T.CITY NAME"&gt; 1 &lt;/label&gt; 
  &lt;/rule&gt; 
  &lt;parameters&gt; 
    &lt;parameter name="filename" value="/lbs/demo/shapefile/parcel.shp"/&gt; 
  &lt;/parameters&gt; 
&lt;/styling_rules&gt;' 
);
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__GUID-8B3780D6-3E52-4DF0-999A-4559FC45A788">
                        <p>Although the external spatial data is outside the Oracle database, you still need to have a database connection to render this data. The database is used to store the metadata information related with the theme, as well as the styling information used to render and to label the data.</p>
                        <p><a href="map-visualization-concepts.html#GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__CIHJBHJG">Example 2-33</a> shows the definition for a dynamic custom geometry theme. The XML element <code class="codeph">&lt;custom_geom_theme&gt;</code> identifies a custom geometry theme. The <code class="codeph">&lt;parameters&gt;</code> element defines the runtime parameters to be used by the provider. In this case <code class="codeph">"filename"</code> is a runtime parameter, and <code class="codeph">"/lbs/demo/shapefile/parcel.shp"</code> defines the file path. The map visualizer first attempts to use this file path definition; but if it is not accessible, it uses the data directory value defined in the configuration file for the shapefile spatial provider.
                        </p>
                        <p>The runtime parameters for the available spatial providers are as follows (note that Map Builder provides the option to encrypt parameter values):</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For a shapefile provider:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">filename</code>: full path to the shapefile (.shp) on disk 
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>For GDAL-OGR:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">datasource</code>: a full OGR data source string. Depending on the data source format, this string can vary.(see the GDAL-OGR documentation for detailed information about connecting to different formats supported by GDAL-OGR.)
                                    </p>
                                    <p>For file formats, this parameter's value is usually the full path to the archive.</p>
                                    <p>For database connections, enter the full connection string to access the spatial table and spatial column. For example, for a Postgis table name STATES with one spatial column, the value might be:</p><pre class="oac_no_warn" dir="ltr">datasource = PG:dbname='template_postgis' host='localhost' port='5432' user='postgres' password='manager' tables=states
</pre></li>
                              </ul>
                           </li>
                           <li>
                              <p>For a Teradata provider:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">jdbcurl</code>: the JDBC connection to Teradata database. The string format is:
                                    </p><pre class="oac_no_warn" dir="ltr">jdbc:teradata://<span class="italic">&lt;host_address&gt;</span>/DATABASE=&lt;<span class="italic">db_name&gt;</span>,DBS_PORT=<span class="italic">&lt;db_port&gt;</span>,TMODE=ANSI,CHARSET=UTF8
</pre></li>
                                 <li>
                                    <p><code class="codeph">user</code>: database user.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">password</code>: database password.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">containerds</code>: Optional. Name of Teradata container data source defined on the application server (WebLogic, for example). If defined, this will be used first in the map visualizer, instead of the <code class="codeph">jdbcurl</code> value.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">basetable</code>: name of the spatial table.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">geomcolumn</code>: name of the spatial column.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">fetchsize</code>: Optional. Number of rows to be prefetched.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>The available attributes for a dynamic custom geometry theme are: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">provider_id</code> specifies the spatial provider.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">datasource</code> specifies the Oracle database connection. This connection is used to retrieve the styles to render the spatial data.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">srid</code> specifies the spatial reference system (Oracle Spatial and Graph coordinate system).
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">render_style</code> specifies the style to be used when rendering the features.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">label_column</code> specifies the name of the column containing label text to be used with the theme.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">label_style</code> specifies the style to be used when labeling the features.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">feature_attributes</code> specifies additional attributes that can be used with advanced styles.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">key_column</code> specifies a key attribute that can be used in Oracle Maps applications.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">query_condition</code> specifies the WHERE clause to filter feature selection. Shapefile providers do not support a query condition; however an OGR provider can be used to render shapefiles with a query condition. The query condition expression can define binding parameters (for example, <code class="codeph">attr = :1</code>).
                              </p>
                           </li>
                        </ul>
                        <p><a href="map-visualization-concepts.html#GUID-583B47AE-76C2-4E23-9202-2055D7C3AE42__CIHFJCGI">Example 2-34</a> shows how to store a predefined custom geometry theme definition. Use GEOMETRY as the geometry column name, and you can specify any name for the base table name. The <code class="codeph">"theme_type=geom_custom"</code> attribute identifies the theme as a custom theme. The <code class="codeph">&lt;rule&gt;</code> element has the same function as for an Oracle Spatial and Graph geometry theme. The <code class="codeph">&lt;parameters&gt;</code> element defines the runtime parameters that the provider accepts. For the shapefile provider, the runtime <code class="codeph">parameter</code> filename defines the path to the shapefile data.
                        </p>
                        <p>You can override the runtime parameters section of a predefined custom geometry theme by the specifying the parameters in a map_request. For example, you can include the following in a <code class="codeph">&lt;map_request&gt;</code> element:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;theme name="CUSTOM_THEME" &gt;
  &lt;parameters&gt;
    &lt;parameter name="filename" value="/lbs/demo/shapefile/counties.shp"/&gt;
  &lt;/parameters&gt;
&lt;/theme&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9609"></a><a id="JIMPV9610"></a><a id="JIMPV9611"></a><a id="JIMPV9612"></a><a id="JIMPV9608"></a><div class="props_rev_3"><a id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9" name="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9"></a><h4 id="JIMPV-GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9" class="sect4"><span class="enumeration_section">2.3.10 </span>Annotation Text Themes
                  </h4>
                  <div>
                     <p>Oracle Spatial and Graph supports annotation text as specified in the <span class="italic">OpenGIS Implementation Specification for Geographic information - Simple feature access - Part 1: Common architecture</span>, which defines <span class="bold">annotation text</span> as "simply placed text that can carry either geographically-related or ad-hoc data and process-related information as displayable text. This text may be used for display in editors or in simpler maps. It is usually lacking in full cartographic quality, but may act as an approximation to such text as needed by any application."
                     </p>
                     <p>Oracle Spatial and Graph provides the ST_ANNOTATION_TEXT object type for storing annotation text, and the USER_ANNOTATION_TEXT_METADATA and ALL_ANNOTATION_TEXT_METADATA views for storing metadata related to annotation text. For more information about annotation text support, see <a href="../spatl/sql-multimedia-type-support.html#SPATL568" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a>.
                     </p>
                     <p>Each annotation text object may have one or more elements, and each element is defined by the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Value: Text associated with element. If the value is null, the text is derived from the first non-null preceding element value. If all preceding elements have null values, the text is a text expression value derived from the metadata.</p>
                        </li>
                        <li>
                           <p>Location: Spatial location associated with the annotation text object.</p>
                        </li>
                        <li>
                           <p>Leader line: Linear feature associated with the annotation text object.</p>
                        </li>
                        <li>
                           <p>Attributes: Graphic attributes used to display the text. If the value is null, graphic attributes are derived from the attributes value in the metadata.</p>
                        </li>
                     </ul>
                     <p>The text expression in the metadata views can be any of the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A column name.</p>
                        </li>
                        <li>
                           <p>A function applied to a column name. For example: <code class="codeph">substr(my_col,1,3)</code></p>
                        </li>
                        <li>
                           <p>The concatenation of two or more column names. For example: <code class="codeph">column_1 || column_2 || column_3</code></p>
                        </li>
                        <li>
                           <p>A text value that is unrelated to a column name. In this case, it is treated as a simple text string that is used for any text element that has a null value.</p>
                        </li>
                     </ul>
                     <p>Annotation text themes in the map visualizer are associated with database tables that have a column of type ST_ANNOTATION_TEXT. For each annotation text element, the map visualizer will render:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The value (if not null) of the annotation text element as a string, using a text style that is created at real time based on the element attributes.</p>
                        </li>
                        <li>
                           <p>The leader line (if not null) associated with the annotation text element. In this case, users can select a map visualizer style to render the leader line.</p>
                        </li>
                     </ul>
                     <p>Each annotation text element has an envelope represented by a geometry, and which is used for spatial indexing. Therefore, you must do the following to use spatial indexing with annotation text tables in the map visualizer:</p>
                     <ol>
                        <li>
                           <p>Insert a row into the USER_ANNOTATION_TEXT_METADATA view that specifies the name of the annotation text table and the PRIVATEENVELOPE attribute of the annotation text column (that is, the column of type ST_ANNOTATION_TEXT).</p>
                           <p>The following example inserts a row for a table named ANNOTEXT_TABLE with an annotation text column named TEXTOBJ:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO USER_SDO_GEOM_METADATA 
  VALUES (
  'ANNOTEXT_TABLE',
  'TEXTOBJ.PRIVATEENVELOPE',
  SDO_DIM_ARRAY(
    SDO_DIM_ELEMENT('X', 0.0, 10.0, 0.0005),
    SDO_DIM_ELEMENT('Y', 0.0,10.0, 0.0005)
     ),
  null   -- SRID
);
</pre></li>
                        <li>
                           <p>Create a spatial index on the annotation text envelope of the annotation text table.</p>
                           <p>The following example creates a spatial index named ANNO_TEXT_IDX on the annotation envelope of the table named ANNOTEXT_TABLE:</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX anno_text_idx ON annotext_table(textobj.privateenvelope)
  INDEXTYPE IS mdsys.spatial_index;
</pre></li>
                     </ol>
                     <p>For themes with valid SRID information, if the metadata base map scale is defined, the element text sizes will be scaled as maps zoom in or out.</p>
                     <p><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHEHCBJ">Example 2-35</a> defines the styling rules for a predefined annotation text theme in the map visualizer. The structure is similar to other map visualizer themes. Currently, just one styling rule is processed for each annotation theme. In this example, the theme type is <code class="codeph">annotation</code>, the feature style L.<code class="codeph">PH</code> is used to render leader lines, and the query condition <code class="codeph">(id = 1 or id = 2)</code> is appended on the final query.
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFGGGA">Example 2-36</a> shows the theme definition for a dynamic annotation text theme. The parameters defined are:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">datasource</code>: the data source name
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">jdbc_srid</code>: the spatial reference identifier
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">annotation_table</code>: the annotation text table
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">annotation_column</code>: the annotation text column
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">leaderline_style</code>: the leader line style to be used
                           </p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHDJHEC">Example 2-37</a> is similar to <a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFGGGA">Example 2-36</a>, but it adds the behavior that if the <code class="codeph">annotation_column</code> column contains a null value, then the value in the <code class="codeph">textexpr_column</code> is used for the annotation instead. In <a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHDJHEC">Example 2-37</a>, assume that the ANNOTATION_TABLE table contains a column named DEFAULT_ANNOTATION (which is used in <a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFIAHJ">Example 2-38</a>). This additional column is specified in the <code class="codeph">textexpr_column</code> attribute and in the SELECT statement.
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFIAHJ">Example 2-38</a> creates an annotation text table and prepares it to be used with the map visualizer.
                     </p>
                     <div class="example" id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHEHCBJ">
                        <p class="titleinexample">Example 2-35 Styling Rules for a Predefined Annotation Text Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules theme_type="annotation"&gt;
    &lt;rule&gt;
        &lt;features style="L.PH"&gt; (id = 1 or id = 2) &lt;/features&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFGGGA">
                        <p class="titleinexample">Example 2-36  Dynamic Annotation Text Theme Definition</p><pre class="oac_no_warn" dir="ltr">&lt;themes&gt;
  &lt;theme name="theme1" &gt;
     &lt;jdbc_annotation_query
       datasource="tilsmenv"
       jdbc_srid="0"
       annotation_table="ANNOTEXT_TABLE"
       annotation_column="textobj"
       leaderline_style="L.PH"
       &gt;select textobj from annotext_table
     &lt;/jdbc_annotation_query&gt;
   &lt;/theme&gt;
&lt;/themes&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHDJHEC">
                        <p class="titleinexample">Example 2-37  Dynamic Annotation Text Theme with Default Annotation Column</p><pre class="oac_no_warn" dir="ltr">&lt;themes&gt;
  &lt;theme name="theme1" &gt;
     &lt;jdbc_annotation_query
       datasource="tilsmenv"
       jdbc_srid="0"
       annotation_table="ANNOTEXT_TABLE"
       annotation_column="textobj"
       <span class="bold">textexpr_column="default_annotation"</span>
       leaderline_style="L.PH"
       &gt;select textobj<span class="bold">, default_annotation</span> from annotext_table
     &lt;/jdbc_annotation_query&gt;
   &lt;/theme&gt;
&lt;/themes&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-00E4F995-9956-4444-ACA8-7FAD04CAE6D9__CIHFIAHJ">
                        <p class="titleinexample">Example 2-38 Script to Generate Annotation Text Data</p><pre class="oac_no_warn" dir="ltr">SET ECHO ON
SET FEEDBACK 1
SET NUMWIDTH 10
SET LINESIZE 100
SET PAGESIZE 10000
SET SERVEROUTPUT ON SIZE 5000
SET LONG 20000
SET TIMING ON
call dbms_java.set_output(5000);
 
---------------------------------------------------------------------
-- Create an annotation text table (a table that has a
-- column of ST_ANNOTATION_TEXT object type), and insert some records.
---------------------------------------------------------------------
 
create table annotext_table (
  id number, 
  default_annotation varchar2(32), 
  textobj ST_ANNOTATION_TEXT);
 
insert into annotext_table values (1,'Text_1',
ST_ANNOTATION_TEXT(
   ST_ANNOTATIONTEXTELEMENT_ARRAY(
          ST_ANNOT_TEXTELEMENT_ARRAY(
                ST_ANNOTATIONTEXTELEMENT('Sample Label 1',
                   SDO_GEOMETRY(2001, null, sdo_point_type(1,1,null),null,null),
                   SDO_GEOMETRY(2002,null,null,
                       SDO_ELEM_INFO_ARRAY(1,2,1),
                       SDO_ORDINATE_ARRAY(0,0, 1,1)), NULL)))));
 
insert into annotext_table values (2,'Text_2',
ST_ANNOTATION_TEXT(
   ST_ANNOTATIONTEXTELEMENT_ARRAY(
          ST_ANNOT_TEXTELEMENT_ARRAY(
                ST_ANNOTATIONTEXTELEMENT('Sample Label 2',
                   SDO_GEOMETRY(2001,null,sdo_point_type(10,10,null),null,null),
                   SDO_GEOMETRY(2002,null,null,
                       SDO_ELEM_INFO_ARRAY(1,2,1),
                       SDO_ORDINATE_ARRAY(5,10, 10,10)), NULL)))));
 
insert into annotext_table values (3, 'Text_3',
ST_ANNOTATION_TEXT(
   ST_ANNOTATIONTEXTELEMENT_ARRAY(
          ST_ANNOT_TEXTELEMENT_ARRAY(
                ST_ANNOTATIONTEXTELEMENT(null,
                   SDO_GEOMETRY(2002, null, null,
                       SDO_ELEM_INFO_ARRAY(1,2,1),
                       SDO_ORDINATE_ARRAY(2,5,4,5,6,5)),
                   SDO_GEOMETRY(2002,null,null,
                       SDO_ELEM_INFO_ARRAY(1,2,1),
                       SDO_ORDINATE_ARRAY(4,3, 4,5)),
'&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;textAttributes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:noNamespaceSchemaLocation="../../annotation_text.xsd"&gt;
 &lt;textStyle fontFamily="Dialog" fontSize="14" fill="blue"/&gt;
 &lt;textlayout/&gt;
&lt;/textAttributes&gt;'
)))));
 
---------------------------------------------------------------------
-- Register the annotation text table in the user metadata view.
---------------------------------------------------------------------
 
insert into USER_ANNOTATION_TEXT_METADATA values(
  'ANNOTEXT_TABLE', 'TEXTOBJ', null, null, null);
 
---------------------------------------------------------------------
-- Update the metadata information.
---------------------------------------------------------------------
 
update user_annotation_text_metadata set
text_expression='default_annotation',
text_attributes =
'&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;textAttributes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:noNamespaceSchemaLocation="../../annotation_text.xsd"&gt;
 &lt;textStyle fontFamily="Serif" fontSize="14" fill="#ff0000"/&gt;
 &lt;textlayout/&gt;
&lt;/textAttributes&gt;';
 
---------------------------------------------------------------------
-- Register the annotation text geometry envelope on the user
-- metadata view of geometries.
---------------------------------------------------------------------
 
INSERT INTO USER_SDO_GEOM_METADATA
 VALUES (
 'ANNOTEXT_TABLE',
 'TEXTOBJ.PRIVATEENVELOPE',
 SDO_DIM_ARRAY(
   SDO_DIM_ELEMENT('X', 0.0, 10.0, 0.0005),
   SDO_DIM_ELEMENT('Y', 0.0,10.0, 0.0005)
    ),
 null   -- SRID
);
 
---------------------------------------------------------------------
-- Create a spatial index on the annotation text envelope.
---------------------------------------------------------------------
 
create index anno_text_idx on annotext_table(textobj.privateenvelope)
  indextype is mdsys.spatial_index;
 
---------------------------------------------------------------------
-- Insert a predefined theme into the map visualizer's theme view.
---------------------------------------------------------------------
 
INSERT INTO user_sdo_themes  VALUES (
  'ANNOTEXT_THEME',
  'Annotation text',
  'ANNOTEXT_TABLE',
  'TEXTOBJ',
  '&lt;?xml version="1.0" standalone="yes"?&gt;
   &lt;styling_rules theme_type="annotation"&gt;
     &lt;rule &gt;
      &lt;features style="L.PH"&gt; &lt;/features&gt;
     &lt;/rule&gt;
   &lt;/styling_rules&gt;' );
 
commit;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9992"></a><a id="JIMPV9993"></a><a id="JIMPV9991"></a><div class="props_rev_3"><a id="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024" name="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024"></a><h4 id="JIMPV-GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024" class="sect4"><span class="enumeration_section">2.3.11 </span>LRS (Linear Referencing System) Themes
                  </h4>
                  <div>
                     <p>An LRS theme is a special kind of map visualizer theme useful for visualizing features defined using the linear referencing system (LRS) of Oracle Spatial and Graph, which is explained in <a href="../spatl/lrs-linear-referencing-system-concepts.html#SPATL060" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a>.
                     </p>
                     <p>Two tables are needed by an LRS theme: one (the <span class="bold">LRS table</span>) has an LRS geometry column, and the other (the <span class="bold">join table</span>) has one or two <span class="bold">measure columns</span>. Point events must have one measure column in the join table (for example, a road sign located at a measure of <span class="italic">m1</span>, and an accident that occurred at a measure of <span class="italic">m2</span>); while linear events must have two measure columns, one for a starting measure and one for an end measure (for example, from measure <span class="italic">m1</span> to measure <span class="italic">m2</span> the road pavement condition is poor, and from measure <span class="italic">n1</span> to measure <span class="italic">n2</span> the condition is fair). Each event is stored in one row in the join table.
                     </p>
                     <p>After an LRS theme is defined, you only need to specify the theme name in a map request when you use the theme. The map visualizer automatically finds the theme's definition and constructs a query that joins these two specified tables; it then generates the geometry data by internally using an LRS function, either SDO_LRS.LOCATE_PT for point events or SDO_LRS.CLIP_GEOM_SEGMENT for linear events. The map visualizer then renders the generated point or linear segment, together with their attribute data, according to the styling rules for the theme.</p>
                     <p>To create a predefined LRS theme, you must store the definition of the LRS theme in the database by inserting a row into the USER_SDO_THEMES view. <a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHDJBDF">Example 2-39</a> stores the definition of an LRS theme named <code class="codeph">LRS_THEME</code>.
                     </p>
                     <p>In <a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHDJBDF">Example 2-39</a>, the LRS table name (INTERSTATES_LRS, which has three columns, GEOM, HIGHWAY, and ROUTEN) is inserted in the BASE_TABLE column of the USER_SDO_THEMES view, the LRS geometry column (GEOM) is inserted in the GEOMETRY_COLUMN column, and XML document with one <code class="codeph">&lt;styling_rules&gt;</code> element is inserted into the STYLING_RULES column.
                     </p>
                     <p>In the <code class="codeph">&lt;styling_rules&gt;</code> element for an LRS theme, <code class="codeph">theme_type</code> must be <code class="codeph">lrs</code> in order for this theme to be recognized as an LRS theme.
                     </p>
                     <p>If the optional <code class="codeph">key_column</code> attribute is omitted, no key column is included when constructing a query string to fetch data from a database. This is different from a predefined geometry theme, in which the ROWID column is the default key column.
                     </p>
                     <p>The child elements <code class="codeph">&lt;rule&gt;</code>, <code class="codeph">&lt;hidden_info&gt;</code>, <code class="codeph">&lt;join_table&gt;</code>, and <code class="codeph">&lt;join_columns&gt;</code> can be included within the <code class="codeph">&lt;styling_rules&gt;</code> element. The <code class="codeph">&lt;join_table&gt;</code> and <code class="codeph">&lt;join_columns&gt;</code> child elements are specific to LRS themes.
                     </p>
                     <p>The <code class="codeph">&lt;rule&gt;</code> element for an LRS theme is similar to the definition in a predefined themes, but its child element <code class="codeph">&lt;features&gt;</code> must contain an <code class="codeph">asis</code> attribute with its value set to <code class="codeph">true</code> (<code class="codeph">asis="true"</code>).There can be 0, 1, or more <code class="codeph">&lt;rule&gt;</code> elements within a <code class="codeph">&lt;styling_rules&gt;</code> element.
                     </p>
                     <p>The <code class="codeph">&lt;hidden_info&gt;</code> element is optional for an LRS theme. It is defined for use in Oracle Maps applications. It specifies a list of attributes from either the LRS table or the join table, or both.
                     </p>
                     <p>In <code class="codeph">&lt;join_table&gt;</code> element, the <code class="codeph">name</code> attribute (<code class="codeph">pavement_condition</code> in this example) specifies the join table name. In this example, the join table contains columns such as id, seg_id, condition, from_measure, and to_measure. If two measure columns are used to define linear events in the join table, then attributes <code class="codeph">start_measure</code> and <code class="codeph">end_measure</code> (<code class="codeph">from_measure</code> and <code class="codeph">to_measure</code> in this example) must be specified, which indicate column names of measurements in the join table. If the join table contains one measure for point events, then a <code class="codeph">measure</code> attribute is specified in this <code class="codeph">&lt;join_table&gt;</code> element.
                     </p>
                     <p>In the <code class="codeph">&lt;join_columns&gt;</code> element, the <code class="codeph">lrs_table_column</code> and <code class="codeph">join_table_column</code> attributes must be specified, where <code class="codeph">lrs_table_column</code> defines the column from the LRS table, and <code class="codeph">join_table_column</code> specifies the column from the join table to join these two tables.
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHEDGIB">Example 2-40</a> shows a map request that uses the predefined LRS theme from <a href="map-visualization-concepts.html#GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHDJBDF">Example 2-39</a>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__GUID-4849341A-2012-4277-BD83-F9C88A34EAA8">
                        <p class="notep1">See Also:</p>
                        <p><a href="xml-formats-map-visualizer.html#GUID-40C2D442-B6C8-4C29-97C8-9A5335DB09E5" title="This appendix describes the XML format for defining style, themes, and base maps using the map visualization component metadata views.">XML Format for Styles, Themes, Base Maps, and Map Tile Layers</a> for reference information about elements and attributes specific to LRS themes (such as the <code class="codeph">&lt;join_table&gt;</code> and <code class="codeph">&lt;join_columns&gt;</code> elements).
                        </p>
                     </div>
                     <div class="example" id="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHDJBDF">
                        <p class="titleinexample">Example 2-39 Creating an LRS Theme</p><pre class="oac_no_warn" dir="ltr">INSERT INTO user_sdo_themes (name, description, base_table, geometry_column, styling_rules)
VALUES (
'LRS_THEME',
'LRS theme example with 3 rules, 2 measure columns',
'INTERSTATES_LRS',
'GEOM',
'&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;styling_rules key_column="id" theme_type="lrs"&gt;
  &lt;rule&gt;
    &lt;features  asis="true"&gt;
      condition=''good''
    &lt;/features&gt;
    &lt;label column="condition" style="T.STREET NAME"/&gt;  
    &lt;rendering&gt;
      &lt;style name="L.PTH"/&gt;
    &lt;/rendering&gt;
  &lt;/rule&gt;
  &lt;rule&gt;
    &lt;features  asis="true"&gt;
      condition=''fair''
    &lt;/features&gt;
    &lt;label column="condition" style="T.STREET NAME"/&gt;  
    &lt;rendering&gt;
      &lt;style name="L.SH"/&gt;
    &lt;/rendering&gt;
  &lt;/rule&gt;
  &lt;rule&gt;
    &lt;features  asis="true"&gt;
      condition=''poor''
    &lt;/features&gt;
    &lt;label column="condition" style="T.STREET NAME"/&gt;  
    &lt;rendering&gt;
      &lt;style name="L.MAJOR STREET"/&gt;
    &lt;/rendering&gt;
  &lt;/rule&gt;
  &lt;hidden_info&gt;
    &lt;field column="highway"      name="highway name"/&gt;
    &lt;field column="routen"       name="highway number"/&gt;
    &lt;field column="condition"    name="pavement condition"/&gt;
  &lt;/hidden_info&gt;
  &lt;join_table
    name="pavement_condition"
    start_measure="from_measure"
    end_measure="to_measure"
  /&gt;
  &lt;join_columns
    lrs_table_column="highway"
    join_table_column="seg_id"
  /&gt;
&lt;/styling_rules&gt;'
);
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-C7FFC5B2-D6BA-4BD7-BA75-FB0AAD861024__CIHEDGIB">
                        <p class="titleinexample">Example 2-40 Map Request with Predefined LRS Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;map_request
  title="LRS Theme test"
  datasource="mvdemo"
  width="640"
  height="480"
  bgcolor="#a6caf0"
  antialiase="true"
  format="PNG_STREAM"&gt;
  &lt;center size="45"&gt;
    &lt;geoFeature&gt;
      &lt;geometricProperty typeName="center"&gt;
        &lt;Point&gt;
          &lt;coordinates&gt;-95, 35&lt;/coordinates&gt;
        &lt;/Point&gt;
      &lt;/geometricProperty&gt;
    &lt;/geoFeature&gt;
  &lt;/center&gt; 
  &lt;themes&gt;  
    &lt;<span class="bold">theme name="LRS_THEME"</span>/&gt;
  &lt;/themes&gt;
&lt;/map_request&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9564"></a><a id="JIMPV9572"></a><a id="JIMPV9565"></a><a id="JIMPV9566"></a><a id="JIMPV9567"></a><a id="JIMPV9568"></a><a id="JIMPV9569"></a><a id="JIMPV9570"></a><a id="JIMPV9571"></a><a id="JIMPV9563"></a><div class="props_rev_3"><a id="GUID-387C98FD-359C-4646-9802-6E69B79A0754" name="GUID-387C98FD-359C-4646-9802-6E69B79A0754"></a><h4 id="JIMPV-GUID-387C98FD-359C-4646-9802-6E69B79A0754" class="sect4"><span class="enumeration_section">2.3.12 </span>Thematic Mapping
                  </h4>
                  <div>
                     <p><span class="bold">Thematic mapping</span> refers to the drawing of spatial features based on their attribute values. The map visualizer uses thematic mapping to create maps in which colors or symbols are applied to features to indicate their attributes. For example, a <code class="codeph">Counties</code> theme can be drawn using colors with different hues that map directly to the population density of each county, or an <code class="codeph">Earthquakes</code> theme can be plotted with filled circles whose sizes map to the scale or damage of each earthquake.
                     </p>
                     <p>To achieve thematic mapping, you must first create an advanced style that is suitable for the type of thematic map, and then create a theme for the features specifying the advanced style as the rendering style. In the styling rules for the theme, you must also specify attribute columns in the table or view whose values will be used to determine exactly how a feature will be rendered thematically by the advanced style.</p>
                     <p>For example, assume that you wanted to display a map in which the color used for each region reflects the level of sales for a particular product. To do this, create an advanced style that defines a series of individual range-based buckets (see <a href="xml-formats-map-visualizer.html#GUID-3DEE62C7-780A-429D-B21F-CC79D43B0ACB">Individual Range-Based Buckets</a>), where each bucket contains a predefined range of sales values for a product, and each bucket has an associated rendering style. (Each region will be rendered using the style associated with the range in which that region's sales value falls.) Also specify the name of the column or columns that provide the attribute values to be checked against the ranges. In other words, the advanced style defines how to map regions based on their sales values, and the theme's styling rules tie together the advanced style and the attribute column containing the actual sales values.
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABDIBEA">Figure 2-13</a> shows the relationship between an advanced style and a theme, and how the style and the theme relate to the base table. In this figure, the advanced style named <code class="codeph">V.SALES</code> defines the series of buckets. The predefined theme named <code class="codeph">SALES_BY_REGION</code> specified the <code class="codeph">V.SALES</code> style in its styling rules. The theme also identifies the SALES column in the REGIONS table as the column whose value is to be compared with the bucket ranges in the style. (Each bucket could be associated with a labeling style in addition to or instead of a rendering style, as explained in <a href="map-visualization-concepts.html#GUID-DF9FFE30-7ACB-4E9A-A3E5-40EC4E32E1CB">Specifying a Label Style for a Bucket</a>.)
                     </p>
                     <div class="figure" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABDIBEA">
                        <p class="titleinfigure">Figure 2-13 Thematic Mapping: Advanced Style and Theme Relationship</p><img src="img/thematic_mapping.gif" alt="Description of Figure 2-13 follows" title="Description of Figure 2-13 follows" longdesc="img_text/thematic_mapping.html"><br><a href="img_text/thematic_mapping.html">Description of "Figure 2-13 Thematic Mapping: Advanced Style and Theme Relationship"</a></div>
                     <!-- class="figure" -->
                     <p>In addition to the individual range-based buckets shown in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABDIBEA">Figure 2-13</a>, the map visualizer supports other bucket styles, as explained in <a href="xml-formats-map-visualizer.html#GUID-85FE8BC7-DA9E-4264-8045-D8B3C54050AF">Bucket Styles</a>. You can also use more than one attribute column for thematic mapping, such as when drawing pie charts.
                     </p>
                     <p>The rest of this section presents additional examples of thematic mapping.</p>
                     <p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007769">Example 2-41</a> is the XML definition for an <code class="codeph">Earthquakes</code> theme.
                     </p>
                     <div class="infoboxnote" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__GUID-9976376C-01B9-4A97-8CC5-3C18E8F606B5">
                        <p class="notep1">Note:</p>
                        <p>The <code class="codeph">label</code> <a id="d7682e6514" class="indexterm-anchor"></a>attribute value (for example, <code class="codeph">label="less than 4"</code>) is not displayed on the map, but is used only in a label that is compiled for an advanced style.
                        </p>
                        <p>The <code class="codeph">seq</code> <a id="d7682e6525" class="indexterm-anchor"></a>attribute value (for example, <code class="codeph">seq="0"</code>) is ignored by the map visualizer, which determines sequence only by the order in which elements appear in a definition.
                        </p>
                     </div>
                     <p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007840">Example 2-42</a> used the <code class="codeph">&lt;VariableMarkerStyle&gt;</code> tag. The following examples use the <code class="codeph">&lt;ColorSchemeStyle&gt;</code> tag in creating thematic maps of census blocks in California. <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008144">Example 2-43</a> illustrates the use of a graduated color scale for a thematic mapping of population density. <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008145">Example 2-44</a> is a thematic mapping of average household income using a graduated color scale. <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008146">Example 2-45</a> is also a thematic mapping of average household income, but it uses a specific color style for each income range rather a graduated scale.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">m.esso gasstation</code>, <code class="codeph">m.texaco gasstation</code>, and the other style names have a space between the words in their names.
                           </p>
                        </li>
                        <li>
                           <p>The names are not case-sensitive. Therefore, be sure not to use case as a way of differentiating names. For example, <code class="codeph">m.esso gasstation</code> and <code class="codeph">M.ESSO GASSTATION</code> are considered the same name.
                           </p>
                        </li>
                        <li>
                           <p>A default collection bucket can be specified by using <code class="codeph">#DEFAULT#</code> as its value. This bucket is used for any column values (gas station names) that are not specified in the other buckets.
                           </p>
                        </li>
                     </ul>
                     <p>A theme (<code class="codeph">theme_gasstation</code>) is then defined that specifies the column (MERK) in the table that contains company names. The styling rules of the theme are shown in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008631">Example 2-47</a>.
                     </p>
                     <div class="tblformal" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABFBACD">
                        <p class="titleintable">Table 2-2 Table Used with Gasoline Stations Theme</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Table Used with Gasoline Stations Theme" summary="Table Used with Gasoline Stations Theme" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="16%" id="d7682e6588">Column</th>
                                 <th align="left" valign="bottom" width="84%" id="d7682e6591">Data Type</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6596" headers="d7682e6588 ">
                                    <p>FID</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6596 d7682e6591 ">
                                    <p>NOT NULL NUMBER</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6603" headers="d7682e6588 ">
                                    <p>ID</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6603 d7682e6591 ">
                                    <p>NUMBER</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6610" headers="d7682e6588 ">
                                    <p>NAAM</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6610 d7682e6591 ">
                                    <p>VARCHAR2(31)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6617" headers="d7682e6588 ">
                                    <p>STRAAT_</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6617 d7682e6591 ">
                                    <p>VARCHAR2(30)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6624" headers="d7682e6588 ">
                                    <p>NR</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6624 d7682e6591 ">
                                    <p>NUMBER</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6631" headers="d7682e6588 ">
                                    <p>TV</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6631 d7682e6591 ">
                                    <p>VARCHAR2(1)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6638" headers="d7682e6588 ">
                                    <p>AAND</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6638 d7682e6591 ">
                                    <p>VARCHAR2(2)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6645" headers="d7682e6588 ">
                                    <p>PCODE</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6645 d7682e6591 ">
                                    <p>VARCHAR2(6)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6652" headers="d7682e6588 ">
                                    <p>PLAATS</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6652 d7682e6591 ">
                                    <p>VARCHAR2(10)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6659" headers="d7682e6588 ">
                                    <p>GEOM</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6659 d7682e6591 ">
                                    <p>SDO_GEOMETRY</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d7682e6666" headers="d7682e6588 ">
                                    <p>MERK</p>
                                 </td>
                                 <td align="left" valign="top" width="84%" headers="d7682e6666 d7682e6591 ">
                                    <p>VARCHAR2(40)</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>In this table, the GEOM column contains spatial geometries, and the MERK column contains company names (<code class="codeph">Shell</code>, <code class="codeph">Esso</code>, and so on).
                     </p>
                     <p>The styling rules for the <code class="codeph">theme_gasstation</code> theme specify that the marker (style <code class="codeph">v.gasstations</code>) at a location specified by the content of the GEOM column is determined by the value of the MERK column for that row. The style <code class="codeph">v.gasstations</code> (see <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008592">Example 2-46</a>) specifies that if the column value is <code class="codeph">Shell</code>, use the style <code class="codeph">m.shell gasstation</code>; if the column value is <code class="codeph">Esso</code>, use the style <code class="codeph">m.esso gasstation</code>; and so on, including if the column value is any one of <code class="codeph">Avia</code>, <code class="codeph">Benzinex</code>, <code class="codeph">Q8</code>, <code class="codeph">Total</code>, and <code class="codeph">Witte Pomp</code>, use the style <code class="codeph">m.generic gasstation;</code> and if the column value is none of the preceding, use the style <code class="codeph">m.default gasstation</code>.
                     </p>
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007769">
                        <p class="titleinexample">Example 2-41 XML Definition of Styling Rules for an Earthquakes Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt; 
&lt;styling_rules theme_type="nature"&gt; 
  &lt;rule column="RICHTER_SCALE"&gt; 
    &lt;features style="v.earthquakes"&gt; 
    &lt;/features&gt; 
  &lt;/rule&gt; 
&lt;/styling_rules&gt;
</pre><p>The theme in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007769">Example 2-41</a> has only one rule. The <code class="codeph">&lt;rule&gt;</code> element includes an attribute named <code class="codeph">column</code> that does not appear in the <code class="codeph">Airport</code> theme in <a href="map-visualization-concepts.html#GUID-1A5A976B-8E3F-42DD-AB10-A35ED02385DD__BABEBFDE">Example 2-6</a>. The <code class="codeph">column</code> attribute specifies one or more columns (comma-delimited) that provide the attribute values needed for thematic mapping. The style specified for the <code class="codeph">&lt;features&gt;</code> element is named <code class="codeph">v.earthquakes</code>, and it is an advanced style.
                        </p>
                        <p>Another part of the definition of the <code class="codeph">Earthquakes</code> theme specifies the table that contains the data to be rendered. This table must contain a column named RICHTER_SCALE in addition to a column (of type SDO_GEOMETRY) for the spatial data. (The table and the column of type SDO_GEOMETRY must be identified in the BASE_TABLE and GEOMETRY_COLUMN columns, respectively, of the USER_SDO_THEMES view, which is described in <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a>.) The RICHTER_SCALE column must be of type NUMBER. To understand why, look at the advanced style definition in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007840">Example 2-42</a>. 
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1007840">
                        <p class="titleinexample">Example 2-42 Advanced Style Definition for an Earthquakes Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" ?&gt; 
&lt;AdvancedStyle&gt; 
  &lt;VariableMarkerStyle basemarker="m.circle" startsize="7" increment="4"&gt; 
     &lt;Buckets&gt; 
          &lt;RangedBucket seq="0"  label="less than 4"  high="4"/&gt; 
          &lt;RangedBucket seq="1"  label="4 - 5" low="4" high="5"/&gt; 
          &lt;RangedBucket seq="2"  label="5 - 6" low="5" high="6"/&gt; 
          &lt;RangedBucket seq="3"  label="6 - 7" low="6" high="7"/&gt; 
          &lt;RangedBucket seq="4"  label="7 and up" low="7"/&gt; 
      &lt;/Buckets&gt; 
  &lt;/VariableMarkerStyle&gt; 
&lt;/AdvancedStyle&gt; 
</pre><p>This style specifies that the marker named <code class="codeph">m.circle</code> is used to indicate the location of an earthquake. The size of the marker to be rendered for an earthquake depends on the numeric value of the RICHTER_SCALE column for that row. In this example there are five buckets, each covering a predetermined range of values. For example, if an earthquake is of magnitude 5.7 on the Richter scale, the marker size will be 15 pixels (7 + 4 + 4), because the value 5.7 falls in the third bucket (5 - 6) and the starting marker size is 7 pixels (<code class="codeph">startsize="7"</code>) with an increment of 4 for each range (<code class="codeph">increment="4"</code>).
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008144">
                        <p class="titleinexample">Example 2-43 Mapping Population Density Using a Graduated Color Scheme</p><pre class="oac_no_warn" dir="ltr"># ca pop density usbg_hhinfo 
&lt;?xml version="1.0" standalone="yes"?&gt; 
&lt;styling_rules theme_type="political"&gt; 
&lt;rule column="densitycy"&gt; 
   &lt;features style="v.CA Pop density"&gt; 
   &lt;/features&gt; 
 &lt;/rule&gt; 
&lt;/styling_rules&gt; 
</pre><p>The table named USBG_HHINFO includes a column named DENSITYCY (used in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008144">Example 2-43</a>). The definition of the style (<code class="codeph">v.CA Pop density</code>) that corresponds to this population density theme is as follows:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" ?&gt; 
&lt;AdvancedStyle&gt; 
  &lt;ColorSchemeStyle basecolor="#ffff00" strokecolor="#00aaaa"&gt; 
     &lt;Buckets low="0.0" high="20000.0" nbuckets="10"/&gt; 
  &lt;/ColorSchemeStyle&gt; 
&lt;/AdvancedStyle&gt; 
</pre><p>The base color (<code class="codeph">basecolor</code>) and the stroke color (<code class="codeph">strokecolor</code>) are 24-bit RGB (red-green-blue) values specified using a hexadecimal notation. The base color value is used for the first bucket. The color value for each subsequent bucket is obtained by first converting the base color from the RGB to the HSB (hue-saturation-brightness) model and then reducing the brightness by a fixed increment for each bucket. Thus, the first bucket is the brightest and the last is the darkest. 
                        </p>
                        <p>As in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008144">Example 2-43</a>, <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008145">Example 2-44</a> illustrates the use of a base color and a graduated color scheme, this time to show household income. 
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008145">
                        <p class="titleinexample">Example 2-44 Mapping Average Household Income Using a Graduated Color Scheme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt; 
&lt;!-- # ca hh income theme  table = usbg_hhinfo  --&gt; 
&lt;styling_rules&gt; 
&lt;rule column="avghhicy"&gt; 
   &lt;features style="v.ca income"&gt; 
   &lt;/features&gt; 
 &lt;/rule&gt; 
&lt;/styling_rules&gt; 
</pre><p>The table named USBG_HHINFO includes a column named AVGHHICY (used in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008145">Example 2-44</a> and <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008146">Example 2-45</a>). The definition of the style (<code class="codeph">v.ca income</code>) that corresponds to this average household income theme is as follows: 
                        </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" ?&gt; 
&lt;AdvancedStyle&gt; 
  &lt;ColorSchemeStyle basecolor="#ffff00" strokecolor="#00aaaa"&gt; 
  &lt;!-- # income range with a color gradient --&gt; 
     &lt;Buckets&gt; 
          &lt;RangedBucket seq="0" label="less than 10k"  high="10000"/&gt; 
          &lt;RangedBucket seq="1" label="10-15k" low="10000" high="15000"/&gt; 
          &lt;RangedBucket seq="2" label="15-20k" low="15000" high="20000"/&gt; 
          &lt;RangedBucket seq="3" label="20-25k" low="20000" high="25000"/&gt; 
          &lt;RangedBucket seq="4" label="25-35k" low="25000" high="35000"/&gt; 
          &lt;RangedBucket seq="5" label="35-50k" low="35000" high="50000"/&gt; 
          &lt;RangedBucket seq="6" label="50-75k" low="50000" high="75000"/&gt; 
          &lt;RangedBucket seq="7" label="75-100k" low="75000" high="100000"/&gt; 
          &lt;RangedBucket seq="8" label="100-125k" low="100000" high="125000"/&gt;
          &lt;RangedBucket seq="9" label="125-150k" low="125000" high="150000"/&gt;
          &lt;RangedBucket seq="10" label="150-250k" low="150000" high="250000"/&gt;
          &lt;RangedBucket seq="11" label="250-500k" low="250000" high="500000"/&gt;
          &lt;RangedBucket seq="12" label="500k and up"   low="500000"/&gt;
      &lt;/Buckets&gt; 
  &lt;/ColorSchemeStyle&gt; 
&lt;/AdvancedStyle&gt; 
</pre><p>For individual range-based buckets, the lower-bound value is inclusive, while the upper-bound value is exclusive (except for the range that has values greater than any value in the other ranges; its upper-bound value is inclusive). No range is allowed to have a range of values that overlaps values in other ranges.</p>
                        <p><a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008146">Example 2-45</a> uses specific color styles for each average household income range.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008146">
                        <p class="titleinexample">Example 2-45 Mapping Average Household Income Using a Color for Each Income Range</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt; 
&lt;!-- # ca hh income theme  table = usbg_hhinfo  --&gt; 
&lt;styling_rules&gt; 
&lt;rule column="avghhicy"&gt; 
   &lt;features style="v.ca income 2"&gt; 
   &lt;/features&gt; 
 &lt;/rule&gt; 
&lt;/styling_rules&gt; 
</pre><p>The definition of the <code class="codeph">v.ca income 2</code> style is as follows:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" ?&gt;
&lt;AdvancedStyle&gt;
 &lt;BucketStyle&gt;
  &lt;Buckets&gt;
   &lt;!-- # income ranges with specific colors --&gt;
   &lt;RangedBucket seq="0" label="less than 10k"  high="10000" style="c.rb13_1"/&gt;
   &lt;RangedBucket seq="1" label="10-15k" low="10000" high="15000" style="c.rb13_2"/&gt;
   &lt;RangedBucket seq="2" label="15-20k" low="15000" high="20000" style="c.rb13_3"/&gt;
   &lt;RangedBucket seq="3" label="20-25k" low="20000" high="25000" style="c.rb13_4"/&gt;
   &lt;RangedBucket seq="4" label="25-35k" low="25000" high="35000" style="c.rb13_5"/&gt;
   &lt;RangedBucket seq="5" label="35-50k" low="35000" high="50000" style="c.rb13_6"/&gt;
   &lt;RangedBucket seq="6" label="50-75k" low="50000" high="75000" style="c.rb13_7"/&gt;
   &lt;RangedBucket seq="7" label="75-100k" low="75000" high="100000" style="c.rb13_8"/&gt;
   &lt;RangedBucket seq="8" label="100-125k" low="100000" high="125000" style="c.rb13_9"/&gt;
   &lt;RangedBucket seq="9" label="125-150k" low="125000" high="150000" style="c.rb13_10"/&gt;
   &lt;RangedBucket seq="10" label="150-250k" low="150000" high="250000" style="c.rb13_11"/&gt;
   &lt;RangedBucket seq="11" label="250-350k" low="250000" high="350000" style="c.rb13_12"/&gt;
   &lt;RangedBucket seq="12" label="350k and up"   low="350000" style="c.rb13_13"/&gt;
  &lt;/Buckets&gt;
 &lt;/BucketStyle&gt;
&lt;/AdvancedStyle&gt;
</pre><p>Each <code class="codeph">&lt;RangedBucket&gt;</code> definition has a specified style.
                        </p>
                        <p>The following examples create an advanced style to identify gasoline stations operated by different oil companies, and a theme that uses the style. A <code class="codeph">&lt;CollectionBucket&gt;</code> tag is used to associate a column value (<code class="codeph">Shell</code>; <code class="codeph">Esso</code>; <code class="codeph">Texaco</code>; <code class="codeph">BP</code>; any of <code class="codeph">Avia</code>, <code class="codeph">Benzinex</code>, <code class="codeph">Q8</code>, <code class="codeph">Total</code>, <code class="codeph">Witte Pomp</code>; and all others for a default category) with a style appropriate for that company's stations, as shown in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008592">Example 2-46</a>.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008592">
                        <p class="titleinexample">Example 2-46 Advanced Style Definition for Gasoline Stations Theme</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" ?&gt; 
&lt;AdvancedStyle&gt; 
&lt;BucketStyle&gt; 
 &lt;Buckets&gt; 
  &lt;CollectionBucket seq="0" label="Shell" style="m.shell gasstation"&gt; 
   Shell 
  &lt;/CollectionBucket&gt; 
  &lt;CollectionBucket seq="1" label="Esso" style="m.esso gasstation"&gt; 
   Esso 
  &lt;/CollectionBucket&gt; 
  &lt;CollectionBucket seq="2" label="Texaco"  style="m.texaco gasstation"&gt; 
   Texaco 
 &lt;/CollectionBucket&gt; 
  &lt;CollectionBucket seq="3" label="BP"  style="m.bp gasstation"&gt; 
   BP 
  &lt;/CollectionBucket&gt; 
  &lt;CollectionBucket seq="4" label="Other"  style="m.generic gasstation"&gt; 
   Avia,Benzinex,Q8,Total,Witte Pomp 
  &lt;/CollectionBucket&gt; 
  &lt;CollectionBucket seq="5" label="DEFAULT" style="m.default gasstation"&gt;
   #DEFAULT#
  &lt;/CollectionBucket&gt;
  &lt;/Buckets&gt;
&lt;/BucketStyle&gt; 
&lt;/AdvancedStyle&gt; 
</pre><p>Notes on <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008592">Example 2-46</a>:
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-387C98FD-359C-4646-9802-6E69B79A0754__I1008631">
                        <p class="titleinexample">Example 2-47 Styling Rules of Theme Definition for Gasoline Stations</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt; 
&lt;styling_rules&gt; 
  &lt;rule column="merk"&gt; 
    &lt;features style="v.gasstations"&gt; 
    &lt;/features&gt; 
    &lt;label column="merk" style="t.SansSerif red 10"&gt; 
      1 
    &lt;/label&gt; 
  &lt;/rule&gt; 
&lt;/styling_rules&gt; 
</pre><p>This theme depends on a table named NED_GASSTATIONS, which has the columns shown in <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754__BABFBACD" title="Table Used with Gasoline Stations Theme">Table 2-2</a> (with column names reflecting the fact that the developer's language is Dutch).
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C">Thematic Mapping Using External Attribute Data</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV9574"></a><a id="JIMPV9573"></a><div class="props_rev_3"><a id="GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C" name="GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C"></a><h5 id="JIMPV-GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C" class="sect5"><span class="enumeration_section">2.3.12.1 </span>Thematic Mapping Using External Attribute Data
                     </h5>
                     <div>
                        <p>Previous discussion of thematic mapping has assumed that both the attribute data (such as population of sales totals) and the geospatial data (geometry objects representing boundaries, locations, and so on) are in the same database. However, the attribute data can come from a source outside the current database; for example, the attribute data might reflect aggregated results of a business intelligence (BI) query performed on a different database, or the attribute data might come from a comma-delimited list of sales values exported from a spreadsheet. Such attribute data, from outside the database that contains the geospatial data, is called <span class="bold">external attribute data</span>. 
                        </p>
                        <p>To use external attribute data with the map visualizer, you must use the <span class="bold">nonspatial data provider</span> plug-in mechanism, in which a custom data provider is associated with a map visualizer theme (predefined or dynamic) in the same map request. When the map visualizer processes the theme, it calls the nonspatial data provider to join nonspatial attribute data with the spatial data that has been fetched for the theme.
                        </p>
                        <p>To use a nonspatial data provider, follow these steps:</p>
                        <ol>
                           <li>
                              <p>Implement your Java nonspatial data provider by implementing the map visualizer defined interface <code class="codeph">oracle.mapviewer.share.ext.NSDataProvider</code>.
                              </p>
                           </li>
                           <li>
                              <p>Register the nonspatial data provider implementation with the map visualizer (in its configuration file). There you can also specify a set of global parameters that your implementation may depend on. Each custom data provider implementation class must have a unique ID that you assign.</p>
                           </li>
                           <li>
                              <p>Place a library containing the nonspatial data provider implementation classes in the library path of the map visualizer, such as its <code class="codeph">web/WEB-INF/lib</code> directory.
                              </p>
                           </li>
                           <li>
                              <p>Include the nonspatial data provider implementation in a map request by invoking the following method on the map visualizer Java client API class MapViewer:</p><pre class="oac_no_warn" dir="ltr">addNSDataProvider(java.lang.String providerId,
                  java.lang.String forTheme,
                  java.lang.String spatialKeyColumn,
                  java.lang.String customRenderingStyle,
                  java.util.Properties params,
                  long timeout)
</pre><p>For information about the <code class="codeph">addNSDataProvider</code> parameters, see the Javadoc reference information for the map visualizer, available at a URL in the form <code class="codeph">http://</code><span class="italic"><code class="codeph">host:port</code></span><code class="codeph">/mapviewer/mapclient</code>, where <span class="italic">host</span> and <span class="italic">port</span> indicate where Oracle Fusion Middleware listens for incoming requests. For example: <code class="codeph">http://www.mycorp.com:8888/mapviewer/mapclient</code></p>
                           </li>
                        </ol>
                        <p><a href="map-visualization-concepts.html#GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C__BABBFDEI">Example 2-48</a> shows a simple nonspatial data provider implementation. This implementation is also supplied with the map visualizer as a default nonspatial data provider.
                        </p>
                        <div class="example" id="GUID-42CCD204-94AB-434B-A1B4-66F3C1599D4C__BABBFDEI">
                           <p class="titleinexample">Example 2-48 Nonspatial (External) Data Provider Implementation</p><pre class="oac_no_warn" dir="ltr">import java.io.BufferedReader;
import java.io.FileReader;
import java.util.Properties;
import java.util.Vector;
 
import oracle.mapviewer.share.ext.NSDataSet;
import oracle.mapviewer.share.ext.NSDataProvider;
import oracle.mapviewer.share.ext.NSRow;
import oracle.lbs.util.Logger;
 
import oracle.mapviewer.share.Field;
 
/**
 * A simple implementation of the NSDataProvider interface. When invoked, it supplies tabular attribute data to the map visualizer out
 * of a file or URL. The data in the file must be orgazined as following: &lt;br&gt;
 * &lt;UL&gt;
 *   &lt;LI&gt; The first line contain a single character which is the delimiter
 *        between columns in the subsequent lines.
 *   &lt;LI&gt; Each line after the first in the file represent one data row
 *   &lt;LI&gt; Each field in the row must be separated by the delimiter char only
 *   &lt;LI&gt; The first field in each line must be a string (key) that serves as the
 *         key; the rest of the fields must be numeric values
 * &lt;/UL&gt;
 *
 * When incorporating this data provider in a map request, one of the following
 * two parameters must be specified:
 * &lt;UL&gt;
 *   &lt;LI&gt; file  if the custom data is stored in a local file; this parameter
 *        specifies the full path to that file
 *   &lt;LI&gt; url  if the custom data can be accessed from a web; this parameter
 *        specifeis the full URL to the data file.
 * &lt;/UL&gt;
 *
 *
 */
public class NSDataProviderDefault implements NSDataProvider
{
  private static Logger log = Logger.getLogger("oracle.sdovis.nsdpDefault");
 
  public boolean init(Properties params)
  {
    return true;
  }
 
  public NSDataSet buildDataSet(Properties params)
  {
    String file = params.getProperty("file");
    if(file!=null)
      return readFromFile(file);
 
    String url = params.getProperty("url");
    if(url!=null)
      return readFromUrl(url);
 
    log.error("Must supply either file or url for default NS data provider.");
    return null;
  }
 
  public void destroy()
  {
  }
 
  protected NSDataSet readFromFile(String file)
  {
    BufferedReader in = null;
    try{
      in   = new BufferedReader(new FileReader(file));
      String line = in.readLine();
      String delimiter = line.substring(0,1);
 
      Vector rows = new Vector();
 
      while ( (line=in.readLine()) != null)
      {
        NSRow row = buildRow(line, delimiter);
        if(row!=null)
          rows.add(row);
      }
 
      NSDataSet res = new NSDataSet(rows);
      return res;
    }catch(Exception ex)
    {
      log.error(ex);
      return null;
    } finally
    {
      try{
        if(in!=null)
          in.close();
      }catch(Exception e){}
    }
  }
 
  protected NSDataSet readFromUrl(String url)
  {
    log.error("url not supported yet.");
    return null;
  }
 
  protected NSRow buildRow(String line, String delimiter)
  {
    if(line==null || line.length()&lt;1)
      return null;
 
    String[] fields = line.split(delimiter);
    if(fields==null || fields.length==0)
      return null;
 
    Field[] row = new Field[fields.length];
 
    Field a = new Field(fields[0]);
    a.setKey(true);
 
    row[0] = a;
 
    for (int i = 1; i &lt; fields.length; i++)
    {
      try{
        double d = Double.parseDouble(fields[i]);
        a = new Field(d);
        row[i] = a;
      }catch(Exception e)
      {
        log.warn("invalid row field (key="+fields[0]+")");
        return null;
      }
    }
 
    return new NSRow(row);
 
  }
}</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-387C98FD-359C-4646-9802-6E69B79A0754">Thematic Mapping</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="JIMPV9575"></a><div class="props_rev_3"><a id="GUID-F07E0F57-702A-4C14-923D-52BAEE467762" name="GUID-F07E0F57-702A-4C14-923D-52BAEE467762"></a><h4 id="JIMPV-GUID-F07E0F57-702A-4C14-923D-52BAEE467762" class="sect4"><span class="enumeration_section">2.3.13 </span>Attributes Affecting Theme Appearance
                  </h4>
                  <div>
                     <p>Some attributes of the <code class="codeph">&lt;theme&gt;</code> element affect only the appearance of the map display, rather than determining the data to be associated with the theme. These appearance-related attributes control whether and how the theme is processed and rendered when a map is generated. Examples include the following attributes:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">min_scale</code> and <code class="codeph">max_scale</code> determine whether or not a theme is displayed at various map scales (levels of resolution). For example, if you are displaying a map of streets, there are certain map scales at which the streets would become too dense for a usable display, such as when viewing an entire state or province. In this case, you should create a theme for streets, and specify minimum and maximum scale values to ensure that individual streets affected by the theme are displayed when the scale is appropriate and otherwise are not displayed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">labels_always_on</code> determines whether or not labels for the theme will be displayed if they would overlap another label. By choosing appropriate <code class="codeph">labels_always_on</code> values and choosing an appropriate order of themes to be processed within a map request, you can control how cluttered the labels might become and which labels have priority in getting displayed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">fast_unpickle</code> determines the unpickling (unstreaming) method to be used, which can involve a trade-off between performance and precision in the display.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">fixed_svglabel</code>, <code class="codeph">visible_in_svg</code>, <code class="codeph">selectable_in_svg</code>, <code class="codeph">onclick</code>, <code class="codeph">onmousemove</code>, <code class="codeph">onmouseover</code>, and <code class="codeph">onmouseout</code> affect the appearance of SVG maps.
                           </p>
                        </li>
                     </ul>
                     <p>To specify any appearance-related attributes, use the <code class="codeph">&lt;theme&gt;</code> element (described in [31.2.20]) with the XML API.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DABE41E7-BF70-4892-8842-99D947B6A705" title="Theme is perhaps the most important concept in the map visualizer. A theme is a visual representation of a particular data layer.">Themes</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9614"></a><a id="JIMPV9613"></a><div class="props_rev_3"><a id="GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" name="GUID-B39C38B9-8852-4085-A4B0-7454557A5C95"></a><h3 id="JIMPV-GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" class="sect3"><span class="enumeration_section">2.4 </span>Maps
               </h3>
               <div>
                  <p>A map can consist of a combination of elements and attributes.</p>
                  <p>These elements and attributres can include the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Background image</p>
                     </li>
                     <li>
                        <p>Title</p>
                     </li>
                     <li>
                        <p>Legend</p>
                     </li>
                     <li>
                        <p>Query window</p>
                     </li>
                     <li>
                        <p>Footnote (such as for a copyright notice)</p>
                     </li>
                     <li>
                        <p>Base map</p>
                     </li>
                     <li>
                        <p>Predefined themes (in addition to any in the base map)</p>
                     </li>
                     <li>
                        <p>JDBC themes (with dynamic queries)</p>
                     </li>
                     <li>
                        <p>Dynamically defined (temporary) styles</p>
                     </li>
                  </ul>
                  <p>These elements and attributes, when specified in a map request, define the content and appearance of the generated map. <a href="map-visualization-servers.html#GUID-0D2CF483-95C0-45D0-B4E8-5A4578741A63" title="The map visualizer, as a set of Java Enterprise Edition packages, contains a collection of servers to provide mapping services.">Map Visualization Servers</a> contains detailed information about the available elements and attributes for a map request.
                  </p>
                  <p><a id="d7682e7210" class="indexterm-anchor"></a>A map can have a base map and a stack of themes rendered on top of each other in a window. <a id="d7682e7213" class="indexterm-anchor"></a><a id="d7682e7215" class="indexterm-anchor"></a><a id="d7682e7217" class="indexterm-anchor"></a>A map has an associated coordinate system that all themes in the map must share. For example, if the map coordinate system is 8307 (for <span class="italic">Longitude / Latitude (WGS 84)</span>, the most common system used for GPS devices), all themes in the map must have geometries defined using that coordinate system.
                  </p>
                  <p><a id="d7682e7224" class="indexterm-anchor"></a><a id="d7682e7228" class="indexterm-anchor"></a><a id="d7682e7230" class="indexterm-anchor"></a><a id="d7682e7232" class="indexterm-anchor"></a>You can add themes to a map by specifying a base map name or by using the programming interface to add themes. The order in which the themes are added determines the order in which they are rendered, with the last specified theme on top, so be sure you know which themes you want in the background and foreground.
                  </p>
                  <p>All base map names and definitions for a database user are stored in that user's USER_SDO_MAPS view, which is described in <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.">Map Visualizer Metadata Views</a> and <a href="map-visualization-concepts.html#GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC">xxx_SDO_MAPS Views</a>. <a id="d7682e7248" class="indexterm-anchor"></a>The DEFINITION column in the USER_SDO_MAPS view contains an XML definition of a base map.
                  </p>
                  <p><a id="d7682e7254" class="indexterm-anchor"></a><a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">Example 2-49</a> shows a base map definition.
                  </p>
                  <div class="example" id="GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">
                     <p class="titleinexample">Example 2-49 XML Definition of a Base Map</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" ?&gt;
&lt;map_definition&gt;
&lt;theme name="theme_us_states"    min_scale="10"  max_scale="0"/&gt;
&lt;theme name="theme_us_parks"     min_scale="5"   max_scale="0"/&gt;
&lt;theme name="theme_us_highways"  min_scale="5"   max_scale="0"/&gt;
&lt;theme name="theme_us_streets"   min_scale="0.05" max_scale="0"/&gt;
&lt;/map_definition&gt;
</pre><p>Each theme in a base map can be associated with a visible scale range within which it is displayed. In <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">Example 2-49</a>, the theme named <code class="codeph">theme_us_streets</code> is not displayed unless the map request is for a map scale of 0.05 or less and greater than 0 (in this case, a scale showing a great deal of detail). If the <code class="codeph">min_scale</code> and <code class="codeph">max_scale</code> attributes are not specified, the theme is displayed whenever the base map is displayed. (For more information about map scale, see <a href="map-visualization-concepts.html#GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA">Map Size and Scale</a>.)
                     </p>
                     <p>The display order of themes in a base map is the same as their order in the base map definition. In <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">Example 2-49</a>, the <code class="codeph">theme_us_states</code> theme is rendered first, then <code class="codeph">theme_us_parks</code>, then <code class="codeph">theme_us_highways</code>, and finally (if the map scale is within all specified ranges) <code class="codeph">theme_us_streets</code>.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA">Map Size and Scale</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D">Map Legend</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9615"></a><div class="props_rev_3"><a id="GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA" name="GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA"></a><h4 id="JIMPV-GUID-815266CF-CBB4-4CA8-B8E8-18353B89BFCA" class="sect4"><span class="enumeration_section">2.4.1 </span>Map Size and Scale
                  </h4>
                  <div>
                     <p>Map size is the height of the map in units of the map data space. For example, if the map data is in WGS 84 geographic coordinates, the map center is (-120.5, 36.5), and the size is 2, then the height of the map is 2 decimal degrees, the lower Y (latitude) value is 35.5 degrees, and the upper Y value is 37.5 decimal degrees.</p>
                     <p>Map scale is expressed as units in the user's data space that are represented by 1 inch on the screen or device. Map scale for the map visualizer is actually the denominator value in a popular method of representing map scale as 1/<span class="italic">n</span>, where:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>1, the numerator, is 1 unit (1 inch for the map visualizer) on the displayed map.</p>
                        </li>
                        <li>
                           <p><span class="italic">n</span>, the denominator, is the number of units of measurement (for example, decimal degrees, meters, or miles) represented by 1 unit (1 inch for the map visualizer) on the displayed map.
                           </p>
                        </li>
                     </ul>
                     <p>For example:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If 1 inch on a computer display represents 0.5 decimal degree of user data, the fraction is 1/0.5. The decimal value of the fraction is 2.0, but the scale value for the map visualizer is 0.5.</p>
                        </li>
                        <li>
                           <p>If 1 inch on a computer display represents 2 miles of user data, the fraction is 1/2. The decimal value of the fraction is 0.5, but the scale value for the map visualizer is 2.</p>
                        </li>
                        <li>
                           <p>If 1 inch on a computer display represents 10 miles of user data, the fraction is 1/10. The decimal value of the fraction is 0.1, but the scale value for the map visualizer is 10.</p>
                        </li>
                     </ul>
                     <p><a id="d7682e7386" class="indexterm-anchor"></a><a id="d7682e7388" class="indexterm-anchor"></a>The <code class="codeph">min_scale</code> and <code class="codeph">max_scale</code> attributes in a <code class="codeph">&lt;theme&gt;</code> element describe the visible scale range of a theme. These attributes control whether or not a theme is displayed, depending on the current map scale. The default scale value for <code class="codeph">min_scale</code> is positive infinity, and the default value for <code class="codeph">max_scale</code> is negative infinity (or in other words, by default display the theme for all map scales, if possible given the display characteristics).
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">min_scale</code> is the value to which the display must be zoomed in for the theme to be displayed. For example, if parks have a <code class="codeph">min_scale</code> value of 5 and if the current map scale value is 5 or less but greater than the <code class="codeph">max_scale</code> value, parks will be included in the display; however, if the display is zoomed out so that the map scale value is greater than 5, parks will not be included in the display.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">max_scale</code> is the value beyond which the display must be zoomed in for the theme not to be displayed. For example, if counties have a <code class="codeph">max_scale</code> value of 3 and if the current map scale value is 3 or less, counties will not be included in the display; however, if the display is zoomed out so that the map scale value is greater than 3, counties will be included in the display.
                           </p>
                        </li>
                     </ul>
                     <p>A high <code class="codeph">min_scale</code> value is associated with less map detail and a smaller scale in cartographic terms, while a high <code class="codeph">max_scale</code> value is associated with greater map detail and a larger scale in cartographic terms. (Note that the map visualizer meaning of map scale is different from the popular meaning of cartographic map scale.) The <code class="codeph">min_scale</code> value for a theme should be larger than the <code class="codeph">max_scale</code> value. <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95__I1008430">Example 2-49</a> in <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" title="A map can consist of a combination of elements and attributes.">Maps</a> includes <code class="codeph">min_scale</code> and <code class="codeph">max_scale</code> values.
                     </p>
                     <p><a id="d7682e7457" class="indexterm-anchor"></a><a id="d7682e7459" class="indexterm-anchor"></a>You also assign scale values for theme labels, to enable the showing or hiding of labels with values different from the base theme scales, by using the theme label scale parameters <code class="codeph">label_min_scale</code> and <code class="codeph">label_max_scale</code>. These parameters are similar to the <code class="codeph">min_scale</code> and <code class="codeph">max_scale</code> parameters, but the labels are shown if the map scale is in the visible range defined by <code class="codeph">label_min_scale</code> and <code class="codeph">label_max_scale</code>. (The label scale values are ignored if the theme is not in the visible scale range defined by <code class="codeph">min_scale</code> and <code class="codeph">max_scale</code>.) The following is a theme definition with label scale values; the labels will be shown when the map scale is between 5 and 2, but the theme features will be shown when the map scale is between 10 and 0:
                     </p><pre class="oac_no_warn" dir="ltr">&lt;theme name="theme_us_states" min_scale="10" max_scale="0" 
     <span class="bold">label_min_scale="5" label_max_scale="2"</span>/&gt;
</pre><p>To determine the current map scale for a map returned by the map visualizer, first find the map size, namely the height (vertical span) of the map in terms of the coordinate system associated with the map data. For example, assume that a map with a height of 10 (miles, meters, decimal degrees, or whatever unit of measurement is associated with the data) is requested, and that the map is drawn on a device with a size of 500 by 350 pixels, where 350 is the height. The map visualizer assumes a typical screen resolution of 96 dpi. Because 96 pixels equals 1 inch, the height of the returned map is 3.646 inches (350/96 = 3.646). In this example, the size of the map is 10, and therefore the map scale is approximately 2.743 (10/3.646 = 2.743).</p>
                     <p>Alternatively, you can request a map using a map scale value without specifying a unit, such as 50000 for a scale of 1:50000, by specifying the <code class="codeph">scale_mode</code> theme attribute value as <code class="codeph">ratio</code>. (If the <code class="codeph">scale_mode</code> theme attribute value is <code class="codeph">screen_inch</code>, the scale refers to a unit.) To use a scale defined without a unit, request the map specifying the center and ratio scale.
                     </p>
                     <p>To find the equivalent map visualizer screen inch scale for a ratio scale, follow these steps:</p>
                     <ol>
                        <li>
                           <p>Find the numerical fraction of a meter associated with one screen pixel. For example, if the screen resolution is 96 dpi (dots per inch), the number of meters on the screen for each screen pixel is 0.000265 (that is, 0.0254/96).</p>
                        </li>
                        <li>
                           <p>Find the map scale for one screen pixel (the <code class="codeph">mapdotScale</code> value), as follows:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>For projected data (meters), multiply the result of step 1 by the ratio scale. For example, if the ratio scale is 50000 (50 thousand) and the screen resolution is 96 dpi, the result is 13.25 meters for each pixel (50000 * 0.000265).</p>
                              </li>
                              <li>
                                 <p>For geodetic data (degrees), multiply the result of step 1 by the number of meters (on the surface of the Earth) for each degree. (This number will depend on the coordinate system associated with the data.) For example, if one degree = 111195 meters and if the screen resolution is 96 dpi, the result is 29.466675 meters for each pixel (111195 * 0.000265).</p>
                              </li>
                              <li>
                                 <p>For data using any other unit, use the approach for projected data using meters.</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Because the map visualizer scale is per screen inch instead of per screen pixel, multiply the result of step 2 by the dpi value. For example, if the result of step 2 is 13.25 meters at 96 dpi, the number of meters for each screen inch is 1272 (13.25 * 96).</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" title="A map can consist of a combination of elements and attributes.">Maps</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9618"></a><a id="JIMPV9617"></a><a id="JIMPV9619"></a><a id="JIMPV9620"></a><a id="JIMPV9616"></a><div class="props_rev_3"><a id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D" name="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D"></a><h4 id="JIMPV-GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D" class="sect4"><span class="enumeration_section">2.4.2 </span>Map Legend
                  </h4>
                  <div>
                     <p>A <span class="bold">map legend</span> is an inset illustration drawn on top of the map and describing what various colors, symbols, lines, patterns, and so on represent. You have flexibility in specifying the content and appearance of the legend. You can:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Customize the background, border style, and font</p>
                        </li>
                        <li>
                           <p>Have one or more columns in the legend</p>
                        </li>
                        <li>
                           <p>Add space to separate legend entries</p>
                        </li>
                        <li>
                           <p>Indent legend entries</p>
                        </li>
                        <li>
                           <p>Use any map visualizer style, including advanced styles</p>
                        </li>
                     </ul>
                     <p><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010585">Example 2-50</a> is an excerpt from a request that includes a legend.
                     </p>
                     <div class="figure" id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010621">
                        <p class="titleinfigure">Figure 2-14 Map with Legend</p><img src="img/legend.gif" alt="Description of Figure 2-14 follows" title="Description of Figure 2-14 follows" longdesc="img_text/legend.html"><br><a href="img_text/legend.html">Description of "Figure 2-14 Map with Legend"</a></div>
                     <!-- class="figure" -->
                     <p>Notes on <a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010585">Example 2-50</a> and <a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010621">Figure 2-14</a>:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>This example shows a legend with a single column, although you can create multiple columns in a legend.</p>
                        </li>
                        <li>
                           <p>Each entry in the column definition can identify label text and whether the text is the legend title (<code class="codeph">is_title="true"</code>), a style name and associated text, or a separator (<code class="codeph">is_separator="true"</code>) for vertical blank space to be added (after the <span class="italic">cities</span> entry in this example).
                           </p>
                        </li>
                     </ul>
                     <p><a id="d7682e7638" class="indexterm-anchor"></a><a id="d7682e7642" class="indexterm-anchor"></a>As an alternative to specifying the legend content in one or more &lt;column&gt; elements, you can request an <span class="bold">automatic legend</span> based on the map request. With an automatic legend, you specify the legend header, and the map visualizer generates the legend based on the themes that have any interaction with the map area. Themes from the map request and from the base map are considered. (Some legend items might not be visible, though, such as if a theme interacts with the query window but no features of the theme are visible on the map.)
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__CIHHGAJD">Example 2-51</a> is a map request that requests an automatic legend (because the <code class="codeph">&lt;legend&gt;</code> element does not include any <code class="codeph">&lt;column&gt;</code> elements).
                     </p>
                     <p><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__CIHCEJFB">Example 2-52</a> requests an automatic legend in which the <code class="codeph">&lt;legend&gt;</code> elements specifies the themes to be used to generate the legend items. In this example, even if the map result shows more themes, the legend items are based on the <code class="codeph">THEME_COUNTIES_3397829</code> and <code class="codeph">THEME_US_AIRPORT</code> themes specified in the <code class="codeph">&lt;legend&gt;</code> element.
                     </p>
                     <p>You cannot combine an automatic legend with the use of <code class="codeph">&lt;column&gt;</code> elements. If the <code class="codeph">&lt;legend&gt;</code> element contains any <code class="codeph">&lt;column&gt;</code> elements, a column/entry legend is created.
                     </p>
                     <p>The map visualizer uses the following considerations when it builds automatic legend items:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Each legend column has a maximum of five entries (an advanced style is considered one entry).</p>
                        </li>
                        <li>
                           <p>The legend text for simple rendering styles comes from the theme description if defined, otherwise from the theme name.</p>
                        </li>
                        <li>
                           <p>If a rendering style is used in more than one theme, the style is repeated in the legend but with text related to the theme to which it applies.</p>
                        </li>
                        <li>
                           <p>Labeling styles are not repeated in the legend. The style text for labeling styles comes from the style description.</p>
                        </li>
                        <li>
                           <p>Advanced styles are not repeated in the legend.</p>
                        </li>
                     </ul>
                     <p>If you also specify a map title, note, or logo (or any combination), be sure that the legend and the other features have different positions. (Map titles, notes, and logos are explained in <a href="introduction-to-map-visualization-component.html#GUID-69148567-C00C-441A-BBA7-D42EB32879A7">Specifying Global Map Configuration Options</a>.) The default position for a legend is <code class="codeph">SOUTH_WEST</code>.
                     </p>
                     <div class="example" id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010585">
                        <p class="titleinexample">Example 2-50 Legend Included in a Map Request</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;map_request
             basemap="density_map"
             datasource = "mvdemo"
             width="640"
             height="480"
             bgcolor="#a6cae0"
             antialiase="false"
             format="PNG_STREAM"&gt;
  &lt;center size="4.2"&gt;
     &lt;geoFeature render_style="m.image134_bw"&gt;
         &lt;geometricProperty typeName="center"&gt;
             &lt;Point srsName="SDO:8307"&gt;
                 &lt;coordinates&gt;-121.2615, 37.5266&lt;/coordinates&gt;
             &lt;/Point&gt;
         &lt;/geometricProperty&gt;
     &lt;/geoFeature&gt;
  &lt;/center&gt;
 
  &lt;legend bgstyle="fill:#ffffff;fill-opacity:100;stroke:#a3a3a3" profile="MEDIUM" position="SOUTH_WEST"&gt;
          &lt;column&gt;
            &lt;entry text="Legend" is_title="true" /&gt;
            &lt;entry style="M.IMAGE134_BW" text="Center" /&gt;
            &lt;entry style="M.ALL_CITY_L2" text="Cities" /&gt;
            &lt;entry is_separator="true" /&gt;
            &lt;entry style="L.S04_ROAD_INTERSTATE" text="Interstates" /&gt;
            &lt;entry text="County population:" /&gt;
            &lt;entry style="V.COUNTY_POP_DENSITY_8" tab="1" /&gt;
          &lt;/column&gt;
  &lt;/legend&gt;
 
  &lt;!--
  &lt;themes&gt;
 
  &lt;/themes&gt;
  --&gt;
 
&lt;/map_request&gt;
</pre><p><a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010621">Figure 2-14</a> shows a map with the legend specified in <a href="map-visualization-concepts.html#GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__I1010585">Example 2-50</a>.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__CIHHGAJD">
                        <p class="titleinexample">Example 2-51 Map Request with Automatic Legend </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;map_request
             title="Automatic legend"
             datasource = "mvdemo"
             width="640"
             height="480"
             bgcolor="#a6cae0"
             antialiase="false"
             format="PNG_STREAM"&gt;
  &lt;center size="4.5"&gt;
     &lt;geoFeature &gt;
         &lt;geometricProperty typeName="center"&gt;
             &lt;Point&gt;
                 &lt;coordinates&gt;-122.2615, 37.5266&lt;/coordinates&gt;
             &lt;/Point&gt;
         &lt;/geometricProperty&gt;
     &lt;/geoFeature&gt;
  &lt;/center&gt;
 
  &lt;themes&gt;
    &lt;theme name="THEME_COUNTIES_3397829" /&gt;
    &lt;theme name="THEME_US_ROAD1" /&gt;
    &lt;theme name="THEME_US_AIRPORT" /&gt;
  &lt;/themes&gt;
 
 <span class="bold">&lt;legend bgstyle="fill:#ffffff;fill-opacity:128;stroke:#ff0000;stroke-opacity:128" profile="medium" font="Courier"&gt;</span>
<span class="bold">  &lt;/legend&gt;</span>
 
&lt;/map_request&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-862A1C47-1B2A-4F1C-9A3A-EF411D15CF7D__CIHCEJFB">
                        <p class="titleinexample">Example 2-52 Automatic Legend with Themes Specified</p><pre class="oac_no_warn" dir="ltr">&lt;map_request
             title="Legend with themes defined"
             datasource = "mvdemo"
             width="640"
             height="480"
             bgcolor="#a6cae0"
             antialiase="false"
             format="PNG_STREAM"&gt;
  &lt;center size="4.5"&gt;
     &lt;geoFeature &gt;
         &lt;geometricProperty typeName="center"&gt;
             &lt;Point&gt;
                 &lt;coordinates&gt;-122.2615, 37.5266&lt;/coordinates&gt;
             &lt;/Point&gt;
         &lt;/geometricProperty&gt;
     &lt;/geoFeature&gt;
  &lt;/center&gt;
 
  &lt;themes&gt;
    &lt;theme name="THEME_COUNTIES_3397829" /&gt;
    &lt;theme name="THEME_US_ROAD1" /&gt;
    &lt;theme name="THEME_US_AIRPORT" /&gt;
  &lt;/themes&gt;
 
 &lt;legend bgstyle="fill:#ffffff;fill-opacity:128;stroke:#ff0000;stroke-opacity:128" profile="medium" font="Courier"&gt;
 <span class="bold"> &lt;themes&gt;</span>
    <span class="bold">&lt;theme name="THEME_COUNTIES_3397829" /&gt;</span>
    <span class="bold">&lt;theme name="THEME_US_AIRPORT" /&gt;</span>
  <span class="bold">&lt;/themes&gt;</span>
 &lt;/legend&gt;
 
&lt;/map_request&gt;
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-B39C38B9-8852-4085-A4B0-7454557A5C95" title="A map can consist of a combination of elements and attributes.">Maps</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9621"></a><div class="props_rev_3"><a id="GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925" name="GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925"></a><h3 id="JIMPV-GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925" class="sect3"><span class="enumeration_section">2.5 </span>Data Sources
               </h3>
               <div>
                  <p>A data source corresponds to a database schema or user.</p>
                  <p>Before you can draw any spatial data in a database schema, you must first define (create) a data source for the schema, either permanently or dynamically:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can define a data source permanently by specifying its connection information and user login credentials in the map visualizer configuration file (<code class="codeph">mapViewerConfig.xml</code>).
                        </p>
                     </li>
                     <li>
                        <p>You can define or modify a data source dynamically using the map visualizer administration (Admin) page.</p>
                     </li>
                  </ul>
                  <p>Each map request must specify a master data source. You can, however, specify a different data source for individual themes added to the map request. This makes it easy to aggregate data stored across different database schemas. If a theme has no specified data source, it is associated with the master data source. A base map (and thus the themes included in it) is always associated with the master data source. When a theme is processed, all of its underlying data, as well as the styles referenced in its definition, must be accessible from the data source or sources associated with the theme.</p>
                  <p><a id="d7682e7805" class="indexterm-anchor"></a><a id="d7682e7807" class="indexterm-anchor"></a><a id="d7682e7809" class="indexterm-anchor"></a>Each data source has associated renderers (sometimes called mappers or map makers), the number of which is determined by the <code class="codeph">number_of_mappers</code> attribute in the <code class="codeph">&lt;map_data_source&gt;</code> element. This attribute (described in <a href="introduction-to-map-visualization-component.html#GUID-A7271DAC-B2FE-45A8-B28D-499B7EDA9342">Defining Permanent Map Data Sources</a>) affects the number of database connections created for each data source when map requests are processed. The number of renderers specified in a data source also is the maximum number of concurrent requests that can be processed for that data source. Each additional renderer requires only a small amount of memory, so the main potential disadvantage of specifying a large number of renderers (such as 100) is that the underlying CPU resource might be strained if too many map requests are allowed to come through, thus affecting the performance of the entire map visualizer server.
                  </p>
                  <p><a id="d7682e7822" class="indexterm-anchor"></a><a id="d7682e7824" class="indexterm-anchor"></a>Each data source has its own internal metadata cache. The metadata cache holds the definitions of all accessed styles, as well as of all predefined themes that originate from the data source. This eliminates the need to query the database repeatedly for the definition of a style or predefined theme whenever it is needed.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">Catalog Data Sources</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV10105"></a><div class="props_rev_3"><a id="GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A" name="GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A"></a><h4 id="JIMPV-GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A" class="sect4"><span class="enumeration_section">2.5.1 </span>Catalog Data Sources
                  </h4>
                  <div>
                     <p>A catalog data source gets all of its data from local files. The local directory where the data files are stored is relative to where the <code class="codeph">mapViewerConfig.xml</code> file is stored. From another perspective, a catalog data source does not need the Oracle database, because all necessary data (the spatial geometry data and its attributes, as well as the metadata for how to rend the spatial data, such as styles and themes) is stored in local files.
                     </p>
                     <p>The following are the general steps for creating and using a catalog data source:</p>
                     <ol>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24">Export the Necessary Metadata from an Oracle Database</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC">Export the Necessary Spatial Tables</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8">Edit the Map Visualizer Configuration File to Add the Catalog Data Source</a></p>
                        </li>
                        <li>
                           <p><a href="map-visualization-concepts.html#GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B">Restart the Map Visualizer Server</a></p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24">Export the Necessary Metadata from an Oracle Database</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC">Export the Necessary Spatial Tables</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8">Edit the Map Visualizer Configuration File to Add the Catalog Data Source</a><br></li>
                        <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B">Restart the Map Visualizer Server</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-5AC30A9E-37E7-49FE-AFEE-AB220B600925" title="A data source corresponds to a database schema or user.">Data Sources</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="JIMPV10106"></a><div class="props_rev_3"><a id="GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24" name="GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24"></a><h5 id="JIMPV-GUID-E91D4AC7-DFFB-4308-B0EC-4FF392F19C24" class="sect5"><span class="enumeration_section">2.5.1.1 </span>Export the Necessary Metadata from an Oracle Database
                     </h5>
                     <div>
                        <p>Before creating a catalog data source, you must use the Map Builder utility to export the metadata to <code class="codeph">USER_SDO_CACHED_MAPS.xml</code>, <code class="codeph">USER_SDO_THEMES.xml</code>, and <code class="codeph">U</code><code class="codeph">SER_SDO_STYLES.xm</code>l files. The following considerations apply:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Only external tile layers are supported in catalog data source. So, the tile layers exported into USER_SDO_CACHED_MAPS.xml must be external tile layers, such as Oracle eLocation map services.</p>
                           </li>
                           <li>
                              <p>All styles needed by the themes in USER_SDO_THEMES.xml must be exported in to the USER_SDO_STYLES.xml file.</p>
                           </li>
                           <li>
                              <p>You need note all required spatial data tables (themes' base tables from which to fetch spatial data) used by all of the exported themes, so that you can export each base table into a GeoJSON file (explained in <a href="map-visualization-concepts.html#GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC">Export the Necessary Spatial Tables</a>).
                              </p>
                           </li>
                        </ul>
                        <ol>
                           <li>
                              <p>In the Map Builder utility, select <span class="bold">Tools</span>, then <span class="bold">Export Metadata to XML</span>.
                              </p>
                           </li>
                           <li>
                              <p>Select a temporary directory to store the metadata.</p>
                           </li>
                           <li>
                              <p>Accept the default prefix (<code class="codeph">USER_SDO_</code>) for the table names.
                              </p>
                           </li>
                           <li>
                              <p>Select the tile layers, themes, and styles to export. (If you are not sure which styles are needed for the desired themes, you may export all styles.)</p>
                           </li>
                           <li>
                              <p>Click OK to perform the export operation.</p>
                              <p>The <code class="codeph">USER_SDO_CACHED_MAPS.xml</code>, <code class="codeph">USER_SDO_THEMES.xml</code>, and <code class="codeph">U</code><code class="codeph">SER_SDO_STYLES.xm</code>l files are created in the specified directory.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">Catalog Data Sources</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10107"></a><div class="props_rev_3"><a id="GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC" name="GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC"></a><h5 id="JIMPV-GUID-E1B98CDD-70EB-4506-B0E7-3F439B5E30CC" class="sect5"><span class="enumeration_section">2.5.1.2 </span>Export the Necessary Spatial Tables
                     </h5>
                     <div>
                        <p>For a catalog data source, the spatial data sets are stored in GeoJSON files. One GeoJSON file corresponds to one spatial table is the database. To export spatial tables, you send requests to the map visualizer server.</p>
                        <p>For example, if a spatial table called OBIEE_COUNTRY is needed by a catalog data source theme (assume that the theme is also called OBIEE_COUNTRY) in the <code class="codeph">USER_SDO_THEMES.xml</code> file, then this spatial table needs to be exported as a GeoJSON file. As a convention, you may name it with the same name as the name of the spatial table. In this case, it is named as <code class="codeph">OBIEE_CONTRY.json</code>.
                        </p>
                        <ol>
                           <li>
                              <p>Check the themes definition from the <code class="codeph">USER_SDO_THEMES.xml</code> file. For example, if a theme named OBIEE_COUNTRY uses the OBIEE_COUNTRY spatial table, then the spatial table needs to be exported. The table's columns and expected names must be identified, and the column names are the same as the name attributes in the theme definition. In the following example, the ISO_COUNTRY_CODE column is mapped as <code class="codeph">Country Code</code>:
                              </p><pre class="oac_no_warn" dir="ltr"> &lt;theme&gt;
    &lt;name&gt;OBIEE_COUNTRY&lt;/name&gt;
    &lt;description&gt;&lt;![CDATA[OBIEE Country]]&gt;&lt;/description&gt;
    &lt;base_table&gt;OBIEE_COUNTRY&lt;/base_table&gt;
    &lt;geometry_column&gt;GEOMETRY&lt;/geometry_column&gt;
    &lt;styling_rules&gt;&lt;![CDATA[&lt;?xml version="1.0" standalone="yes"?&gt;&lt;styling_rules&gt;
  &lt;hidden_info&gt;
    &lt;field <span class="bold">column="ISO_COUNTRY_CODE" name="Country Code"</span>/&gt;
    &lt;field column="NAME" name="Country Name"/&gt;
    &lt;field column="NAME_INIT" name="Country Name (Init)"/&gt;
  &lt;/hidden_info&gt;
  &lt;rule&gt;
    &lt;features style="C.AIRPORTS"&gt; &lt;/features&gt;
    &lt;label column="NAME_LABEL" style="T.COUNTRY_NAME_10"&gt; 1 &lt;/label&gt;
  &lt;/rule&gt;
&lt;/styling_rules&gt;]]&gt;&lt;/styling_rules&gt;
  &lt;/theme&gt;
   . . . 
</pre></li>
                           <li>
                              <p>Identify the spatial table columns. In the following example, base table OBIEE_COUNTRY has the spatial geometry column named GEOMETRY:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; describe obiee_country
 Name                          Null?    Type
 ----------------------------- -------- ----------------------------
 NAME                                   VARCHAR2(255 CHAR)
 NAME_INIT                              VARCHAR2(1020 CHAR)
 OBIEE_LOWER                            VARCHAR2(1020 CHAR)
 ISO_COUNTRY_CODE                       VARCHAR2(5)
 SQKM                                   NUMBER(11)
 NAME_LABEL                             VARCHAR2(255 CHAR)
 <span class="bold">GEOMETRY                               MDSYS.SDO_GEOMETRY</span>
</pre></li>
                           <li>
                              <p>Create request strings to the map visualizer data server. For example, if OBIEE_COUNTRY is the base table, and if the map visualizer is running at <code class="codeph">localhost:8080</code>, and if the data source name is <code class="codeph">my_ds_name</code> with spatial data retrieval enabled, you can send a request string like the following:
                              </p><pre class="oac_no_warn" dir="ltr">http://localhost:8080/ mapviewer/dataserver/my_ds_name?t=obiee_country&amp;sql=select iso_country_code as id, iso_country_code as "country Code", name as "Country Name", name_init as "Country Name (Init)", name_label, geometry from obiee_country&amp;id_col=id&amp;simplify=true&amp;threshold=90&amp;include_label_box=true
</pre><p>You can save the data set with a name <code class="codeph">OBIEE_COUNTRY.json</code> in this case to the temporary folder where the exported metadata (the <code class="codeph">USER_SDO_CACHED_MAPS.xml</code>, <code class="codeph">USER_SDO_THEMES.xml</code>, and <code class="codeph">USER_SDO_STYLES.xml</code> files) is stored.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">Catalog Data Sources</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10108"></a><div class="props_rev_3"><a id="GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8" name="GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8"></a><h5 id="JIMPV-GUID-6ADE83B9-AB84-4D71-BCF2-7C4B31EE0AC8" class="sect5"><span class="enumeration_section">2.5.1.3 </span>Edit the Map Visualizer Configuration File to Add the Catalog Data Source
                     </h5>
                     <div>
                        <p>Edit the <code class="codeph">mapViewerConfig.xml</code> file and add the catalog data source. For example:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;map_data_source name="catalogds1"
   catalog_dir="../catalogs/datafolder1"
   private="true"
   number_of_mappers="3"
   allow_jdbc_theme_based_foi="true"
   editable="false"/&gt;
</pre><p>For the preceding catalog data source definition, you must create the specified <code class="codeph">catalog_dir</code> folder relative to where the <code class="codeph">mapViewerConfig.xml file</code> is stored, and then copy all data files into the folder: that is, the three exported metadata files (<code class="codeph">USER_SDO_CACHED_MAPS.xml</code>, <code class="codeph">USER_SDO_THEMES.xml</code>, and <code class="codeph">USER_SDO_STYLES.xml</code>) and all exported GeoJSON files, such as <code class="codeph">OBIEE_COUNTRY.json</code> in this example.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">Catalog Data Sources</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="JIMPV10109"></a><div class="props_rev_3"><a id="GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B" name="GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B"></a><h5 id="JIMPV-GUID-9DC5E3F3-3C51-4BB9-A4D3-EB6B44825B3B" class="sect5"><span class="enumeration_section">2.5.1.4 </span>Restart the Map Visualizer Server
                     </h5>
                     <div>
                        <p>Restart the map visualizer server.</p>
                        <p>After the map visualizer server is restarted, all the exported tile layers and themes should be accessible from this catalog data source. For example, you should see a map image if you send a map request like the following:</p><pre class="oac_no_warn" dir="ltr">http://localhost:8080/mapviewer/omserver?xml_request= &lt;?xml version="1.0" standalone="yes"?&gt; &lt;map_request  datasource = "catalogds1" width="1024" height="768" format="PNG_STREAM"&gt; &lt;center size="200"&gt; &lt;geoFeature&gt;&lt;geometricProperty typeName="center"&gt; &lt;Point&gt; &lt;coordinates&gt;0, 0&lt;/coordinates&gt; &lt;/Point&gt; &lt;/geometricProperty&gt;&lt;/geoFeature&gt; &lt;/center&gt; &lt;themes&gt; &lt;theme name="OBIEE_COUNTRY"&gt; &lt;/theme&gt; &lt;/themes&gt; &lt;/map_request&gt;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-16C20598-428B-4B9A-B4B9-F4FB01AC046A">Catalog Data Sources</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="JIMPV9622"></a><div class="props_rev_3"><a id="GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59" name="GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59"></a><h3 id="JIMPV-GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59" class="sect3"><span class="enumeration_section">2.6 </span>How a Map Is Generated
               </h3>
               <div>
                  <p>When a map request arrives at the map visualizer server, the server picks a free renderer associated with the master data source in the request.</p>
                  <p>This topic describes the process that the map visualizer server follows to generate a map. In brief, the map visualizer performs the following steps:</p>
                  <ol>
                     <li>
                        <p>Parse and process the incoming XML map request.</p>
                     </li>
                     <li>
                        <p>Prepare the data for each theme (executed in parallel).</p>
                     </li>
                     <li>
                        <p>Render and label each theme.</p>
                     </li>
                     <li>
                        <p>Generate final images or files.</p>
                     </li>
                  </ol>
                  <p>Each map generated by the map visualizer results from its receiving a valid XML map request. The XML map request is parsed and its content is validated. The map visualizer then creates any dynamic styles specified in the XML request. It builds a theme list from all themes included in the base map (if a base map is specified), as well as any specified predefined or JDBC themes. All individual features in the request are grouped into a single temporary theme. In other words, after parsing the incoming request, all data that must be shown on the map is presented in a list of themes to the map visualizer rendering engine.</p>
                  <p>The ordering of the themes in the list is important, because it determines the order in which the themes are rendered. All themes included in the base map (when present) are added to the list first, followed by all specified themes (predefined or JDBC). The theme that contains all the individual features is added as the last theme on the list. Any other requested features of a map (such as legend, map title, or footnote), are created and saved for rendering later.</p>
                  <p>For each theme in the request, the map visualizer then creates a separate execution thread to prepare its data, so that preparation of the themes takes place in parallel. For a predefined theme, this means formulating a query based on the theme's definition and any other information, such as the current map request window. This query is sent to the database for execution, and the result set is returned. The map visualizer creates individual renderable objects based on the result set. </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For predefined themes that are fully cached, no query is sent to the database, because all renderable objects are readily available.</p>
                     </li>
                     <li>
                        <p>For JDBC themes, the query supplied by the user is either executed as is (when the <code class="codeph">asis</code> attribute value is <code class="codeph">TRUE</code> in the JDBC theme definition) or with a spatial filter subquery automatically applied to it. The spatial filter part is used to limit the results of the user's query to those within the current requested window. 
                        </p>
                     </li>
                     <li>
                        <p>For themes that already have renderable features (such as the one containing all individual features in a request), there is no need to create renderable objects.</p>
                     </li>
                  </ul>
                  <p>After all themes for the map request have been prepared and all necessary data has been collected, the map visualizer starts to render the map. It creates an empty new in-memory image to hold the result map, and paints the empty image with the necessary backgrounds (color or image). It then renders all of the themes in the theme list. </p>
                  <div class="infoboxnote" id="GUID-788ABF14-7506-40CF-B5E0-D47352BD1A59__GUID-25C5AE85-C15D-4DDB-BC0C-A2384A15405D">
                     <p class="notep1">Note:</p>
                     <p>All image or GeoRaster themes are always rendered first, regardless of their position in the theme list. All other themes, however, are rendered in the order in which they appear in the theme list.</p>
                  </div>
                  <p>For each theme, features are rendered in an order determined internally by the map visualizer. The rendering of each feature involves invoking the drawing methods of its rendering style. After all themes have been rendered, the labeling process starts. For each theme whose features must be labeled with text, the map visualizer invokes algorithms to label each feature, with the specific algorithm depending on the type of feature (such as polygon or line).</p>
                  <p>After all themes have been rendered and (when needed) labeled, the map visualizer plots any additional map features (such as a legend) on the internal map image. The map visualizer then converts that image into the desired format (such as PNG or GIF) specified in the original map request; however, for SVG maps, instead of using an internal image, the map visualizer initially creates an empty SVG map object, then creates an SVG document as a result of the rendering process, and inserts it into the map object.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9624"></a><a id="JIMPV9625"></a><a id="JIMPV9626"></a><a id="JIMPV9627"></a><a id="JIMPV9623"></a><div class="props_rev_3"><a id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8" name="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8"></a><h3 id="JIMPV-GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8" class="sect3"><span class="enumeration_section">2.7 </span>Cross-Schema Map Requests
               </h3>
               <div>
                  <p>A database user can issue a map request specifying a theme that uses data associated with another database user, to select data from tables that the other data source user is authorized to access.</p>
                  <p>For example, assume that user SCOTT wants to issue a map request using data associated with user MVDEMO. In general, user SCOTT must be granted SELECT access on relevant tables owned by user MVDEMO, and the <code class="codeph">&lt;theme&gt;</code> element should generally specify any tables in <span class="italic">schema-name.table-name</span> format. In this example scenario:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For a geometry table, grant the SELECT privilege on the geometry table of MVDEMO to SCOTT (see <a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIAGBE">Example 2-53</a>).
                        </p>
                     </li>
                     <li>
                        <p>For a GeoRaster table, grant the SELECT privilege on the GeoRaster table and raster data table or tables of MVDEMO to SCOTT (see <a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIDFAE">Example 2-54</a>).
                        </p>
                     </li>
                     <li>
                        <p>For a topology data model table, grant the SELECT privilege on the topology table, topology column index table, and related topology information tables (<span class="italic">topology-name</span>_EDGE$, <span class="italic">topology-name</span>_NODE$, <span class="italic">topology-name</span>_FACE$, <span class="italic">topology-name</span>_RELATION$) of MVDEMO to SCOTT (see <a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">Example 2-55</a>).
                        </p>
                     </li>
                     <li>
                        <p>For network data model tables, grant the SELECT privilege on the network link, node, path, and path-link tables of MVDEMO to SCOTT (see <a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHCAIGI">Example 2-56</a>).
                        </p>
                     </li>
                  </ul>
                  <p><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIAGBE">Example 2-53</a> shows a dynamic theme that accesses the MVDEMO.STATES geometry table from a data source defined on the SCOTT user.
                  </p>
                  <p><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIDFAE">Example 2-54</a> shows a dynamic theme that accesses the MVDEMO.GEORASTER_TABLE GeoRaster table and its RDT from a data source defined on the SCOTT user. Specify the base (GeoRaster) table in <span class="italic">schema-name.table-name</span> format.
                  </p>
                  <p><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">Example 2-55</a> shows a dynamic theme that accesses the MVDEMO.LAND_PARCELS topology table and information tables for the CITY_DATA topology from a data source defined on the SCOTT user. Specify the feature table and the topology in <span class="italic">schema-name.object-name</span> format, if they are owned by a different schema than the one associated with the data source.
                  </p>
                  <p>In <a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">Example 2-55</a>, you must grant SELECT on the topology column index table name (<span class="italic">&lt;topology-column-index-table-name&gt;</span>) because the spatial index table associated with the feature table topology column is used by the map visualizer in topology queries. You can determine the topology column index table name as follows. Assume the following information:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Topology feature table owner: MVDEMO</p>
                     </li>
                     <li>
                        <p>Topology feature table name: LAND_PARCELS</p>
                     </li>
                     <li>
                        <p>Topology feature table topology column name: FEATURE</p>
                     </li>
                  </ul>
                  <p>The following query returns the index table name (in this example, MDTP_14E60$):</p><pre class="oac_no_warn" dir="ltr">SQL&gt; select sdo_index_table from all_sdo_index_info
     where table_owner = 'MVDEMO'
     and table_name = 'LAND_PARCELS'
     and column_name = 'FEATURE'
 
SDO_INDEX_TABLE
--------------------------------
MDTP_14E60$
</pre><p>Then, modify the last GRANT statement in <a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">Example 2-55</a> to specify the <span class="italic">&lt;topology-column-index-table-name&gt;</span>. In this case:
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; grant select on MDTP_14E60$ to SCOTT;
</pre><p><a href="map-visualization-concepts.html#GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHCAIGI">Example 2-56</a> shows a dynamic theme that accesses the MVDEMO.BI_TEST network and its link, node, path, and path-link tables. Specify the network name in <span class="italic">schema-name.network-name</span> format.
                  </p>
                  <div class="example" id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIAGBE">
                     <p class="titleinexample">Example 2-53 Cross-Schema Access: Geometry Table</p><pre class="oac_no_warn" dir="ltr">SQL&gt; grant select on STATES to SCOTT;
. . .
&lt;themes&gt;
  &lt;theme name="theme1"&gt;
     &lt;jdbc_query
       datasource="scottds"
       spatial_column="geom"
       render_style="MVDEMO:C.COUNTIES"
       jdbc_srid="8265"
       &gt;SELECT geom from MVDEMO.STATES&lt;/jdbc_query&gt;
   &lt;/theme&gt;
&lt;/themes&gt;
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHIDFAE">
                     <p class="titleinexample">Example 2-54 Cross-Schema Access: GeoRaster Table</p><pre class="oac_no_warn" dir="ltr">SQL&gt; grant select on GEORASTER_TABLE to SCOTT;
SQL&gt; grant select on RDT_GEOR1 to SCOTT;
. . .
&lt;themes&gt;
  &lt;theme name="georaster_theme"&gt;
    &lt;jdbc_georaster_query
       georaster_table="MVDEMO.georaster_table"
       georaster_column="georaster"
       raster_table="rdt_geor1"
       raster_id="1"
       jdbc_srid="8307"
       datasource="scottds"
       asis="false"&gt;
     &lt;/jdbc_georaster_query&gt;
  &lt;/theme&gt;
&lt;/themes&gt;
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHBIHGH">
                     <p class="titleinexample">Example 2-55 Cross-Schema Access: Topology Feature Table</p><pre class="oac_no_warn" dir="ltr">SQL&gt; grant select on CITY_DATA_FACE$ to SCOTT;
SQL&gt; grant select on CITY_DATA_EDGE$ to SCOTT;
SQL&gt; grant select on CITY_DATA_NODE$ to SCOTT;
SQL&gt; grant select on CITY_DATA_RELATION$ to SCOTT;
SQL&gt; grant select on LAND_PARCELS to SCOTT;
SQL&gt; grant select on <span class="italic">&lt;topology-column-index-table-name&gt;</span> to SCOTT;
. . .
&lt;themes&gt;
  &lt;theme name="topo_theme" &gt;
     &lt;jdbc_topology_query
       topology_name="MVDEMO.CITY_DATA"
       feature_table="MVDEMO.LAND_PARCELS"
       spatial_column="FEATURE"
       render_style="MVDEMO:C.COUNTIES"
       jdbc_srid="0"
       datasource="scottds"
       asis="false"&gt;select feature from MVDEMO.land_parcels
     &lt;/jdbc_topology_query&gt;
   &lt;/theme&gt;
&lt;/themes&gt;
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-0D3B6524-1B7B-4D5E-8224-F418065CDFE8__CIHCAIGI">
                     <p class="titleinexample">Example 2-56 Cross-Schema Access: Network Tables</p><pre class="oac_no_warn" dir="ltr">SQL&gt; grant select on BI_TEST_LINK$ to SCOTT;
SQL&gt; grant select on BI_TEST_NODE$ to SCOTT;
SQL&gt; grant select on BI_TEST_PATH$ to SCOTT;
SQL&gt; grant select on BI_TEST_PLINK$ to SCOTT;
. . .
&lt;themes&gt;
  &lt;theme name="net_theme" &gt;
     &lt;jdbc_network_query
       network_name="MVDEMO.BI_TEST"
       network_level="1"
       jdbc_srid="0"
       datasource="scottds"
       link_style="MVDEMO:C.RED"
       node_style="MVDEMO:M.CIRCLE"
       node_markersize="5"
       asis="false"&gt;
     &lt;/jdbc_network_query&gt;
   &lt;/theme&gt;
&lt;/themes&gt;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9629"></a><a id="JIMPV9628"></a><div class="props_rev_3"><a id="GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4" name="GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4"></a><h3 id="JIMPV-GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4" class="sect3"><span class="enumeration_section">2.8 </span>Workspace Manager Support in the Map Visualizer
               </h3>
               <div>
                  <p>Workspace Manager is an Oracle Database feature that lets you version-enable one or more tables in the database.</p>
                  <p>After a table is version-enabled, users in a workspace automatically see the correct version of database rows in which they are interested. For detailed information about Workspace Manager, see <a href="../adwsm/workspace-manager-concepts-usage.html#ADWSM99111" target="_blank"><span class="italic">Oracle Database Workspace Manager Developer's Guide</span></a>.
                  </p>
                  <p>You can request a map from a specific workspace, at a specific savepoint in a workspace, or at a point close to a specific date in a workspace. The following attributes of the <code class="codeph">&lt;theme&gt;</code> element are related to support for Workspace Manager:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a id="d7682e8519" class="indexterm-anchor"></a><code class="codeph">workspace_name</code> attribute: specifies the name of the workspace from which to get the map data.
                        </p>
                     </li>
                     <li>
                        <p><a id="d7682e8526" class="indexterm-anchor"></a><code class="codeph">workspace_savepoint</code> attribute: specifies the name of the savepoint to go to in the specified workspace.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">workspace_date</code> attribute: specifies the date to go to (that is, a point at or near the specified date) in the specified workspace.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">workspace_date_format</code> attribute: specifies the date format. The default is <code class="codeph">mmddyyyyhh24miss</code>. This attribute applies only if you specified the <code class="codeph">workspace_date</code> attribute.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">workspace_date_nlsparam</code> attribute: specifies globalization support options. The options and default are the same as for the <code class="codeph">nlsparam</code> argument to the <code class="codeph">TO_CHAR</code> function for date conversion, which is described in <a href="../sqlrf/TO_CHAR-datetime.html#SQLRF06129" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a>.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">workspace_date_tswtz</code> attribute: specifies a Boolean value. <code class="codeph">TRUE</code> means that the input date is in timestamp with time zone format; <code class="codeph">FALSE</code> (the default) means that the input date is a date string.
                        </p>
                     </li>
                  </ul>
                  <p>The <code class="codeph">workspace_name</code> attribute is required for the use of Workspace Manager support in the map visualizer.
                  </p>
                  <p>If you specify neither the <code class="codeph">workspace_savepoint</code> nor <code class="codeph">workspace_date</code> attribute, the map visualizer goes to the latest version of the workspace defined. If you specify both the <code class="codeph">workspace_savepoint</code> and <code class="codeph">workspace_date</code> attributes, the map visualizer uses the specified date instead of the savepoint name.
                  </p>
                  <p><a href="map-visualization-concepts.html#GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4__BABDEAGD">Example 2-57</a> shows the definition of a dynamic theme that uses attributes (shown in bold) related to Workspace Manager support. In this example, the map visualizer will render the data related to workspace <code class="codeph">wsp_1</code> at the savepoint <code class="codeph">sp1</code>.
                  </p>
                  <p>The following considerations apply to the map visualizer caching of predefined themes (explained in <a href="map-visualization-concepts.html#GUID-E0D0A87C-0A93-46B1-85D3-1E6DD4E281AB">Caching of Predefined Themes</a>) and the use of Workspace Manager-related map visualizer attributes:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The Workspace Manager-related attributes are ignored for predefined themes if the <code class="codeph">caching</code> attribute is set to <code class="codeph">ALL</code> in the <code class="codeph">&lt;styling_rules&gt;</code> element for the theme.
                        </p>
                     </li>
                     <li>
                        <p>No caching data is considered if you specify the <code class="codeph">workspace_name</code> attribute.
                        </p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-674FE463-6AF4-46F6-AD99-4018419E0BD4__BABDEAGD">
                     <p class="titleinexample">Example 2-57 Workspace Manager-Related Attributes in a Map Request</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;map_request
 . . .
  &lt;themes&gt;
    &lt;theme name="wmtheme" user_clickable="false"
       <span class="bold">workspace_name="wsp_1" workspace_savepoint="sp1"</span> &gt;
       &lt;jdbc_query
         spatial_column="GEOM"
         render_style="stylename"
         jdbc_srid="8307"
         datasource="mvdemo"
         asis="false"&gt; select GEOM,ATTR from GEOM_TABLE
       &lt;/jdbc_query&gt;
     &lt;/theme&gt;
  &lt;/themes&gt;
 . . .
&lt;/map_request&gt;
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="JIMPV9632"></a><div class="props_rev_3"><a id="GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" name="GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5"></a><h3 id="JIMPV-GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" class="sect3"><span class="enumeration_section">2.9 </span>Map Visualizer Metadata Views
               </h3>
               <div>
                  <p>The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.</p>
                  <p>However, you should never directly update these tables. Each map visualizer user has the following views available in the schema associated with that user:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>USER_SDO_STYLES and ALL_SDO_STYLES contain information about styles. These views are described in <a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B">xxx_SDO_STYLES Views</a>.
                        </p>
                     </li>
                     <li>
                        <p>USER_SDO_THEMES and ALL_SDO_THEMES contain information about themes. These views are described in <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a>.
                        </p>
                     </li>
                     <li>
                        <p>USER_SDO_MAPS and ALL_SDO_MAPS contain information about base maps. These views are described in <a href="map-visualization-concepts.html#GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC">xxx_SDO_MAPS Views</a>.
                        </p>
                     </li>
                     <li>
                        <p>USER_SDO_CACHED_MAPS and ALL_SDO_CACHED_MAPS contain information about configuration settings for map tile layers. These views are described in <a href="map-visualization-concepts.html#GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF">xxx_SDO_CACHED_MAPS Views</a>.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5__GUID-84702B02-2604-410E-96F3-7EB5184421F9">
                     <p class="notep1">Note:</p>
                     <p>You can use the Map Builder tool (described in <a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="This chapter briefly describes the map visualization component Map Builder tool, also referred to as Oracle Map Builder. It does not provide detailed information about the tool's interface; for that you should use see online help available when you use Oracle Map Builder.">Oracle Map Builder Tool</a>) to manage most mapping metadata. However, for some features you must use SQL statements to update the map visualizer metadata views.
                     </p>
                  </div>
                  <p>The USER_SDO_xxx views contain metadata information about mapping elements (styles, themes, base maps, cached maps) owned by the user (schema), and the ALL_SDO_xxx views contain metadata information about mapping elements on which the user has SELECT permission.</p>
                  <p>The ALL_SDO_xxx views include an OWNER column that identifies the schema of the owner of the object. The USER_SDO_xxx views do not include an OWNER column.</p>
                  <p>All styles defined in the database can be referenced by any user to define that user's themes, markers with a text style, or advanced styles. However, themes and base maps are not shared among users; so, for example, you cannot reference another user's themes in a base map that you create.</p>
                  <p>The following rules apply for accessing the mapping metadata:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you need to add, delete, or modify any metadata, you must perform the operations using the USER_SDO_xxx views. The ALL_SDO_xxx views are automatically updated to reflect any changes that you make to USER_SDO_xxx views.</p>
                     </li>
                     <li>
                        <p>If you need only read access to the metadata for all styles, you should use the ALL_SDO_STYLES view. Both the OWNER and NAME columns make up the primary key; therefore, when you specify a style, be sure to include both the OWNER and NAME.</p>
                     </li>
                  </ul>
                  <p><a id="d7682e8753" class="indexterm-anchor"></a><a id="d7682e8755" class="indexterm-anchor"></a>The preceding map visualizer metadata views are defined in the following file:
                  </p><pre class="oac_no_warn" dir="ltr"><span class="italic">$ORACLE_HOME</span>/lbs/admin/mapdefinition.sql
</pre><p>The map visualizer also uses some other metadata views, which may be defined in other files. You should never modify the contents of these views, which include the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a id="d7682e8770" class="indexterm-anchor"></a>MDSYS.USER_SDO_TILE_ADMIN_TASKS includes information about long tasks related to map tile management. If you stop a long map tile layer task such as prefetching and then restart the task, the map visualizer uses the information in the USER_SDO_TILE_ADMIN_TASKS view to resume the task rather than start over at the beginning.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B">xxx_SDO_STYLES Views</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES Views</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC">xxx_SDO_MAPS Views</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF">xxx_SDO_CACHED_MAPS Views</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9638"></a><a id="JIMPV9639"></a><a id="JIMPV9637"></a><div class="props_rev_3"><a id="GUID-818EC731-8296-4594-9327-F573E930F56B" name="GUID-818EC731-8296-4594-9327-F573E930F56B"></a><h4 id="JIMPV-GUID-818EC731-8296-4594-9327-F573E930F56B" class="sect4"><span class="enumeration_section">2.9.1 </span>xxx_SDO_STYLES Views
                  </h4>
                  <div>
                     <p>The USER_SDO_STYLES and ALL_SDO_STYLES views have the columns listed in <a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B__BABCFEDB" title="xxx_SDO_STYLES Views">Table 2-3</a>.
                     </p>
                     <div class="tblformal" id="GUID-818EC731-8296-4594-9327-F573E930F56B__BABCFEDB">
                        <p class="titleintable">Table 2-3 xxx_SDO_STYLES Views</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="xxx_SDO_STYLES Views" summary="xxx_SDO_STYLES Views" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d7682e8859">Column Name</th>
                                 <th align="left" valign="bottom" width="17%" id="d7682e8862">Data Type</th>
                                 <th align="left" valign="bottom" width="65%" id="d7682e8865">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8870" headers="d7682e8859 ">
                                    <p>OWNER</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8870 d7682e8862 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8870 d7682e8865 ">
                                    <p>Schema that owns the style (ALL_SDO_STYLES only)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8880" headers="d7682e8859 ">
                                    <p>NAME</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8880 d7682e8862 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8880 d7682e8865 ">
                                    <p>Unique name to be associated with the style</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8890" headers="d7682e8859 ">
                                    <p>TYPE</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8890 d7682e8862 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8890 d7682e8865 ">
                                    <p>One of the following values: COLOR, MARKER, LINE, AREA, TEXT, or ADVANCED</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8900" headers="d7682e8859 ">
                                    <p>DESCRIPTION</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8900 d7682e8862 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8900 d7682e8865 ">
                                    <p>Optional descriptive text about the style</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8910" headers="d7682e8859 ">
                                    <p>DEFINITION</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8910 d7682e8862 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8910 d7682e8865 ">
                                    <p>XML definition of the style</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8920" headers="d7682e8859 ">
                                    <p>IMAGE</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8920 d7682e8862 ">
                                    <p>BLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8920 d7682e8865 ">
                                    <p>Image content (for example, <code class="codeph">airport.gif</code>) for marker or area styles that use image-based symbols (for markers) or fillers (for areas)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d7682e8933" headers="d7682e8859 ">
                                    <p>GEOMETRY</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d7682e8933 d7682e8862 ">
                                    <p>SDO_GEOMETRY</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e8933 d7682e8865 ">
                                    <p>(Reserved for future use)</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Depending on the Oracle Database release, the ALL_SDO_STYLES view may contain sample styles owned by the MDSYS schema. If these styles are defined on your system, you can specify them in theme definitions and map requests, and you can examine the XML definitions for ideas to use in defining your own styles.</p>
                     <p>To specify a style (or other type of map visualizer object) that is owned by a schema other than the one for the current user, you must specify the schema name, and you must use a colon (:), not a period, between the schema name and the object name. The following excerpt from a <code class="codeph">&lt;jdbc_query&gt;</code> element refers to the style named <code class="codeph">C.RED</code> owned by the MDSYS schema:
                     </p><pre class="oac_no_warn" dir="ltr">&lt;jdbc_query . . . render_style="MDSYS:C.RED"&gt;
. . .
 &lt;/jdbc_query&gt;
</pre><p><a href="map-visualization-concepts.html#GUID-818EC731-8296-4594-9327-F573E930F56B__BABIIIGB">Example 2-58</a> finds the names of all currently defined styles owned by the MDSYS schema, and it displays the type, description, and XML definition of one of the styles. (The example output is reformatted for readability.)
                     </p>
                     <div class="example" id="GUID-818EC731-8296-4594-9327-F573E930F56B__BABIIIGB">
                        <p class="titleinexample">Example 2-58 Finding Styles Owned by the MDSYS Schema</p><pre class="oac_no_warn" dir="ltr">SELECT owner, name FROM all_sdo_styles 
  WHERE owner = 'MDSYS';
 
OWNER                            NAME
-------------------------------- --------------------------------
MDSYS                            C.BLACK
MDSYS                            C.BLACK GRAY
MDSYS                            C.BLUE
MDSYS                            C.COUNTIES
MDSYS                            C.FACILITY
. . .
MDSYS                            L.MAJOR STREET
MDSYS                            L.MAJOR TOLL ROAD
MDSYS                            L.MQ_ROAD2
MDSYS                            L.PH
MDSYS                            L.POOR_ROADS
MDSYS                            L.PTH
MDSYS                            L.RAILROAD
MDSYS                            L.RAMP
MDSYS                            L.SH
MDSYS                            L.STATE BOUNDARY
. . .
MDSYS                            M.REDSQ
MDSYS                            M.SMALL TRIANGLE
MDSYS                            M.STAR
MDSYS                            M.TOWN HALL
MDSYS                            M.TRIANGLE
MDSYS                            T.AIRPORT NAME
MDSYS                            T.CITY NAME
MDSYS                            T.MAP TITLE
MDSYS                            T.PARK NAME
MDSYS                            T.RED STREET
MDSYS                            T.ROAD NAME
MDSYS                            T.SHIELD1
MDSYS                            T.SHIELD2
MDSYS                            T.STATE NAME
MDSYS                            T.STREET NAME
. . .
 
-- Display the type, description, and XML definition of one style.
SET LONG 4000;
SELECT owner, name, type, description, definition 
  FROM all_sdo_styles WHERE name = 'L.PH';
 
OWNER   NAME     TYPE       DESCRIPTION
------  -----    ------     ------------------
MDSYS   L.PH     LINE       Primary highways
 
DEFINITION
---------------------------------------------------------------------------
&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;svg width="1in" height="1in"&gt;
&lt;desc&gt;&lt;/desc&gt;
&lt;g class="line" style="fill:#33a9ff;stroke-width:4"&gt;
&lt;line class="parallel" style="fill:#aa55cc;stroke-width:1.0"/&gt;
&lt;/g&gt;
&lt;/svg&gt;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.">Map Visualizer Metadata Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9636"></a><a id="JIMPV9635"></a><div class="props_rev_3"><a id="GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347" name="GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347"></a><h4 id="JIMPV-GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347" class="sect4"><span class="enumeration_section">2.9.2 </span>xxx_SDO_THEMES Views
                  </h4>
                  <div>
                     <p>The USER_SDO_THEMES and ALL_SDO_THEMES views have the columns listed in <a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347__BABDFIBG" title="xxx_SDO_THEMES Views">Table 2-4</a>.
                     </p>
                     <div class="tblformal" id="GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347__BABDFIBG">
                        <p class="titleintable">Table 2-4 xxx_SDO_THEMES Views</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="xxx_SDO_THEMES Views" summary="xxx_SDO_THEMES Views" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d7682e9021">Column Name</th>
                                 <th align="left" valign="bottom" width="16%" id="d7682e9024">Data Type</th>
                                 <th align="left" valign="bottom" width="65%" id="d7682e9027">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9032" headers="d7682e9021 ">
                                    <p>OWNER</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9032 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9032 d7682e9027 ">
                                    <p>Schema that owns the theme (ALL_SDO_THEMES only)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9042" headers="d7682e9021 ">
                                    <p>NAME</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9042 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9042 d7682e9027 ">
                                    <p>Unique name to be associated with the theme</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9052" headers="d7682e9021 ">
                                    <p>DESCRIPTION</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9052 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9052 d7682e9027 ">
                                    <p>Optional descriptive text about the theme</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9062" headers="d7682e9021 ">
                                    <p>BASE_TABLE</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9062 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9062 d7682e9027 ">
                                    <p>Table or view containing the spatial geometry column</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9072" headers="d7682e9021 ">
                                    <p>GEOMETRY_COLUMN</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9072 d7682e9024 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9072 d7682e9027 ">
                                    <p>Name of the spatial geometry column (of type SDO_GEOMETRY)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9082" headers="d7682e9021 ">
                                    <p>STYLING_RULES</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9082 d7682e9024 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9082 d7682e9027 ">
                                    <p>XML definition of the styling rules to be associated with the theme</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.">Map Visualizer Metadata Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9634"></a><a id="JIMPV9633"></a><div class="props_rev_3"><a id="GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC" name="GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC"></a><h4 id="JIMPV-GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC" class="sect4"><span class="enumeration_section">2.9.3 </span>xxx_SDO_MAPS Views
                  </h4>
                  <div>
                     <p>The USER_SDO_MAPS and ALL_SDO_MAPS views have the columns listed in <a href="map-visualization-concepts.html#GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC__BABDABHB" title="xxx_SDO_MAPS Views">Table 2-5</a>.
                     </p>
                     <div class="tblformal" id="GUID-3A6A6694-7FC1-4202-8742-11CBA2054CFC__BABDABHB">
                        <p class="titleintable">Table 2-5 xxx_SDO_MAPS Views</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="xxx_SDO_MAPS Views" summary="xxx_SDO_MAPS Views" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d7682e9149">Column Name</th>
                                 <th align="left" valign="bottom" width="16%" id="d7682e9152">Data Type</th>
                                 <th align="left" valign="bottom" width="65%" id="d7682e9155">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9160" headers="d7682e9149 ">
                                    <p>OWNER</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9160 d7682e9152 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9160 d7682e9155 ">
                                    <p>Schema that owns the base map (ALL_SDO_MAPS only)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9170" headers="d7682e9149 ">
                                    <p>NAME</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9170 d7682e9152 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9170 d7682e9155 ">
                                    <p>Unique name to be associated with the base map</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9180" headers="d7682e9149 ">
                                    <p>DESCRIPTION</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9180 d7682e9152 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9180 d7682e9155 ">
                                    <p>Optional descriptive text about the base map</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9190" headers="d7682e9149 ">
                                    <p>DEFINITION</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9190 d7682e9152 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9190 d7682e9155 ">
                                    <p>XML definition of the list of themes and their scale value range information to be associated with the base map</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.">Map Visualizer Metadata Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV10111"></a><a id="JIMPV10110"></a><div class="props_rev_3"><a id="GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF" name="GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF"></a><h4 id="JIMPV-GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF" class="sect4"><span class="enumeration_section">2.9.4 </span>xxx_SDO_CACHED_MAPS Views
                  </h4>
                  <div>
                     <p>The USER_SDO_MAPS and ALL_SDO_MAPS views have the columns listed in <a href="map-visualization-concepts.html#GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF__CIHBEHHI" title="xxx_SDO_MAPS Views">Table 2-6</a>.
                     </p>
                     <div class="tblformal" id="GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF__CIHBEHHI">
                        <p class="titleintable">Table 2-6 xxx_SDO_CACHED_MAPS Views</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="xxx_SDO_CACHED_MAPS Views" summary="xxx_SDO_MAPS Views" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d7682e9257">Column Name</th>
                                 <th align="left" valign="bottom" width="16%" id="d7682e9260">Data Type</th>
                                 <th align="left" valign="bottom" width="65%" id="d7682e9263">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9268" headers="d7682e9257 ">
                                    <p>NAME</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9268 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9268 d7682e9263 ">
                                    <p>Unique name of the cached map source</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9278" headers="d7682e9257 ">
                                    <p>DESCRIPTION</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9278 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9278 d7682e9263 ">
                                    <p>Optional descriptive text about the cached map source</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9288" headers="d7682e9257 ">
                                    <p>TILES_TABLE</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9288 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9288 d7682e9263 ">
                                    <p>(Not currently used)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9298" headers="d7682e9257 ">
                                    <p>IS_ONLINE</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9298 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9298 d7682e9263 ">
                                    <p><code class="codeph">YES</code> if the map tile layer is online, or <code class="codeph">NO</code> if the map tile layer is offline. When a tile is missing from the cache and the map tile layer is online, the map tile server will fetch the tile and return the fetched tile to the client. When a tile is missing and the map tile layer is offline, the map tile server will not fetch the tile but will return a blank image to the client.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9313" headers="d7682e9257 ">
                                    <p>IS_INTERNAL</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9313 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9313 d7682e9263 ">
                                    <p><code class="codeph">YES</code> if the map source is an internal map source, or <code class="codeph">NO</code> if the map source is an external map source
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9328" headers="d7682e9257 ">
                                    <p>DEFINITION</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9328 d7682e9260 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9328 d7682e9263 ">
                                    <p>XML definition of the map tile layer, as described later in this section.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9338" headers="d7682e9257 ">
                                    <p>BASE_MAP</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9338 d7682e9260 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9338 d7682e9263 ">
                                    <p>Name of the cached map visualizer base map, if the map source is an internal map source</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d7682e9348" headers="d7682e9257 ">
                                    <p>MAP_ADAPTER</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d7682e9348 d7682e9260 ">
                                    <p>BLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d7682e9348 d7682e9263 ">
                                    <p>The jar file that contains the adapter Java classes of the external map services provider, as described later in this section. </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>For detailed information about using the USER_SDO_CACHED_MAPS view, see <a href="map-visualization-servers.html#GUID-A144D404-681B-4BBE-A3FF-E9826A5DF605">Map Tile Server Configuration</a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="The mapping metadata describing base maps, themes, and styles is stored in the global tables SDO_MAPS_TABLE, SDO_THEMES_TABLE, and SDO_STYLES_TABLE, which are owned by MDSYS.">Map Visualizer Metadata Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV10112"></a><div class="props_rev_3"><a id="GUID-F68E694A-F27A-4E89-9D65-D37D232C1254" name="GUID-F68E694A-F27A-4E89-9D65-D37D232C1254"></a><h3 id="JIMPV-GUID-F68E694A-F27A-4E89-9D65-D37D232C1254" class="sect3"><span class="enumeration_section">2.10 </span>Oracle Maps
               </h3>
               <div>
                  <p>Oracle Maps is the name for a suite of technologies for developing high-performance interactive web-based mapping applications. It consists of components from both the server side and the client side.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-F4F3B338-4BAA-4F43-A161-AC0401030231">Overview of Oracle Maps</a><br></li>
                     <li class="ulchildlink"><a href="map-visualization-concepts.html#GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8">Architecture for Oracle Maps Applications</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-DA1341E4-A1D8-4845-83D3-136C6BBCD7F9" title="This chapter explains concepts that you should be familiar with before using the map visualizer.">Map Visualization Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9780"></a><div class="props_rev_3"><a id="GUID-F4F3B338-4BAA-4F43-A161-AC0401030231" name="GUID-F4F3B338-4BAA-4F43-A161-AC0401030231"></a><h4 id="JIMPV-GUID-F4F3B338-4BAA-4F43-A161-AC0401030231" class="sect4"><span class="enumeration_section">2.10.1 </span>Overview of Oracle Maps
                  </h4>
                  <div>
                     <p>Oracle Maps consists of the following main components:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A map tile server that caches and serves pregenerated map image tiles upon a map image tile request</p>
                        </li>
                        <li>
                           <p>A map server that generates maps form spatial data to the mapping client upon a client map image request</p>
                        </li>
                        <li>
                           <p>A map data server that fetches spatial data from a spatial data provider to the mapping client</p>
                        </li>
                        <li>
                           <p>An Ajax-based JavaScript mapping client. (Ajax is an acronym for asynchronous JavaScript and XML.) This client provides functions for browsing and interacting with maps, as well as a flexible application programming interface (API).</p>
                        </li>
                     </ul>
                     <p>The map tile server (map image caching engine, described in <a href="map-visualization-servers.html#GUID-7E88B130-FB2F-47D1-A8B2-909CFB1454AC" title="The map tile server is a map image caching engine that fetches, caches, and serves pregenerated, fixed-size map image tiles.">Map Tile Server</a>) automatically fetches and caches map image tiles rendered by the Oracle Spatial and Graph map visualizer or other web-enabled map providers. It also serves cached map image tiles to the clients, which are web applications developed using the Oracle Maps client API. The clients can then automatically stitch multiple map image tiles into a seamless large map. Because the map image tiles are normally pregenerated and cached, the application users will experience fast map viewing performance.
                     </p>
                     <p>The JavaScript mapping client is a browser side map display engine that fetches map content from the servers, and presents it to client applications. It:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Fetches map images tiles from a map visualizer server, from a third party map service provider, or from its local disk-storage</p>
                        </li>
                        <li>
                           <p>Retrieves spatial data from a map visualizer server, from a third party spatial data provider, or from its local disk-storage and then renders the spatial data into map images by itself on the client side</p>
                        </li>
                        <li>
                           <p>Provides customizable map-related user interaction controls, such as map dragging and clicking, for the application</p>
                        </li>
                        <li>
                           <p>Provides other built-in features and utilities to customize the map contents and map layout design</p>
                        </li>
                     </ul>
                     <p>The JavaScript mapping client can be easily integrated with any web application or portal.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-F68E694A-F27A-4E89-9D65-D37D232C1254" title="Oracle Maps is the name for a suite of technologies for developing high-performance interactive web-based mapping applications. It consists of components from both the server side and the client side.">Oracle Maps</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9782"></a><a id="JIMPV9781"></a><div class="props_rev_3"><a id="GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8" name="GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8"></a><h4 id="JIMPV-GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8" class="sect4"><span class="enumeration_section">2.10.2 </span>Architecture for Oracle Maps Applications
                  </h4>
                  <div>
                     <p><a href="map-visualization-concepts.html#GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8__BABEDCCG">Figure 2-15</a> shows the architecture of web mapping applications that are developed using Oracle Maps.
                     </p>
                     <div class="figure" id="GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8__BABEDCCG">
                        <p class="titleinfigure">Figure 2-15 Architecture for Oracle Maps Applications</p><img src="img/arch_omaps2.jpg" alt="Description of Figure 2-15 follows" title="Description of Figure 2-15 follows" longdesc="img_text/arch_omaps2.html"><br><a href="img_text/arch_omaps2.html">Description of "Figure 2-15 Architecture for Oracle Maps Applications"</a></div>
                     <!-- class="figure" -->
                     <p>Referring to <a href="map-visualization-concepts.html#GUID-9CF9467D-6EE2-49C3-B95D-BA9FCEA17DE8__BABEDCCG">Figure 2-15</a>, applications interact with the Oracle Maps architecture as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The application is developed using JavaScript, and it runs inside the JavaScript engine of the web browser.</p>
                        </li>
                        <li>
                           <p>The application invokes the JavaScript map client to fetch the map image tiles from the map tile server, and then it displays the map in the web browser.</p>
                        </li>
                        <li>
                           <p>The application invokes the JavaScript map client to fetch the map image in other form of map services (such as WMS and WMTS) from the server and then displays the map image.</p>
                        </li>
                        <li>
                           <p>The application invokes the JavaScript map client to fetch spatial data from the map data server and then renders the map image to display.</p>
                        </li>
                        <li>
                           <p>The JavaScript map client controls map-related user interaction for the application.</p>
                        </li>
                        <li>
                           <p>When the map visualizer server receives a map image request, the request can be one of its several supported types: a map image tile request to its map tile server, a map image request to its map server, a WMS map request to its WMS server, or a WMTS map image tile request to its WMTS server. Each request will be handled by the server accordingly.</p>
                           <p>Example 1: When the map tile server receives a map image tile request, it first checks to see if the requested tile is already cached. If the tile is already in the cache, the cached tile is then returned to the client. If the tile is not in the cache, then the map tile server fetches the tile into the cache and returns it to the client. Tiles can be fetched either directly from the map visualizer map rendering engine or from an external web map service provider.</p>
                           <p>Example 2: When the server receives a map image request (instead of a map tile request) to its map server, the map server renders the image and returns it to the client. Note that in contrast to the map tile server, the map server generates a map according to a specified data bounds and renders the data onto an image with specified dimension, but it does not cache the map image.</p>
                        </li>
                        <li>
                           <p>When the map data server receives a map data request, it retrieves the spatial data and returns the spatial data, not map images, to the client.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="map-visualization-concepts.html#GUID-F68E694A-F27A-4E89-9D65-D37D232C1254" title="Oracle Maps is the name for a suite of technologies for developing high-performance interactive web-based mapping applications. It consists of components from both the server side and the client side.">Oracle Maps</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
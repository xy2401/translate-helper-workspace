<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Debugging Java Stored Procedures</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Java Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Java Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="java-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T00:55:24-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96468-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="running-Java-stored-procedures.html" title="Previous" type="text/html">
      <link rel="next" href="publishing-Java-classes.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JJDEV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="running-Java-stored-procedures.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="publishing-Java-classes.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="developing-Java-stored-procedures.html" property="item" typeof="WebPage"><span property="name"> Developing Java Stored Procedures </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Debugging Java Stored Procedures</li>
            </ol>
            <a id="GUID-B3934F43-CE6B-4744-8C9E-BB32AEB13D0A" name="GUID-B3934F43-CE6B-4744-8C9E-BB32AEB13D0A"></a><a id="JJDEV13634"></a>
            
            <h2 id="JJDEV-GUID-B3934F43-CE6B-4744-8C9E-BB32AEB13D0A" class="sect2"><span class="enumeration_section">6.4 </span>Debugging Java Stored Procedures
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Database provides the Java Debug Wire Protocol (JDWP) interface for debugging Java stored procedures. JDWP is supported by Java Development Kit (JDK) 1.3 and later versions.</p>
               <p>Following are a few features that the JDWP interface supports:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>Listening for connections</p>
                  </li>
                  <li>
                     <p>Changing the values of variables while debugging</p>
                  </li>
                  <li>
                     <p>Evaluating arbitrary Java expressions, including method evaluations</p>
                  </li>
                  <li>
                     <p>Setting or clearing breakpoints on a line or in a method</p>
                  </li>
                  <li>
                     <p>Stepping through the code</p>
                  </li>
                  <li>
                     <p>Setting or clearing field access or modification watchpoints</p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-B3934F43-CE6B-4744-8C9E-BB32AEB13D0A__GUID-62D257FC-833E-43E8-8BDB-8BCE3D4909EC">
                  <p class="notep1">Note:</p>
                  <p>Oracle JDeveloper provides a user-friendly integration with these debugging features. Other independent Integrated Development Environment (IDE) vendors can also integrate their own debuggers with Oracle Database.</p>
               </div>
               <p>This section discusses the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="debugging-Java-stored-procedures.html#GUID-B054928A-C147-49DC-AB69-EA07C1A43E99">Prerequisites for Debugging Java Stored Procedures</a></p>
                  </li>
                  <li>
                     <p><a href="debugging-Java-stored-procedures.html#GUID-18FDCC48-8217-44CA-912A-A1FB60287F82">Debugging Java Stored Procedures Using the jdb Debugger</a></p>
                  </li>
                  <li>
                     <p><a href="debugging-Java-stored-procedures.html#GUID-322AC812-614D-4D36-BCFE-375A34A9D6D0">Debugging Java Stored Procedures Using JDeveloper</a></p>
                  </li>
               </ul>
            </div><a id="JJDEV13635"></a><div class="props_rev_3"><a id="GUID-B054928A-C147-49DC-AB69-EA07C1A43E99" name="GUID-B054928A-C147-49DC-AB69-EA07C1A43E99"></a><h3 id="JJDEV-GUID-B054928A-C147-49DC-AB69-EA07C1A43E99" class="sect3"><span class="enumeration_section">6.4.1 </span>Prerequisites for Debugging Java Stored Procedures
               </h3>
               <div>
                  <div class="section">
                     <p>Ensure that the following prerequisites are met before debugging a Java stored procedure:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The Java code must be deployed to the database and can be optionally compiled with debug information.</p>
                        </li>
                        <li>
                           <p>Your database user account must have the following privileges:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">DEBUG CONNECT SESSION</code> privilege
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">DEBUG CONNECT ANY</code> privilege
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">DEBUG CONNECT ON USER &lt;user&gt;</code> privilege
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">DEBUG</code> object privilege on the stored procedure to be debugged
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>You must add the <code class="codeph">jdwp</code> privilege to the Access Control List (ACL) in the following way:
                           </p><pre class="oac_no_warn" dir="ltr">      SQL&gt; begin
      2    DBMS_NETWORK_ACL_ADMIN.APPEND_HOST_ACE(
      3      host =&gt; &lt;host_name&gt;,
      4      ace  =&gt; xs$ace_type(privilege_list =&gt; xs$name_list('jdwp'),
      5                          principal_name =&gt; &lt;user_name&gt;,
      6                          principal_type =&gt; xs_acl.ptype_db));
      7  end;
      8  /
</pre></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-B054928A-C147-49DC-AB69-EA07C1A43E99__GUID-C5D23A24-1A38-4CDC-A378-DB53267509B3">
                        <p class="notep1">See Also:</p>
                        <p><a href="../dbseg/managing-fine-grained-access-in-pl-sql-packages-and-types.html#DBSEG113" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for more information about adding privileges to an Access Control List
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13636"></a><div class="props_rev_3"><a id="GUID-18FDCC48-8217-44CA-912A-A1FB60287F82" name="GUID-18FDCC48-8217-44CA-912A-A1FB60287F82"></a><h3 id="JJDEV-GUID-18FDCC48-8217-44CA-912A-A1FB60287F82" class="sect3"><span class="enumeration_section">6.4.2 </span>Debugging Java Stored Procedures Using the jdb Debugger
               </h3>
               <div>
                  <div class="section">
                     <p>A <code class="codeph">jdb</code> session can be started with the <code class="codeph">-listen &lt;port&gt;</code> command. If you start the session in this way, then <code class="codeph">jdb</code> waits for a running Virtual Machine (VM) to connect at the specified port, using the standard connector.
                     </p>
                     <div class="infoboxnote" id="GUID-18FDCC48-8217-44CA-912A-A1FB60287F82__GUID-5CC0ADBD-1961-48E0-BFA0-9162390CBB5F">
                        <p class="notep1">Note:</p>
                        <p>While debugging a Java stored procedure, <code class="codeph">jdb</code> cannot launch a JVM session and only waits for the VM to connect.
                        </p>
                     </div>
                     <p>Perform the following steps to debug a Java program running in Oracle JVM:</p>
                     <ol>
                        <li>
                           <p>Run the following command in the debugging terminal:</p><pre class="pre codeblock"><code>jdb -listen 4000</code></pre><p>The following image shows the debugging terminal starting the <code class="codeph">jdb</code> session:
                           </p><img src="img/start_jdb.png" alt="Description of start_jdb.png follows" title="Description of start_jdb.png follows" longdesc="img_text/start_jdb.html"><br><a href="img_text/start_jdb.html">Description of the illustration start_jdb.png</a></li>
                        <li>
                           <p>Use an Oracle client such as SQL*Plus to issue the command for connecting to the debugger. You can connect in the following two ways:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Issue the debugger connection command from the same session that executes your Java stored procedure. For example, if you are using SQL*Plus, then issue the following command to open a TCP/IP connection to the designated machine and port for the JDWP session:</p><pre class="oac_no_warn" dir="ltr">      EXEC DBMS_DEBUG_JDWP.CONNECT_TCP(&lt;host_ip&gt;, &lt;port&gt;)
</pre><p>The following image shows the client terminal running the command for connecting to the debugging terminal:</p><img src="img/debug_1.png" alt="Description of debug_1.png follows" title="Description of debug_1.png follows" longdesc="img_text/debug_1.html"><br><a href="img_text/debug_1.html">Description of the illustration debug_1.png</a><p>After the debugger accepts the connection, issue the breakpoint in the debugger session and invoke the Java stored procedure in the Oracle client. The debugger will now halt at the first breakpoint that you specified.</p>
                              </li>
                              <li>
                                 <p>Issue the debugger connection command in another session and specify two additional parameters as shown in the following example:</p><pre class="pre codeblock"><code>      EXEC DBMS_DEBUG_JDWP.CONNECT_TCP(&lt;host_ip&gt;, &lt;port&gt;, &lt;session_id&gt;, &lt;session_serial&gt;)</code></pre><p>In the preceding command, <code class="codeph">session_id</code> and <code class="codeph">session_serial</code> identify the database session, where the Java stored procedure is executed, which the user wants to connect to the debugger. To connect another session to the debugger, the user must have either <code class="codeph">DEBUG CONNECT</code> user privilege on the logon user of that session, or the <code class="codeph">DEBUG CONNECT ANY</code> system privilege.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Once connection is established successfully, you can add breakpoints in the debugging terminal using the following syntax:</p><pre class="pre codeblock"><code>stop at &lt;ClassName&gt;:&lt;LineNumber&gt;</code></pre><p>The following image shows how to add breakpoints to the debugging terminal:</p><img src="img/addbreakpoint.png" alt="Description of addbreakpoint.png follows" title="Description of addbreakpoint.png follows" longdesc="img_text/addbreakpoint.html"><br><a href="img_text/addbreakpoint.html">Description of the illustration addbreakpoint.png</a></li>
                        <li>
                           <p>In the Oracle client used in step 2, call the SQL wrapper for the Java program in the following way:</p><pre class="pre codeblock"><code>call &lt;SQLWrapperName&gt;.&lt;MethodName&gt;</code></pre></li>
                        <li>
                           <p>Following are a few <code class="codeph">jdb</code> commands that you can use to debug the code in the debugging terminal:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>  For Going one step at a time: <code class="codeph">step</code></p>
                              </li>
                              <li>
                                 <p>To check the value of a variable value: <code class="codeph">print&lt;ClassName&gt;:&lt;VariableName&gt;</code></p>
                              </li>
                              <li>
                                 <p>To continue: <code class="codeph">cont</code></p>
                              </li>
                              <li>
                                 <p>To clear break points: <code class="codeph">clear</code></p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13637"></a><div class="props_rev_3"><a id="GUID-322AC812-614D-4D36-BCFE-375A34A9D6D0" name="GUID-322AC812-614D-4D36-BCFE-375A34A9D6D0"></a><h3 id="JJDEV-GUID-322AC812-614D-4D36-BCFE-375A34A9D6D0" class="sect3"><span class="enumeration_section">6.4.3 </span>Debugging Java Stored Procedures Using JDeveloper
               </h3>
               <div>
                  <div class="section">
                     <p>You can debug Java stored procedures and PL/SQL programs seamlessly using JDeveloper. When you debug PL/SQL programs and Java stored procedures locally, then the call to initiate debugging is made directly from JDeveloper. JDeveloper performs the following activities:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>It automatically launches the program that you want to debug (also called debuggee)</span></li>
                     <li><span>It attaches the debugger to that program.</span></li>
                  </ol>
                  <div class="section">
                     <p>The main difference between remote debugging and local debugging PL/SQL programs and Java stored procedures is how you start the debugging session. For remote debugging, you must manually launch the program that you want to debug with an Oracle client such as SQL*Plus, jobs created using the <code class="codeph">DBMS_SCHEDULER</code> package, an OCI program, or a trigger firing. Then, you must establish the connection from the database program that you want to debug (debuggee) to the JDeveloper debugger. After the debuggee is launched and the JDeveloper debugger is attached to it, remote debugging is very similar to local debugging.
                     </p>
                     <div class="infoboxnote" id="GUID-322AC812-614D-4D36-BCFE-375A34A9D6D0__GUID-5B2CF6D2-7810-48A7-92C7-F4E8095B4345">
                        <p class="notep1">Note:</p>
                        <p>You can optionally turn off JIT for better debugging experience.</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-322AC812-614D-4D36-BCFE-375A34A9D6D0__GUID-2170259B-DFEB-498B-BF68-59E4DD7A4B57">
                        <p class="notep1">See Also:</p>
                        <p>For more information about using JDeveloper for debugging Java stored procedures, visit the following page</p>
                        <p><a href="http://docs.oracle.com/cd/E16162_01/user.1112/e17455/dev_stored_proc.htm#BEJEJIHD" target="_blank">http://docs.oracle.com/cd/E16162_01/user.1112/e17455/dev_stored_proc.htm#BEJEJIHD</a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
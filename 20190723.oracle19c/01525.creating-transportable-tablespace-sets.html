<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter explains how to use RMAN to create transportable tablespace sets by restoring backups.">
      <meta name="description" content="This chapter explains how to use RMAN to create transportable tablespace sets by restoring backups.">
      <title>Creating Transportable Tablespace Sets</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="This chapter explains how to use RMAN to create transportable tablespace sets by restoring backups.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="rman-duplicating-databases-advanced.html" title="Previous" type="text/html">
      <link rel="next" href="rman-transporting-data-across-platforms.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="rman-duplicating-databases-advanced.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="rman-transporting-data-across-platforms.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-transfering-data-rman.html" property="item" typeof="WebPage"><span property="name"> Transferring Data with RMAN</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Creating Transportable Tablespace Sets</li>
            </ol>
            <a id="GUID-123F4E45-0324-4D1D-980F-E176A9E22C87" name="GUID-123F4E45-0324-4D1D-980F-E176A9E22C87"></a><a id="BRADV05141"></a>
            
            <h2 id="BRADV-GUID-123F4E45-0324-4D1D-980F-E176A9E22C87" class="sect2"><span class="enumeration_chapter">27 </span> Creating Transportable Tablespace Sets
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how to use RMAN to create transportable tablespace sets by restoring backups. </p>
               <p>This chapter contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="creating-transportable-tablespace-sets.html#GUID-E118186B-AF31-4CD1-ABA7-2C9F1A07EB98" title="You can use RMAN or the transportable tablespaces feature to create transportable tablespace sets.">Overview of Creating Transportable Tablespace Sets</a></p>
                  </li>
                  <li>
                     <p><a href="creating-transportable-tablespace-sets.html#GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED" title="RMAN enables you to customise initialization parameters that are used for the auxiliary instance.">Customizing Initialization Parameters for the Auxiliary Instance</a></p>
                  </li>
                  <li>
                     <p><a href="creating-transportable-tablespace-sets.html#GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047" title="This procedure describes the use of TRANSPOR TTABLESPACE in the most basic and automated case.">Creating a Transportable Tablespace Set</a></p>
                  </li>
                  <li>
                     <p><a href="creating-transportable-tablespace-sets.html#GUID-4486B94F-E39B-4E40-8D7D-9F6C65904E01" title="When the RMAN TRANSPORT TABLESPACE command fails, the failed auxiliary instance files are left intact in the auxiliary instance destination for troubleshooting.">Troubleshooting the Creation of Transportable Tablespace Sets</a></p>
                  </li>
                  <li>
                     <p><a href="creating-transportable-tablespace-sets.html#GUID-8692A076-0EF0-4B98-8381-957D143D2CDC" title="You can specify a target time or SCN with the TRANSPORT TABLESPACE command. During the tablespace transport operation, RMAN restores the tablespace at the auxiliary instance with backups from before the target time and performs point-in-time recovery on the auxiliary database to the specified target time. Backups and archived redo logs needed for this point-in-time recovery must be available.You can change the names of the Data Pump export dump file for the transportable set, the sample import script for use at the target database, the log file generated by Data Pump Export, and the directory to which they are written.Several rules are applicable to the location of auxiliary instance files created during the transport. You can use the SET NEWNAME command to specify a location for auxiliary data files.You can use the CONFIGURE AUXNAME command to specify persistent locations for transportable tablespace set or auxiliary set data files. RMAN restores each data file for which a CONFIGURE AUXNAME command has been used to the specified location before recovery. RMAN deletes auxiliary set data files when the operation is complete, unless the operation failed.If you use the AUXILIARY DESTINATION option with the TRANSPORT TABLESPACE command, then any auxiliary set file that is not moved to another location using a SET NEWNAME or CONFIGURE AUXNAME command is stored in the auxiliary destination during the TRANSPORT TABLESPACE operation.You can use the LOG_FILE_NAME_CONVERT and DB_FILE_NAME_CONVERT initialization parameters in an auxiliary instance parameter file to determine the names for online redo logs and other database files at the auxiliary instance. If no AUXILIARY DESTINATION clause is specified on the TRANSPORT TABLESPACE command, then these parameters determine the location of any files for which no CONFIGURE AUXNAME or SET NEWNAME command was run.">Transportable Tablespace Set Scenarios</a></p>
                  </li>
               </ul>
            </div><a id="BRADV89959"></a><div class="props_rev_3"><a id="GUID-E118186B-AF31-4CD1-ABA7-2C9F1A07EB98" name="GUID-E118186B-AF31-4CD1-ABA7-2C9F1A07EB98"></a><h3 id="BRADV-GUID-E118186B-AF31-4CD1-ABA7-2C9F1A07EB98" class="sect3"><span class="enumeration_section">27.1 </span>Overview of Creating Transportable Tablespace Sets
               </h3>
               <div>
                  <p>You can use RMAN or the transportable tablespaces feature to create transportable tablespace sets.</p>
                  <p>This section explains the basic concepts and tasks involved in creating transportable tablespace sets from RMAN backups. The discussion in this chapter assumes that you are familiar with the <a href="glossary.html#GUID-E843F9DE-6FCC-4614-BA56-486F6D9BBD25"><span class="xrefglossterm">transportable tablespace</span></a> procedure described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ADMIN01101" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a>. The procedure in this chapter is an alternative technique for generating transportable tablespace sets.
                  </p>
               </div><a id="BRADV89960"></a><div class="props_rev_3"><a id="GUID-BA6B8057-FC2C-429F-BF76-E17245231E47" name="GUID-BA6B8057-FC2C-429F-BF76-E17245231E47"></a><h4 id="BRADV-GUID-BA6B8057-FC2C-429F-BF76-E17245231E47" class="sect4"><span class="enumeration_section">27.1.1 </span>Purpose of Creating Transportable Tablespace Sets
                  </h4>
                  <div>
                     <p>A transportable tablespace set contains data files for a set of tablespaces and an export file containing structural metadata for the set of tablespaces. The export file is generated by Data Pump Export.</p>
                     <p>One use of transportable tablespace sets is to create a tablespace repository. For example, if you have a database with some tablespaces used for quarterly reporting, you can create transportable sets for these tablespaces for storage in a tablespace repository. Subsequently, versions of the tablespace can be requested from the repository and attached to another database for use in generating reports.</p>
                     <p>A key benefit of the RMAN <code class="codeph">TRANSPORT TABLESPACE</code> command is that it does not need access to the live data files from the tablespaces to be transported. In contrast, the transportable tablespace technique described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ADMIN01101" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> requires that the tablespaces to be transported are open read-only during the transport. Thus, transporting from backups improves database availability, especially for large tablespaces, because the tablespaces to be transported can remain open for writes during the operation. Also, placing a tablespace in read-only mode can take a long time, depending on current database activity.
                     </p>
                     <p>The RMAN <code class="codeph">TRANSPORT TABLESPACE</code> command also enables you to specify a target point in time, SCN, or restore point during your recovery window and transport tablespace data as it existed at that time. For example, if your <a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a> guarantees a 1 week recovery window, and if you want to create transportable tablespaces based on the contents of the database on the last day of the month, then RMAN can perform this task at any time during the first week of the next month.
                     </p>
                  </div>
               </div><a id="BRADV464"></a><a id="BRADV89961"></a><div class="props_rev_3"><a id="GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75" name="GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75"></a><h4 id="BRADV-GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75" class="sect4"><span class="enumeration_section">27.1.2 </span>Basic Concepts of Transportable Tablespace Sets
                  </h4>
                  <div>
                     <p>You create a transportable tablespace set by connecting RMAN to a source database as <code class="codeph">TARGET</code> and then executing the <code class="codeph">TRANSPORT TABLESPACE</code> command. The source database contains the tablespaces to be transported.
                     </p>
                     <p>You must have a backup of all needed tablespaces and archived redo log files available for use by RMAN that can be recovered to the target point in time for the <code class="codeph">TRANSPORT TABLESPACE</code> operation. <a href="creating-transportable-tablespace-sets.html#GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75__CHDBFHBE">Figure 27-1</a> illustrates the basic process of transportable tablespace creation.
                     </p>
                     <div class="figure" id="GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75__CHDBFHBE">
                        <p class="titleinfigure">Figure 27-1 RMAN Transportable Tablespace from Backup: Architecture</p><img src="img/bradv037.gif" width="413" alt="Description of Figure 27-1 follows" title="Description of Figure 27-1 follows" longdesc="img_text/bradv037.html"><br><a href="img_text/bradv037.html">Description of "Figure 27-1 RMAN Transportable Tablespace from Backup: Architecture"</a></div>
                     <!-- class="figure" -->
                     <p>The process shown in <a href="creating-transportable-tablespace-sets.html#GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75__CHDBFHBE">Figure 27-1</a> occurs in the following phases:
                     </p>
                     <ol>
                        <li>
                           <p>RMAN starts an <a href="glossary.html#GUID-4B8BBEA0-2F0F-4C5E-AE69-F1EE4DBA1B46"><span class="xrefglossterm">auxiliary instance</span></a>.
                           </p>
                           <p>An auxiliary instance is created by RMAN on the same host as the source database to perform the restore and recovery of the tablespaces. RMAN automatically creates an initialization parameter file for the auxiliary instance and starts it <code class="codeph">NOMOUNT</code>.
                           </p>
                        </li>
                        <li>
                           <p>RMAN restores a backup of the source database control file to serve as the auxiliary instance control file and mounts this control file.</p>
                        </li>
                        <li>
                           <p>RMAN restores <a href="glossary.html#GUID-C83736EA-941E-40D5-9BC4-04AD86D5CDB2"><span class="xrefglossterm">auxiliary set</span></a> and transportable set data files from the backups of the source database. 
                           </p>
                           <p>The auxiliary set includes data files and other files required for the tablespace transport but which are not themselves part of the transportable tablespace set. The auxiliary set typically includes the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces, temp files, and data files containing rollback or undo segments. The auxiliary instance has other files associated with it, such as its own control file, parameter file, and online logs, but they are not part of the auxiliary set.
                           </p>
                           <p>RMAN stores the auxiliary data files in the selected <a href="glossary.html#GUID-84F742CC-9172-4616-90AA-43CED507D4BB"><span class="xrefglossterm">auxiliary destination</span></a>. The auxiliary destination is a disk location where RMAN can store auxiliary set files such as the parameter file, data files (other than those in the transportable set), control files, and online logs of the auxiliary instance during the transport. If the transport succeeds, then RMAN deletes these files.
                           </p>
                           <p>RMAN stores the transportable set files in the <a href="glossary.html#GUID-D4C76365-E59D-4B5B-B62F-7E20F259BAA0"><span class="xrefglossterm">tablespace destination</span></a>. The tablespace destination is a disk location that by default contains the data file copies and other output files when the tablespace transport command completes.
                           </p>
                        </li>
                        <li>
                           <p>RMAN performs <a href="glossary.html#GUID-FCC8BB91-79B6-4AF1-974A-43E75CD161E3"><span class="xrefglossterm">database point-in-time recovery (DBPITR)</span></a> at the auxiliary instance.
                           </p>
                           <p>The recovery updates auxiliary and transportable set data files to their contents as of the target time specified for the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command. If no target time is specified, then RMAN recovers with all available redo. RMAN restores archived redo logs from backup as necessary at the auxiliary destination (or other location) and deletes them after they are applied.
                           </p>
                        </li>
                        <li>
                           <p>RMAN opens the auxiliary database with the <code class="codeph">RESETLOGS</code> option. 
                           </p>
                           <p>The data files now reflect the tablespace contents as of the target SCN for the tablespace transport operation.</p>
                        </li>
                        <li>
                           <p>RMAN places the transportable set tablespaces of the auxiliary instance into read-only mode. RMAN also invokes Data Pump Export in transportable tablespace mode to create the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> for the transportable set. 
                           </p>
                           <p>By default, the dump file is located in the tablespace destination. You can specify an alternate location for the dump file.</p>
                           <p>RMAN also generates the sample Data Pump import script for use when plugging in the transported tablespaces at a target database. The contents of this script are written to a file named <code class="codeph">impscript.sql</code> in the tablespace destination. The commands for the script are also included in the RMAN command output.
                           </p>
                        </li>
                        <li>
                           <p>If the preceding steps are successful, then RMAN shuts down the auxiliary instance and deletes all files created during the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> operation except for the transportable set files, the Data Pump Export file, and the sample import script.
                           </p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75__GUID-4D9E97EE-8FCC-4068-9A03-F0AF9E903519">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-4F402748-9F8E-4067-A579-F58A3399FE9A" title="You can change the names of the Data Pump export dump file for the transportable set, the sample import script for use at the target database, the log file generated by Data Pump Export, and the directory to which they are written.">Specifying Locations for Data Pump Files</a>"</span></p>
                     </div>
                  </div>
               </div><a id="BRADV89962"></a><div class="props_rev_3"><a id="GUID-C558C7F8-9620-4E89-AC34-E65FEEF06D9F" name="GUID-C558C7F8-9620-4E89-AC34-E65FEEF06D9F"></a><h4 id="BRADV-GUID-C558C7F8-9620-4E89-AC34-E65FEEF06D9F" class="sect4"><span class="enumeration_section">27.1.3 </span>Basic Steps of Creating Transportable Tablespace Sets
                  </h4>
                  <div>
                     <p>To create transportable tablespace sets, you set the required parameters in the auxiliary instance initialization parameter file and then use the <code class="codeph">TRANSPORT TABLESPACE</code> command.
                     </p>
                     <div class="section">
                        <p>Before creating transportable tablespace sets you must meet several prerequisites.</p>
                        <p>The basic steps of creating transportable tablespace sets are as follows:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start the RMAN client and connect to the source database and, if used, the recovery catalog.</span></li>
                        <li class="stepexpand"><span>Ensure that the prerequisites for the  <code class="codeph">TRANSPORT TABLESPACE</code> command are met.</span></li>
                        <li class="stepexpand"><span>If necessary, set additional parameters in the auxiliary instance parameter file.</span><div>
                              <p>This task is described in <span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED" title="RMAN enables you to customise initialization parameters that are used for the auxiliary instance.">Customizing Initialization Parameters for the Auxiliary Instance</a>"</span>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">TRANSPORT TABLESPACE</code> command.</span><div>
                              <p>This basic technique is described in <span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047" title="This procedure describes the use of TRANSPOR TTABLESPACE in the most basic and automated case.">Creating a Transportable Tablespace Set</a>"</span>. Variations on this technique are described in <span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-8692A076-0EF0-4B98-8381-957D143D2CDC" title="You can specify a target time or SCN with the TRANSPORT TABLESPACE command. During the tablespace transport operation, RMAN restores the tablespace at the auxiliary instance with backups from before the target time and performs point-in-time recovery on the auxiliary database to the specified target time. Backups and archived redo logs needed for this point-in-time recovery must be available.You can change the names of the Data Pump export dump file for the transportable set, the sample import script for use at the target database, the log file generated by Data Pump Export, and the directory to which they are written.Several rules are applicable to the location of auxiliary instance files created during the transport. You can use the SET NEWNAME command to specify a location for auxiliary data files.You can use the CONFIGURE AUXNAME command to specify persistent locations for transportable tablespace set or auxiliary set data files. RMAN restores each data file for which a CONFIGURE AUXNAME command has been used to the specified location before recovery. RMAN deletes auxiliary set data files when the operation is complete, unless the operation failed.If you use the AUXILIARY DESTINATION option with the TRANSPORT TABLESPACE command, then any auxiliary set file that is not moved to another location using a SET NEWNAME or CONFIGURE AUXNAME command is stored in the auxiliary destination during the TRANSPORT TABLESPACE operation.You can use the LOG_FILE_NAME_CONVERT and DB_FILE_NAME_CONVERT initialization parameters in an auxiliary instance parameter file to determine the names for online redo logs and other database files at the auxiliary instance. If no AUXILIARY DESTINATION clause is specified on the TRANSPORT TABLESPACE command, then these parameters determine the location of any files for which no CONFIGURE AUXNAME or SET NEWNAME command was run.">Transportable Tablespace Set Scenarios</a>"</span>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the <code class="codeph">TRANSPORT TABLESPACE</code> command fails, troubleshoot the problem and then retry the command until it succeeds.</span><div>
                              <p>This technique is described in <span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-4486B94F-E39B-4E40-8D7D-9F6C65904E01" title="When the RMAN TRANSPORT TABLESPACE command fails, the failed auxiliary instance files are left intact in the auxiliary instance destination for troubleshooting.">Troubleshooting the Creation of Transportable Tablespace Sets</a>"</span>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Return to the procedure for transporting tablespaces described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ADMIN01101" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a>.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-C558C7F8-9620-4E89-AC34-E65FEEF06D9F__GUID-DE3FE150-4979-40A2-8C90-C6376E7714FD">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF1919" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for the prerequisites of the <code class="codeph">TRANSPORT TABLESPACE</code> command
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV89963"></a><div class="props_rev_3"><a id="GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED" name="GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED"></a><h3 id="BRADV-GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED" class="sect3"><span class="enumeration_section">27.2 </span>Customizing Initialization Parameters for the Auxiliary Instance
               </h3>
               <div>
                  <p>RMAN enables you to customise initialization parameters that are used for the auxiliary instance.</p>
                  <div class="section">
                     <p>When RMAN creates the auxiliary instance, it creates an initialization parameter file. The default values work for most <code class="codeph">TRANSPORT TABLESPACE</code> cases, especially if you specify the <code class="codeph">AUXILIARY DESTINATION</code> option on the <code class="codeph">TRANSPORT TABLESPACE</code> command. RMAN can also use an auxiliary instance parameter file that contains values for additional initialization parameters. These values override the values of parameters defined in the default initialization parameter file.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED__GUID-59227D84-8F37-4949-B460-A3F5031EE041">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="creating-transportable-tablespace-sets.html#GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602" title="You can use the LOG_FILE_NAME_CONVERT and DB_FILE_NAME_CONVERT initialization parameters in an auxiliary instance parameter file to determine the names for online redo logs and other database files at the auxiliary instance. If no AUXILIARY DESTINATION clause is specified on the TRANSPORT TABLESPACE command, then these parameters determine the location of any files for which no CONFIGURE AUXNAME or SET NEWNAME command was run.">Using Initialization Parameters to Name Auxiliary Files</a></p>
                           </li>
                           <li>
                              <p><a href="creating-transportable-tablespace-sets.html#GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF" title="RMAN defines certain basic initialization parameters for the automatic auxiliary instance that is used with transportable tablespaces.">About Setting Initialization Parameters for the RMAN Auxiliary Instance</a></p>
                           </li>
                           <li>
                              <p><a href="creating-transportable-tablespace-sets.html#GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE" title="By default, RMAN looks for the auxiliary initialization parameter file at an operating system-dependent location on the host running the RMAN client. This location may not be on the host running the auxiliary instance. For UNIX systems, this location is ?/rdbms/admin/params_auxint.ora, where the question mark (?) stands for ORACLE_HOME on the host running RMAN. If no file is found in the default location, then RMAN does not generate an error.">Setting the Location of the Auxiliary Instance Parameter File</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="BRADV465"></a><a id="BRADV89964"></a><div class="props_rev_3"><a id="GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF" name="GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF"></a><h4 id="BRADV-GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF" class="sect4"><span class="enumeration_section">27.2.1 </span>About Setting Initialization Parameters for the RMAN Auxiliary Instance
                  </h4>
                  <div>
                     <p>RMAN defines certain basic initialization parameters for the automatic auxiliary instance that is used with transportable tablespaces.</p>
                     <p>You might use an auxiliary instance parameter file to include additional parameters for the following reasons:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To increase <code class="codeph">STREAMS_POOL_SIZE</code> and <code class="codeph">SHARED_POOL_SIZE</code> if needed for Data Pump Export.
                           </p>
                        </li>
                        <li>
                           <p>To manage locations for auxiliary instance data files. For example, you do not want all auxiliary instance data files stored in the same location on disk, but you do not want to specify the location of every file individually.</p>
                        </li>
                        <li>
                           <p>To specify names for online redo logs with <code class="codeph">LOG_FILE_NAME_CONVERT</code> .
                           </p>
                        </li>
                     </ul>
                     <p>The auxiliary instance parameter file is not intended to be a complete initialization parameter file for the auxiliary instance. Any parameters specified are added to or override the default parameters for the auxiliary instance. It is not necessary to specify parameters in the initialization file that you do not intend to override. </p>
                     <p>The following table describes the initialization parameters for the auxiliary instance.</p>
                     <div class="tblformal" id="GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF__CHDDBDEH">
                        <p class="titleintable">Table 27-1 Default Initialization Parameters for the Auxiliary Instance</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Default Initialization Parameters for the Auxiliary Instance" summary="Default initialization parameters" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d125378e1029">Initialization Parameter</th>
                                 <th align="left" valign="bottom" width="71%" id="d125378e1032">Value</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d125378e1037" headers="d125378e1029 ">
                                    <p><code class="codeph">DB_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d125378e1037 d125378e1032 ">
                                    <p>Same as <code class="codeph">DB_NAME</code> of the source database.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d125378e1049" headers="d125378e1029 ">
                                    <p><code class="codeph">COMPATIBLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d125378e1049 d125378e1032 ">
                                    <p>Same as the compatible setting of the source database.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d125378e1057" headers="d125378e1029 ">
                                    <p><code class="codeph">DB_UNIQUE_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d125378e1057 d125378e1032 ">
                                    <p>Generated unique value based on <code class="codeph">DB_NAME</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d125378e1068" headers="d125378e1029 ">
                                    <p><code class="codeph">DB_BLOCK_SIZE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d125378e1068 d125378e1032 ">
                                    <p>Same as the <code class="codeph">DB_BLOCK_SIZE</code> of the source database.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d125378e1079" headers="d125378e1029 ">
                                    <p><code class="codeph">DB_FILES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d125378e1079 d125378e1032 ">
                                    <p>Same value as <code class="codeph">DB_FILES</code> for the source database
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d125378e1090" headers="d125378e1029 ">
                                    <p><code class="codeph">SGA_TARGET</code></p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d125378e1090 d125378e1032 ">
                                    <p>280M recommended value.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d125378e1098" headers="d125378e1029 ">
                                    <p><code class="codeph">DB_CREATE_FILE_DEST</code></p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d125378e1098 d125378e1032 ">
                                    <p>Auxiliary destination (only if the <code class="codeph">AUXILIARY DESTINATION</code> argument to <code class="codeph">TRANSPORT TABLESPACE</code> is set). RMAN creates Oracle managed control files and online logs in this location.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Overriding a basic initialization parameter with an inappropriate value in the auxiliary instance parameter file can cause <code class="codeph">TRANSPORT TABLESPACE</code> to fail. If you encounter a problem, then try returning the initialization parameter to its default value.
                     </p>
                     <div class="infoboxnotealso" id="GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF__GUID-B534B6E2-EF72-4A06-8703-95C9A6235097">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602" title="You can use the LOG_FILE_NAME_CONVERT and DB_FILE_NAME_CONVERT initialization parameters in an auxiliary instance parameter file to determine the names for online redo logs and other database files at the auxiliary instance. If no AUXILIARY DESTINATION clause is specified on the TRANSPORT TABLESPACE command, then these parameters determine the location of any files for which no CONFIGURE AUXNAME or SET NEWNAME command was run.">Using Initialization Parameters to Name Auxiliary Files</a>"</span> to learn how to use <code class="codeph">DB_FILE_NAME_CONVERT</code> and <code class="codeph">LOG_FILE_NAME_CONVERT</code> to name files
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV466"></a><a id="BRADV89965"></a><div class="props_rev_3"><a id="GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE" name="GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE"></a><h4 id="BRADV-GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE" class="sect4"><span class="enumeration_section">27.2.2 </span>Setting the Location of the Auxiliary Instance Parameter File
                  </h4>
                  <div>
                     <p>By default, RMAN looks for the auxiliary initialization parameter file at an operating system-dependent location on the host running the RMAN client. This location may not be on the host running the auxiliary instance. For UNIX systems, this location is <code class="codeph">?/rdbms/admin/params_auxint.ora</code>, where the question mark (<code class="codeph">?</code>) stands for <code class="codeph">ORACLE_HOME</code> on the host running RMAN. If no file is found in the default location, then RMAN does not generate an error.
                     </p>
                     <div class="section">
                        <p>If you use the default initialization parameters for the auxiliary instance, then check whether an auxiliary instance parameter file exists before running <code class="codeph">TRANSPORT TABLESPACE</code> .
                        </p>
                        <p>To specify a different location for the auxiliary instance parameter file, you can use the RMAN <code class="codeph">SET AUXILIARY INSTANCE PARAMETER FILE</code> command in a <code class="codeph">RUN</code> block before the <code class="codeph">TRANSPORT TABLESPACE</code> command. As with the default location of the auxiliary instance parameter file, the path specified when using the <code class="codeph">SET AUXILIARY INSTANCE PARAMETER FILE</code> command is a client-side path.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE__CHDJBFEI">
                        <p class="titleinexample">Example 27-1 Specifying an Auxiliary Instance Parameter File</p>
                        <p>This example describes how you can use the initialization parameter file with <code class="codeph">TRANSPORT TABLESPACE</code>.
                        </p>
                        <p>Create a file named <code class="codeph">/tmp/auxinstparams.ora</code> on the host running the RMAN client. This file contains the following initialization parameter:
                        </p><pre class="oac_no_warn" dir="ltr">SHARED_POOL_SIZE=150M;
</pre><p>The <code class="codeph">SHARED_POOL_SIZE</code> parameter in <code class="codeph">/tmp/auxinstparams.ora</code> overrides the default value used for <code class="codeph">SHARED_POOL_SIZE</code> when RMAN creates the auxiliary instance.
                        </p>
                        <p>The following commands use an initialization parameter file when creating transportable tablespaces.</p><pre class="oac_no_warn" dir="ltr">RUN
{
  SET AUXILIARY INSTANCE PARAMETER FILE TO '/tmp/auxinstparams.ora';
  TRANSPORT TABLESPACE tbs_2 
    TABLESPACE DESTINATION '/disk1/transportdest' 
    AUXILIARY DESTINATION '/disk1/auxdest';
}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="BRADV467"></a><a id="BRADV89966"></a><div class="props_rev_3"><a id="GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047" name="GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047"></a><h3 id="BRADV-GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047" class="sect3"><span class="enumeration_section">27.3 </span>Creating a Transportable Tablespace Set
               </h3>
               <div>
                  <p>This procedure describes the use of <code class="codeph">TRANSPOR TTABLESPACE</code> in the most basic and automated case. 
                  </p>
                  <div class="section">
                     <p>It is assumed that you have met the prerequisites required for the <code class="codeph">TRANSPORT TABLESPACE</code> command. <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF1919" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a>. It is also assumed that you have met the following requirements described in <a href="../admin/transporting-data.html#ADMIN01101" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a>:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Confirmed that tablespace transport is supported between your source and destination platforms</p>
                        </li>
                        <li>
                           <p>Identified a self-contained set of tablespaces to include in the transportable set</p>
                        </li>
                     </ul>
                     <p>To create a transportable tablespace set:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start the RMAN client and connect to the source database and, if used, the recovery catalog database. </span></li>
                     <li class="stepexpand"><span>Run the <code class="codeph">TRANSPORT TABLESPACE</code> command in RMAN.</span><div>
                           <p>In the most basic case, you specify an <code class="codeph">AUXILIARY DESTINATION</code> clause, which is optional but recommended. RMAN uses default values that work for most cases. If you do not specify an auxiliary location, then ensure that locations are specified for all auxiliary instance files. See the rules described in <span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC" title="Several rules are applicable to the location of auxiliary instance files created during the transport.">Specifying Auxiliary File Locations with Transportable Tablespaces</a>"</span> to learn how to name auxiliary files.
                           </p>
                           <p>The following example creates a transportable tablespace set that includes tablespaces <code class="codeph">tbs_2</code> and <code class="codeph">tbs_3</code>.
                           </p><pre class="oac_no_warn" dir="ltr">TRANSPORT TABLESPACE tbs_2, tbs_3
   TABLESPACE DESTINATION '/disk1/transportdest'
   AUXILIARY DESTINATION '/disk1/auxdest';
</pre><p>After the command completes successfully, note the following results:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The transportable set data files are left in the location <code class="codeph">/disk1/transportdest</code> with their original names. The transportable tablespace set data files are not automatically converted to the endian format of the destination database by <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code>. If necessary, use the RMAN <code class="codeph">CONVERT</code> command to convert the data files to the endian format of the destination database after creating the transportable set.
                                 </p>
                              </li>
                              <li>
                                 <p>The Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> for the transportable set is named <code class="codeph">dmpfile.dmp</code>, the export log is named <code class="codeph">explog.log</code>, and the sample import script is named <code class="codeph">impscrpt.sql</code>. 
                                 </p>
                                 <p>All files are created in <code class="codeph">/disk1/transportdest</code>. If a file under the name of the export dump file exists in the tablespace destination, then <code class="codeph">TRANSPORT TABLESPACE</code> fails when it calls Data Pump Export. If you are repeating a previous <code class="codeph">TRANSPORT TABLESPACE</code> operation, delete the previous output files, including the export dump file.
                                 </p>
                              </li>
                              <li>
                                 <p>The auxiliary set files are removed from <code class="codeph">/disk1/auxdest</code>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>If necessary, edit the sample import script.</span><div>
                           <p>The sample import script assumes that the files used to import the tablespaces into the destination database are stored in the same locations where they were created by <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code>. If files have been moved to new disk locations before being plugged in, then you must update the sample script with the new locations of the files before using the script to plug in the transported tablespaces.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Return to the process for transporting tablespaces described in <a href="../admin/transporting-data.html#ADMIN01101" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a>.</span></li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047__GUID-21DB67D9-672E-41A1-B8E2-973EFD073F9B">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-8692A076-0EF0-4B98-8381-957D143D2CDC" title="You can specify a target time or SCN with the TRANSPORT TABLESPACE command. During the tablespace transport operation, RMAN restores the tablespace at the auxiliary instance with backups from before the target time and performs point-in-time recovery on the auxiliary database to the specified target time. Backups and archived redo logs needed for this point-in-time recovery must be available.You can change the names of the Data Pump export dump file for the transportable set, the sample import script for use at the target database, the log file generated by Data Pump Export, and the directory to which they are written.Several rules are applicable to the location of auxiliary instance files created during the transport. You can use the SET NEWNAME command to specify a location for auxiliary data files.You can use the CONFIGURE AUXNAME command to specify persistent locations for transportable tablespace set or auxiliary set data files. RMAN restores each data file for which a CONFIGURE AUXNAME command has been used to the specified location before recovery. RMAN deletes auxiliary set data files when the operation is complete, unless the operation failed.If you use the AUXILIARY DESTINATION option with the TRANSPORT TABLESPACE command, then any auxiliary set file that is not moved to another location using a SET NEWNAME or CONFIGURE AUXNAME command is stored in the auxiliary destination during the TRANSPORT TABLESPACE operation.You can use the LOG_FILE_NAME_CONVERT and DB_FILE_NAME_CONVERT initialization parameters in an auxiliary instance parameter file to determine the names for online redo logs and other database files at the auxiliary instance. If no AUXILIARY DESTINATION clause is specified on the TRANSPORT TABLESPACE command, then these parameters determine the location of any files for which no CONFIGURE AUXNAME or SET NEWNAME command was run.">Transportable Tablespace Set Scenarios</a>"</span> for variations on the basic case described in this section.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89967"></a><div class="props_rev_3"><a id="GUID-4486B94F-E39B-4E40-8D7D-9F6C65904E01" name="GUID-4486B94F-E39B-4E40-8D7D-9F6C65904E01"></a><h3 id="BRADV-GUID-4486B94F-E39B-4E40-8D7D-9F6C65904E01" class="sect3"><span class="enumeration_section">27.4 </span>Troubleshooting the Creation of Transportable Tablespace Sets
               </h3>
               <div>
                  <p>When the RMAN <code class="codeph">TRANSPORT TABLESPACE</code> command fails, the failed auxiliary instance files are left intact in the auxiliary instance destination for troubleshooting.
                  </p>
                  <div class="section">
                     <p>If your <code class="codeph">SET NEWNAME</code>, <code class="codeph">CONFIGURE AUXNAME</code>, and <code class="codeph">DB_FILE_NAME_CONVERT</code> settings cause multiple files in the auxiliary or transportable tablespace sets to have the same name, then RMAN reports an error during the <code class="codeph">TRANSPORT TABLESPACE</code> command. To correct the problem, use different values for these parameters to ensure that duplicate file names are not created. Naming techniques are described in <span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC" title="Several rules are applicable to the location of auxiliary instance files created during the transport.">Specifying Auxiliary File Locations with Transportable Tablespaces</a>"</span>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89968"></a><div class="props_rev_3"><a id="GUID-8692A076-0EF0-4B98-8381-957D143D2CDC" name="GUID-8692A076-0EF0-4B98-8381-957D143D2CDC"></a><h3 id="BRADV-GUID-8692A076-0EF0-4B98-8381-957D143D2CDC" class="sect3"><span class="enumeration_section">27.5 </span>Transportable Tablespace Set Scenarios
               </h3>
               <div>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="creating-transportable-tablespace-sets.html#GUID-6AE347E4-5364-4C67-B18D-EE30282F566D" title="You can specify a target time or SCN with the TRANSPORT TABLESPACE command. During the tablespace transport operation, RMAN restores the tablespace at the auxiliary instance with backups from before the target time and performs point-in-time recovery on the auxiliary database to the specified target time. Backups and archived redo logs needed for this point-in-time recovery must be available.">Creating a Transportable Tablespace Set at a Specified Time or SCN</a></p>
                     </li>
                     <li>
                        <p><a href="creating-transportable-tablespace-sets.html#GUID-4F402748-9F8E-4067-A579-F58A3399FE9A" title="You can change the names of the Data Pump export dump file for the transportable set, the sample import script for use at the target database, the log file generated by Data Pump Export, and the directory to which they are written.">Specifying Locations for Data Pump Files</a></p>
                     </li>
                     <li>
                        <p><a href="creating-transportable-tablespace-sets.html#GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC" title="Several rules are applicable to the location of auxiliary instance files created during the transport.">Specifying Auxiliary File Locations with Transportable Tablespaces</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV469"></a><a id="BRADV470"></a><a id="BRADV471"></a><a id="BRADV89969"></a><div class="props_rev_3"><a id="GUID-6AE347E4-5364-4C67-B18D-EE30282F566D" name="GUID-6AE347E4-5364-4C67-B18D-EE30282F566D"></a><h4 id="BRADV-GUID-6AE347E4-5364-4C67-B18D-EE30282F566D" class="sect4"><span class="enumeration_section">27.5.1 </span>Creating a Transportable Tablespace Set at a Specified Time or SCN
                  </h4>
                  <div>
                     <p>You can specify a target time or SCN with the <code class="codeph">TRANSPORT TABLESPACE</code> command. During the tablespace transport operation, RMAN restores the tablespace at the auxiliary instance with backups from before the target time and performs point-in-time recovery on the auxiliary database to the specified target time. Backups and archived redo logs needed for this point-in-time recovery must be available.
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6AE347E4-5364-4C67-B18D-EE30282F566D__CHDJEAGI">
                        <p class="titleinexample">Example 27-2 Specifying an End SCN</p>
                        <p>This example specifies the target time with an SCN (in the current incarnation or its ancestors).</p><pre class="oac_no_warn" dir="ltr">TRANSPORT TABLESPACE tbs_2 
   TABLESPACE DESTINATION '/disk1/transportdest' 
   AUXILIARY DESTINATION '/disk1/auxdest'
   UNTIL SCN 11379;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-6AE347E4-5364-4C67-B18D-EE30282F566D__CHDGCBFH">
                        <p class="titleinexample">Example 27-3 Specifying an End Restore Point</p>
                        <p>This example specifies a restore point as the target time for the transportable tablespace set creation.</p><pre class="oac_no_warn" dir="ltr">TRANSPORT TABLESPACE tbs_2 
   TABLESPACE DESTINATION '/disk1/transportdest' 
   AUXILIARY DESTINATION '/disk1/auxdest'
   TO RESTORE POINT 'before_upgrade';
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-6AE347E4-5364-4C67-B18D-EE30282F566D__CHDGAHBA">
                        <p class="titleinexample">Example 27-4 Specifying an End Time</p>
                        <p>This example specifies an end time which is used as the target time for the transportable tablespace set creation.</p><pre class="oac_no_warn" dir="ltr">TRANSPORT TABLESPACE tbs_2 
   TABLESPACE DESTINATION '/disk1/transportdest' 
   AUXILIARY DESTINATION '/disk1/auxdest'
   UNTIL TIME 'SYSDATE-1';</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV472"></a><a id="BRADV89970"></a><div class="props_rev_3"><a id="GUID-4F402748-9F8E-4067-A579-F58A3399FE9A" name="GUID-4F402748-9F8E-4067-A579-F58A3399FE9A"></a><h4 id="BRADV-GUID-4F402748-9F8E-4067-A579-F58A3399FE9A" class="sect4"><span class="enumeration_section">27.5.2 </span>Specifying Locations for Data Pump Files
                  </h4>
                  <div>
                     <p>You can change the names of the Data Pump export dump file for the transportable set, the sample import script for use at the target database, the log file generated by Data Pump Export, and the directory to which they are written.</p>
                     <div class="section">
                        <p>By default, these files are stored in the tablespace destination and named as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p> The Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> is named <code class="codeph">dmpfile.dmp</code>.
                              </p>
                           </li>
                           <li>
                              <p> The export log file is named <code class="codeph">explog.log</code>.
                              </p>
                           </li>
                           <li>
                              <p>The sample import script is named <code class="codeph">impscrpt.sql</code>.
                              </p>
                           </li>
                        </ul>
                        <p>You can place the dump file and the export log in a different directory by using the <code class="codeph">DATAPUMP DIRECTORY</code> clause of the <code class="codeph">TRANSPORT TABLESPACE</code> command, passing in the name of a database directory object. The database directory object used by the <code class="codeph">DATAPUMP DIRECTORY</code> clause is not the directory path of an actual file system directory. The value passed corresponds to the <code class="codeph">DIRECTORY</code> command-line argument of Data Pump Export.
                        </p>
                        <p>You can rename these files with the <code class="codeph">DUMP FILE EXPORT LOG</code> , and <code class="codeph">IMPORT SCRIPT</code> clauses of the <code class="codeph">TRANSPORT TABLESPACE</code> command. The file names cannot contain full file paths with directory names. If the <code class="codeph">DUMP FILE</code> or <code class="codeph">EXPORT LOG</code> file names specify file paths, then <code class="codeph">TRANSPORT TABLESPACE</code> fails when it attempts to generate the export dump files. Use the <code class="codeph">DATAPUMP DIRECTORY</code> clause to specify a database directory object that identifies a location for the outputs of Data Pump Export.
                        </p>
                        <p>The following scenario illustrates the use of <code class="codeph">TRANSPORT TABLESPACE</code> with the <code class="codeph">DATAPUMP DIRECTORY</code> , <code class="codeph">DUMP FILE</code>, <code class="codeph">EXPORT LOG</code> , and <code class="codeph">IMPORT SCRIPT</code> file names specified. Assume that you create a database directory object as follows for use with Data Pump Export:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY mypumpdir as '/datapumpdest';
</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4F402748-9F8E-4067-A579-F58A3399FE9A__CHDDBJCG">
                        <p class="titleinexample">Example 27-5 Specifying Output File Locations</p>
                        <p>This example shows a <code class="codeph">TRANSPORT TABLESPACE</code> command with optional arguments that specify output file locations.
                        </p><pre class="oac_no_warn" dir="ltr">TRANSPORT TABLESPACE tbs_2
   TABLESPACE DESTINATION '/transportdest'
   AUXILIARY DESTINATION '/auxdest'
   DATAPUMP DIRECTORY  mypumpdir
   DUMP FILE 'mydumpfile.dmp'
   IMPORT SCRIPT 'myimportscript.sql'
   EXPORT LOG 'myexportlog.log';
   </pre><p>After a successful run, RMAN cleans up the auxiliary destination, creates the Data Pump export dump file and the export log in the directory referenced by <code class="codeph">DATAPUMP DIRECTORY</code> (<code class="codeph">/datapumpdest/mydumpfile.dmp</code> and <code class="codeph">/datapumpdest/myexportlog.log</code>), and stores the transportable set data files in <code class="codeph">/transportdest</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-4F402748-9F8E-4067-A579-F58A3399FE9A__GUID-540F8926-C3E1-44B3-9FF6-F25D910D3216">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=SUTIL100" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> for more details on the use of directory objects with Data Pump Export
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV39711"></a><div class="props_rev_3"><a id="GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC" name="GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC"></a><h4 id="BRADV-GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC" class="sect4"><span class="enumeration_section">27.5.3 </span>Specifying Auxiliary File Locations with Transportable Tablespaces
                  </h4>
                  <div>
                     <p>Several rules are applicable to the location of auxiliary instance files created during the transport. </p>
                     <div class="section">
                        <p>If RMAN determines that any of the auxiliary files, designated by any of the methods for specifying auxiliary file locations, contain a data file copy that is suitable to be used for the desired point in time for this transport operation, then that data file copy is used instead of restoring the data file. Any data file copies that are present, but not suitable for this transport operation, because they are more recent than the requested point in time, or are not recognized as part of the target database, are overwritten when the data files are restored.</p>
                        <p>The simplest technique is to use the <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code> clause of the <code class="codeph">TRANSPORT TABLESPACE</code> command and let RMAN manage all file locations automatically.
                        </p>
                        <p>The following table lists the techniques available for specifying file locations when relocating some or all auxiliary instance files, in the order of precedence that RMAN uses:</p>
                        <div class="tblformal" id="GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC__GUID-2F445C4A-22D6-4520-B87F-3F8DD277DB98">
                           <p class="titleintable">Table 27-2 Options for specifying auxiliary file locations</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Options for specifying auxiliary file locations" summary="This table describes the techniques available for specifying auxiliary file locations in the order of precedence in which they are taken." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d125378e2167">Order of Precedence</th>
                                    <th align="left" valign="bottom" width="20%" id="d125378e2169">Auxiliary File Naming Technique</th>
                                    <th align="left" valign="bottom" width="20%" id="d125378e2171">Additional Information</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d125378e2175" headers="d125378e2167 ">1</td>
                                    <td align="left" valign="top" width="20%" headers="d125378e2175 d125378e2169 ">
                                       <p><code class="codeph">SET NEWNAME FOR DATAFILES</code></p>
                                       <p><code class="codeph">SET NEWNAME FOR TABLESPACE</code></p>
                                       <p><code class="codeph">SET NEWNAME FOR DATABASE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d125378e2175 d125378e2171 ">
                                       <p><span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69" title="You can use the SET NEWNAME command to specify a location for auxiliary data files.">Using SET NEWNAME for Auxiliary Data Files</a>"</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d125378e2199" headers="d125378e2167 ">2</td>
                                    <td align="left" valign="top" width="20%" headers="d125378e2199 d125378e2169 ">
                                       <p><code class="codeph">CONFIGURE AUXNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d125378e2199 d125378e2171 ">
                                       <p><span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-1B04CB7B-39BF-4910-9925-8927BBB68FFD" title="You can use the CONFIGURE AUXNAME command to specify persistent locations for transportable tablespace set or auxiliary set data files. RMAN restores each data file for which a CONFIGURE AUXNAME command has been used to the specified location before recovery. RMAN deletes auxiliary set data files when the operation is complete, unless the operation failed.">Using CONFIGURE AUXNAME for Auxiliary Data Files</a>"</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d125378e2220" headers="d125378e2167 ">3</td>
                                    <td align="left" valign="top" width="20%" headers="d125378e2220 d125378e2169 ">
                                       <p><code class="codeph">AUXILIARY DESTINATION</code> clause of the <code class="codeph">TRANSPORT TABLESPACE</code> command
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d125378e2220 d125378e2171 ">
                                       <p><span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-F9075274-D1B0-49AF-BB7C-E8D21482D232" title="If you use the AUXILIARY DESTINATION option with the TRANSPORT TABLESPACE command, then any auxiliary set file that is not moved to another location using a SET NEWNAME or CONFIGURE AUXNAME command is stored in the auxiliary destination during the TRANSPORT TABLESPACE operation.">Using AUXILIARY DESTINATION to Specify a Location for Auxiliary Files</a>"</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d125378e2254" headers="d125378e2167 ">4</td>
                                    <td align="left" valign="top" width="20%" headers="d125378e2254 d125378e2169 ">
                                       <p><code class="codeph">LOG_FILE_NAME_CONVERT</code> and <code class="codeph">DB_FILE_NAME_CONVERT</code> in the initialization parameter file
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d125378e2254 d125378e2171 ">
                                       <p><span class="q">"<a href="creating-transportable-tablespace-sets.html#GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602" title="You can use the LOG_FILE_NAME_CONVERT and DB_FILE_NAME_CONVERT initialization parameters in an auxiliary instance parameter file to determine the names for online redo logs and other database files at the auxiliary instance. If no AUXILIARY DESTINATION clause is specified on the TRANSPORT TABLESPACE command, then these parameters determine the location of any files for which no CONFIGURE AUXNAME or SET NEWNAME command was run.">Using Initialization Parameters to Name Auxiliary Files</a>"</span></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>If you use several of these options, then the first option in the list that applies to a file determines the file name.</p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="BRADV473"></a><a id="BRADV89972"></a><div class="props_rev_3"><a id="GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69" name="GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69"></a><h5 id="BRADV-GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69" class="sect5"><span class="enumeration_section">27.5.3.1 </span>Using SET NEWNAME for Auxiliary Data Files
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">SET NEWNAME</code> command to specify a location for auxiliary data files.
                        </p>
                        <div class="section">
                           <p>Use the following <code class="codeph">SET NEWNAME</code> commands in a <code class="codeph">RUN</code> block to specify file names for use in the <code class="codeph">TRANSPORT TABLESPACE</code> command:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">SET NEWNAME FOR DATAFILE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">SET NEWNAME FOR DATABASE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">SET NEWNAME FOR TABLESPACE</code></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69__CHDDGAID">
                           <p class="titleinexample">Example 27-6 Using SET NEWNAME FOR DATAFILE to Name Auxiliary Data Files</p>
                           <p>The <code class="codeph">SET NEWNAME FOR DATAFILE</code> commands in this example cause the auxiliary instance data files to be restored to the locations named instead of to <code class="codeph">/disk1/auxdest</code>.
                           </p><pre class="oac_no_warn" dir="ltr">RUN
{
  SET NEWNAME FOR DATAFILE '/oracle/dbs/tbs_12.f' 
    TO '/bigdrive/auxdest/tbs_12.f';
  SET NEWNAME FOR DATAFILE '/oracle/dbs/tbs_11.f'
    TO '/bigdrive/auxdest/tbs_11.f';
  TRANSPORT TABLESPACE tbs_2 
    TABLESPACE DESTINATION '/disk1/transportdest' 
    AUXILIARY DESTINATION '/disk1/auxdest';
}
</pre><p>The <code class="codeph">SET NEWNAME</code> command is best used with one-time operations. If you expect to create transportable tablespaces from backup regularly for a particular set of tablespaces, then consider using the <code class="codeph">CONFIGURE AUXNAME</code> command instead of the <code class="codeph">SET NEWNAME</code> command to make persistent settings for the location of the auxiliary instance data files.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="BRADV89973"></a><div class="props_rev_3"><a id="GUID-1B04CB7B-39BF-4910-9925-8927BBB68FFD" name="GUID-1B04CB7B-39BF-4910-9925-8927BBB68FFD"></a><h5 id="BRADV-GUID-1B04CB7B-39BF-4910-9925-8927BBB68FFD" class="sect5"><span class="enumeration_section">27.5.3.2 </span>Using CONFIGURE AUXNAME for Auxiliary Data Files
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">CONFIGURE AUXNAME</code> command to specify persistent locations for transportable tablespace set or auxiliary set data files. RMAN restores each data file for which a <code class="codeph">CONFIGURE AUXNAME</code> command has been used to the specified location before recovery. RMAN deletes auxiliary set data files when the operation is complete, unless the operation failed.
                        </p>
                        <div class="section">
                           <p>An example illustrates the relationship between the <code class="codeph">CONFIGURE AUXNAME</code> and <code class="codeph">TRANSPORT ... AUXILIARY DESTINATION</code> commands. Suppose that you want to transport tablespace <code class="codeph">tbs_11</code>. The tablespace <code class="codeph">tbs_12</code>, which contains data file <code class="codeph">tbs_12.f</code>, is part of the auxiliary set. You execute the following steps:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>You use the <code class="codeph">CONFIGURE AUXNAME</code> statement to set a persistent nondefault location for the auxiliary set data file <code class="codeph">/oracle/dbs/tbs_12.f</code>.</span><div>
                                 <p>For example, you enter the following command:</p><pre class="oac_no_warn" dir="ltr">CONFIGURE AUXNAME FOR DATAFILE '/oracle/dbs/tbs_12.f' 
                   TO '/disk1/auxdest/tbs_12.f'; 
</pre></div>
                           </li>
                           <li class="stepexpand"><span>You execute the <code class="codeph">TRANSPORT TABLESPACE</code> command with the <code class="codeph">AUXILIARY DESTINATION</code> and <code class="codeph">TABLESPACE DESTINATION</code> options.</span><div>
                                 <p>For example, you enter the following command:</p><pre class="oac_no_warn" dir="ltr">TRANSPORT TABLESPACE tbs_11
  AUXILIARY DESTINATION '/myauxdest'
  TABLESPACE DESTINATION '/disk1/transportdest';
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>In the preceding scenario, RMAN restores the auxiliary set copy of data file <code class="codeph">/oracle/dbs/tbs_12.f</code> to <code class="codeph">/disk1/auxdest/tbs_12.f</code> instead of the location specified by the <code class="codeph">AUXILIARY DESTINATION</code> option. The <code class="codeph">CONFIGURE AUXNAME</code> command setting is higher in the order of precedence than the <code class="codeph">AUXILIARY DESTINATION</code> option.
                           </p>
                           <div class="infoboxnote" id="GUID-1B04CB7B-39BF-4910-9925-8927BBB68FFD__GUID-56D4BC4A-545B-402E-9327-F8B0FB65866F">
                              <p class="notep1">Note:</p>
                              <p>You can view any current <code class="codeph">CONFIGURE AUXNAME</code> settings by executing the <code class="codeph">SHOW AUXNAME</code> command, which is described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF154" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a>.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV89974"></a><div class="props_rev_3"><a id="GUID-F9075274-D1B0-49AF-BB7C-E8D21482D232" name="GUID-F9075274-D1B0-49AF-BB7C-E8D21482D232"></a><h5 id="BRADV-GUID-F9075274-D1B0-49AF-BB7C-E8D21482D232" class="sect5"><span class="enumeration_section">27.5.3.3 </span>Using AUXILIARY DESTINATION to Specify a Location for Auxiliary Files
                     </h5>
                     <div>
                        <p>If you use the <code class="codeph">AUXILIARY DESTINATION</code> option with the <code class="codeph">TRANSPORT TABLESPACE</code> command, then any auxiliary set file that is not moved to another location using a <code class="codeph">SET NEWNAME</code> or <code class="codeph">CONFIGURE AUXNAME</code> command is stored in the auxiliary destination during the <code class="codeph">TRANSPORT TABLESPACE</code> operation.
                        </p>
                        <div class="section">
                           <p>If you do not use the <code class="codeph">AUXILIARY DESTINATION</code> option, then you must use <code class="codeph">LOG_FILE_NAME_CONVERT</code> parameter to specify the location of the online redo log files for the auxiliary instance. Neither the <code class="codeph">SET NEWNAME</code> nor <code class="codeph">CONFIGURE AUXNAME</code> commands can affect the location of the auxiliary instance online redo logs. Thus, if you do not use the <code class="codeph">AUXILIARY DESTINATION</code> option or <code class="codeph">LOG_FILE_NAME_CONVERT</code> parameter, then RMAN has no information about where to create the online redo logs.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV89975"></a><div class="props_rev_3"><a id="GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602" name="GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602"></a><h5 id="BRADV-GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602" class="sect5"><span class="enumeration_section">27.5.3.4 </span>Using Initialization Parameters to Name Auxiliary Files
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">LOG_FILE_NAME_CONVERT</code> and <code class="codeph">DB_FILE_NAME_CONVERT</code> initialization parameters in an auxiliary instance parameter file to determine the names for online redo logs and other database files at the auxiliary instance. If no <code class="codeph">AUXILIARY DESTINATION</code> clause is specified on the <code class="codeph">TRANSPORT TABLESPACE</code> command, then these parameters determine the location of any files for which no <code class="codeph">CONFIGURE AUXNAME</code> or <code class="codeph">SET NEWNAME</code> command was run.
                        </p>
                        <div class="section">
                           <p>You cannot use the <code class="codeph">LOG_FILE_NAME_CONVERT</code> or <code class="codeph">DB_FILE_NAME_CONVERT</code> parameters to generate new Oracle Managed Files (OMF) names for files at the auxiliary instance when the original files are OMF files. The database manages the generation of unique file names in each OMF destination. You must use an <code class="codeph">AUXILIARY DESTINATION</code> clause to control the location of the online redo log files. You must use the <code class="codeph">AUXILIARY DESTINATION</code> clause, <code class="codeph">SET NEWNAME</code> or <code class="codeph">CONFIGURE AUXNAME</code> commands, or <code class="codeph">DB_CREATE_FILE_DEST</code> initialization parameter to specify the location for OMF data files.
                           </p>
                           <div class="infoboxnotealso" id="GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602__GUID-8DF269C6-9FF3-4F52-BD63-7AB07E6A86F9">
                              <p class="notep1">See Also:</p>
                              <p><span><cite>Oracle Database Reference</cite></span> for more details on the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10098" target="_blank"><code class="codeph">LOG_FILE_NAME_CONVERT</code></a> and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10038" target="_blank"><code class="codeph">DB_FILE_NAME_CONVERT</code></a> initialization parameters
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
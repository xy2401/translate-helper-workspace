<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Creating a TIP</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-gateway-appc-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T18:35:49-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="F18239-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="pga-utility-oracle-database-gateway-appc.html" title="Previous" type="text/html">
      <link rel="next" href="developing-appc-client-app-sna-only.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC User's Guide">
    <meta name="dcterms.isVersionOf" content="APPUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="pga-utility-oracle-database-gateway-appc.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="developing-appc-client-app-sna-only.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Creating a TIP</li>
            </ol>
            <a id="GUID-78D4439E-7DD6-45DF-842E-35007FCC572B" name="GUID-78D4439E-7DD6-45DF-842E-35007FCC572B"></a><a id="APPUG300"></a>
            
            <h2 id="APPUG-GUID-78D4439E-7DD6-45DF-842E-35007FCC572B" class="sect2"><span class="enumeration_chapter">3 </span> Creating a TIP
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This <a id="d15950e30" class="indexterm-anchor"></a>following sections show in detail how you can define, generate and compile a Transaction Interface Package (TIP). It assumes that a remote host transaction program (RTP) already exists. This transaction program has operational characteristics that dictate how the TIP is defined and how the TIP is used by the client application.<a id="d15950e35" class="indexterm-anchor"></a><a id="d15950e39" class="indexterm-anchor"></a></p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-0B156FA9-B9D0-40AD-94E1-1281EF41CEEA">Granting Privileges for TIP Creators</a></p>
                  </li>
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-4C184553-3AB2-4832-B048-BF94BCFAE3C5">Evaluating the RHT</a></p>
                  </li>
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837">Defining and Generating the TIP</a></p>
                  </li>
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-85216411-6881-4AEE-9C11-A6A1FC0C7F0C">Compiling the TIP</a></p>
                  </li>
                  <li>
                     <p><a href="creating-tip-oracle-database-gateway-appc.html#GUID-16F7D081-B82F-4BC1-8514-4E167CFA7E46">TIP Content Documentation (tipname.doc)</a></p>
                  </li>
               </ul>
               <p>The following steps create a TIP for use with a remote host transaction (RHT):</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>evaluating the RHT </p>
                  </li>
                  <li>
                     <p>preparing the PGAU statements </p>
                  </li>
                  <li>
                     <p>defining and generating the TIP</p>
                  </li>
                  <li>
                     <p>compiling the TIP</p>
                  </li>
               </ul>
            </div><a id="APPUG958"></a><div class="props_rev_3"><a id="GUID-0B156FA9-B9D0-40AD-94E1-1281EF41CEEA" name="GUID-0B156FA9-B9D0-40AD-94E1-1281EF41CEEA"></a><h3 id="APPUG-GUID-0B156FA9-B9D0-40AD-94E1-1281EF41CEEA" class="sect3">Granting Privileges for TIP Creators</h3>
               <div>
                  <p>Every TIP developer requires access to the following <a id="d15950e128" class="indexterm-anchor"></a>PL/SQL packages, which are shipped with the Oracle database:
                  </p>
                  <p>For Microsoft Windows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">DBMS_PIPE</code> in <code class="codeph">%ORACLE_HOME%\rdbms\admin</code><a id="d15950e143" class="indexterm-anchor"></a><a id="d15950e145" class="indexterm-anchor"></a></p>
                     </li>
                     <li>
                        <p><code class="codeph">UTL_RAW</code> in <code class="codeph">%ORACLE_HOME%\rdbms\admin</code><a id="d15950e156" class="indexterm-anchor"></a><a id="d15950e158" class="indexterm-anchor"></a></p>
                     </li>
                     <li>
                        <p><code class="codeph">UTL_PG</code> in <code class="codeph">%ORACLE_HOME%\rdbms\admin</code><a id="d15950e167" class="indexterm-anchor"></a><a id="d15950e171" class="indexterm-anchor"></a></p>
                     </li>
                  </ul>
                  <p>For UNIX based systems:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">DBMS_PIPE</code> in <code class="codeph">$ORACLE_HOME/rdbms/admin</code><a id="d15950e185" class="indexterm-anchor"></a><a id="d15950e187" class="indexterm-anchor"></a></p>
                     </li>
                     <li>
                        <p><code class="codeph">UTL_RAW</code> in <code class="codeph">$ORACLE_HOME/rdbms/admin</code><a id="d15950e198" class="indexterm-anchor"></a><a id="d15950e200" class="indexterm-anchor"></a></p>
                     </li>
                     <li>
                        <p><code class="codeph">UTL_PG</code> in <code class="codeph">$ORACLE_HOME/rdbms/admin</code><a id="d15950e209" class="indexterm-anchor"></a><a id="d15950e213" class="indexterm-anchor"></a></p>
                     </li>
                  </ul>
                  <p>If anyone other than user <a id="d15950e219" class="indexterm-anchor"></a><code class="codeph">PGAADMIN</code> will be developing TIPs, they will need explicit grants to perform these operations. Refer to the "Optional Configuration Steps" section in the configuration section appropriate to your communication protocol in the installation guides for more information about private and public grants. 
                  </p>
               </div>
            </div><a id="APPUG959"></a><div class="props_rev_3"><a id="GUID-4C184553-3AB2-4832-B048-BF94BCFAE3C5" name="GUID-4C184553-3AB2-4832-B048-BF94BCFAE3C5"></a><h3 id="APPUG-GUID-4C184553-3AB2-4832-B048-BF94BCFAE3C5" class="sect3">Evaluating the RHT</h3>
               <div>
                  <div class="section">
                     <p>Follow the steps below to identify and become familiar with your remote host transaction data exchanges. </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860">Identify the Remote Host Transaction</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-9F009D52-CA13-4F71-83A9-3E77D7F6AA55">PGAU DEFINE CALL Command</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9">PGAU DEFINE DATA Command</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-A16BDF52-DC3E-4DF9-B4C7-C3E6BEEA9415">PGAU DEFINE TRANSACTION Command on a Gateway Using SNA</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-BDC76DB5-2655-4809-9435-494EF07C95A6">PGAU DEFINE TRANSACTION Command on a Gateway Using TCP/IP</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942">Writing the PGAU Statements</a></span></li>
                     <li><span><a href="creating-tip-oracle-database-gateway-appc.html#GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B">Writing a PGAU Script File</a></span></li>
                  </ol>
               </div><a id="APPUG1296"></a><a id="APPUG1297"></a><a id="APPUG960"></a><div class="props_rev_3"><a id="GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860" name="GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860"></a><h4 id="APPUG-GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860" class="sect4">Identify the Remote Host Transaction</h4>
                  <div>
                     <p>You must first identify the RHT data exchange steps. These are the send and receive calls embedded within the RHT program. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860__GUID-6BFBBFCB-93DB-41A6-A5DE-D56CBE538DEA"><span class="bold">If your gateway is using the SNA communication protocol:</span></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The RHT data exchange steps are identified under the following languages:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You may use COBOL for:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>CICS </p>
                                 </li>
                                 <li>
                                    <p>IMS </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>You may use IBM 370 Assembler for:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>CICS </p>
                                 </li>
                                 <li>
                                    <p>IMS </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>You may use IBM REXX for:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>CICS</p>
                                 </li>
                                 <li>
                                    <p>IMS</p>
                                 </li>
                                 <li>
                                    <p>z/OS</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E6D732B2-54FB-4322-B2AE-8C2F0110F860__GUID-F47DBAF0-6E22-443D-AEF8-061225DB17DC">If your gateway is using the TCP/IP communication protocol:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>IMS is the only OLTP that is supported when the gateway is using TCP/IP support for IMS Connect. The RHT programs must use embedded <a id="d15950e393" class="indexterm-anchor"></a>I/O&nbsp;PCB function calls. The function is identified only under the COBOL and Assembler languages. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="APPUG961"></a><div class="props_rev_3"><a id="GUID-9F009D52-CA13-4F71-83A9-3E77D7F6AA55" name="GUID-9F009D52-CA13-4F71-83A9-3E77D7F6AA55"></a><h4 id="APPUG-GUID-9F009D52-CA13-4F71-83A9-3E77D7F6AA55" class="sect4">PGAU DEFINE CALL Command</h4>
                  <div>
                     <p>Make a call list of every data exchange. This list dictates a series of PGAU <code class="codeph">DEFINE CALL</code> statements. Refer to <span class="q">"<a href="pga-utility-oracle-database-gateway-appc.html#GUID-01EEB1ED-7AB6-4BFA-AF6F-A9D36A44C0B1">DEFINE CALL</a>"</span> in <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> for more information about this PGAU command.
                     </p>
                     <p>The three important parameters that you will use for each call are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">cname</code>: the name of the call definition to be created;
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">dname</code>: the name of the data structure to be exchanged; and 
                           </p>
                        </li>
                        <li>
                           <p>whether it is send (<code class="codeph">OUT</code>) or receive (<code class="codeph">IN</code>)
                           </p>
                        </li>
                     </ul>
                     <p>RHT send corresponds to a TIP <code class="codeph">OUT</code> and RHT receive corresponds to a TIP <code class="codeph">IN</code>. 
                     </p>
                     <p><span class="bold">If your communication protocol is SNA</span>: Refer to <a href="developing-appc-client-app-sna-only.html#GUID-0522D9DF-E342-4451-A167-0FD0E5ADD13D">Flexible Call Sequence</a> for more information about PGAU <code class="codeph">DEFINE CALL</code> commands. 
                     </p>
                     <p><span class="bold">If your communication protocol is TCP/IP</span>: Refer to <a href="developing-appc-client-app-tcpip-only.html#GUID-864E03E4-0F1A-478B-A76D-3D9624312D67">Flexible Call Sequence</a> for more information about PGAU <code class="codeph">DEFINE CALL</code> commands.
                     </p>
                     <p>PGAU call entries are only defined once, so eliminate any duplicates.</p>
                     <p>This call list defines the TIP function calls, not the order in which they are used. Note that the order in which each call is made is a behavior of the transaction and dictates the order of calls made by the high-level application to the TIP, which then calls the RHT through the Database Gateway server. While this calling sequence is critical to maintaining the synchronization between the application and the RHT, the TIP is only an access method for the application and has no knowledge of higher level sequencing of calls.</p>
                  </div>
               </div><a id="APPUG962"></a><div class="props_rev_3"><a id="GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9" name="GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9"></a><h4 id="APPUG-GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9" class="sect4">PGAU DEFINE DATA Command</h4>
                  <div>
                     <p>For each call in the RHT call list, identify the RHT data structures being sent or received in the call buffers.</p>
                     <p>Make a data list of every such structure. This list dictates a series of PGAU <code class="codeph">DEFINE DATA</code> statements. 
                     </p>
                     <p>The two important parameters that you will use for <code class="codeph">DEFINE DATA</code> are:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">dname:</code> the name of the data definition to be created; and 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">dname.ext:</code> the file in which the data definition is stored.
                           </p>
                        </li>
                     </ul>
                     <p>PGAU data entries are only defined once, so eliminate any duplicates.</p>
                     <div class="infoboxnote" id="GUID-C00293CB-2FA3-447B-A79D-FCB70D7000D9__GUID-F7752931-E1DA-436C-9263-7961D9B5EB03">
                        <p class="notep1">Note:</p>
                        <p>Move COBOL record layouts (copybooks) to the gateway system.</p>
                        <p>PGAU can use copybooks as input when defining the data items. Once you have identified the data items to be exchanged, use a file transfer program to download the copybooks to the gateway system. The copybooks are later used to define the data items. The sample copybook used in the example is documented in <a href="admin-utility-samples-oracle-database-gateway-appc.html#GUID-AA9B8762-BDAF-4EED-A8B0-09F8A937F04E"> Administration Utility Samples</a>.
                        </p>
                     </div>
                  </div>
               </div><a id="APPUG963"></a><div class="props_rev_3"><a id="GUID-A16BDF52-DC3E-4DF9-B4C7-C3E6BEEA9415" name="GUID-A16BDF52-DC3E-4DF9-B4C7-C3E6BEEA9415"></a><h4 id="APPUG-GUID-A16BDF52-DC3E-4DF9-B4C7-C3E6BEEA9415" class="sect4">PGAU DEFINE TRANSACTION Command on a Gateway Using SNA</h4>
                  <div>
                     <p>Determine the network address information for the RHT program. Your network or OLTP system programmer can provide you with this information.</p>
                     <p><a id="d15950e618" class="indexterm-anchor"></a>The five important parameters that you will use for PGAU <code class="codeph">DEFINE TRANSACTION</code> are:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic"><code class="codeph">Side Profile name</code></span> 
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">TP name</code></span> 
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">LU name</code></span> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LOGMODE</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SYNCLEVEL</code> 
                           </p>
                        </li>
                     </ul>
                     <p>You must also identify the Globalization Support character set (<code class="codeph">charset</code>) for the language in which the OLTP expects the data. 
                     </p>
                     <p>At this point, if your gateway is using SNA, then proceed to <a href="creating-tip-oracle-database-gateway-appc.html#GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942">Writing the PGAU Statements</a>. 
                     </p>
                  </div>
               </div><a id="APPUG1298"></a><a id="APPUG964"></a><div class="props_rev_3"><a id="GUID-BDC76DB5-2655-4809-9435-494EF07C95A6" name="GUID-BDC76DB5-2655-4809-9435-494EF07C95A6"></a><h4 id="APPUG-GUID-BDC76DB5-2655-4809-9435-494EF07C95A6" class="sect4">PGAU DEFINE TRANSACTION Command on a Gateway Using TCP/IP</h4>
                  <div>
                     <p>Before you use this command, you will need to know the IMS Connect hostname (or TCP/IP address), port number and the other IMS Connect parameters that are defined as columns within the <a id="d15950e711" class="indexterm-anchor"></a><code class="codeph">PGA_TCP_IMSC</code> table. Refer to <a href="pg4tcpmap-commands-tcpip.html#GUID-CDAD0D0C-6070-4E0E-9B97-E4DCF919510F"> PG4TCPMAP Commands (TCP/IP Only)</a> for complete information about preparation for mapping parameters to TCP/IP using the <code class="codeph">pg4tcpmap</code> tool.
                     </p>
                     <p>When you run the <a id="d15950e725" class="indexterm-anchor"></a><code class="codeph">pg4tcpmap</code> tool you need to specify a unique name (Side Profile Name). That name must be the same name that you are using here to create your TIP.
                     </p>
                     <p><span class="bold">If you are converting your gateway from the SNA to a TCP/IP communications protocol to invoke IMS transactions, then you need to regenerate the TIPs.</span></p>
                     <p>Refer to <a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19"> Procedural Gateway Administration Utility </a> for details.
                     </p>
                  </div>
               </div><a id="APPUG965"></a><div class="props_rev_3"><a id="GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942" name="GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942"></a><h4 id="APPUG-GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942" class="sect4">Writing the PGAU Statements</h4>
                  <div>
                     <p>After evaluating the RHT, define the TIP to PGAU for placement in the <a id="d15950e780" class="indexterm-anchor"></a>PG DD.
                     </p>
                     <ol>
                        <li>
                           <p>Write a <a id="d15950e789" class="indexterm-anchor"></a><a id="d15950e793" class="indexterm-anchor"></a><code class="codeph">DEFINE DATA</code> statement for each entry in your data list. If, for example, your RHT had three different data structures, your data definitions might be:
                           </p><pre class="oac_no_warn" dir="ltr">DEFINE DATA dname1 LANGUAGE(IBMVSCOBOLII) INFILE(dnamel.ext);
DEFINE DATA dname2 LANGUAGE(IBMVSCOBOLII) INFILE(dname2.ext);
DEFINE DATA dname3 LANGUAGE(IBMVSCOBOLII) INFILE(dname3.ext);
</pre><p>Then you must copy or transfer the source file containing these data definitions to the directory where PGAU can read them as input.</p>
                        </li>
                        <li>
                           <p>Write a <a id="d15950e805" class="indexterm-anchor"></a><a id="d15950e807" class="indexterm-anchor"></a><code class="codeph">DEFINE CALL</code> statement for each entry in your call list. If, for example, your RHT had a receive send receive send sequence, your call definitions would be:
                           </p><pre class="oac_no_warn" dir="ltr">DEFINE CALL cname1 PARMS((dnamel IN));
DEFINE CALL cname2 PARMS((dname2 OUT));
DEFINE CALL cname3 PARMS((dname3 IN));
DEFINE CALL cname4 PARMS((dname2 OUT));</pre><div class="infoboxnote" id="GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942__GUID-6CF9E823-50C9-4BE4-8AD8-D777698978D0">
                              <p class="notep1">Note:</p>
                              <p>Optionally, you can rewrite your call definitions to consolidate the data transmission into fewer exchanges, as long as you do not alter the data transmission sequence. For example:</p>
                              <p><code class="codeph">DEFINE CALL cname1 PARMS((dname1 IN),</code></p>
                              <p><code class="codeph">                          (dname2 OUT));</code></p>
                              <p><code class="codeph">DEFINE CALL cname3 PARMS((dname3 IN),</code></p>
                              <p><code class="codeph">                          (dname2 OUT));</code></p>
                              <p>This reduces the calls between the application and the TIP from four calls to two calls passing an <code class="codeph">IN</code> and <code class="codeph">OUT</code> parameter on each call. Because TIPs always process <code class="codeph">IN</code> parameters before <code class="codeph">OUT</code> parameters, the data transmission sequence is unchanged. However, this consolidation is not always possible. 
                              </p>
                              <p><span class="bold">If your communication protocol is SNA</span>: Refer to <a href="developing-appc-client-app-sna-only.html#GUID-0522D9DF-E342-4451-A167-0FD0E5ADD13D">Flexible Call Sequence</a> for more information about PGAU <code class="codeph">DEFINE CALL</code> commands.
                              </p>
                              <p><span class="bold">If your communication protocol is TCP/IP</span>: Refer to <a href="developing-appc-client-app-tcpip-only.html#GUID-864E03E4-0F1A-478B-A76D-3D9624312D67">Flexible Call Sequence</a> for more information about PGAU <code class="codeph">DEFINE CALL</code> commands.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>Write a <a id="d15950e870" class="indexterm-anchor"></a><a id="d15950e872" class="indexterm-anchor"></a><code class="codeph">DEFINE TRANSACTION </code>statement that contains every call, specifying the network address and Globalization Support information:
                           </p><pre class="oac_no_warn" dir="ltr">DEFINE TRANSACTION tname CALLS(cname1
                               cname2, ....
                               cnameN)
                   ENVIRONMENT(IBM370)
                   SIDEPROF(profname) |
                     TPNAME(tpid) LUNAME(luname) LOGMODE(mode)
                   SYNCLEVEL(n)
                   NLS_LANGUAGE(charset);
</pre></li>
                        <li>
                           <p>You can add a<a id="d15950e884" class="indexterm-anchor"></a><a id="d15950e886" class="indexterm-anchor"></a> <code class="codeph">GENERATE</code> statement to create the TIP specification: 
                           </p><pre class="oac_no_warn" dir="ltr">GENERATE tname </pre><div class="infoboxnote" id="GUID-CC634EBA-3EB3-4005-A3CC-73FADBD6B942__GUID-BF7045BB-0378-48E3-9110-E0416BB4DB70">
                              <p class="notep1">Note:</p>
                              <p>You can also add a <a id="d15950e899" class="indexterm-anchor"></a><code class="codeph">REPORT</code> statement to list the PG DD entries for <code class="codeph">tname</code>:
                              </p>
                              <p><code class="codeph">REPORT TRANSACTION tname with CALLS with DATA;</code></p>
                              <p>Also annotate the script with Comments:</p>
                              <p><code class="codeph">REM this is a Comment</code></p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="APPUG966"></a><div class="props_rev_3"><a id="GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B" name="GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B"></a><h4 id="APPUG-GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B" class="sect4">Writing a PGAU Script File</h4>
                  <div>
                     <p>The previous section describes the steps you need to follow in order to execute PGAU statements via your PGAU command line processor. As a time saving measure, you can choose to write all of the statements (<code class="codeph">DEFINE DATA</code>, <code class="codeph">DEFINE CALL</code> and <code class="codeph">DEFINE TRANSACTION</code>) into a single <a id="d15950e956" class="indexterm-anchor"></a><a id="d15950e958" class="indexterm-anchor"></a>PGAU script file named <code class="codeph">tname.ctl</code>, in the following order:
                     </p>
                     <ol>
                        <li>
                           <p>define data</p>
                        </li>
                        <li>
                           <p>define call</p>
                        </li>
                        <li>
                           <p>define transaction</p>
                        </li>
                        <li>
                           <p>generate</p>
                           <div class="infoboxnote" id="GUID-F09DAE14-356A-42C6-B0E9-E0BF7064BE6B__GUID-F9E10FD7-C897-4342-BBEB-F9D0794A160B">
                              <p class="notep1">Note:</p>
                              <p>Because you will probably run this script more than once, you should include<a id="d15950e982" class="indexterm-anchor"></a> <code class="codeph">UNDEFINE</code> statements first to remove any previous entries in the PG DD. 
                              </p>
                           </div>
                        </li>
                     </ol>
                     <p>This is an example of a <code class="codeph">tname.ctl </code>PGAU script file: 
                     </p><pre class="oac_no_warn" dir="ltr">UNDEFINE TRANSACTION tname Version(all);
UNDEFINE CALL cname1 Version(all);
UNDEFINE CALL cname2 Version(all);
UNDEFINE DATA dname1 Version(all);
UNDEFINE DATA dname2 Version(all);
UNDEFINE DATA dname3 Version(all);
DEFINE DATA dname1 LANGUAGE(IBMVSCOBOLII) INFILE(dnamel.ext);
DEFINE DATA dname2 LANGUAGE(IBMVSCOBOLII) INFILE(dname2.ext);
DEFINE DATA dname3 LANGUAGE(IBMVSCOBOLII) INFILE(dname3.ext);
DEFINE CALL cname1 PARMS(dname1 IN),
                          (dname2 OUT));
DEFINE CALL cname2 PARMS(dname3 IN),
                         (dname2 OUT));
DEFINE TRANSACTION tname CALLS(cname1,
                              cname2, ....
                              cnameN)
                   ENVIRONMENT(IBM370)
                   SIDEPROF(profname) |
                     TPNAME(tpid) LUNAME(luname) LOGMODE(mode)
                   SYNCLEVEL(n)
                   NLS_LANGUAGE(charset);
Generate tname</pre></div>
               </div>
            </div><a id="APPUG967"></a><div class="props_rev_3"><a id="GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837" name="GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837"></a><h3 id="APPUG-GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837" class="sect3">Defining and Generating the TIP</h3>
               <div>
                  <div class="section">
                     <p>After you have created your control file, use PGAU to create the <a id="d15950e1037" class="indexterm-anchor"></a>PG DD entries and the <a id="d15950e1042" class="indexterm-anchor"></a>TIP specification files. 
                     </p>
                     <div class="infoboxnote" id="GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837__GUID-059949B6-C0A7-4025-BAF5-178E2C3F5A88">
                        <p class="notep1">Note:</p>
                        <p>The user&nbsp;ID under which you run PGAU must have:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>write access to output the specification files (<code class="codeph">pgau.pkh, pgau.pkb</code>, and <code class="codeph">pgau.doc</code>), where <code class="codeph">pgau</code> is the default name; and 
                              </p>
                           </li>
                           <li>
                              <p>read access to the data definition source files (<code class="codeph">dname.ext</code>), where <code class="codeph">dname.ext</code> will be specified in PGAU <code class="codeph">DEFINE DATA</code> statement(s).
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>Invoke PGAU against your PG DD stored in the Oracle Database Gateway for APPC Administrator's user&nbsp;ID:</p>
                     <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; pgau
PGAU&gt; connect pgaadmin\pw@<span class="italic">database_specification_string</span> 
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ pgau
PGAU&gt; connect pgaadmin/pw@<span class="italic">database_specification_string</span> 
</pre><p>Issue the following commands:</p><pre class="oac_no_warn" dir="ltr">PGAU&gt; set echo on
PGAU&gt; spool tname.def
PGAU&gt; @tname.ctl
PGAU&gt; spool off
</pre><p>The TIP is now ready to be compiled. By default, the <a id="d15950e1097" class="indexterm-anchor"></a><a id="d15950e1099" class="indexterm-anchor"></a><code class="codeph">GENERATE</code> statement writes your TIP specifications to the following output files in your current directory:
                     </p><pre class="oac_no_warn" dir="ltr">pgau.pkh (TIP Header)
pgau.pkb (TIP Body)
pgau.doc (TIP content documentation)</pre><div class="infoboxnote" id="GUID-A8FEC959-AF40-4206-9E8D-E8A59425B837__GUID-91657630-1ABA-425E-9D09-AD8835DDDA4D">
                        <p class="notep1">Note:</p>
                        <p>You can optionally add <a id="d15950e1112" class="indexterm-anchor"></a><span class="italic">spool</span> and <span class="italic">echo</span> to your script (<code class="codeph">tname.ctl</code>) or make ot<a id="d15950e1125" class="indexterm-anchor"></a>her enhancements, such as using PG DD roles and the PGAU <a id="d15950e1130" class="indexterm-anchor"></a><a id="d15950e1133" class="indexterm-anchor"></a><code class="codeph">GROUP</code> statement for shared PG DDs. 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">If your gateway is using SNA</span>: Refer to <a href="developing-appc-client-app-sna-only.html#GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788"> Client Application Development (SNA Only)</a> for more information.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">If your gateway is using TCP/IP support for IMS Connect</span>: Refer to <a href="developing-appc-client-app-tcpip-only.html#GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC"> Client Application Development (TCP/IP Only)</a> for more information.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG968"></a><div class="props_rev_3"><a id="GUID-85216411-6881-4AEE-9C11-A6A1FC0C7F0C" name="GUID-85216411-6881-4AEE-9C11-A6A1FC0C7F0C"></a><h3 id="APPUG-GUID-85216411-6881-4AEE-9C11-A6A1FC0C7F0C" class="sect3">Compiling the TIP</h3>
               <div>
                  <div class="section">
                     <p>Exit PGAU. Remain in your current directory and invoke <a id="d15950e1200" class="indexterm-anchor"></a>SQL*Plus.
                     </p>
                     <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">C:\&gt; sqlplus <span class="italic">userid/pw@database_specification_string</span> 
SQL&gt; set echo on
SQL&gt; @pgau.pkh
SQL&gt; @pgau.pkb
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">userid/pw@database_specification_string</span> 
SQL&gt; set echo on
SQL&gt; @pgau.pkh
SQL&gt; @pgau.pkb
</pre><p>The last two commands compile the TIP specification and body, respectively.</p>
                     <p>You have now compiled a TIP which can be called by your client application. If your client application is already written you can begin testing.</p>
                     <p>For more information about designing your client application and compiling a TIP, refer to <a href="oracle-database-gateway-appc-introduction.html#GUID-305ED3CC-1F1B-4D77-BDFE-6294CF2073D2"> Introduction to Oracle Database Gateway for APPC</a> and <a href="tip-internals-oracle-database-gateway-appc.html#GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17"> Tip Internals</a>.
                     </p>
                     <p><span class="bold">If your gateway is using SNA</span>: Refer to <a href="developing-appc-client-app-sna-only.html#GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788"> Client Application Development (SNA Only)</a> for information about PGAU statement syntax and usage.
                     </p>
                     <p><span class="bold">If your gateway is using TCP/IP support for IMS Connect</span>: Refer to <a href="developing-appc-client-app-tcpip-only.html#GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC"> Client Application Development (TCP/IP Only)</a> for information about PGAU statement syntax and usage.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG969"></a><div class="sect2"><a id="GUID-16F7D081-B82F-4BC1-8514-4E167CFA7E46" name="GUID-16F7D081-B82F-4BC1-8514-4E167CFA7E46"></a><h3 id="APPUG-GUID-16F7D081-B82F-4BC1-8514-4E167CFA7E46" class="sect3">TIP Content Documentation (tipname.doc)</h3>
               <div>
                  <p>This section discusses the TIP documentation file that is produced when the user issues a PGAU <code class="codeph">GENERATE</code> command. This TIP content file describes the function calls and <a id="d15950e1290" class="indexterm-anchor"></a>PL/<code class="codeph">SQL</code> variables and datatypes available in the TIP.
                  </p>
                  <p><a id="d15950e1299" class="indexterm-anchor"></a>PGAU <code class="codeph">GENERATE</code> always produces a TIP content file named <a id="d15950e1307" class="indexterm-anchor"></a><a id="d15950e1309" class="indexterm-anchor"></a><a id="d15950e1313" class="indexterm-anchor"></a><span class="italic"><code class="codeph">tipname</code></span><code class="codeph">.doc</code>. The filename is the name of the transaction that was specified in the PGAU <code class="codeph">GENERATE</code> command, and the filetype is always <code class="codeph">.doc</code>. This TIP content file contains the following sections:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a id="d15950e1333" class="indexterm-anchor"></a><code class="codeph">GENERATION</code> Status
                        </p>
                        <p>This section contains the status under which the TIP is generated.</p>
                     </li>
                     <li>
                        <p><a id="d15950e1346" class="indexterm-anchor"></a>TIP Transaction
                        </p>
                        <p>This section identifies the defined transaction attributes. These result from the <code class="codeph">PGAU DEFINE TRANSACTION</code> definition.
                        </p>
                     </li>
                     <li>
                        <p><a id="d15950e1360" class="indexterm-anchor"></a>TIP Default Calls 
                        </p>
                        <p>This section identifies the syntax of the calls made by the user's application to initialize and terminate the transaction. PGAU generates these calls into every TIP regardless of how the TIP or transaction is defined.</p>
                     </li>
                     <li>
                        <p> <a id="d15950e1372" class="indexterm-anchor"></a>TIP User Calls
                        </p>
                        <p>This section identifies the syntax of the calls which the user defines for the application to interact with the transaction.</p>
                     </li>
                     <li>
                        <p><a id="d15950e1383" class="indexterm-anchor"></a>TIP User Declarations
                        </p>
                        <p>This section identifies the TIP package public datatype declarations, implied by the user's data definition specified in each call parameter.</p>
                     </li>
                     <li>
                        <p><a id="d15950e1394" class="indexterm-anchor"></a>TIP User Variables
                        </p>
                        <p>This section contains TIP variables that can be referred to by applications or referenced by applications.</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Use Oracle Data Guard broker to manage and monitor the configuration. Oracle Enterprise Manager uses the broker to report health and other operational characteristics.">
      <meta name="description" content="Use Oracle Data Guard broker to manage and monitor the configuration. Oracle Enterprise Manager uses the broker to report health and other operational characteristics.">
      <title>Managing Broker Configurations</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Broker ">
      <meta property="og:description" content="Use Oracle Data Guard broker to manage and monitor the configuration. Oracle Enterprise Manager uses the broker to report health and other operational characteristics.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Broker">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-broker.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-29T04:14:25-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96245-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="oracle-data-guard-broker-installation-requirements.html" title="Previous" type="text/html">
      <link rel="next" href="managing-oracle-data-guard-broker-configuration-members.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Broker">
    <meta name="dcterms.isVersionOf" content="DGBKR">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-data-guard-broker-installation-requirements.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-oracle-data-guard-broker-configuration-members.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Broker </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Managing Broker Configurations</li>
            </ol>
            <a id="GUID-FCCDC53A-C6F4-4AFB-A220-9D6622474027" name="GUID-FCCDC53A-C6F4-4AFB-A220-9D6622474027"></a><a id="DGBKR095"></a>
            
            <h2 id="DGBKR-GUID-FCCDC53A-C6F4-4AFB-A220-9D6622474027" class="sect2"><span class="enumeration_chapter">3 </span> Managing Broker Configurations
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Use Oracle Data Guard broker to manage and monitor the configuration. Oracle Enterprise Manager uses the broker to report health and other operational characteristics.</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696" title="Oracle Data Guard broker enables you to create a broker configuration consisting of up to 253 members, including one primary database and a combination of standby databases, far sync instances, and Zero Data Loss Recovery Appliances.">Configuration Support</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-BF708883-519A-428D-A1A1-BDCDCE272D64" title="Configuration properties control the behavior of a broker configuration.">Configuration Properties</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-E4EE9680-63B7-4483-843B-47E33FC41B20" title="When the broker is started for the first time, configuration files are automatically created and named using a default path name and filename that is operating-system specific.">Setting Up the Broker Configuration Files</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2" title="After setting up the configuration files, the DG_BROKER_START initialization parameter must be set to TRUE for each database to start the DMON processes.">Starting the Data Guard Broker</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE" title="This figure shows the life cycle of a broker configuration and the accompanying text explains each phase of the cycle.">Management Cycle of a Broker Configuration</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931" title="When you enable or disable a database in the broker configuration, you are effectively enabling or disabling the ability of the broker to manage and monitor the specified database.">Enable and Disable Operations</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-92632C7B-BFF3-4678-9F4F-CC0B72ED6A35" title="A configuration status reveals the overall health of the configuration.">Configuration Status</a></p>
                  </li>
               </ul>
            </div><a id="DGBKR3518"></a><a id="DGBKR100"></a><div class="props_rev_3"><a id="GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696" name="GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696"></a><h3 id="DGBKR-GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696" class="sect3"><span class="enumeration_section">3.1 </span>Configuration Support
               </h3>
               <div>
                  <p>Oracle Data Guard broker enables you to create a broker configuration consisting of up to 253 members, including one primary database and a combination of standby databases, far sync instances, and Zero Data Loss Recovery Appliances. </p>
                  <p>The broker controls the members of the configuration, monitors the health of the configuration, and reports health and other operational characteristics through the Oracle Enterprise Management notification mechanisms if you are using Oracle Enterprise Manager Cloud Control, or through <code class="codeph">SHOW</code> commands if you are using DGMGRL.
                  </p>
                  <p>A supported Oracle Data Guard configuration contains the following components:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A primary database (Oracle RAC or non-Oracle RAC)</p>
                     </li>
                     <li>
                        <p>A combination of standby databases, far sync instances, and recovery appliances that receive redo from the primary database.</p>
                     </li>
                     <li>
                        <p>Oracle Net Services network configuration that defines a connection between the databases</p>
                     </li>
                     <li>
                        <p>Standby (archived redo log files) destination parameters and configuration properties</p>
                     </li>
                     <li>
                        <p>Redo transport services that transmit the redo data from the primary database to the standbys and far sync instances</p>
                     </li>
                     <li>
                        <p>Log apply services that apply redo data to the standby databases from the archived redo log files or standby redo log files</p>
                     </li>
                  </ul>
                  <p>The Oracle Data Guard log apply services update standby databases with redo data that is transmitted automatically from the primary database by redo transport services. The archived redo log files and standby redo log files contain all of the database changes except for <span class="italic">unrecoverable</span> or <span class="italic">unlogged</span> changes. 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>On physical standby databases, Redo Apply applies the redo data to keep the standby consistent with the primary database.</p>
                     </li>
                     <li>
                        <p>On logical standby databases, SQL Apply applies the redo data to keep the standby consistent with the primary database.</p>
                     </li>
                     <li>
                        <p> On snapshot standby databases, the redo data is received but not applied until the snapshot standby database is converted back to a physical standby database.</p>
                     </li>
                     <li>
                        <p>On far sync instances, the redo data is received and then forwarded to a physical standby database. A far sync instance does not have data files and does not apply any of the redo data it has received.</p>
                     </li>
                  </ul>
                  <p>The broker's Oracle Data Guard monitor (DMON) process configures and maintains the broker configuration as a group of objects that you can manage and monitor as a single unit. Thus, when you enter a command that affects multiple databases, the DMON process:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Carries out your request on the primary database</p>
                     </li>
                     <li>
                        <p>Coordinates with the DMON process for each of the other databases, as required for your request</p>
                     </li>
                     <li>
                        <p>Updates the configuration file on the local system</p>
                     </li>
                     <li>
                        <p>Communicates with the DMON process for each of the other databases to update their copies of the configuration file</p>
                     </li>
                  </ul>
                  <p>Through the DMON process, you can configure, monitor, and control the databases and the configuration together as a unit. If you disable the configuration, broker management of all of the databases in the configuration is also disabled. If you later enable the configuration, broker management is enabled for each database in the configuration.</p>
                  <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696__I1016374">Figure 3-1</a> shows a broker configuration with a primary database and physical standby database.
                  </p>
                  <p>On the primary database, the figure shows the redo transport services in addition to the following main components: the primary database, DMON, the online redo log files, and the archived redo log files. The figure also shows standby redo log files in outline form on the primary side; the standby redo logs are outlined to indicate they are currently inactive but have been configured in preparation for a switchover or failover to the standby role. The physical standby database includes the following components: a standby database, log apply services, DMON, archived redo log files, and standby redo log files. The online redo log files on the physical standby database are outlined to indicate they are currently inactive but have been configured in preparation for a switchover or failover to the primary role.</p>
                  <div class="infoboxnotealso" id="GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696__GUID-337C8B0D-FF7C-44EB-B9B1-256571504A47">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sbydb/introduction-to-oracle-data-guard-concepts.html#SBYDB4703" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> for more information about standby databases
                     </p>
                  </div>
                  <div class="figure" id="GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696__I1016374">
                     <p class="titleinfigure">Figure 3-1 Oracle Data Guard Broker Configuration</p><img src="img/dgbkr009.gif" alt="Description of Figure 3-1 follows" title="Description of Figure 3-1 follows" longdesc="img_text/dgbkr009.html"><br><a href="img_text/dgbkr009.html">Description of "Figure 3-1 Oracle Data Guard Broker Configuration"</a></div>
                  <!-- class="figure" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696__GUID-3A836008-B8CF-469A-B27F-983046E47E36">Configuration-Wide Service Names</p>
                     <p>The broker publishes a service, using the same name, on each configuration member. The default name of this configuration-wide service is <code class="codeph"><span class="variable" translate="no">primarydbname</span>_CFG</code>, where a suffix of <code class="codeph">_CFG</code> is appended to the value of the <code class="codeph">DB_UNIQUE_NAME</code> initialization parameter of the primary database at the time the configuration is created. To change the name of the configuration-wide service, use the <code class="codeph">ConfigurationWideServiceName</code> property. See <a href="oracle-data-guard-broker-properties.html#GUID-EA9AA7B3-36F4-4D45-BD55-30D6A71210DC" title="The ConfigurationWideServiceName configuration property is used to change the name of the configuration-wide service.">ConfigurationWideServiceName</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR3659"></a><div class="props_rev_3"><a id="GUID-BF708883-519A-428D-A1A1-BDCDCE272D64" name="GUID-BF708883-519A-428D-A1A1-BDCDCE272D64"></a><h3 id="DGBKR-GUID-BF708883-519A-428D-A1A1-BDCDCE272D64" class="sect3"><span class="enumeration_section">3.2 </span>Configuration Properties
               </h3>
               <div>
                  <p>Configuration properties control the behavior of a broker configuration. </p>
                  <p>You can view and dynamically update the values of these properties using either DGMGRL or Cloud Control. However, some properties can only be updated through DGMGRL.</p>
                  <p>A configuration property has configuration-wide scope; meaning that the value you set for the property applies uniformly to each database in the configuration.</p>
                  <p></p>
                  <div class="infoboxnote" id="GUID-BF708883-519A-428D-A1A1-BDCDCE272D64__GUID-9CFA7415-4D70-427A-83C7-D11F03D837F9">
                     <p class="notep1">Note:</p>
                     <p>Starting with Oracle Database Release 19c, properties related to database initialization parameters, except <code class="codeph">log_archive_dest_</code><code class="codeph"><span class="codeinlineitalic">n</span></code> and <code class="codeph">log_archive_dest_state_</code><code class="codeph"><span class="codeinlineitalic">n</span></code>, are no longer stored in the broker configuration file.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-BF708883-519A-428D-A1A1-BDCDCE272D64__GUID-AD8C6BA7-0B37-4AEA-9F6A-FCEBA2E1F2CA">
                     <p class="notep1">See Also:</p>
                     <p><a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="Use Oracle Data Guard broker properties to manage instances or the entire configuration.">Oracle Data Guard Broker Properties</a> for complete descriptions of all broker configuration properties
                     </p>
                  </div>
               </div>
            </div><a id="DGBKR105"></a><div class="props_rev_3"><a id="GUID-E4EE9680-63B7-4483-843B-47E33FC41B20" name="GUID-E4EE9680-63B7-4483-843B-47E33FC41B20"></a><h3 id="DGBKR-GUID-E4EE9680-63B7-4483-843B-47E33FC41B20" class="sect3"><span class="enumeration_section">3.3 </span>Setting Up the Broker Configuration Files
               </h3>
               <div>
                  <p>When the broker is started for the first time, configuration files are automatically created and named using a default path name and filename that is operating-system specific. </p>
                  <div class="section">
                     <p>Two <a id="d6115e355" class="indexterm-anchor"></a>copies of the configuration file are maintained for each database so as to always have a record of the last known <span class="italic">valid</span> state of the configuration. You can override the default path name and filename by setting the following initialization parameters for that database:
                     </p><pre class="oac_no_warn" dir="ltr">DG_BROKER_CONFIG_FILE1
DG_BROKER_CONFIG_FILE2
</pre><p>Note the following restrictions when setting the <code class="codeph">DG_BROKER_CONFIG_FILE1</code> and <code class="codeph">DG_BROKER_CONFIG_FILE2</code> initialization parameters:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>These parameters can only be set or changed when the Oracle Data Guard broker is not running (<code class="codeph">DG_BROKER_START=FALSE</code>).
                           </p>
                        </li>
                        <li>
                           <p>These parameters must specify an Oracle ASM, Oracle OCFS, or NFS that is shared for all Oracle RAC instances.</p>
                        </li>
                        <li>
                           <p>When an upgrade is performed using the PL/SQL package, <code class="codeph">DBMS_ROLLING</code>, the <code class="codeph">DG_BROKER_CONFIG_FILE<span class="codeinlineitalic">n</span></code> parameters must specify a location outside of Oracle home. (The default location is the <code class="codeph">dbs</code> directory in Oracle home.) 
                           </p>
                        </li>
                     </ul>
                     <p>The Oracle Data Guard broker works with databases that use either Oracle managed or user managed datafiles. These datafiles can reside on a file system or an Oracle ASM disk group. The following section contains these topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-73036514-7061-4B0D-83E5-C257EE59D791" title="You can change the names of the broker configuration files by issuing the ALTER SYSTEM SQL statement.">Renaming the Broker Configuration Files</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-DFCBAD5E-221E-45E8-8D05-3B782E99B74F" title="In an Oracle RAC environment, all instances of a database must reference the same set of configuration files.">Managing Broker Configuration Files in an Oracle RAC Environment</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="DGBKR3391"></a><div class="props_rev_3"><a id="GUID-73036514-7061-4B0D-83E5-C257EE59D791" name="GUID-73036514-7061-4B0D-83E5-C257EE59D791"></a><h4 id="DGBKR-GUID-73036514-7061-4B0D-83E5-C257EE59D791" class="sect4"><span class="enumeration_section">3.3.1 </span>Renaming the Broker Configuration Files
                  </h4>
                  <div>
                     <p>You can change the names of the broker configuration files by issuing  the <code class="codeph">ALTER SYSTEM</code> SQL statement. 
                     </p>
                     <div class="section">
                        <p>However, you cannot alter these parameters when the broker's DMON process is running. To change the names of configuration files for a given database, perform the following steps: </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Disable the broker configuration using the DGMGRL <code class="codeph">DISABLE</code> command. See <a href="managing-oracle-data-guard-broker-configurations.html#GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931" title="When you enable or disable a database in the broker configuration, you are effectively enabling or disabling the ability of the broker to manage and monitor the specified database.">Enable and Disable Operations</a>.</span></li>
                        <li class="stepexpand"><span>Stop the Oracle Data Guard broker DMON process using the following SQL statement:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_START=FALSE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Change the configuration filenames for the database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_CONFIG_FILE1=<span class="italic">filespec1</span>;
SQL&gt; ALTER SYSTEM SET DG_BROKER_CONFIG_FILE2=<span class="italic">filespec2</span>;</pre><div class="infoboxnote" id="GUID-73036514-7061-4B0D-83E5-C257EE59D791__GUID-9CBF1377-2E1D-44F6-8F98-8C52F072C449">
                                 <p class="notep1">Note:</p>
                                 <p>If the broker is managing an Oracle RAC database, the value of <code class="codeph">DG_BROKER_CONFIG_FILE1</code> and the value of <code class="codeph">DG_BROKER_CONFIG_FILE2</code> for each of the instances must point to the same set of physical files.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>The method of moving the files depends upon where they currently reside and where you want to move them to:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If the files reside on an operating system file system, use operating system commands to move the files to their new location.</p>
                                 </li>
                                 <li>
                                    <p>If the old or new location is an Oracle ASM disk group, use the <code class="codeph">DBMS_FILE_TRANSFER.COPY_FILE</code> function to transfer the files to their new location.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Restart the Oracle Data Guard broker DMON process, as follows:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_START=TRUE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Enable the broker configuration using the DGMGRL <code class="codeph">ENABLE</code> command or the Enable operation in the Oracle Data Guard management pages of Cloud Control.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-73036514-7061-4B0D-83E5-C257EE59D791__GUID-73AFF704-60F5-48BA-A7EA-C0817E4E8C1A">
                           <p class="notep1">Note:</p>
                           <p>As of Release 11.2, the files can reside on disks having any supported sector size (physical block size) up to and including 4KB sectors. Configuration files that were generated by a release prior to 11.2 are restricted to reside only on disks having the same sector size as was used at the time the files were first created. These files must first be upgraded to Release 11.2 before they can be moved to a location having a different sector size, or are otherwise expected to reside across a mixture of sector sizes in a given broker configuration. See <a href="upgrading-downgrading-in-data-guard-broker-configuration.html#GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8" title="If you are currently running Oracle Data Guard on Oracle Database 10g or Oracle Database 11g, then you can upgrade the database software to Oracle Database 12c Release 1 (12.1) or Oracle Database 12c Release 2 (12.2) using the Oracle Database installation documentation that is appropriate for your operating system.">Upgrading from Oracle Database 10g and Oracle Database 11g to Oracle Database 12c</a> for more information.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DGBKR3392"></a><div class="props_rev_3"><a id="GUID-DFCBAD5E-221E-45E8-8D05-3B782E99B74F" name="GUID-DFCBAD5E-221E-45E8-8D05-3B782E99B74F"></a><h4 id="DGBKR-GUID-DFCBAD5E-221E-45E8-8D05-3B782E99B74F" class="sect4"><span class="enumeration_section">3.3.2 </span>Managing Broker Configuration Files in an Oracle RAC Environment
                  </h4>
                  <div>
                     <p>In an Oracle RAC environment, all instances of a database must reference the same set of configuration files.</p>
                     <p>This means that if the broker is managing an<a id="d6115e562" class="indexterm-anchor"></a> Oracle RAC database, then the value of <a id="d6115e567" class="indexterm-anchor"></a><a id="d6115e569" class="indexterm-anchor"></a><code class="codeph">DG_BROKER_CONFIG_FILE1</code> and the value of <code class="codeph">DG_BROKER_CONFIG_FILE2</code> for each of the instances must point to the same set of physical files. The configuration files can be deployed using one of the following methods:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD" title="The broker configuration files can reside on a cluster file system (CFS).">Using Cluster File System (CFS) for Configuration Files</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-72586D45-4E5D-409B-B594-8B00FBF91507" title="The broker's configuration files can also reside on an Oracle ASM disk group.">Using Oracle ASM Disk Groups for Configuration Files</a></p>
                        </li>
                     </ul>
                  </div><a id="DGBKR3519"></a><a id="DGBKR3393"></a><div class="props_rev_3"><a id="GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD" name="GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD"></a><h5 id="DGBKR-GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD" class="sect5"><span class="enumeration_section">3.3.2.1 </span>Using Cluster File System (CFS) for Configuration Files
                     </h5>
                     <div>
                        <p>The broker configuration files can reside on a cluster file system (CFS).</p>
                        <p>If they do, then <a id="d6115e621" class="indexterm-anchor"></a>, the <code class="codeph">DG_BROKER_CONFIG_FILE</code><span class="variable" translate="no">n</span> parameters on all of the instances must be set to these files including the path to the CFS area. <a href="managing-oracle-data-guard-broker-configurations.html#GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD__CFHBJHIG">Figure 3-2</a> shows the set up for the broker configuration files on <a id="d6115e633" class="indexterm-anchor"></a><a id="d6115e637" class="indexterm-anchor"></a><a id="d6115e641" class="indexterm-anchor"></a>CFS. In this scenario, the parameters and value for all instances would be:
                        </p><pre class="oac_no_warn" dir="ltr">DG_BROKER_CONFIG_FILE1=$ORACLE_BASE/admin/<span class="italic">db_unique_name</span>/dr1<span class="italic">db_unique_name</span>.dat
DG_BROKER_CONFIG_FILE2=$ORACLE_BASE/admin/<span class="italic">db_unique_name</span>/dr2<span class="italic">db_unique_name</span>.dat</pre><div class="figure" id="GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD__CFHBJHIG">
                           <p class="titleinfigure">Figure 3-2 Broker Configuration Setup in a CFS Area</p><img src="img/dgbkr002.gif" alt="Description of Figure 3-2 follows" title="Description of Figure 3-2 follows" longdesc="img_text/dgbkr002.html"><br><a href="img_text/dgbkr002.html">Description of "Figure 3-2 Broker Configuration Setup in a CFS Area"</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="DGBKR3520"></a><a id="DGBKR3394"></a><div class="props_rev_3"><a id="GUID-72586D45-4E5D-409B-B594-8B00FBF91507" name="GUID-72586D45-4E5D-409B-B594-8B00FBF91507"></a><h5 id="DGBKR-GUID-72586D45-4E5D-409B-B594-8B00FBF91507" class="sect5"><span class="enumeration_section">3.3.2.2 </span>Using Oracle ASM Disk Groups for Configuration Files
                     </h5>
                     <div>
                        <p>The broker's configuration files can also reside on an Oracle ASM disk group.</p>
                        <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-72586D45-4E5D-409B-B594-8B00FBF91507__CFHBJBDE">Figure 3-3</a> shows the setup for the broker configuration files on Oracle ASM devices. In this scenario, the parameters and values would be specified, as follows:
                        </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DG_BROKER_CONFIG_FILE1 = '+DG/DIRECTORY/DR1.DAT' SCOPE=BOTH;
ALTER SYSTEM SET DG_BROKER_CONFIG_FILE2 = '+DG/DIRECTORY/DR2.DAT' SCOPE=BOTH;
</pre><div class="figure" id="GUID-72586D45-4E5D-409B-B594-8B00FBF91507__CFHBJBDE">
                           <p class="titleinfigure">Figure 3-3 Broker Configuration Setup with Oracle ASM</p><img src="img/dgbkr001.gif" alt="Description of Figure 3-3 follows" title="Description of Figure 3-3 follows" longdesc="img_text/dgbkr001.html"><br><a href="img_text/dgbkr001.html">Description of "Figure 3-3 Broker Configuration Setup with Oracle ASM"</a></div>
                        <!-- class="figure" -->
                        <p>Because the configuration files must be explicitly named by the user, these configuration files are not Oracle Managed Files (OMF).To create the broker's configuration files on an Oracle ASM disk group, set the <code class="codeph">DG_BROKER_CONFIG_FILE1</code> and <code class="codeph">DG_BROKER_CONFIG_FILE2</code> initialization parameters to a string value that includes the name of an existing Oracle ASM disk group, an existing directory in that disk group, and the name of the configuration file itself.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="DGBKR115"></a><div class="props_rev_3"><a id="GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2" name="GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2"></a><h3 id="DGBKR-GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2" class="sect3"><span class="enumeration_section">3.4 </span>Starting the Data Guard Broker
               </h3>
               <div>
                  <p>After setting up the configuration files, the <code class="codeph">DG_BROKER_START</code> initialization parameter must be set to <code class="codeph">TRUE</code> for each database to start the DMON processes.
                  </p>
                  <div class="section">
                     <p>By default, the <code class="codeph">DG_BROKER_START</code> initialization parameter is set to <code class="codeph">FALSE</code>. However, you can set the value in the following ways:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If you are using Cloud Control, it automatically sets the <code class="codeph">DG_BROKER_START</code> initialization parameter to <code class="codeph">TRUE</code> for new standby databases that it creates.
                           </p>
                        </li>
                        <li>
                           <p>If you are using DGMGRL, you must explicitly set the <code class="codeph">DG_BROKER_START </code>initialization parameter to <code class="codeph">TRUE</code>; otherwise, the broker will not start. You can set the <code class="codeph">DG_BROKER_START</code> initialization parameter with the following SQL statement:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_START=TRUE;

System altered.

SQL&gt; SHOW PARAMETER DG_BROKER_START

NAME               TYPE      VALUE
------------------------------------  
dg_broker_start    boolean   TRUE
</pre></li>
                     </ul>
                     <p>Whether you use Cloud Control or DGMGRL, set the value of the <code class="codeph">DG_BROKER_START</code> initialization parameter to <code class="codeph">TRUE</code> in the server parameter file on each primary and standby database. Doing so ensures that Oracle Data Guard broker will start automatically the next time you start any instance of the database.
                     </p>
                     <div class="infoboxnote" id="GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2__GUID-79299331-689C-4BC6-819D-E12D8256FC45">
                        <p class="notep1">Note:</p>If the initialization parameter <code class="codeph">DG_BROKER_START=TRUE</code>, then archivelog mode is automatically enabled at the database level if a SQL <code class="codeph">STARTUP MOUNT</code> or <code class="codeph">ALTER DATABASE MOUNT</code> statement is executed against a primary database.
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR3522"></a><a id="DGBKR3523"></a><a id="DGBKR3524"></a><a id="DGBKR3525"></a><a id="DGBKR3634"></a><a id="DGBKR3526"></a><a id="DGBKR3527"></a><a id="DGBKR3528"></a><a id="DGBKR3529"></a><a id="DGBKR120"></a><div class="props_rev_3"><a id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE" name="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE"></a><h3 id="DGBKR-GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE" class="sect3"><span class="enumeration_section">3.5 </span>Management Cycle of a Broker Configuration
               </h3>
               <div>
                  <p>This figure shows the life cycle of a broker configuration and the accompanying text explains each phase of the cycle.</p>
                  <div class="figure" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__I1019110">
                     <p class="titleinfigure">Figure 3-4 Life Cycle of a Broker Configuration and Its Databases</p><img src="img/dgbkr005.gif" alt="Description of Figure 3-4 follows" title="Description of Figure 3-4 follows" longdesc="img_text/dgbkr005.html"><br><a href="img_text/dgbkr005.html">Description of "Figure 3-4 Life Cycle of a Broker Configuration and Its Databases"</a></div>
                  <!-- class="figure" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-D3806B42-A34A-4E67-BD24-EA3BAE22EFDE">Create the Broker Configuration</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>When using Cloud Control, the Add Standby Database wizard can either add an existing (Oracle RAC or non-Oracle RAC) standby database into the configuration or create a new (Oracle RAC or non-Oracle RAC) standby database and add it to the configuration. The standby database can be a physical, logical, or snapshot database.</p>
                     <p>When using DGMGRL, the primary database and a standby database must already exist. You construct the standby database from backups of the primary database control files and datafiles, and then prepare it for recovery.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-2A5EA4D1-EA60-4F34-A395-B69F90B37086">Enable the Broker Configuration</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>An Oracle Data Guard configuration must be enabled to be managed or monitored by the broker. Conversely, you disable a configuration if you no longer want to manage it with the broker. When you disable a configuration, broker management of all of its databases is also disabled.</p>
                     <div class="infoboxnote" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-5DAAC317-7C65-43A5-88AA-9BE073906F4B">
                        <p class="notep1">Note:</p>
                        <p>You can enable or disable the configuration using DGMGRL. You cannot disable the configuration using Cloud Control. You can enable the configuration using Cloud Control in the event that it was previously disabled using DGMGRL.</p>
                     </div>
                     <p>A broker configuration, when first created using Cloud Control, is automatically enabled as soon as the Add Standby Database wizard completes.</p>
                     <p>A broker configuration, when first created using DGMGRL, is in a disabled condition. This means its constituent databases are not yet under active control of the broker. When you finish configuring the databases into a broker configuration with DGMGRL, you must enable the configuration to allow the broker to manage the configuration.</p>
                     <p>You can enable:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The entire configuration, including all of its databases</p>
                        </li>
                        <li>
                           <p>An individual standby database</p>
                        </li>
                     </ul>
                     <p>You can easily disable a database if a problem occurs such that it cannot function properly in a broker configuration. Note that you cannot disable the primary database. You must disable the entire configuration to disable the primary database.</p>
                     <p>You may also want to disable a configuration temporarily, and then change some properties in the broker configuration without affecting the actual database properties. The changed properties will take effect when the configuration is enabled again for management by the broker.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-2A1D40D5-DB5C-497F-BE53-A5FE7B93D81A">Make Role Changes Within the Broker Configuration, As Needed</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>At any time, you can issue a single command to change the roles of the databases in the configuration. If some event renders the primary database unusable, you can fail over one of the standby databases to become the new primary database. </p>
                     <p>If Flashback Database was enabled on the former primary database, then after failover has completed, you can reinstate the former primary database as a standby database for the new primary database.</p>
                     <p>In addition, planned downtime for maintenance can be reduced because you can quickly switch over production processing from the current primary database to a standby database, and then switch back again after the planned maintenance. </p>
                     <div class="infoboxnotealso" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-C45B43F6-BAEC-49F0-815E-2A45BC0B11D7">
                        <p class="notep1">See Also:</p>
                        <p><a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-44E7A982-7CD4-4A51-B00E-62C0698C5CD6" title="Learn how to use Oracle Data Guard broker to manage databases during switchover and failover.">Switchover and Failover Operations</a> for more information about role changes
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-8C76DCBA-6488-48A4-A07B-B42A7A40E75B">Convert to Snapshot Standby Database</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>At any time, you can issue a single command to convert a physical standby database to a snapshot standby database. The snapshot standby database is a fully updatable database that receives redo data generated from the primary database, but does not apply it.</p>
                     <p>Once you are done using the snapshot standby database, you can again issue a single command to convert it to a physical standby database. After the conversion to a physical standby has completed, Redo Apply services will start (assuming the state is <code class="codeph">APPLY-ON</code>) and apply all of the accumulated redo data.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-B2B77522-99DE-4882-82BD-724157B93905">Make State Changes to the Databases, As Needed</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>When you enable a configuration for the first time, the broker, by default, starts redo transport services on the primary and starts log apply services on the standby (except for a snapshot standby).</p>
                     <p>At any time, you can issue a single command through Cloud Control or DGMGRL to change the state of the database. For example, you could bring the primary database into the <code class="codeph">TRANSPORT-OFF</code> state to temporarily stop sending redo data to the standby databases. Then, to resume sending redo data to the standbys, you could bring the primary database into the <code class="codeph">TRANSPORT-ON</code> state.
                     </p>
                     <div class="infoboxnotealso" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-14FF7D1D-3856-4DD9-8A3A-F56D27BDE0B2">
                        <p class="notep1">See Also:</p>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7" title="Learn how to manage broker configuration members, and monitor the state of each member of the configuration.">Managing the Members of a Broker Configuration</a> for more information about database state changes
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-C1DEB861-D0CF-4817-B02E-FB7B2A529D1D">Update Database Properties, As Needed</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The broker enables you to set database properties, some of which correspond to database initialization parameters. You can change these properties to dynamically control such things as redo transport, standby file management, log apply, and to support the overall configuration protection mode. The broker records the changes in the broker configuration file for each database in the Oracle Data Guard configuration and propagates the changes to the related initialization parameters in the server parameter files, if needed.</p>
                     <div class="infoboxnotealso" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-907D046A-BFBA-4137-9407-0F667DB953A4">
                        <p class="notep1">See Also:</p>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7" title="Learn how to manage broker configuration members, and monitor the state of each member of the configuration.">Managing the Members of a Broker Configuration</a> and <a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="Use Oracle Data Guard broker properties to manage instances or the entire configuration.">Oracle Data Guard Broker Properties</a> for complete information about database properties
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-56CD3D92-B16C-477E-ABC8-3D41C95B3617">Set Data Protection Modes, As Needed</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The broker enables you to set the data protection mode for the configuration. You can configure the protection mode to maximize data protection, maximize availability, or maximize performance.</p>
                     <div class="infoboxnotealso" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-7CBFAA08-843F-43E7-9693-F95397CA7669">
                        <p class="notep1">See Also:</p>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" title="You can use the broker to set up a configuration having any of the different data protection modes.">Managing Data Protection Modes</a> for information about managing data protection modes
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-1CB5227C-8181-4FCC-882B-9A70355A5070">Monitor the Configuration</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>You can check the health of the configuration, display and update the properties of the databases, and set Cloud Control events.</p>
                     <p>Cloud Control also provides a dynamic performance page that automatically and dynamically refreshes chart data and status at specified intervals. The performance chart shows a graphical summary of how far behind and how much redo data is being generated and applied.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR125"></a><div class="props_rev_3"><a id="GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931" name="GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931"></a><h3 id="DGBKR-GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931" class="sect3"><span class="enumeration_section">3.6 </span>Enable and Disable Operations
               </h3>
               <div>
                  <p>When you enable or disable a database in the broker configuration, you are effectively enabling or disabling the ability of the broker to manage and monitor the specified database.</p>
                  <p>The enable and disable operations are defined only for databases that are in a broker configuration; you cannot perform these broker operations on databases that are not part of the broker configuration. <a id="d6115e1063" class="indexterm-anchor"></a><a id="d6115e1067" class="indexterm-anchor"></a></p>
                  <p>However, disabling a broker configuration does not affect current services and operations in the actual Oracle Data Guard configuration. For example, when you disable a broker configuration, redo transport services and log apply services in the Oracle Data Guard configuration continue to function unchanged, but you can no longer manage them through the broker interfaces.</p>
                  <p>In addition, disabling a database <span class="italic">does not</span> remove or delete it from the broker configuration file. You can still change the properties of a disabled database and later reenable your ability to manage with the broker using the DGMGRL <code class="codeph">ENABLE CONFIGURATION</code> or <code class="codeph">ENABLE DATABASE</code> commands, or the Enable option in the Oracle Data Guard management pages of Cloud Control.
                  </p>
                  <div class="infoboxnote" id="GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931__GUID-2A215DA6-F271-449D-9833-747D0285658E">
                     <p class="notep1">Note:</p>
                     <p>If you disable broker management of a standby database in the broker configuration, that standby database cannot be used by the broker as a failover target in the event of loss of the primary database.</p>
                  </div>
                  <p>Disabling broker management of the configuration may be useful to do even though you are removing the broker's ability to monitor and control the databases. For example, it may be advantageous to disable a configuration temporarily in order to change one or more properties in the broker configuration all at the same time. When you change properties in a disabled configuration, it does not affect the actual database properties underneath because the changes are not applied to the running database until you reenable the configuration. For example, you might want to change the overall configuration protection mode and the redo transport services properties on a disabled configuration so that all changes are applied to the configuration at the same time upon the next enable operation.</p>
                  <div class="infoboxnotealso" id="GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931__GUID-BF131332-12FD-4F4E-81BC-246C9CD448D6">
                     <p class="notep1">See Also:</p>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-4F9446D8-AB6E-4917-BED2-058126654DA0" title="These topics describe how an Oracle Data Guard configuration's protection mode and redo transport services can affect operations such as switchovers, failovers, and disabling or enabling the configuration.">How the Protection Modes Influence Broker Operations</a></p>
                  </div>
               </div>
            </div><a id="DGBKR130"></a><div class="props_rev_3"><a id="GUID-92632C7B-BFF3-4678-9F4F-CC0B72ED6A35" name="GUID-92632C7B-BFF3-4678-9F4F-CC0B72ED6A35"></a><h3 id="DGBKR-GUID-92632C7B-BFF3-4678-9F4F-CC0B72ED6A35" class="sect3"><span class="enumeration_section">3.7 </span>Configuration Status
               </h3>
               <div>
                  <p>A configuration status reveals the overall health of the configuration.</p>
                  <p>Status of the configuration is acquired from the status of all of its databases. <a id="d6115e1131" class="indexterm-anchor"></a><a id="d6115e1135" class="indexterm-anchor"></a><a id="d6115e1139" class="indexterm-anchor"></a> 
                  </p>
                  <p>The following list describes the possible status modes for a configuration:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a id="d6115e1149" class="indexterm-anchor"></a>Success
                        </p>
                        <p>The configuration, including all of the databases configured in it, is operating as specified by the user without any warnings or errors.</p>
                     </li>
                     <li>
                        <p><a id="d6115e1156" class="indexterm-anchor"></a>Warning
                        </p>
                        <p>One or more of the databases in the configuration are not operating as specified by the user. To obtain more information, use the DGMGRL <code class="codeph">SHOW DATABASE &lt;db-unique-name&gt;</code> command or the Cloud Control display to locate each database and examine its status to reveal the source of the problem.
                        </p>
                     </li>
                     <li>
                        <p><a id="d6115e1166" class="indexterm-anchor"></a><a id="d6115e1168" class="indexterm-anchor"></a>Error
                        </p>
                        <p>One or more of the databases in the configuration failed or may no longer be operating as specified by the user. To obtain more information, use the DGMGRL <code class="codeph">SHOW DATABASE &lt;db-unique-name&gt;</code> command or the Cloud Control display to locate each database and examine its status to reveal the source of the problem.
                        </p>
                     </li>
                     <li>
                        <p>Unknown/Disabled</p>
                        <p>Broker management of the configuration is disabled and the broker is not monitoring the status of the databases in the configuration.</p>
                     </li>
                     <li>
                        <p>ROLLING DATABASE MAINTENANCE IN PROGRESS</p>
                        <p>An operation performed using the PL/SQL <code class="codeph">DBMS_ROLLING</code> package is in progress.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter describes topics about OCI performance features.">
      <meta name="description" content="This chapter describes topics about OCI performance features.">
      <title>Performance Topics</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="This chapter describes topics about OCI performance features.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96204-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="user-defined-callback-functions.html" title="Previous" type="text/html">
      <link rel="next" href="database-startup-and-shutdown.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNOCI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="user-defined-callback-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="database-startup-and-shutdown.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Performance Topics</li>
            </ol>
            <a id="GUID-DF9CF68A-3F33-4CB6-B192-4480359FBFE2" name="GUID-DF9CF68A-3F33-4CB6-B192-4480359FBFE2"></a><a id="LNOCI73039"></a><a id="LNOCI092"></a>
            
            <h2 id="LNOCI-GUID-DF9CF68A-3F33-4CB6-B192-4480359FBFE2" class="sect2"><span class="enumeration_chapter">15 </span>Performance Topics
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes topics about OCI performance features.</p>
               <p>You can use OCI to access Oracle TimesTen In-Memory Database and Oracle TimesTen Application-Tier Database Cache.</p>
               <div class="section">
                  <div class="p">This chapter includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performance-topics.html#GUID-4947CAE8-1F00-4897-BB2B-7F921E495175" title="Statement caching refers to the feature that provides and manages a cache of statements for each session.">Statement Caching in OCI</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-03884D82-8E0C-4CAB-84F4-4ED4D8D8674B" title="This section describes the following topics:">Implicit Fetching of ROWIDs</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F" title="Beginning with Oracle Database 12c Release 1 (12.1) , PL/SQL can return results (cursors) implicitly from stored procedures and anonymous PL/SQL blocks. OCIStmtGetNextResult() is provided to retrieve and process the implicit results.">OCI Support for Implicit Results</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-F8BAB50F-7D21-43C0-846D-416D34429117" title="OCI applications can use client memory to take advantage of the OCI result cache to improve response times of repeated queries.">Client Result Cache</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-75169FE4-DE2C-431F-BBA7-3691C7C33360" title="Describes topics about client statement cache auto-tuning.">Client Statement Cache Auto-Tuning</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
            <div class="props_rev_3"><a id="GUID-4947CAE8-1F00-4897-BB2B-7F921E495175" name="GUID-4947CAE8-1F00-4897-BB2B-7F921E495175"></a><h3 id="LNOCI-GUID-4947CAE8-1F00-4897-BB2B-7F921E495175" class="sect3"><span class="enumeration_section">15.1 </span>Statement Caching in OCI
               </h3>
               <div>
                  <p>Statement caching refers to the feature that provides and manages a cache of statements for each session.</p>
                  <p>In the server, it means that cursors are ready to be used without the need to parse the statement again. You can use statement caching with connection pooling and with session pooling, and improve performance and scalability. You can use it without session pooling as well. OCI calls that implement statement caching are:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">OCIStmtPrepare2()</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">OCIStmtRelease()</code></p>
                     </li>
                  </ul>
                  <div class="p">This section includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performance-topics.html#GUID-3525B9FE-2EE8-4016-90FF-54A684DF8198" title="To perform statement caching without session pooling, users perform the usual OCI steps to log on.">Statement Caching Without Session Pooling in OCI</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-75CA667E-81A1-4DDF-898B-9B1A46459ACA" title="For statement caching with session pooling, the concepts remain the same, except that the statement cache is enabled at the session pool layer rather than at the session layer.">Statement Caching with Session Pooling in OCI</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-49C78457-8F76-48E1-A2CD-7EB22175042F" title="If you are using statement caching, follow these rules.">Rules for Statement Caching in OCI</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-969F29B1-BF1B-4D0F-B06D-5B90FDC56D78" title="To avoid repeated bind and define operations on statements in the cache by the application, the application can register an opaque context with a statement taken from the statement cache and register a callback function with the service context.">Bind and Define Optimization in Statement Caching</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-514CBC11-2222-43B4-A8AD-C71842DF9840" title="Indicates where to find a working example of statement caching.">OCI Statement Caching Code Example</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-4947CAE8-1F00-4897-BB2B-7F921E495175__GUID-9191985B-BC63-438A-AE5B-360FA3DAE8B9">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="Prepares a SQL or PL/SQL statement for execution.">OCIStmtPrepare2()</a></p>
                        </li>
                        <li>
                           <p><a href="statement-functions.html#GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E" title="Releases the statement handle obtained by a call to OCIStmtPrepare2().">OCIStmtRelease()</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-3525B9FE-2EE8-4016-90FF-54A684DF8198" name="GUID-3525B9FE-2EE8-4016-90FF-54A684DF8198"></a><h4 id="LNOCI-GUID-3525B9FE-2EE8-4016-90FF-54A684DF8198" class="sect4"><span class="enumeration_section">15.1.1 </span>Statement Caching Without Session Pooling in OCI
                  </h4>
                  <div>
                     <p>To perform statement caching without session pooling, users perform the usual OCI steps to log on.</p>
                     <p>The call to obtain a session has a mode that specifies whether statement caching is enabled for the session. Initially the statement cache is empty. Developers try to find a statement in the cache using the statement text. If the statement exists, the API returns a previously prepared statement handle; otherwise, it returns a newly prepared statement handle. </p>
                     <p>The application developer can perform binds and defines and then simply execute and fetch the statement before returning the statement to the cache. If the statement handle is not found in the cache, the developer must set different attributes on the handle in addition to the other steps.</p>
                     <p><code class="codeph">OCIStmtPrepare2()</code> takes a mode that determines if the developer wants a prepared statement handle or a null statement handle if the statement is not found in the cache. 
                     </p>
                     <p>The pseudocode looks like this:</p><pre class="oac_no_warn" dir="ltr">OCISessionBegin( userhp, ... OCI_STMT_CACHE)  ;
OCIAttrset(svchp, userhp, ...);  /* Set the user handle in the service context */
OCIStmtPrepare2(svchp, &amp;stmthp, stmttext, key, ...);
OCIBindByPos(stmthp, ...);
OCIDefineByPos(stmthp, ...);
OCIStmtExecute(svchp, stmthp, ...);
OCIStmtFetch2(svchp, ...);
OCIStmtRelease(stmthp, ...);
...</pre><div class="infoboxnotealso" id="GUID-3525B9FE-2EE8-4016-90FF-54A684DF8198__GUID-A466A27D-1961-450F-8C0A-77A0084ADD41">
                        <p class="notep1">See Also:</p>
                        <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="Prepares a SQL or PL/SQL statement for execution.">OCIStmtPrepare2()</a></p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-75CA667E-81A1-4DDF-898B-9B1A46459ACA" name="GUID-75CA667E-81A1-4DDF-898B-9B1A46459ACA"></a><h4 id="LNOCI-GUID-75CA667E-81A1-4DDF-898B-9B1A46459ACA" class="sect4"><span class="enumeration_section">15.1.2 </span>Statement Caching with Session Pooling in OCI
                  </h4>
                  <div>
                     <p>For statement caching with session pooling, the concepts remain the same, except that the statement cache is enabled at the session pool layer rather than at the session layer.</p>
                     <p>The attribute <code class="codeph">OCI_ATTR_SPOOL_STMTCACHESIZE</code> sets the default statement cache size for each of the sessions in the session pool. It is set on the <code class="codeph">OCI_HTYPE_SPOOL</code> handle. The statement cache size for a particular session in the pool can be overridden at any time by using <code class="codeph">OCI_ATTR_STMTCACHESIZE</code> on that session. The value of <code class="codeph">OCI_ATTR_SPOOL_STMTCACHESIZE</code> can be changed at any time. You can use this attribute to enable or disable statement caching at the pool level, after creation, just as attribute <code class="codeph">OCI_ATTR_STMTCACHESIZE</code> (on the service context) is used to enable or disable statement caching at the session level. This change is reflected on individual sessions in the pool, when they are provided to a user. Tagged sessions are an exception to this behavior. This is explained later in this section. 
                     </p>
                     <div class="infoboxnote" id="GUID-75CA667E-81A1-4DDF-898B-9B1A46459ACA__GUID-F8243F9A-3B83-4CD4-8114-F00044ADCBD3">
                        <p class="notep1">Note:</p>
                        <p>You can change the attributes after acquiring a session. However, once an attribute is changed, it will remain set on the underlying physical session. This value will not be reset back implicitly while releasing the session back to the session pool. Hence, it is the developer's responsibility to maintain the state of the sessions before releasing the session using <code class="codeph">OCIStmtRelease()</code>.
                        </p>
                     </div>
                     <p>Enabling or disabling of statement caching is allowed on individual pooled sessions as it is on nonpooled sessions.</p>
                     <p>A user can enable statement caching on a session retrieved from a non-statement cached pool in an <code class="codeph">OCISessionGet()</code> or <code class="codeph">OCILogon2()</code> call by specifying <code class="codeph">OCI_SESSGET_STMTCACHE</code> or <code class="codeph">OCI_LOGON2_STMTCACHE</code>, respectively, in the mode argument.
                     </p>
                     <p>When a user asks for a session from a session pool, the statement cache size for that session defaults to that of the pool. This may also mean enabling or disabling statement caching in that session. For example, if a pooled session (Session A) has statement caching enabled, and statement caching is turned off in the pool, and a user asks for a session, and Session A is returned, then statement caching is turned off in Session A. As another example, if Session A in a pool does not have statement caching enabled, and statement caching at the pool level is turned on, then before returning Session A to a user, statement caching on Session A with size equal to that of the pool is turned on.</p>
                     <p>This does not hold true if a tagged session is asked for and retrieved. In this case, the size of the statement cache is not changed. Consequently, it is not turned on or off. Moreover, if the user specifies mode <code class="codeph">OCI_SESSGET_STMTCACHE</code> in the <code class="codeph">OCISessionGet()</code> call, this is ignored if the session is tagged. In our earlier example, if Session A was tagged, then it is returned as is to the user.
                     </p>
                     <div class="infoboxnotealso" id="GUID-75CA667E-81A1-4DDF-898B-9B1A46459ACA__GUID-BF2EDD53-B3FD-479C-AE9D-04B23F8599B6">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="Gets a session.">OCISessionGet()</a></p>
                           </li>
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="Gets a session.">OCILogon2()</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-49C78457-8F76-48E1-A2CD-7EB22175042F" name="GUID-49C78457-8F76-48E1-A2CD-7EB22175042F"></a><h4 id="LNOCI-GUID-49C78457-8F76-48E1-A2CD-7EB22175042F" class="sect4"><span class="enumeration_section">15.1.3 </span>Rules for Statement Caching in OCI
                  </h4>
                  <div>
                     <p>If you are using statement caching, follow these rules.</p>
                     <p>Here are some rules to follow for statement caching in OCI:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use the function <code class="codeph">OCIStmtPrepare2()</code> instead of <code class="codeph">OCIStmtPrepare()</code>. If you are using <code class="codeph">OCIStmtPrepare()</code>, you are strongly urged not to use a statement handle across different service contexts. Doing so raises an error if the statement has been obtained by <code class="codeph">OCIStmtPrepare2()</code>. Migration of a statement handle to a new service context actually closes the cursor associated with the old session and therefore no sharing is achieved. Client-side sharing is also not obtained, because OCI frees all buffers associated with the old session when the statement handle is migrated.
                           </p>
                        </li>
                        <li>
                           <p>You are required to keep one service context per session. Any statement handle obtained using <code class="codeph">OCIStmtPrepare2()</code> with a certain service context should be subsequently used only in conjunction with the same service context, and never with a different service context.
                           </p>
                        </li>
                        <li>
                           <p>A call to <code class="codeph">OCIStmtPrepare2()</code>, even if the session does not have a statement cache, also allocates the statement handle. Therefore, applications using only <code class="codeph">OCIStmtPrepare2()</code> must not call <code class="codeph">OCIHandleAlloc()</code> for the statement handle. 
                           </p>
                        </li>
                        <li>
                           <p>A call to <code class="codeph">OCIStmtPrepare2()</code> must be followed by a call to <code class="codeph">OCIStmtRelease()</code> after the user is done with the statement handle. If statement caching is used, this releases the statement to the cache. If statement caching is not used, the statement is deallocated. Do not call <code class="codeph">OCIHandleFree()</code> to free the memory.
                           </p>
                        </li>
                        <li>
                           <p>If the call to <code class="codeph">OCIStmtPrepare2()</code> is made with the <code class="codeph">OCI_PREP2_CACHE_SEARCHONLY</code> mode and a <code class="codeph">NULL</code> statement was returned (statement was not found), the subsequent call to <code class="codeph">OCIStmtRelease()</code> is not required and must not be performed. 
                           </p>
                        </li>
                        <li>
                           <p>Do not call <code class="codeph">OCIStmtRelease()</code> for a statement that was prepared using <code class="codeph">OCIStmtPrepare()</code>.
                           </p>
                        </li>
                        <li>
                           <p>The statement cache has a maximum size (number of statements) that can be modified by an attribute on the service context, <code class="codeph">OCI_ATTR_STMTCACHESIZE</code>. The default value is 20. This attribute can also be used to enable or disable statement caching for the session, pooled or nonpooled. If <code class="codeph">OCISessionBegin()</code> is called without the mode set as <code class="codeph">OCI_STMT_CACHE</code>, then <code class="codeph">OCI_ATTR_STMTCACHESIZE</code> can be set on the service context to a nonzero attribute to turn on statement caching. If statement caching is not turned on at the session pool level, <code class="codeph">OCISessionGet()</code> returns a non-statement cache-enabled session. You can use <code class="codeph">OCI_ATTR_STMTCACHESIZE</code> to turn the caching on. Similarly, you can use the same attribute to turn off statement caching by setting the cache size to zero.
                           </p>
                        </li>
                        <li>
                           <p>You can tag a statement at the release time so that the next time you can request a statement of the same tag. The tag is used to search the cache. An untagged statement (tag is <code class="codeph">NULL</code>) is a special case of a tagged statement. Two statements are considered different if they differ in their tags, or if one is untagged and the other is not.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-49C78457-8F76-48E1-A2CD-7EB22175042F__GUID-C4C4DA8B-7450-45E0-977D-951DB47323DE">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="Prepares a SQL or PL/SQL statement for execution.">OCIStmtPrepare2()</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="Returns a pointer to an allocated and initialized handle.">OCIHandleAlloc()</a></p>
                           </li>
                           <li>
                              <p><a href="statement-functions.html#GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E" title="Releases the statement handle obtained by a call to OCIStmtPrepare2().">OCIStmtRelease()</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-functions.html#GUID-E87E9F91-D3DC-4F35-BE7C-F1EFBFEEBA0A" title="Explicitly deallocates a handle">OCIHandleFree()</a></p>
                           </li>
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" title="Creates a user session and begins a user session for a given server.">OCISessionBegin()</a></p>
                           </li>
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="Gets a session.">OCISessionGet()</a></p>
                           </li>
                           <li>
                              <p><a href="statement-functions.html#GUID-7C0AF073-7870-4866-BBC9-D2BF3D8E5CCE" title="Lists and describes the statement functions.">Statement Functions</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-D8EE68EB-7E38-4068-B06E-DF5686379E5E" title="Lists and describes service context handle attributes.">Service Context Handle Attributes</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-34071823-66D0-4C54-BFBB-6323BDEF8015" title="Lists and describes session pool handle attributes.">Session Pool Handle Attributes</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-969F29B1-BF1B-4D0F-B06D-5B90FDC56D78" name="GUID-969F29B1-BF1B-4D0F-B06D-5B90FDC56D78"></a><h4 id="LNOCI-GUID-969F29B1-BF1B-4D0F-B06D-5B90FDC56D78" class="sect4"><span class="enumeration_section">15.1.4 </span>Bind and Define Optimization in Statement Caching
                  </h4>
                  <div>
                     <p>To avoid repeated bind and define operations on statements in the cache by the application, the application can register an opaque context with a statement taken from the statement cache and register a callback function with the service context.</p>
                     <p>The application data such as bind and define buffers can be enclosed in the opaque context. This context is registered with the statement the first time it is taken from the cache. When a statement is taken from the cache the second time and onwards, the application can reuse the bind and define buffers, that it had registered with that statement. It is still the application's responsibility to manage the bind and defines. It can reuse both the bind and define data and the buffers, or it can change only the data and reuse the buffers, or it can free and reallocate the buffers if the current size is not enough. In the last case, it must rebind and redefine. To clean up the memory allocated by the application toward these bind and define buffers, the callback function is called during aging out of the statement or purging of the whole cache as part of session closure. The callback is called for every statement being purged. The application frees the memory and does any other cleanup required, inside the callback function. <a href="performance-topics.html#GUID-969F29B1-BF1B-4D0F-B06D-5B90FDC56D78__CACJDEDA">Example 15-1</a> shows the pseudocode.
                     </p>
                     <div class="example" id="GUID-969F29B1-BF1B-4D0F-B06D-5B90FDC56D78__CACJDEDA">
                        <p class="titleinexample">Example 15-1 Optimizing Bind and Define Operations on Statements in the Cache</p><pre class="oac_no_warn" dir="ltr">Get the statement using OCIStmtPrepare2(...)
 
Get the opaque context from the statement if it exists
 
If opaque context does not exist
 
{
 
  Allocate fetch buffers, do the OCIBindByPos, OCIDefineByPos, and so forth
 
  Enclose the buffer addresses inside a context and set the context and
  callback function on the statement
 
}
Execute/Fetch using the statement, and process the data in the fetch buffers. 
 
OCIStmtRelease() that statement
 
Next OCIStmtPrepare2()
 
OCIAttrGet() opaque application context from statement handle
 
Execute/Fetch using the statement and process the data in the fetch buffers.
 
OCIStmtRelease()
 
. . .
 
void callback_fn (context, statement, mode)
 
{
 
   /* mode= OCI_CBK_STMTCACHE_STMTPURGE means this was called when statement was
      aging out of the statement cache or if the session is ended */
 
  &lt;free the buffers in the context.&gt;
 
}</pre><div class="infoboxnotealso" id="GUID-969F29B1-BF1B-4D0F-B06D-5B90FDC56D78__GUID-1B56ABFB-29B0-4323-AD27-DE975A7A0FB7">
                           <p class="notep1">See Also:</p>
                           <p> </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="handle-and-descriptor-attributes.html#GUID-A251CF91-EB9F-4DBC-8BB8-FB5EA92C20DE__BAJIDBEG">OCI_ATTR_STMTCACHE_CBKCTX</a></p>
                              </li>
                              <li>
                                 <p></p><a href="handle-and-descriptor-attributes.html#GUID-D8EE68EB-7E38-4068-B06E-DF5686379E5E__BAJDGBHB">OCI_ATTR_STMTCACHE_CBK</a></li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-514CBC11-2222-43B4-A8AD-C71842DF9840" name="GUID-514CBC11-2222-43B4-A8AD-C71842DF9840"></a><h4 id="LNOCI-GUID-514CBC11-2222-43B4-A8AD-C71842DF9840" class="sect4"><span class="enumeration_section">15.1.5 </span>OCI Statement Caching Code Example
                  </h4>
                  <div>
                     <p>Indicates where to find a working example of statement caching.</p>
                     <p>See <code class="codeph">cdemostc.c</code> in directory <code class="codeph">demo</code> for a working example of statement caching.
                     </p>
                  </div>
               </div>
            </div><a id="LNOCI73044"></a><a id="LNOCI10100"></a><div class="props_rev_3"><a id="GUID-03884D82-8E0C-4CAB-84F4-4ED4D8D8674B" name="GUID-03884D82-8E0C-4CAB-84F4-4ED4D8D8674B"></a><h3 id="LNOCI-GUID-03884D82-8E0C-4CAB-84F4-4ED4D8D8674B" class="sect3"><span class="enumeration_section">15.2 </span>Implicit Fetching of ROWIDs
               </h3>
               <div>
                  <p>This section describes the following topics:</p>
                  <div class="p">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performance-topics.html#GUID-37F2A8CC-0350-4CEC-90C0-F007FCFA6064" title="ROWID is a globally unique identifier for a row in a database. It is created at the time the row is inserted into the table, and destroyed when it is removed.">About Implicit Fetching of ROWIDs</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-5E17BFDD-07B5-4CE2-9301-DC3C41312993" title="Shows an example of implicit fetching of ROWIDs.">Example of Implicit Fetching of ROWIDs</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI73045"></a><div class="props_rev_3"><a id="GUID-37F2A8CC-0350-4CEC-90C0-F007FCFA6064" name="GUID-37F2A8CC-0350-4CEC-90C0-F007FCFA6064"></a><h4 id="LNOCI-GUID-37F2A8CC-0350-4CEC-90C0-F007FCFA6064" class="sect4"><span class="enumeration_section">15.2.1 </span>About Implicit Fetching of ROWIDs
                  </h4>
                  <div>
                     <p><code class="codeph">ROWID</code> is a globally unique identifier for a row in a database. It is created at the time the row is inserted into the table, and destroyed when it is removed. 
                     </p>
                     <p><code class="codeph">ROWID</code> values have several important uses. They are unique identifiers for rows in a table. They are the fastest way to access a single row and can show how the rows in the table are stored. 
                     </p>
                     <p>Implicit fetching of <code class="codeph">ROWID</code>s in <code class="codeph">SELECT</code> <code class="codeph">...</code> <code class="codeph">FOR</code> <code class="codeph">UPDATE</code> statements means that the <code class="codeph">ROWID</code> is retrieved at the client side, even if it is not one of the columns named in the select statement. The <code class="codeph">position</code> parameter of <code class="codeph">OCIDefineByPos()</code> is set to zero (0). These host variables can be specified for retrieving the <code class="codeph">ROWID</code> pseudocolumn values:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">SQLT_CHR</code> (<code class="codeph">VARCHAR2</code>)
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SQLT_VCS</code> (<code class="codeph">VARCHAR</code>)
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SQLT_STR</code> (<code class="codeph">NULL</code>-terminated string)
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SQLT_LVC</code> (<code class="codeph">LONG</code> <code class="codeph">VARCHAR</code>)
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SQLT_AFC</code> (<code class="codeph">CHAR</code>)
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SQLT_AVC</code> (<code class="codeph">CHARZ</code>)
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SQLT_VST</code> (<span>OCI String</span>)
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SQLT_RDD</code> (<code class="codeph">ROWID</code> descriptor)
                           </p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">SELECT</code> <code class="codeph">...</code> <code class="codeph">FOR</code> <code class="codeph">UPDATE</code> statement identifies the rows that are to be updated and then locks each row in the result set. This is useful when you want to base an update on the existing values in a row. In that case, you must ensure that another user does not change the row.
                     </p>
                     <p>When you specify character buffers for storing the values of the <code class="codeph">ROWID</code>s (for example, if getting it in <code class="codeph">SQLT_STR</code> format), allocate enough memory for storing <code class="codeph">ROWID</code>s. Remember the differences between the <code class="codeph">ROWID</code> data type and the <code class="codeph">UROWID</code> data type. The <code class="codeph">ROWID</code> data type can only store physical <code class="codeph">ROWID</code>s, but <code class="codeph">UROWID</code> can store logical <code class="codeph">ROWID</code>s (identifiers for the rows of index-organized tables) as well. The maximum internal length for the <code class="codeph">ROWID</code> type is 10 bytes; it is 3950 bytes for the <code class="codeph">UROWID</code> data type.
                     </p>
                     <p>Dynamic define is equivalent to calling <code class="codeph">OCIDefineByPos()</code> or <code class="codeph">OCIDefineByPos2()</code> with <code class="codeph">mode</code> set as <code class="codeph">OCI_DYNAMIC_FETCH</code>. Dynamic defines enable you to set up additional attributes for a particular define handle. It specifies a callback function that is invoked at runtime to get a pointer to the buffer into which the fetched data or a piece of it is to be retrieved.
                     </p>
                     <p>The attribute <code class="codeph">OCI_ATTR_FETCH_ROWID</code> must be set on the statement handle before you can use implicit fetching of <code class="codeph">ROWID</code>s, in this way:
                     </p><pre class="oac_no_warn" dir="ltr">OCIAttrSet(stmthp, OCI_HTYPE_STMT, 0, 0 , OCI_ATTR_FETCH_ROWID, errhp);
</pre><p>Dynamic define is not compatible with implicit fetching of <code class="codeph">ROWID</code>s. In normal scenarios this mode allows the application to provide buffers for a column, for each row; that is, a callback is invoked every time a column value is fetched.
                     </p>
                     <p>This feature, using <code class="codeph">OCIDefineByPos()</code> or <code class="codeph">OCIDefineByPos2()</code> for position 0, is for fetching an array of data simultaneously into the user buffers and getting their respective <code class="codeph">ROWID</code>s at the same time. It allows for fetching of <code class="codeph">ROWID</code>s with <code class="codeph">SELECT....FOR UPDATE</code> statements even when <code class="codeph">ROWID</code> is not one of the columns in the <code class="codeph">SELECT</code> query. When fetching the data one by one into the user buffers, you can use the existing attribute <code class="codeph">OCI_ATTR_ROWID</code>.
                     </p>
                     <p>If you use this feature to fetch the <code class="codeph">ROWID</code>s, the attribute <code class="codeph">OCI_ATTR_ROWID</code> on the statement handle cannot be used simultaneously to get the <code class="codeph">ROWID</code>s. You can only use one of them at a time for a particular statement handle.
                     </p>
                     <div class="infoboxnotealso" id="GUID-37F2A8CC-0350-4CEC-90C0-F007FCFA6064__GUID-7BE90B21-8615-42AF-9D5D-8753E726B2FA">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-A251CF91-EB9F-4DBC-8BB8-FB5EA92C20DE__CHDEJDEE">OCI_ATTR_FETCH_ROWID</a></p>
                           </li>
                           <li>
                              <p><a href="bind-define-describe-functions.html#GUID-CFE5AA54-DEBC-42D3-8A27-AFF1E7815691" title="Associates an item in a select list with the type and output data buffer.">OCIDefineByPos()</a> or <a href="bind-define-describe-functions.html#GUID-74939FB5-919E-4D24-B327-AFB532435061" title="Associates an item in a select list with the type and output data buffer. Use this call when working with data types when actual lengths exceed UB2MAXVAL on the client.">OCIDefineByPos2()</a></p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div><a id="LNOCI72695"></a><a id="LNOCI16738"></a><div class="props_rev_3"><a id="GUID-5E17BFDD-07B5-4CE2-9301-DC3C41312993" name="GUID-5E17BFDD-07B5-4CE2-9301-DC3C41312993"></a><h4 id="LNOCI-GUID-5E17BFDD-07B5-4CE2-9301-DC3C41312993" class="sect4"><span class="enumeration_section">15.2.2 </span>Example of Implicit Fetching of ROWIDs
                  </h4>
                  <div>
                     <p>Shows an example of implicit fetching of ROWIDs.</p>
                     <div class="section">
                        <p>Use the fragment of a C program in <a href="performance-topics.html#GUID-5E17BFDD-07B5-4CE2-9301-DC3C41312993__CEGFFICH">Example 15-2</a> to build upon.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5E17BFDD-07B5-4CE2-9301-DC3C41312993__CEGFFICH">
                        <p class="titleinexample">Example 15-2 Implicit Fetching of ROWIDs</p><pre class="oac_no_warn" dir="ltr">#include &lt;oci.h&gt;
 
int main()
{
 ...
 text *mySql = (text *) "SELECT emp_name FROM emp FOR UPDATE";
 text rowid[100][15] = {0};
 text empName[100][15] = {0};
 ...
 
 /* Set up the environment, error handle, etc. */
 ...
 
 /* Prepare the statement -  select ... for update. */
 
 
  if (OCIStmtPrepare (select_p, errhp,
                      mySql, strlen(mySql), OCI_NTV_SYNTAX, OCI_DEFAULT))
  {
    printf ("Prepare failed \n");
    return (OCI_ERROR);
  }
 
 /* Set attribute for implicit fetching of ROWIDs on the statement handle. */
 if (OCIAttrSet(select_p, OCI_HTYPE_STMT, 0, 0, OCI_ATTR_FETCH_ROWID, errhp))
 {
   printf ("Unable to set the attribute - OCI_ATTR_FETCH_ROWID \n");
   return OCI_ERROR;
 }
  /* 
   * Define the positions: 0 for getting ROWIDs and other positions 
   * to fetch other columns.
   * Also, get the define conversion done implicitly by fetching 
   * the ROWIDs in the string format. 
   */
 
  if (OCIDefineByPos ( select_p,
                       &amp;defnp0,
                       errhp,
                       0,
                       rowid[0],
                       15,
                       SQLT_STR,
                       (void *) ind,
                       (void *) 0,
                       (void *) 0,
                       OCI_DEFAULT) ||
       OCIDefineByPos(select_p,
                       &amp;defnp1,
                       errhp,
                       1,
                       empName[0],
                       15,
                       SQLT_STR,
                       (void *) 0,
                       (void *) 0,
                       (void *) 0,
                       OCI_DEFAULT)
                       )
  {
    printf ("Failed to define\n");
    return (OCI_ERROR);
  }
 
 
  /* Execute the statement. */
 
 if (errr = OCIStmtExecute(svchp,
                            select_p,
                            errhp,
                            (ub4) 5,
                            (ub4) 0,
                            (OCISnapshot *) NULL,
                            (OCISnapshot *) NULL,
                            (ub4) OCI_DEFAULT))
  {
    if (errr != OCI_NO_DATA) 
       return errr;
  }
 
  printf ("Column 0  \t Column 1\n");
  printf ("_________ \t ________\n");
 
  for (i =0 ;i&lt;5 i++)
   {
     printf("%s \t %s \n", rowid[i], empName[i]);
   }
 
 return OCI_SUCCESS;  
}
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="LNOCI73046"></a><a id="LNOCI73047"></a><a id="LNOCI73048"></a><a id="LNOCI73049"></a><a id="LNOCI73008"></a><div class="props_rev_3"><a id="GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F" name="GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F"></a><h3 id="LNOCI-GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F" class="sect3"><span class="enumeration_section">15.3 </span>OCI Support for Implicit Results
               </h3>
               <div>
                  <p>Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1) , PL/SQL can return results (cursors) implicitly from stored procedures and anonymous PL/SQL blocks. <code class="codeph">OCIStmtGetNextResult()</code> is provided to retrieve and process the implicit results. 
                  </p>
                  <div class="section">
                     <p>PL/SQL provides a subprogram <code class="codeph">RETURN_RESULT</code> in the <code class="codeph">DBMS_SQL</code> package to return the result of an executed statement as shown in <a href="performance-topics.html#GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGBHFGH">Example 15-3</a>.  In the current release, only <code class="codeph">SELECT</code> query result-sets can be implicitly returned by a PL/SQL procedure block. <code class="codeph">OCIStmtGetNextResult()</code> returns an OCI statement handle on which the usual OCI define and fetch calls are done to retrieve the rows.
                     </p>
                     <p><a href="performance-topics.html#GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGDFBAF">Example 15-4</a> shows a PL/SQL stored procedure to implicitly return result-sets (cursors) to the client. 
                     </p>
                     <p><a href="performance-topics.html#GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGHGBDI">Example 15-5</a> shows the same approach using an anonymous PL/SQL block sent by the client. This example shows how applications can use the implicit results feature to implement batching of SQL statements from an OCI application. An OCI application can dynamically form a PL/SQL anonymous block to execute multiple and variable <code class="codeph">SELECT</code> statements and return the corresponding cursors using <code class="codeph">DBMS_SQL.RETURN_RESULT</code>. 
                     </p>
                     <p><a href="performance-topics.html#GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGIHJDF">Example 15-6</a> lists an OCI program showing how to use the <code class="codeph">OCIStmtGetNextResult()</code> call to retrieve and process the implicit results returned by a PL/SQL stored procedure (see <a href="performance-topics.html#GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGDFBAF">Example 15-4</a>) or an anonymous PL/SQL block (see <a href="performance-topics.html#GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGHGBDI">Example 15-5</a>). 
                     </p>
                     <p><code class="codeph">OCIStmtGetNextResult()</code> can be called iteratively by the application to retrieve each implicit result from an executed PL/SQL statement. Applications retrieve each result-set sequentially but can fetch rows from any result-set independently. The top-level OCI statement handle tracks all the associated result-set statement handles. Freeing or releasing the top-level OCI statement handle automatically closes and frees all the implicit result-sets. 
                     </p>
                     <p>The attribute <code class="codeph">OCI_ATTR_IMPLICIT_RESULT_COUNT</code> is provided on the OCI statement handle to determine the number of implicit results available. 
                     </p>
                     <p>The <code class="codeph">rtype</code> parameter of <code class="codeph">OCIStmtGetNextResult()</code> returns the type of the result. In this release only the type: <code class="codeph">OCI_RESULT_TYPE_SELECT</code> is supported. The describe metadata of the returned result set can be accessed similar to any <code class="codeph">SELECT</code> ResultSet.
                     </p>
                     <div class="infoboxnote" id="GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__GUID-3C5A3433-15B7-4882-B34E-8BE7EA95CFA6">
                        <p class="notep1">Note:</p>
                        <p>The following OCI code can be used in external procedures too, to fetch from the implicit results. In that case, <code class="codeph">OCI_PREP2_IMPL_RESULTS_CLIENT</code> should be passed as the mode to the <code class="codeph">OCIStmtPrepare2()</code> call.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGBHFGH">
                     <p class="titleinexample">Example 15-3 DBMS_SQL RETURN_RESULT Subprogram</p><pre class="oac_no_warn" dir="ltr">procedure return_result(rc        in out sys_refcursor,
                        to_client in boolean default true);

procedure return_result(rc        in out integer,
                        to_client in boolean default true);
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGDFBAF">
                     <p class="titleinexample">Example 15-4 A PL/SQL Stored Procedure to Implicitly Return Result-Sets (Cursors) to the Client</p><pre class="oac_no_warn" dir="ltr">CREATE PROCEDURE foo AS
  c1 sys_refcursor;
  c2 sys_refcursor;
begin
  open c1 for select * from emp;
  dbms_sql.return_result(c1); --return to client
  -- open 1 more cursor
  open c2 for select * from dept;
  dbms_sql.return_result (c2); --return to client
end;
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGHGBDI">
                     <p class="titleinexample">Example 15-5 An Anonymous PL/SQL Block to Implicitly Return Result-Sets (Cursors) to the Client</p><pre class="oac_no_warn" dir="ltr">declare
  c1 sys_refcursor;
  c2 sys_refcursor;
begin
  open c1 for select * from emp;
  dbms_sql.return_result (c1); --return to client
  -- open 1 more cursor
  open c2 for select * from dept;
  dbms_sql.return_result (c2); --return to client
end;
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__CEGIHJDF">
                     <p class="titleinexample">Example 15-6 Using OCIStmtGetNextResult() to Retrieve and Process the Implicit Results Returned by Either a PL/SQL Stored Procedure or Anonymous Block</p><pre class="oac_no_warn" dir="ltr">  OCIStmt *stmthp;
  ub4      rsetcnt;
  void    *result;
  ub4      rtype;
  char    *sql = "begin foo; end;";
  
  /* Prepare and execute the PL/SQL procedure. */
  OCIStmtPrepare2(svchp, &amp;stmthp, errhp, (oratext *)sql, strlen(sql),
                 NULL, 0, OCI_NTV_SYNTAX, OCI_DEFAULT);
  OCIStmtExecute(svchp, stmthp, errhp, 1, 0,
                 (const OCISnapshot *)0,
                 (OCISnapshot *)0, OCI_DEFAULT);
 
  /* Now check if any implicit results are available. */
  OCIAttrGet((void *)stmthp, OCI_HTYPE_STMT, &amp;rsetcnt, 0,
             OCI_ATTR_IMPLICIT_RESULT_COUNT, errhp);
 
  /* Loop and retrieve the implicit result-sets.
   * ResultSets are returned in the same order as in the PL/SQL
   * procedure/block.
   */
  while (OCIStmtGetNextResult(stmthp, errhp, &amp;result, &amp;rtype,
                              OCI_DEFAULT) == OCI_SUCCESS)
  {
    /* Check the type of implicit ResultSet, currently
     * only supported type is OCI_RESULT_TYPE_SELECT
     */
    if (rtype == OCI_RESULT_TYPE_SELECT)
    {
      OCIStmt *rsethp = (OCIStmt *)result;
 
      /* Perform normal OCI actions to define and fetch rows. */
    }
    else
      printf("unknown result type %d\n", rtype);
 
    /* The result set handle should not be freed by the user. */
  }
 
  OCIStmtRelease(stmthp, errhp, NULL, 0, OCI_DEFAULT); /* Releases the statement handle. */
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F__GUID-3AAA3F6E-229F-41A2-931E-ECD008CF3B6D">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="statement-functions.html#GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687" title="Returns the implicit results from an executed PL/SQL statement handle.">OCIStmtGetNextResult()</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-A251CF91-EB9F-4DBC-8BB8-FB5EA92C20DE" title="Lists and describes statement handle attributes.">Statement Handle Attributes</a> for more information about the attribute <code class="codeph">OCI_ATTR_IMPLICIT_RESULT_COUNT</code>.
                              </p>
                           </li>
                           <li>
                              <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="Prepares a SQL or PL/SQL statement for execution.">OCIStmtPrepare2()</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNOCI10103"></a><div class="props_rev_3"><a id="GUID-F8BAB50F-7D21-43C0-846D-416D34429117" name="GUID-F8BAB50F-7D21-43C0-846D-416D34429117"></a><h3 id="LNOCI-GUID-F8BAB50F-7D21-43C0-846D-416D34429117" class="sect3"><span class="enumeration_section">15.4 </span>Client Result Cache
               </h3>
               <div>
                  <p>OCI applications can use client memory to take advantage of the OCI result cache to improve response times of repeated queries.</p>
                  <div class="infoboxnotealso" id="GUID-F8BAB50F-7D21-43C0-846D-416D34429117__GUID-BAC8F6A3-FA60-4DF2-901F-48EE88AC27D0">
                     <p class="notep1">See Also:</p>
                     <p><a href="../adfns/performance-and-scalability.html#ADFNS213" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> for complete information about using the OCI client result cache 
                     </p>
                  </div>
               </div>
            </div><a id="LNOCI73050"></a><a id="LNOCI73009"></a><div class="props_rev_3"><a id="GUID-75169FE4-DE2C-431F-BBA7-3691C7C33360" name="GUID-75169FE4-DE2C-431F-BBA7-3691C7C33360"></a><h3 id="LNOCI-GUID-75169FE4-DE2C-431F-BBA7-3691C7C33360" class="sect3"><span class="enumeration_section">15.5 </span>Client Statement Cache Auto-Tuning
               </h3>
               <div>
                  <p>Describes topics about client statement cache auto-tuning.</p>
                  <div class="p">This section describes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performance-topics.html#GUID-6E21AA56-5BBE-422A-802C-197CAC8AAEA4" title="Auto-tuning optimizes OCI client session features of mid-tier applications to gain higher performance without the need to reprogram your OCI application.">About Auto-Tuning Client Statement Cache</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-5FA63226-6372-4A36-B36E-47141A73D036" title="The more specific benefit of auto-tuning client statement cache is to transparently detect, monitor, and adjust the statement cache size to improve performance or decrease memory usage.">Benefit of Auto-Tuning Client Statement Cache</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-C7D627E2-E210-4234-AF42-648E7295DA13" title="The following connection specific parameters in oraccess.xml can be set per configuration alias or across all connect strings using default connection specific parameters.">Client Statement Cache Auto-Tuning Parameters</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-A3B6A67A-9DB9-41DC-9D73-DC8557808EF0" title="The following are some usage examples showing use and interaction of client statement cache auto-tuning parameters that are also connection specific parameters.">Usage Examples of Client Statement Cache Auto Tuning</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-02A81F8A-84F7-44AB-942F-5F8BFA878289" title="Describes conditions that enable and disable OCI client auto-tuning.">Enabling and Disabling OCI Client Auto-Tuning</a></p>
                        </li>
                        <li>
                           <p><a href="performance-topics.html#GUID-ECB2DEFC-6DCE-41C8-8A9C-162A13745E63" title="Describes guidelines to use when setting the auto-tuning parameters.">Usage Guidelines for Auto-Tuning Client Statement Cache</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI73051"></a><div class="props_rev_3"><a id="GUID-6E21AA56-5BBE-422A-802C-197CAC8AAEA4" name="GUID-6E21AA56-5BBE-422A-802C-197CAC8AAEA4"></a><h4 id="LNOCI-GUID-6E21AA56-5BBE-422A-802C-197CAC8AAEA4" class="sect4"><span class="enumeration_section">15.5.1 </span>About Auto-Tuning Client Statement Cache
                  </h4>
                  <div>
                     <p>Auto-tuning optimizes OCI client session features of mid-tier applications to gain higher performance without the need to reprogram your OCI application. </p>
                     <p>Auto tuning operations like increasing or decreasing cache memory happens implicitly during <code class="codeph">OCIStmtPrepare2()</code> and <code class="codeph">OCIStmtRelease()</code> calls on a periodic basis. Calling <code class="codeph">OCIAttrGet()</code> with <code class="codeph">OCI_ATTR_STMTCACHESIZE</code> on the service handle gives the current cache size being used, if you need to check.
                     </p>
                     <p>It is possible for the coded OCI client statement cache size setting to be sub optimal. This can happen, for example, with changing the workload causing a different working set of SQL statements. If the size is too low, it will cause excess network activity and more parses at the server. If the size is too high, there will be excess memory used. It can be difficult for the client side application to always keep this cache size optimal.</p>
                     <p>Auto-tuning automatically reconfigures the OCI statement cache size on a periodic basis. Auto-tuning is achieved by providing a deployment time setting that provides an option to reconfigure OCI statement caching to resolve this potential performance issue.</p>
                     <p>These settings are provided as connect string based deployment settings in the client <code class="codeph">oraaccess.xml</code> file that overrides manual settings to the user configuration of OCI features.
                     </p>
                     <div class="infoboxnotealso" id="GUID-6E21AA56-5BBE-422A-802C-197CAC8AAEA4__GUID-60C0F818-4FCE-42E7-AA5A-82EBA05C4168">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="Prepares a SQL or PL/SQL statement for execution.">OCIStmtPrepare2()</a></p>
                           </li>
                           <li>
                              <p><a href="statement-functions.html#GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E" title="Releases the statement handle obtained by a call to OCIStmtPrepare2().">OCIStmtRelease()</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNOCI73010"></a><div class="props_rev_3"><a id="GUID-5FA63226-6372-4A36-B36E-47141A73D036" name="GUID-5FA63226-6372-4A36-B36E-47141A73D036"></a><h4 id="LNOCI-GUID-5FA63226-6372-4A36-B36E-47141A73D036" class="sect4"><span class="enumeration_section">15.5.2 </span>Benefit of Auto-Tuning Client Statement Cache
                  </h4>
                  <div>
                     <p>The more specific benefit of auto-tuning client statement cache is to transparently detect, monitor, and adjust the statement cache size to improve performance or decrease memory usage.</p>
                     <p>Developers and DBAs can expect to see the following benefits of using auto-tuning for their OCI client applications:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Reduced time and effort in diagnosing and fixing performance problems with each part of their system, such as statement caching </p>
                        </li>
                        <li>
                           <p>Minimized manual modifications needed to configurations of this OCI feature to improve performance. Usually, this manual correction requires applications to restart more than once with different configuration parameters, thus further reducing the high availability of the client</p>
                        </li>
                        <li>
                           <p>One solution that can be used by all OCI applications to improve performance right out-of-the-box without having to make any application changes</p>
                        </li>
                        <li>
                           <p>OCI applications are freed from making custom implementations (that can be error prone) to auto-tune their OCI application to optimize performance and memory usage. Here auto-tuning is limited to internal automatic tuning of OCI Client-side statement cache size only.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI73011"></a><div class="props_rev_3"><a id="GUID-C7D627E2-E210-4234-AF42-648E7295DA13" name="GUID-C7D627E2-E210-4234-AF42-648E7295DA13"></a><h4 id="LNOCI-GUID-C7D627E2-E210-4234-AF42-648E7295DA13" class="sect4"><span class="enumeration_section">15.5.3 </span>Client Statement Cache Auto-Tuning Parameters
                  </h4>
                  <div>
                     <p>The following connection specific parameters in <code class="codeph">oraccess.xml</code> can be set per configuration alias or across all connect strings using default connection specific parameters.
                     </p>
                     <p>Values specified in the client <code class="codeph">oraaccess.xml</code> configuration file override programmatic settings.
                     </p>
                     <div class="p">This section includes the following topics:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="performance-topics.html#GUID-C69F99D2-2EAC-4A5E-BD7D-7266765C45C2" title="This parameter is optional and sets the limit for the statement caching tunable component.">&lt;statement_cache&gt;</a></p>
                           </li>
                           <li>
                              <p><a href="performance-topics.html#GUID-12F398F1-FEB6-490F-B7A3-7BAE48DCA8D4" title="This section specifies auto tune parameters.">&lt;auto_tune&gt;</a></p>
                           </li>
                           <li>
                              <p><a href="performance-topics.html#GUID-53634FE6-85C0-4C37-92FF-FB711676F82A" title="Lists and describes a comparison of all auto-tuning parameters.">Comparison of the Connection Specific Auto-Tuning Parameters</a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-C7D627E2-E210-4234-AF42-648E7295DA13__GUID-72B2DFC5-E5BA-4D68-BE39-716A87B8FF14">
                        <p class="notep1">See Also:</p>
                        <p><a href="build-and-configure-oci-applications.html#GUID-6C76054A-0E0A-4783-B00D-9B65C80C24B0" title="Describes the default values you can set for connection parameters shared across connections.">About Specifying Defaults for Connection Parameters</a> for more information about setting per configuration alias or across all connect strings using default connection specific parameters
                        </p>
                     </div>
                  </div><a id="LNOCI73013"></a><div class="props_rev_3"><a id="GUID-C69F99D2-2EAC-4A5E-BD7D-7266765C45C2" name="GUID-C69F99D2-2EAC-4A5E-BD7D-7266765C45C2"></a><h5 id="LNOCI-GUID-C69F99D2-2EAC-4A5E-BD7D-7266765C45C2" class="sect5"><span class="enumeration_section">15.5.3.1 </span>&lt;statement_cache&gt;
                     </h5>
                     <div>
                        <p>This parameter is optional and sets the limit for the statement caching tunable component. </p>
                        <div class="section"><pre class="oac_no_warn" dir="ltr">&lt;statement_cache&gt;
  &lt;size&gt;100&lt;/size&gt;
&lt;/statement_cache&gt;
</pre><p>The limit is the maximum number of statements that can be cached per session. If auto-tuning is enabled or not, this setting in <code class="codeph">oraaccess.xml</code> overrides the programmatic setting of OCI statement cache size. 
                           </p>
                           <p>If auto-tuning is enabled, this setting will be the upper bound on statement cache size while its being dynamically tuned.</p>
                           <p>If the session is not using statement caching APIs as in <code class="codeph">OCIStmtPrepare2()</code> and <code class="codeph">OCIStmtRelease()</code>, this setting is ignored.
                           </p>
                           <p>Default values are as follows:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If auto-tuning is enabled, statement caching is dynamically tuned and the initial statement cache size is set to 100 statements.</p>
                              </li>
                              <li>
                                 <p>If auto-tuning is disabled, this setting serves as the deployment setting of statement caching size, overriding any programmatic setting.</p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-C69F99D2-2EAC-4A5E-BD7D-7266765C45C2__GUID-56565C29-4873-4D32-82E5-A6001ABBB805">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="Prepares a SQL or PL/SQL statement for execution.">OCIStmtPrepare2()</a></p>
                                 </li>
                                 <li>
                                    <p><a href="statement-functions.html#GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E" title="Releases the statement handle obtained by a call to OCIStmtPrepare2().">OCIStmtRelease()</a></p>
                                 </li>
                                 <li>
                                    <p><a href="performance-topics.html#GUID-02A81F8A-84F7-44AB-942F-5F8BFA878289" title="Describes conditions that enable and disable OCI client auto-tuning.">Enabling and Disabling OCI Client Auto-Tuning</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI73012"></a><div class="props_rev_3"><a id="GUID-12F398F1-FEB6-490F-B7A3-7BAE48DCA8D4" name="GUID-12F398F1-FEB6-490F-B7A3-7BAE48DCA8D4"></a><h5 id="LNOCI-GUID-12F398F1-FEB6-490F-B7A3-7BAE48DCA8D4" class="sect5"><span class="enumeration_section">15.5.3.2 </span>&lt;auto_tune&gt;
                     </h5>
                     <div>
                        <p>This section specifies auto tune parameters.</p>
                        <div class="section">
                           <p>If the OCI session is not using statement caching APIs as in <code class="codeph">OCIStmtPrepare2()</code> or <code class="codeph">OCIStmtRelease()</code>, auto tuning parameters are ignored for that session. It is possible in a process that some sessions or connections can have auto-tuning enabled and some disabled.
                           </p>
                           <div class="p">This section includes the following topics:
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="performance-topics.html#GUID-D02F22EA-9A36-4672-AE22-85C5CBD3691B" title="This parameter turns auto tuning on or off.">&lt;enable&gt;true&lt;/enable&gt;</a></p>
                                 </li>
                                 <li>
                                    <p><a href="performance-topics.html#GUID-93048857-C168-4BA9-A126-CE06DA8F2D33" title="This parameter is optional.">&lt;ram_threshold&gt;</a></p>
                                 </li>
                                 <li>
                                    <p><a href="performance-topics.html#GUID-F624661F-FAC7-41F7-8F41-F2451EC2B47F" title="This parameter is optional.">&lt;memory_target&gt;</a></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="infoboxnotealso" id="GUID-12F398F1-FEB6-490F-B7A3-7BAE48DCA8D4__GUID-1A20E822-01D1-45FE-9890-18293AD02F03">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="Prepares a SQL or PL/SQL statement for execution.">OCIStmtPrepare2()</a></p>
                                 </li>
                                 <li>
                                    <p><a href="statement-functions.html#GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E" title="Releases the statement handle obtained by a call to OCIStmtPrepare2().">OCIStmtRelease()</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div class="props_rev_3"><a id="GUID-D02F22EA-9A36-4672-AE22-85C5CBD3691B" name="GUID-D02F22EA-9A36-4672-AE22-85C5CBD3691B"></a><h6 id="LNOCI-GUID-D02F22EA-9A36-4672-AE22-85C5CBD3691B" class="sect6"><span class="enumeration_section">15.5.3.2.1 </span>&lt;enable&gt;true&lt;/enable&gt;
                        </h6>
                        <div>
                           <p>This parameter turns auto tuning on or off.</p>
                           <div class="section">
                              <p>The default is auto tuning off <code class="codeph">(FALSE)</code> or disabled.
                              </p><pre class="oac_no_warn" dir="ltr">&lt;auto_tune&gt;
  &lt;enable&gt;true&lt;/enable&gt;
&lt;/auto_tune&gt;
</pre><p>Auto-tuning is enabled along with internal default settings.</p>
                              <div class="infoboxnotealso" id="GUID-D02F22EA-9A36-4672-AE22-85C5CBD3691B__GUID-6B0FCBAB-4D02-4440-AF48-9A0DAC8EB40F">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="performance-topics.html#GUID-C69F99D2-2EAC-4A5E-BD7D-7266765C45C2" title="This parameter is optional and sets the limit for the statement caching tunable component.">&lt;statement_cache&gt;</a> for more information about auto-tuning is enabled along with internal default settings
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="LNOCI73058"></a><div class="props_rev_3"><a id="GUID-93048857-C168-4BA9-A126-CE06DA8F2D33" name="GUID-93048857-C168-4BA9-A126-CE06DA8F2D33"></a><h6 id="LNOCI-GUID-93048857-C168-4BA9-A126-CE06DA8F2D33" class="sect6"><span class="enumeration_section">15.5.3.2.2 </span>&lt;ram_threshold&gt;
                        </h6>
                        <div>
                           <p>This parameter is optional. </p>
                           <div class="section"><pre class="oac_no_warn" dir="ltr">&lt;auto_tune&gt;
   &lt;enable&gt;true&lt;/enable&gt;
   &lt;ram_threshold&gt;0.1&lt;/ram_threshold&gt;
&lt;/auto_tune&gt;</pre><p>The default value is 0.01%. It is specified as percentage of installed RAM. This specifies the total memory available across the auto tuning sessions in a process sharing this setting. This setting can be specified per process or per connect string alias.</p>
                              <p>Note that if specified per connect string alias, the total auto tuning memory used by a client process can add up.</p>
                              <p>Therefore, it may be preferable to specify auto tuning limits in the <code class="codeph">&lt;default_parameters&gt;</code> section of <code class="codeph">oraaccess.xml</code> file. This way you have a common pool of memory for all sessions in a client process.
                              </p>
                              <p>A smaller limit uses less RAM for auto tuning, but minimizes the chance other programs running on the system do not degrade in performance.</p>
                              <p>This parameter must be specified within the <code class="codeph">&lt;auto_tune&gt;&lt;/auto_tune&gt;</code> deployment setting.
                              </p>
                              <div class="infoboxnotealso" id="GUID-93048857-C168-4BA9-A126-CE06DA8F2D33__GUID-D9D4A61A-66CC-476E-AABF-DC489C9FD8F9">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="build-and-configure-oci-applications.html#GUID-CD599644-135A-4116-8B3B-40A9BA172E5C" title="Starting with Oracle Database Release 12c Release 1 (12.1), Oracle provides an oraaccess.xml file, a client-side configuration file.">About oraaccess.xml</a></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="LNOCI73057"></a><div class="props_rev_3"><a id="GUID-F624661F-FAC7-41F7-8F41-F2451EC2B47F" name="GUID-F624661F-FAC7-41F7-8F41-F2451EC2B47F"></a><h6 id="LNOCI-GUID-F624661F-FAC7-41F7-8F41-F2451EC2B47F" class="sect6"><span class="enumeration_section">15.5.3.2.3 </span>&lt;memory_target&gt;
                        </h6>
                        <div>
                           <p>This parameter is optional.</p>
                           <div class="section"><pre class="oac_no_warn" dir="ltr">&lt;auto_tune&gt;
  &lt;enable&gt;true&lt;/enable&gt;
  &lt;memory_target&gt;40M&lt;/memory_target&gt;
&lt;/auto_tune&gt;
</pre><p>Specified in bytes. Default is undefined. It specifies the total memory available across the auto tuning sessions in a process sharing this setting. This setting can be specified per process or per connect string alias.</p>
                              <p>Note that if specified per connect string alias, the total auto tuning memory used by a client process can add up.</p>
                              <p>Therefore, it may be preferable to specify auto tuning limits in the <code class="codeph">&lt;default_parameters&gt;</code> section of <code class="codeph">oraaccess.xml</code> file. This way you have a common pool of memory for all sessions in a client process.
                              </p>
                              <p>This parameter must be specified within the <code class="codeph">&lt;auto_tune&gt;&lt;/auto_tune&gt;</code> deployment setting.
                              </p>
                              <p>Using this parameter ensures the use of a consistent memory limit for auto tuning irrespective of installed RAM on that system.</p>
                              <p>If not specified, the auto tuning memory limit is based on the <code class="codeph">&lt;ram_threshold&gt;</code> parameter setting.
                              </p>
                              <p>If both <code class="codeph">&lt;ram_threshold&gt;</code> and <code class="codeph">&lt;memory_target&gt;</code> parameters are specified, the effective limit is the minimum of the two parameters.
                              </p>
                              <div class="infoboxnotealso" id="GUID-F624661F-FAC7-41F7-8F41-F2451EC2B47F__GUID-5B2CC834-9233-4AC8-90A2-6CD14889A4CC">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="build-and-configure-oci-applications.html#GUID-CD599644-135A-4116-8B3B-40A9BA172E5C" title="Starting with Oracle Database Release 12c Release 1 (12.1), Oracle provides an oraaccess.xml file, a client-side configuration file.">About oraaccess.xml</a></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="LNOCI73019"></a><div class="props_rev_3"><a id="GUID-53634FE6-85C0-4C37-92FF-FB711676F82A" name="GUID-53634FE6-85C0-4C37-92FF-FB711676F82A"></a><h5 id="LNOCI-GUID-53634FE6-85C0-4C37-92FF-FB711676F82A" class="sect5"><span class="enumeration_section">15.5.3.3 </span>Comparison of the Connection Specific Auto-Tuning Parameters
                     </h5>
                     <div>
                        <p>Lists and describes  a comparison of all auto-tuning parameters.</p>
                        <div class="section">
                           <p><a href="performance-topics.html#GUID-53634FE6-85C0-4C37-92FF-FB711676F82A__CEGJIEJE" title="Describes a comparison of all auto-tuning parameters. The table consists of 3 columns. Column 1 is the auto-tuning parameter name, column 2 is the setting information and its semantics, and column 3 indicates whether the parameter is for auto-tuning or deployment setting.">Table 15-1</a> shows a comparison of the connection specific auto-tuning parameters.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-53634FE6-85C0-4C37-92FF-FB711676F82A__CEGJIEJE">
                           <p class="titleintable">Table 15-1 Comparison of Some Connection Specific Auto-Tuning Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Comparison of Some Connection Specific Auto-Tuning Parameters" summary="Describes a comparison of all auto-tuning parameters. The table consists of 3 columns. Column 1 is the auto-tuning parameter name, column 2 is the setting information and its semantics, and column 3 indicates whether the parameter is for auto-tuning or deployment setting." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d131832e5375">Parameter</th>
                                    <th align="left" valign="bottom" width="27%" id="d131832e5378">Setting and Semantics</th>
                                    <th align="left" valign="bottom" width="36%" id="d131832e5381">For Auto-Tuning or Deployment Setting</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d131832e5386" headers="d131832e5375 ">
                                       <p><code class="codeph">&lt;statement_cache&gt;</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d131832e5386 d131832e5378 ">
                                       <p>Optional setting.</p>
                                       <p>Per session cache size.</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d131832e5386 d131832e5381 ">
                                       <p>If auto-tuning is enabled (see <span class="q">"<a href="performance-topics.html#GUID-02A81F8A-84F7-44AB-942F-5F8BFA878289" title="Describes conditions that enable and disable OCI client auto-tuning.">Enabling and Disabling OCI Client Auto-Tuning</a>"</span>), this is the upper bound of each sessions statement cache size while its tuned by auto tuning.
                                       </p>
                                       <p>Or else it refers to the deployment setting for statement caching. </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d131832e5408" headers="d131832e5375 ">
                                       <p><code class="codeph">&lt;auto_tune&gt;</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d131832e5408 d131832e5378 ">
                                       <p>Optional setting.</p>
                                       <p>Specify this parameter to use auto-tuning. Applies to all connections using this connect string or all connections if null connect string is specified.</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d131832e5408 d131832e5381 ">
                                       <p>Only auto-tuning related</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d131832e5421" headers="d131832e5375 ">
                                       <p><code class="codeph">&lt;ram_threshold&gt;</code><code class="codeph">0.1&lt;/ram_threshold&gt;</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d131832e5421 d131832e5378 ">
                                       <p>Optional setting.</p>
                                       <p>Converts the percentage setting to a memory value based on installed RAM on that client or mid-tier system.</p>
                                       <p>This is the upper limit of memory used for auto tuning within a client process.</p>
                                       <p>For installed RAM of 8GB, not specifying this parameter gives 800 KB of memory among the sessions.</p>
                                       <p>Note each connection can potentially have its own setting of auto tuning parameters so these values can add up for the whole process based on configuration settings. It is preferable to use this parameter hence in the <code class="codeph">&lt;default_parameters&gt;</code> section of the  <code class="codeph">oraaccess.xml</code> file. See <span class="q">"<a href="build-and-configure-oci-applications.html#GUID-B8A13EE4-0D42-4856-A4F4-FE438650D691" title="Lists some high level rules with regards to the oraaccess.xml file syntax stated here for simplicity.">File (oraaccess.xml) Properties</a>"</span> for a description of the syntax. 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d131832e5421 d131832e5381 ">
                                       <p>Only auto-tuning related. If auto-tuning is disabled, this parameter setting is ignored. This parameter must be specified within the <code class="codeph">&lt;auto_tune&gt;&lt;/auto_tune&gt;</code> deployment setting.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d131832e5462" headers="d131832e5375 ">
                                       <p><code class="codeph">&lt;memory_target&gt;1048576&lt;/memory_target&gt;</code></p>
                                    </td>
                                    <td align="left" valign="top" width="27%" headers="d131832e5462 d131832e5378 ">
                                       <p>Optional setting.</p>
                                       <p>This is the upper limit of memory used for auto tuning within a client process.</p>
                                       <p>Note each connection can potentially have its own setting of auto tuning parameters so these values can add up for the whole process based on configuration settings. It is preferable to use this parameter hence in the <code class="codeph">&lt;default_parameters&gt;</code> section of the  <code class="codeph">oraaccess.xml</code> file. 
                                       </p>
                                       <p>See <span class="q">"<a href="build-and-configure-oci-applications.html#GUID-B8A13EE4-0D42-4856-A4F4-FE438650D691" title="Lists some high level rules with regards to the oraaccess.xml file syntax stated here for simplicity.">File (oraaccess.xml) Properties</a>"</span> for a description of the syntax.
                                       </p>
                                       <p>Value is in bytes. 1,048,576 bytes is 1 MB.</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d131832e5462 d131832e5381 ">
                                       <p>Only auto-tuning related. If auto-tuning is disabled, this parameter setting is ignored. This parameter must be specified within the <code class="codeph">&lt;auto_tune&gt;&lt;/auto_tune&gt;</code> deployment setting. 
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="LNOCI73020"></a><div class="props_rev_3"><a id="GUID-A3B6A67A-9DB9-41DC-9D73-DC8557808EF0" name="GUID-A3B6A67A-9DB9-41DC-9D73-DC8557808EF0"></a><h4 id="LNOCI-GUID-A3B6A67A-9DB9-41DC-9D73-DC8557808EF0" class="sect4"><span class="enumeration_section">15.5.4 </span>Usage Examples of Client Statement Cache Auto Tuning
                  </h4>
                  <div>
                     <p>The following are some usage examples showing use and interaction of client statement cache auto-tuning parameters that are also connection specific parameters.</p><pre class="oac_no_warn" dir="ltr">&lt;statement_cache&gt;
  &lt;size&gt;100&lt;/size&gt;
&lt;/statement_cache&gt;
</pre><p>The programmatic statement cache size will be replaced by this setting. Auto-tuning is disabled and cache is managed per LRU. In this case, the application developer believes the OCI application statement prefetching programmatic settings do not need to be overridden.</p><pre class="oac_no_warn" dir="ltr">&lt;auto_tune&gt;
  &lt;enable&gt;true&lt;/enable&gt;
&lt;/auto_tune&gt;
</pre><p>Auto-tuning is enabled along with internal default settings.</p><pre class="oac_no_warn" dir="ltr">&lt;statement_cache&gt;
  &lt;size&gt;100&lt;/size&gt;
&lt;/statement_cache&gt;
&lt;auto_tune&gt;
  &lt;enable&gt;true&lt;/enable&gt;
  &lt;memory_target&gt;40M&lt;/memory_target&gt;
&lt;/auto_tune&gt;
</pre><p>This statement caching deployment setting of 100 will replace the programmatic statement cache size and because auto-tuning is enabled, statement caching will be auto-tuned. The memory target setting is in effect because auto-tuning is enabled.</p>
                     <p>Auto tuning will always try to limit total statement cache memory used around a memory target. If a memory target is not specified, it is based on the percentage of total installed RAM.</p>
                     <p>In this case, the memory limit is the specified memory target.</p>
                     <div class="infoboxnotealso" id="GUID-A3B6A67A-9DB9-41DC-9D73-DC8557808EF0__GUID-3C52903D-1A11-4326-B93E-4F5381BA5114">
                        <p class="notep1">See Also:</p>
                        <p><a href="performance-topics.html#GUID-C69F99D2-2EAC-4A5E-BD7D-7266765C45C2" title="This parameter is optional and sets the limit for the statement caching tunable component.">&lt;statement_cache&gt;</a> for more information about auto-tuning is enabled along with internal default settings
                        </p>
                     </div>
                  </div>
               </div><a id="LNOCI73025"></a><div class="props_rev_3"><a id="GUID-02A81F8A-84F7-44AB-942F-5F8BFA878289" name="GUID-02A81F8A-84F7-44AB-942F-5F8BFA878289"></a><h4 id="LNOCI-GUID-02A81F8A-84F7-44AB-942F-5F8BFA878289" class="sect4"><span class="enumeration_section">15.5.5 </span>Enabling and Disabling OCI Client Auto-Tuning
                  </h4>
                  <div>
                     <p>Describes conditions that enable and disable OCI client auto-tuning.</p>
                     <p>The following conditions enable and disable OCI client auto-tuning:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Auto-tuning is enabled when the client <code class="codeph">oraaccess.xml</code> <code class="codeph">&lt;auto_tune&gt;</code> section is added with enable specified as true, <code class="codeph">&lt;enable&gt;true&lt;/enable&gt;</code></p>
                        </li>
                        <li>
                           <p>Auto-tuning is disabled by default or when enable is set to false, &lt;enable&gt;false&lt;/enable&gt; in <code class="codeph">oraaccess.xml</code> under the <code class="codeph">&lt;auto_tune&gt;</code> section. 
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI73022"></a><div class="props_rev_3"><a id="GUID-ECB2DEFC-6DCE-41C8-8A9C-162A13745E63" name="GUID-ECB2DEFC-6DCE-41C8-8A9C-162A13745E63"></a><h4 id="LNOCI-GUID-ECB2DEFC-6DCE-41C8-8A9C-162A13745E63" class="sect4"><span class="enumeration_section">15.5.6 </span>Usage Guidelines for Auto-Tuning Client Statement Cache
                  </h4>
                  <div>
                     <p>Describes guidelines to use when setting the auto-tuning parameters.</p>
                     <p>The following are some guidelines to use when setting the auto-tuning parameters:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When either client response, memory allocation, or client CPU is high and you want to gain performance without rebuilding the OCI application, you can use <code class="codeph">&lt;auto_tune&gt;</code> settings or deployment <code class="codeph">&lt;statement_cache&gt;</code> settings. Auto tuning may also decrease the network bytes transferred between client and server.
                           </p>
                        </li>
                        <li>
                           <p>When AWR or ADDM reports lots of parses and you cannot or you may prefer not to programmatically modify the statement cache size, you can specify auto-tuning for statement cache or use the deployment statement cache setting <code class="codeph">&lt;statement_cache&gt;</code>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
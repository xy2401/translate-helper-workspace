<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>JSON_OBJECTAGG</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="JSON_OBJECT.html" title="Previous" type="text/html">
      <link rel="next" href="JSON_QUERY.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="JSON_OBJECT.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="JSON_QUERY.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">JSON_OBJECTAGG</li>
            </ol>
            <a id="GUID-09422D4A-936C-4D38-9991-C64101283D98" name="GUID-09422D4A-936C-4D38-9991-C64101283D98"></a>
            
            <h2 id="SQLRF-GUID-09422D4A-936C-4D38-9991-C64101283D98" class="sect2">JSON_OBJECTAGG</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-DC178605-A520-4875-9F07-528D44D32196">Syntax</p>
                  <div class="figure" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-EFEA9761-B888-42E0-9EA9-AF9FA9F1C00C"><img src="img/json_objectagg.gif" alt="Description of json_objectagg.eps follows" title="Description of json_objectagg.eps follows" longdesc="img_text/json_objectagg.html"><br><a href="img_text/json_objectagg.html">Description of the illustration json_objectagg.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-DE1A9C99-7518-4E6E-B82B-4A26169253D9"><span class="italic">JSON_on_null_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-76CE1AAF-3B79-4D9F-AFC1-8BDC3AB10768"><img src="img/json_on_null_clause.gif" alt="Description of json_on_null_clause.eps follows" title="Description of json_on_null_clause.eps follows" longdesc="img_text/json_on_null_clause.html"><br><a href="img_text/json_on_null_clause.html">Description of the illustration json_on_null_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-8E08C82D-5CDF-4877-A458-4B3655DCBBAC"><span class="italic">JSON_agg_returning_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-63AEBD5C-42F4-4608-8A6C-6147A83E814C"><img src="img/json_agg_returning_clause.gif" alt="Description of json_agg_returning_clause.eps follows" title="Description of json_agg_returning_clause.eps follows" longdesc="img_text/json_agg_returning_clause.html"><br><a href="img_text/json_agg_returning_clause.html">Description of the illustration json_agg_returning_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-B7DDFE28-1B12-4FC4-A429-A7E9BF4F5B52">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The SQL/JSON function <code class="codeph">JSON_OBJECTAGG</code> is an aggregate function. It takes as its input a property key-value pair. Typically, the property key, the property value, or both are columns of SQL expressions. This function constructs an object member for each key-value pair and returns a single JSON object that contains those object members.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-1330CF29-9DA7-40BB-8FB6-B2F8AB54C0F2">[KEY] <span class="italic">string</span> VALUE <span class="italic">expr</span></p>
                  <p>Use this clause to specify property key-value pairs.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">KEY</code> is optional and is provided for semantic clarity.
                        </p>
                     </li>
                     <li>
                        <p>Use <span class="italic"><code class="codeph">string</code></span> to specify the property key name as a case-sensitive text literal.
                        </p>
                     </li>
                     <li>
                        <p>Use <span class="italic"><code class="codeph">expr</code></span> to specify the property value. For <span class="italic"><code class="codeph">expr</code></span>, you can specify any expression that evaluates to a SQL numeric literal, text literal, date, or timestamp. The date and timestamp data types are printed in the generated JSON object or array as JSON Strings following the ISO 8601 date format. If <span class="italic"><code class="codeph">expr</code></span> evaluates to a numeric literal, then the resulting property value is a JSON number value; otherwise, the resulting property value is a case-sensitive JSON string value enclosed in double quotation marks.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-CAF8768C-C047-4094-8A56-C3B9BCD0B599">FORMAT JSON</p>
                  <p>Use this optional clause to indicate that the input string is JSON, and will therefore not be quoted in the output.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-8460DA15-EE00-4632-8ABF-77A718CEA169"><span class="italic">JSON_on_null_clause</span></p>
                  <p>Use this clause to specify the behavior of this function when <span class="italic"><code class="codeph">expr</code></span> evaluates to null.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">NULL</code> <code class="codeph">ON</code> <code class="codeph">NULL</code> - When NULL ON NULL is specified, then a JSON NULL value is used as a value for the given key.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ABSENT</code> <code class="codeph">ON</code> <code class="codeph">NULL</code> - If you specify this clause, then the function omits the property key-value pair from the JSON object.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-F6A7AABC-01E8-4DF3-B54D-36DBF1D7E925"><span class="italic">JSON_agg_returning_clause</span></p>
                  <p>Use this clause to specify the data type of the character string returned by this function. You can specify the following data types:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">VARCHAR2[(</code><span class="italic"><code class="codeph">size</code></span> <code class="codeph">[BYTE,CHAR])]</code></p>
                        <p>When specifying the <code class="codeph">VARCHAR2</code> data type elsewhere in SQL, you are required to specify a size. However, in this clause you can omit the size.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CLOB</code> to return a character large object containing single-byte or multi-byte characters.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">BLOB</code> to return a binary large object of the <code class="codeph">AL32UTF8</code> character set.
                        </p>
                     </li>
                  </ul>
                  <p>If you omit this clause, or if you specify <code class="codeph">VARCHAR2</code> but omit the <span class="italic"><code class="codeph">size</code></span> value, then <code class="codeph">JSON_OBJECTAGG</code> returns a character string of type <code class="codeph">VARCHAR2(4000)</code>.
                  </p>
                  <p>Refer to <span class="q">"<a href="Data-Types.html#GUID-A3C0D836-BADB-44E5-A5D4-265BA5968483">Data Types</a>"</span> for more information on the preceding data types.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-715ABE9F-DD49-4BD0-966D-A1CB1EB0857B">STRICT</p>
                  <p>Specify the <code class="codeph">STRICT</code> clause to verify that the output of the JSON generation function is correct JSON. If the check fails, a syntax error is raised.
                  </p>
                  <p>Refer to <a href="JSON_OBJECT.html#GUID-1EF347AE-7FDA-4B41-AFE0-DD5A49E8B370">JSON_OBJECT</a> for examples.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-C73AC976-64AB-4AB0-A331-2407BF47755C">WITH UNIQUE KEYS</p>
                  <p>Specify <code class="codeph">WITH UNIQUE KEYS</code> to guarantee that generated JSON objects have unique keys.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-09422D4A-936C-4D38-9991-C64101283D98__GUID-2C5ADD4B-1C61-4BF6-B2C1-E85AD3FD82E2">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example constructs a JSON object whose members contain department names and department numbers:</p><pre class="oac_no_warn" dir="ltr">SELECT JSON_OBJECTAGG(KEY department_name VALUE department_id) "Department Numbers"
  FROM departments
  WHERE department_id &lt;= 30;

Department Numbers
----------------------------------------------------
{"Administration":10,"Marketing":20,"Purchasing":30}</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle Database Release 19c introduces a Java library that provides support for reactive streams ingestion, which enables customers to efficiently stream data into Oracle Database.">
      <meta name="description" content="Oracle Database Release 19c introduces a Java library that provides support for reactive streams ingestion, which enables customers to efficiently stream data into Oracle Database.">
      <title>Support for Reactive Streams Ingestion</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JDBC Developer's Guide">
      <meta property="og:description" content="Oracle Database Release 19c introduces a Java library that provides support for reactive streams ingestion, which enables customers to efficiently stream data into Oracle Database.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JDBC Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00">
      <meta name="dcterms.title" content="JDBC Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96471-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="performance-extensions.html" title="Previous" type="text/html">
      <link rel="next" href="OCI-connection-pooling.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="performance-extensions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="OCI-connection-pooling.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="performance-and-scalability.html" property="item" typeof="WebPage"><span property="name"> Performance and Scalability</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Support for Reactive Streams Ingestion</li>
            </ol>
            <a id="GUID-5E5484B7-4734-482A-98D0-10F60ACACDEF" name="GUID-5E5484B7-4734-482A-98D0-10F60ACACDEF"></a>
            
            <h2 id="JJDBC-GUID-5E5484B7-4734-482A-98D0-10F60ACACDEF" class="sect2"><span class="enumeration_chapter">22 </span>Support for Reactive Streams Ingestion
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Database Release 19c introduces a Java library that provides support for reactive streams ingestion, which enables customers to efficiently stream data into Oracle Database.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;" id="GUID-5E5484B7-4734-482A-98D0-10F60ACACDEF__UL_EWD_KRB_2GB">
                  <li><a href="high-speed-ingestion-of-data-streams.html#GUID-104EC66D-7F93-4A89-9E03-59F40A6DC57E">Overview of Java library for Reactive Streams Ingestion</a></li>
                  <li><a href="high-speed-ingestion-of-data-streams.html#GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB">Architecture of Java Library for Reactive Streams Ingestion</a></li>
                  <li><a href="high-speed-ingestion-of-data-streams.html#GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625">Limitations of Java library for Reactive Streams Ingestion</a></li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-104EC66D-7F93-4A89-9E03-59F40A6DC57E" name="GUID-104EC66D-7F93-4A89-9E03-59F40A6DC57E"></a><h3 id="JJDBC-GUID-104EC66D-7F93-4A89-9E03-59F40A6DC57E" class="sect3"><span class="enumeration_section">22.1 </span>Overview of Java library for Reactive Streams Ingestion
               </h3>
               <div>
                  <p></p>
                  <p> The new Java library enables Java applications to continuously receive and ingest&nbsp;data from a large group of clients. IoT agents or Telco applications that need to persist large amount of records in the form of rows in an Oracle Database table, can make use of this library. Using the direct path load method of Oracle Database for inserting data, it makes the ingestion process nonblocking and extremely fast. Moreover, with the use of Universal Connection Pool (UCP), the library also furnishes several high-availability and scalability features of the database, like support for table partitions, Oracle RAC connection affinity, and sharding.</p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB" name="GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB"></a><h3 id="JJDBC-GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB" class="sect3"><span class="enumeration_section">22.2 </span>Architecture of Java Library for Reactive Streams Ingestion
               </h3>
               <div>
                  <p></p>
                  <p>The new Java library enables customers to efficiently stream data into the Oracle Database when a large number of clients use the database to persist information in the form of table rows and do not want to be blocked waiting for a synchronous response from the database. This library consists of the following modules:</p>
                  <ul style="list-style-type: disc;" id="GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB__UL_ZF1_QSZ_DGB">
                     <li><span class="bold">Reactive Streams Ingestion (RSI) Library</span><p>This is the core module that exposes the API to handle the logic. It supports the <span class="italic">Memoptimized RowStore Fast Ingest</span> feature of Oracle Database Release 19c to persist the user information in the database quickly and seamlessly. It uses UCP for connection pooling and management, including sharding topology knowledge and Fast Application Notification (FAN) awareness for an Oracle Real Application Cluster (RAC) database.
                        </p>
                        <div class="p">For using this library, you must have the following <code class="codeph">JAR</code> files added to your <code class="codeph">CLASSPATH</code>:
                           <ul style="list-style-type: disc;" id="GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB__UL_OWJ_SWW_2GB">
                              <li><code class="codeph">fis.jar</code></li>
                              <li><code class="codeph">ojdbc9.jar</code></li>
                              <li><code class="codeph">ucp.jar</code></li>
                              <li><code class="codeph">ons.jar</code></li>
                           </ul>
                        </div>
                     </li>
                     <li><span class="bold">JDBC APIs</span><p>This module is a collection of enhanced JDBC APIs that adds support for direct path load with the new <code class="codeph">prepareDirectPath</code> method provided in the <code class="codeph">OracleConnection</code> interface, which creates a new interface that is derived from the <code class="codeph">PreparedStatement</code> interface. The use of this interface is transparent to the end user and you need to make very little change to your application code for performing a direct path load operation.
                        </p>
                        <p>The following code snippet shows how to use this feature:</p><pre class="pre codeblock"><code>PreparedStatement preparedStatement = oracleConnection.
prepareDirectPath("SCOTT", "EMP", new String[] {"EMPNO", "ENAME"});
in a loop {
  preparedStatement.setInt(1, someIntValue);
  preparedStatement.setString(2, someStringValue):
  preparedStatement.addBatch(); 
}
preparedStatement.executeBatch();
oracleConnection.commit(); // or
oracleConnection.rollback();</code></pre></li>
                     <li><span class="bold">UCP Library</span><p>This module is an extension of the existing UCP APIs that extract the sharding topology for a sharded database and listen for FAN events. The HSI library uses UCP to be able to re-use connections properly.</p>
                        <p>The UCP library recognizes the sharding keys specified by the users and allows them to connect to the specific shard and chunk. As new connections are created, UCP caches the sharding-key ranges to the location of the shard and allows further connection requests to bypass the Global Service Manager (shard director), enabling a faster path key access. UCP can also select an available connection in the pool by providing sharding keys. This enables re-usage of connections to various shards by using the cached routing topology.</p>
                        <p>The RSI library uses the sharding APIs exposed by UCP to get a proper connection for the specified sharding key. Each record in RSI can be mapped to a specific unique chunk id and then these records can be grouped together using the unique chunk id. When the RSI library has enough records to send to the database, then it borrows a chunk specific connection from UCP and uses that connection to insert the record into the sharded database.</p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625" name="GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625"></a><h3 id="JJDBC-GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625" class="sect3"><span class="enumeration_section">22.3 </span>Limitations of Java library for Reactive Streams Ingestion
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>Reactive streams ingestion of data streams may not ingest all the data into the database in case of unexpected crashes or errors because the library may lose some of the records while trying to store them in the database. The amount of data loss depends on the following two values:</p>
                     <ul style="list-style-type: disc;" id="GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625__UL_CLC_P2B_2GB">
                        <li><code class="codeph">MaxNoOfRecord</code><p>This is the maximum amount of records to buffer in memory. This value is the maximum amount of records that might be lost in case of a database crash. There is a tradeoff between performance and the potential loss of records.</p>
                        </li>
                        <li><code class="codeph">MaxBufferInterval</code><p>This is the maximum amount of time to hold a record in memory. If the value of this parameter is low, then the number of records in memory that might be lost is also less. There is a tradeoff between performance and the potential loss of records.</p>
                        </li>
                     </ul>
                     <p>Apart from the possibility of data loss due to database crashes, this library has the following limitations:</p>
                     <ul style="list-style-type: disc;" id="GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625__UL_WCR_JTB_2GB">
                        <li>Triggers are not supported.</li>
                        <li>Referential integrity is not checked.</li>
                        <li>Clustered tables are not supported.</li>
                        <li>Loading of remote objects is not supported.</li>
                        <li>LONG data type must be specified as the last column.</li>
                        <li>LONG data type with streams is not supported</li>
                        <li>Loading of VARRAY columns is not supported.</li>
                        <li>All partitioning columns must appear before any LOB data type.</li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
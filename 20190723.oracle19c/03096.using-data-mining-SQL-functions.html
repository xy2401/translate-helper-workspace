<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Learn about the benefits of SQL functions in data mining.">
      <meta name="description" content="Learn about the benefits of SQL functions in data mining.">
      <title>Using the Data Mining SQL Functions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="API Guide">
      <meta property="og:description" content="Learn about the benefits of SQL functions in data mining.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="API Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-mining-api-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-12T22:34:55-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2005, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E97869-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="about-scoring-and-deployment.html" title="Previous" type="text/html">
      <link rel="next" href="prediction-details.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Mining API Guide">
    <meta name="dcterms.isVersionOf" content="DMAPI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="about-scoring-and-deployment.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="prediction-details.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">API Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-data-mining-API.html" property="item" typeof="WebPage"><span property="name">Using the Data Mining API</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="scoring-deployment.html" property="item" typeof="WebPage"><span property="name"> Scoring and Deployment </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using the Data Mining SQL Functions</li>
            </ol>
            <a id="GUID-50EDC913-073D-461D-9627-9269C2552FDE" name="GUID-50EDC913-073D-461D-9627-9269C2552FDE"></a><a id="DMPRG771"></a>
            
            <h2 id="DMAPI-GUID-50EDC913-073D-461D-9627-9269C2552FDE" class="sect2"><span class="enumeration_section">32.2 </span>Using the Data Mining SQL Functions
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Learn about the benefits of SQL functions in data mining.</p>
               <div class="section">
                  <p>The data mining SQL functions provide the following benefits:</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Models can be easily deployed within the context of existing SQL applications.</p>
                     </li>
                     <li>
                        <p>Scoring operations take advantage of existing query execution functionality. This provides performance benefits.</p>
                     </li>
                     <li>
                        <p>Scoring results are pipelined, enabling the rows to be processed without requiring materialization.</p>
                     </li>
                  </ul>
                  <p>The data mining functions produce a score for each row in the selection. The functions can apply a mining model schema object to compute the score, or they can score dynamically without a pre-defined model, as described in <span class="q">"Dynamic Scoring"</span>.
                  </p>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="dynamic-scoring.html#GUID-AB32A94A-2D8C-4BBC-89B9-FD432F3A464B">Dynamic Scoring</a></li>
                     <li><a href="data-requirements.html#GUID-DA5FBB07-125D-4388-812D-AA1DE469FDE8">Scoring Requirements</a></li>
                     <li><a href="data-mining-SQL-scoring-functions.html#GUID-191F4A5D-136B-426E-98F6-D4EB250A602E__CHDIGCHB" title="This table provides a summary of the predictive functions for Data Mining."></a></li>
                     <li><a href="../sqlrf/Single-Row-Functions.html#SQLRF20030" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a></li>
                  </ul>
               </div>
            </div><a id="DMPRG825"></a><a id="DMPRG839"></a><a id="DMPRG840"></a><a id="DMPRG824"></a><div class="props_rev_3"><a id="GUID-FE739B8A-EF2F-4EF8-B51E-7BE3F73FED40" name="GUID-FE739B8A-EF2F-4EF8-B51E-7BE3F73FED40"></a><h3 id="DMAPI-GUID-FE739B8A-EF2F-4EF8-B51E-7BE3F73FED40" class="sect3"><span class="enumeration_section">32.2.1 </span>Choosing the Predictors
               </h3>
               <div>
                  <div class="section">
                     <p>The data mining functions support a <code class="codeph">USING</code> clause that specifies which attributes to use for scoring. You can specify some or all of the attributes in the selection and you can specify expressions. The following examples all use the <code class="codeph">PREDICTION</code> function to find the customers who are likely to use an affinity card, but each example uses a different set of predictors.
                     </p>
                     <p>The query in <a href="using-data-mining-SQL-functions.html#GUID-FE739B8A-EF2F-4EF8-B51E-7BE3F73FED40__BABCBAGJ">Example 32-1</a> uses all the predictors.
                     </p>
                     <p>The query in <a href="using-data-mining-SQL-functions.html#GUID-FE739B8A-EF2F-4EF8-B51E-7BE3F73FED40__BABIEJCI">Example 32-2</a> uses only gender, marital status, occupation, and income as predictors. 
                     </p>
                     <p>The query in <a href="using-data-mining-SQL-functions.html#GUID-FE739B8A-EF2F-4EF8-B51E-7BE3F73FED40__BABIFCFD">Example 32-3</a> uses three attributes and an expression as predictors. The prediction is based on gender, marital status, occupation, and the assumption that all customers are in the highest income bracket.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FE739B8A-EF2F-4EF8-B51E-7BE3F73FED40__BABCBAGJ">
                     <p class="titleinexample">Example 32-1 Using All Predictors</p><pre class="oac_no_warn" dir="ltr">SELECT cust_gender, COUNT(*) AS cnt, ROUND(AVG(age)) AS avg_age
     FROM mining_data_apply_v
     WHERE PREDICTION(dt_sh_clas_sample USING *) = 1
   GROUP BY cust_gender
   ORDER BY cust_gender;
 
C        CNT    AVG_AGE
- ---------- ----------
F         25         38
M        213         43
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-FE739B8A-EF2F-4EF8-B51E-7BE3F73FED40__BABIEJCI">
                     <p class="titleinexample">Example 32-2 Using Some Predictors</p><pre class="oac_no_warn" dir="ltr"> SELECT cust_gender, COUNT(*) AS cnt, ROUND(AVG(age)) AS avg_age
     FROM mining_data_apply_v
     WHERE PREDICTION(dt_sh_clas_sample USING
                      cust_gender,cust_marital_status,
                      occupation, cust_income_level) = 1
   GROUP BY cust_gender
   ORDER BY cust_gender;
 
C        CNT    AVG_AGE
- ---------- ----------
F         30         38
M        186         43
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-FE739B8A-EF2F-4EF8-B51E-7BE3F73FED40__BABIFCFD">
                     <p class="titleinexample">Example 32-3 Using Some Predictors and an Expression</p><pre class="oac_no_warn" dir="ltr">SELECT cust_gender, COUNT(*) AS cnt, ROUND(AVG(age)) AS avg_age
     FROM mining_data_apply_v
     WHERE PREDICTION(dt_sh_clas_sample USING
                     cust_gender, cust_marital_status, occupation,
                    'L: 300,000 and above' AS cust_income_level) = 1
   GROUP BY cust_gender
   ORDER BY cust_gender;
 
C        CNT    AVG_AGE
- ---------- ----------
F         30         38
M        186         43
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DMPRG827"></a><a id="DMPRG841"></a><a id="DMPRG826"></a><div class="props_rev_3"><a id="GUID-3C177C13-21A5-412D-83C2-FF7B8F27447C" name="GUID-3C177C13-21A5-412D-83C2-FF7B8F27447C"></a><h3 id="DMAPI-GUID-3C177C13-21A5-412D-83C2-FF7B8F27447C" class="sect3"><span class="enumeration_section">32.2.2 </span>Single-Record Scoring
               </h3>
               <div>
                  <div class="section">
                     <p>The data mining functions can produce a score for a single record, as shown in <a href="using-data-mining-SQL-functions.html#GUID-3C177C13-21A5-412D-83C2-FF7B8F27447C__BABEFIAB">Example 32-4</a> and <a href="using-data-mining-SQL-functions.html#GUID-3C177C13-21A5-412D-83C2-FF7B8F27447C__BABGAFAJ">Example 32-5</a>.
                     </p>
                     <p><a href="using-data-mining-SQL-functions.html#GUID-3C177C13-21A5-412D-83C2-FF7B8F27447C__BABEFIAB">Example 32-4</a> returns a prediction for customer 102001 by applying the classification model <code class="codeph">NB_SH_Clas_sample</code>. The resulting score is 0, meaning that this customer is unlikely to use an affinity card.
                     </p>
                     <p><a href="using-data-mining-SQL-functions.html#GUID-3C177C13-21A5-412D-83C2-FF7B8F27447C__BABGAFAJ">Example 32-5</a> returns a prediction for 'Affinity card is great' as the comments attribute by applying the text mining model <code class="codeph">T_SVM_Clas_sample</code>. The resulting score is 1, meaning that this customer is likely to use an affinity card.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-3C177C13-21A5-412D-83C2-FF7B8F27447C__BABEFIAB">
                     <p class="titleinexample">Example 32-4 Scoring a Single Customer or a Single Text Expression</p><pre class="oac_no_warn" dir="ltr">SELECT PREDICTION (NB_SH_Clas_Sample USING *)
    FROM sh.customers where cust_id = 102001;  
 
PREDICTION(NB_SH_CLAS_SAMPLEUSING*)
-----------------------------------
                                  0
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-3C177C13-21A5-412D-83C2-FF7B8F27447C__BABGAFAJ">
                     <p class="titleinexample">Example 32-5 Scoring a Single Text Expression</p><pre class="oac_no_warn" dir="ltr">SELECT
  PREDICTION(T_SVM_Clas_sample USING 'Affinity card is great' AS comments)
FROM DUAL;
 
PREDICTION(T_SVM_CLAS_SAMPLEUSING'AFFINITYCARDISGREAT'ASCOMMENTS)
-----------------------------------------------------------------
                                                                1
</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
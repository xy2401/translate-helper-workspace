<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>EXPLAIN PLAN</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DROP-VIEW.html" title="Previous" type="text/html">
      <link rel="next" href="FLASHBACK-DATABASE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DROP-VIEW.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="FLASHBACK-DATABASE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-DROP-TABLE-to-LOCK-TABLE.html" property="item" typeof="WebPage"><span property="name">SQL Statements: DROP TABLE to LOCK TABLE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">EXPLAIN PLAN </li>
            </ol>
            <a id="GUID-FD540872-4ED3-4936-96A2-362539931BA0" name="GUID-FD540872-4ED3-4936-96A2-362539931BA0"></a><a id="SQLRF54982"></a><a id="SQLRF54983"></a><a id="SQLRF54984"></a><a id="SQLRF54985"></a><a id="SQLRF54986"></a><a id="SQLRF54987"></a><a id="SQLRF54988"></a><a id="SQLRF01601"></a>
            
            <h2 id="SQLRF-GUID-FD540872-4ED3-4936-96A2-362539931BA0" class="sect2">EXPLAIN PLAN </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-9BA47DA6-8685-4C32-8705-420F34523DC3">Purpose </p>
                  <p><a id="d393300e130" class="indexterm-anchor"></a><a id="d393300e134" class="indexterm-anchor"></a><a id="d393300e140" class="indexterm-anchor"></a><a id="d393300e144" class="indexterm-anchor"></a>Use the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement to determine the execution plan Oracle Database follows to execute a specified SQL statement. This statement inserts a row describing each step of the execution plan into a specified table. You can also issue the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement as part of the SQL trace facility.
                  </p>
                  <p>This statement also determines the cost of executing the statement. If any domain indexes are defined on the table, then user-defined CPU and I/O costs will also be inserted.</p>
                  <p><a id="d393300e165" class="indexterm-anchor"></a><a id="d393300e167" class="indexterm-anchor"></a>The definition of a sample output table <code class="codeph">PLAN_TABLE</code> is available in a SQL script on your distribution media. Your output table must have the same column names and data types as this table. The common name of this script is <code class="codeph">UTLXPLAN.SQL</code>. The exact name and location depend on your operating system. 
                  </p>
                  <p><a id="d393300e177" class="indexterm-anchor"></a><a id="d393300e181" class="indexterm-anchor"></a>Oracle Database provides information on cached cursors through several dynamic performance views:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For information on the work areas used by SQL cursors, query <code class="codeph">V$SQL_WORKAREA</code>.
                        </p>
                     </li>
                     <li>
                        <p>For information on the execution plan for a cached cursor, query <code class="codeph">V$SQL_PLAN</code>. 
                        </p>
                     </li>
                     <li>
                        <p>For execution statistics at each step or operation of an execution plan of cached cursors (for example, number of produced rows, number of blocks read), query <code class="codeph">V$SQL_PLAN_STATISTICS</code>.
                        </p>
                     </li>
                     <li>
                        <p>For a selective precomputed join of the preceding three views, query <code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code>.
                        </p>
                     </li>
                     <li>
                        <p>Execution statistics at each step or operation of an execution plan of cached cursors are displayed in <code class="codeph">V$SQL_PLAN_MONITOR</code> if the statement execution is monitored. You can force monitoring using the <code class="codeph">MONITOR</code> hint.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-BB1A5A7F-43FC-45A1-9201-A2C6A97F2D68">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../tgsql/generating-and-displaying-execution-plans.html#TGSQL271" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for information on the output of <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>, how to use the SQL trace facility, and how to generate and interpret execution plans
                           </p>
                        </li>
                        <li>
                           <p><a href="../refrn/dynamic-performance-views.html#REFRN003" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information on dynamic performance views
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-26797289-7E5C-4B52-86D6-F440B3773C29">Prerequisites </p>
                  <p>To issue an <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement, you must have the privileges necessary to insert rows into an existing output table that you specify to hold the execution plan.
                  </p>
                  <p>You must also have the privileges necessary to execute the SQL statement for which you are determining the execution plan. If the SQL statement accesses a view, then you must have privileges to access any tables and views on which the view is based. If the view is based on another view that is based on a table, then you must have privileges to access both the other view and its underlying table. </p>
                  <p>To examine the execution plan produced by an <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement, you must have the privileges necessary to query the output table.
                  </p>
                  <p>The <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement is a data manipulation language (DML) statement, rather than a data definition language (DDL) statement. Therefore, Oracle Database does not implicitly commit the changes made by an <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement. If you want to keep the rows generated by an <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement in the output table, then you must commit the transaction containing the statement. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-11EFFEE1-A9D2-4797-99A5-8F1F1EF1B930">
                     <p class="notep1">See Also:</p>
                     <p><a href="INSERT.html#GUID-903F8043-0254-4EE9-ACC1-CB8AC0AF3423">INSERT</a> and <a href="SELECT.html#GUID-CFA006CA-6FF1-4972-821E-6996142A51C6">SELECT</a> for information on the privileges you need to populate and query the plan table
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-C660FBFC-0686-40EA-86C0-FA4D2A619EBA">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-BDCC3613-9F65-476A-BEBC-4793321BF7A2"><span class="italic">explain_plan</span>::=
                  </p>
                  <div class="figure" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-C22D7197-6644-46B7-AFAE-9E3535ADE445"><img src="img/explain_plan.gif" alt="Description of explain_plan.eps follows" title="Description of explain_plan.eps follows" longdesc="img_text/explain_plan.html"><br><a href="img_text/explain_plan.html">Description of the illustration explain_plan.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-4C3386C6-BBD8-48C5-AD12-D4C964BCFB76">Semantics </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-7E002AC5-1D31-4296-8ADA-9BBBE32E5C85">SET STATEMENT_ID Clause</p>
                  <p><a id="d393300e311" class="indexterm-anchor"></a>Specify a value for the <code class="codeph">STATEMENT_ID</code> column for the rows of the execution plan in the output table. You can then use this value to identify these rows among others in the output table. Be sure to specify a <code class="codeph">STATEMENT_ID</code> value if your output table contains rows from many execution plans. If you omit this clause, then the <code class="codeph">STATEMENT_ID</code> value defaults to null. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-C54CFA16-CAAD-4420-A062-F177AAAE4F7F">INTO <span class="italic">table </span>Clause
                  </p>
                  <p><a id="d393300e332" class="indexterm-anchor"></a>Specify the name of the output table, and optionally its schema and database. This table must exist before you use the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement. 
                  </p>
                  <p>If you omit <span class="italic"><code class="codeph">schema</code></span>, then the database assumes the table is in your own schema. 
                  </p>
                  <p>The <span class="italic"><code class="codeph">dblink</code></span> can be a complete or partial name of a database link to a remote Oracle Database where the output table is located. You can specify a remote output table only if you are using Oracle Database distributed functionality. If you omit <span class="italic"><code class="codeph">dblink</code></span>, then the database assumes the table is on your local database. See <span class="q">"<a href="Syntax-for-Schema-Objects-and-Parts-in-SQL-Statements.html#GUID-61D0B206-A5EA-473F-AD04-7067D6E3914C">References to Objects in Remote Databases</a>"</span> for information on referring to database links.
                  </p>
                  <p>If you omit <code class="codeph">INTO</code> altogether, then the database assumes an output table named <code class="codeph">PLAN_TABLE</code> in your own schema on your local database. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-0D798DC6-6383-4EC0-8B49-140684E7768A">FOR <span class="italic">statement</span> Clause
                  </p>
                  <p><a id="d393300e378" class="indexterm-anchor"></a>Specify a <code class="codeph">SELECT</code>, <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, <code class="codeph">MERGE</code>, <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>, <code class="codeph">CREATE</code> <code class="codeph">INDEX</code>, or <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> ... <code class="codeph">REBUILD</code> statement for which the execution plan is generated. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-52609872-B4C7-44B5-8E2C-B3B8AA70B767">Notes on EXPLAIN PLAN</p>
                  <p>The following notes apply to <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If <span class="italic"><code class="codeph">statement</code></span> includes the <span class="italic"><code class="codeph">parallel_clause</code></span>, then the resulting execution plan will indicate parallel execution. However, <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> actually inserts the statement into the plan table, so that the parallel DML statement you submit is no longer the first DML statement in the transaction. This violates the Oracle Database restriction of one parallel DML statement in a single transaction, and the statement will be executed serially. To maintain parallel execution of the statements, you must commit or roll back the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement, and then submit the parallel DML statement.
                        </p>
                     </li>
                     <li>
                        <p>To determine the execution plan for an operation on a temporary table, <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> must be run from the same session, because the data in temporary tables is session specific.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FD540872-4ED3-4936-96A2-362539931BA0__GUID-59AEB35B-6BBB-4A18-A8DE-ABB476036CE8">Examples</p>
                  <p><span class="bold">EXPLAIN PLAN Examples</span></p>
                  <p>The following statement determines the execution plan and cost for an <code class="codeph">UPDATE</code> statement and inserts rows describing the execution plan into the specified <code class="codeph">plan_table</code> table with the <code class="codeph">STATEMENT_ID</code> value of 'Raise in Tokyo':
                  </p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN 
    SET STATEMENT_ID = 'Raise in Tokyo' 
    INTO plan_table 
    FOR UPDATE employees 
        SET salary = salary * 1.10 
        WHERE department_id =  
           (SELECT department_id FROM departments
               WHERE location_id = 1700); 
</pre><p>The following <code class="codeph">SELECT</code> statement queries the <code class="codeph">plan_table</code> table and returns the execution plan and the cost:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT id, LPAD(' ',2*(LEVEL-1))||operation operation, options,
       object_name, object_alias, position 
    FROM plan_table 
    START WITH id = 0 AND statement_id = 'Raise in Tokyo'
    CONNECT BY PRIOR id = parent_id AND statement_id = 'Raise in Tokyo'
    ORDER BY id;
</pre><p>The query returns this execution plan: </p><pre class="oac_no_warn" dir="ltr"> ID OPERATION            OPTIONS              OBJECT_NAME          OBJECT_ALIAS         POSITION
--- -------------------- -------------------- -------------------- -------------------- --------
  0 UPDATE STATEMENT                                                                           4
  1   UPDATE                                  EMPLOYEES                                        1
  2     INDEX            RANGE SCAN           EMP_DEPARTMENT_IX    EMPLOYEES@UPD$1             1
  3       TABLE ACCESS   BY INDEX ROWID       DEPARTMENTS          DEPARTMENTS@SEL$1           1
  4         INDEX        RANGE SCAN           DEPT_LOCATION_IX     DEPARTMENTS@SEL$1           1
</pre><p>The value in the <code class="codeph">POSITION</code> column of the first row shows that the statement has a cost of 4. 
                  </p>
                  <p><span class="bold">EXPLAIN PLAN: Partitioned Example</span></p>
                  <p>The sample table <code class="codeph">sh.sales</code> is partitioned on the <code class="codeph">time_id</code> column. Partition <code class="codeph">sales_q3_2000</code> contains time values less than Oct. 1, 2000, and there is a local index <code class="codeph">sales_time_bix</code> on the <code class="codeph">time_id</code> column.
                  </p>
                  <p>Consider the query:</p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR
  SELECT * FROM sales 
     WHERE time_id BETWEEN :h AND '01-OCT-2000';
</pre><p>where <code class="codeph">:h</code> represents an already declared bind variable. <code class="codeph">EXPLAIN</code><code class="codeph"> PLAN</code> executes this query with <code class="codeph">PLAN_TABLE</code> as the output table. The basic execution plan, including partitioning information, is obtained with the following query:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT operation, options, partition_start, partition_stop,
       partition_id
  FROM plan_table;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
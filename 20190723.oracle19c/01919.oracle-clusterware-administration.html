<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Configuring and administering Oracle Clusterware and its various components involves managing applications and databases, and networking within a cluster.">
      <meta name="description" content="Configuring and administering Oracle Clusterware and its various components involves managing applications and databases, and networking within a cluster.">
      <title>Oracle Clusterware Configuration and Administration</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Clusterware Administration and Deployment Guide">
      <meta property="og:description" content="Configuring and administering Oracle Clusterware and its various components involves managing applications and databases, and networking within a cluster.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Clusterware Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00">
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95727-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="introduction-to-oracle-clusterware.html" title="Previous" type="text/html">
      <link rel="next" href="policy-based-cluster-and-capacity-management.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-oracle-clusterware.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="policy-based-cluster-and-capacity-management.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Clusterware Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Clusterware Configuration and Administration</li>
            </ol>
            <a id="GUID-4F3C2848-CBB7-4CC5-8480-ACA3152B1EA6" name="GUID-4F3C2848-CBB7-4CC5-8480-ACA3152B1EA6"></a><a id="CWADD838"></a>
            
            <h2 id="CWADD-GUID-4F3C2848-CBB7-4CC5-8480-ACA3152B1EA6" class="sect2"><span class="enumeration_chapter">2 </span>Oracle Clusterware Configuration and Administration
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Configuring and administering Oracle Clusterware and its various components involves managing applications and databases, and networking within a cluster.</p>
               <p>You can choose from one of two methods of configuring and administering clusters. You can use the traditional, administrator-managed approach, where you administer cluster resources and workloads manually, or you can invoke varying degrees of automated administration using a policy-managed approach.</p>
               <p>Administrator-managed clusters requires that you manually configure how the cluster resources are deployed and where the workload is managed. Typically, this means that must configure which database instances run on what cluster nodes, by preference, and where those instances will restart in case of failures. By configuring where the database instances reside, You configure the workloads across the cluster.</p>
               <p>With policy-managed clusters, you configure the workloads to run in server pools, for which you configure policy sets to direct how those workloads are managed in each server pool. You manage the server pools and policy sets, leaving the details of the database instance location and workload placement to the policies they have instituted. In using this approach, you have the additional option of further automating the management of the cluster by using Oracle Quality of Service Management (Oracle QoS Management).</p>
            </div>
            <div class="sect2"><a id="GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6" name="GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6"></a><h3 id="CWADD-GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6" class="sect3">Role-Separated Management</h3>
               <div>
                  <p>Role-separated management is an approach to managing cluster resources and workloads in a coordinated fashion in order to reduce the risks of resource conflicts and shortages.</p>
                  <p>Role-separated management uses operating system security and role definitions, and Oracle Clusterware access permissions to separate resource and workload management according to the user’s role. This is particularly important for those working in consolidated environments, where there is likely to be competition for computing resources, and a degree of isolation is required for resource consumers and management of those resources. By default, this feature is not implemented during installation.</p>
                  <p>Configuring role-separated management consists of establishing the operating system users and groups that will administer the cluster resources (such as databases), according to the roles intended, adding the permissions on the cluster resources and server pools through access control lists (ACLs), as necessary. In addition, Oracle Automatic Storage Management (Oracle ASM) provides the capability to extend these role-separation constructs to the storage management functions.</p>
                  <p>Role-separated management principles apply equally to administrator-managed and policy-managed systems. In the case of administrator-managed, you configure the cluster resources and roles to manage them at the node level, while for policy-managed systems you configure the cluster resources and roles to manage them in the server pools.</p>
                  <p>Role-separated management in Oracle Clusterware no longer depends on a <a href="glossary.html#GUID-D5384AF5-5F2B-4438-9632-EB90EB3ED167"><span class="xrefglossterm">cluster administrator</span></a> (although Oracle maintains backward compatibility). By default, the user that installed Oracle Clusterware in the Oracle Grid Infrastructure home (Grid home) and <code class="codeph">root</code> are <span class="italic">permanent</span> cluster administrators. Primary group privileges (<code class="codeph">oinstall</code>, by default) enable database administrators to create databases in newly created server pools using the Database Configuration Assistant (DBCA), but do not enable role separation.
                  </p>
                  <div class="infoboxnote" id="GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6__GUID-F055FACE-172D-4E60-9703-5A920B08F08A">
                     <p class="notep1">Note:</p>
                     <p>Oracle recommends that you enable role separation before you create the first server pool in the cluster. Create and manage server pools using configuration policies and a respective policy set. Access permissions are stored for each server pool in the <code class="codeph">ACL</code> attribute, described in <a href="policy-based-cluster-and-capacity-management.html#GUID-E5103867-6683-4D5C-9343-1F1F2522FEF3__CHDCIEJJ" title="This table lists and describes server pool attributes.">Table 3-1</a>.
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="policy-based-cluster-and-capacity-management.html#GUID-7FBE1007-3BA0-4DE5-A993-358E3423721B" title="A cluster configuration policy is a document that contains exactly one definition for each server pool managed by the cluster configuration policy set. A cluster configuration policy set is a document that defines the names of all server pools configured for the cluster and definitions for all policies.">Overview of Cluster Configuration Policies and the Policy Set</a></li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-53EAAAAC-0AE7-4DFC-B564-3704B3A824C3" name="GUID-53EAAAAC-0AE7-4DFC-B564-3704B3A824C3"></a><h4 id="CWADD-GUID-53EAAAAC-0AE7-4DFC-B564-3704B3A824C3" class="sect4">Managing Cluster Administrators</h4>
                  <div>
                     <p>You use an access control list (ACL) to define administrators for the cluster.</p>
                     <div class="section">
                        <p>The ability to create server pools in a cluster is limited to the cluster administrators. In prior releases, by default, every registered operating system user was considered a cluster administrator and, if necessary, the default could be changed using <code class="codeph">crsctl add | delete crs administrator</code> commands. The use of these commands, however, is deprecated in this release and, instead, you should use the ACL of the policy set to control the ability to create server pools.
                        </p>
                        <p>As a rule, to have permission to create a server pool or cluster resource, the operating system user or an operating system group of which the user is a member must have the read, write, and execute permissions set in the <code class="codeph">ACL</code> attribute.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-8E70F669-69A9-4794-B6E9-A7E0790AE4D7" name="GUID-8E70F669-69A9-4794-B6E9-A7E0790AE4D7"></a><h4 id="CWADD-GUID-8E70F669-69A9-4794-B6E9-A7E0790AE4D7" class="sect4">Configuring Role Separation</h4>
                  <div>
                     <p>Role separation is the determination of the roles that are needed, the resources and server pools that they will administer, and what their access privileges should be. After you determine these, you then create or modify the operating system user accounts for group privileges (such as <code class="codeph">oinstall</code> or <code class="codeph">grid</code>), using the ACLs and the CRSCTL utility.
                     </p>
                     <div class="section">
                        <p>The most basic case is to create two operating system users as part of the <code class="codeph">oinstall</code> group, then create the cluster, and two server pools. For each server pool, assign one of the operating system users to administer that server pool and exclude anyone else from all but read access to that server pool.
                        </p>
                        <p>This requires careful planning, and disciplined, detail-oriented execution, but you can modify the configuration after implementation, to correct mistakes or make adjustments over time.</p>
                        <div class="infoboxnote" id="GUID-8E70F669-69A9-4794-B6E9-A7E0790AE4D7__GUID-A69E5F4A-28E2-4DC7-8D14-505A08B956A5">
                           <p class="notep1">Note:</p>You cannot apply role separation techniques to ora.* resources (Oracle RAC database resources). You can only apply these techniques to server pools and user-defined cluster resources and types.
                        </div>
                        <p>You create the server pools or resources under the <code class="codeph">root</code> or <code class="codeph">grid</code> accounts. For the designated operating system users to administer these server pools or resources, they must then be given the correct permissions, enabling them to fulfill their roles.
                        </p>
                        <p>Use the <code class="codeph">crsctl setperm</code> command to configure horizontal role separation using ACLs that are assigned to server pools, resources, or both. The CRSCTL utility is located in the path <code class="codeph"><span class="variable" translate="no">Grid_home</span></code><code class="codeph">/bin</code>, where <code class="codeph"><span class="variable" translate="no">Grid_home</span></code> is the Oracle Grid Infrastructure for a cluster home. 
                        </p>
                        <p>The command uses the following syntax, where the access control (ACL) string is indicated by italics:</p><pre class="pre codeblock"><code>crsctl setperm {resource | type | serverpool} <span class="variable" translate="no">name</span> {-u <span class="variable" translate="no">acl_string</span> | 
-x <span class="variable" translate="no">acl_string </span>| -o <span class="variable" translate="no">user_name</span> | -g <span class="variable" translate="no">group_name</span>}
</code></pre><p>The flag options are:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">-u</code>: Update the entity ACL
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-x</code>: Delete the entity ACL
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-o</code>: Change the entity owner
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-g</code>: Change the entity primary group
                              </p>
                           </li>
                        </ul>
                        <p>The ACL strings are:</p><pre class="pre codeblock"><code>{user:<span class="variable" translate="no">user_name</span>[:<span class="variable" translate="no">readPerm</span><span class="variable" translate="no">writePerm</span><span class="variable" translate="no">execPerm</span>] |
     group:<span class="variable" translate="no">group_name</span>[:<span class="variable" translate="no">readPerm</span><span class="variable" translate="no">writePerm</span><span class="variable" translate="no">execPerm</span>] |
     other[::<span class="variable" translate="no">readPerm</span><span class="variable" translate="no">writePerm</span><span class="variable" translate="no">execPerm</span>] }</code></pre><p>In the preceding syntax example:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">user</code>: Designates the user ACL (access permissions granted to the designated user)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">group</code>: Designates the group ACL (permissions granted to the designated group members)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">other</code>: Designates the other ACL (access granted to users or groups not granted particular access permissions)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">readperm</span></code>: Location of the read permission (<code class="codeph">r</code> grants permission and "<code class="codeph">-</code>" forbids permission)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">writeperm</span></code>: Location of the write permission (<code class="codeph">w</code> grants permission and "<code class="codeph">-</code>" forbids permission)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">execperm</span></code>: Location of the execute permission (<code class="codeph">x</code> grants permission, and "<code class="codeph">-</code>" forbids permission)
                              </p>
                           </li>
                        </ul>
                        <p>For example, to set permissions on a server pool called <code class="codeph">psft</code> for the group <code class="codeph">personnel</code>, where the administrative user has read/write/execute privileges, the members of the <code class="codeph">personnel</code> group have read/write privileges, and users outside of the group are granted no access, enter the following command as the <code class="codeph">root</code> user:
                        </p><pre class="pre codeblock"><code># crsctl setperm serverpool psft -u user:personadmin:rwx,group:personnel:rw-,
  other::---</code></pre><p>For cluster resources, to set permissions on an application (resource) called <code class="codeph">MyProgram</code> (administered by <code class="codeph">Maynard</code>) for the group <code class="codeph">crsadmin</code>, where the administrative user has read, write, and execute privileges, the members of the <code class="codeph">crsadmin</code> group have read and execute privileges, and users outside of the group are granted only read access (for status and configuration checks), enter the following command as whichever user originally created the resource (<code class="codeph">root</code> or <code class="codeph">grid</code> owner):
                        </p><pre class="pre codeblock"><code># crsctl setperm resource MyProgram -u user:Maynard:r-x,group:crsadmin:rw-,other:---:r--</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Oracle Clusterware Resource Reference</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD92094"></a><div class="props_rev_3"><a id="GUID-780155B8-D379-4800-924B-3C366184220A" name="GUID-780155B8-D379-4800-924B-3C366184220A"></a><h3 id="CWADD-GUID-780155B8-D379-4800-924B-3C366184220A" class="sect3">Configuring Oracle Grid Infrastructure Using Grid Setup Wizard</h3>
               <div>
                  <p>Using the Configuration Wizard, you can configure a new Oracle Grid Infrastructure on one or more nodes, or configure an upgraded Oracle Grid Infrastructure. You can also run the Grid Setup Wizard in silent mode.</p>
                  <p>After performing a software-only installation of the Oracle Grid Infrastructure, you can configure the software using Grid Setup Wizard. This Wizard performs various validations of the Grid home and inputs before and after you run through the wizard.</p>
                  <div class="infoboxnote" id="GUID-780155B8-D379-4800-924B-3C366184220A__GUID-FF5B3609-C10C-4188-AFEB-F748715E747F">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Before running the Grid Setup Wizard, ensure that the Oracle Grid Infrastructure home is current, with all necessary patches applied.</p>
                        </li>
                        <li>
                           <p>To launch the Grid Setup Wizard in the subsequent procedures:</p>
                           <p>On Linux and UNIX, run the following command:</p><pre class="pre codeblock"><code><span class="variable" translate="no">Oracle_home</span>/gridSetup.sh</code></pre><p>On Windows, run the following command:</p><pre class="pre codeblock"><code><span class="variable" translate="no">Oracle_home</span>\gridSetup.bat</code></pre></li>
                     </ul>
                  </div>
               </div><a id="CWADD92095"></a><div class="props_rev_3"><a id="GUID-1075A40B-E26B-4925-9BD0-DF05EBEE8310" name="GUID-1075A40B-E26B-4925-9BD0-DF05EBEE8310"></a><h4 id="CWADD-GUID-1075A40B-E26B-4925-9BD0-DF05EBEE8310" class="sect4">Configuring a Single Node</h4>
                  <div>
                     <p>You can configure a single node by using the Configuration Wizard. </p>
                     <div class="section">
                        <p>To configure a single node:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start the Configuration Wizard, as follows:</span><div><pre class="oac_no_warn" dir="ltr">$ <span class="italic">Oracle_home</span>/gridSetup.sh
</pre></div>
                        </li>
                        <li class="stepexpand"><span>On the Select Installation Option page, select <span class="bold">Configure Oracle Grid Infrastructure for a Cluster</span>.</span></li>
                        <li class="stepexpand"><span>On the Cluster Node Information page, select only the local node and corresponding VIP name.</span></li>
                        <li class="stepexpand"><span>Continue adding your information on the remaining wizard pages.</span></li>
                        <li class="stepexpand"><span>Review your inputs on the Summary page and click <span class="bold">Finish</span>.</span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">root.sh</code> script as instructed by the Configuration Wizard.</span></li>
                     </ol>
                  </div>
               </div><a id="CWADD92096"></a><div class="props_rev_3"><a id="GUID-1AF2D413-D25C-4B22-9BBC-3B81AB4D1C56" name="GUID-1AF2D413-D25C-4B22-9BBC-3B81AB4D1C56"></a><h4 id="CWADD-GUID-1AF2D413-D25C-4B22-9BBC-3B81AB4D1C56" class="sect4">Configuring Multiple Nodes</h4>
                  <div>
                     <p>You can use the Configuration Wizard to configure multiple nodes in a cluster.</p>
                     <div class="section">
                        <p>It is not necessary that Oracle Grid Infrastructure software be installed on nodes you want to configure using the Configuration Wizard.</p>
                        <div class="infoboxnote" id="GUID-1AF2D413-D25C-4B22-9BBC-3B81AB4D1C56__GUID-C9F77BB7-612C-4137-B5BB-B11E7A017EFE">
                           <p class="notep1">Note:</p>
                           <p>Before you launch the Configuration Wizard, ensure the following:</p>
                           <p>While software is not required to be installed on all nodes, if it is installed, then the software must be installed in the same <code class="codeph"><span class="variable" translate="no">Grid_home</span></code> path and be at the identical level on all the nodes.
                           </p>
                        </div>
                        <p>To use the Configuration Wizard to configure multiple nodes:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start the Configuration Wizard, as follows:</span><div><pre class="oac_no_warn" dir="ltr">$ <span class="italic">Oracle_home</span>/gridSetup.sh
</pre></div>
                        </li>
                        <li class="stepexpand"><span>On the Select Installation Option page, select <span class="bold">Configure Oracle Grid Infrastructure for a Cluster</span>.</span></li>
                        <li class="stepexpand"><span>On the Cluster Node Information page, select the nodes you want to configure and their corresponding VIP names. The Configuration Wizard validates the nodes you select to ensure that they are ready.</span></li>
                        <li class="stepexpand"><span>Continue adding your information on the remaining wizard pages.</span></li>
                        <li class="stepexpand"><span>Review your inputs on the Summary page and click <span class="bold">Finish</span>.</span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">root.sh</code> script as instructed by the Configuration Wizard.</span></li>
                     </ol>
                  </div>
               </div><a id="CWADD92097"></a><div class="props_rev_3"><a id="GUID-5AF3CECC-0556-4844-B28F-A93E178F72CE" name="GUID-5AF3CECC-0556-4844-B28F-A93E178F72CE"></a><h4 id="CWADD-GUID-5AF3CECC-0556-4844-B28F-A93E178F72CE" class="sect4">Upgrading Oracle Grid Infrastructure</h4>
                  <div>
                     <p>You use the Grid Setup Wizard to upgrade a cluster’s Oracle Grid Infrastructure.</p>
                     <div class="section">
                        <p>To use upgrade Oracle Grid Infrastructure for a cluster:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start the Grid Setup Wizard:</span><div><pre class="pre codeblock"><code>$ <span class="variable" translate="no">Oracle_home</span>/gridSetup.sh
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>On the Select Installation Option page, select <span class="bold">Upgrade Oracle Grid Infrastructure</span>.</span></li>
                        <li class="stepexpand"><span>On the Oracle Grid Infrastructure Node Selection page, review the nodes you want to upgrade. Additionally, you can choose not to upgrade nodes that are down.</span></li>
                        <li class="stepexpand"><span>Continue adding your information on the remaining wizard pages.</span></li>
                        <li class="stepexpand"><span>Review your inputs on the Summary page and click <span class="bold">Finish</span>.</span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">rootupgrade.sh</code> script as instructed by the Configuration Wizard.</span></li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Database Installation Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-5AF3CECC-0556-4844-B28F-A93E178F72CE__GUID-73B9B3B7-A0F5-4A31-9410-20C4F0381425">
                        <p class="notep1">See Also:</p>
                        <p><span><cite>Oracle Database Installation Guide</cite></span> for your platform for Oracle Restart procedures
                        </p>
                     </div>
                  </div>
               </div><a id="CWADD92098"></a><div class="props_rev_3"><a id="GUID-48000840-68BA-4BCF-9A74-D5C18D77013F" name="GUID-48000840-68BA-4BCF-9A74-D5C18D77013F"></a><h4 id="CWADD-GUID-48000840-68BA-4BCF-9A74-D5C18D77013F" class="sect4">Running the Configuration Wizard in Silent Mode</h4>
                  <div>
                     <p>You can run the Configuration Wizard in silent mode by specifying the —silent parameter. </p>
                     <div class="section">
                        <p>To use the Configuration Wizard in silent mode to configure or upgrade nodes:</p>
                        <ol>
                           <li>
                              <p>Start the Configuration Wizard from the command line, as follows:</p><pre class="pre codeblock"><code>$ <span class="variable" translate="no">$ORACLE_HOME</span>/gridSetup.sh -silent -responseFile <span class="variable" translate="no">file_name</span></code></pre><p>The Configuration Wizard validates the response file and proceeds with the configuration. If any of the inputs in the response file are found to be invalid, then the Configuration Wizard displays an error and exits.</p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">root</code> and <code class="codeph"><span class="variable" translate="no">Grid_home</span>/gridSetup -executeConfigTools</code> scripts as prompted.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-3C3E0790-166E-4D94-B008-AEF8458FAF60" name="GUID-3C3E0790-166E-4D94-B008-AEF8458FAF60"></a><h3 id="CWADD-GUID-3C3E0790-166E-4D94-B008-AEF8458FAF60" class="sect3">Server Weight-Based Node Eviction</h3>
               <div>
                  <p>You can configure the Oracle Clusterware failure recovery mechanism to choose which cluster nodes to terminate or evict in the event of a private network (cluster interconnect) failure.</p>
                  <p>In a split-brain situation, where a cluster experiences a network split, partitioning the cluster into disjoint cohorts, Oracle Clusterware applies certain rules to select the surviving cohort, potentially evicting a node that is running a critical, singleton resource.</p>
                  <p>You can affect the outcome of these decisions by adding value to a database instance or node so that, when Oracle Clusterware must decide whether to evict or terminate, it will consider these factors and attempt to ensure that all critical components remain available. You can configure weighting functions to add weight to critical components in your cluster, giving Oracle Clusterware added input when deciding which nodes to evict when resolving a split-brain situation.</p>
                  <p>You may want to ensure that specific nodes survive the tie-breaking process, perhaps because of certain hardware characteristics, or that certain resources survive, perhaps because of particular databases or services. You can assign weight to particular nodes, resources, or services, based on the following criteria:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can assign weight only to administrator-managed nodes.</p>
                     </li>
                     <li>
                        <p>You can assign weight to servers or applications that are registered Oracle Clusterware resources.</p>
                     </li>
                  </ul>
                  <p>Weight contributes to importance of the component and influences the choice that Oracle Clusterware makes when managing a split-brain situation. With other critical factors being equal between the various cohorts, Oracle Clusterware chooses the heaviest cohort to survive.</p>
                  <p>You can assign weight to various components, as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>To assign weight to database instances or services, you use the <code class="codeph">-css_critical yes</code> parameter with the <code class="codeph">srvctl add database</code> or <code class="codeph">srvctl add service</code> commands when adding a database instance or service. You can also use the parameter with the <code class="codeph">srvctl modify database</code> and <code class="codeph">srvctl modify service</code> commands.
                        </p>
                     </li>
                     <li>
                        <p>To assign weight to non <span class="italic">ora.*</span> resources, use the <code class="codeph">-attr "CSS_CRITICAL=yes"</code> parameter with the <code class="codeph">crsctl add resource</code> and <code class="codeph">crsctl modify resource</code> commands when you are adding or modifying resources.
                        </p>
                     </li>
                     <li>
                        <p>To assign weight to a server, use the <code class="codeph">-css_critical yes</code> parameter with the <code class="codeph">crsctl set server</code> command.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-3C3E0790-166E-4D94-B008-AEF8458FAF60__GUID-A115B096-452D-439A-91C4-725AA36C8AE8">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You must restart the Oracle Clusterware stack on the node for the values to take effect. This does not apply to resources where the changes take effect without having to restart the resource.</p>
                        </li>
                        <li>
                           <p>If you change the environment from administrator managed to policy managed, or a mixture of the two, any weight that you have assigned is stored, but is not considered, meaning that it will no longer apply or be considered unless and until you reconfigure the cluster back to being administrator managed.</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" name="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01"></a><h3 id="CWADD-GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" class="sect3">Overview of Oracle Database Quality of Service Management</h3>
               <div>
                  <p>Oracle Database Quality of Service Management (Oracle Database QoS Management) is an automated, policy-based product that monitors the workload requests for an entire system.</p>
                  <p>Oracle Database QoS Management manages the resources that are shared across applications, and adjusts the system configuration to keep the applications running at the performance levels needed by your business. Oracle Database QoS Management responds gracefully to changes in system configuration and demand, thus avoiding additional oscillations in the performance levels of your applications.</p>
                  <p>Oracle Database QoS Management monitors and manages Oracle RAC database workload performance objectives by identifying bottlenecked resources impacting these objectives, and both recommending and taking actions to restore performance. Administrator-managed deployments bind database instances to nodes but policy-managed deployments do not, so the Oracle Database QoS Management server pool size resource control is only available for the latter. All other resource management controls are available for both deployments.</p>
                  <p>Oracle Database QoS Management supports administrator-managed Oracle RAC and Oracle RAC One Node databases with its Measure-Only, Monitor, and Management modes. This enables schema consolidation support within an administrator-managed Oracle RAC database by adjusting the CPU shares of performance classes running in the database. Additionally, database consolidation is supported by adjusting CPU counts for databases hosted on the same physical servers.</p>
                  <p>Because administrator-managed databases do not run in server pools, the ability to expand or shrink the number of instances by changing the server pool size that is supported in policy-managed database deployments is not available for administrator-managed databases. This new deployment support is integrated into the Oracle QoS Management pages in Oracle Enterprise Manager Cloud Control.</p>
               </div>
            </div><a id="CWADD92403"></a><div class="props_rev_3"><a id="GUID-D893FBA6-4C66-4BEE-B373-F158F2D86341" name="GUID-D893FBA6-4C66-4BEE-B373-F158F2D86341"></a><h3 id="CWADD-GUID-D893FBA6-4C66-4BEE-B373-F158F2D86341" class="sect3">Overview of Grid Naming Service</h3>
               <div>
                  <p>Oracle Clusterware uses Grid Naming Service (GNS) for address resolution in a single-cluster or multi-cluster environment. You can configure your clusters with a single, primary GNS instance, and you can also configure one or more secondary GNS instances with different roles to provide high availability address lookup and other services to clients.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE" title="To implement GNS, your network administrator must configure the DNS to set up a domain for the cluster, and delegate resolution of that domain to the GNS VIP. You can use a separate domain, or you can create a subdomain of an existing domain for the cluster.">Network Administration Tasks for GNS and GNS Virtual IP Address</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-8865E441-9016-4336-AE0E-C1CAA81E1627" title="GNS can run in either automatic or standard cluster address configuration mode. Automatic configuration uses either the Dynamic Host Configuration Protocol (DHCP) for IPv4 addresses or the Stateless Address Autoconfiguration Protocol (autoconfig) (RFC 2462 and RFC 4862) for IPv6 addresses.">Understanding Grid Naming Service Configuration Options</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD92092"></a><a id="CWADD92595"></a><div class="props_rev_3"><a id="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE" name="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE"></a><h4 id="CWADD-GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE" class="sect4">Network Administration Tasks for GNS and GNS Virtual IP Address</h4>
                  <div>
                     <p>To implement GNS, your network administrator must configure the DNS to set up a domain for the cluster, and delegate resolution of that domain to the GNS VIP. You can use a separate domain, or you can create a subdomain of an existing domain for the cluster.</p>
                     <p>GNS distinguishes between nodes by using cluster names and individual node identifiers as part of the host name for that cluster node, so that cluster node 123 in cluster A is distinguishable from cluster node 123 in cluster B.</p>
                     <p>However, if you configure host names manually, then the subdomain you delegate to GNS should have no subdomains. For example, if you delegate the subdomain  <code class="codeph">mydomain.example.com</code> to GNS for resolution, then there should be no <code class="codeph">other.mydomain.example.com</code> domains. Oracle recommends that you delegate a subdomain to GNS that is used by GNS exclusively.
                     </p>
                     <div class="infoboxnote" id="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE__GUID-742D3A69-6E75-4787-A25B-0C2CD257F4D8">
                        <p class="notep1">Note:</p>
                        <p>You can use GNS without DNS delegation in configurations where static addressing is being done, such as in Oracle Flex ASM or Oracle Flex Clusters. However, GNS requires a domain be delegated to it if addresses are assigned using DHCP.</p>
                     </div>
                     <p><a href="oracle-clusterware-administration.html#GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE__BABDHIHG">Example 2-1</a> shows DNS entries required to delegate a domain called <code class="codeph">myclustergns.example.com</code> to a GNS VIP address <code class="codeph">10.9.8.7</code>.
                     </p>
                     <p>The GNS daemon and the GNS VIP run on one node in the server cluster. The GNS daemon listens on the GNS VIP using port 53 for DNS requests. Oracle Clusterware manages the GNS daemon and the GNS VIP to ensure that they are always available. If the server on which the GNS daemon is running fails, then Oracle Clusterware fails over the GNS daemon and the GNS VIP to a surviving cluster member node. If the cluster is an Oracle Flex Cluster configuration, then Oracle Clusterware fails over the GNS daemon and the GNS VIP to a Hub Node.</p>
                     <div class="infoboxnote" id="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE__GUID-8F5460D7-B8F3-450F-8C65-55C3A279EFE3">
                        <p class="notep1">Note:</p>
                        <p>Oracle Clusterware does not fail over GNS addresses to different clusters. Failovers occur only to members of the same cluster.</p>
                     </div>
                     <div class="example" id="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE__BABDHIHG">
                        <p class="titleinexample">Example 2-1 DNS Entries</p><pre class="oac_no_warn" dir="ltr"># Delegate to gns on mycluster
mycluster.example.com NS myclustergns.example.com
#Let the world know to go to the GNS vip
myclustergns.example.com. 10.9.8.7</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                           <li><a href="oracle-flex-clusters.html#GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" title="An Oracle Flex Cluster scales Oracle Clusterware to large numbers of nodes.">Oracle Flex Clusters</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92596"></a><div class="props_rev_3"><a id="GUID-8865E441-9016-4336-AE0E-C1CAA81E1627" name="GUID-8865E441-9016-4336-AE0E-C1CAA81E1627"></a><h4 id="CWADD-GUID-8865E441-9016-4336-AE0E-C1CAA81E1627" class="sect4">Understanding Grid Naming Service Configuration Options</h4>
                  <div>
                     <p>GNS can run in either <span class="italic">automatic</span> or <span class="italic">standard</span> cluster address configuration mode. Automatic configuration uses either the Dynamic Host Configuration Protocol (DHCP) for IPv4 addresses or the Stateless Address Autoconfiguration Protocol (autoconfig) (RFC 2462 and RFC 4862) for IPv6 addresses.
                     </p>
                     <p>This section includes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-97AAD3BF-F495-4285-81AF-D7DE24367203" title="Highly-available GNS consists of one primary GNS instance and zero or more secondary GNS instances.">Highly-Available Grid Naming Service</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-FBBB6C1A-F0F3-42CB-BF72-9B65BC34753B" title="With automatic configurations, a DNS administrator delegates a domain on the DNS to be resolved through the GNS subdomain. During installation, Oracle Universal Installer assigns names for each cluster member node interface designated for Oracle Grid Infrastructure use during installation or configuration. SCANs and all other cluster names and addresses are resolved within the cluster, rather than on the DNS.">Automatic Configuration Option for Addresses</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-04FC86E4-85B7-4D14-8912-C5BF76361D70" title="With static configurations, no subdomain is delegated. A DNS administrator configures the GNS VIP to resolve to a name and address configured on the DNS, and a DNS administrator configures a SCAN name to resolve to three static addresses for the cluster.">Static Configuration Option for Addresses</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A" title="With dynamic configurations, you can configure GNS to provide name resolution for one cluster, or to advertise resolution for multiple clusters, so that a single GNS instance can perform name resolution for multiple registered clusters. This option is called shared GNS.">Shared GNS Option for Addresses</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="sect4"><a id="GUID-97AAD3BF-F495-4285-81AF-D7DE24367203" name="GUID-97AAD3BF-F495-4285-81AF-D7DE24367203"></a><h5 id="CWADD-GUID-97AAD3BF-F495-4285-81AF-D7DE24367203" class="sect5">Highly-Available Grid Naming Service</h5>
                     <div>
                        <p>Highly-available GNS consists of one primary GNS instance and zero or more secondary GNS instances.</p>
                        <p>The primary GNS instance services all updates from the clients, while both the primary and the secondary GNS instances process the lookup queries. Additionally, the secondary GNS instances act as backup for the primary GNS instance. Secondary GNS instances can be promoted to the primary role whenever an existing primary GNS instance fails or is removed by the cluster administrator.</p>
                        <p>Further, highly-available GNS provides fault tolerance by taking data backup on secondary GNS instance using zone transfer. Secondary GNS instances get a copy of data from the primary GNS instance during installation. Thereafter, any update on the primary GNS instance gets replicated to the secondary GNS instances.</p>
                        <p>The primary GNS instance manages <a href="glossary.html#GUID-1AFD7E5D-D994-46F4-9667-C483D6751CB8"><span class="xrefglossterm">zone data</span></a> and holds all records on the delegated domain. It stores the zone data and its change history in the Oracle Cluster Registry (OCR). Updating the zone data on a secondary GNS instance involves a zone transfer, which can be one of two methods:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Full zone transfer</span>: The primary GNS instance replicates all zone data to the secondary GNS instances.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Incremental zone transfer</span>: The primary GNS instance only replicates the changed data to secondary GNS instances. GNS uses this transfer mechanism for the following scenarios:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>When there is an update to the zone data in the primary GNS instance, the instance notifies the secondary instances to initiate a data transfer. The secondary GNS instances will ask for a data transfer only if the serial number of the data in OCR of the primary GNS instance is greater than that of the data of the secondary GNS instances.</p>
                                 </li>
                                 <li>
                                    <p>When the refresh time of a secondary GNS instance expires, the instance sends a query containing its data serial number to the primary GNS instance. If the serial number of the secondary GNS instance is less than that of the primary GNS instance, then GNS initiates a zone transfer.</p>
                                    <div class="infoboxnote" id="GUID-97AAD3BF-F495-4285-81AF-D7DE24367203__GUID-86C4BEFF-7E56-43ED-91FE-60FEB173F86B">
                                       <p class="notep1">Note:</p>Refresh time must be long enough to reduce the load on the primary GNS instance so that answering a secondary GNS instance does not prevent the primary instance from being able to function. Default refresh time is one hour but the cluster administrator can change this value based on cluster size.
                                    </div>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>You must configure a primary GNS instance before you configure any secondary. Once you successfully configure a primary GNS instance, you export client data for clients and secondary GNS instances. You provide exported client data when you configure secondary GNS instances. All secondary GNS instances register themselves with the primary GNS instance and get a copy of zone data. Secondary GNS instances contact the primary GNS instance for data updates using the zone transfer mechanism, when either the refresh time of the secondary GNS instance expires or in response to a notification.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-administration.html#GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007" title="Configuring highly-available GNS involves configuring primary and secondary GNS instances. You can configure GNS during installation of Oracle Clusterware using Oracle Universal Installer but you can only configure highly-available GNS after you install Oracle Clusterware because you can only configure a secondary GNS instance after you install Oracle Clusterware.">Configuring Highly-Available GNS</a></li>
                              <li><a href="oracle-clusterware-administration.html#GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3" title="You can remove primary and secondary GNS instances from a cluster.">Removing Primary and Secondary GNS Instances</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92597"></a><div class="props_rev_3"><a id="GUID-FBBB6C1A-F0F3-42CB-BF72-9B65BC34753B" name="GUID-FBBB6C1A-F0F3-42CB-BF72-9B65BC34753B"></a><h5 id="CWADD-GUID-FBBB6C1A-F0F3-42CB-BF72-9B65BC34753B" class="sect5">Automatic Configuration Option for Addresses</h5>
                     <div>
                        <p>With automatic configurations, a DNS administrator delegates a domain on the DNS to be resolved through the GNS subdomain. During installation, Oracle Universal Installer assigns names for each cluster member node interface designated for Oracle Grid Infrastructure use during installation or configuration. SCANs and all other cluster names and addresses are resolved within the cluster, rather than on the DNS.</p>
                        <p><a id="d13771e2688" class="indexterm-anchor"></a><a id="d13771e2690" class="indexterm-anchor"></a><a id="d13771e2692" class="indexterm-anchor"></a> Automatic configuration occurs in one of the following ways:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For IPv4 addresses, Oracle Clusterware assigns unique identifiers for each cluster member node interface allocated for Oracle Grid Infrastructure, and generates names using these identifiers within the subdomain delegated to GNS. A DHCP server assigns addresses to these interfaces, and GNS maintains address and name associations with the IPv4 addresses leased from the IPv4 DHCP pool.</p>
                           </li>
                           <li>
                              <p>For IPv6 addresses, Oracle Clusterware automatically generates addresses with autoconfig.</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD92598"></a><div class="props_rev_3"><a id="GUID-04FC86E4-85B7-4D14-8912-C5BF76361D70" name="GUID-04FC86E4-85B7-4D14-8912-C5BF76361D70"></a><h5 id="CWADD-GUID-04FC86E4-85B7-4D14-8912-C5BF76361D70" class="sect5">Static Configuration Option for Addresses </h5>
                     <div>
                        <p>With static configurations, no subdomain is delegated. A DNS administrator configures the GNS VIP to resolve to a name and address configured on the DNS, and a DNS administrator configures a SCAN name to resolve to three static addresses for the cluster. </p>
                        <p>A DNS administrator also configures a static public IP name and address, and virtual IP name and address for each cluster member node. A DNS administrator must also configure new public and virtual IP names and addresses for each node added to the cluster. All names and addresses are resolved by DNS.</p>
                        <p>GNS without subdomain delegation using static VIP addresses and SCANs enables Oracle Flex Cluster and CloudFS features that require name resolution information within the cluster. However, any node additions or changes must be carried out as manual administration tasks.</p>
                     </div>
                  </div><a id="CWADD92599"></a><div class="props_rev_3"><a id="GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A" name="GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A"></a><h5 id="CWADD-GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A" class="sect5">Shared GNS Option for Addresses</h5>
                     <div>
                        <p>With dynamic configurations, you can configure GNS to provide name resolution for one cluster, or to advertise resolution for multiple clusters, so that a single GNS instance can perform name resolution for multiple registered clusters. This option is called shared GNS.</p>
                        <p><a id="d13771e2943" class="indexterm-anchor"></a>Shared GNS provides the same services as standard GNS, and appears the same to clients receiving name resolution. The difference is that the GNS daemon running on one cluster is configured to provide name resolution for all clusters in domains that are delegated to GNS for resolution, and GNS can be centrally managed using SRVCTL commands. You can use shared GNS configuration to minimize network administration tasks across the enterprise for Oracle Grid Infrastructure clusters.
                        </p>
                        <p>You cannot use the static address configuration option for a cluster providing shared GNS to resolve addresses in a multi-cluster environment. Shared GNS requires automatic address configuration, either through addresses assigned by DHCP, or by IPv6 stateless address autoconfiguration.</p>
                        <div class="infoboxnote" id="GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A__GUID-380617EA-B35E-4652-A06F-CAAFA2E0B793">
                           <p class="notep1">Note:</p>
                           <p>All of the node names in a set of clusters served by GNS must be unique.</p>
                        </div>
                        <p>Oracle Universal Installer enables you to configure static addresses with GNS for shared GNS clients or servers, with GNS used for discovery.</p>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD92600"></a><div class="props_rev_3"><a id="GUID-805F8C64-B09F-4D4A-87E1-5338C1361512" name="GUID-805F8C64-B09F-4D4A-87E1-5338C1361512"></a><h3 id="CWADD-GUID-805F8C64-B09F-4D4A-87E1-5338C1361512" class="sect3">Administering Grid Naming Service </h3>
               <div>
                  <p>Use SRVCTL to administer Grid Naming Service (GNS) in both single-cluster and multi-cluster environments.</p>
                  <div class="infoboxnote" id="GUID-805F8C64-B09F-4D4A-87E1-5338C1361512__GUID-63E33F5E-891C-43AC-B607-C298E26E6F2A">
                     <p class="notep1">Note:</p>
                     <p>The GNS server and client must run on computers using the same operating system and processor architecture. Oracle does not support running GNS on computers with different operating systems, processor architectures, or both.</p>
                  </div>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007" title="Configuring highly-available GNS involves configuring primary and secondary GNS instances. You can configure GNS during installation of Oracle Clusterware using Oracle Universal Installer but you can only configure highly-available GNS after you install Oracle Clusterware because you can only configure a secondary GNS instance after you install Oracle Clusterware.">Configuring Highly-Available GNS</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3" title="You can remove primary and secondary GNS instances from a cluster.">Removing Primary and Secondary GNS Instances</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F" title="You use the srvctl command to start and stop GNS.">Starting and Stopping GNS with SRVCTL</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-32C1A762-5693-4C31-8734-0922C87A6FF8" title="You can convert clusters that are not running GNS into GNS server or client clusters, and you can change GNS cluster type configurations for server and client clusters.">Converting Clusters to GNS Server or GNS Client Clusters</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-29866D1B-B51D-42C3-AF3B-137C7B789682" title="If it becomes necessary to make another cluster the GNS server cluster, either because a cluster failure, or because of an administration plan, then you can move GNS to another cluster with the srvctl command.">Moving GNS to Another Cluster</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-AC40F44D-C385-4D66-BB63-9C1F33CBAB0F" title="When you move from an IPv4 network to an IPv6 network, you must change the GNS subdomain.">Changing the GNS Subdomain when Moving from IPv4 to IPv6 Network</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170" title="You can convert Oracle Grid Infrastructure cluster networks using DNS for name resolution to cluster networks using Grid Naming Service (GNS) obtaining name resolution through GNS.">Rolling Conversion from DNS to GNS Cluster Name Resolution</a></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007" name="GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007"></a><h4 id="CWADD-GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007" class="sect4">Configuring Highly-Available GNS</h4>
                  <div>
                     <p>Configuring highly-available GNS involves configuring primary and secondary GNS instances. You can configure GNS during installation of Oracle Clusterware using Oracle Universal Installer but you can only configure highly-available GNS after you install Oracle Clusterware because you can only configure a secondary GNS instance after you install Oracle Clusterware.</p>
                     <div class="section">Highly-available GNS provides the ability to run multiple GNS instances in multi-cluster environment with different roles. There will be one primary GNS instance and zero or more secondary instances. The primary instance manages update and resolution operations. However, the secondary instance only manages resolution operations. If you choose to use secondary GNS instances, then you must first configure a primary GNS instance or change the existing GNS in a shared GNS environment to a primary GNS instance.</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>As the cluster administrator, configure the primary GNS instance on any node in an existing cluster, as follows:</span><div><pre class="pre codeblock"><code># srvctl add gns -vip <span class="variable" translate="no">gns_vip</span> -domain <span class="variable" translate="no">gns_subdomain</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Start the primary GNS instance, as follows:</span><div><pre class="pre codeblock"><code># srvctl start gns</code></pre><p>There can be only one primary GNS instance in a multi-cluster environment. If GNS detects more than one primary GNS instance, then it will abort the start command. You can then configure this instance as a secondary GNS instance, as described in step <a href="oracle-clusterware-administration.html#GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007__CONFIGURETHESECONDARYGNSINSTANCEASF-D798924B">5</a>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create client data for the secondary GNS instances, as follows</span><div><pre class="pre codeblock"><code># srvctl export gns -clientdata <span class="variable" translate="no">file_name</span> -role secondary</code></pre><p>GNS stores this zone data information in OCR and updates secondary GNS instances once they are configured.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Copy the client data file you created in the preceding step to the secondary GNS instance.</span></li>
                        <li class="stepexpand" id="GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007__CONFIGURETHESECONDARYGNSINSTANCEASF-D798924B"><span>Configure the secondary GNS instance, as follows:</span><div><pre class="pre codeblock"><code># srvctl add gns -vip <span class="variable" translate="no">gns_vip</span> -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Start the secondary GNS instance, as follows:</span><div><pre class="pre codeblock"><code># srvctl start gns</code></pre><p>Once you successfully configure and start a secondary GNS instance, it queries the primary GNS instance for the zone data.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3" name="GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3"></a><h4 id="CWADD-GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3" class="sect4">Removing Primary and Secondary GNS Instances</h4>
                  <div>
                     <p>You can remove primary and secondary GNS instances from a cluster.</p>
                     <div class="p">You cannot remove a primary GNS instance until you configure another primary GNS instance. If you remove a primary GNS instance before you have another one to replace it, then GNS will not function.
                        <p>As the cluster administrator, select a secondary GNS instance and promote it to primary, as follows:</p><pre class="pre codeblock"><code># srvctl modify gns -role primary</code></pre></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Depending on whether you are removing a primary or secondary GNS instance, stop the instance, as follows:</span><div><pre class="pre codeblock"><code># srvctl stop gns</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Remove the instance, as follows:</span><div><pre class="pre codeblock"><code># srvctl remove gns</code></pre><div class="infoboxnote" id="GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3__GUID-D14DD1BA-BDBE-4E3F-993A-2C87CDA6204A">
                                 <p class="notep1">Note:</p>A DNS administrator can delete the instance's name server and A/AAAA record entries from the DNS zone data, so that the client will not attempt to query an instance which is no longer available.
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CWADD92404"></a><div class="props_rev_3"><a id="GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F" name="GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F"></a><h4 id="CWADD-GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F" class="sect4">Starting and Stopping GNS with SRVCTL</h4>
                  <div>
                     <p>You use the srvctl command to start and stop GNS. </p>
                     <div class="section">
                        <p><a id="d13771e3612" class="indexterm-anchor"></a><a id="d13771e3616" class="indexterm-anchor"></a><a id="d13771e3620" class="indexterm-anchor"></a><a id="d13771e3624" class="indexterm-anchor"></a>Start and stop GNS on the server cluster by running the following commands as <code class="codeph">root</code>, respectively:
                        </p><pre class="oac_no_warn" dir="ltr"># srvctl start gns
# srvctl stop gns</pre><div class="infoboxnote" id="GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F__GUID-26F68CB7-6197-4DB3-A9FF-DD2337A55691">
                           <p class="notep1">Note:</p>
                           <p>You cannot start or stop GNS on a client cluster.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD92546"></a><div class="props_rev_3"><a id="GUID-32C1A762-5693-4C31-8734-0922C87A6FF8" name="GUID-32C1A762-5693-4C31-8734-0922C87A6FF8"></a><h4 id="CWADD-GUID-32C1A762-5693-4C31-8734-0922C87A6FF8" class="sect4">Converting Clusters to GNS Server or GNS Client Clusters</h4>
                  <div>
                     <p>You can convert clusters that are not running GNS into GNS server or client clusters, and you can change GNS cluster type configurations for server and client clusters. </p>
                     <p>This section includes the following cluster conversion scenarios:<a id="d13771e3757" class="indexterm-anchor"></a><a id="d13771e3761" class="indexterm-anchor"></a></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-2587913C-2172-4E50-97BA-CFAD9302CF38" title="You can use the srvctl commandto convert a cluster that is not running GNS to a GNS server cluster.">Converting a Non-GNS Cluster to a GNS Server Cluster</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC" title="To convert a cluster that is not running GNS to a client cluster, you must import the credentials file from the server cluster.">Converting a Non-GNS Cluster to a Client Cluster</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-1AA8BBB0-01F1-44C0-914B-A48ED711DD0C">Converting a Single Cluster Running GNS to a Server Cluster</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B" title="You can use the srvctl command to convert a single cluster running GNS to GNC client cluster. Because it is necessary to stay connected to the current GNS during this conversion process, the procedure is more involved than that of converting a single cluster to a server cluster.">Converting a Single Cluster Running GNS to be a GNS Client Cluster</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD92601"></a><div class="props_rev_3"><a id="GUID-2587913C-2172-4E50-97BA-CFAD9302CF38" name="GUID-2587913C-2172-4E50-97BA-CFAD9302CF38"></a><h5 id="CWADD-GUID-2587913C-2172-4E50-97BA-CFAD9302CF38" class="sect5">Converting a Non-GNS Cluster to a GNS Server Cluster</h5>
                     <div>
                        <p>You can use the srvctl commandto convert a cluster that is not running GNS to a GNS server cluster.</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Add GNS to the cluster by running the following command as <code class="codeph">root</code>, providing a valid IP address and a domain:
                                 </p><pre class="pre codeblock"><code># srvctl add gns -vip <span class="variable" translate="no">IP_address</span> -domain <span class="variable" translate="no">domain</span></code></pre></li>
                              <li>
                                 <p>Start the GNS instance:</p><pre class="pre codeblock"><code># srvctl start gns -node <span class="variable" translate="no">node_name</span></code></pre></li>
                           </ol>
                           <div class="infoboxnote" id="GUID-2587913C-2172-4E50-97BA-CFAD9302CF38__GUID-D8BCB7B0-C1EE-4574-86A7-8395B60C53E0">
                              <p class="notep1">Note:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Specifying a domain is <span class="italic">not</span> required when adding a GNS VIP.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The IP address you specify cannot currently be used by another GNS instance.</p>
                                 </li>
                                 <li>
                                    <p>The configured cluster must have DNS delegation for it to be a GNS server cluster.</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD92602"></a><div class="props_rev_3"><a id="GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC" name="GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC"></a><h5 id="CWADD-GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC" class="sect5">Converting a Non-GNS Cluster to a Client Cluster</h5>
                     <div>
                        <p>To convert a cluster that is not running GNS to a client cluster, you must import the credentials file from the server cluster.</p>
                        <div class="section">
                           <p>Convert a cluster that is not running GNS to a GNS client cluster, as follows:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Run the following command in the server cluster to export the GNS instance client data configuration to a file:</span><div><pre class="pre codeblock"><code>$ srvctl export gns -clientdata <span class="variable" translate="no">path_to_file</span> -role client
</code></pre><p>You must specify the fully-qualified path to the file.</p>
                                 <div class="infoboxnote" id="GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC__GUID-7EC148CB-2034-4EA8-8C51-61EDCAA9FFB7">
                                    <p class="notep1">Note:</p>
                                    <p>You can use the GNS configuration Client Data file you generate with Oracle Universal Installer as an input file for creating shared GNS clients.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Import the file you created in the preceding step on a node in the cluster to make that cluster a client cluster by running the following command, as <code class="codeph">root</code>:</span><div><pre class="pre codeblock"><code># srvctl add gns -clientdata <span class="variable" translate="no">path_to_file</span></code></pre><div class="infoboxnote" id="GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC__GUID-1E435222-F12A-430A-84E4-7834B864F2F1">
                                    <p class="notep1">Note:</p>
                                    <p>You must copy the file containing the GNS data from the server cluster to a node in the cluster where you run this command.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Change the SCAN name, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span>.<span class="variable" translate="no">client_cluster_name</span>.<span class="variable" translate="no">server_GNS_subdomain</span></code></pre></div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="CWADD92603"></a><div class="props_rev_3"><a id="GUID-1AA8BBB0-01F1-44C0-914B-A48ED711DD0C" name="GUID-1AA8BBB0-01F1-44C0-914B-A48ED711DD0C"></a><h5 id="CWADD-GUID-1AA8BBB0-01F1-44C0-914B-A48ED711DD0C" class="sect5">Converting a Single Cluster Running GNS to a Server Cluster</h5>
                     <div>
                        <div>You do not need to do anything to convert a single cluster running GNS to be a GNS server cluster. It is automatically considered to be a server cluster when a client cluster is added.</div>
                     </div>
                  </div><a id="CWADD92604"></a><div class="props_rev_3"><a id="GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B" name="GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B"></a><h5 id="CWADD-GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B" class="sect5">Converting a Single Cluster Running GNS to be a GNS Client Cluster</h5>
                     <div>
                        <p>You can use the srvctl command to convert a single cluster running GNS to GNC client cluster. Because it is necessary to stay connected to the current GNS during this conversion process, the procedure is more involved than that of converting a single cluster to a server cluster.</p>
                        <div class="section">
                           <p>To convert a single cluster running GNS to a GNS client cluster:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Run the following command in the server cluster to export the GNS client information to a file:</span><div><pre class="pre codeblock"><code>$ srvctl export gns -clientdata <span class="variable" translate="no">path_to_client_data_file</span>
</code></pre><p>You must specify the fully-qualified path to the file.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Stop GNS on the cluster you want to convert to a client cluster.</span><div><pre class="pre codeblock"><code># srvctl stop gns</code></pre><div class="infoboxnote" id="GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B__GUID-D599BC16-A9A6-4058-BE86-89DC81B81BE5">
                                    <p class="notep1">Note:</p>
                                    <p>While the conversion is in progress, name resolution using GNS will be unavailable.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Run the following command in the server cluster to export the GNS instance:</span><div><pre class="pre codeblock"><code>$ srvctl export gns -instance <span class="variable" translate="no">path_to_file</span>
</code></pre><p>You must specify the fully-qualified path to the file.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Run the following command as <code class="codeph">root</code> in the server cluster to import the GNS instance file:</span><div><pre class="pre codeblock"><code># srvctl import gns -instance <span class="variable" translate="no">path_to_file</span>
</code></pre><p>You must specify the fully-qualified path to the file.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Run the following command as <code class="codeph">root</code> on the node where you imported the GNS instance file to start the GNS instance:</span><div><pre class="pre codeblock"><code># srvctl start gns
</code></pre><p>By not specifying the name of the node on which you want to start the GNS instance, the instance will start on a random node.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Remove GNS from the GNS client cluster using the following command:</span><div><pre class="pre codeblock"><code># srvctl remove gns
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Make the former cluster a client cluster, as follows:</span><div><pre class="pre codeblock"><code># srvctl add gns -clientdata <span class="variable" translate="no">path_to_client_data_file</span></code></pre><div class="infoboxnote" id="GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B__GUID-3B835853-478A-4083-AFFF-5A2D4E8913AF">
                                    <p class="notep1">Note:</p>
                                    <p>You must copy the file containing the GNS data from the server cluster to a node in the cluster where you run this command.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Modify the SCAN in the GNS client cluster to use the GNS subdomain qualified with the client cluster name, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span>.<span class="variable" translate="no">gns_domain</span>
</code></pre><p>In the preceding command, <code class="codeph"><span class="variable" translate="no">gns_domain</span></code> is in the form <code class="codeph"><span class="variable" translate="no">client_cluster_name</span></code><code class="codeph"><span class="variable" translate="no">.server GNS subdomain</span></code></p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div><a id="CWADD92405"></a><div class="props_rev_3"><a id="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682" name="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682"></a><h4 id="CWADD-GUID-29866D1B-B51D-42C3-AF3B-137C7B789682" class="sect4">Moving GNS to Another Cluster</h4>
                  <div>
                     <p>If it becomes necessary to make another cluster the GNS server cluster, either because a cluster failure, or because of an administration plan, then you can move GNS to another cluster with the srvctl command. </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682__GUID-658834C0-81F2-4E59-A6DA-DE999BA34701">
                           <p class="notep1">Note:</p>
                           <p>This procedure requires server cluster and client cluster downtime. Additionally, you must import GNS client data from the new server cluster to any Oracle Flex ASM and Fleet Patching and Provisioning Servers and Clients.</p>
                        </div>
                        <p>To move GNS to another cluster:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Stop the GNS instance on the current server cluster.</span><div><pre class="oac_no_warn" dir="ltr"># srvctl stop gns
</pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682__BAJCAFHE"><span>Export the GNS instance configuration to a file.</span><div><pre class="oac_no_warn" dir="ltr"># srvctl export gns -instance <span class="italic">path_to_file</span>
</pre><p>Specify the fully-qualified path to the file.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Remove the GNS configuration from the former server cluster.</span><div><pre class="oac_no_warn" dir="ltr"># srvctl remove gns
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Add GNS to the new cluster.</span><div><pre class="oac_no_warn" dir="ltr"># srvctl add gns -domain <span class="italic">domain_name</span> -vip <span class="italic">vip_name</span>
</pre><p>Alternatively, you can specify an IP address for the VIP.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Configure the GNS instance in the new server cluster using the instance information stored in the file you created in step <a href="oracle-clusterware-administration.html#GUID-29866D1B-B51D-42C3-AF3B-137C7B789682__BAJCAFHE">2</a>, by importing the file, as follows:</span><div><pre class="oac_no_warn" dir="ltr"># srvctl import gns -instance <span class="italic">path_to_file</span></pre><div class="infoboxnote" id="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682__GUID-2F37BB28-B4CA-45C7-BF80-393FAD4328F9">
                                 <p class="notep1">Note:</p>
                                 <p>The file containing the GNS data from the former server cluster must reside on the node in the cluster where you run the <code class="codeph">srvctl import gns</code> command.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start the GNS instance in the new server cluster.</span><div><pre class="oac_no_warn" dir="ltr"># srvctl start gns</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AC40F44D-C385-4D66-BB63-9C1F33CBAB0F" name="GUID-AC40F44D-C385-4D66-BB63-9C1F33CBAB0F"></a><h4 id="CWADD-GUID-AC40F44D-C385-4D66-BB63-9C1F33CBAB0F" class="sect4">Changing the GNS Subdomain when Moving from IPv4 to IPv6 Network</h4>
                  <div>
                     <p>When you move from an IPv4 network to an IPv6 network, you must change the GNS subdomain.</p>
                     <div class="section">To change the GNS subdomain, you must add an IPv6 network, update the GNS domain, and update the SCAN, as follows:</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Add an IPv6 subnet using the <code class="codeph">srvctl modify network</code> command, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl modify network -subnet <span class="variable" translate="no">ipv6_subnet</span>/<span class="variable" translate="no">ipv6_prefix_length</span>[/<span class="variable" translate="no">interface</span>] -nettype autoconfig</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Update the GNS domain, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl stop gns -force
$ srvctl stop scan -force
$ srvctl remove gns -force
$ srvctl add gns -vip gns_vip -domain gns_subdomain
$ srvctl start gns</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Update the SCAN name with a new domain, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl remove scan -force
$ srvctl add scan -scanname <span class="variable" translate="no">new_domain</span>
$ srvctl start scan</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Convert the network IP type from IPv4 to both IPv4 DHCP and IPv6 autoconfig, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl modify network -iptype both</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Transition the network from using both protocols to using only IPv6 autoconfig, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl modify network -iptype ipv6</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CWADD92641"></a><div class="props_rev_3"><a id="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170" name="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170"></a><h4 id="CWADD-GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170" class="sect4">Rolling Conversion from DNS to GNS Cluster Name Resolution</h4>
                  <div>
                     <p>You can convert Oracle Grid Infrastructure cluster networks using DNS for name resolution to cluster networks using Grid Naming Service (GNS) obtaining name resolution through GNS.</p>
                     <div class="section">
                        <p>Use the following procedure to convert from a standard DNS name resolution network to a GNS name resolution network, with no downtime:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in as the Grid user (<code class="codeph">grid</code>), and use the following Cluster Verification Utility to check the status for moving the cluster to GNS, where <code class="codeph"><span class="variable" translate="no">nodelist</span></code> is a comma-delimited list of cluster member nodes:</span><div><pre class="pre codeblock"><code>$ cluvfy stage &#x2013;pre crsinst &#x2013;n <span class="variable" translate="no">nodelist</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>As the Grid user, check the integrity of the GNS configuration using the following commands, where <code class="codeph"><span class="variable" translate="no">domain</span></code> is the domain delegated to GNS for resolution, and <code class="codeph"><span class="variable" translate="no">gns_vip</span></code> is the GNS VIP:</span><div><pre class="pre codeblock"><code>$ cluvfy comp gns -precrsinst -domain <span class="variable" translate="no">domain</span> -vip <span class="variable" translate="no">gns_vip</span></code></pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170__BAJDAJBG"><span>Log in as <code class="codeph">root</code>, and use the following SRVCTL command to configure the GNS resource, where <code class="codeph"><span class="variable" translate="no">domain_name</span></code> is the domain that your network administrator has configured your DNS to delegate for resolution to GNS, and <code class="codeph"><span class="variable" translate="no">ip_address</span></code> is the IP address on which GNS listens for DNS requests:</span><div><pre class="pre codeblock"><code># srvctl add gns -domain <span class="variable" translate="no">domain_name</span> -vip <span class="variable" translate="no">ip_address</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Use the following command to start GNS:</span><div><pre class="pre codeblock"><code># srvctl start gns</code></pre><p>GNS starts and registers VIP and SCAN names.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>As <code class="codeph">root</code>, use the following command to change the network CRS resource to support a mixed mode of static and DHCP network addresses:</span><div><pre class="pre codeblock"><code># srvctl modify network -nettype MIXED</code></pre><p>The necessary VIP addresses are obtained from the DHCP server, and brought up.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>As the Grid user, enter the following command to ensure that Oracle Clusterware is using the new GNS, dynamic addresses, and listener end points:</span><div><pre class="pre codeblock"><code>cluvfy stage -post crsinst -n all</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>After the verification succeeds, change the remote endpoints that previously used the SCAN or VIPs resolved through the DNS to use the SCAN and VIPs resolved through GNS.</span><div>
                              <p>For each client using a SCAN, change the SCAN that the client uses so that the client uses the SCAN in the domain delegated to GNS.</p>
                              <p>For each client using VIP names, change the VIP name on each client so that they use the same server VIP name, but with the domain name in the domain delegated to GNS.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Enter the following command as <code class="codeph">root</code> to update the system with the SCAN name in the GNS subdomain:</span><div><pre class="pre codeblock"><code># srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span>.<span class="variable" translate="no">gns_domain</span></code></pre><p>In the preceding command syntax, <code class="codeph"><span class="variable" translate="no">gns_domain</span></code> is the domain name you entered in step <a href="oracle-clusterware-administration.html#GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170__BAJDAJBG">3</a> of this procedure.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Disable the static addresses once all clients are using the dynamic addresses, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl modify network -nettype DHCP</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD92099"></a><div class="props_rev_3"><a id="GUID-0FA4A79F-B673-4232-863B-328D0E2302B1" name="GUID-0FA4A79F-B673-4232-863B-328D0E2302B1"></a><h3 id="CWADD-GUID-0FA4A79F-B673-4232-863B-328D0E2302B1" class="sect3">Node Failure Isolation</h3>
               <div>
                  <p>Failure isolation is a process by which a failed node is isolated from the rest of the cluster to prevent the failed node from corrupting data.</p>
                  <p>When a node fails, isolating it involves an external mechanism capable of restarting a problem node without cooperation either from Oracle Clusterware or from the operating system running on that node. To provide this capability, Oracle Clusterware 12<span class="italic">c</span> supports the Intelligent Platform Management Interface specification (IPMI) (also known as Baseboard Management Controller (BMC)), an industry-standard management protocol.
                  </p>
                  <p>Typically, you configure failure isolation using IPMI during Oracle Grid Infrastructure installation, when you are provided with the option of configuring IPMI from the Failure Isolation Support screen. If you do not configure IPMI during installation, then you can configure it after installation using the Oracle Clusterware Control utility (CRSCTL), as described in a subsequent sectioin.</p>
                  <p>To use IPMI for failure isolation, each cluster member node must be equipped with an IPMI device running firmware compatible with IPMI version 1.5, which supports IPMI over a local area network (LAN). During database operation, failure isolation is accomplished by communication from the evicting Cluster Synchronization Services daemon to the failed node's IPMI device over the LAN. The IPMI-over-LAN protocol is carried over an authenticated session protected by a user name and password, which are obtained from the administrator during installation.</p>
                  <p>To support dynamic IP address assignment for IPMI using DHCP, the Cluster Synchronization Services daemon requires direct communication with the local IPMI device during Cluster Synchronization Services startup to obtain the IP address of the IPMI device. (This is not true for HP-UX and Solaris platforms, however, which require that the IPMI device be assigned a static IP address.) This is accomplished using an IPMI probe command (OSD), which communicates with the IPMI device through an IPMI driver, which you must install on each cluster system.</p>
                  <p>If you assign a static IP address to the IPMI device, then the IPMI driver is not strictly required by the Cluster Synchronization Services daemon. The driver <span class="italic">is</span> required, however, to use <code class="codeph">ipmitool</code> or <code class="codeph">ipmiutil</code> to configure the IPMI device but you can also do this with management consoles on some platforms.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-clusterware-administration.html#GUID-1E032798-0970-4B94-AD0B-5C1687D42EDF" title="You use the crsctl command to configure IPMI-based failure isolation, after installing Oracle Clusterware. You can also use this command to modify or remove the IPMI configuration.">Post-installation Configuration of IPMI-based Failure Isolation Using CRSCTL</a></li>
                     </ul>
                  </div>
               </div><a id="CWADD92101"></a><div class="props_rev_3"><a id="GUID-40F0AAFE-36CC-4741-B5C0-E5C851ECBA97" name="GUID-40F0AAFE-36CC-4741-B5C0-E5C851ECBA97"></a><h4 id="CWADD-GUID-40F0AAFE-36CC-4741-B5C0-E5C851ECBA97" class="sect4">Server Hardware Configuration for IPMI</h4>
                  <p>You must first install and enable the IPMI driver, and configure the IPMI device, as described in the <span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span> for your platform.
                  </p>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92102"></a><div class="props_rev_3"><a id="GUID-1E032798-0970-4B94-AD0B-5C1687D42EDF" name="GUID-1E032798-0970-4B94-AD0B-5C1687D42EDF"></a><h4 id="CWADD-GUID-1E032798-0970-4B94-AD0B-5C1687D42EDF" class="sect4">Post-installation Configuration of IPMI-based Failure Isolation Using CRSCTL</h4>
                  <div>
                     <p>You use the crsctl command to configure IPMI-based failure isolation, after installing Oracle Clusterware. You can also use this command to modify or remove the IPMI configuration. </p>
                     <p>This is described in the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F" title=".After you install and enable the IPMI driver, configure the IPMI device, and complete the server configuration, you can use the CRSCTL command to complete IPMI configuration.">IPMI Postinstallation Configuration with Oracle Clusterware</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-533164F9-92B1-4AF1-AA20-1497A460C014" title="You may need to modify an existing IPMI-based failure isolation configuration to change IPMI passwords, or to configure IPMI for failure isolation in an existing installation. You use CRSCTL with the IPMI configuration tool appropriate to your platform to accomplish this.">Modifying IPMI Configuration Using CRSCTL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD" title="You can remove an IPMI configuration from a cluster using CRSCTL if you want to stop using IPMI completely or if IPMI was initially configured by someone other than the user that installed Oracle Clusterware.">Removing IPMI Configuration Using CRSCTL</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD92103"></a><div class="props_rev_3"><a id="GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F" name="GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F"></a><h5 id="CWADD-GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F" class="sect5">IPMI Post-installation Configuration with Oracle Clusterware</h5>
                     <div>
                        <p>.After you install and enable the IPMI driver, configure the IPMI device, and complete the server configuration, you can use the CRSCTL command to complete IPMI configuration. </p>
                        <div class="section">
                           <p>Before you started the installation, you installed and enabled the IPMI driver in the server operating system, and configured the IPMI hardware on each node (IP address mode, admin credentials, and so on), as described in <a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a>. When you install Oracle Clusterware, the installer collects the IPMI administrator user ID and password, and stores them in an Oracle Wallet in node-local storage, in OLR.
                           </p>
                           <p><a id="d13771e5641" class="indexterm-anchor"></a><a id="d13771e5645" class="indexterm-anchor"></a>After you complete the server configuration, complete the following procedure on each cluster node to register IPMI administrators and passwords on the nodes. 
                           </p>
                           <div class="infoboxnote" id="GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F__GUID-1758D9AB-D112-41C2-9924-38DF05F33869">
                              <p class="notep1">Note:</p>
                              <p>If IPMI is configured to obtain its IP address using DHCP, it may be necessary to reset IPMI or restart the node to cause it to obtain an address.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Start Oracle Clusterware, which allows it to obtain the current IP address from IPMI. This confirms the ability of the clusterware to communicate with IPMI, which is necessary at startup.</span><div>
                                 <p>If Oracle Clusterware was running before IPMI was configured, you can shut Oracle Clusterware down and restart it. Alternatively, you can use the IPMI management utility to obtain the IPMI IP address and then use CRSCTL to store the IP address in OLR by running a command similar to the following:</p><pre class="oac_no_warn" dir="ltr">crsctl set css ipmiaddr 192.168.10.45
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Use CRSCTL to store the previously established user ID and password for the resident IPMI in OLR by running the <code class="codeph">crsctl set css ipmiadmin</code> command, and supplying password at the prompt. For example:</span><div><pre class="oac_no_warn" dir="ltr">crsctl set css ipmiadmin <span class="italic">administrator_name</span>
IPMI BMC password: <span class="italic">password</span>
</pre><p>This command validates the supplied credentials and fails if another cluster node cannot access the local IPMI using them.</p>
                                 <p>After you complete hardware and operating system configuration, and register the IPMI administrator on Oracle Clusterware, IPMI-based failure isolation should be fully functional.</p>
                                 <p>Before you start the installation, you install and enable the IPMI driver in the server operating system, and configure the IPMI hardware on each node (IP address mode, admin credentials, and so on), as described in <a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a>. When you install Oracle Clusterware, the installer collects the IPMI administrator user ID and password, and stores them in an Oracle Wallet in node-local storage, in OLR.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="CWADD92104"></a><div class="props_rev_3"><a id="GUID-533164F9-92B1-4AF1-AA20-1497A460C014" name="GUID-533164F9-92B1-4AF1-AA20-1497A460C014"></a><h5 id="CWADD-GUID-533164F9-92B1-4AF1-AA20-1497A460C014" class="sect5">Modifying IPMI Configuration Using CRSCTL</h5>
                     <div>
                        <p>You may need to modify an existing IPMI-based failure isolation configuration to change IPMI passwords, or to configure IPMI for failure isolation in an existing installation. You use CRSCTL with the IPMI configuration tool appropriate to your platform to accomplish this. </p>
                        <div class="section">
                           <p>For example, to change the administrator password for IPMI, you must first modify the IMPI configuration as described in <span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span>, and then use CRSCTL to change the password in OLR.
                           </p>
                           <p>The configuration data needed by Oracle Clusterware for IPMI is kept in an Oracle Wallet in OCR. Because the configuration information is kept in a secure store, it must be written by the Oracle Clusterware installation owner account (the Grid user), so you must log in as that installation user. </p>
                           <p>Use the following procedure to modify an existing IPMI configuration:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Enter the <code class="codeph">crsctl set css ipmiadmin <span class="variable" translate="no">administrator_name</span></code> command. For example, with the user <code class="codeph">IPMIadm</code>:</span><div><pre class="pre codeblock"><code>$ crsctl set css ipmiadmin IPMIadm</code></pre><p>Provide the administrator password. Oracle Clusterware stores the administrator name and password for the local IPMI in OLR.</p>
                                 <p>After storing the new credentials, Oracle Clusterware can retrieve the new credentials and distribute them as required.</p>
                              </div>
                           </li>
                           <li class="stepexpand" id="GUID-533164F9-92B1-4AF1-AA20-1497A460C014__BGBFCCIA"><span>Enter the <code class="codeph">crsctl set css ipmiaddr <span class="variable" translate="no">bmc_ip_address</span></code> command. For example:</span><div><pre class="pre codeblock"><code>$ crsctl set css ipmiaddr 192.0.2.244</code></pre><p>This command stores the new IPMI IP address of the local IPMI in OLR, After storing the IP address, Oracle Clusterware can retrieve the new configuration and distribute it as required.</p>
                              </div>
                           </li>
                           <li class="stepexpand" id="GUID-533164F9-92B1-4AF1-AA20-1497A460C014__BGBBDGCG"><span>Enter the <code class="codeph">crsctl get css ipmiaddr</code> command. For example:</span><div><pre class="pre codeblock"><code>$ crsctl get css ipmiaddr
</code></pre><p>This command retrieves the IP address for the local IPMI from OLR and displays it on the console.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Remove the IPMI configuration information for the local IPMI from OLR and delete the registry entry, as follows:</span><div><pre class="pre codeblock"><code>$ crsctl unset css ipmiconfig</code></pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                              <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-6A4E73C4-E1A0-4D90-B69A-7B2B4DAB66BA" title="You can use the following commands only in an Oracle RAC environment.">Oracle RAC Environment CRSCTL Commands</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92174"></a><div class="props_rev_3"><a id="GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD" name="GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD"></a><h5 id="CWADD-GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD" class="sect5">Removing IPMI Configuration Using CRSCTL</h5>
                     <div>
                        <p>You can remove an IPMI configuration from a cluster using CRSCTL if you want to stop using IPMI completely or if IPMI was initially configured by someone other than the user that installed Oracle Clusterware.</p>
                        <div class="section">
                           <p>If the latter is true, then Oracle Clusterware cannot access the IPMI configuration data and IPMI is not usable by the Oracle Clusterware software, and you must reconfigure IPMI as the user that installed Oracle Clusterware.</p>
                           <p>To completely remove IPMI, perform the following steps. To reconfigure IPMI as the user that installed Oracle Clusterware, perform steps <a href="oracle-clusterware-administration.html#GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD__BGBFEAID">3</a> and <a href="oracle-clusterware-administration.html#GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD__BGBDADCG">4</a>, then repeat steps <a href="oracle-clusterware-administration.html#GUID-533164F9-92B1-4AF1-AA20-1497A460C014__BGBFCCIA">2</a> and <a href="oracle-clusterware-administration.html#GUID-533164F9-92B1-4AF1-AA20-1497A460C014__BGBBDGCG">3</a> in the previous section.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Disable the IPMI driver and eliminate the boot-time installation, as follows:</span><div><pre class="pre codeblock"><code>/sbin/modprobe &#x2013;r</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Disable IPMI-over-LAN for the local IPMI using either <code class="codeph">ipmitool</code> or <code class="codeph">ipmiutil</code>, to prevent access over the LAN or change the IPMI administrator user ID and password.</span></li>
                           <li class="stepexpand" id="GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD__BGBFEAID"><span>Ensure that Oracle Clusterware is running and then use CRSCTL to remove the IPMI configuration data from OLR by running the following command:</span><div><pre class="pre codeblock"><code>$ crsctl unset css ipmiconfig</code></pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD__BGBDADCG"><span>Restart Oracle Clusterware so that it runs without the IPMI configuration by running the following commands as <code class="codeph">root</code>:</span><div><pre class="pre codeblock"><code># crsctl stop crs
# crsctl start crs</code></pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-administration.html#GUID-533164F9-92B1-4AF1-AA20-1497A460C014" title="You may need to modify an existing IPMI-based failure isolation configuration to change IPMI passwords, or to configure IPMI for failure isolation in an existing installation. You use CRSCTL with the IPMI configuration tool appropriate to your platform to accomplish this.">Modifying IPMI Configuration Using CRSCTL</a></li>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD90979"></a><div class="props_rev_3"><a id="GUID-F11A9961-257A-47BD-B644-63023D2CEA22" name="GUID-F11A9961-257A-47BD-B644-63023D2CEA22"></a><h3 id="CWADD-GUID-F11A9961-257A-47BD-B644-63023D2CEA22" class="sect3">Understanding Network Addresses on Manually Configured Networks</h3>
               <div>
                  <p>It is helpful to understand the concepts and requirements for network addresses on manually configured networks. </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-F6217425-BBF4-4989-B943-7A660E03E6BE" title="An Oracle Clusterware configuration requires at least one public network interface and one private network interface.">Understanding Network Address Configuration Requirements</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-494167AF-9BDC-4E61-B6EE-21B95B881272" title="Public network addresses are used to provide services to clients.">Understanding SCAN Addresses and Client Service Connections</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-18CE6E12-C1BD-4C72-A9F8-F5A74F7E75BF" title="You can use valid node checking to specify the nodes and subnets from which the SCAN listener accepts registrations. You can specify the nodes and subnet information using SRVCTL. SRVCTL stores the node and subnet information in the SCAN listener resource profile. The SCAN listener agent reads that information from the resource profile and writes it to the listener.ora file.">SCAN Listeners and Service Registration Restriction With Valid Node Checking</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD92079"></a><div class="props_rev_3"><a id="GUID-F6217425-BBF4-4989-B943-7A660E03E6BE" name="GUID-F6217425-BBF4-4989-B943-7A660E03E6BE"></a><h4 id="CWADD-GUID-F6217425-BBF4-4989-B943-7A660E03E6BE" class="sect4">Understanding Network Address Configuration Requirements</h4>
                  <div>
                     <p>An Oracle Clusterware configuration requires at least one public network interface and one private network interface.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A public network interface connects users and application servers to access data on the database server.</p>
                        </li>
                        <li>
                           <p>A private network interface is for internode communication and used exclusively by Oracle Clusterware.</p>
                        </li>
                     </ul>
                     <p>You can configure a public network interface for either <a href="glossary.html#GUID-DB822A23-A71F-41A0-812A-447C56B64A41"><span class="xrefglossterm">IPv4</span></a>, <a href="glossary.html#GUID-D35BA85D-6AF1-4A65-97CA-473DD92C9E82"><span class="xrefglossterm">IPv6</span></a>, or both types of addresses on a given network. If you use redundant network interfaces (bonded or teamed interfaces), then be aware that Oracle does not support configuring one interface to support IPv4 addresses and the other to support IPv6 addresses. You must configure network interfaces of a redundant interface pair with the same IP protocol.
                     </p>
                     <p>You can configure one or more private network interfaces, using either IPv4 or IPv6 addresses for all the network adapters. You cannot mix IPv4 and IPv6 addresses for any private network interfaces.</p>
                     <div class="infoboxnote" id="GUID-F6217425-BBF4-4989-B943-7A660E03E6BE__GUID-6B4090EA-E430-4338-B14B-37AAB4A6883B">
                        <p class="notep1">Note:</p>You can only use IPv6 for private networks in clusters using Oracle Clusterware 12<span class="italic">c</span> release 2 (12.2), or later.
                     </div>
                     <p>All the nodes in the cluster must use the same IP protocol configuration. Either all the nodes use only IPv4, or all the nodes use only IPv6, or all the nodes use both IPv4 and IPv6. You cannot have some nodes in the cluster configured to support only IPv6 addresses, and other nodes in the cluster configured to support only IPv4 addresses.</p>
                     <p>The VIP agent supports the generation of IPv6 addresses using the Stateless Address Autoconfiguration Protocol (RFC 2462), and advertises these addresses with GNS. Run the <code class="codeph">srvctl config network</code> command to determine if DHCP or stateless address autoconfiguration is being used.
                     </p>
                     <p>This section includes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4">About IPv6 Address Formats</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF">Name Resolution and the Network Resource Address Type</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD92558"></a><div class="props_rev_3"><a id="GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4" name="GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4"></a><h5 id="CWADD-GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4" class="sect5">About IPv6 Address Formats</h5>
                     <div>
                        <p>Each node in an Oracle Grid Infrastructure cluster can support both IPv4 and IPv6 addresses on the same network. The preferred IPv6 address format is as follows, where each x represents a hexadecimal character:</p><pre class="oac_no_warn" dir="ltr">xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx
</pre><p>The IPv6 address format is defined by RFC 2460 and Oracle Grid Infrastructure supports IPv6 addresses, as following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Global and site-local IPv6 addresses as defined by RFC 4193.</p>
                              <div class="infoboxnote" id="GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4__GUID-3F9741A8-C7E5-4EE8-9E9D-2F48A062F373">
                                 <p class="notep1">Note:</p>
                                 <p>Link-local and site-local IPv6 addresses as defined in RFC 1884 <span class="italic">are not</span> supported.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>The leading zeros compressed in each field of the IP address.</p>
                           </li>
                           <li>
                              <p>Empty fields collapsed and represented by a '::' separator. For example, you could write the IPv6 address 2001:0db8:0000:0000:0000:8a2e:0370:7334 as 2001:db8::8a2e:370:7334.</p>
                           </li>
                           <li>
                              <p>The four lower order fields containing 8-bit pieces (standard IPv4 address format). For example 2001:db8:122:344::192.0.2.33.</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD92559"></a><div class="props_rev_3"><a id="GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF" name="GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF"></a><h5 id="CWADD-GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF" class="sect5">Name Resolution and the Network Resource Address Type</h5>
                     <div>
                        <p>You can review the network configuration and control the network address type using the <code class="codeph">srvctl config network</code> (to review the configuration) and <code class="codeph">srvctl modify network -iptype</code> commands, respectively.
                        </p>
                        <p>You can configure how addresses are acquired using the <code class="codeph">srvctl modify network -nettype</code> command. Set the value of the <code class="codeph">-nettype</code> parameter to <code class="codeph">dhcp</code> or <code class="codeph">static</code> to control how IPv4 network addresses are acquired. Alternatively, set the value of the <code class="codeph">-nettype</code> parameter to <code class="codeph">autoconfig</code> or <code class="codeph">static</code> to control how IPv6 addresses are generated.
                        </p>
                        <p>The <code class="codeph">-nettype</code> and <code class="codeph">-iptype</code> parameters are not directly related but you can use <code class="codeph">-nettype dhcp</code> with <code class="codeph">-iptype ipv4</code> and <code class="codeph">-nettype autoconfig</code> with <code class="codeph">-iptype ipv6</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF__GUID-57D83B21-D882-4B1C-B8A2-62B3F343C88C">
                           <p class="notep1">Note:</p>
                           <p>If a network is configured with both IPv4 and IPv6 subnets, then Oracle does not support both subnets having <code class="codeph">-nettype</code> set to <code class="codeph">mixed</code>.
                           </p>
                           <p>Oracle does not support making transitions from IPv4 to IPv6 while <code class="codeph">-nettype</code> is set to <code class="codeph">mixed</code>. You must first finish the transition from <code class="codeph">static</code> to <code class="codeph">dhcp</code> before you add IPv6 into the subnet.
                           </p>
                           <p>Similarly, Oracle does not support starting a transition to IPv4 from IPv6 while <code class="codeph">-nettype</code> is set to <code class="codeph">mixed</code>. You must first finish the transition from <code class="codeph">autoconfig</code> to <code class="codeph">static</code> before you add IPv4 into the subnet.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-administration.html#GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D" title="You can configure a network interface for either IPv4, IPv6, or both types of addresses on a given network.">Network Address Configuration in a Cluster</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD11847"></a><div class="props_rev_3"><a id="GUID-494167AF-9BDC-4E61-B6EE-21B95B881272" name="GUID-494167AF-9BDC-4E61-B6EE-21B95B881272"></a><h4 id="CWADD-GUID-494167AF-9BDC-4E61-B6EE-21B95B881272" class="sect4">Understanding SCAN Addresses and Client Service Connections</h4>
                  <div>
                     <p>Public network addresses are used to provide services to clients.</p>
                     <p>If your clients are connecting to the Single Client Access Name (SCAN) addresses, then you may need to change public and virtual IP addresses as you add or remove nodes from the cluster, but you do not need to update clients with new cluster addresses.</p>
                     <div class="infoboxnote" id="GUID-494167AF-9BDC-4E61-B6EE-21B95B881272__GUID-0D7272D8-60DC-4AC0-B1C2-60C208DEED79">
                        <p class="notep1">Note:</p>
                        <p>You can edit the <code class="codeph">listener.ora</code> file to make modifications to the Oracle Net listener parameters for SCAN and the node listener. For example, you can set TRACE_LEVEL_<code class="codeph"><span class="variable" translate="no">listener_name</span></code>. However, you cannot set protocol address parameters to define listening endpoints, because the listener agent dynamically manages them.
                        </p>
                     </div>
                     <p>SCANs function like a cluster alias. However, SCANs are resolved on any node in the cluster, so unlike a VIP address for a node, clients connecting to the SCAN no longer require updated VIP addresses as nodes are added to or removed from the cluster. Because the SCAN addresses resolve to the cluster, rather than to a node address in the cluster, nodes can be added to or removed from the cluster without affecting the SCAN address configuration.</p>
                     <p>The SCAN is a fully qualified name (host name and domain) that is configured to resolve to all the addresses allocated for the SCAN. The SCAN resolves to all three addresses configured for the SCAN name on the DNS server, or resolves within the cluster in a GNS configuration. SCAN listeners can run on any node in the cluster. SCANs provide location independence for the databases, so that client configuration does not have to depend on which nodes run a particular database.</p>
                     <p>Oracle Database 11<span class="italic">g</span> release 2 (11.2), and later, instances only register with SCAN listeners as remote listeners. Upgraded databases register with SCAN listeners as remote listeners, and also continue to register with all node listeners.
                     </p>
                     <div class="infoboxnote" id="GUID-494167AF-9BDC-4E61-B6EE-21B95B881272__GUID-55685470-8944-4106-8530-0F8E9CB0E1EB">
                        <p class="notep1">Note:</p>
                        <p>Because of the Oracle Clusterware installation requirement that you provide a SCAN name during installation, if you resolved at least one IP address using the server <code class="codeph">/etc/hosts</code> file to bypass the installation requirement but you do not have the infrastructure required for SCAN, then, after the installation, you can ignore the SCAN and connect to the databases in the cluster using VIPs.
                        </p>
                        <p>Oracle <span class="italic">does not</span> support removing the SCAN address.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../netrf/index.html" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92569"></a><div class="props_rev_3"><a id="GUID-18CE6E12-C1BD-4C72-A9F8-F5A74F7E75BF" name="GUID-18CE6E12-C1BD-4C72-A9F8-F5A74F7E75BF"></a><h4 id="CWADD-GUID-18CE6E12-C1BD-4C72-A9F8-F5A74F7E75BF" class="sect4">SCAN Listeners and Service Registration Restriction With Valid Node Checking</h4>
                  <div>
                     <p>You can use valid node checking to specify the nodes and subnets from which the SCAN listener accepts registrations. You can specify the nodes and subnet information using SRVCTL. SRVCTL stores the node and subnet information in the SCAN listener resource profile. The SCAN listener agent reads that information from the resource profile and writes it to the <code class="codeph">listener.ora</code> file.
                     </p>
                     <p>For non-cluster (single-instance) databases, the local listener accepts service registrations only from database instances on the local node. Oracle RAC releases before Oracle RAC 11<span class="italic">g</span> release 2 (11.2) do not use SCAN listeners, and attempt to register their services with the local listener and the listeners defined by the <code class="codeph">REMOTE_LISTENERS</code> initialization parameter. To support service registration for these database instances, the default value of <code class="codeph">valid_node_check_for_registration_<span class="variable" translate="no">alias</span></code> for the local listener in Oracle RAC 12<span class="italic">c</span> is set to the value <code class="codeph">SUBNET</code>, rather than to the local node. To change the valid node checking settings for the node listeners, edit the <code class="codeph">listener.ora</code> file.
                     </p>
                     <p>The SCAN listener is aware of the HTTP protocol so that it can redirect HTTP clients to the appropriate handler, which can reside on different nodes in the cluster than the node on which the SCAN listener resides.</p>
                     <p>SCAN listeners must accept service registration from instances on remote nodes. For SCAN listeners, the value of <code class="codeph">valid_node_check_for_registration_<span class="variable" translate="no">alias</span></code> is set to <code class="codeph">SUBNET</code> in the <code class="codeph">listener.ora</code> file so that the corresponding listener can accept service registrations that originate from the same subnet.
                     </p>
                     <p>You can configure the listeners to accept service registrations from a different subnet. For example, you might want to configure this environment when SCAN listeners share with instances on different clusters, and nodes in those clusters are on a different subnet. Run the <code class="codeph">srvctl modfiy scan_listener -invitednodes -invitedsubnets</code> command to include the nodes in this environment.
                     </p>
                     <p>You must also run the <code class="codeph">srvctl modify nodeapps -remoteservers <span class="variable" translate="no">host</span>:<span class="variable" translate="no">port</span>,...</code> command to connect the Oracle Notification Service networks of this cluster and the cluster with the invited instances.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-C2D37BAB-DA98-49B4-A777-F2B3AA8D2E7A" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></li>
                           <li><a href="../netag/configuring-and-administering-oracle-net-listener.html#NETAG-GUID-C3C40DBA-4282-41E1-9562-4B8B10947C4E" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D758D229-D03F-449B-9850-64C2A7E57631" name="GUID-D758D229-D03F-449B-9850-64C2A7E57631"></a><h3 id="CWADD-GUID-D758D229-D03F-449B-9850-64C2A7E57631" class="sect3">Configuring Shared Single Client Access Names</h3>
               <div>
                  <p>A shared single client access name (SCAN) enables you to share one set of SCAN virtual IPs (VIPs)&nbsp;and listeners on a dedicated cluster with other clusters.</p>
               </div>
               <div class="sect3"><a id="GUID-2A2D4B28-0237-46D0-8243-330D693E8AD3" name="GUID-2A2D4B28-0237-46D0-8243-330D693E8AD3"></a><h4 id="CWADD-GUID-2A2D4B28-0237-46D0-8243-330D693E8AD3" class="sect4">About Configuring Shared Single Client Access Names</h4>
                  <div>
                     <p>You must configure the shared single client access name (SCAN) on both the database server and the database client.</p>
                     <p>The use of a shared SCAN enables multiple clusters to use a single common set of SCAN virtual IP (VIP) addresses to manage user connections, instead of deploying a set of SCAN VIPs per cluster.&nbsp;For example, instead of 10 clusters deploying 3 SCAN VIPs per cluster using a total of 30 IP addresses, with shared SCAN deployments, you only deploy 3 SCAN VIPs for those same 10 clusters, requiring only 3 IP addresses.</p>
                     <p>Be aware the SCAN VIPs (shared or otherwise) are required for Oracle Real Application Cluster (Oracle RAC) database clusters, but not for application member clusters or the domain services cluster.</p>
                     <p>The general procedure for configuring shared SCANs is to use the <code class="codeph">srvctl</code> utility to configure first on the server (that is, the cluster that hosts the shared SCAN), then on the client (the Oracle RAC cluster that will use this shared SCAN). On the server, in addition to the configuration using <code class="codeph">srvctl</code>, you must to set environment variables, create a credential file, and ensure that the Oracle Notification Service (ONS) process that is specific to a SCAN cluster can access its own configuration directory to create and manage the ONS configuration.
                     </p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E" name="GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E"></a><h4 id="CWADD-GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E" class="sect4">Configuring the Use of Shared SCAN</h4>
                  <div>
                     <p>Use SRVCTL to configure shared SCANs on the server that hosts the dedicated cluster, in addition to performing other necessary configuration tasks.</p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the server cluster on which you want to configure the shared SCAN.</span></li>
                        <li class="stepexpand"><span>Create a SCAN listener that is exclusive to this shared SCAN cluster, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl add scan_listener -clientcluster <span class="variable" translate="no">cluster_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Create a new Oracle Notification Service (ONS) resource that is specific to the server cluster.</span><div><pre class="pre codeblock"><code>$ srvctl add ons -clientcluster <span class="variable" translate="no">cluster_name</span></code></pre></div>
                           <div>The <code class="codeph">srvctl add ons</code> command assigns an ID to the SCAN.
                           </div>
                        </li>
                        <li class="stepexpand"><span>Export the SCAN listener to the client cluster, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl export scan_listener -clientcluster <span class="variable" translate="no">cluster_name</span> -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Export the ONS resource to the client cluster, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl export ons -clientcluster <span class="variable" translate="no">cluster_name</span> -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                           <div>
                              <div class="infoboxnote" id="GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E__GUID-76B021B0-1726-4CF8-8769-9B3F1CA2183F">
                                 <p class="notep1">Note:</p>You can use the same credential file name for both the SCAN listener and ONS. SRVCTL creates a credential file that you will use when adding these objects to the client cluster.
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>s</span></li>
                        <li class="stepexpand"><span>Configure shared SCAN on each cluster that will use this service.</span><ol type="a">
                              <li class="substepexpand"><span>Log in to the client cluster on which you want to configure the shared SCAN.</span></li>
                              <li class="substepexpand"><span>Add the SCAN to the client cluster, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl add scan -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Create a SCAN listener that is exclusive to this client cluster, as follows: </span><div><pre class="pre codeblock"><code>$ srvctl add scan_listener -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Create an ONS resource for this cluster, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl add ons -clientdata <span class="variable" translate="no">file_name</span></code></pre><div class="infoboxnote" id="GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E__GUID-6FFA3FE7-5696-4683-9DB4-2FD7BADD088D">
                                       <p class="notep1">Note:</p>For each of the preceding commands, specify the name of the credential file you created in the previous steps.
                                    </div>
                                 </div>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="CWADD92605"></a><div class="props_rev_3"><a id="GUID-4C37D5FD-C68D-4561-BC9F-2183EA166101" name="GUID-4C37D5FD-C68D-4561-BC9F-2183EA166101"></a><h3 id="CWADD-GUID-4C37D5FD-C68D-4561-BC9F-2183EA166101" class="sect3">Changing Network Addresses on Manually Configured Systems</h3>
               <div>
                  <p>You can perform network address maintenance on manually configured systems. </p>
                  <p>This is described in the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A" title="You can use SRVCTL to change a virtual IP address.">Changing the Virtual IP Addresses Using SRVCTL</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-2ED1AAF6-F26F-4A3F-A334-38C8EF6BC42F" title="You can make changes to the Oracle Clusterware private network configuration.">Changing Oracle Clusterware Private Network Configuration</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-8A7E30F0-6D43-46CC-B453-6C8806886052" title="You can use SRVCTL to create a network for a cluster member node, and to add application configuration information.">Creating a Network Using SRVCTL</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D" title="You can configure a network interface for either IPv4, IPv6, or both types of addresses on a given network.">Network Address Configuration in a Cluster</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60" title="When you change from IPv4 static addresses to IPv6 static addresses, you add an IPv6 address and modify the network to briefly accept both IPv4 and IPv6 addresses, before switching to using static IPv6 addresses, only.">Changing Static IPv4 Addresses To Static IPv6 Addresses Using SRVCTL</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-B7A584D6-5279-46CB-BBAD-701CF4309816" title="You change dynamic IPv4 addresses to dynamic IPv6 addresses by the SRVCTL command.">Changing Dynamic IPv4 Addresses To Dynamic IPv6 Addresses Using SRVCTL</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-4406AD31-76D8-4FBA-AA5E-1D60643FB720" title="You can change an IPv4 network to an IPv4 and IPv6 network by adding an IPv6 network to an existing IPv4 network.">Changing an IPv4 Network to an IPv4 and IPv6 Network</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-9434505A-80BA-4B85-A29C-E83C0FBC86D6" title="You use the SRVCTL command to remove an IPv4 address type from a combined IPv4 and IPv6 network.">Transitioning from IPv4 to IPv6 Networks for VIP Addresses Using SRVCTL</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD92080"></a><div class="props_rev_3"><a id="GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A" name="GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A"></a><h4 id="CWADD-GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A" class="sect4">Changing the Virtual IP Addresses Using SRVCTL</h4>
                  <div>
                     <p>You can use SRVCTL to change a virtual IP address. </p>
                     <div class="section">
                        <p>Clients configured to use public VIP addresses for Oracle Database releases before Oracle Database 11<span class="italic">g</span> release 2 (11.2) can continue to use their existing connection addresses. Oracle recommends that you configure clients to use SCANs, but you are not required to use SCANs. When an earlier version of Oracle Database is upgraded, it is registered with the SCAN, and clients can start using the SCAN to connect to that database, or continue to use VIP addresses for connections.
                        </p>
                        <p>If you continue to use VIP addresses for client connections, you can modify the VIP address while Oracle Database and Oracle ASM continue to run. However, you must stop services while you modify the address. When you restart the VIP address, services are also restarted on the node.</p>
                        <p>You cannot use this procedure to change a static public subnet to use DHCP. Only the <code class="codeph">srvctl add network -subnet</code> command creates a DHCP network.
                        </p>
                        <div class="infoboxnote" id="GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A__GUID-77DA9B8E-D5F3-41D8-93D7-304957EE4A67">
                           <p class="notep1">Note:</p>
                           <p>The following instructions describe how to change only a VIP address, and assume that the host name associated with the VIP address does not change. Note that you do not need to update VIP addresses manually if you are using GNS, and VIPs are assigned using DHCP.</p>
                           <p>If you are changing only the VIP address, then update the DNS and the client hosts files. Also, update the server hosts files, if those are used for VIP addresses.</p>
                        </div>
                        <p>Perform the following steps to change a VIP address:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Stop all services running on the node whose VIP address you want to change using the following command syntax, where <code class="codeph"><span class="variable" translate="no">database_name</span></code> is the name of the database, <code class="codeph"><span class="variable" translate="no">service_name_list</span></code> is a list of the services you want to stop, and <code class="codeph"><span class="variable" translate="no">my_node</span></code> is the name of the node whose VIP address you want to change:</span><div><pre class="pre codeblock"><code>srvctl stop service -db <span class="variable" translate="no">database_name</span> -service "<span class="variable" translate="no">service_name_list</span>" -node <span class="variable" translate="no">node_name</span></code></pre><p>The following example specifies the database name (<code class="codeph">grid</code>) using the <code class="codeph">-db</code> option and specifies the services (<code class="codeph">sales,oltp</code>) on the appropriate node (<code class="codeph">mynode</code>).
                              </p><pre class="pre codeblock"><code>$ srvctl stop service -db grid -service "sales,oltp" -node mynode
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Confirm the current IP address for the VIP address by running the <code class="codeph">srvctl config vip</code> command. This command displays the current VIP address bound to one of the network interfaces. The following example displays the configured VIP address for a VIP named <code class="codeph">node03-vip</code>:</span><div><pre class="pre codeblock"><code>$ srvctl config vip -vipname node03-vip
VIP exists: /node03-vip/192.168.2.20/255.255.255.0/eth0
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Stop the VIP resource using the <code class="codeph">srvctl stop vip</code> command:</span><div><pre class="pre codeblock"><code>$ srvctl stop vip -node <span class="variable" translate="no">node_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Verify that the VIP resource is no longer running by running the <code class="codeph">ifconfig -a</code> command on Linux and UNIX systems (or issue the <code class="codeph">ipconfig /all</code> command on Windows systems), and confirm that the interface (in the example it was <code class="codeph">eth0:1</code>) is no longer listed in the output.</span></li>
                        <li class="stepexpand"><span>Make any changes necessary to the <code class="codeph">/etc/hosts</code> files on all nodes on Linux and UNIX systems, or the <code class="codeph">%windir%\system32\drivers\etc\hosts</code> file on Windows systems, and make any necessary DNS changes to associate the new IP address with the old host name.</span></li>
                        <li class="stepexpand"><span>To use a different subnet or network interface card for the default network before you change any VIP resource, you must use the <code class="codeph">srvctl modify network -subnet <span class="variable" translate="no">subnet</span>/<span class="variable" translate="no">netmask</span>/<span class="variable" translate="no">interface</span></code> command as <code class="codeph">root</code> to change the network resource, where <code class="codeph"><span class="variable" translate="no">subnet</span></code> is the new subnet address, <code class="codeph"><span class="variable" translate="no">netmask</span></code> is the new netmask, and <code class="codeph"><span class="variable" translate="no">interface</span></code> is the new interface. After you change the subnet, then you must change each node's VIP to an IP address on the new subnet, as described in the next step.</span></li>
                        <li class="stepexpand"><span>Modify the node applications and provide the new VIP address using the following <code class="codeph">srvctl modify nodeapps</code> syntax:</span><div><pre class="pre codeblock"><code>$ srvctl modify nodeapps -node <span class="variable" translate="no">node_name</span> -address <span class="variable" translate="no">new_vip_address</span></code></pre><p>The command includes the following flags and values:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">-n <span class="variable" translate="no">node_name</span></code> is the node name
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">-A <span class="variable" translate="no">new_vip_address</span></code> is the node-level VIP address: <code class="codeph"><span class="variable" translate="no">name</span>|<span class="variable" translate="no">ip</span>/<span class="variable" translate="no">netmask</span>/[<span class="variable" translate="no">if1</span>[|<span class="variable" translate="no">if2</span>|...]]</code></p>
                                    <p>For example, run the following command as the <code class="codeph">root</code> user:
                                    </p><pre class="pre codeblock"><code># srvctl modify nodeapps -node mynode -address 192.168.2.125/255.255.255.0/eth0</code></pre><p>Attempting to run this command as the installation owner account may result in an error. For example, if the installation owner is <code class="codeph">oracle</code>, then you may see the error <code class="codeph">PRCN-2018: Current user oracle is not a privileged user</code>. To avoid the error, run the command as the <code class="codeph">root</code> or system administrator account.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start the node VIP by running the <code class="codeph">srvctl start vip</code> command:</span><div><pre class="pre codeblock"><code>$ srvctl start vip -node <span class="variable" translate="no">node_name</span></code></pre><p>The following command example starts the VIP on the node named <code class="codeph">mynode</code>:
                              </p><pre class="pre codeblock"><code>$ srvctl start vip -node mynode</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Repeat the steps for each node in the cluster. </span><div>
                              <p>Because the SRVCTL utility is a clusterwide management tool, you can accomplish these tasks for any specific node from any node in the cluster, without logging in to each of the cluster nodes.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the following command to verify node connectivity between all of the nodes for which your cluster is configured. This command discovers all of the network interfaces available on the cluster nodes and verifies the connectivity between all of the nodes by way of the discovered interfaces. This command also lists all of the interfaces available on the nodes which are suitable for use as VIP addresses. </span><div><pre class="pre codeblock"><code>$ cluvfy comp nodecon -n all -verbose</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-E9B08A79-CE87-47ED-8FD8-7EAF421CCD88" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD90980"></a><div class="props_rev_3"><a id="GUID-2ED1AAF6-F26F-4A3F-A334-38C8EF6BC42F" name="GUID-2ED1AAF6-F26F-4A3F-A334-38C8EF6BC42F"></a><h4 id="CWADD-GUID-2ED1AAF6-F26F-4A3F-A334-38C8EF6BC42F" class="sect4">Changing Oracle Clusterware Private Network Configuration</h4>
                  <div>
                     <p>You can make changes to the Oracle Clusterware private network configuration.</p>
                     <p>This section describes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-BAB8261E-5456-4743-96F5-A346D8107307" title="Oracle Clusterware requires that each node is connected through a private network (in addition to the public network). The private network connection is referred to as the cluster interconnect.">About Private Networks and Network Interfaces</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-478452E9-5A0B-4B36-BF82-CDF585007D14" title="You can define multiple interfaces for Redundant Interconnect Usage by classifying the role of interfaces as private either during installation or after installation using the oifcfg setif command.">Redundant Interconnect Usage</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-B1E152E6-2C4D-4F0A-90D4-207146C2B317" title="The consequences of changing interface names depend on which name you are changing, and whether you are also changing the IP address.">Consequences of Changing Interface Names Using OIFCFG</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073" title="You can change a network interface and its associated subnet address by using the OIFCFG command..">Changing a Network Interface</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD91499"></a><a id="CWADD92112"></a><div class="props_rev_3"><a id="GUID-BAB8261E-5456-4743-96F5-A346D8107307" name="GUID-BAB8261E-5456-4743-96F5-A346D8107307"></a><h5 id="CWADD-GUID-BAB8261E-5456-4743-96F5-A346D8107307" class="sect5">About Private Networks and Network Interfaces</h5>
                     <div>
                        <p>Oracle Clusterware requires that each node is connected through a private network (in addition to the public network). The private network connection is referred to as the cluster interconnect.</p>
                        <p><a href="oracle-clusterware-administration.html#GUID-BAB8261E-5456-4743-96F5-A346D8107307__CHDJJEJH" title="This table provides information about storage of the network adapter, the private network IP address, and the private host name.">Table 2-1</a> describes how the network interface card and the private IP address are stored.
                        </p>
                        <p>Oracle only supports clusters in which all of the nodes use the same network interface connected to the same subnet (defined as a global interface with the <code class="codeph">oifcfg</code> command). You cannot use different network interfaces for each node (node-specific interfaces).
                        </p>
                        <div class="tblformal" id="GUID-BAB8261E-5456-4743-96F5-A346D8107307__CHDJJEJH">
                           <p class="titleintable">Table 2-1 Storage for the Network Interface, Private IP Address, and Private Host Name</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Storage for the Network Interface, Private IP Address, and Private Host Name" summary="This table provides information about storage of the network adapter, the private network IP address, and the private host name." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d13771e8467">Entity</th>
                                    <th align="left" valign="bottom" id="d13771e8470">Stored In...</th>
                                    <th align="left" valign="bottom" id="d13771e8473">Comments</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d13771e8478" headers="d13771e8467 ">
                                       <p>Network interface name</p>
                                    </td>
                                    <td align="left" valign="top" headers="d13771e8478 d13771e8470 ">
                                       <p>Operating system</p>
                                       <p>For example: <code class="codeph">eth1</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d13771e8478 d13771e8473 ">
                                       <p>You can use wildcards when specifying network interface names.</p>
                                       <p>For example: <code class="codeph">eth*</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d13771e8496" headers="d13771e8467 ">
                                       <p>Private network Interfaces</p>
                                    </td>
                                    <td align="left" valign="top" headers="d13771e8496 d13771e8470 ">
                                       <p>Oracle Clusterware, in the Grid Plug and Play (GPnP) Profile </p>
                                    </td>
                                    <td align="left" valign="top" headers="d13771e8496 d13771e8473 ">
                                       <p>Configure an interface for use as a private interface during installation by marking the interface as <span class="bold">Private</span>, or use the <code class="codeph">oifcfg setif</code> command to designate an interface as a private interface.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="oracle-interface-configuration-tool-oifcfg-command-reference.html#GUID-518BD051-E9F1-4B62-B86B-02A90C252580" title="Use these commands to define and manage network interfaces.">Oracle Interface Configuration Tool (OIFCFG) Command Reference</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92358"></a><div class="props_rev_3"><a id="GUID-478452E9-5A0B-4B36-BF82-CDF585007D14" name="GUID-478452E9-5A0B-4B36-BF82-CDF585007D14"></a><h5 id="CWADD-GUID-478452E9-5A0B-4B36-BF82-CDF585007D14" class="sect5">Redundant Interconnect Usage</h5>
                     <div>
                        <p>You can define multiple interfaces for Redundant Interconnect Usage by classifying the role of interfaces as private either during installation or after installation using the <code class="codeph">oifcfg setif</code> command.
                        </p>
                        <p>When you do, Oracle Clusterware creates from one to four (depending on the number of interfaces you define) highly available IP (HAIP) addresses, which Oracle Database and Oracle ASM instances use to ensure highly available and load balanced communications.</p>
                        <p>The Oracle software (including Oracle RAC, Oracle ASM, and Oracle ACFS, all 11<span class="italic">g</span> release 2 (11.2.0.2), or later), by default, uses the HAIP address of the interfaces designated with the private role as the HAIP address for all of its traffic, enabling load balancing across the provided set of cluster interconnect interfaces. If one of the defined cluster interconnect interfaces fails or becomes non-communicative, then Oracle Clusterware transparently moves the corresponding HAIP address to one of the remaining functional interfaces.
                        </p>
                        <p>For example, after installation, if you add a new interface to a server named <code class="codeph">eth3</code> with the subnet number 172.16.2.0, then use the following command to make this interface available to Oracle Clusterware for use as a private interface:
                        </p><pre class="pre codeblock"><code>$ oifcfg setif -global eth3/172.16.2.0:cluster_interconnect</code></pre><p>While Oracle Clusterware brings up a HAIP address on <code class="codeph">eth3</code> of 169.254.*.* (which is the reserved subnet for HAIP), and the database, Oracle ASM, and Oracle ACFS use that address for communication, Oracle Clusterware also uses the 172.16.2.0 address for its own communication.
                        </p>
                        <div class="infoboxnote" id="GUID-478452E9-5A0B-4B36-BF82-CDF585007D14__GUID-B46FC696-23F5-44BD-A0A8-1F1CA0C4229E">
                           <p class="notep1">Caution:</p>
                           <p>Do not use OIFCFG to classify HAIP subnets (169.264.*.*). You can use OIFCFG to record the interface name, subnet, and type (public, cluster interconnect, or Oracle ASM) for Oracle Clusterware. However, you cannot use OIFCFG to modify the actual IP address for each interface.</p>
                        </div>
                        <div class="infoboxnote" id="GUID-478452E9-5A0B-4B36-BF82-CDF585007D14__GUID-F29BAD2C-072E-48CF-8F00-775E6C71B37C">
                           <p class="notep1">Note:</p>
                           <p>Oracle Clusterware uses at most four interfaces at any given point, regardless of the number of interfaces defined. If one of the interfaces fails, then the HAIP address moves to another one of the configured interfaces in the defined set.</p>
                           <p>When there is only a single HAIP address and multiple interfaces from which to select, the interface to which the HAIP address moves is no longer the original interface upon which it was configured. Oracle Clusterware selects the interface with the <span class="italic">lowest</span> numeric subnet to which to add the HAIP address.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure Installation and Upgrade Guide</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92113"></a><div class="props_rev_3"><a id="GUID-B1E152E6-2C4D-4F0A-90D4-207146C2B317" name="GUID-B1E152E6-2C4D-4F0A-90D4-207146C2B317"></a><h5 id="CWADD-GUID-B1E152E6-2C4D-4F0A-90D4-207146C2B317" class="sect5">Consequences of Changing Interface Names Using OIFCFG</h5>
                     <div>
                        <p>The consequences of changing interface names depend on which name you are changing, and whether you are also changing the IP address.</p>
                        <p>In cases where you are only changing the interface names, the consequences are minor. If you change the name for the public interface that is stored in OCR, then you also must modify the node applications for the cluster. Therefore, you must stop the node applications for this change to take effect.</p>
                     </div>
                  </div><a id="CWADD92114"></a><div class="props_rev_3"><a id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073" name="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073"></a><h5 id="CWADD-GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073" class="sect5">Changing a Network Interface</h5>
                     <div>
                        <p>You can change a network interface and its associated subnet address by using the OIFCFG command..</p>
                        <div class="section">
                           <p>This procedure changes the network interface and IP address on each node in the cluster used previously by Oracle Clusterware and Oracle Database.</p>
                           <div class="infoboxnote" id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073__GUID-BF66973B-137A-4703-A0A5-BC26E669240B">
                              <p class="notep1">Caution:</p>
                              <p>The interface that the Oracle RAC (RDBMS) interconnect uses must be the same interface that Oracle Clusterware uses with the host name. Do not configure the private interconnect for Oracle RAC on a separate interface that is not monitored by Oracle Clusterware.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Ensure that Oracle Clusterware is running on all of the cluster nodes by running the following command:</span><div><pre class="pre codeblock"><code>$ olsnodes -s</code></pre><p>The command returns output similar to the following, showing that Oracle Clusterware is running on all of the nodes in the cluster:</p><pre class="pre codeblock"><code>./olsnodes -s
myclustera Active
myclusterc Active
myclusterb Active</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Ensure that the replacement interface is configured and operational in the operating system on all of the nodes. Use the <code class="codeph">ifconfig</code> command (or <code class="codeph">ipconfig</code> on Windows) for your platform. For example, on Linux, use:</span><div><pre class="pre codeblock"><code>$ /sbin/ifconfig</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Add the new interface to the cluster as follows, providing the name of the new interface and the subnet address, using the following command:</span><div><pre class="pre codeblock"><code>$ oifcfg setif -global <span class="variable" translate="no">if_name</span>/<span class="variable" translate="no">subnet</span>:cluster_interconnect</code></pre><p>You can use wildcards with the interface name. For example, <code class="codeph">oifcfg setif -global "eth*/192.168.0.0:cluster_interconnect</code> is valid syntax. However, be careful to avoid ambiguity with other addresses or masks used with other cluster interfaces. If you use wildcards, then you see a warning similar to the following:
                                 </p><pre class="pre codeblock"><code>eth*/192.168.0.0 global cluster_interconnect
PRIF-29: Warning: wildcard in network parameters can cause mismatch
among GPnP profile, OCR, and system</code></pre><div class="infoboxnote" id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073__GUID-3EDBD708-59EB-413B-8FFE-9C4F52C79458">
                                    <p class="notep1">Note:</p>
                                    <p>Legacy network configuration does not support wildcards; thus wildcards are resolved using current node configuration at the time of the update.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If you change the Oracle ASM network, then update the Oracle ASM listener, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl update listener -listener <span class="variable" translate="no">listener_name</span> -asm -remove -force
$ srvctl add listener -listener <span class="variable" translate="no">listener_name</span> -asmlistener -subnet <span class="variable" translate="no">subnet</span></code></pre></div>
                           </li>
                           <li class="stepexpand"><span>After the previous step completes, you can remove the former subnet, as follows, by providing the name and subnet address of the former interface:</span><div><pre class="pre codeblock"><code>oifcfg delif -global <span class="variable" translate="no">if_name</span>/<span class="variable" translate="no">subnet</span></code></pre><p>For example:</p><pre class="pre codeblock"><code>$ oifcfg delif -global eth1/10.10.0.0</code></pre><div class="infoboxnote" id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073__GUID-831ACA36-DC38-4B93-B79A-4C106A8F6E53">
                                    <p class="notep1">Caution:</p>
                                    <p>This step should be performed only after a replacement interface is committed into the Grid Plug and Play configuration. Simple deletion of cluster interfaces without providing a valid replacement can result in invalid cluster configuration.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Verify the current configuration using the following command:</span><div><pre class="pre codeblock"><code>oifcfg getif</code></pre><p>For example:</p><pre class="pre codeblock"><code>$ oifcfg getif
eth2 10.220.52.0 global cluster_interconnect
eth0 10.220.16.0 global public</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>If you change the private network, then stop Oracle Clusterware on all nodes by running the following command as <code class="codeph">root</code> on each node:</span><div><pre class="pre codeblock"><code># crsctl stop crs</code></pre><div class="infoboxnote" id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073__GUID-9FE09085-FE58-4A4F-A785-70DC1E3600BD">
                                    <p class="notep1">Note:</p>
                                    <p>If you configured HAIP on eth0 and eth1, and you want to replace eth1 with eth3, then you do not have to stop Oracle Clusterware. If, however, you want to add another set of interfaces, such as eth2 and eth3 to your HAIP configuration, which you already configured on eth0 and eth1, then you must stop Oracle Clusterware.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>When Oracle Clusterware stops, you can deconfigure the deleted network interface in the operating system using the <code class="codeph">ifconfig</code> command. For example:</span><div><pre class="pre codeblock"><code>$ ifconfig down</code></pre><p>At this point, the IP address from network interfaces for the old subnet is deconfigured from Oracle Clusterware. This command does not affect the configuration of the IP address on the operating system.</p>
                                 <p>You must update the operating system configuration changes, because changes made using <code class="codeph">ifconfig</code> are not persistent.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Restart Oracle Clusterware by running the following command on each node in the cluster as the <code class="codeph">root</code> user:</span><div><pre class="pre codeblock"><code># crsctl start crs</code></pre><p>The changes take effect when Oracle Clusterware restarts.</p>
                                 <p>If you use the <code class="codeph">CLUSTER_INTERCONNECTS</code> initialization parameter, then you must update it to reflect the changes.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="oracle-interface-configuration-tool-oifcfg-command-reference.html#GUID-518BD051-E9F1-4B62-B86B-02A90C252580" title="Use these commands to define and manage network interfaces.">Oracle Interface Configuration Tool (OIFCFG) Command Reference</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD92608"></a><div class="props_rev_3"><a id="GUID-8A7E30F0-6D43-46CC-B453-6C8806886052" name="GUID-8A7E30F0-6D43-46CC-B453-6C8806886052"></a><h4 id="CWADD-GUID-8A7E30F0-6D43-46CC-B453-6C8806886052" class="sect4">Creating a Network Using SRVCTL</h4>
                  <div>
                     <p>You can use SRVCTL to create a network for a cluster member node, and to add application configuration information.</p>
                     <div class="section">
                        <p>Create a network for a cluster member node, as follows:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in as <code class="codeph">root</code>.</span></li>
                        <li class="stepexpand"><span>Add a node application to the node, using the following syntax, where:</span><div><pre class="pre codeblock"><code>srvctl add nodeapps -node <span class="variable" translate="no">node_name</span> -address {<span class="variable" translate="no">vip</span> |
   <span class="variable" translate="no">addr</span>}/<span class="variable" translate="no">netmask</span>[/<span class="variable" translate="no">if1</span>[|<span class="variable" translate="no">if2</span>|...]] [-pingtarget "<span class="variable" translate="no">ping_target_list</span>"]</code></pre><p>In the preceding syntax:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">node_name</span></code> is the name of the node
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">vip</span></code> is the VIP name or <code class="codeph"><span class="variable" translate="no">addr</span></code> is the IP address
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">netmask</span></code> is the netmask
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">if1</span></code><code class="codeph">[|</code><code class="codeph"><span class="variable" translate="no">if2</span></code><code class="codeph">|...]</code> is a pipe (<code class="codeph">|</code>)-delimited list of interfaces bonded for use by the application
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">ping_target_list</span></code> is a comma-delimited list of IP addresses or host names to ping
                                    </p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-8A7E30F0-6D43-46CC-B453-6C8806886052__GUID-50035646-4ADF-47CE-8EE0-66547748D526">
                                 <p class="notep1">Note:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Use the <code class="codeph">-pingtarget</code> parameter when link status monitoring does not work as it does in a virtual machine environment.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Enter the <code class="codeph">srvctl add nodeapps -help</code> command to review other syntax options.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              <p>In the following example of using <code class="codeph">srvctl add nodeapps</code> to configure an IPv4 node application, the node name is node1, the netmask is 255.255.252.0, and the interface is eth0:
                              </p><pre class="pre codeblock"><code># srvctl add nodeapps -node node1 -address node1-vip.mycluster.example.com/255.255.252.0/eth0</code></pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-4247BD84-5893-473A-8FF6-AA7418C0FFC9" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92643"></a><div class="props_rev_3"><a id="GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D" name="GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D"></a><h4 id="CWADD-GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D" class="sect4">Network Address Configuration in a Cluster</h4>
                  <div>
                     <p>You can configure a network interface for either IPv4, IPv6, or both types of addresses on a given network.</p>
                     <p>If you configure redundant network interfaces using a third-party technology, then Oracle does not support configuring one interface to support IPv4 addresses and the other to support IPv6 addresses. You must configure network interfaces of a redundant interface pair with the same IP address type. If you use the Oracle Clusterware Redundant Interconnect feature, then you must use IPv4 addresses for the interfaces.</p>
                     <p>All the nodes in the cluster must use the same IP protocol configuration. Either all the nodes use only IPv4, or all the nodes use only IPv6, or all the nodes use both IPv4 and IPv6. You cannot have some nodes in the cluster configured to support only IPv6 addresses, and other nodes in the cluster configured to support only IPv4 addresses.</p>
                     <p>The local listener listens on endpoints based on the address types of the subnets configured for the network resource. Possible types are IPV4, IPV6, or both.</p>
                  </div>
               </div><a id="CWADD92609"></a><div class="props_rev_3"><a id="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60" name="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60"></a><h4 id="CWADD-GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60" class="sect4">Changing Static IPv4 Addresses To Static IPv6 Addresses Using SRVCTL</h4>
                  <div>
                     <p>When you change from IPv4 static addresses to IPv6 static addresses, you add an IPv6 address and modify the network to briefly accept both IPv4 and IPv6 addresses, before switching to using static IPv6 addresses, only.</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__GUID-84FB27FA-38AC-4490-940D-43EC95719152">
                           <p class="notep1">Note:</p>
                           <p>If the IPv4 network is in mixed mode with both static and dynamic addresses, then you cannot perform this procedure. You must first transition all addresses to static.</p>
                        </div>
                        <p>To change a static IPv4 address to a static IPv6 address:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand" id="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__BAJEGHJF"><span>Add an IPv6 subnet using the following command as <code class="codeph">root</code> once for the entire network:</span><div><pre class="pre codeblock"><code># srvctl modify network &#x2013;subnet <span class="variable" translate="no">ipv6_subnet</span>/<span class="variable" translate="no">prefix_length</span></code></pre><p>In the preceding syntax <code class="codeph"><span class="variable" translate="no">ipv6_subnet</span>/<span class="variable" translate="no">prefix_length</span></code> is the subnet of the IPv6 address to which you are changing along with the prefix length, such as 3001::/64.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add an IPv6 VIP using the following command as <code class="codeph">root</code> once on each node:</span><div><pre class="pre codeblock"><code># srvctl modify vip -node <span class="variable" translate="no">node_name</span> -netnum <span class="variable" translate="no">network_number</span> -address <span class="variable" translate="no">vip_name</span>/<span class="variable" translate="no">netmask</span></code></pre><p>In the preceding syntax:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">node_name</span></code> is the name of the node
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">network_number</span></code> is the number of the network
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">vip_name</span>/<span class="variable" translate="no">netmask</span></code> is the name of a local VIP that resolves to both IPv4 and IPv6 addresses
                                    </p>
                                    <p>The IPv4 netmask or IPv6 prefix length that follows the VIP name must satisfy two requirements:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>If you specify a netmask in IPv4 format (such as 255.255.255.0), then the VIP name resolves to IPv4 addresses (but can also resolve to IPv6 addresses). Similarly, if you specify an IPv6 prefix length (such as 64), then the VIP name resolves to IPv6 addresses (but can also resolve to IPv4 addresses).</p>
                                       </li>
                                       <li>
                                          <p>If you specify an IPv4 netmask, then it should match the netmask of the registered IPv4 network subnet number, regardless of whether the <code class="codeph">-iptype</code> of the network is IPv6. Similarly, if you specify an IPv6 prefix length, then it must match the prefix length of the registered IPv6 network subnet number, regardless of whether the <code class="codeph">-iptype</code> of the network is IPv4.
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add the IPv6 network resource to OCR using the following command:</span><div><pre class="pre codeblock"><code>$ oifcfg setif -global <span class="variable" translate="no">if_name</span>/<span class="variable" translate="no">subnet</span>:public</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Update the SCAN in DNS to have as many IPv6 addresses as there are IPv4 addresses. Add IPv6 addresses to the SCAN VIPs using the following command as <code class="codeph">root</code> once for the entire network:</span><div><pre class="pre codeblock"><code># srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span></code></pre><p><code class="codeph"><span class="variable" translate="no">scan_name</span></code> is the name of a SCAN that resolves to both IPv4 and IPv6 addresses.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__BAJHJEIE"><span>Convert the network IP type from IPv4 to both IPv4 and IPv6 using the following command as <code class="codeph">root</code> once for the entire network:</span><div><pre class="pre codeblock"><code>srvctl modify network -netnum <span class="variable" translate="no">network_number</span> -iptype both</code></pre><p>This command brings up the IPv6 static addresses.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Change all clients served by the cluster from IPv4 networks and addresses to IPv6 networks and addresses.</span></li>
                        <li class="stepexpand"><span>Transition the network from using both protocols to using only IPv6 using the following command:</span><div><pre class="pre codeblock"><code># srvctl modify network -iptype ipv6</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Modify the VIP using a VIP name that resolves to IPv6 by running the following command as <code class="codeph">root</code>:</span><div><pre class="pre codeblock"><code># srvctl modify vip -node <span class="variable" translate="no">node_name</span> -address <span class="variable" translate="no">vip_name</span> -netnum <span class="variable" translate="no">network_number</span>
</code></pre><p>Do this once for each node.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Modify the SCAN using a SCAN name that resolves to IPv6 by running the following command:</span><div><pre class="pre codeblock"><code># srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span>
</code></pre><p>Do this once for the entire cluster.</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-C2D37BAB-DA98-49B4-A777-F2B3AA8D2E7A" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></li>
                           <li><a href="oracle-interface-configuration-tool-oifcfg-command-reference.html#GUID-01566113-CEAE-445D-9145-377849530DBE">OIFCFG Command Format</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92644"></a><div class="props_rev_3"><a id="GUID-B7A584D6-5279-46CB-BBAD-701CF4309816" name="GUID-B7A584D6-5279-46CB-BBAD-701CF4309816"></a><h4 id="CWADD-GUID-B7A584D6-5279-46CB-BBAD-701CF4309816" class="sect4">Changing Dynamic IPv4 Addresses To Dynamic IPv6 Addresses Using SRVCTL</h4>
                  <div>
                     <p>You change dynamic IPv4 addresses to dynamic IPv6 addresses by the SRVCTL command.</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-B7A584D6-5279-46CB-BBAD-701CF4309816__GUID-850F8D13-DB32-4E7E-A31A-B36453366BCB">
                           <p class="notep1">Note:</p>
                           <p>If the IPv4 network is in mixed mode with both static and dynamic addresses, then you cannot perform this procedure. You must first transition all addresses to dynamic.</p>
                        </div>
                        <p>To change dynamic IPv4 addresses to dynamic IPv6 addresses:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Add an IPv6 subnet using the <code class="codeph">srvctl modify network</code> command.</span><div>
                              <p>To add the IPv6 subnet, log in as <code class="codeph">root</code> and use the following command syntax:
                              </p><pre class="pre codeblock"><code># srvctl modify network -netnum <span class="variable" translate="no">network_number</span> &#x2013;subnet <span class="variable" translate="no">ipv6_subnet</span>/
  <span class="variable" translate="no">ipv6_prefix_length</span>[/<span class="variable" translate="no">interface</span>] -nettype autoconfig</code></pre><p>In the preceding syntax:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">network_number</span></code> is the number of the network
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">ipv6_subnet</span></code> is the subnet of the IPv6 addresses to which you are changing (for example, 2001:db8:122:344:c0:2:2100::)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">ipv6_prefix_length</span></code> is the prefix specifying the IPv6 network addresses (for example, 64)
                                    </p>
                                 </li>
                              </ul>
                              <p>For example, the following command modifies network <code class="codeph">3</code> by adding an IPv6 subnet, 2001:db8:122:344:c0:2:2100::, and the prefix length 64:
                              </p><pre class="pre codeblock"><code># srvctl modify network -netnum 3 -subnet 2001:db8:122:344:c0:2:2100::/64
  -nettype autoconfig</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Add the IPv6 network resource to OCR using the following command:</span><div><pre class="pre codeblock"><code>$ oifcfg setif -global <span class="variable" translate="no">if_name</span>/<span class="variable" translate="no">subnet</span>:public</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Start the IPv6 dynamic addresses, as follows:</span><div><pre class="pre codeblock"><code># srvctl modify network -netnum <span class="variable" translate="no">network_number</span> -iptype both</code></pre><p>For example, on network number 3:</p><pre class="pre codeblock"><code># srvctl modify network -netnum 3 -iptype both</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Change all clients served by the cluster from IPv4 networks and addresses to IPv6 networks and addresses.</span><div>
                              <p>At this point, the SCAN in the GNS-delegated domain <code class="codeph"><span class="variable" translate="no">scan_name</span>.<span class="variable" translate="no">gns_domain</span></code> will resolve to three IPv4 and three IPv6 addresses.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Turn off the IPv4 part of the dynamic addresses on the cluster using the following command:</span><div><pre class="pre codeblock"><code># srvctl modify network -iptype ipv6</code></pre><p>After you run the preceding command, the SCAN (<code class="codeph"><span class="variable" translate="no">scan_name</span>.<span class="variable" translate="no">gns_domain</span></code>) will resolve to only three IPv6 addresses.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-interface-configuration-tool-oifcfg-command-reference.html#GUID-01566113-CEAE-445D-9145-377849530DBE">OIFCFG Command Format</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92645"></a><div class="props_rev_3"><a id="GUID-4406AD31-76D8-4FBA-AA5E-1D60643FB720" name="GUID-4406AD31-76D8-4FBA-AA5E-1D60643FB720"></a><h4 id="CWADD-GUID-4406AD31-76D8-4FBA-AA5E-1D60643FB720" class="sect4">Changing an IPv4 Network to an IPv4 and IPv6 Network</h4>
                  <div>
                     <p>You can change an IPv4 network to an IPv4 and IPv6 network by adding an IPv6 network to an existing IPv4 network.</p>
                     <div class="section">
                        <p>This process is described in steps <a href="oracle-clusterware-administration.html#GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__BAJEGHJF">1</a> through <a href="oracle-clusterware-administration.html#GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__BAJHJEIE">5</a> of the procedure documented in <span class="q">"<a href="oracle-clusterware-administration.html#GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60" title="When you change from IPv4 static addresses to IPv6 static addresses, you add an IPv6 address and modify the network to briefly accept both IPv4 and IPv6 addresses, before switching to using static IPv6 addresses, only.">Changing Static IPv4 Addresses To Static IPv6 Addresses Using SRVCTL</a>"</span>.
                        </p>
                        <p>After you complete those steps, log in as the Grid user, and run the following command:</p><pre class="pre codeblock"><code>$ srvctl status scan</code></pre><p>Review the output to confirm the changes to the SCAN VIPs.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD92646"></a><div class="props_rev_3"><a id="GUID-9434505A-80BA-4B85-A29C-E83C0FBC86D6" name="GUID-9434505A-80BA-4B85-A29C-E83C0FBC86D6"></a><h4 id="CWADD-GUID-9434505A-80BA-4B85-A29C-E83C0FBC86D6" class="sect4">Transitioning from IPv4 to IPv6 Networks for VIP Addresses Using SRVCTL</h4>
                  <div>
                     <p>You use the SRVCTL command to remove an IPv4 address type from a combined IPv4 and IPv6 network. </p>
                     <div class="section">
                        <p>Enter the following command:</p><pre class="oac_no_warn" dir="ltr"># srvctl modify network -iptype ipv6
</pre><p>This command starts the removal process of IPv4 addresses configured for the cluster.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-68578D33-C68A-4A52-A160-7BA0BF4D510B" name="GUID-68578D33-C68A-4A52-A160-7BA0BF4D510B"></a><h3 id="CWADD-GUID-68578D33-C68A-4A52-A160-7BA0BF4D510B" class="sect3">Cross-Cluster Dependency Proxies</h3>
               <div>
                  <p>Cross-cluster dependency proxies are lightweight, fault-tolerant proxy resources on Member Clusters for resources running on a Domain Services Cluster.</p>
                  <p>Member Clusters reduce the overhead of having infrastructure resources and it is important to be able to effectively monitor the state of the shared infrastructure resources, such as Oracle Automatic Storage Management (Oracle ASM), on a Domain Services Cluster, so that resources on Member Clusters can properly adjust their states.</p>
                  <p>Cross-cluster dependency proxies provide this functionality for Domain Services Cluster resources, specifically, and, more generally, to reflect the state of resources running on one cluster, in other clusters. Cross-cluster dependency proxies are configured, by default, on Domain Services Clusters.</p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
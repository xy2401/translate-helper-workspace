<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="These topics discuss performance and scalability issues relating to Oracle Database Advanced Queuing (AQ).">
      <meta name="description" content="These topics discuss performance and scalability issues relating to Oracle Database Advanced Queuing (AQ).">
      <title>Oracle Database Advanced Queuing Performance and Scalability</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Queuing User's Guide ">
      <meta property="og:description" content="These topics discuss performance and scalability issues relating to Oracle Database Advanced Queuing (AQ).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Queuing User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96511-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-aq.html" title="Previous" type="text/html">
      <link rel="next" href="aq-internet-access.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Database Advanced Queuing">
    <meta name="dcterms.isVersionOf" content="ADQUE">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-aq.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="aq-internet-access.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Queuing User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Database Advanced Queuing Performance and Scalability</li>
            </ol>
            <a id="GUID-98E14B4A-D09D-4861-AF4C-2321855CCA63" name="GUID-98E14B4A-D09D-4861-AF4C-2321855CCA63"></a><a id="ADQUE0500"></a>
            
            <h2 id="ADQUE-GUID-98E14B4A-D09D-4861-AF4C-2321855CCA63" class="sect2"><span class="enumeration_chapter">5 </span> Oracle Database Advanced Queuing Performance and Scalability
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>These topics discuss performance and scalability issues relating to Oracle Database Advanced Queuing (AQ).</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="aq-performance-scalability.html#GUID-30265296-1110-47C0-B949-D22520D04197" title="An application can decide the way messages are sharded in the sharded queue. In such cases, the application explicitly specifies to enqueue a message in a specific shard.">Sharded Queues</a></p>
                  </li>
                  <li>
                     <p><a href="aq-performance-scalability.html#GUID-9951456C-F148-4B01-A3CD-6FD73C1637F4" title="This section includes the following topics:">Non-Sharded Queues</a></p>
                  </li>
                  <li>
                     <p><a href="aq-performance-scalability.html#GUID-F420D721-713E-42C9-971F-89B967B7E5E6" title="Oracle provides these views to monitor system performance and troubleshooting.">Performance Views</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE3649"></a><div class="props_rev_3"><a id="GUID-30265296-1110-47C0-B949-D22520D04197" name="GUID-30265296-1110-47C0-B949-D22520D04197"></a><h3 id="ADQUE-GUID-30265296-1110-47C0-B949-D22520D04197" class="sect3"><span class="enumeration_section">5.1 </span>Sharded Queues
               </h3>
               <div>
                  <p>A <a href="glossary.html#GUID-2FB637EC-4964-4E48-A71A-3C4F27606A0B"><span class="xrefglossterm">sharded queue</span></a> increases enqueue-dequeue throughput, especially across Oracle RAC instances,  because messages from different enqueue sessions are allowed to be dequeued in parallel. Each shard of the queue is ordered based on enqueue time within a session and ordering across shards is best-effort. Sharded queues automatically manage table partitions so that enqueuers and dequeuers do not contend among themselves. In addition, sharded queues use an in-memory message cache to optimize performance and reduce the disk and CPU overhead of enqueues and dequeues. 
                  </p>
                  <p>The advantages and tradeoffs of sharded queues include the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Sharded queues provide scalability of a single queue on Oracle Real Application Clusters (Oracle RAC), especially in the case where each subscriber has multiple dequeuers on each instance.</p>
                     </li>
                     <li>
                        <p>Sharded queues trades off increased memory usage to obtain performance.</p>
                     </li>
                  </ul>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6">Sharded Queues and the Message Cache</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-B7861117-A3E6-4F7B-8492-87D49EC157B4">Sharded Queues and Enqueuing / Dequeuing Messages</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-47B52250-117C-49DD-BF9E-14DA9BD3C8EB">Sharded Queues and Native JMS Support</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-62C52117-903F-4294-9D44-155AFBB574D2">Sharded Queues and Partitioning</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-1B18AD7E-2F02-4208-A059-6B4531586C75">Sharded Queues and Oracle Real Application Clusters (Oracle RAC)</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-F53DBE98-B57F-4931-9640-D0B5A4B84CFB">Sharded Queue Restrictions</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49">Sharded Queues Tuning</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE3650"></a><div class="props_rev_3"><a id="GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6" name="GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6"></a><h4 id="ADQUE-GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6" class="sect4"><span class="enumeration_section">5.1.1 </span>Sharded Queues and the Message Cache
                  </h4>
                  <div>
                     <p>Sharded queues introduce a special purpose message cache which lets you trade off SGA usage for increased throughput, reduced latency, and increased concurrency. When combined with partitioning, the message cache reduces the need for some queries, DML operations, and indexes. The message cache is most effective when all dequeuers keep up with enqueuers and when the message cache is big enough to store messages (including payloads) for each sharded queue's enqueuers and dequeuers. The message cache uses the Streams pool. If sharded queues share the Streams pool on the same instance as Streams replication functionality, you can use <code class="codeph">DBMS_AQADM</code> procedures such as <code class="codeph">SET_MIN_STREAMS_POOL</code> and <code class="codeph">SET_MAX_STREAMS_POOL</code> to fine tune the allocation of Streams Pool memory.
                     </p>
                     <div class="infoboxnotealso" id="GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6__GUID-CD226E90-7C5D-415A-B9A1-2113033442D0">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_AQADM.html#ARPLS005" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information
                        </p>
                     </div>
                  </div>
               </div><a id="ADQUE3651"></a><div class="props_rev_3"><a id="GUID-B7861117-A3E6-4F7B-8492-87D49EC157B4" name="GUID-B7861117-A3E6-4F7B-8492-87D49EC157B4"></a><h4 id="ADQUE-GUID-B7861117-A3E6-4F7B-8492-87D49EC157B4" class="sect4"><span class="enumeration_section">5.1.2 </span>Sharded Queues and Enqueuing / Dequeuing Messages
                  </h4>
                  <div>
                     <p>To improve throughput and reduce overhead and latency, enqueues and dequeues are optimized to use the message cache, the rules engine, and background processing when possible. For example,</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>sharded queues take advantage of new rules engine improvements</p>
                        </li>
                        <li>
                           <p>a message that has its payload in the message cache does not have to be re-read from disk during a dequeue</p>
                        </li>
                        <li>
                           <p>dequeue by correlation id or other JMS properties can often be evaluated without accessing the disk</p>
                        </li>
                        <li>
                           <p>partition operations on sharded queues implements efficient bulk processing.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE3652"></a><div class="props_rev_3"><a id="GUID-47B52250-117C-49DD-BF9E-14DA9BD3C8EB" name="GUID-47B52250-117C-49DD-BF9E-14DA9BD3C8EB"></a><h4 id="ADQUE-GUID-47B52250-117C-49DD-BF9E-14DA9BD3C8EB" class="sect4"><span class="enumeration_section">5.1.3 </span>Sharded Queues and Native JMS Support
                  </h4>
                  <div>
                     <p>Sharded queues have native support for:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Non-Durable Subscribers</p>
                        </li>
                        <li>
                           <p>JMS payloads</p>
                        </li>
                        <li>
                           <p>Priorities</p>
                        </li>
                     </ul>
                     <p>Sharded queues support both persistent and nonpersistent messages. Nonpersistent messages are stored in memory inside the message cache and are not stored on disk. As a result, nonpersistent messages are lost upon instance crash or shutdown.</p>
                     <p>Sharded queues natively support two kinds of subscribers to meet the JMS requirements: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Non-durable subscribers: These subscribers receive messages on their chosen topic, only if the messages are published while the subscriber is active. This subscription is not sharable among different sessions.</p>
                        </li>
                        <li>
                           <p>Durable subscribers: These subscribers receive all the messages published on a topic, including those that are published while the subscriber is inactive. Multiple database sessions can share the same subscription. </p>
                        </li>
                     </ul>
                     <p>Sharded queues do not use ADTs to store the JMS payload. The JMS message is stored in scalar columns of the database. JMS message types such as <code class="codeph">TEXT</code>, <code class="codeph">BYTES</code>, <code class="codeph">MAP</code>, <code class="codeph">STREAM</code> and <code class="codeph">OBJECT</code> store the JMS payload in scalar <code class="codeph">TEXT</code>/<code class="codeph">RAW</code> or <code class="codeph">CLOB/BLOB</code> columns in the queue table depending on payload size and type. The JMS message properties are stored in a <code class="codeph">CLOB</code> (SecureFile) column in the queue table with attribute access functions defined for the user defined properties. The payload and user properties are pickled into <code class="codeph">RAW</code>, <code class="codeph">VARCHAR2</code> or Secure File columns instead of being stored as an ADT. JMS Header properties and JMS provider information are stored in their own scalar columns.
                     </p>
                     <p>Sharded queues support integer priority values ranging between 0 (lowest priority) and 9 (highest priority), with the default being priority 4, as defined by the JMS standard.</p>
                  </div>
               </div><a id="ADQUE3653"></a><div class="props_rev_3"><a id="GUID-62C52117-903F-4294-9D44-155AFBB574D2" name="GUID-62C52117-903F-4294-9D44-155AFBB574D2"></a><h4 id="ADQUE-GUID-62C52117-903F-4294-9D44-155AFBB574D2" class="sect4"><span class="enumeration_section">5.1.4 </span>Sharded Queues and Partitioning
                  </h4>
                  <div>
                     <p>Sharded queues automatically manage the underlying partitioned tables used for the queue table. Such partition management may occur in the foreground or the background. Each shard provides session-level ordering of enqueued messages. Each enqueuing session is assigned a shard. Each shard is composed of a series of subshards. Each subshard maps to a single partition. Messages are automatically assigned to a table partition upon enqueue. </p>
                     <p>New partitions are automatically created as needed, as when the queue table needs to grow when dequeuers do not keep up with enqueuers. Partitions are truncated and reused when all messages in the partition are dequeued and no longer needed. The message cache automatically loads messages from partitions into memory as required by dequeuers. Global indexes should not be created on the partitioned table underlying a sharded queue. Local indexes are not typically recommended on the partitioned table either. If such indexes are desired and result in performance degradation, then non-sharded queues should be considered.</p>
                  </div>
               </div><a id="ADQUE3654"></a><div class="props_rev_3"><a id="GUID-1B18AD7E-2F02-4208-A059-6B4531586C75" name="GUID-1B18AD7E-2F02-4208-A059-6B4531586C75"></a><h4 id="ADQUE-GUID-1B18AD7E-2F02-4208-A059-6B4531586C75" class="sect4"><span class="enumeration_section">5.1.5 </span>Sharded Queues and Oracle Real Application Clusters (Oracle RAC)
                  </h4>
                  <div>
                     <p>Sharded queues automatically provides enqueue session ordering while avoiding cross-instance communication when possible. Sometimes cross instance communication is required. For example, if a sharded queue has a single enqueuing session on one Oracle RAC instance and a single dequeuing session on another instance, then sharded queues will forward messages between the Oracle RAC instances. The forwarding of messages is non-atomic to the enqueuing transaction to improve performance. Dequeuers may get an ORA-25228 if they are connected to an instance that has no messages in its shards.</p>
                     <p>In most cases, consider having multiple dequeuers for each subscriber or single consumer queue on each Oracle RAC instance to improve throughput and reduce cross-instance overhead. An exception to this guideline is when you are using dequeue selectors that specify a single message. If you want to dequeue a message from a sharded queue by its message identifier in an Oracle RAC database, then you have to connect to the instance that is assigned dequeue ownership for the shard containing the message. Otherwise, the message will not be available for dequeue to the dequeue session. If all dequeues are performed at a single instance, then messages will be automatically forwarded to this instance. Hence, for a sharded single-consumer queue that extensively dequeues by message ID, consider having all dequeue sessions for the sharded queue connect to a single instance. Similarly, for a sharded multiconsumer queue that extensively dequeues by message ID, consider having all dequeue sessions for each subscriber connect to a single instance. Services can be used to simplify connecting dequeue sessions to a particular instance.</p>
                  </div>
               </div><a id="ADQUE3655"></a><div class="props_rev_3"><a id="GUID-F53DBE98-B57F-4931-9640-D0B5A4B84CFB" name="GUID-F53DBE98-B57F-4931-9640-D0B5A4B84CFB"></a><h4 id="ADQUE-GUID-F53DBE98-B57F-4931-9640-D0B5A4B84CFB" class="sect4"><span class="enumeration_section">5.1.6 </span>Sharded Queue Restrictions
                  </h4>
                  <div>
                     <p>The following Oracle Database features are not currently supported for sharded queues:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Message retention</p>
                        </li>
                        <li>
                           <p>Transaction grouping</p>
                        </li>
                        <li>
                           <p>Anonymous posting for subscriber notification and OCI callback notification are not supported. PL/SQL callback notification is supported.</p>
                        </li>
                        <li>
                           <p>Messaging Gateway</p>
                        </li>
                        <li>
                           <p>Oracle extensions for JMS such as JMS propagation and remote subscribers</p>
                        </li>
                        <li>
                           <p>Multiple queues per queue table. Sharded queues are created via the <code class="codeph">CREATE_SHARDED_QUEUE</code> interface.
                           </p>
                        </li>
                        <li>
                           <p>Ordering other than message priority followed by enqueue time (as specified in the JMS standard)</p>
                        </li>
                        <li>
                           <p>The JDBC thick (OCI) driver.</p>
                        </li>
                        <li>
                           <p>Propagation between sharded and non-sharded queues</p>
                        </li>
                        <li>
                           <p>Message transformations</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE3656"></a><div class="props_rev_3"><a id="GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49" name="GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49"></a><h4 id="ADQUE-GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49" class="sect4"><span class="enumeration_section">5.1.7 </span>Sharded Queues Tuning
                  </h4>
                  <div>
                     <p>Sharded queues perform best under the following conditions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Dequeuers for each subscriber are located on each instance</p>
                        </li>
                        <li>
                           <p>Subscribers keep up with the enqueuers. Consider having multiple dequeuers for each subscriber on each Oracle RAC instance</p>
                        </li>
                     </ul>
                     <p>The message cache is most effective when dequeuers keep up with enqueuers and where the cache is big enough to store messages (including payloads) for each sharded queue's enqueuers and dequeuers. When using sharded queues, Oracle requires that you do one of the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Setting parameter <code class="codeph">STREAMS_POOL_SIZE</code></p>
                           <p>This parameter controls the size of shared memory available to the Oracle Database for the sharded queue message cache. If unspecified, up to 10% of the shared pool size may be allocated for the Streams pool.</p>
                           <p>Oracle's Automatic Shared Memory Management feature manages the size of the Streams pool when the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a nonzero value. If the <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter also is set to a nonzero value, then Automatic Shared Memory Management uses this value as a minimum for the Streams pool.
                           </p>
                           <p>If the <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter is set to a nonzero value, and the <code class="codeph">SGA_TARGET</code> parameter is set to <code class="codeph">0</code> (zero), then the Streams pool size is the value specified by the <code class="codeph">STREAMS_POOL_SIZE</code> parameter, in bytes.
                           </p>
                           <p>If both the <code class="codeph">STREAMS_POOL_SIZE</code> and the <code class="codeph">SGA_TARGET</code> initialization parameters are set to <code class="codeph">0</code> (zero), then, by default, the first use of the Streams pool in a database transfers an amount of memory equal to 10% of the shared pool from the buffer cache to the Streams pool.
                           </p>
                           <div class="infoboxnotealso" id="GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49__GUID-019AD1C8-38A2-4117-9826-ED3A12DE4099">
                              <p class="notep1">See Also:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">DBMS_AQADM.set_min_streams_pool()</code> and <code class="codeph">DBMS_AQADM.set_max_streams_pool( ) </code>in <a href="../arpls/DBMS_AQADM.html#ARPLS005" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for a finer grained control over <code class="codeph">STREAMS_POOL</code> sharing with Streams processing.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p>Turning on SGA autotuning</p>
                           <p>Oracle will automatically allocate the appropriate amount of memory from the SGA for the Streams pool, based on Streams pool usage as well as usage of other components that use the SGA. Examples of such other components are buffer cache and library cache. If <code class="codeph">STREAMS_POOL_SIZE</code> is specified, it is used as the lower bound.
                           </p>
                        </li>
                        <li id="GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49__MANUALLYTUNINGSHARDEDQUEUESSHARDEDQ-0508F585">
                           <p>Manually tuning sharded queues</p>
                           <p>Sharded queues can be tuned by allocating <code class="codeph">STREAMS_POOL</code> memory for the message cache.  The view <code class="codeph">GV$AQ_MESSAGE_CACHE_ADVICE</code> provides advice on how much <code class="codeph">STREAMS_POOL</code> should be allocated for sharded queues based on a snapshot of the current messaging load. During periods of high load, select the columns <code class="codeph">INST_ID</code>, <code class="codeph">SIZE_FOR_ESTIMATE</code>, and <code class="codeph">ESTD_SIZE_TYPE</code>. <code class="codeph">ESTD_SIZE_TYPE</code> is one of three values: <code class="codeph">MINIMUM</code>, <code class="codeph">PREFERRED</code>, or <code class="codeph">MAXIMUM</code>.  Find the maximum value of <code class="codeph">SIZE_FOR_ESTIMATE</code> across Oracle RAC instances for each of the <code class="codeph">ESTD_SIZE_TYPE</code> values. It is highly recommended that <code class="codeph">STREAMS_POOL</code> be set at least to the <code class="codeph">MINIMUM</code> recommendation to provide any message cache performance gains. There is little additional performance gains to setting <code class="codeph">STREAMS_POOL</code> greater than the <code class="codeph">MAXIMUM</code> recommendation value. Setting <code class="codeph">STREAMS_POOL</code> to the <code class="codeph">PREFERRED</code> recommendation tries to provide a reasonable space-performance tradeoff.  If the <code class="codeph">MAXIMUM</code> size recommendation is much greater than the <code class="codeph">PREFERRED</code> recommendation, then check that the sharded queue has no orphaned subscribers, or whether more dequeuers should be added to the instance, so that dequeuers can keep up with the enqueue load.  <code class="codeph">STREAMS_POOL</code> tuning should be done over multiple periods of high load and whenever messaging load characteristics change.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-423633E9-9B72-45B5-9C3E-95386BBEDBA0" name="GUID-423633E9-9B72-45B5-9C3E-95386BBEDBA0"></a><h4 id="ADQUE-GUID-423633E9-9B72-45B5-9C3E-95386BBEDBA0" class="sect4"><span class="enumeration_section">5.1.8 </span>User Sharding
                  </h4>
                  <div>
                     <p>An application can decide the way messages are sharded in the sharded queue. In such cases, the application explicitly specifies to enqueue a message in a specific shard.</p>
                     <p>In an Oracle RAC database, a shard is always owned by an instance. Initially, the shard is owned by the instance where the first message is enqueued in that shard. The owner instance of the shard may change when database instances are shut down.</p>
                     <p>With user sharding, a user can attempt to enqueue messages in a shard which is not owned by the instance in which the session is running. In such cases, a cross instance enqueue is triggered. To support cross instance enqueues, the enqueue requests received at other instances are forwarded to the <code class="codeph">OWNER INSTANCE</code> of the shard over the RAC interconnect. The <code class="codeph">REMOTE_LISTENER</code> parameter in listener.ora must also be set to enable forwarding of cross instance enqueue requests to the correct instance. Internally, sharded queues on an Oracle RAC database may use database links between instances. Definer's rights PL/SQL packages that perform cross instance enqueues in sharded queues on an Oracle RAC database must grant <code class="codeph">INHERIT REMOTE PRIVILEGES</code> to users of the package.
                     </p>
                     <div class="infoboxnotealso" id="GUID-423633E9-9B72-45B5-9C3E-95386BBEDBA0__GUID-2623009F-4030-4DFF-8C4E-BCFFCE51AC79">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_AQADM.html#ARPLS-GUID-1429E3AD-452A-4E82-A914-AA875A2525E3" target="_blank">DBMS_AQADM</a> in <span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span> for more information.
                        </p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-9951456C-F148-4B01-A3CD-6FD73C1637F4" name="GUID-9951456C-F148-4B01-A3CD-6FD73C1637F4"></a><h3 id="ADQUE-GUID-9951456C-F148-4B01-A3CD-6FD73C1637F4" class="sect3"><span class="enumeration_section">5.2 </span>Non-Sharded Queues
               </h3>
               <div>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5" title="When persistent messages are enqueued, they are stored in database tables. The performance characteristics of queue operations on persistent messages are similar to underlying database operations.">Persistent Messaging Performance Overview for Non-Sharded Queues</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11" title="Oracle Database Advanced Queuing table layout is similar to a layout with ordinary database tables and indexes.">Persistent Messaging Basic Tuning Tips</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-689E9C50-5647-49BA-8BFF-AB0DEE6432EE" title="Propagation can be considered a special kind of dequeue operation with an additional INSERT at the remote (or local) queue table. Propagation from a single schedule is not parallelized across multiple job queue processes. Rather, they are load balanced.Propagation can be considered a special kind of dequeue operation with an additional INSERT at the remote (or local) queue table. Propagation from a single schedule is not parallelized across multiple job queue processes. Rather, they are load balanced.">Propagation Tuning Tips</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-25168096-2B50-492C-95F9-BC723658552B" title="Buffered messaging operations in a Oracle Real Application Clusters environment will be fastest on the OWNER_INSTANCE of the queue.">Buffered Messaging Tuning</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2596"></a><div class="props_rev_3"><a id="GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11" name="GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11"></a><h4 id="ADQUE-GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11" class="sect4"><span class="enumeration_section">5.2.1 </span>Persistent Messaging Basic Tuning Tips
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing table layout is similar to a layout with ordinary database tables and indexes.</p>
                     <div class="infoboxnotealso" id="GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11__GUID-8DB9689E-B469-4DA5-BE5A-01FFFE9F4173">
                        <p class="notep1">See Also:</p>
                        <p><a href="../tgdba/performance-tuning-overview.html#TGDBA025" target="_blank"><span class="italic">Oracle Database Performance Tuning Guide </span></a>for tuning recommendations
                        </p>
                     </div>
                  </div><a id="ADQUE3628"></a><div class="props_rev_3"><a id="GUID-EBF359AC-998B-4539-A36D-A1460CA20DBB" name="GUID-EBF359AC-998B-4539-A36D-A1460CA20DBB"></a><h5 id="ADQUE-GUID-EBF359AC-998B-4539-A36D-A1460CA20DBB" class="sect5"><span class="enumeration_section">5.2.1.1 </span>Memory Requirements
                     </h5>
                     <div>
                        <p>Streams pool size should be at least 20 MB for optimal multi-consumer dequeue performance in a non-Oracle RAC database.</p>
                        <p>Persistent queuing dequeue operations use the streams pool to optimize performance, especially under concurrency situations. This is, however, not a requirement and the code automatically switches to a less optimal code path.</p>
                        <p>Sharded queues introduces a message cache for optimal performance of high throughput messaging systems. Ideally the Streams pool size should be large enough to cache the expected backlog of messages in sharded queues.</p>
                     </div>
                  </div><a id="ADQUE2597"></a><div class="props_rev_3"><a id="GUID-8AD9338C-0FFA-4855-BD3D-64CC32C45484" name="GUID-8AD9338C-0FFA-4855-BD3D-64CC32C45484"></a><h5 id="ADQUE-GUID-8AD9338C-0FFA-4855-BD3D-64CC32C45484" class="sect5"><span class="enumeration_section">5.2.1.2 </span>Using Storage Parameters
                     </h5>
                     <div>
                        <p>Storage parameters can be specified when creating a queue table using the <code class="codeph">storage_clause</code> parameter.
                        </p>
                        <p>Storage parameters are inherited by other IOTs and tables created with the queue table. The tablespace of the queue table should have sufficient space to accommodate data from all the objects associated with the queue table. With retention specified, the history table and, also the queue table can grow to be quite big.</p>
                        <p>Oracle recommends you use automatic segment-space management (ASSM). Otherwise <code class="codeph">initrans</code>, freelists and freelist groups must be tuned for AQ performance under high concurrency.
                        </p>
                        <p>Increasing <code class="codeph">PCTFREE</code> will reduce the number of messages in a queue table/IOT block. This will reduce block level contention when there is concurrency.
                        </p>
                        <p>Storage parameters specified at queue table creation are shared by the queue table, IOTs and indexes. These may be individually altered by an online redefinition using <code class="codeph">DBMS_REDEFINITION</code>.
                        </p>
                     </div>
                  </div><a id="ADQUE2598"></a><div class="props_rev_3"><a id="GUID-0A4E928E-E712-4030-9381-C4EDF70E558C" name="GUID-0A4E928E-E712-4030-9381-C4EDF70E558C"></a><h5 id="ADQUE-GUID-0A4E928E-E712-4030-9381-C4EDF70E558C" class="sect5"><span class="enumeration_section">5.2.1.3 </span>I/O Configuration
                     </h5>
                     <div>
                        <p>Because Oracle Database Advanced Queuing is very I/O intensive, you will usually need to tune I/O to remove any bottlenecks.</p>
                        <div class="infoboxnotealso" id="GUID-0A4E928E-E712-4030-9381-C4EDF70E558C__GUID-CC8CF22F-383B-47A1-87C7-57B8F905271B">
                           <p class="notep1">See Also:</p>
                           <p>"I/O Configuration and Design" in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=TGDBA015" target="_blank"><span class="italic">Oracle Database Performance Tuning Guide</span></a></p>
                        </div>
                     </div>
                  </div><a id="ADQUE2599"></a><div class="props_rev_3"><a id="GUID-6B71D184-B128-4DB1-8EC9-F0EF33A0A56B" name="GUID-6B71D184-B128-4DB1-8EC9-F0EF33A0A56B"></a><h5 id="ADQUE-GUID-6B71D184-B128-4DB1-8EC9-F0EF33A0A56B" class="sect5"><span class="enumeration_section">5.2.1.4 </span>Running Enqueue and Dequeue Processes Concurrently in a Single Non-Sharded Queue Table 
                     </h5>
                     <div>
                        <p>Some environments must process messages in a constant flow, requiring that enqueue and dequeue processes run concurrently. If the message delivery system has only one queue table and one queue, then all processes must work on the same segment area at the same time. This precludes reasonable performance levels when delivering a high number of messages.</p>
                        <p>The best number for concurrent processes depends on available system resources. For example, on a four-CPU system, it is reasonable to start with two concurrent enqueue and two concurrent dequeue processes. If the system cannot deliver the wanted number of <a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">message</span></a>s, then use several subscribers for load balancing rather than increasing the number of processes.
                        </p>
                        <p>Tune the enqueue and dequeue rates on the queue so that in the common case the queue size remains small and bounded. A queue that grows and shrinks considerably will have indexes and IOTs that are out of balance, which will affect performance.</p>
                        <p>With multi-consumer queues, using several subscribers for load balancing rather than increasing the number of processes will reduce contention. Multiple queue tables may be used garnering horizontal scalability.</p>
                        <p>For information about tuning sharded queues refer to <a href="aq-performance-scalability.html#GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49">Sharded Queues Tuning</a>.
                        </p>
                     </div>
                  </div><a id="ADQUE2600"></a><div class="props_rev_3"><a id="GUID-A6485ACE-C07B-46F5-84A3-D5552934E9F9" name="GUID-A6485ACE-C07B-46F5-84A3-D5552934E9F9"></a><h5 id="ADQUE-GUID-A6485ACE-C07B-46F5-84A3-D5552934E9F9" class="sect5"><span class="enumeration_section">5.2.1.5 </span>Running Enqueue and Dequeue Processes Serially in a Single Non-Sharded Queue Table 
                     </h5>
                     <div>
                        <p>When enqueue and dequeue processes are running serially, contention on the same data segment is lower than in the case of concurrent processes. The total time taken to deliver messages by the system, however, is longer than when they run concurrently.</p>
                        <p>Increasing the number of processes helps both enqueuing and dequeuing. The message throughput rate may be higher for enqueuers than for dequeuers when the number of processes is increased, especially with single consumer queues. Dequeue processes on multi-consumer queues scale much better.</p>
                     </div>
                  </div><a id="ADQUE2601"></a><div class="props_rev_3"><a id="GUID-C26E5259-B2A0-4D7C-8EC5-C7BC0DAD330B" name="GUID-C26E5259-B2A0-4D7C-8EC5-C7BC0DAD330B"></a><h5 id="ADQUE-GUID-C26E5259-B2A0-4D7C-8EC5-C7BC0DAD330B" class="sect5"><span class="enumeration_section">5.2.1.6 </span>Creating Indexes on a Queue Table
                     </h5>
                     <div>
                        <p>Creating an index on a non-sharded queue table is useful if you meet these conditions.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Dequeue using correlation ID</p>
                              <p>An index created on the column <code class="codeph">corr_id</code> of the underlying queue table <code class="codeph">AQ$_</code><span class="italic"><code class="codeph">QueueTableName</code></span> expedites dequeues.
                              </p>
                           </li>
                           <li>
                              <p>Dequeue using a condition</p>
                              <p>This is like adding the condition to the where-clause for the <code class="codeph">SELECT</code> on the underlying queue table. An index on <span class="italic"><code class="codeph">QueueTableName</code></span> expedites performance on this <code class="codeph">SELECT</code> statement.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADQUE2602"></a><div class="props_rev_3"><a id="GUID-3BD598B9-4F3F-4A62-8EE8-9274715D754F" name="GUID-3BD598B9-4F3F-4A62-8EE8-9274715D754F"></a><h5 id="ADQUE-GUID-3BD598B9-4F3F-4A62-8EE8-9274715D754F" class="sect5"><span class="enumeration_section">5.2.1.7 </span>Other Tips for Non-Sharded Queues
                     </h5>
                     <div>
                        <p>These are some other persistent messaging basic tuning tips.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Ensure that statistics are being gathered so that the optimal query plans for retrieving messages are being chosen. By default, queue tables are locked out from automatic gathering of statistics. The recommended use is to gather statistics with a representative queue message load and lock them.</p>
                           </li>
                           <li>
                              <p>The queue table indexes and IOTs are automatically coalesced by AQ background processes. However, they must continue to be monitored and coalesced if needed. With automatic space segment management (ASSM), an online shrink operation may be used for the same purpose. A well balanced index reduces queue monitor CPU consumption, and ensures optimal enqueue-dequeue performance.</p>
                           </li>
                           <li>
                              <p>Ensure that there are enough queue monitor processes running to perform the background tasks. The queue monitor must also be running for other crucial background activity. Multiple <code class="codeph">qmn</code> processes share the load; make sure that there are enough of them. These are auto-tuned, but can be forced to a minimum number, if needed.
                              </p>
                           </li>
                           <li>
                              <p>It is recommended that dequeue with a wait time is only used with dedicated server processes. In a shared server environment, the shared server process is dedicated to the dequeue operation for the duration of the call, including the wait time. The presence of many such processes can cause severe performance and scalability problems and can result in deadlocking the shared server processes.</p>
                           </li>
                           <li>
                              <p>Long running dequeue transactions worsen dequeue contention on the queue, and must be avoided.</p>
                           </li>
                           <li>
                              <p>Batching multiple dequeue operations on multi-consumer queues into a single transaction gives best throughput.</p>
                           </li>
                           <li>
                              <p>Use <code class="codeph">NEXT</code> as navigation mode, if not using message priorities. This offers the same semantics but improved performance.
                              </p>
                           </li>
                           <li>
                              <p>Use the <code class="codeph">REMOVE_NODATA</code> dequeue mode if dequeuing in <code class="codeph">BROWSE</code> mode followed by a <code class="codeph">REMOVE</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADQUE2603"></a><div class="props_rev_3"><a id="GUID-689E9C50-5647-49BA-8BFF-AB0DEE6432EE" name="GUID-689E9C50-5647-49BA-8BFF-AB0DEE6432EE"></a><h4 id="ADQUE-GUID-689E9C50-5647-49BA-8BFF-AB0DEE6432EE" class="sect4"><span class="enumeration_section">5.2.2 </span>Propagation Tuning Tips
                  </h4>
                  <div>
                     <p>Propagation can be considered a special kind of dequeue operation with an additional <code class="codeph">INSERT</code> at the remote (or local) queue table. Propagation from a single schedule is not parallelized across multiple job queue processes. Rather, they are load balanced.Propagation can be considered a special kind of dequeue operation with an additional <code class="codeph">INSERT</code> at the remote (or local) queue table. Propagation from a single schedule is not parallelized across multiple job queue processes. Rather, they are load balanced.
                     </p>
                     <p> For better scalability, configure the number of <a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">propagation</span></a> schedules according to the available system resources (CPUs).
                     </p>
                     <p>Propagation rates from <a href="glossary.html#GUID-4956C594-EE49-498B-A9DD-7371518B4EBA"><span class="xrefglossterm">transactional</span></a> and <a href="glossary.html#GUID-D93C8E9C-D211-4780-B671-CBA864C62E5A"><span class="xrefglossterm">nontransactional</span></a> (default) queue tables vary to some extent because Oracle Database Advanced Queuing determines the batching size for nontransactional queues, whereas for transactional queues, batch size is mainly determined by the user application. 
                     </p>
                     <p>Optimized propagation happens in batches. If the remote queue is in a different database, then Oracle Database Advanced Queuing uses a sequencing algorithm to avoid the need for a two-phase commit. When a message must be sent to multiple queues in the same destination, it is sent multiple times. If the message must be sent to multiple consumers in the same queue at the destination, then it is sent only once.</p>
                  </div>
               </div><a id="ADQUE2604"></a><div class="props_rev_3"><a id="GUID-25168096-2B50-492C-95F9-BC723658552B" name="GUID-25168096-2B50-492C-95F9-BC723658552B"></a><h4 id="ADQUE-GUID-25168096-2B50-492C-95F9-BC723658552B" class="sect4"><span class="enumeration_section">5.2.3 </span>Buffered Messaging Tuning
                  </h4>
                  <div>
                     <p>Buffered messaging operations in a Oracle Real Application Clusters environment will be fastest on the <code class="codeph">OWNER_INSTANCE</code> of the queue.
                     </p>
                  </div><a id="ADQUE2593"></a><div class="props_rev_3"><a id="GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5" name="GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5"></a><h5 id="ADQUE-GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5" class="sect5"><span class="enumeration_section">5.2.3.1 </span>Persistent Messaging Performance Overview for Non-Sharded Queues
                     </h5>
                     <div>
                        <p>When persistent messages are enqueued, they are stored in database tables. The performance characteristics of queue operations on persistent messages are similar to underlying database operations.</p>
                        <p>The code path of an <a href="glossary.html#GUID-B21E60F7-4BFA-42A2-9A8F-B781C2A55ED9"><span class="xrefglossterm">enqueue</span></a> operation is comparable to <code class="codeph">SELECT</code> and <code class="codeph">INSERT</code> into a multicolumn <a href="glossary.html#GUID-45894F1F-4871-4A00-9171-2743821BAD3A"><span class="xrefglossterm">queue table</span></a> with three index-organized tables. The code path of a <a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">dequeue</span></a> operation is comparable to a <code class="codeph">SELECT</code> operation on the multi-column table and a <code class="codeph">DELETE</code> operation on the dequeue index-organized table. In many scenarios, for example when Oracle RAC is not used and there is adequate streams pool memory, the dequeue operation is optimized and is comparable to a <code class="codeph">SELECT</code> operation on a multi-column table.
                        </p>
                        <div class="infoboxnote" id="GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5__GUID-773A010E-778B-4C7F-BD6F-5D7B05885E3A">
                           <p class="notep1">Note:</p>
                           <p>Performance is not affected by the number of <a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">queue</span></a>s in a table.
                           </p>
                        </div>
                     </div>
                  </div><a id="ADQUE2594"></a><div class="props_rev_3"><a id="GUID-B8F0E33C-4C4B-4EFF-9B80-666C20BFB0CB" name="GUID-B8F0E33C-4C4B-4EFF-9B80-666C20BFB0CB"></a><h5 id="ADQUE-GUID-B8F0E33C-4C4B-4EFF-9B80-666C20BFB0CB" class="sect5"><span class="enumeration_section">5.2.3.2 </span>Non-Sharded Queues and Oracle Real Application Clusters
                     </h5>
                     <div>
                        <p>Oracle Real Application Clusters (Oracle RAC) can be used to ensure highly available access to queue data.</p>
                        <p>The entry and exit points of a queue, commonly called its tail and head respectively, can be extreme hot spots. Because Oracle RAC may not scale well in the presence of hot spots, limit usual access to a queue from one instance only. If an instance failure occurs, then messages managed by the failed instance can be processed immediately by one of the surviving instances. If non-sharded queues are experiencing hot spots, then consider using sharded queues instead.</p>
                        <p>You can associate Oracle RAC instance affinities with 8.1-compatible queue tables. If you are using <code class="codeph">q1</code> and <code class="codeph">q2</code> in different instances, then you can use <code class="codeph">ALTER_QUEUE_TABLE</code> or <code class="codeph">CREATE_QUEUE_TABLE</code> on the queue table and set <code class="codeph">primary_instance</code> to the appropriate <code class="codeph">instance_id.</code></p>
                        <div class="infoboxnotealso" id="GUID-B8F0E33C-4C4B-4EFF-9B80-666C20BFB0CB__GUID-158353E4-0F48-4A30-AF1B-C351E02A736A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41" title="DBMS_AQADM.CREATE_QUEUE_TABLE creates a non-sharded queue table for messages of a predefined type.">Creating a Queue Table</a></p>
                              </li>
                              <li>
                                 <p><a href="aq-administrative-interface.html#GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C" title="DBMS_AQADM.ALTER_QUEUE_TABLE alters the existing properties of a non-sharded queue table.">Altering a Queue Table</a></p>
                              </li>
                              <li>
                                 <p><a href="aq-performance-scalability.html#GUID-1B18AD7E-2F02-4208-A059-6B4531586C75">Sharded Queues and Oracle Real Application Clusters (Oracle RAC)</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADQUE2595"></a><div class="props_rev_3"><a id="GUID-CD5084E6-A0F7-4B70-B8AF-7409432E43B9" name="GUID-CD5084E6-A0F7-4B70-B8AF-7409432E43B9"></a><h5 id="ADQUE-GUID-CD5084E6-A0F7-4B70-B8AF-7409432E43B9" class="sect5"><span class="enumeration_section">5.2.3.3 </span>Oracle Database Advanced Queuing in a Shared Server Environment
                     </h5>
                     <div>
                        <p>Queue operation scalability is similar to the underlying database operation scalability.</p>
                        <p>If a dequeue operation with wait option is applied, then it does not return until it is successful or the wait period has expired. In a shared server environment, the shared server process is dedicated to the dequeue operation for the duration of the call, including the wait time. The presence of many such processes can cause severe performance and scalability problems and can result in deadlocking the shared server processes. For this reason, Oracle recommends that dequeue requests with wait option be applied using dedicated server processes. This restriction is not enforced.</p>
                        <div class="infoboxnotealso" id="GUID-CD5084E6-A0F7-4B70-B8AF-7409432E43B9__GUID-F3C084A2-BA36-4041-A1BB-E75BA0B1356A">
                           <p class="notep1">See Also:</p>
                           <p>"DEQUEUE_OPTIONS_T Type" in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=ARPLS71684" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information on the wait option
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2605"></a><div class="props_rev_3"><a id="GUID-F420D721-713E-42C9-971F-89B967B7E5E6" name="GUID-F420D721-713E-42C9-971F-89B967B7E5E6"></a><h3 id="ADQUE-GUID-F420D721-713E-42C9-971F-89B967B7E5E6" class="sect3"><span class="enumeration_section">5.3 </span>Performance Views
               </h3>
               <div>
                  <p>Oracle provides these views to monitor system performance and troubleshooting.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-BAA5F8F0-24EB-495D-B032-67FCF75017BA" title="The V$AQ_MESSAGE_CACHE_STAT view displays statistics about memory management for sharded queues in streams_pool within the System Global Area (SGA). Sharded queue uses streams_pool in units of subshards. Thus columns of this view shows statistics at subshard level irrespective of the queue. This view shows statistics across all sharded queues.">V$AQ_MESSAGE_CACHE_STAT: Memory Management for Sharded Queues</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-BAB03D2E-66C6-45BC-BF3B-2FDF4097A149" title="The V$AQ_SHARDED_SUBSCRIBER_STAT view displays statistical information about the subscribers of sharded queues. This statistics is used by the memory advisor.">V$AQ_SHARDED_SUBSCRIBER_STAT: Sharded Queue Subscriber Statistics</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-68CA0CEB-5AAB-4557-91A8-735F19BFF4CB" title="The V$AQ_MESSAGE_CACHE_ADVICE view shows simulated metrics for a range of potential message cache sizes. This view assists in cache sizing by providing information in form of metrics as described below.">V$AQ_MESSAGE_CACHE_ADVICE: Simulated Metrics</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-03AB9C9F-ACD2-4D84-81C8-603B92173554" title="The V$AQ_REMOTE_DEQUEUE_AFFINITY view lists the dequeue affinity instance of the subscribers not dequeuing locally from the shard's owner instance. Cross instance message forwarding is used for these subscribers.">V$AQ_REMOTE_DEQUEUE_AFFINITY: Dequeue Affinity Instance List</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-582D2E34-F973-4798-B871-5D57A0686970" title="The V$PERSISTENT_QUEUES view displays information about all active persistent queues in the database since the queues' first activity time.">V$PERSISTENT_QUEUES: All Active Persistent Queues in the Instance</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-4DD31A77-2DFD-481D-BFE9-ADAFC7FBA915" title="The V$PERSISTENT_SUBSCRIBERS view displays information about all active subscribers of the persistent queues in the database.">V$PERSISTENT_SUBSCRIBERS: All Active Subscribers of the Persistent Queues in the Instance</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-77560F69-C176-49C5-B8B1-24353F4FA2B8" title="The V$PERSISTENT_PUBLISHERS view displays information about all active publishers of the persistent queues in the database.">V$PERSISTENT_PUBLISHERS: All Active Publishers of the Persistent Queues in the Instance</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-175B1A5D-D677-4B3B-877B-E77DCF436CC2" title="The V$BUFFERED_QUEUES view displays information about all buffered queues in the instance. There is one row per queue.">V$BUFFERED_QUEUES: All Buffered Queues in the Instance.</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-9CC537A3-45A5-425E-BD8C-7C27BA557975" title="The V$BUFFERED_SUBSCRIBERS view displays information about the subscribers for all buffered queues in the instance. There is one row per subscriber per queue.">V$BUFFERED_SUBSCRIBERS: Subscribers for All Buffered Queues in the Instance</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-269C1CA5-160D-481C-9DDB-8944F0B641B4" title="The V$BUFFERED_PUBLISHERS view displays information about all buffered publishers in the instance.">V$BUFFERED_PUBLISHERS: All Buffered Publishers in the Instance</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-CEBDC95C-A601-4DF1-BB10-97F5EAF5EB41" title="The V$PERSISTENT_QMN_CACHE view displays detailed statistics about all background activities relating to all queue tables in the database.">V$PERSISTENT_QMN_CACHE: Performance Statistics on Background Tasks for Persistent Queues</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-E0673077-05DC-41AC-B796-DC408DBE8C7F" title="The V$AQ view provides information about the number of messages in different states for the whole database.">V$AQ: Number of Messages in Different States in Database</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-603866CD-A14D-496B-9D09-D48EFA111CE1" title="The V$AQ_BACKGROUND_COORDINATOR view is applicable for Oracle Database 12c Release 1 (12.1) onwards.">V$AQ_BACKGROUND_COORDINATOR: Performance Statistics for AQ's Master Background Coordinator Process (AQPC)</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-43617C97-4D52-4204-85B3-D85F45345BDB" title="The V$AQ_JOB_COORDINATOR view is applicable for Oracle Database 12c Release 1 (12.1) onwards.">V$AQ_JOB_COORDINATOR: Performance Statistics per Coordinator</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-ABA9207C-02F8-4A4A-8FDB-6508F1DB3249" title="The V$AQ_NONDUR_REGISTRATIONS view is applicable for Oracle Database 12c Release 1 (12.1) onwards. This view provides information about non-durable subscriptions.">V$AQ_NONDUR_REGISTRATIONS: Non-Durable Registrations</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-12F8B20D-5081-4D96-B0D3-4C58357683DB" title="The V$AQ_SERVER_POOL view is applicable for Oracle Database 12c Release 1 (12.1) onwards. This view lists performance statistics for all the servers in the pool.">V$AQ_SERVER_POOL: Performance Statistics for all Servers</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-563471B8-A800-4322-84F1-42A5EA88A6A3" title="The V$AQ_CROSS_INSTANCE_JOBS view is applicable for Oracle Database 12c Release 1 (12.1) onwards. This view describes each of the cross process jobs.">V$AQ_CROSS_INSTANCE_JOBS: Cross Process Jobs Description</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-ABA9207C-02F8-4A4A-8FDB-6508F1DB3249" title="The V$AQ_NONDUR_REGISTRATIONS view is applicable for Oracle Database 12c Release 1 (12.1) onwards. This view provides information about non-durable subscriptions.">V$AQ_NONDUR_REGISTRATIONS: Non-Durable Registrations</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-0A62B589-AA64-4521-A610-31B9EB35666E" title="The V$AQ_NOTIFICATION_CLIENTS view is applicable for Oracle Database 12c Release 1 (12.1) onwards. This view displays performance statistics for secure OCI client connections.">V$AQ_NOTIFICATION_CLIENTS: Secure OCI Client Connections </a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-F43DBCE7-4CA3-4B43-BE07-BCEFB4E03E00" title="The V$AQ_SUBSCRIBER_LOAD view is applicable for Oracle Database 12c Release 1 (12.1) onwards. This view describes the load of all subscribers of sharded queues in terms of latency at every instance in an Oracle RAC environment.">V$AQ_SUBSCRIBER_LOAD: Durable Subscribers</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-8DC43990-F90F-49DF-A85B-1E6AA1A7CF55" title="The V$AQ_NONDUR_SUBSCRIBER view is applicable for Oracle Database 12c Release 1 (12.1) onwards. V$AQ_NONDUR_SUBSCRIBER provides information about non-durable subscribers on sharded queues.">V$AQ_NONDUR_SUBSCRIBER: Non-Durable Subscribers</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-09EBF513-ABD3-489A-B221-C8B2E86141A3" title="The V$AQ_NONDUR_SUBSCRIBER_LWM view is applicable for Oracle Database 12c Release 1 (12.1) onwards. The LWM of a non durable subscriber is a combination of shard, priority and LWM (sub-shard).">V$AQ_NONDUR_SUBSCRIBER_LWM: LWM of Non Durable Subscriber</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-18843EE7-86FD-41DC-85DF-2D8E01F37014" title="The V$AQ_MESSAGE_CACHE view provides performance statistics of the message cache for sharded queues at the subshard level in the instance.">V$AQ_MESSAGE_CACHE: Performance Statistics</a></p>
                     </li>
                  </ul>
                  <p>These views are integrated with the Automatic Workload Repository (AWR). Users can generate a report based on two AWR snapshots to compute enqueue rate, dequeue rate, and other statistics per queue/subscriber.</p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
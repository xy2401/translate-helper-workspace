<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Getting Started with Enterprise User Security</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Enterprise User Security Administrator's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Enterprise User Security Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="enterprise-user-security-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T05:14:01-08:00">
      <meta name="dcterms.title" content="Enterprise User Security Administrator's Guide">
      <meta name="dcterms.dateCopyrighted" content="2000, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96086-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="introducing-enterprise-user-security.html" title="Previous" type="text/html">
      <link rel="next" href="configuration-and-administration-tools-overview.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="DBIMI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introducing-enterprise-user-security.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="configuration-and-administration-tools-overview.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Enterprise User Security Administrator's Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Getting Started with Enterprise User Security</li>
            </ol>
            <a id="GUID-F141E5DA-B824-4258-9FA8-67AB19D84C11" name="GUID-F141E5DA-B824-4258-9FA8-67AB19D84C11"></a><a id="DBIMI234"></a>
            
            <h2 id="DBIMI-GUID-F141E5DA-B824-4258-9FA8-67AB19D84C11" class="sect2"><span class="enumeration_chapter">2 </span>Getting Started with Enterprise User Security
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Enterprise User Security enables you to centrally manage database users across the enterprise. Enterprise users are created in Oracle Internet Directory, and can be assigned roles and privileges across various enterprise databases registered with the directory. </p>
               <div class="p">This chapter uses a tutorial approach to help you get started with Enterprise User Security. The following steps discuss configuring Enterprise User Security:
                  <ol>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1">Configuring Your Database to Use the Directory</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77">Registering Your Database with the Directory</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC">Creating a Shared Schema in the Database</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4">Mapping Enterprise Users to the Shared Schema</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F">Connecting to the Database as an Enterprise User</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-86219ABB-1E28-4206-A847-F9366A679785">Using Enterprise Roles</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D">Using Proxy Permissions</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-enterprise-user-security.html#GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C">Using Pluggable Databases</a></p>
                     </li>
                  </ol>
               </div>
            </div><a id="DBIMI565"></a><a id="DBIMI235"></a><div class="props_rev_3"><a id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1" name="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1"></a><h3 id="DBIMI-GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1" class="sect3">Configuring Your Database to Use the Directory</h3>
               <div>
                  <div class="section">
                     <p>The first step in configuring Enterprise User Security is to configure the database to use the directory. Running the Net Configuration Assistant (NetCA) tool enables you to configure the directory host name and port that your database should use. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-2C79BA38-8CDB-4414-9A55-B360C8D6812C">To configure your database for directory usage:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start NetCA using the <code class="codeph">netca</code> command. </span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>On Windows, you can also start NetCA from the Start menu:</p>
                                 <p>Click <span class="bold">Start, All Programs, Oracle -</span> <span class="italic"><span class="bold">OracleHomeName</span></span>, <span class="bold">Configuration and Migration Tools, Net Configuration Assistant.</span></p>
                              </li>
                              <li>
                                 <p>On Unix systems, you can start NetCA using the following command:</p>
                                 <p><span class="italic"><code class="codeph">$ORACLE_HOME</code></span><code class="codeph">/bin/netca</code> 
                                 </p>
                              </li>
                           </ul>
                           <p>The Welcome screen appears.</p>
                           <div class="figure" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-05F09E34-8A9F-448B-9D55-8FCE66A74B48"><img src="img/netca1.gif" width="523" alt="Description of netca1.gif follows" title="Description of netca1.gif follows" longdesc="img_text/netca1.html"><br><a href="img_text/netca1.html">Description of the illustration netca1.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>Select <span class="bold">Directory Usage Configuration</span>. Click <span class="bold">Next</span>.</span><div>
                           <p>The Directory Type screen appears. </p>
                           <div class="figure" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-950513B4-465E-4BAD-A0F2-580BF1F0080D"><img src="img/netca2.gif" width="523" alt="Description of netca2.gif follows" title="Description of netca2.gif follows" longdesc="img_text/netca2.html"><br><a href="img_text/netca2.html">Description of the illustration netca2.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>Click <span class="bold">Next</span>.</span><div>
                           <p> The Directory Location screen appears.</p>
                           <div class="figure" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-0B9ADC9B-65E9-4AF1-B31D-334D46944E1A"><img src="img/netca3.gif" width="523" alt="Description of netca3.gif follows" title="Description of netca3.gif follows" longdesc="img_text/netca3.html"><br><a href="img_text/netca3.html">Description of the illustration netca3.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>Enter the name of the host on which the Oracle Internet Directory server is running. Also enter the LDAP non-SSL and SSL port numbers. These port numbers are 3060 and 3131 by default. Click Next.</span><div>
                           <p>The Select Oracle Context screen appears.</p>
                           <div class="figure" id="GUID-941C4042-75F4-40E3-BFDB-E940A705A7F1__GUID-9EA4FA0C-5DC0-408A-8EDB-2ED4D23D20B6"><img src="img/netca4.gif" width="523" alt="Description of netca4.gif follows" title="Description of netca4.gif follows" longdesc="img_text/netca4.html"><br><a href="img_text/netca4.html">Description of the illustration netca4.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>Select the default Oracle Context to use. You need to select this if there are multiple identity management realms on the directory server. Click <span class="bold">Next</span>.</span><div>
                           <p>The Directory Usage Configuration, Done screen is displayed. </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Confirm that the directory usage configuration is successfully completed. Click <span class="bold">Next</span>.</span></li>
                     <li class="stepexpand"><span>Click <span class="bold">Finish</span>.</span><div>
                           <p>NetCA creates an <code class="codeph">ldap.ora</code> file in the <span class="italic"><code class="codeph">$ORACLE_HOME</code></span><code class="codeph">/network/admin</code> directory. This is the <span class="italic"><code class="codeph">$ORACLE_HOME</code></span><code class="codeph">\network\admin</code> directory in Windows. The <code class="codeph">ldap.ora</code> file stores the connection information details about the directory. 
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="DBIMI566"></a><a id="DBIMI236"></a><div class="props_rev_3"><a id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77" name="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77"></a><h3 id="DBIMI-GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77" class="sect3">Registering Your Database with the Directory</h3>
               <div>
                  <div class="section">
                     <p>The next step is to register the database with the directory service. The Database Configuration Assistant (DBCA) tool enables you to register the database with Oracle Internet Directory. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-3C81A92C-2832-4860-92CD-711AC3E0288A">To register the database with the directory:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start DBCA using the <code class="codeph">dbca</code> command. </span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>On Windows, you can also start DBCA from the Start menu:</p>
                                 <p>Click <span class="bold">Start, All Programs, Oracle -</span> <span class="italic"><span class="bold">OracleHomeName</span></span>, <span class="bold">Configuration and Migration Tools, Database Configuration Assistant.</span></p>
                              </li>
                              <li>
                                 <p>On Unix systems, you can start DBCA using the following command:</p>
                                 <p><span class="italic"><code class="codeph">$ORACLE_HOME</code></span><code class="codeph">/bin/dbca</code> 
                                 </p>
                              </li>
                           </ul>
                           <p>The Welcome screen appears.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Click <span class="bold">Next</span>.</span><div>
                           <p>The Operations screen displays. </p>
                           <div class="figure" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-95386736-9970-4E60-A37E-50237BE1AF26"><img src="img/dbca2.gif" alt="Description of dbca2.gif follows" title="Description of dbca2.gif follows" longdesc="img_text/dbca2.html"><br><a href="img_text/dbca2.html">Description of the illustration dbca2.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>Select <span class="bold">Configure Database Options</span>. Click <span class="bold">Next</span>.</span><div>
                           <p>The Database screen appears. </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Select the database name that you wish to configure. You might also be asked to enter <code class="codeph">SYS</code> user credentials if you are not using operating system authentication. Click <span class="bold">Next</span>.</span><div>
                           <p>The Management Options screen appears. </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Select the management options, and click <span class="bold">Next</span>.</span><div>
                           <p>The Security Settings screen appears. </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Select <span class="bold">Keep the enhanced 12c default security settings</span> to keep the Oracle Database 12<span class="italic">c</span> security settings. Click <span class="bold">Next</span>.</span><div>
                           <p>The Network Configuration screen appears. </p>
                           <div class="figure" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-860469C2-8CE3-4F85-8E4E-97E3C2F93096"><img src="img/dbca6.gif" alt="Description of dbca6.gif follows" title="Description of dbca6.gif follows" longdesc="img_text/dbca6.html"><br><a href="img_text/dbca6.html">Description of the illustration dbca6.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>Select <span class="bold">Yes, register the database</span> to register the database with the directory. Enter the distinguished name (DN) of a user who is authorized to register databases in Oracle Internet Directory. Also, enter the password for the directory user. Enter a wallet password. Reenter the password in the <span class="bold">Confirm Password</span> field. Click <span class="bold">Next</span>.</span><div>
                           <div class="infoboxnote" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-D0E6D7ED-2695-48EC-B22C-E8BA9C69DE93">
                              <p class="notep1">Note:</p>
                              <p> The database uses a randomly generated password to log in to the directory. This database password is stored in an Oracle wallet. The wallet can also be used to store certificates needed for SSL connections.</p>
                              <p>The wallet password that you specify is different from the database password. The wallet password is used to protect the wallet. </p>
                           </div>
                           <p>The <span class="bold">Database Components</span> screen appears.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Click <span class="bold">Next</span>.</span><div>
                           <p>The <span class="bold">Connection Mode</span> page appears. 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Select <span class="bold">Dedicated Server Mode</span> or <span class="bold">Shared Server Mode</span>. Click <span class="bold">Finish</span>.</span><div>
                           <p>The <span class="bold">Confirmation</span> dialog box appears. 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Click <span class="bold">OK</span>. </span></li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77__GUID-E9F2538A-3675-4A42-B673-10B00A49EBE1">
                        <p class="notep1">Note:</p>
                        <p>After you register the database with the directory, make sure that auto login is enabled for the database wallet. The default wallet is created in the <span class="italic"><code class="codeph">$ORACLE_BASE</code></span><code class="codeph">/admin/</code><span class="italic"><code class="codeph">database_sid</code></span><code class="codeph">/wallet</code> directory.
                        </p>
                        <p>You can verify that auto login for the wallet is enabled by checking for the presence of the <code class="codeph">cwallet.sso</code> file in the wallet directory. If the file is not present, you can enable auto login by opening the wallet using Oracle Wallet Manager, and using the option to enable auto login for the wallet. 
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBIMI567"></a><a id="DBIMI237"></a><div class="props_rev_3"><a id="GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC" name="GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC"></a><h3 id="DBIMI-GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC" class="sect3">Creating a Shared Schema in the Database</h3>
               <div>
                  <div class="section">
                     <p>Creating a shared schema in the database enables you to map multiple enterprise users to the same schema. <a href="getting-started-with-enterprise-user-security.html#GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC__CBHGCHGH">Example 2-1</a>creates a shared schema, <code class="codeph">global_ident_schema_user</code>, and grants the <code class="codeph">CONNECT</code> role to it. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F02B0E21-8805-4599-A15A-9020B42FDDDC__CBHGCHGH">
                     <p class="titleinexample">Example 2-1 Creating a Shared Schema</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE USER global_ident_schema_user IDENTIFIED GLOBALLY;
User created.
SQL&gt; GRANT CONNECT TO global_ident_schema_user;
Grant succeeded.
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI568"></a><a id="DBIMI238"></a><div class="props_rev_3"><a id="GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4" name="GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4"></a><h3 id="DBIMI-GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4" class="sect3">Mapping Enterprise Users to the Shared Schema</h3>
               <div>
                  <div class="section">
                     <p>Enterprise User Security can be managed using Enterprise Manager. <a href="getting-started-with-enterprise-user-security.html#GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4__CBHJGBDH">Example 2-2</a> maps the DN, <code class="codeph">cn=users, dc=us, dc=oracle, dc=com</code> to the shared database schema, <code class="codeph">global_ident_schema_user</code>. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4__CBHJGBDH">
                     <p class="titleinexample">Example 2-2 Mapping Enterprise Users to the Shared Schema</p>
                     <p>To create the user-schema mapping:</p>
                     <ol>
                        <li>
                           <p>Log in to Enterprise Manager Cloud Control, as an administrative user.</p>
                        </li>
                        <li>
                           <p>To navigate to your database, select <span class="bold">Databases</span> from the <span class="bold">Targets</span> menu.
                           </p>
                        </li>
                        <li>
                           <p>Click the database name in the list that appears. The database page appears.</p>
                        </li>
                        <li>
                           <p>Under the <span class="bold">Administration</span> menu, select<span class="bold"> Security, Enterprise User Security.</span> The Oracle Internet Directory Login page appears.
                           </p>
                        </li>
                        <li>
                           <p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.
                           </p>
                           <div class="infoboxnotealso" id="GUID-2EFFF189-C67D-4C78-8A8C-270428A977B4__GUID-E4AD6756-EAF0-4E01-9248-4FD022AB8591">
                              <p class="notep1">See Also:</p>
                              <p><a href="getting-started-with-enterprise-user-security.html#GUID-E7630A49-7279-4B0A-9068-EC8E45E6EB77">Registering Your Database with the Directory</a>, specifically Step 6, where you previously entered the user DN and password to register the database with the directory service
                              </p>
                           </div>
                           <p>The Enterprise User Security page appears.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Manage Enterprise Domains</span>.
                           </p>
                           <p>The Manage Enterprise Domains page appears.</p>
                        </li>
                        <li>
                           <p>Select the enterprise domain which contains the database. Click <span class="bold">Configure</span>.
                           </p>
                           <p>The Configure Domain page appears. </p>
                        </li>
                        <li>
                           <p>Click the <span class="bold">User-Schema Mappings</span> tab. All user-schema maps that apply to the enterprise domain are displayed. 
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Create</span>.
                           </p>
                           <p>The Create Mapping page is displayed.</p>
                        </li>
                        <li>
                           <p>Under the From section, select <span class="bold">Subtree</span>. Click the Search icon. Select the DN, <span class="bold">cn=Users, dc=us,dc=oracle,dc=com</span>.
                           </p>
                        </li>
                        <li>
                           <p>Under the To section, enter global_ident_schema_user in the <span class="bold">Schema</span> field. Click <span class="bold">Continue</span>.
                           </p>
                           <p>The user-schema mapping is added in the Configure Domain page. </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">OK</span>.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI569"></a><a id="DBIMI239"></a><div class="props_rev_3"><a id="GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F" name="GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F"></a><h3 id="DBIMI-GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F" class="sect3">Connecting to the Database as an Enterprise User</h3>
               <div>
                  <div class="section">
                     <p>All users in the mapped Oracle Internet Directory subtree can now connect to the database as enterprise users. <a href="getting-started-with-enterprise-user-security.html#GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F__CBHEDHGI">Example 2-3</a> shows the <code class="codeph">cn=orcladmin, cn=users, dc=us,dc=oracle,dc=com</code> user connecting to the database. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-143F77C6-B304-4720-A844-3CCDD9F56C5F__CBHEDHGI">
                     <p class="titleinexample">Example 2-3 Connecting to the Database as an Enterprise User</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT orcladmin
Enter password:
Connected.
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI570"></a><a id="DBIMI240"></a><div class="props_rev_3"><a id="GUID-86219ABB-1E28-4206-A847-F9366A679785" name="GUID-86219ABB-1E28-4206-A847-F9366A679785"></a><h3 id="DBIMI-GUID-86219ABB-1E28-4206-A847-F9366A679785" class="sect3">Using Enterprise Roles</h3>
               <div>
                  <div class="section">
                     <p>Enterprise roles are created in the directory. Enterprise roles contain global roles from different databases that are part of the enterprise domain. Enterprise roles are used to assign database privileges to enterprise users.</p>
                     <p><a href="getting-started-with-enterprise-user-security.html#GUID-86219ABB-1E28-4206-A847-F9366A679785__CBHEAFJD">Example 2-4</a> creates two enterprise users, Joe and Nina. Both these users are created in the subtree, <code class="codeph">cn=Users, dc=us,dc=oracle,dc=com</code>, which is already mapped to the <code class="codeph">global_ident_schema_user</code> in the EUSDB database. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/dbimi&amp;id=rfc4519_ldap_attr_types" target="_blank">RFC4519 — Lightweight Directory Access Protocol (LDAP) : Schema for User Applications</a> for information about the LDAP attribute types shown in the previous subtree example.
                     </p>
                     <p>Nina is an HR manager. She needs the <code class="codeph">SELECT</code> privilege on the <code class="codeph">hr.employees</code> table in the EUSDB database. <a href="getting-started-with-enterprise-user-security.html#GUID-86219ABB-1E28-4206-A847-F9366A679785__CBHEAFJD">Example 2-4</a> achieves this using enterprise roles. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__CBHEAFJD">
                     <p class="titleinexample">Example 2-4 Using Enterprise Roles</p>
                     <p>We start by creating two enterprise users, Joe and Nina. You can create enterprise users using the Oracle Internet Directory Self Service Console. </p>
                     <p><span class="bold">To create enterprise users, Joe and Nina:</span></p>
                     <ol>
                        <li>
                           <p>Connect to the Oracle Internet Directory Self Service Console. Use the following URL:</p>
                           <p><code class="codeph">http://</code><span class="italic"><code class="codeph">hostname</code></span>:<span class="italic"><code class="codeph">port</code></span><code class="codeph">/oiddas/</code></p>
                           <p>Here, <span class="italic"><code class="codeph">hostname</code></span> is the name of the host that is running the Oracle Internet Directory server. The <span class="italic"><code class="codeph">port</code></span> number is the TCP port number on which the Oracle Internet Directory Self Service Console is running. This is 7777 by default. 
                           </p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-EA31618F-1204-43CC-BE91-C2AC937DDC00"><img src="img/getstrtd7.gif" alt="Description of getstrtd7.gif follows" title="Description of getstrtd7.gif follows" longdesc="img_text/getstrtd7.html"><br><a href="img_text/getstrtd7.html">Description of the illustration getstrtd7.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click the <span class="bold">Directory</span> tab.
                           </p>
                           <p>The Sign In page appears. </p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-1FE61019-B988-43BA-ADC5-1AE6A8FB7ADD"><img src="img/getstrtd8.gif" width="469" alt="Description of getstrtd8.gif follows" title="Description of getstrtd8.gif follows" longdesc="img_text/getstrtd8.html"><br><a href="img_text/getstrtd8.html">Description of the illustration getstrtd8.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Log in as the user that can create users in Oracle Internet Directory.</p>
                           <p>The User page appears. </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Create</span>.
                           </p>
                           <p>The Create User page appears. </p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-609415AE-7FC9-4317-A168-D919750EF17F"><img src="img/getstrtd9.gif" alt="Description of getstrtd9.gif follows" title="Description of getstrtd9.gif follows" longdesc="img_text/getstrtd9.html"><br><a href="img_text/getstrtd9.html">Description of the illustration getstrtd9.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Enter joe under <span class="bold">User Name</span>. Enter values for the other required fields. Select Enabled under <span class="bold">Is Enabled</span>.
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Submit</span>.
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Create Another User</span>.
                           </p>
                           <p>The Create User page appears. </p>
                        </li>
                        <li>
                           <p>Enter Nina under <span class="bold">User Name</span>. Enter values for the other required fields. Select Enabled under <span class="bold">Is Enabled</span>.
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Submit</span>. Click <span class="bold">OK</span>.
                           </p>
                        </li>
                     </ol>
                     <p>Next, we create a global role in the database that allows access to the <code class="codeph">hr.employees</code> table. The following SQL*Plus statements create a global role, <code class="codeph">hr_access</code> and grant the necessary privilege to it.
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE ROLE hr_access IDENTIFIED GLOBALLY;
Role created.
SQL&gt; GRANT SELECT ON hr.employees TO hr_access;
Grant succeeded.
</pre><p>Next, we create an enterprise role called <code class="codeph">hr_access</code> and assign the global role to it. We then assign this enterprise role to the enterprise user, Nina. The enterprise role can be created using Enterprise Manager.
                     </p>
                     <p><span class="bold">To create the enterprise role,</span> <span class="bold"><code class="codeph">hr_access:</code></span></p>
                     <ol>
                        <li>
                           <p>Log in to Enterprise Manager Cloud Control, as an administrative user.</p>
                        </li>
                        <li>
                           <p>To navigate to your database, select <span class="bold">Databases</span> from the <span class="bold">Targets</span> menu.
                           </p>
                        </li>
                        <li>
                           <p>Click the database name in the list that appears. The database page appears.</p>
                        </li>
                        <li>
                           <p>Under the <span class="bold">Administration</span> menu, select<span class="bold"> Security, Enterprise User Security.</span> The Oracle Internet Directory Login page appears.
                           </p>
                        </li>
                        <li>
                           <p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.
                           </p>
                           <p>The Enterprise User Security page appears.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Manage Enterprise Domains</span>.
                           </p>
                           <p>The Manage Enterprise Domains page appears. This page lists the enterprise domains in the identity management realm.</p>
                        </li>
                        <li>
                           <p>Select the enterprise domain that contains the database. Click <span class="bold">Configure</span>.
                           </p>
                           <p>The Configure Domain page appears. </p>
                        </li>
                        <li>
                           <p>Click the <span class="bold">Enterprise Roles</span> tab. 
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Create</span>.
                           </p>
                           <p>The <span class="bold">Create Enterprise Role</span> page appears.
                           </p>
                        </li>
                        <li>
                           <p>Enter hr_access in the <span class="bold">Name</span> field.
                           </p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-590987BF-A687-45F7-B2FE-D337132F5444"><img src="img/getstrtd11.gif" alt="Description of getstrtd11.gif follows" title="Description of getstrtd11.gif follows" longdesc="img_text/getstrtd11.html"><br><a href="img_text/getstrtd11.html">Description of the illustration getstrtd11.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click <span class="bold">Add</span> to add the database global role to the enterprise role.
                           </p>
                           <p>The Search and Select Database Global Roles window is displayed.</p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-F4A78DD4-4D5D-4276-AFFF-0AC067507C64"><img src="img/getstrtd12.gif" alt="Description of getstrtd12.gif follows" title="Description of getstrtd12.gif follows" longdesc="img_text/getstrtd12.html"><br><a href="img_text/getstrtd12.html">Description of the illustration getstrtd12.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Select the <code class="codeph">hr_access</code> global role in your database. Click <span class="bold">Select</span>.
                           </p>
                           <div class="infoboxnote" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-C3E13170-B821-4D49-9B11-32CF2BC06FDB">
                              <p class="notep1">Note:</p>
                              <p>You will be required to log in to the database before you can select the global role.</p>
                           </div>
                        </li>
                        <li>
                           <p>Click the <span class="bold">Grantees</span> tab. Click <span class="bold">Add</span>.
                           </p>
                           <p>The Select Users or Groups window appears. </p>
                        </li>
                        <li>
                           <p>Select user Nina. Click <span class="bold">Select</span>.
                           </p>
                           <div class="figure" id="GUID-86219ABB-1E28-4206-A847-F9366A679785__GUID-627786CE-122D-49CF-8E2B-EBF9CDE99258"><img src="img/getstrtd10.gif" alt="Description of getstrtd10.gif follows" title="Description of getstrtd10.gif follows" longdesc="img_text/getstrtd10.html"><br><a href="img_text/getstrtd10.html">Description of the illustration getstrtd10.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click <span class="bold">Continue</span> in the Create Enterprise Role page.
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">OK</span> in the Configure Domain page.
                           </p>
                        </li>
                     </ol>
                     <p>The enterprise user, Nina can now access the <code class="codeph">hr.employees</code> table in the database. The following SQL*Plus statements illustrate this:
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT Nina
Enter password:
Connected.
SQL&gt; SELECT employee_id FROM hr.employees;
EMPLOYEE_ID
-----------
        100
        101
        102
...
...
107 rows selected.
</pre><p>The enterprise user, Joe cannot access the <code class="codeph">hr.employees</code> table, as he does not have the enterprise role assigned to him. 
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT joe
Enter password:
Connected.
SQL&gt; SELECT employee_id FROM hr.employees;
SELECT employee_id FROM hr.employees

ERROR at line 1:
ORA-00942: table or view does not exist

</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI571"></a><a id="DBIMI241"></a><div class="props_rev_3"><a id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D" name="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D"></a><h3 id="DBIMI-GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D" class="sect3">Using Proxy Permissions</h3>
               <div>
                  <div class="section">
                     <p>Proxy permissions are created at the enterprise domain level. Proxy permissions allow an enterprise user to proxy a local database user, which means that the enterprise user can log in to the database as the local database user. You can grant proxy permissions to individual enterprise users or groups. Proxy permissions are especially useful for middle-tier applications that operate across multiple databases as enterprise users.</p>
                     <p><a href="getting-started-with-enterprise-user-security.html#GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__CBHJJJIG">Example 2-5</a> illustrates the use of proxy permissions. The enterprise user, <code class="codeph">joe</code> is a sales manager and needs to log in to enterprise databases as the target database user, <code class="codeph">SH</code>. The <code class="codeph">SH</code> user owns the sample <code class="codeph">SH</code> schema that contains Sales History related tables.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__CBHJJJIG">
                     <p class="titleinexample">Example 2-5 Using Proxy Permissions</p>
                     <p>The first step in allowing enterprise user proxy is to <code class="codeph">ALTER</code> the target database user to allow <code class="codeph">CONNECT</code> through enterprise users. The following <code class="codeph">SQL</code> statements unlock the <code class="codeph">SH</code> database account, set a password for it, and <code class="codeph">ALTER</code> the account to allow enterprise user proxy:
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT SYSTEM
Enter password:
Connected.
SQL&gt; ALTER USER SH IDENTIFIED BY hrd2guess ACCOUNT UNLOCK;
User altered.
SQL&gt; ALTER USER SH GRANT CONNECT THROUGH ENTERPRISE USERS;
User altered.
</pre><p>Next, use Enterprise Manager to configure the proxy permission. This allows the enterprise user <code class="codeph">joe</code> to connect as the local database user, <code class="codeph">SH</code>.
                     </p>
                     <p><span class="bold">To configure the proxy permission for enterprise user,</span> <span class="bold"><code class="codeph">joe</code></span><span class="bold">:</span></p>
                     <ol>
                        <li>
                           <p>Log in to Enterprise Manager Cloud Control, as an administrative user.</p>
                        </li>
                        <li>
                           <p>To navigate to your database, select <span class="bold">Databases</span> from the <span class="bold">Targets</span> menu.
                           </p>
                        </li>
                        <li>
                           <p>Click the database name in the list that appears. The database page appears.</p>
                        </li>
                        <li>
                           <p>Under the <span class="bold">Administration</span> menu, select<span class="bold"> Security, Enterprise User Security.</span> The Oracle Internet Directory Login page appears.
                           </p>
                        </li>
                        <li>
                           <p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.
                           </p>
                           <p>The Enterprise User Security page appears.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Manage Enterprise Domains</span>.
                           </p>
                           <p>The Manage Enterprise Domains page appears. This page lists the enterprise domains in the identity management realm.</p>
                        </li>
                        <li>
                           <p>Select the enterprise domain that you wish to configure. Click <span class="bold">Configure</span>.
                           </p>
                           <p>The Configure Domain page appears. </p>
                        </li>
                        <li>
                           <p>Click the <span class="bold">Proxy Permissions</span> tab. 
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-2F2A1035-E9C9-467C-84C4-89407AC48A22"><img src="img/getstrtd13.gif" alt="Description of getstrtd13.gif follows" title="Description of getstrtd13.gif follows" longdesc="img_text/getstrtd13.html"><br><a href="img_text/getstrtd13.html">Description of the illustration getstrtd13.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click <span class="bold">Create</span> to create a new proxy permission.
                           </p>
                           <p>The <span class="bold">Create Proxy Permission</span> page appears.
                           </p>
                        </li>
                        <li>
                           <p>Enter SH_Proxy, as the name of the proxy permission, in the <span class="bold">Name</span> field. 
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-DAD56C5A-0393-40A9-8FF5-BB23AAE30BFD"><img src="img/getstrtd14.gif" alt="Description of getstrtd14.gif follows" title="Description of getstrtd14.gif follows" longdesc="img_text/getstrtd14.html"><br><a href="img_text/getstrtd14.html">Description of the illustration getstrtd14.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Ensure that the <span class="bold">Target DB Users</span> tab is selected. Click <span class="bold">Add</span>.
                           </p>
                           <p>The Search and Select window appears. </p>
                        </li>
                        <li>
                           <p>Log in to the database that contains the <code class="codeph">SH</code> user. A list of all database users that have been altered to allow enterprise user proxy is displayed.
                           </p>
                        </li>
                        <li>
                           <p>Select the SH user. Click <span class="bold">Select</span>.
                           </p>
                           <p>The <code class="codeph">SH</code> user is added under Target DB Users in the Create Proxy Permission page. 
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-F3BCBF7D-6913-48B5-97C3-B4875071297C"><img src="img/getstrtd15.gif" alt="Description of getstrtd15.gif follows" title="Description of getstrtd15.gif follows" longdesc="img_text/getstrtd15.html"><br><a href="img_text/getstrtd15.html">Description of the illustration getstrtd15.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click the <span class="bold">Grantees</span> tab. 
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Add</span>.
                           </p>
                           <p> The Select Users or Groups window appears.</p>
                        </li>
                        <li>
                           <p>Select <code class="codeph">cn=users,dc=us,dc=oracle,dc=com</code> under <span class="bold">Search Base</span>. Select <code class="codeph">User</code> under <span class="bold">View</span>. Click <span class="bold">Go</span>.
                           </p>
                           <p>A list of users under the subtree, <code class="codeph">cn=users,dc=us,dc=oracle,dc=com</code> is displayed. 
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-73C05E2B-3562-4081-9C3A-D2612698D432"><img src="img/getstrtd16.gif" width="559" alt="Description of getstrtd16.gif follows" title="Description of getstrtd16.gif follows" longdesc="img_text/getstrtd16.html"><br><a href="img_text/getstrtd16.html">Description of the illustration getstrtd16.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Select <code class="codeph">cn=joe,cn=users,dc=us,dc=oracle,dc=com</code>. Click <span class="bold">Select</span>.
                           </p>
                           <p>The user <code class="codeph">joe</code> is added under <span class="bold">Grantees</span> in the Create Proxy Permission page. 
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-A0711055-3325-4E89-8CD9-BA46E5682F07"><img src="img/getstrtd17.gif" alt="Description of getstrtd17.gif follows" title="Description of getstrtd17.gif follows" longdesc="img_text/getstrtd17.html"><br><a href="img_text/getstrtd17.html">Description of the illustration getstrtd17.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click <span class="bold">Continue</span> in the Create Proxy Permission page.
                           </p>
                           <p>The proxy permission, <code class="codeph">SH_Proxy</code> is added in the Configure Domain page. 
                           </p>
                           <div class="figure" id="GUID-475A2CAA-7D97-42FF-8985-CF3DB0E0284D__GUID-B1D85938-FF14-4926-8B5D-A7183A561ACA"><img src="img/getstrtd18.gif" alt="Description of getstrtd18.gif follows" title="Description of getstrtd18.gif follows" longdesc="img_text/getstrtd18.html"><br><a href="img_text/getstrtd18.html">Description of the illustration getstrtd18.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click <span class="bold">OK</span>.
                           </p>
                        </li>
                     </ol>
                     <p>The enterprise user, <code class="codeph">joe</code> can now log in as the local database user <code class="codeph">SH</code>. The following <code class="codeph">SQL</code> statements illustrate this:
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; REMARK Joe uses his own password to connect as the local database user, SH.
SQL&gt; CONNECT joe[SH]
Enter password:
Connected.
SQL&gt; SELECT * FROM SH.sales WHERE cust_id=4;

   PROD_ID    CUST_ID TIME_ID   CHANNEL_ID   PROMO_ID QUANTITY_SOLD AMOUNT_SOLD
---------- ---------- --------- ---------- ---------- ------------- -----------
        37          4 31-MAY-00          3        999             1       60.43
        39          4 31-MAY-00          3        999             1       38.45
        40          4 31-MAY-00          3        999             1        48.1
...
...
72 rows selected.
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBIMI10231"></a><div class="props_rev_3"><a id="GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C" name="GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C"></a><h3 id="DBIMI-GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C" class="sect3">Using Pluggable Databases</h3>
               <div>
                  <p>You can use Enterprise User Security with Pluggable Databases (PDBs), introduced in Oracle Database 12<span class="italic">c</span> Release 1 (12.1). Each PDB has its own Enterprise User Security metadata, such as global users, global roles, and so on. Each PDB should have its own identity in the directory. A PDB is like any regular database registered with the directory, except for the following restrictions:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Client-side SSL authentication uses the Container Database (CDB)-wide wallet configured for the listener. The PDB-specific wallet is used for database-to-directory authentication. </p>
                     </li>
                     <li>
                        <p>If the client-to-database authentication uses <code class="codeph">SSL</code>, and the database-to-directory authentication also uses <code class="codeph">SSL</code>, then two wallets need to be configured for the database with certificates. The first wallet is the CDB-wide wallet and the second wallet is the PDB-specific wallet. 
                        </p>
                     </li>
                     <li>
                        <p>Current user database link is not supported in the CDB environment. </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-ECF44B7C-610F-49FC-9865-ED9BAA0DF22C__GUID-42BE03FE-4145-4B99-943C-66BB6CAF1CD9">
                     <p class="notep1">Note:</p>
                     <p><code class="codeph">LDAP_DIRECTORY_ACCESS</code> parameter is the same for all PDBs. Even if only a subset of PDBs register with the directory, each PDB sees the <code class="codeph">LDAP_DIRECTORY_ACCESS</code> value as if the PDB is registered.
                     </p>
                  </div>
                  <div class="p">The following sections describe more information about using pluggable databases:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="getting-started-with-enterprise-user-security.html#GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8">Wallet Location for Pluggable Databases</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-enterprise-user-security.html#GUID-39030131-575E-49E8-AB7B-D2F75D0122E4">Default Database DN Format</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-enterprise-user-security.html#GUID-79CFC1AB-B23A-44AA-8CC6-E74C9FEFEEB6">Plugging and Unplugging PDBs</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-enterprise-user-security.html#GUID-B2397A52-42C7-4482-A68D-184573C03B3C">Switching Containers</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBIMI10232"></a><div class="props_rev_3"><a id="GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8" name="GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8"></a><h4 id="DBIMI-GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8" class="sect4">Wallet Location for Pluggable Databases</h4>
                  <div>
                     <p>For pluggable databases, when a PDB is registered with the directory, the Database Configuration Assistant (DBCA) creates the wallet at the following location:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the <code class="codeph">ORACLE_BASE</code> environment variable is set:
                           </p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_BASE</span>/admin/<span class="italic">db_unique_name</span>/<span class="italic">pdb_GUID</span>/wallet 
</pre></li>
                        <li>
                           <p>If <code class="codeph">ORACLE_BASE</code> is not set:
                           </p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_HOME</span>/admin/<span class="italic">db_unique_name</span>/<span class="italic">pdb_GUID</span>/wallet
</pre><p>The GUID of the PDB is used because the PDB name can change, but the GUID does not change. So, the PDB wallet location is still valid even if the PDB name changes.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-BAD7A4B7-3655-4E3C-9643-72A3FFA9E5E8__GUID-8B93B688-B60F-4F95-9BC4-71948C900E87">
                        <p class="notep1">Note:</p>
                        <p>On the Microsoft Windows x64 platform, without specifying the <code class="codeph">WALLET_LOCATION</code> parameter in the <code class="codeph">listener.ora</code> file and server side <code class="codeph">sqlnet.ora</code> file, the server does not pick up the wallets from the default system location, which is <span class="italic"><code class="codeph">%USERPROFILE%</code></span><code class="codeph">\ORACLE\WALLETS</code>. Hence, when you try to login using an SSL connection, the login fails with the following error: <code class="codeph">ORA-28864: SSL connection closed gracefully</code>. There is no workaround to this known issue.
                        </p>
                     </div>
                  </div>
               </div><a id="DBIMI10233"></a><div class="props_rev_3"><a id="GUID-39030131-575E-49E8-AB7B-D2F75D0122E4" name="GUID-39030131-575E-49E8-AB7B-D2F75D0122E4"></a><h4 id="DBIMI-GUID-39030131-575E-49E8-AB7B-D2F75D0122E4" class="sect4">Default Database DN Format</h4>
                  <div>
                     <p>When a PDB is registered with the directory using DBCA, the default PDB Distinguished Name (DN) is generated in the following format:</p><pre class="oac_no_warn" dir="ltr">cn=<span class="italic">PDB_NAME</span>.<span class="italic">DB_UNIQUE_NAME</span>,cn=oraclecontext,<span class="italic">realm</span>
</pre><p>You can change the default <code class="codeph">cn</code> (<span class="italic">PDB_NAME.DB_UNIQUE_NAME)</span> to a custom value in the DBCA registration screen. It cannot be altered after registration.
                     </p>
                  </div>
               </div><a id="DBIMI10234"></a><div class="props_rev_3"><a id="GUID-79CFC1AB-B23A-44AA-8CC6-E74C9FEFEEB6" name="GUID-79CFC1AB-B23A-44AA-8CC6-E74C9FEFEEB6"></a><h4 id="DBIMI-GUID-79CFC1AB-B23A-44AA-8CC6-E74C9FEFEEB6" class="sect4">Plugging and Unplugging PDBs</h4>
                  <div>
                     <div class="section">
                        <p>You can plug existing registered databases into a CDB. You do not need to register the PDB again, as long as you perform the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Pick the wallet files from the source location and put them in the new default wallet location for the PDB.</p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">LDAP_DIRECTORY_ACCESS</code> parameter to the desired value in the CDB.
                              </p>
                           </li>
                        </ul>
                        <p>Similarly, when unplugging an existing PDB that is registered with the directory, you do not need to re-register the database. You need to copy the wallet to the new default location after unplug. The default location should be:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the <code class="codeph">ORACLE_BASE</code> environment variable is set:
                              </p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_BASE</span>/admin/<span class="italic">db_unique_name</span>/wallet 
</pre></li>
                           <li>
                              <p>If <code class="codeph">ORACLE_BASE</code> is not set:
                              </p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_HOME</span>/admin/<span class="italic">db_unique_name</span>/wallet
</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBIMI10235"></a><div class="props_rev_3"><a id="GUID-B2397A52-42C7-4482-A68D-184573C03B3C" name="GUID-B2397A52-42C7-4482-A68D-184573C03B3C"></a><h4 id="DBIMI-GUID-B2397A52-42C7-4482-A68D-184573C03B3C" class="sect4">Switching Containers</h4>
                  <div>
                     <p>An Enterprise User cannot execute the <code class="codeph">ALTER SESSION SET CONTAINER</code> <span class="italic"><code class="codeph">target-CDB</code></span> command, as an enterprise user is not a common user. 
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
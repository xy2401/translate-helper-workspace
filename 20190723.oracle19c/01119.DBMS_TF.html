<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_TF package contains utilities for Polymorphic Table Functions (PTF) implementation. You can use DBMS_TF subprograms to consume and produce data, and get information about its execution environment.">
      <meta name="description" content="The DBMS_TF package contains utilities for Polymorphic Table Functions (PTF) implementation. You can use DBMS_TF subprograms to consume and produce data, and get information about its execution environment.">
      <title>DBMS_TF</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_TF package contains utilities for Polymorphic Table Functions (PTF) implementation. You can use DBMS_TF subprograms to consume and produce data, and get information about its execution environment.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_TDB.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_TNS.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_TDB.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_TNS.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_TF</li>
            </ol>
            <a id="GUID-E8D0433C-7442-4909-87EF-217ECB278312" name="GUID-E8D0433C-7442-4909-87EF-217ECB278312"></a>
            
            <h2 id="ARPLS-GUID-E8D0433C-7442-4909-87EF-217ECB278312" class="sect2"><span class="enumeration_chapter">169 </span>DBMS_TF
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The DBMS_TF package contains utilities for Polymorphic Table Functions (PTF) implementation. You can use DBMS_TF subprograms to consume and produce data, and get information about its execution environment. </p>
               <div class="section">
                  <p>You must be familiar with the Polymorphic Table Function (PTF) concepts, syntax and semantics.</p>
                  <div class="infoboxnotealso" id="GUID-E8D0433C-7442-4909-87EF-217ECB278312__GUID-08313201-00DA-4190-A119-32B790A035FC">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../lnpls/plsql-optimization-and-tuning.html#LNPLS-GUID-981102A8-5204-4931-B10A-93486304B184" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for an overview of Polymorphic Table Function (PTF) concepts
                           </p>
                        </li>
                        <li>
                           <p><a href="../lnpls/PIPELINED-clause.html#LNPLS-GUID-FA182210-C68D-4E03-85B9-A6C681099705" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about <code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code> <code class="codeph">PIPELINED</code> clause syntax and semantics
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>This chapter contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="DBMS_TF.html#GUID-A0AE8010-FB2C-4AE2-892B-1357FFBC649B" title="The DBMS_TF package contains types, constants, and subprograms that can be used by Polymorphic Table Functions (PTFs).">DBMS_TF Overview</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_TF.html#GUID-218FB90B-605E-4E70-B359-519ABA786F63">DBMS_TF Security Model</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_TF.html#GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05" title="This topic describes useful constants defined in the DBMS_TF package.">DBMS_TF Constants</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_TF.html#GUID-F4FF6B9F-9438-4E40-8EEC-1E98E936166C" title="These operational notes describe the client and the server-side interfaces, and detail the compilation and execution statement management of Polymorphic Table Functions (PTF).">DBMS_TF Operational Notes</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_TF.html#GUID-6751290C-C9F7-40B7-AF6D-A108AB482E45" title="Query executions invoking Polymorphic Table Functions (PTF) follow this execution model and data transfers flow.">DBMS_TF Execution Flow</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_TF.html#GUID-B21F7DDF-A9EC-4CAE-AC98-84983B6FCFCD" title="These restrictions apply to Polymorphic Table Functions (PTFs) and using the DBMS_TF package.">DBMS_TF Restrictions</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_TF.html#GUID-2D97C0CD-6AD9-4F86-86E6-C806D688C57A" title="These examples use DBMS_TF subprograms.">DBMS_TF Examples</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_TF.html#GUID-E67D4F4B-1FA5-4A9C-8F1D-83EB4A2A6DC2" title="The DBMS_TF package defines these RECORD types, TABLE types and subtype.">DBMS_TF Data Structures</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_TF.html#GUID-D03D40B2-1D30-4292-938D-8E668C00EBE9" title="This summary briefly describes the DBMS_TF package subprograms.">Summary of DBMS_TF Subprograms</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-A0AE8010-FB2C-4AE2-892B-1357FFBC649B" name="GUID-A0AE8010-FB2C-4AE2-892B-1357FFBC649B"></a><h3 id="ARPLS-GUID-A0AE8010-FB2C-4AE2-892B-1357FFBC649B" class="sect3"><span class="enumeration_section">169.1 </span>DBMS_TF Overview
               </h3>
               <div>
                  <p>The DBMS_TF package contains types, constants, and subprograms that can be used by Polymorphic Table Functions (PTFs).</p>
                  <div class="section">
                     <p>Polymorphic Table Functions (PTFs) need various services from the database to implement their functionality. PTFs need a mechanism to get rows from the database and send back new rows, for instance. The DBMS_TF package provides these server and client interfaces utilities.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-218FB90B-605E-4E70-B359-519ABA786F63" name="GUID-218FB90B-605E-4E70-B359-519ABA786F63"></a><h3 id="ARPLS-GUID-218FB90B-605E-4E70-B359-519ABA786F63" class="sect3"><span class="enumeration_section">169.2 </span>DBMS_TF Security Model
               </h3>
               <div>
                  <div class="section">
                     <p>PUBLIC is granted the EXECUTE privilege on package DBMS_TF. Its subprograms execute with invoker's rights privileges. </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05" name="GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05"></a><h3 id="ARPLS-GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05" class="sect3"><span class="enumeration_section">169.3 </span>DBMS_TF Constants
               </h3>
               <div>
                  <p>This topic describes useful constants defined in the DBMS_TF package.</p>
                  <div class="section">
                     <p>The <code class="codeph">DBMS_TF</code> package defines several enumerated constants that should be used for specifying parameter values or types. Enumerated constants must be prefixed with the package name, for example, <code class="codeph">DBMS_TF</code>.<code class="codeph">TYPE_DATE</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="tblformal" id="GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05__DBMS_TFSUPPORTEDTYPES-3ACFD083">
                        <p class="titleintable">Table 169-1 DBMS_TF Supported Types</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF Supported Types" summary="This table describes supported types for DBMS_TF GET_COL and PUT_COL subprograms." frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d1047042e480">Name</th>
                                 <th align="left" valign="bottom" id="d1047042e483">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e488" headers="d1047042e480 "><code class="codeph">TYPE_BINARY_DOUBLE</code></td>
                                 <td align="left" valign="top" headers="d1047042e488 d1047042e483 ">
                                    <p>Type code for <code class="codeph">BINARY_DOUBLE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e497" headers="d1047042e480 "><code class="codeph">TYPE_BINARY_FLOAT</code></td>
                                 <td align="left" valign="top" headers="d1047042e497 d1047042e483 ">
                                    <p>Type code for <code class="codeph">BINARY_FLOAT</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e506" headers="d1047042e480 "><code class="codeph">TYPE_BLOB</code></td>
                                 <td align="left" valign="top" headers="d1047042e506 d1047042e483 ">
                                    <p>Type code for <code class="codeph">BLOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e515" headers="d1047042e480 "><code class="codeph">TYPE_CHAR</code></td>
                                 <td align="left" valign="top" headers="d1047042e515 d1047042e483 ">
                                    <p>Type code for <code class="codeph">CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e524" headers="d1047042e480 "><code class="codeph">TYPE_CLOB</code></td>
                                 <td align="left" valign="top" headers="d1047042e524 d1047042e483 ">
                                    <p>Type code for <code class="codeph">CLOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e533" headers="d1047042e480 "><code class="codeph">TYPE_DATE</code></td>
                                 <td align="left" valign="top" headers="d1047042e533 d1047042e483 ">
                                    <p>Type code for <code class="codeph">DATE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e542" headers="d1047042e480 "><code class="codeph">TYPE_INTERVAL_DS</code></td>
                                 <td align="left" valign="top" headers="d1047042e542 d1047042e483 ">
                                    <p>Type code for <code class="codeph">INTERVAL_DS</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e551" headers="d1047042e480 "><code class="codeph">TYPE_INTERVAL_YM</code></td>
                                 <td align="left" valign="top" headers="d1047042e551 d1047042e483 ">
                                    <p>Type code for <code class="codeph">INTERVAL_YM</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e560" headers="d1047042e480 "><code class="codeph">TYPE_NUMBER</code></td>
                                 <td align="left" valign="top" headers="d1047042e560 d1047042e483 ">
                                    <p>Type code for <code class="codeph">NUMBER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e569" headers="d1047042e480 "><code class="codeph">TYPE_ROWID</code></td>
                                 <td align="left" valign="top" headers="d1047042e569 d1047042e483 ">
                                    <p>Type code for <code class="codeph">ROWID</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e578" headers="d1047042e480 "><code class="codeph">TYPE_RAW</code></td>
                                 <td align="left" valign="top" headers="d1047042e578 d1047042e483 ">
                                    <p>Type code for <code class="codeph">RAW</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e588" headers="d1047042e480 "><code class="codeph">TYPE_TIMESTAMP</code></td>
                                 <td align="left" valign="top" headers="d1047042e588 d1047042e483 ">
                                    <p>Type code for <code class="codeph">TIMESTAMP</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e597" headers="d1047042e480 "><code class="codeph">TYPE_TIMESTAMP_TZ</code></td>
                                 <td align="left" valign="top" headers="d1047042e597 d1047042e483 ">
                                    <p>Type code for <code class="codeph">TIMESTAMP_TZ</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e606" headers="d1047042e480 "><code class="codeph">TYPE_VARCHAR2</code></td>
                                 <td align="left" valign="top" headers="d1047042e606 d1047042e483 ">
                                    <p>Type code for <code class="codeph">VARCHAR2</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Additional constants are defined for use with specific subprograms.</p>
                     <div class="p">
                        <div class="infoboxnotealso" id="GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05__GUID-BC900143-8637-4BFF-9C24-06F37D6CEB66">
                           <p class="notep1">See Also:</p>
                           <div class="p">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="DBMS_TF.html#GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__DBMS_TFCSTOREPREDEFINEDTYPES-24C5B880" title="This table describes predefined scalar supported types to use with the CSTORE subprograms.">Table 169-3</a> for more information about CSTORE related constants
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="DBMS_TF.html#GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__GUID-00B790A0-060E-423D-BF54-CE04D79689B8" title="This table describes method names used by default by DBMS_TF subprograms.">Table 169-4</a> for more information about predefined PTF method names
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="DBMS_TF.html#GUID-44B1E12B-F063-492E-A878-293327A5ACEB__GUID-425E9AF1-350A-46AC-B146-A5F179744BA4" title="This table describes predefined scalar supported types to use with the XSTORE subprograms.">Table 169-6</a>  for more information about XSTORE related constants
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="DBMS_TF.html#GUID-DB56A9B9-15A9-450C-BAFB-28BF4089AED3" title="Each supported type has a corresponding predefined collection defined.">Supported Types Collections</a> for more information about predefined collections of supported types
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-F4FF6B9F-9438-4E40-8EEC-1E98E936166C" name="GUID-F4FF6B9F-9438-4E40-8EEC-1E98E936166C"></a><h3 id="ARPLS-GUID-F4FF6B9F-9438-4E40-8EEC-1E98E936166C" class="sect3"><span class="enumeration_section">169.4 </span>DBMS_TF Operational Notes
               </h3>
               <div>
                  <p>These operational notes describe the client and the server-side interfaces, and detail the compilation and execution statement management of Polymorphic Table Functions (PTF). </p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED" name="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED"></a><h4 id="ARPLS-GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED" class="sect4"><span class="enumeration_section">169.4.1 </span>PTF Client Interface
                  </h4>
                  <div>
                     <p>The Polymorphic Table Function (PTF) implementation client interface is a set of subprograms with fixed names that every PTF must provide. </p>
                     <p>The PTF client interface can have up to four subprograms as follow :</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">DESCRIBE</code> function (Required) 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OPEN</code> procedure (Optional) 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">FETCH_ROWS</code> procedure (Optional) 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CLOSE</code> procedure (Optional)
                           </p>
                        </li>
                     </ul>
                     <p>The function <code class="codeph">DESCRIBE</code> is invoked during SQL cursor compilation.
                     </p>
                     <p>The procedures <code class="codeph">OPEN</code>, <code class="codeph">FETCH_ROWS</code>, and <code class="codeph">CLOSE</code> are invoked during query execution. 
                     </p>
                     <p>The arguments to the implementation functions must match the PTF function with the following modifications: </p>
                     <ol>
                        <li>
                           <p>Arguments of the type <code class="codeph">TABLE</code> and <code class="codeph">COLUMNS</code> are skipped for the execution procedures <code class="codeph">OPEN</code>,<code class="codeph"> FETCH_ROWS</code>, and<code class="codeph"> CLOSE</code>.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">TABLE</code> and <code class="codeph">COLUMNS</code> arguments have descriptor types for the <code class="codeph">DESCRIBE</code> function. 
                           </p>
                        </li>
                        <li>
                           <p>Scalar arguments that are not available during compilation are passed as NULL values (when using bind variables for instance). During execution, the actual values are passed in. </p>
                        </li>
                     </ol>
                     <div class="section" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__DESCRIBE-23372474">
                        <p class="subhead3" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__GUID-CCF9EAF3-2226-4234-8686-C97F47B82201">DESCRIBE Function</p>
                        <p>The <code class="codeph">DESCRIBE</code> function is invoked to determine the type of rows (row shape) produced by the Polymorphic Table Function (PTF). It returns a <code class="codeph">DBMS_TF.DESCRIBE_T</code> table.
                        </p>
                        <p>The function <code class="codeph">DESCRIBE</code> is invoked during SQL cursor compilation when a SQL query references a PTF. The SQL compiler locates the <code class="codeph">DESCRIBE</code> function defined in the PTF implementation package. All the argument values from the query calling the PTF are passed to the <code class="codeph">DESCRIBE</code> function. Like any PLSQL function, the <code class="codeph">DESCRIBE</code> function can be overloaded and can have arguments default values. 
                        </p>
                        <p>The arguments of the PTF function and <code class="codeph">DESCRIBE</code> function must match, but with the type of any <code class="codeph">TABLE</code> argument replaced with the <code class="codeph">DBMS_TF.TABLE_T</code> descriptor type, and the type of any <code class="codeph">COLUMNS</code> argument replaced with <code class="codeph">DBMS_TF.COLUMN_T</code> descriptor. 
                        </p>
                        <p>The <code class="codeph">DESCRIBE</code> function indicates which columns must be kept by the database and passed unchanged as the PTF output (Pass-Through columns). In addition,  the <code class="codeph">DESCRIBE</code> function indicates any input columns that the PTF will use for its computation (Read columns). 
                        </p>
                        <p>Finally, the <code class="codeph">DESCRIBE</code> function returns the list of any new columns that the PTF will create (or <code class="codeph">NULL</code> if no new columns are being produced) using the <code class="codeph">DBMS_TF.DESCRIBE_T</code> descriptor. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__OPEN-23372763">
                        <p class="subhead3" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__GUID-F5A352B6-361C-40BD-8AFA-FC676E583B12">OPEN Procedure</p>
                        <p>The <code class="codeph">OPEN</code> procedure purpose is to initialize and allocate any execution specific state. The <code class="codeph">OPEN</code> procedure is most useful when you implement a Table Semantics PTF. The function typically calls the <code class="codeph">GET_XID</code> function to get a unique ID for managing the execution state. 
                        </p>
                        <p><code class="codeph">OPEN</code> procedure is generally invoked before calling the <code class="codeph">FETCH_ROWS</code>  procedure. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__FETCH_ROWS-23372A3A">
                        <p class="subhead3" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__GUID-90C2A1B8-444D-4705-B0BC-5D94633AF5F1">FETCH_ROWS Procedure</p>
                        <p>The <code class="codeph">FETCH_ROWS</code> procedure produces an output rowset that it sends to the database. The number of invocations of this function and the size of each rowset are data dependent and determined during query execution. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__CLOSE-23372C4B">
                        <p class="subhead3" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__GUID-1FA481E5-0271-4C30-BF68-341614D78A96">CLOSE Procedure</p>
                        <p>The <code class="codeph">CLOSE</code> procedure is called at the end of the PTF execution. The procedure releases resources associated with the PTF execution state.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__NOOPPOLYMORPHICTABLEFUNCTION-35241E9E">
                        <p class="titleinexample">Example 169-1 Noop Polymorphic Table Function Example</p>
                        <p>This example creates a PTF called noop. This PTF returns the input rows as the output rows without any modification or filtering. Noop is one of the smallest PTF you can write. </p>
                        <div class="infoboxnote" id="GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__GUID-48B486B6-0819-49A1-B51F-576E6BC41C6E">
                           <p class="notep1">Live SQL:</p>
                           <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/arpls/ptf/ptfnoop.html" target="_blank">Noop Polymorphic Table Function</a></p>
                        </div>
                        <p>To implement the noop PTF, you first create the implementation package noop_package. </p><pre class="pre codeblock"><code>CREATE PACKAGE noop_package AS
   FUNCTION describe(t IN OUT DBMS_TF.TABLE_T)
     RETURN DBMS_TF.DESCRIBE_T;

   PROCEDURE fetch_rows;
END noop_package;
</code></pre><p>The <code class="codeph">DESCRIBE</code> function does not produce any new columns and hence, returns <code class="codeph">NULL</code>. Executing <code class="codeph">FETCH_ROWS</code> also results in <code class="codeph">NULL</code>.
                        </p><pre class="pre codeblock"><code>CREATE PACKAGE BODY noop_package AS
   FUNCTION describe(t IN OUT DBMS_TF.TABLE_T)
     RETURN DBMS_TF.DESCRIBE_T AS
     BEGIN
       RETURN NULL;
     END;

   PROCEDURE fetch_rows AS
   BEGIN
     RETURN;
   END;
END noop_package;</code></pre><p>The noop PTF is defined to execute the noop_package when it is invoked.</p><pre class="pre codeblock"><code>CREATE FUNCTION noop (t TABLE)
  RETURN TABLE PIPELINED ROW POLYMORPHIC USING noop_package;</code></pre><p>The PTF can be invoked in queries. For example:</p><pre class="pre codeblock"><code>SELECT *
FROM   NOOP(emp)
WHERE deptno = 10; </code></pre><pre class="oac_no_warn" dir="ltr">      7782 CLARK      MANAGER         7839 09-JUN-81       2450        10
      7839 KING       PRESIDENT            17-NOV-81       5000        10
      7934 MILLER     CLERK           7782 23-JAN-82       1300        10
</pre><pre class="pre codeblock"><code>WITH e
     AS (SELECT *
         FROM   emp
                NATURAL JOIN dept
         WHERE dname = 'SALES')
SELECT t.*
FROM   NOOP(e) t; </code></pre><pre class="oac_no_warn" dir="ltr">  30       7499 ALLEN      SALESMAN        7698 20-FEB-81       1600       300 SALES          CHICAGO
  30       7521 WARD       SALESMAN        7698 22-FEB-81       1250       500 SALES          CHICAGO
  30       7654 MARTIN     SALESMAN        7698 28-SEP-81       1250      1400 SALES          CHICAGO
  30       7698 BLAKE      MANAGER         7839 01-MAY-81       2850           SALES          CHICAGO
  30       7844 TURNER     SALESMAN        7698 08-SEP-81       1500         0 SALES          CHICAGO
  30       7900 JAMES      CLERK           7698 03-DEC-81        950           SALES          CHICAGO
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div class="sect4"><a id="GUID-6E589F68-6693-42A1-8766-61AF1476DE1C" name="GUID-6E589F68-6693-42A1-8766-61AF1476DE1C"></a><h5 id="ARPLS-GUID-6E589F68-6693-42A1-8766-61AF1476DE1C" class="sect5"><span class="enumeration_section">169.4.1.1 </span>DESCRIBE Only Polymorphic Table Function
                     </h5>
                     <div>
                        <p>A Polymorphic Table Function (PTF) can have a DESCRIBE function only.</p>
                        <div class="section">
                           <p>A PTF which does not have any runtime methods (Open/Fetch_Rows/Close) is used only at cursor compilation time with no runtime row source allocated. The explain plan output of a Describe-Only PTF will not show any rows for the PTF.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-49232E37-8EFE-4440-A2CC-3E61F7153935" name="GUID-49232E37-8EFE-4440-A2CC-3E61F7153935"></a><h4 id="ARPLS-GUID-49232E37-8EFE-4440-A2CC-3E61F7153935" class="sect4"><span class="enumeration_section">169.4.2 </span>PTF Server Side Interface
                  </h4>
                  <div>
                     <p>The <code class="codeph">DBMS_TF</code> package provides the server side interface needed for Polymorphic Table Functions (PTFs) implementation to read and write information in the database.
                     </p>
                     <p>This topic contains a partial list of types and subprograms used for the PTF server side implementation. </p>
                     <div class="tblformal" id="GUID-49232E37-8EFE-4440-A2CC-3E61F7153935__GUID-9BC8ACDE-172B-4FFA-819D-BAD048F51DF2">
                        <p class="titleintable">Table 169-2 Summary of Commonly Used Types and Subprograms in PTF Server Side Interface</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Summary of Commonly Used Types and Subprograms in PTF Server Side Interface" summary="This table provides the list of DBMS_TF types and subprograms commonly used in PTF server side interface and gives a description of each." frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d1047042e1241">NAME</th>
                                 <th align="left" valign="bottom" width="20%" id="d1047042e1244">DESCRIPTION</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1249" headers="d1047042e1241 "><code class="codeph">COLUMN_METADATA_T</code></td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1249 d1047042e1244 ">Column metadata  record</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1255" headers="d1047042e1241 "><code class="codeph">COLUMN_T</code></td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1255 d1047042e1244 ">Column descriptor  record</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1261" headers="d1047042e1241 "><code class="codeph">TABLE_T</code></td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1261 d1047042e1244 ">Table descriptor  record</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1267" headers="d1047042e1241 "><code class="codeph">COLUMNS_T</code></td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1267 d1047042e1244 ">Collection containing column names</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1273" headers="d1047042e1241 "><code class="codeph">COLUMNS_NEW_T</code></td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1273 d1047042e1244 ">Collection for new columns</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1279" headers="d1047042e1241 "><code class="codeph">TAB_&lt;typ&gt;_T</code></td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1279 d1047042e1244 ">Collection for each supported types, where &lt;typ&gt; is described in <span class="q">"<a href="DBMS_TF.html#GUID-DB56A9B9-15A9-450C-BAFB-28BF4089AED3" title="Each supported type has a corresponding predefined collection defined.">Supported Types Collections</a> "</span></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1292" headers="d1047042e1241 "><code class="codeph">ROW_SET_T</code> 
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1292 d1047042e1244 ">Data for a rowset record</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1299" headers="d1047042e1241 "><code class="codeph">GET_COL</code> Procedure
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1299 d1047042e1244 ">Fetches data for a specified (input) column</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1306" headers="d1047042e1241 "><code class="codeph">PUT_COL</code> Procedure
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1306 d1047042e1244 ">Returns data for a specified (new) column</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1313" headers="d1047042e1241 "><code class="codeph">GET_ROW_SET</code> Procedure
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1313 d1047042e1244 ">Fetches the input rowset of column values</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1320" headers="d1047042e1241 "><code class="codeph">PUT_ROW_SET</code> Procedure
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1320 d1047042e1244 ">Returns data for ALL (new) columns</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1328" headers="d1047042e1241 "><code class="codeph">SUPPORTED_TYPE</code> Function
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1328 d1047042e1244 ">Verifies if a type is supported by <code class="codeph">DBMS_TF</code> subprograms
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d1047042e1338" headers="d1047042e1241 "><code class="codeph">GET_XID</code> Function
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d1047042e1338 d1047042e1244 ">Returns a unique execution ID to index PTF state in a session</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-49232E37-8EFE-4440-A2CC-3E61F7153935__GUID-A7BE660C-C602-4A85-BD9F-40B9BCE1113A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="DBMS_TF.html#GUID-E67D4F4B-1FA5-4A9C-8F1D-83EB4A2A6DC2" title="The DBMS_TF package defines these RECORD types, TABLE types and subtype.">DBMS_TF Data Structures</a> for the complete list of types
                                 </p>
                              </li>
                              <li>
                                 <p><a href="DBMS_TF.html#GUID-D03D40B2-1D30-4292-938D-8E668C00EBE9" title="This summary briefly describes the DBMS_TF package subprograms.">Summary of DBMS_TF Subprograms</a> for the complete list of subprograms
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9DFD82D1-9D11-4311-BAE6-0184BF4EE96E" name="GUID-9DFD82D1-9D11-4311-BAE6-0184BF4EE96E"></a><h4 id="ARPLS-GUID-9DFD82D1-9D11-4311-BAE6-0184BF4EE96E" class="sect4"><span class="enumeration_section">169.4.3 </span>Read Columns
                  </h4>
                  <div>
                     <p>Read columns are a set of table columns that the Polymorphic Table Function (PTF) processes when executing the <code class="codeph">FETCH_ROWS</code> procedure.
                     </p>
                     <p>The PTF indicates the read columns inside <code class="codeph">DESCRIBE</code> by annotating them in the input table descriptor, <code class="codeph">TABLE_T</code>. Only the indicated read columns will be fetched and thus available for processing during <code class="codeph">FETCH_ROWS</code>.
                     </p>
                     <p>The PTF invocation in a query will typically use the <code class="codeph">COLUMNS</code> operator to indicate which columns the query wants the PTF to read, and this information is passed to the <code class="codeph">DESCRIBE</code> function which then in turn sets the <code class="codeph">COLUMN_T</code>.<code class="codeph">FOR_READ</code> boolean flag. 
                     </p>
                     <p>Only scalar SQL data types are allowed for the read columns.</p>
                     <p>The <a href="DBMS_TF.html#GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072" title="The echo PTF takes in a table and a list of columns and produces new columns with same values.">Echo Polymorphic Table Function Example</a> takes a table and a list of columns and produces new columns with the same values.
                     </p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D60CFEA0-F4F9-4336-A3F5-359A6E3BF487" name="GUID-D60CFEA0-F4F9-4336-A3F5-359A6E3BF487"></a><h4 id="ARPLS-GUID-D60CFEA0-F4F9-4336-A3F5-359A6E3BF487" class="sect4"><span class="enumeration_section">169.4.4 </span>Pass-Through Columns
                  </h4>
                  <div>
                     <p>Pass-through columns are passed from the input table of the Polymorphic Table Function (PTF) to the output, without any modifications.</p>
                     <p>The <code class="codeph">DESCRIBE</code> function indicates the pass-through columns by setting the <code class="codeph">COLUMN_T.PASS_THROUGH</code> boolean flag on the input table descriptor, <code class="codeph">DBMS_TF.TABLE_T</code>. 
                     </p>
                     <p>All columns in the <code class="codeph">Row Semantics</code> PTF are marked as pass-through by default. For <code class="codeph">Table Semantics</code> PTF, the default value for pass-through is set to false. For the <code class="codeph">Table Semantics</code> PTF, the partitioning columns are always pass-through and this cannot be changed by the DESCRIBE function.
                     </p>
                     <p>Note, the notions of Pass-Through and Read are orthogonal, and indicating a column as one has no implication for the other.</p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EAC49A1C-F4EB-48C8-B726-A143643A479C" name="GUID-EAC49A1C-F4EB-48C8-B726-A143643A479C"></a><h4 id="ARPLS-GUID-EAC49A1C-F4EB-48C8-B726-A143643A479C" class="sect4"><span class="enumeration_section">169.4.5 </span>State Management
                  </h4>
                  <div>
                     <p>The database manages the compilation and execution states of the polymorphic table functions (PTF).</p>
                     <div class="section">
                        <p></p>
                        <p>The database fulfills the PTF conductor role. As such, it is responsible for the PTF compilation state and execution state. </p>
                        <ol>
                           <li>
                              <p>Compilation State : This is the immutable state that is generated by <code class="codeph">DESCRIBE</code> which is needed before execution. 
                              </p>
                           </li>
                           <li>
                              <p>Execution State: This is the state used by the execution time procedures  (<code class="codeph">OPEN</code>, <code class="codeph">FETCH_ROWS</code>, and <code class="codeph">CLOSE</code>) of a <code class="codeph">Table semantics</code> PTF. 
                              </p>
                           </li>
                        </ol>
                        <p>The most common use of compilation state is to keep track of the columns to be read and the new columns that are to be produced. The PTF Server interface provides functions that can be used to achieve this: <code class="codeph">GET_ENV</code>, and <code class="codeph">GET_ROW_SET</code>. The PTF author who defines, documents, and implements the PTF can rely on the database to manage the PTF states. The PTF author should not attempt to use the session state (such as PL/SQL package global variables) to store any compilation state. Problems can arise because in a given session all cursors using the PTF will share that state, and other sessions executing the PTF cursor will not see the original compilation state. 
                        </p>
                        <p>Since the execution state is session and cursor private, a <code class="codeph">Table Semantics</code> PTF can use package globals for storing execution state, but with the provision that the PTF uses the database provided unique execution ID to identify that state. The <code class="codeph">GET_XID</code> function guarantees to provide an execution unique ID for the PTF's execution procedures, where this ID remains constant for all the execution functions of a PTF. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB" name="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB"></a><h5 id="ARPLS-GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB" class="sect5"><span class="enumeration_section">169.4.5.1 </span>CSTORE Compilation State Management
                     </h5>
                     <div>
                        <p>The CSTORE is the PTF compilation state management interface.</p>
                        <div class="section">
                           <p>The CSTORE enables Polymorphic Table Functions (PTF) to store the compilation state in the SQL cursor.</p>
                           <p>The CSTORE interface is used to store key-value pairs during cursor compilation through the <code class="codeph">DBMS_TF.DESCRIBE_T</code> record. 
                           </p>
                           <p>The compilation state information is retrieved during execution procedures such as <code class="codeph">OPEN</code>, <code class="codeph">FETCH_ROWS</code> and <code class="codeph">CLOSE</code>. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__GUID-F1CC231A-2325-4F52-B2EA-BDCB8B30BF65">CSTORE Subprograms</p>
                           <p>The CSTORE interface consists of the following subprograms.</p>
                           <table cellpadding="4" cellspacing="0" summary="" frame="hsides" border="1" rules="rows" role="presentation">
                              <tr>
                                 <td valign="top" width="38%"><span class="bold">Name</span></td>
                                 <td valign="top" width="63%"><span class="bold">Description</span></td>
                              </tr>
                              <tr>
                                 <td valign="top">
                                    <p><code class="codeph">CSTORE_GET</code> procedure
                                    </p>
                                 </td>
                                 <td valign="top">
                                    <p>Fetches item of specified type. If not found, the OUT value remains unchanged.</p>
                                 </td>
                              </tr>
                              <tr>
                                 <td valign="top">
                                    <p><code class="codeph">CSTORE_EXISTS</code>  function
                                    </p>
                                 </td>
                                 <td valign="top">
                                    <p>If an item with the given key exists in the CSTORE, this function returns TRUE. </p>
                                 </td>
                              </tr>
                           </table>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__CSTOREPREDEFINEDTYPES-35296B69">
                           <p class="subhead3" id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__GUID-26904335-0F93-4937-B87A-255429C6A0AE">CSTORE Supported Types</p>
                           <p>The <code class="codeph">DBMS_TF.DESCRIBE_T</code> supports specifying key-value pairs for these scalar types: <code class="codeph">VARCHAR2</code>, <code class="codeph">NUMBER</code>, <code class="codeph">DATE</code>, <code class="codeph">BOOLEAN</code>.
                           </p>
                           <div class="tblformal" id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__DBMS_TFCSTOREPREDEFINEDTYPES-24C5B880">
                              <p class="titleintable">Table 169-3 DBMS_TF CSTORE Scalar Supported Types</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF CSTORE Scalar Supported Types" summary="This table describes predefined scalar supported types to use with the CSTORE subprograms." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d1047042e1907">Name</th>
                                       <th align="left" valign="bottom" width="20%" id="d1047042e1910">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d1047042e1915" headers="d1047042e1907 "><code class="codeph">CSTORE_TYPE_VARCHAR2</code></td>
                                       <td align="left" valign="top" width="20%" headers="d1047042e1915 d1047042e1910 ">
                                          <p>CSTORE <code class="codeph">VARCHAR2</code> type code
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d1047042e1925" headers="d1047042e1907 "><code class="codeph">CSTORE_TYPE_NUMBER</code></td>
                                       <td align="left" valign="top" width="20%" headers="d1047042e1925 d1047042e1910 ">
                                          <p>CSTORE <code class="codeph">NUMBER</code> type code
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d1047042e1935" headers="d1047042e1907 "><code class="codeph">CSTORE_TYPE_DATE</code></td>
                                       <td align="left" valign="top" width="20%" headers="d1047042e1935 d1047042e1910 ">
                                          <p>CSTORE <code class="codeph">DATE</code> type code
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d1047042e1945" headers="d1047042e1907 "><code class="codeph">CSTORE_TYPE_BOOLEAN</code></td>
                                       <td align="left" valign="top" width="20%" headers="d1047042e1945 d1047042e1910 ">
                                          <p> CSTORE <code class="codeph">BOOLEAN</code> type code
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__COLLECTIONSFORCOMPILATIONSTORAGE-35297006">
                           <p class="subhead3" id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__GUID-E57FCA5B-E26B-48D3-B2A3-19462EFBDB56">Collections For Compilation Storage</p>
                           <p>These predefined collection types are used for compilation state management.</p><pre class="oac_no_warn" dir="ltr">TYPE CSTORE_CHR_T IS TABLE OF VARCHAR2(32767)  INDEX BY VARCHAR2(32767);
TYPE CSTORE_NUM_T IS TABLE OF NUMBER           INDEX BY VARCHAR2(32767);
TYPE CSTORE_BOL_T IS TABLE OF BOOLEAN          INDEX BY VARCHAR2(32767);
TYPE CSTORE_DAT_T IS TABLE OF DATE             INDEX BY VARCHAR2(32767);</pre></div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__DBMS_TFMETHODNAMES-352973EA">
                           <p class="subhead3" id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__GUID-AF720E94-6202-4F48-AECC-6E9448F9D1CE">DBMS_TF Method Names</p>
                           <p>The method names are also stored in the <code class="codeph">DBMS_TF.DESCRIBE_T</code> record. These predefined values for the method names can be customized by the PTF author.
                           </p>
                           <p>See <a href="DBMS_TF.html#GUID-8BA8FAA3-79C6-43A6-9986-9541CFA5D644" title="When multiple polymorphic table function (PTF) implementations are in the same package, you can override the default runtime method names (OPEN, FETCH_ROWS, and CLOSE) with your PTF specific names.">Method Name Overrides</a> for more information about changing the default method names
                           </p>
                           <div class="tblformal" id="GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__GUID-00B790A0-060E-423D-BF54-CE04D79689B8">
                              <p class="titleintable">Table 169-4 DBMS_TF Method Names Constants</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF Method Names Constants" summary="This table describes method names used by default by DBMS_TF subprograms." frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th class="text-center" valign="bottom" id="d1047042e1998">Name</th>
                                       <th class="text-center" valign="bottom" id="d1047042e2001">Type</th>
                                       <th class="text-center" valign="bottom" id="d1047042e2004">Value</th>
                                       <th class="text-center" valign="bottom" id="d1047042e2007">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2012" headers="d1047042e1998 ">
                                          <p><code class="codeph">CLOSE</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2012 d1047042e2001 ">
                                          <p><code class="codeph">DBMS_QUOTED_ID</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2012 d1047042e2004 ">
                                          <p>‘CLOSE’</p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2012 d1047042e2007 ">
                                          <p>Predefined index value for the method named CLOSE</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2027" headers="d1047042e1998 ">
                                          <p><code class="codeph">FETCH_ROWS</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2027 d1047042e2001 ">
                                          <p><code class="codeph">DBMS_QUOTED_ID</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2027 d1047042e2004 ">
                                          <p>‘FETCH_ROWS’</p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2027 d1047042e2007 ">
                                          <p>Predefined index value for the method named FETCH_ROWS</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2042" headers="d1047042e1998 ">
                                          <p><code class="codeph">OPEN</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2042 d1047042e2001 ">
                                          <p><code class="codeph">DBMS_QUOTED_ID</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2042 d1047042e2004 ">
                                          <p>‘OPEN’</p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2042 d1047042e2007 ">
                                          <p>Predefined index value for the method named OPEN</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-44B1E12B-F063-492E-A878-293327A5ACEB" name="GUID-44B1E12B-F063-492E-A878-293327A5ACEB"></a><h5 id="ARPLS-GUID-44B1E12B-F063-492E-A878-293327A5ACEB" class="sect5"><span class="enumeration_section">169.4.5.2 </span>XSTORE Execution State Management
                     </h5>
                     <div>
                        <p>XSTORE is the PTF execution state management interface.</p>
                        <div class="section">
                           <p>The <code class="codeph">XSTORE</code> key-value interface simplifies the implementation of <code class="codeph">Table Semantics</code> PTFs by providing automatic state management capabilities when the keys are strings and values are of commonly used scalar types.
                           </p>
                           <p>The database automatically manages the deletion of all execution states allocated using this interface.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-44B1E12B-F063-492E-A878-293327A5ACEB__GUID-B9AD0F15-83D9-4920-B1EA-7FF41A6EEC9D">XSTORE Subprograms</p>
                           <p>The execution state management interface consists of the following subprograms.</p>
                           <div class="tblformal" id="GUID-44B1E12B-F063-492E-A878-293327A5ACEB__GUID-7DDC66DE-AF42-48BB-8539-238A95C0B69D">
                              <p class="titleintable">Table 169-5 DBMS_TF XSTORE Subprograms</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF XSTORE Subprograms" summary="This table describes the XSTORE subprograms." frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th class="text-center" valign="bottom" id="d1047042e2173">Name</th>
                                       <th class="text-center" valign="bottom" id="d1047042e2176">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2181" headers="d1047042e2173 ">
                                          <p><code class="codeph">XSTORE_CLEAR</code> procedure
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2181 d1047042e2176 ">
                                          <p>Removes all key-value pairs from the XSTORE execution state</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2190" headers="d1047042e2173 ">
                                          <p><code class="codeph">XSTORE_EXISTS</code> function
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2190 d1047042e2176 ">
                                          <p>Returns TRUE if an item with a given key exists in the XSTORE</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2199" headers="d1047042e2173 ">
                                          <p><code class="codeph">XSTORE_GET</code> procedure
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2199 d1047042e2176 ">
                                          <p>Gets the associated value for a given key stored in the XSTORE</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2208" headers="d1047042e2173 ">
                                          <p><code class="codeph">XSTORE_REMOVE</code> procedure
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2208 d1047042e2176 ">
                                          <p>Removes an item associated with the given key and key_type</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2217" headers="d1047042e2173 ">
                                          <p><code class="codeph">XSTORE_SET</code> procedure
                                          </p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2217 d1047042e2176 ">
                                          <p>Sets the value for the given key for PTF Execution State Management</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-44B1E12B-F063-492E-A878-293327A5ACEB__XSTOREPREDEFINEDTYPES-352A8269">
                           <p class="subhead3" id="GUID-44B1E12B-F063-492E-A878-293327A5ACEB__GUID-9E0DC3A6-A354-4424-98AB-0E0576260250">XSTORE Predefined Types</p>
                           <p> The XSTORE supports specifying key-value pairs for these scalar types:<code class="codeph"> VARCHAR2</code>, <code class="codeph">NUMBER</code>, <code class="codeph">DATE</code>, and <code class="codeph"> BOOLEAN</code>.
                           </p>
                           <div class="tblformal" id="GUID-44B1E12B-F063-492E-A878-293327A5ACEB__GUID-425E9AF1-350A-46AC-B146-A5F179744BA4">
                              <p class="titleintable">Table 169-6 DBMS_TF XSTORE Scalar Supported Types </p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF XSTORE Scalar Supported Types " summary="This table describes predefined scalar supported types to use with the XSTORE subprograms." frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th class="text-center" valign="bottom" id="d1047042e2252">Name</th>
                                       <th class="text-center" valign="bottom" id="d1047042e2255">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2260" headers="d1047042e2252 ">
                                          <p><code class="codeph">XSTORE_TYPE_VARCHAR2</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2260 d1047042e2255 ">
                                          <p>XSTORE <code class="codeph">VARCHAR2</code> type code
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2271" headers="d1047042e2252 ">
                                          <p><code class="codeph">XSTORE_TYPE_NUMBER</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2271 d1047042e2255 ">
                                          <p>XSTORE <code class="codeph">NUMBER</code> type code
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2282" headers="d1047042e2252 ">
                                          <p><code class="codeph">XSTORE_TYPE_DATE</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2282 d1047042e2255 ">
                                          <p>XSTORE <code class="codeph">DATE</code> type code
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1047042e2293" headers="d1047042e2252 ">
                                          <p><code class="codeph">XSTORE_TYPE_BOOLEAN</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1047042e2293 d1047042e2255 ">
                                          <p> XSTORE <code class="codeph">BOOLEAN</code> type code
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8BA8FAA3-79C6-43A6-9986-9541CFA5D644" name="GUID-8BA8FAA3-79C6-43A6-9986-9541CFA5D644"></a><h4 id="ARPLS-GUID-8BA8FAA3-79C6-43A6-9986-9541CFA5D644" class="sect4"><span class="enumeration_section">169.4.6 </span>Method Name Overrides
                  </h4>
                  <div>
                     <p>When multiple polymorphic table function (PTF) implementations are in the same package, you can override the default runtime method names (<code class="codeph">OPEN</code>, <code class="codeph">FETCH_ROWS</code>, and <code class="codeph">CLOSE</code>) with your PTF specific names. 
                     </p>
                     <div class="section">
                        <p>To override a method name, the application can specify the new method names using <code class="codeph">DBMS_TF</code> <code class="codeph">METHOD_NAMES</code> collection ( see <a href="DBMS_TF.html#GUID-62B3CC06-D95E-4CD2-B264-EAAD4452CB66" title="The return type from the DESCRIBE method of PTF.">DESCRIBE_T Record Type</a>).
                        </p>
                        <div class="infoboxnotealso" id="GUID-8BA8FAA3-79C6-43A6-9986-9541CFA5D644__GUID-003474D8-12A0-4094-81F5-5861EE22387D">
                           <p class="notep1">See Also:</p><a href="DBMS_TF.html#GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__GUID-00B790A0-060E-423D-BF54-CE04D79689B8" title="This table describes method names used by default by DBMS_TF subprograms.">Table 169-4</a></div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8BA8FAA3-79C6-43A6-9986-9541CFA5D644__DBMS_TFMETHODNAMEOVERRIDESEXAMPLE-35304EB0">
                        <p class="titleinexample">Example 169-2 DBMS_TF Method Name Overrides</p>
                        <p>This example shows how to change the default method name of the noop_p PTF fetch_rows method to noop_fetch.</p>
                        <div class="infoboxnote" id="GUID-8BA8FAA3-79C6-43A6-9986-9541CFA5D644__GUID-B4E140C2-CF42-4C58-ADE6-A0BC6F8AFDD6">
                           <p class="notep1">Live SQL:</p>
                           <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/arpls/ptf/noop_method_overrides.html" target="_blank">DBMS_TF Method Name Overrides</a></p>
                        </div>
                        <p>Create the PTF implementation package noop_p.</p><pre class="pre codeblock"><code>CREATE PACKAGE noop_p AS
   FUNCTION describe(tab IN OUT DBMS_TF.table_t)
		       RETURN DBMS_TF.describe_t;
   PROCEDURE <span class="bold">noop_fetch</span>;
END noop_p;
 </code></pre><p>To provide a method name override, you can specify the new method names using DBMS_TF.Method_Names collection. The FETCH_ROWS method name is changed to 'Noop_Fetch'. The procedure noop_fetch to implement this method is defined in the package.</p><pre class="pre codeblock"><code> CREATE OR replace PACKAGE BODY noop_p 
AS
   FUNCTION describe(tab IN OUT DBMS_TF.table_t)
		       RETURN DBMS_TF.describe_t AS
	  <span class="bold">methods DBMS_TF.methods_t := DBMS_TF.methods_t(DBMS_TF.fetch_rows =&gt; 'Noop_Fetch')</span>;
     BEGIN
	      RETURN DBMS_TF.describe_t(<span class="bold">method_names =&gt; methods</span>);
   END;
   PROCEDURE <span class="bold">noop_fetch</span> AS 
     BEGIN 
	     RETURN; 
   END;
END noop_p;
</code></pre><p>The noop PTF is defined to execute the noop_p when it is invoked.</p><pre class="pre codeblock"><code>CREATE FUNCTION noop (t TABLE) RETURN TABLE PIPELINED ROW POLYMORPHIC USING noop_p; </code></pre><p>The PTF is invoked in the FROM clause of a query block.</p><pre class="pre codeblock"><code>SELECT *  
FROM noop(scott.emp) 
WHERE deptno =10;</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-ECBD7B38-0D6B-448B-AEAF-D6CBA50BC4A8" name="GUID-ECBD7B38-0D6B-448B-AEAF-D6CBA50BC4A8"></a><h4 id="ARPLS-GUID-ECBD7B38-0D6B-448B-AEAF-D6CBA50BC4A8" class="sect4"><span class="enumeration_section">169.4.7 </span>Using the COLUMNS Pseudo-Operator
                  </h4>
                  <div>
                     <p>The <code class="codeph">COLUMNS</code> pseudo-operator is an addition to the SQL expression language.
                     </p>
                     <p>Use the <code class="codeph">COLUMNS</code> pseudo-operator to specify the arguments when invoking a Polymorphic Table Function (PTF) in the <code class="codeph">FROM</code> clause. The <code class="codeph">COLUMNS</code> pseudo-operator arguments specify the list of column names, or the list of column names with associated types.
                     </p>
                     <div class="infoboxnotealso" id="GUID-ECBD7B38-0D6B-448B-AEAF-D6CBA50BC4A8__GUID-82F3D1A8-37F5-47C2-B0EB-4325395FD13C">
                        <p class="notep1">See Also:</p>
                        <p><a href="../lnpls/plsql-optimization-and-tuning.html#LNPLS-GUID-AB520C25-6735-4E5D-AC01-6237CD32BE17" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about the COLUMNS pseudo-operator syntax and semantics
                        </p> 
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-7157DA21-E9D1-4B18-A57D-1DE57190DCA1" name="GUID-7157DA21-E9D1-4B18-A57D-1DE57190DCA1"></a><h4 id="ARPLS-GUID-7157DA21-E9D1-4B18-A57D-1DE57190DCA1" class="sect4"><span class="enumeration_section">169.4.8 </span>Query Transformations
                  </h4>
                  <div>
                     <p>About predicate, projection and partitioning.</p>
                     <p>The pass-through columns of a <code class="codeph">Row Semantics</code> PTF, and the <code class="codeph">PARTITION BY</code> key columns of a <code class="codeph">Table Semantics</code> PTF can be used for projection and predicate pushdown.
                     </p>
                     <div class="example" id="GUID-7157DA21-E9D1-4B18-A57D-1DE57190DCA1__QUERYTRANSFORMATIONS-3532C2DF">
                        <p class="titleinexample">Example 169-3 Query Transformations</p>
                     </div>
                     <!-- class="example" -->
                     <p>This example illustrates the predicate and projection pushdown for a <code class="codeph">Row Semantics</code> PTF.
                     </p>
                     <div class="p">This query calls the echo PTF created in <a href="DBMS_TF.html#GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072" title="The echo PTF takes in a table and a list of columns and produces new columns with same values.">Echo Polymorphic Table Function Example</a>.<pre class="pre codeblock"><code>SELECT empno, ename, sal, comm, echo_sal
FROM echo(emp, COLUMNS(sal,comm))
WHERE deptno = 30 
  AND echo_sal &gt; 1000;</code></pre><pre class="oac_no_warn" dir="ltr">     EMPNO ENAME             SAL       COMM   ECHO_SAL
---------- ---------- ---------- ---------- ----------
      7499 ALLEN            1600        300       1600
      7521 WARD             1250        500       1250
      7654 MARTIN           1250       1400       1250
      7698 BLAKE            2850                  2850
      7844 TURNER           1500          0       1500
</pre>Conceptually, this query will get rewritten as:</div><pre class="pre codeblock"><code>WITH t AS (SELECT empno, ename, sal, comm
FROM emp
WHERE deptno=30)
SELECT empno, ename, sal, comm, echo_sal
FROM echo(t, COLUMNS(sal, comm))
WHERE echo_sal &gt; 1000;</code></pre></div>
               </div>
               <div class="sect3"><a id="GUID-25923930-2385-4710-BE53-97E43A85125D" name="GUID-25923930-2385-4710-BE53-97E43A85125D"></a><h4 id="ARPLS-GUID-25923930-2385-4710-BE53-97E43A85125D" class="sect4"><span class="enumeration_section">169.4.9 </span>Parallel Execution
                  </h4>
                  <div>
                     <p>A key benefit of Polymorphic Table Functions (PTFs) is that their execution can be parallelized.</p>
                     <p>Row and table semantic PTFs execute in parallel differently. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-25923930-2385-4710-BE53-97E43A85125D__GUID-40A440E3-14B7-44C8-9958-12479DA7F263">Row Semantics PTF</p>
                        <p>Under <code class="codeph">Row Semantics</code> PTF, the parallel query executes with the same degree of parallelism (DOP) as it would if the PTF were not present. The DOP is driven by the child row source.
                        </p>
                        <p>Provided that the DOP on table emp has been set to 5, the following is an example that shows this parallelization:</p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR
SELECT * FROM echo(emp, COLUMNS(ename, job))
WHERE deptno != 20;
---------------------------------------------------
| Id | Operation                        | Name     |
---------------------------------------------------
| 0 | SELECT STATEMENT                  |          |
| 1 | PX COORDINATOR                    |          |
| 2 | PX SEND QC (RANDOM)               | :TQ10000 |
| 3 | POLYMORPHIC TABLE FUNCTION        | ECHO     |
| 6 | PX BLOCK ITERATOR                 |          |
|* 7 | TABLE ACCESS FULL                | EMP      |
---------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
5 - filter("EMP"."DEPTNO"&lt;&gt;20)</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-25923930-2385-4710-BE53-97E43A85125D__GUID-3AF7877F-5977-4807-B7C4-D3E695BC6751">Table Semantics PTF</p>
                        <p><code class="codeph">Table Semantics</code> PTF requires its input table rows to be redistributed using the <code class="codeph">PARTITION BY</code> key. The parallel execution is determined by the <code class="codeph">PARTITION BY</code> clause specified in the query.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-6751290C-C9F7-40B7-AF6D-A108AB482E45" name="GUID-6751290C-C9F7-40B7-AF6D-A108AB482E45"></a><h3 id="ARPLS-GUID-6751290C-C9F7-40B7-AF6D-A108AB482E45" class="sect3"><span class="enumeration_section">169.5 </span>DBMS_TF Execution Flow
               </h3>
               <div>
                  <p>Query executions invoking Polymorphic Table Functions (PTF) follow this execution model and data transfers flow.</p>
                  <div class="section">
                     <p>The PTF execution procedures (<code class="codeph">OPEN</code>, <code class="codeph">FETCH_ROWS</code> and <code class="codeph">CLOSE</code>) are called by the database during query execution. 
                     </p>
                     <div class="p">The PTF execution follows this flow : 
                        <ol>
                           <li>
                              <p><code class="codeph">OPEN</code> (if present)
                              </p>
                           </li>
                           <li>
                              <p> <code class="codeph">FETCH_ROWS</code> (can be invoked multiple times)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CLOSE</code> (if present)
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div class="figure" id="GUID-6751290C-C9F7-40B7-AF6D-A108AB482E45__GUID-4A1FDECA-5294-4961-AB19-A22557E4C9F5"><img src="img/dbms_tf-execution-flow.gif" alt="Description of dbms_tf-execution-flow.eps follows" title="Description of dbms_tf-execution-flow.eps follows" longdesc="img_text/dbms_tf-execution-flow.html"><br><a href="img_text/dbms_tf-execution-flow.html">Description of the illustration dbms_tf-execution-flow.eps</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The <code class="codeph">FETCH_ROWS</code> procedure reads the data for a rowset (collection of rows), and produces an output rowset.
                     </p>
                     <p>Each call to <code class="codeph">FETCH_ROWS</code> is associated with a rowset which is a data collection of input rows that is expected to be processed by the PTF. 
                     </p>
                     <p>The <code class="codeph">GET_ROW_SET</code> or <code class="codeph">GET_COL</code> is used to read the input rowset.
                     </p>
                     <p>The <code class="codeph">PUT_ROW_SET</code> or <code class="codeph">PUT_COL</code> is used to produce an output rowset, that is written back to the database.
                     </p>
                     <p><code class="codeph">PUT_ROW_SET</code> is used to set all the new columns in a single call.
                     </p>
                     <p>The <code class="codeph">ROWSET_T</code> record holds data for multiple columns. When the PTF algorithm is more suited toward producing a single output column at a time, you can use <code class="codeph">PUT_COL</code> to produce a single column. A given column can only be produced once within a call to <code class="codeph">FETCH_ROWS</code>. 
                     </p>
                     <p>For a <code class="codeph">Row Semantics</code> PTF, the <code class="codeph">FETCH_ROWS</code> procedure will return the new rows using the PTF Server interface before returning back to the database. 
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-B21F7DDF-A9EC-4CAE-AC98-84983B6FCFCD" name="GUID-B21F7DDF-A9EC-4CAE-AC98-84983B6FCFCD"></a><h3 id="ARPLS-GUID-B21F7DDF-A9EC-4CAE-AC98-84983B6FCFCD" class="sect3"><span class="enumeration_section">169.6 </span>DBMS_TF Restrictions
               </h3>
               <div>
                  <p>These restrictions apply to Polymorphic Table Functions (PTFs) and using the DBMS_TF package.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B21F7DDF-A9EC-4CAE-AC98-84983B6FCFCD__GUID-C8F2BE1D-FCDA-4965-9762-3DC4F174ECCA">Type Restrictions</p>
                     <p>A Polymorphic Table Function (PTF) can operate on a table with columns of any SQL types. However, read and new columns are restricted to scalar types. The read and new columns are used in the <code class="codeph">PUT_ROW_SET</code>, <code class="codeph">PUT_COL</code>, <code class="codeph">GET_ROW_SET</code> and <code class="codeph">GET_COL</code> procedures. All SQL types can be used with pass-through columns. The <code class="codeph">DESCRIBE</code> function can determine the supported types using the <code class="codeph">DBMS_TF.SUPPORTED_TYPE</code> function.
                     </p>
                     <p></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B21F7DDF-A9EC-4CAE-AC98-84983B6FCFCD__GUID-2E2CFBDC-6699-4F99-BDA2-6D00D6859625">PTF Invocation and Execution Restrictions</p>
                     <p></p>
                     <p>Polymorphic table functions cannot be nested in the <code class="codeph">FROM</code> clause of a query. Nesting PTF is only allowed using <code class="codeph">WITH</code> clause.
                     </p>
                     <p>Nesting table function with polymorphic table function is only allowed using <code class="codeph">CURSOR</code> expressions. A PTF cannot be specified as an argument of a table function.
                     </p>
                     <p>You cannot select a rowid from a Polymorphic Table Function (PTF).</p>
                     <p>The <code class="codeph">PARTITION BY</code> and the <code class="codeph">ORDER BY</code> clause can only be specified on an argument of a <code class="codeph">Table Semantics</code> PTF.
                     </p>
                     <p>The PTF execution methods <code class="codeph">OPEN</code>, <code class="codeph">FETCH_ROWS</code>, and <code class="codeph">CLOSE</code> must be invoked in the polymorphic table function execution context only.
                     </p>
                     <p>You cannot invoke the <code class="codeph">DESCRIBE</code> method directly.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This example shows ten PTF nested invocation.</p><pre class="pre codeblock"><code>WITH t0
     AS (SELECT /*+ parallel */ *
         FROM   noop(dept)),
     t1
     AS (SELECT *
         FROM   noop(t0)),
     t2
     AS (SELECT *
         FROM   noop(t1)),
     t3
     AS (SELECT *
         FROM   noop(t2)),
     t4
     AS (SELECT *
         FROM   noop(t3)),
     t5
     AS (SELECT *
         FROM   noop(t4)),
     t6
     AS (SELECT *
         FROM   noop(t5)),
     t7
     AS (SELECT *
         FROM   noop(t6)),
     t8
     AS (SELECT *
         FROM   noop(t7)),
     t9
     AS (SELECT *
         FROM   noop(t8))
SELECT *
FROM   noop(t9)
WHERE  deptno = 10; </code></pre><pre class="oac_no_warn" dir="ltr">       10 ACCOUNTING     NEW YORK
</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-2D97C0CD-6AD9-4F86-86E6-C806D688C57A" name="GUID-2D97C0CD-6AD9-4F86-86E6-C806D688C57A"></a><h3 id="ARPLS-GUID-2D97C0CD-6AD9-4F86-86E6-C806D688C57A" class="sect3"><span class="enumeration_section">169.7 </span>DBMS_TF Examples
               </h3>
               <div>
                  <p>These examples use DBMS_TF subprograms. </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-2D97C0CD-6AD9-4F86-86E6-C806D688C57A__GUID-961ED0C0-0430-4364-B246-72C163CD4A49">Summary of DBMS_TF Examples</p>
                     <p>These examples are incomplete and for demonstration purpose only.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="DBMS_TF.html#GUID-47E8026F-B66B-4F8D-A2E2-D4324AAB2CED__NOOPPOLYMORPHICTABLEFUNCTION-35241E9E">Example 169-1</a>, <span class="q">"Noop Polymorphic Table Function"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072" title="The echo PTF takes in a table and a list of columns and produces new columns with same values.">Echo Polymorphic Table Function Example</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-8BA8FAA3-79C6-43A6-9986-9541CFA5D644__DBMS_TFMETHODNAMEOVERRIDESEXAMPLE-35304EB0">Example 169-2</a>, <span class="q">"DBMS_TF Method Name Overrides"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-7157DA21-E9D1-4B18-A57D-1DE57190DCA1__QUERYTRANSFORMATIONS-3532C2DF">Example 169-3</a>, <span class="q">"Query Transformations"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-7855D0E0-1ADB-4A90-AB9E-C33667C3D1C7__GUID-7F45B90B-BF29-435F-9384-1AE2F89C7F53">Example 169-5</a> , <span class="q">"DBMS_TF.COLUMN_TYPE_NAME Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-C8E533D9-243E-4874-86B9-116A97980A54__GUID-D535E2D0-F92F-4580-AB84-1E6DB898B18B">Example 169-6</a> , <span class="q">"DBMS_TF.COL_TO_CHAR Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-AB5593F5-D1FF-4676-927E-8000EA2A226E__GUID-2D023F03-F7D9-4970-B597-1CFC7365D0B2">Example 169-7</a>, <span class="q">"DBMS_TF.CSTORE_EXISTS Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-D1C12B28-0D84-425B-8E1C-35650F434603__DBMS_TF.GET_COLEXAMPLE-353A1FBA">Example 169-8</a>, <span class="q">"DBMS_TF.GET_COL Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-5E2C650E-1310-49A2-AF59-7E5B4D2497D2__GET_ENVEXAMPLE-353A67C6">Example 169-9</a>, <span class="q">"DBMS_TF.GET_ENV Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-4F4DCBFA-78D1-4573-ADE9-A435469C2908__DBMS_TF.GET_ROW_SETEXAMPLE-353ABC3E">Example 169-10</a>, <span class="q">"DBMS_TF.GET_ROW_SET Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-E151DA71-DBD2-4B80-AD2E-71D830283BE3__DBMS_TF.GET_XIDEXAMPLE-353B353D">Example 169-12</a>, <span class="q">"DBMS_TF.GET_XID Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-5C861282-03EE-420F-90D6-B01EB18A744D" title="The rand_col PTF appends specified number of random-valued columns to the output.">Rand_col Polymorphic Table Function Example</a>, ( DBMS_TF.PUT_COL Example)
                           </p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-218BB245-0878-4139-9E8C-1231A52F7E40" title="The stack PTF example unpivots the non-null values of the specified numeric columns by converting each column value into a new row.">Stack Polymorphic Table Function Example</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-73409F70-2C85-4200-A280-76A2E7179B67" title="The split PTF example splits each row of the input table into specified pieces.">Split Polymorphic Table Function Example</a>, (DBMS_TF.GET_ROW_SET and PUT_ROW_SET Example)
                           </p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-549CEC61-3483-431C-86A2-D088E135EF4F__DBMS_TF.PUT_ROW_SETEXAMPLE-353B8C15">Example 169-14</a>, <span class="q">"DBMS_TF.PUT_ROW_SET Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-F0B21736-CDE8-45CD-B250-64984E1CDE20__REPLICATEPTFDBMS_TF.ROW_REPLICATION-353BCFE5">Example 169-16</a>, <span class="q">"Replicate : DBMS_TF.ROW_REPLICATION Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962__DBMS_TF.ROW_TO_CHAREXAMPLE-353C8705">Example 169-17</a>, <span class="q">"DBMS_TF.ROW_TO_CHAR Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-83C57DB9-C8D8-4F3B-8D47-F2B850C597FA__DBMS_TF.TRACEEXAMPLE-353CD740">Example 169-18</a>, <span class="q">"DBMS_TF.TRACE Example"</span></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-C318D8C8-E80C-4671-B515-F3B22E073547" title="The row_num PTF example appends a sequence column to a table.">Row_num Polymorphic Table Function Example</a>, (DBMS_TF.XSTORE_GET and XSTORE_SET Example)
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">In other books :
                     <div class="p">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../lnpls/plsql-optimization-and-tuning.html#LNPLS-GUID-695FBA1A-89EA-45B4-9C81-CA99F6C794A5" target="_blank"><span class="italic">Oracle PL/SQL Language Reference</span></a> , <span class="q">"Skip_col Polymorphic Table Function Example"</span></p>
                              <p><a href="../lnpls/plsql-optimization-and-tuning.html#LNPLS-GUID-F8E13DDD-710D-4626-824E-B344849C5AFE" target="_blank"><span class="italic">Oracle PL/SQL Language Reference</span></a>, <span class="q">"To_doc Polymorphic Table Function Example"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072" name="GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072"></a><h4 id="ARPLS-GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072" class="sect4"><span class="enumeration_section">169.7.1 </span>Echo Polymorphic Table Function Example
                  </h4>
                  <div>
                     <p>The echo PTF takes in a table and a list of columns and produces new columns with same values.</p>
                     <div class="section">
                        <p>This PTF returns all the columns in the input table tab, and adds to it the columns listed in cols but with the column names prefixed with "ECHO_". </p>
                        <div class="infoboxnote" id="GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072__GUID-D7618D35-645E-429F-B50E-499183806F89">
                           <p class="notep1">Live SQL:</p>
                           <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/arpls/ptf/ptfecho.html" target="_blank">Echo Polymorphic Table Function</a></p>
                        </div>
                        <p>The echo PTF can appear in the FROM clause of the query. The COLUMNS operator is used to specify columns, for example:</p><pre class="oac_no_warn" dir="ltr">SELECT *
FROM echo(scott.dept, COLUMNS(dname, loc)); 
  
   DEPTNO DNAME          LOC           ECHO_DNAME     ECHO_LOC
---------- -------------- ------------- -------------- -------------
        10 ACCOUNTING     NEW YORK      ACCOUNTING     NEW YORK
        20 RESEARCH       DALLAS        RESEARCH       DALLAS
        30 SALES          CHICAGO       SALES          CHICAGO
        40 OPERATIONS     BOSTON        OPERATIONS     BOSTON
</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072__GUID-D5196819-FBE1-4FF5-BA4A-B3DBF839DA89">
                        <div class="p"> A PTF consists of the following : 
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>PTF implementation package specification : The specification must have the DESCRIBE method. The OPEN, FETCH_ROWS and CLOSE methods are optional. </p>
                              </li>
                              <li>
                                 <p>PTF implementation package body: The DESCRIBE method may have a new-columns parameter (the additional columns created by this PTF),  which is followed by the PTF functions parameters.</p>
                              </li>
                              <li>
                                 <p> PTF Function:  The PTF function has a reference to the implementation package.</p>
                              </li>
                           </ul> 
                        </div>
                        <p>The echo_package  package specification defines the  DESCRIBE and FETCH_ROWS methods.</p><pre class="pre codeblock"><code>CREATE PACKAGE echo_package
AS
  prefix DBMS_ID := 'ECHO_';
  FUNCTION describe(
    tab  IN OUT DBMS_TF.TABLE_T,
    cols IN DBMS_TF.COLUMNS_T)
  RETURN DBMS_TF.DESCRIBE_T;
  PROCEDURE fetch_rows;
END echo_package;</code></pre><p>The echo_package package body contains the PTF implementation.</p><pre class="pre codeblock"><code>CREATE PACKAGE BODY echo_package
AS
  FUNCTION describe(tab  IN OUT DBMS_TF.TABLE_T,
                    cols IN DBMS_TF.COLUMNS_T)
  RETURN DBMS_TF.DESCRIBE_T
  AS
    new_cols DBMS_TF.COLUMNS_NEW_T;
    col_id   PLS_INTEGER := 1;
  BEGIN
      FOR I IN 1 .. tab.COLUMN.COUNT LOOP
          FOR J IN 1 .. cols.COUNT LOOP
              IF ( tab.COLUMN(i).description.name = cols(j) ) THEN
                IF ( NOT DBMS_TF.SUPPORTED_TYPE(tab.COLUMN(i).description.TYPE) )
                THEN
                  RAISE_APPLICATION_ERROR(-20102, 'Unsupported column type [' ||
                  TAB.COLUMN(i).description.TYPE||']');
                END IF;

                TAB.COLUMN(i).for_read := TRUE;
                NEW_COLS(col_id) := TAB.COLUMN(i).description;
                NEW_COLS(col_id).name := prefix || TAB.COLUMN(i).description.name;
                col_id := col_id + 1;

                EXIT;
              END IF;
          END LOOP;
      END LOOP;

      /* Verify all columns were found */
      IF ( col_id - 1 != cols.COUNT ) THEN
        RAISE_APPLICATION_ERROR(-20101, 'Column mismatch ['||col_id - 1||'], ['||cols.COUNT||']');
      END IF;

      RETURN DBMS_TF.DESCRIBE_T(new_columns =&gt; new_cols);
  END;
  PROCEDURE FETCH_ROWS
  AS
    ROWSET DBMS_TF.ROW_SET_T;
  BEGIN
      DBMS_TF.GET_ROW_SET(rowset);
      DBMS_TF.PUT_ROW_SET(rowset);
  END;
END echo_package;</code></pre><p>The PTF echo references the implementation package echo_package. </p><pre class="pre codeblock"><code>CREATE FUNCTION echo(tab TABLE,
                     cols COLUMNS)
  RETURN TABLE 
  PIPELINED ROW POLYMORPHIC USING echo_package;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072__GUID-89FB0A5E-CFF3-44D5-938B-C6279DD7A05B">
                        <p class="titleinexample">Example 169-4 Using the Echo PTF in Queries</p>
                        <p>This example selects all employees in department 20. The resulting rows have three new columns <code class="codeph">ECHO_ENAME</code>, <code class="codeph">ECHO_HIREDATE</code>, and <code class="codeph">ECHO_SAL</code>.
                        </p><pre class="pre codeblock"><code>SELECT *
FROM   echo(scott.emp, COLUMNS(ename, sal, hiredate))
WHERE  deptno = 20; </code></pre><pre class="oac_no_warn" dir="ltr">EMPNO ENAME JOB      MGR  HIREDATE  SAL  COMM DEPTNO ECHO_ENAME ECHO_HIRE ECHO_SAL 
----- ----- -------- ---- --------- ---- ---- ------ ---------- --------- -------- 
7369  SMITH CLERK    7902 17-DEC-80  800          20 SMITH      17-DEC-80      800
7566  JONES MANAGER  7839 02-APR-81 2975          20 JONES      02-APR-81     2975
7788  SCOTT ANALYST  7566 19-APR-87 3000          20 SCOTT      19-APR-87     3000
7876  ADAMS CLERK    7788 23-MAY-87 1100          20 ADAMS      23-MAY-87     1100
7902  FORD  ANALYST  7566 03-DEC-81 3000          20 FORD       03-DEC-81     3000

</pre><p>Using subquery <code class="codeph">W</code>, display <code class="codeph">ENAME</code>, <code class="codeph">ECHO_LOC</code> and <code class="codeph">DNAME</code> columns for all employees in department 30 with a salary greater than 1000.
                        </p><pre class="pre codeblock"><code>WITH w
     AS (SELECT e.*,
                dname,
                loc
         FROM   scott.emp e,
                scott.dept d
         WHERE  e.deptno = d.deptno)
SELECT ename,
       echo_loc,
       dname
FROM   echo(w, COLUMNS(sal, dname, loc, hiredate))
WHERE  deptno = 30
       AND echo_sal &gt; 1000; </code></pre><pre class="oac_no_warn" dir="ltr">ENAME      ECHO_LOC        DNAME   
---------- --------------- -------- 
ALLEN      CHICAGO         SALES 
WARD       CHICAGO         SALES  
MARTIN     CHICAGO         SALES 
BLAKE      CHICAGO         SALES 
TURNER     CHICAGO         SALES   </pre><p>Using subquery <code class="codeph">W</code>, display <code class="codeph">ENAME</code> and <code class="codeph">DNAME</code> columns for all employees with a salary greater than 1000.
                        </p><pre class="pre codeblock"><code>WITH w
     AS (SELECT e.*,
                dname,
                loc
         FROM   scott.emp e,
                scott.dept d
         WHERE  e.deptno = d.deptno)
SELECT echo_ename,
       dname
FROM   echo(w, COLUMNS(loc, deptno, dname, ename)) e
WHERE  ename IN (SELECT echo_ename
                 FROM   echo(scott.emp, COLUMNS(sal, deptno, ename, hiredate))
                 WHERE  deptno = e.echo_deptno
                        AND sal &gt; 1000); </code></pre><pre class="oac_no_warn" dir="ltr">ECHO_ENAME DNAME   
---------- ---------- 
ALLEN      SALES
MILLER     ACCOUNTING
CLARK      ACCOUNTING
WARD       SALES
ADAMS      RESEARCH
TURNER     SALES
SCOTT      RESEARCH
BLAKE      SALES
JONES      RESEARCH
KING       ACCOUNTING
FORD       RESEARCH
MARTIN     SALES
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-E67D4F4B-1FA5-4A9C-8F1D-83EB4A2A6DC2" name="GUID-E67D4F4B-1FA5-4A9C-8F1D-83EB4A2A6DC2"></a><h3 id="ARPLS-GUID-E67D4F4B-1FA5-4A9C-8F1D-83EB4A2A6DC2" class="sect3"><span class="enumeration_section">169.8 </span>DBMS_TF Data Structures
               </h3>
               <div>
                  <p>The DBMS_TF package defines these RECORD types, TABLE types and subtype.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-E67D4F4B-1FA5-4A9C-8F1D-83EB4A2A6DC2__GUID-EA1BAF83-53C6-4646-9A5E-3115F9909E52">RECORD Types</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="DBMS_TF.html#GUID-B9284567-69FA-442D-B193-A44418EE7AC7" title="Data for a single column (variant record).">COLUMN_DATA_T Record Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-BF81AD20-0139-4A27-849C-DD4216217CEE" title="This type contains metadata about an existing table column or a new column produced by PTF.">COLUMN_METADATA_T Record Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-F721AF27-AA51-4813-B090-C285876B02F3" title="The column descriptor record for the type COLUMN_METADATA_T that contains PTF specific attributes.">COLUMN_T Record Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-62B3CC06-D95E-4CD2-B264-EAAD4452CB66" title="The return type from the DESCRIBE method of PTF.">DESCRIBE_T Record Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-69D4B241-802D-44CC-BD04-ABF3DC0622C5" title="This record contains metadata about the polymorphic table function execution state.">ENV_T Record Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-3B1388A3-5E6C-45CF-B833-31D7CA43678F" title="The record contains metadata specific to polymorphic table functions parallel execution.">PARALLEL_ENV_T Record Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-C29EF370-F918-4199-B8B2-A20B8EC47967" title="The DESCRIBE function input table descriptor argument is of TABLE_T record type.">TABLE_T Record Type</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E67D4F4B-1FA5-4A9C-8F1D-83EB4A2A6DC2__GUID-A708413A-6437-4352-AC51-5CEEC0D9EAD9">TABLE Types</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="DBMS_TF.html#GUID-DB56A9B9-15A9-450C-BAFB-28BF4089AED3" title="Each supported type has a corresponding predefined collection defined.">Supported Types Collections</a> (TAB_&lt;typ&gt;_T) 
                           </p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-BE3D92DB-E1CC-424E-8259-C9CEC0B074E7" title="Collection for new columns">COLUMNS_NEW_T Table Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-C7F0225A-D62E-4071-82FA-A2C81A63E3FA" title="Collection containing column names">COLUMNS_T Table Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-B1594949-62E5-4D0E-B721-C014EBA212C0" title="Collection containing columns metadata">COLUMNS_WITH_TYPE_T Table Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-CFE41BE1-6414-4547-9258-32F61CEC665A" title="A collection of columns(COLUMN_T)">TABLE_COLUMNS_T Table Type</a></p>
                        </li>
                        <li>
                           <p><a href="DBMS_TF.html#GUID-AFA813DD-462E-40A2-9794-EF11D44ABEA6" title="Data for a rowset">ROW_SET_T Table Type</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E67D4F4B-1FA5-4A9C-8F1D-83EB4A2A6DC2__GUID-A19E2FE4-4564-4415-97ED-571B54F1F480">Types</p>
                     <div class="p">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="DBMS_TF.html#GUID-84687227-E47E-4B3C-AAE0-D72D7B66606F" title="The XID_T subtype is defined to store the execution unique ID returned by function GET_XID.">XID_T Subtype</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E67D4F4B-1FA5-4A9C-8F1D-83EB4A2A6DC2__GUID-964DE12C-2959-491B-9213-E99DF6AA091E">CSTORE and XSTORE Data Structures</p>
                     <p>The compilation and execution state management interfaces use data structures internally. </p>
                     <p> See <a href="DBMS_TF.html#GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__COLLECTIONSFORCOMPILATIONSTORAGE-35297006">Collections For Compilation Storage</a> for more information.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-DB56A9B9-15A9-450C-BAFB-28BF4089AED3" name="GUID-DB56A9B9-15A9-450C-BAFB-28BF4089AED3"></a><h4 id="ARPLS-GUID-DB56A9B9-15A9-450C-BAFB-28BF4089AED3" class="sect4"><span class="enumeration_section">169.8.1 </span>Supported Types Collections
                  </h4>
                  <div>
                     <p>Each supported type has a corresponding predefined collection defined.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DB56A9B9-15A9-450C-BAFB-28BF4089AED3__GUID-233A80D3-2571-49FC-BDB7-693CE4628432">Syntax</p>
                        <div class="p"><pre class="oac_no_warn" dir="ltr">TYPE TAB_BOOLEAN_T       IS TABLE OF BOOLEAN       INDEX BY PLS_INTEGER;

TYPE TAB_BINARY_FLOAT_T  IS TABLE OF BINARY_FLOAT  INDEX BY PLS_INTEGER;

TYPE TAB_BINARY_DOUBLE_T IS TABLE OF BINARY_DOUBLE INDEX BY PLS_INTEGER;

TYPE TAB_BLOB_T          IS TABLE OF BLOB          INDEX BY PLS_INTEGER;

TYPE TAB_CHAR_T          IS TABLE OF CHAR(32767)   INDEX BY PLS_INTEGER;

TYPE TAB_CLOB_T          IS TABLE OF CLOB          INDEX BY PLS_INTEGER;

TYPE TAB_DATE_T          IS TABLE OF DATE          INDEX BY PLS_INTEGER;

TYPE TAB_INTERVAL_YM_T   IS TABLE OF YMINTERVAL_UNCONSTRAINED   INDEX BY PLS_INTEGER;

TYPE TAB_INTERVAL_DS_T   IS TABLE OF DSINTERVAL_UNCONSTRAINED   INDEX BY PLS_INTEGER;

TYPE TAB_NATURALN_T      IS TABLE OF NATURALN      INDEX BY PLS_INTEGER; 

TYPE TAB_NUMBER_T        IS TABLE OF NUMBER        INDEX BY PLS_INTEGER;

TYPE TAB_RAW_T           IS TABLE OF RAW(32767)    INDEX BY PLS_INTEGER;

TYPE TAB_ROWID_T         IS TABLE OF ROWID         INDEX BY PLS_INTEGER;

TYPE TAB_VARCHAR2_T      IS TABLE OF VARCHAR2(32767) INDEX BY PLS_INTEGER;

TYPE TAB_TIMESTAMP_T     IS TABLE OF TIMESTAMP_UNCONSTRAINED INDEX BY PLS_INTEGER;

TYPE TAB_TIMESTAMP_TZ_T  IS TABLE OF TIMESTAMP_TZ_UNCONSTRAINED INDEX BY PLS_INTEGER;

TYPE TAB_TIMESTAMP_LTZ_T IS TABLE OF TIMESTAMP_LTZ_UNCONSTRAINED INDEX BY PLS_INTEGER;

 </pre></div>
                        <div class="infoboxnotealso" id="GUID-DB56A9B9-15A9-450C-BAFB-28BF4089AED3__GUID-B1F03F4E-75B9-4C74-8FB9-CB22960F54FA">
                           <p class="notep1">See Also:</p><a href="DBMS_TF.html#GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05__DBMS_TFSUPPORTEDTYPES-3ACFD083" title="This table describes supported types for DBMS_TF GET_COL and PUT_COL subprograms.">Table 169-1</a> for more information about the DBMS_TF supported types
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B9284567-69FA-442D-B193-A44418EE7AC7" name="GUID-B9284567-69FA-442D-B193-A44418EE7AC7"></a><h4 id="ARPLS-GUID-B9284567-69FA-442D-B193-A44418EE7AC7" class="sect4"><span class="enumeration_section">169.8.2 </span>COLUMN_DATA_T Record Type
                  </h4>
                  <div>
                     <p>Data for a single column (variant record).</p>
                     <div class="section">
                        <p>Exactly one variant field is active in the record. The description includes information about the column type that is active. </p>
                        <p>See <a href="DBMS_TF.html#GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05__DBMS_TFSUPPORTEDTYPES-3ACFD083" title="This table describes supported types for DBMS_TF GET_COL and PUT_COL subprograms.">Table 169-1</a> for the list of supported types.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B9284567-69FA-442D-B193-A44418EE7AC7__GUID-39BFF89D-AE22-4771-B92B-FAF605314EB6">Syntax</p><pre class="oac_no_warn" dir="ltr"> TYPE COLUMN_DATA_T IS RECORD
  ( description            COLUMN_METADATA_T, 
    tab_varchar2           TAB_VARCHAR2_T,
    tab_number             TAB_NUMBER_T,
    tab_date               TAB_DATE_T,
    tab_binary_float       TAB_BINARY_FLOAT_T,
    tab_binary_double      TAB_BINARY_DOUBLE_T,
    tab_raw                TAB_RAW_T,
    tab_char               TAB_CHAR_T,
    tab_clob               TAB_CLOB_T,
    tab_blob               TAB_BLOB_T,
    tab_timestamp          TAB_TIMESTAMP_T,
    tab_timestamp_tz       TAB_TIMESTAMP_TZ_T,
    tab_interval_ym        TAB_INTERVAL_YM_T,
    tab_interval_ds        TAB_INTERVAL_DS_T,    
    tab_timestamp_ltz      TAB_TIMESTAMP_LTZ_T,
    tab_rowid              TAB_ROWID_T);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B9284567-69FA-442D-B193-A44418EE7AC7__GUID-7502ACDD-BA05-4891-BE91-D74880E5B84E">Fields</p>
                        <div class="tblformal" id="GUID-B9284567-69FA-442D-B193-A44418EE7AC7__GUID-271FCC26-1DC1-4733-B508-5E3E79CE6DD7">
                           <p class="titleintable">Table 169-7 COLUMN_DATA_T Fields</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COLUMN_DATA_T Fields" summary="This table describes the fields of the record type COLUMN_DATA_T and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="40%" id="d1047042e4091">Field</th>
                                    <th align="left" valign="bottom" width="60%" id="d1047042e4094">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4099" headers="d1047042e4091 ">
                                       <p><code class="codeph">description</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4099 d1047042e4094 ">
                                       <p>The tag defines the metadata for the column indicating which variant field is active.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4107" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_varchar2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4107 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4115" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_number</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4115 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4123" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_date </code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4123 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4131" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_binary_float</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4131 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4139" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_binary_double</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4139 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4147" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_raw</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4147 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4155" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_char</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4155 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4163" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_clob</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4163 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4171" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_blob</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4171 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4179" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_timestamp</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4179 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4188" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_timestamp_tz</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4188 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4196" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_interval_ym</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4196 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4204" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_interval_ds</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4204 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4212" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_timestamp_ltz</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4212 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d1047042e4220" headers="d1047042e4091 ">
                                       <p><code class="codeph">tab_rowid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d1047042e4220 d1047042e4094 ">
                                       <p>Variant field</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BF81AD20-0139-4A27-849C-DD4216217CEE" name="GUID-BF81AD20-0139-4A27-849C-DD4216217CEE"></a><h4 id="ARPLS-GUID-BF81AD20-0139-4A27-849C-DD4216217CEE" class="sect4"><span class="enumeration_section">169.8.3 </span>COLUMN_METADATA_T Record Type
                  </h4>
                  <div>
                     <p>This type contains metadata about an existing table column or a new column produced by PTF.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BF81AD20-0139-4A27-849C-DD4216217CEE__GUID-A1918E26-4D83-4FBE-828D-3A89FFC0960E">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE COLUMN_METADATA_T IS RECORD 
  ( type               PLS_INTEGER,
    max_len            PLS_integer DEFAULT -1,
    name               VARCHAR2(32767),
    name_len           PLS_INTEGER,
    precision          PLS_INTEGER,
    scale              PLS_INTEGER,
    charsetid          PLS_INTEGER,
    charsetform        PLS_INTEGER,
    collation          PLS_INTEGER );   </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BF81AD20-0139-4A27-849C-DD4216217CEE__GUID-55AC40FC-862B-4651-82EF-64ECEDC56636">Fields</p>
                        <div class="tblformal" id="GUID-BF81AD20-0139-4A27-849C-DD4216217CEE__GUID-8CC86B51-C8EE-4B0A-BD63-34914B1AE687">
                           <p class="titleintable">Table 169-8 COLUMN_METADATA_T Fields</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COLUMN_METADATA_T Fields" summary="This table describes the fields of the record type COLUMN_METADATA_T and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d1047042e4338">Field</th>
                                    <th align="left" valign="bottom" width="72%" id="d1047042e4341">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4346" headers="d1047042e4338 ">
                                       <p><code class="codeph">type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4346 d1047042e4341 ">
                                       <p>Internal Oracle typecode for the column's type</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4354" headers="d1047042e4338 ">
                                       <p><code class="codeph">max_len</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4354 d1047042e4341 ">
                                       <p>Maximum length of a column. If it is less than the           maximum allowed length then that value will be                   used, if it is NULL or zero, zero will be used. If it is less than zero, then maximum allowed length  will be used. If types (like date,float), does not care about length, then this value will be ignored.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4362" headers="d1047042e4338 ">
                                       <p><code class="codeph">name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4362 d1047042e4341 ">
                                       <p>Name of the column</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4370" headers="d1047042e4338 ">
                                       <p><code class="codeph">name_len</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4370 d1047042e4341 ">
                                       <p>Length of the name</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4378" headers="d1047042e4338 ">
                                       <p><code class="codeph"> precision</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4378 d1047042e4341 ">
                                       <p>The&nbsp;precision, or the maximum number of significant decimal digits (for numeric data types)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4386" headers="d1047042e4338 ">
                                       <p><code class="codeph">scale</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4386 d1047042e4341 ">
                                       <p>Scale, or the number of digits from the decimal point to the least significant digit (for numeric data types)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4394" headers="d1047042e4338 ">
                                       <p><code class="codeph">charsetid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4394 d1047042e4341 ">
                                       <p>Character set id (internal Oracle code, applies to string types)     </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4402" headers="d1047042e4338 ">
                                       <p><code class="codeph">charsetform</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4402 d1047042e4341 ">
                                       <p>Character set form (internal Oracle code, applies to string types)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4410" headers="d1047042e4338 ">
                                       <p><code class="codeph">collation</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4410 d1047042e4341 ">
                                       <p>Collation id (internal Oracle code, applies to                               string types) </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F721AF27-AA51-4813-B090-C285876B02F3" name="GUID-F721AF27-AA51-4813-B090-C285876B02F3"></a><h4 id="ARPLS-GUID-F721AF27-AA51-4813-B090-C285876B02F3" class="sect4"><span class="enumeration_section">169.8.4 </span>COLUMN_T Record Type
                  </h4>
                  <div>
                     <p>The column descriptor record for the type COLUMN_METADATA_T that contains PTF specific  attributes. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F721AF27-AA51-4813-B090-C285876B02F3__GUID-395F209D-772E-41AF-B004-F317C13E7A44">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE column_t IS RECORD (
    description            COLUMN_METADATA_T, 
    pass_through           BOOLEAN,      
    for_read               BOOLEAN);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F721AF27-AA51-4813-B090-C285876B02F3__GUID-FC966BE9-4B6E-4BA3-BF87-11D6C25258F0">Fields</p>
                        <div class="tblformal" id="GUID-F721AF27-AA51-4813-B090-C285876B02F3__GUID-DF1D39AF-65DE-431C-B8F1-2C368DADFB92">
                           <p class="titleintable">Table 169-9 COLUMN_T Fields</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COLUMN_T Fields" summary="This table describes the fields of the Record Type COLUMN_T and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d1047042e4531">Field</th>
                                    <th align="left" valign="bottom" width="72%" id="d1047042e4534">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4539" headers="d1047042e4531 ">
                                       <p><code class="codeph">description</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4539 d1047042e4534 ">
                                       <p>Column metadata</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4547" headers="d1047042e4531 ">
                                       <p><code class="codeph">pass_through</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4547 d1047042e4534 ">
                                       <p> Is this a pass through column</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4555" headers="d1047042e4531 ">
                                       <p><code class="codeph">for_read</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4555 d1047042e4534 ">
                                       <p>Is this column read by the PTF</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-62B3CC06-D95E-4CD2-B264-EAAD4452CB66" name="GUID-62B3CC06-D95E-4CD2-B264-EAAD4452CB66"></a><h4 id="ARPLS-GUID-62B3CC06-D95E-4CD2-B264-EAAD4452CB66" class="sect4"><span class="enumeration_section">169.8.5 </span>DESCRIBE_T Record Type
                  </h4>
                  <div>
                     <p>The return type from the DESCRIBE method of PTF.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-62B3CC06-D95E-4CD2-B264-EAAD4452CB66__GUID-812F9EFF-F724-4FD0-AFB8-2033E567C61E">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE DESCRIBE_T          IS RECORD 
  ( NEW_COLUMNS        COLUMNS_NEW_T DEFAULT COLUMNS_NEW_T(),
    CSTORE_CHR         CSTORE_CHR_T  DEFAULT CSTORE_CHR_T(), 
    CSTORE_NUM         CSTORE_NUM_T  DEFAULT CSTORE_NUM_T(), 
    CSTORE_BOL         CSTORE_BOL_T  DEFAULT CSTORE_BOL_T(),     
    CSTORE_DAT         CSTORE_DAT_T  DEFAULT CSTORE_DAT_T(),   
    METHOD_NAMES       METHODS_T     DEFAULT METHODS_T());</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-62B3CC06-D95E-4CD2-B264-EAAD4452CB66__GUID-F66FC8AE-CCA6-4839-8117-4327DC23DD17">Fields</p>
                        <div class="tblformal" id="GUID-62B3CC06-D95E-4CD2-B264-EAAD4452CB66__GUID-CD896F22-4B1C-46B4-94BC-2DD254DE7352">
                           <p class="titleintable">Table 169-10 DESCRIBE_T Fields</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DESCRIBE_T Fields" summary="This table describes the fields of the Record Type DESCRIBE_T and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d1047042e4673">Field</th>
                                    <th align="left" valign="bottom" width="76%" id="d1047042e4676">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d1047042e4681" headers="d1047042e4673 ">
                                       <p><code class="codeph">NEW_COLUMNS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d1047042e4681 d1047042e4676 ">
                                       <p>New columns description that will be produced by the PTF</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d1047042e4689" headers="d1047042e4673 ">
                                       <p><code class="codeph">CSTORE_CHR</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d1047042e4689 d1047042e4676 ">
                                       <p>CStore array key type : <code class="codeph">VARCHAR2</code> (optional)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d1047042e4700" headers="d1047042e4673 ">
                                       <p><code class="codeph">CSTORE_NUM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d1047042e4700 d1047042e4676 ">
                                       <p>CStore array key type : <code class="codeph">NUMBER</code> (optional)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d1047042e4711" headers="d1047042e4673 ">
                                       <p><code class="codeph">CSTORE_BOL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d1047042e4711 d1047042e4676 ">
                                       <p>CStore array key type : <code class="codeph">BOOLEAN</code> (optional)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d1047042e4722" headers="d1047042e4673 ">
                                       <p><code class="codeph">CSTORE_DAT </code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d1047042e4722 d1047042e4676 ">
                                       <p>CStore array key type : <code class="codeph">DATE</code> (optional)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d1047042e4733" headers="d1047042e4673 ">
                                       <p><code class="codeph">METHOD_NAMES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d1047042e4733 d1047042e4676 ">
                                       <p>Method names, if user wants to override <code class="codeph">OPEN</code>, <code class="codeph">FETCH_ROWS</code>, <code class="codeph">CLOSE</code>  methods
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-69D4B241-802D-44CC-BD04-ABF3DC0622C5" name="GUID-69D4B241-802D-44CC-BD04-ABF3DC0622C5"></a><h4 id="ARPLS-GUID-69D4B241-802D-44CC-BD04-ABF3DC0622C5" class="sect4"><span class="enumeration_section">169.8.6 </span>ENV_T Record Type
                  </h4>
                  <div>
                     <p>This record contains metadata about the polymorphic table function execution state.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-69D4B241-802D-44CC-BD04-ABF3DC0622C5__GUID-39009BFC-282E-4BFF-8931-B77E844934AF">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE ENV_T IS RECORD (
  get_columns      TABLE_METADATA_T,
  put_columns      TABLE_METADATA_T,
  ref_put_col      REFERENCED_COLS_T,
  parallel_env     PARALLEL_ENV_T,
  query_optim      BOOLEAN, 
  row_count        PLS_INTEGER,
  row_replication  BOOLEAN, 
  row_insertion    BOOLEAN);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69D4B241-802D-44CC-BD04-ABF3DC0622C5__GUID-2FD1E1E9-21C8-4783-86BC-3135A95B2562">Fields</p>
                        <div class="tblformal" id="GUID-69D4B241-802D-44CC-BD04-ABF3DC0622C5__GUID-19A23A42-8336-4262-91FF-93EF078A1C5B">
                           <p class="titleintable">Table 169-11 ENV_T Fields</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ENV_T Fields" summary="This table describes the fields of the record type ENV_T and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d1047042e4859">Field</th>
                                    <th align="left" valign="bottom" width="72%" id="d1047042e4862">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4867" headers="d1047042e4859 ">
                                       <p><code class="codeph">get_columns</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4867 d1047042e4862 ">
                                       <p>Metadata about the columns read by PTF <code class="codeph">GET_COL</code> procedure
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4878" headers="d1047042e4859 ">
                                       <p><code class="codeph">put_columns</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4878 d1047042e4862 ">
                                       <p>Metadata about columns sent back to database by <code class="codeph">PUT_COL</code> procedure
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4889" headers="d1047042e4859 ">
                                       <p><code class="codeph">ref_put_col</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4889 d1047042e4862 ">
                                       <p>TRUE if the put column was referenced in the query</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4897" headers="d1047042e4859 ">
                                       <p><code class="codeph">parallel_env</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4897 d1047042e4862 ">
                                       <p>Parallel execution information (when a query runs in parallel)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4905" headers="d1047042e4859 ">
                                       <p><code class="codeph">query_optim</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4905 d1047042e4862 ">
                                       <p>Is this execution for query optimization? </p>
                                       <p>TRUE, if the query was running on behalf of optimizer</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4915" headers="d1047042e4859 ">
                                       <p><code class="codeph">row_count</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4915 d1047042e4862 ">
                                       <p>Number of rows in current row set</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4923" headers="d1047042e4859 ">
                                       <p><code class="codeph">row_replication</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4923 d1047042e4862 ">
                                       <p>Is Row Replication Enabled?</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e4931" headers="d1047042e4859 ">
                                       <p><code class="codeph">row_insertion</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e4931 d1047042e4862 ">
                                       <p>Is Row Insertion Enabled?</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3B1388A3-5E6C-45CF-B833-31D7CA43678F" name="GUID-3B1388A3-5E6C-45CF-B833-31D7CA43678F"></a><h4 id="ARPLS-GUID-3B1388A3-5E6C-45CF-B833-31D7CA43678F" class="sect4"><span class="enumeration_section">169.8.7 </span>PARALLEL_ENV_T Record Type
                  </h4>
                  <div>
                     <p>The record contains metadata specific to polymorphic table functions parallel execution.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3B1388A3-5E6C-45CF-B833-31D7CA43678F__GUID-558474BB-4561-43C1-9724-EDBF209F7068">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE PARALLEL_ENV_T         IS RECORD
  ( instance_id      PLS_INTEGER,  
    session_id       PLS_INTEGER,
    slave_svr_grp    PLS_INTEGER, 
    slave_set_no     PLS_INTEGER, 
    no_slocal_slaves PLS_INTEGER, 
    global_slave_no  PLS_INTEGER, 
    no_local_slaves  PLS_INTEGER,
    local_slave_no   PLS_INTEGER );
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B1388A3-5E6C-45CF-B833-31D7CA43678F__FIELDS-212B1C93">Fields</p>
                        <div class="tblformal" id="GUID-3B1388A3-5E6C-45CF-B833-31D7CA43678F__GUID-541F7B71-3BC9-40E2-935E-F20A534CDFD9">
                           <p class="titleintable">Table 169-12 PARALLEL_ENV_T Fields</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PARALLEL_ENV_T Fields" summary="This table describes the fields of the record type PARALLEL_ENV_T and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d1047042e5048">Field</th>
                                    <th align="left" valign="bottom" width="72%" id="d1047042e5051">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5056" headers="d1047042e5048 ">
                                       <p><code class="codeph">instance_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5056 d1047042e5051 ">
                                       <p>QC instance ID</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5064" headers="d1047042e5048 ">
                                       <p><code class="codeph">session_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5064 d1047042e5051 ">
                                       <p>QC session ID</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5072" headers="d1047042e5048 ">
                                       <p><code class="codeph">slave_svr_grp</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5072 d1047042e5051 ">
                                       <p>Slave server group</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5080" headers="d1047042e5048 ">
                                       <p><code class="codeph">slave_set_no</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5080 d1047042e5051 ">
                                       <p>Slave server set number </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5088" headers="d1047042e5048 ">
                                       <p><code class="codeph">no_slocal_slaves</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5088 d1047042e5051 ">
                                       <p>Number of sibling slaves (including self)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5096" headers="d1047042e5048 ">
                                       <p><code class="codeph">global_slave_no</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5096 d1047042e5051 ">
                                       <p>Global slave number (base 0)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5104" headers="d1047042e5048 ">
                                       <p><code class="codeph">no_local_slaves</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5104 d1047042e5051 ">
                                       <p>Number of sibling slaves running on instance</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5112" headers="d1047042e5048 ">
                                       <p><code class="codeph">local_slave_no</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5112 d1047042e5051 ">
                                       <p>Local slave number (base 0)</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-C29EF370-F918-4199-B8B2-A20B8EC47967" name="GUID-C29EF370-F918-4199-B8B2-A20B8EC47967"></a><h4 id="ARPLS-GUID-C29EF370-F918-4199-B8B2-A20B8EC47967" class="sect4"><span class="enumeration_section">169.8.8 </span>TABLE_T Record Type
                  </h4>
                  <div>
                     <p>The DESCRIBE function  input table descriptor argument is of TABLE_T record type.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C29EF370-F918-4199-B8B2-A20B8EC47967__GUID-24F44711-7419-4D25-BCDB-1C69C21C8E84">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE TABLE_T IS RECORD(
  column                TABLE_COLUMNS_T,
  schema_name           DBMS_id,
  package_name          DBMS_id,
  ptf_name              DBMS_id);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C29EF370-F918-4199-B8B2-A20B8EC47967__GUID-E00A868E-A168-49F9-8A6F-1BAB60BB7BE1">Fields</p>
                        <div class="tblformal" id="GUID-C29EF370-F918-4199-B8B2-A20B8EC47967__GUID-307D21DA-2CC1-4741-871A-DE2F6692A0B0">
                           <p class="titleintable">Table 169-13 TABLE_T Fields</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TABLE_T Fields" summary="This table describes the fields of the record type TABLE_T  and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d1047042e5234">Field</th>
                                    <th align="left" valign="bottom" width="72%" id="d1047042e5237">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5242" headers="d1047042e5234 ">
                                       <p><code class="codeph">column</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5242 d1047042e5237 ">
                                       <p>Column information</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5250" headers="d1047042e5234 ">
                                       <p><code class="codeph">schema_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5250 d1047042e5237 ">
                                       <p>The PTF schema name</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5258" headers="d1047042e5234 ">
                                       <p><code class="codeph">package_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5258 d1047042e5237 ">
                                       <p>The PTF implementation package name</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1047042e5266" headers="d1047042e5234 ">
                                       <p><code class="codeph">ptf_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1047042e5266 d1047042e5237 ">
                                       <p>The PTF name invoked</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BE3D92DB-E1CC-424E-8259-C9CEC0B074E7" name="GUID-BE3D92DB-E1CC-424E-8259-C9CEC0B074E7"></a><h4 id="ARPLS-GUID-BE3D92DB-E1CC-424E-8259-C9CEC0B074E7" class="sect4"><span class="enumeration_section">169.8.9 </span>COLUMNS_NEW_T Table Type
                  </h4>
                  <div>
                     <p>Collection for new columns</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BE3D92DB-E1CC-424E-8259-C9CEC0B074E7__GUID-A2501DC5-2EBB-4395-9D96-1B0012FD7947">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE COLUMNS_NEW_T IS TABLE OF COLUMN_METADATA_T INDEX BY PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-C7F0225A-D62E-4071-82FA-A2C81A63E3FA" name="GUID-C7F0225A-D62E-4071-82FA-A2C81A63E3FA"></a><h4 id="ARPLS-GUID-C7F0225A-D62E-4071-82FA-A2C81A63E3FA" class="sect4"><span class="enumeration_section">169.8.10 </span>COLUMNS_T Table Type
                  </h4>
                  <div>
                     <p> Collection containing column names</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C7F0225A-D62E-4071-82FA-A2C81A63E3FA__GUID-ED68D682-0D46-450A-B815-65EBDA880C68">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE COLUMNS_T IS TABLE OF DBMS_QUOTED_ID;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B1594949-62E5-4D0E-B721-C014EBA212C0" name="GUID-B1594949-62E5-4D0E-B721-C014EBA212C0"></a><h4 id="ARPLS-GUID-B1594949-62E5-4D0E-B721-C014EBA212C0" class="sect4"><span class="enumeration_section">169.8.11 </span>COLUMNS_WITH_TYPE_T Table Type
                  </h4>
                  <div>
                     <p>Collection containing columns metadata</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B1594949-62E5-4D0E-B721-C014EBA212C0__GUID-72402F0F-5267-4801-97EE-5072669FC87A">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE COLUMNS_WITH_TYPE_T IS TABLE OF COLUMN_METADATA_T;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-CFE41BE1-6414-4547-9258-32F61CEC665A" name="GUID-CFE41BE1-6414-4547-9258-32F61CEC665A"></a><h4 id="ARPLS-GUID-CFE41BE1-6414-4547-9258-32F61CEC665A" class="sect4"><span class="enumeration_section">169.8.12 </span>TABLE_COLUMNS_T Table Type
                  </h4>
                  <div>
                     <p>A collection of columns(COLUMN_T)</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CFE41BE1-6414-4547-9258-32F61CEC665A__GUID-61E21867-75DA-457A-A8BB-EA69A9C799E4">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE TABLE_COLUMNS_T IS TABLE OF COLUMN_T;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AFA813DD-462E-40A2-9794-EF11D44ABEA6" name="GUID-AFA813DD-462E-40A2-9794-EF11D44ABEA6"></a><h4 id="ARPLS-GUID-AFA813DD-462E-40A2-9794-EF11D44ABEA6" class="sect4"><span class="enumeration_section">169.8.13 </span>ROW_SET_T Table Type
                  </h4>
                  <div>
                     <p>Data for a rowset</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AFA813DD-462E-40A2-9794-EF11D44ABEA6__GUID-6EDE6078-EB52-4F58-B7D2-D820032A71BB">Syntax</p><pre class="oac_no_warn" dir="ltr">TYPE ROW_SET_T IS TABLE OF COLUMN_DATA_T INDEX BY PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-84687227-E47E-4B3C-AAE0-D72D7B66606F" name="GUID-84687227-E47E-4B3C-AAE0-D72D7B66606F"></a><h4 id="ARPLS-GUID-84687227-E47E-4B3C-AAE0-D72D7B66606F" class="sect4"><span class="enumeration_section">169.8.14 </span>XID_T Subtype
                  </h4>
                  <div>
                     <p>The XID_T subtype is defined to store the execution unique ID returned by function GET_XID.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-84687227-E47E-4B3C-AAE0-D72D7B66606F__GUID-44F30155-3F9E-462E-A56F-F07C262224BF">Syntax</p><pre class="oac_no_warn" dir="ltr">SUBTYPE XID_T IS VARCHAR2(1024);</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D03D40B2-1D30-4292-938D-8E668C00EBE9" name="GUID-D03D40B2-1D30-4292-938D-8E668C00EBE9"></a><h3 id="ARPLS-GUID-D03D40B2-1D30-4292-938D-8E668C00EBE9" class="sect3"><span class="enumeration_section">169.9 </span>Summary of DBMS_TF Subprograms
               </h3>
               <div>
                  <p>This summary briefly describes the <code class="codeph">DBMS_TF</code> package subprograms.
                  </p>
                  <div class="section">
                     <div class="tblformal" id="GUID-D03D40B2-1D30-4292-938D-8E668C00EBE9__PTFSERVERAPISUBPROGRAMS-1E13D7E0">
                        <p class="titleintable">Table 169-14 DBMS_TF Subprograms</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF Subprograms" summary="This table lists the DBMS_TF package subprograms in alphabetical order and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d1047042e5957">Subprogram</th>
                                 <th align="left" valign="bottom" id="d1047042e5960">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e5965" headers="d1047042e5957 ">
                                    <p><code class="codeph">COLUMN_TYPE_NAME</code> Function
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e5965 d1047042e5960 ">
                                    <p>Returns the type name of the specified column type</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e5974" headers="d1047042e5957 ">
                                    <p><code class="codeph">COL_TO_CHAR</code> Function
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e5974 d1047042e5960 ">
                                    <p>Returns the string representation of the specified column</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e5983" headers="d1047042e5957 ">
                                    <p><code class="codeph">CSTORE_EXISTS</code> Function
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e5983 d1047042e5960 ">
                                    <p>Returns TRUE if an item with a given key exists in the PTF Compilation State management Store</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e5992" headers="d1047042e5957 ">
                                    <p><code class="codeph">CSTORE_GET</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e5992 d1047042e5960 ">
                                    <p>Gets item(s) of specified type from the PTF Compilation State management Store</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6001" headers="d1047042e5957 ">
                                    <p><code class="codeph">GET_COL</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6001 d1047042e5960 ">
                                    <p>Gets read column values</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6010" headers="d1047042e5957 ">
                                    <p><code class="codeph">GET_ENV</code> Function
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6010 d1047042e5960 ">
                                    <p>Returns information about the PTF runtime environment</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6019" headers="d1047042e5957 ">
                                    <p><code class="codeph">GET_ROW_SET</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6019 d1047042e5960 ">
                                    <p>Gets read set of column values in the collection</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6028" headers="d1047042e5957 ">
                                    <p><code class="codeph">GET_XID</code> Function
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6028 d1047042e5960 ">
                                    <p>Returns a unique execution id that can be used by the PTF to index any cursor execution specific runtime state</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6037" headers="d1047042e5957 ">
                                    <p><code class="codeph">PUT_COL</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6037 d1047042e5960 ">
                                    <p>Puts column values in the database</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6046" headers="d1047042e5957 ">
                                    <p><code class="codeph">PUT_ROW_SET</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6046 d1047042e5960 ">
                                    <p>Puts the collection read set of column values in the database</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6055" headers="d1047042e5957 ">
                                    <p><code class="codeph">ROW_REPLICATION</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6055 d1047042e5960 ">
                                    <p>Sets the row replication factor</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6065" headers="d1047042e5957 ">
                                    <p><code class="codeph">ROW_TO_CHAR</code> Function
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6065 d1047042e5960 ">
                                    <p>Returns the string representation of a row in a rowset</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6074" headers="d1047042e5957 ">
                                    <p><code class="codeph">SUPPORTED_TYPE</code> Function
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6074 d1047042e5960 ">
                                    <p>Returns TRUE if a specified type is supported by PTF infrastructure</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6083" headers="d1047042e5957 ">
                                    <p><code class="codeph">TRACE</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6083 d1047042e5960 ">
                                    <p>Prints data structures to help development  and problem diagnosis</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6092" headers="d1047042e5957 ">
                                    <p><code class="codeph">XSTORE_CLEAR</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6092 d1047042e5960 ">
                                    <p>Removes all key-value pairs from XStore</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6101" headers="d1047042e5957 ">
                                    <p><code class="codeph">XSTORE_EXISTS</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6101 d1047042e5960 ">
                                    <p>Returns TRUE if the key has an associated value</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6110" headers="d1047042e5957 ">
                                    <p><code class="codeph">XSTORE_GET</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6110 d1047042e5960 ">
                                    <p>Gets a key-value store for PTF Execution State Management</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6119" headers="d1047042e5957 ">
                                    <p><code class="codeph">XSTORE_REMOVE</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6119 d1047042e5960 ">
                                    <p>Removes any value associated with the given key</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1047042e6128" headers="d1047042e5957 ">
                                    <p><code class="codeph">XSTORE_SET</code> Procedure
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d1047042e6128 d1047042e5960 ">
                                    <p>Sets the value for the given key store for PTF Execution State Management</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-7855D0E0-1ADB-4A90-AB9E-C33667C3D1C7" name="GUID-7855D0E0-1ADB-4A90-AB9E-C33667C3D1C7"></a><h4 id="ARPLS-GUID-7855D0E0-1ADB-4A90-AB9E-C33667C3D1C7" class="sect4"><span class="enumeration_section">169.9.1 </span>COLUMN_TYPE_NAME Function
                  </h4>
                  <div>
                     <p>Returns the type name for the specified column type.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7855D0E0-1ADB-4A90-AB9E-C33667C3D1C7__GUID-C560CC2F-362A-4BDA-B19E-9696B7AB315F">Syntax</p><pre class="oac_no_warn" dir="ltr">FUNCTION COLUMN_TYPE_NAME(
   col COLUMN_METADATA_T)
   RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7855D0E0-1ADB-4A90-AB9E-C33667C3D1C7__GUID-02A6BB18-DB44-4888-A62E-9EB50899A25A">Parameters</p>
                        <div class="tblformal" id="GUID-7855D0E0-1ADB-4A90-AB9E-C33667C3D1C7__GUID-77850840-32A8-447F-9E78-029466097EF6">
                           <p class="titleintable">Table 169-15 DBMS_TF.COLUMN_TYPE_NAME Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF.COLUMN_TYPE_NAME Function Parameters" summary="This table describes the parameters of DBMS_TF.COLUMN_TYPE_NAME subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1047042e6245">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1047042e6248">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e6253" headers="d1047042e6245 ">
                                       <p><code class="codeph">col</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e6253 d1047042e6248 ">
                                       <p>The column metadata. See <a href="DBMS_TF.html#GUID-BF81AD20-0139-4A27-849C-DD4216217CEE" title="This type contains metadata about an existing table column or a new column produced by PTF.">COLUMN_METADATA_T Record Type</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7855D0E0-1ADB-4A90-AB9E-C33667C3D1C7__GUID-E89C6139-51D6-4299-88E8-F1000F6C42AB">Return Values</p>
                        <p>Returns the column type converted as text.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-7855D0E0-1ADB-4A90-AB9E-C33667C3D1C7__GUID-7F45B90B-BF29-435F-9384-1AE2F89C7F53">
                        <p class="titleinexample">Example 169-5 DBMS_TF.COLUMN_TYPE_NAME Example</p>
                        <p>This example shows an application type check that invokes <code class="codeph">COLUMN_TYPE_NAME</code> to compare the column type and raise an application error if the column type is not <code class="codeph">VARCHAR2</code>.
                        </p><pre class="oac_no_warn" dir="ltr">FUNCTION describe(
   tab   IN OUT DBMS_TF.table_t,
   cols  IN     DBMS_TF.columns_t)
   RETURN DBMS_TF.describe_t
AS
   new_cols DBMS_TF.columns_new_t;
   col_id    PLS_INTEGER := 1;
 BEGIN
	 FOR i IN 1 .. tab.count LOOP
	    FOR j IN 1 .. cols.count LOOP
	       IF (tab(i).description.name = cols(j)) THEN
		        IF (DBMS_TF.column_type_name(tab(i).description.type) != 'VARCHAR2') THEN
		           raise_application_error(-20102,
		            'Unsupported column type ['||tab(i).description.type||']');
		        END IF;
		      tab(i).for_read       := true;
		      new_cols(col_id)      := tab(i).description;
		      new_cols(col_id).name := 'ECHO_'|| tab(i).description.name;
		      col_id                := col_id + 1;
 		      EXIT;
	      END IF;
	    END LOOP;
	 END LOOP;
	 
	 --  Verify all columns were found 
	 IF (col_id - 1 != cols.count) THEN
	    raise_application_error(-20101,
	      'Column mismatch ['||col_id-1||'], ['||cols.count||']');
	 END IF;
	 
	 RETURN DBMS_TF.describe_t(new_columns =&gt; new_cols);
 END;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-C8E533D9-243E-4874-86B9-116A97980A54" name="GUID-C8E533D9-243E-4874-86B9-116A97980A54"></a><h4 id="ARPLS-GUID-C8E533D9-243E-4874-86B9-116A97980A54" class="sect4"><span class="enumeration_section">169.9.2 </span>COL_TO_CHAR Function
                  </h4>
                  <div>
                     <p>Returns the string representation of the specified column.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C8E533D9-243E-4874-86B9-116A97980A54__GUID-9FAAB21A-D089-493A-8205-AA7C3E29B750">Syntax</p><pre class="oac_no_warn" dir="ltr">FUNCTION COL_TO_CHAR(
   col   COLUMN_DATA_T, 
   rid   PLS_INTEGER, 
   quote VARCHAR2 DEFAULT '"') 
  RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C8E533D9-243E-4874-86B9-116A97980A54__GUID-92599475-C73C-49E8-BBD3-27F26DC92B01">Parameters</p>
                        <div class="tblformal" id="GUID-C8E533D9-243E-4874-86B9-116A97980A54__GUID-F4B3D131-0356-4C46-B23E-3C174E6A78FB">
                           <p class="titleintable">Table 169-16 DBMS_TF.COL_TO_CHAR Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF.COL_TO_CHAR Function Parameters" summary="This table describes the parameters of DBMS_TF.COL_TO_CHAR subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1047042e6388">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1047042e6391">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1047042e6396" headers="d1047042e6388 ">
                                       <p><code class="codeph">col</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1047042e6396 d1047042e6391 ">
                                       <p>The column whose value is to be converted</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1047042e6404" headers="d1047042e6388 ">
                                       <p><code class="codeph">rid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1047042e6404 d1047042e6391 ">
                                       <p>Row number</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1047042e6412" headers="d1047042e6388 ">
                                       <p><code class="codeph">quote</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1047042e6412 d1047042e6391 ">
                                       <p>Quotation mark to use for non-numeric values</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C8E533D9-243E-4874-86B9-116A97980A54__GUID-5DBA798C-96A1-4AC0-9847-3B11603508AA">Return Values</p>
                        <p>The string representation of a column data value.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C8E533D9-243E-4874-86B9-116A97980A54__GUID-D535E2D0-F92F-4580-AB84-1E6DB898B18B">
                        <p class="titleinexample">Example 169-6 DBMS_TF.COL_TO_CHAR Example</p><pre class="pre codeblock"><code>PROCEDURE Fetch_Rows AS 
    rowset DBMS_TF.rROW_SET_T;
    str    VARCHAR2(32000);
BEGIN
     DBMS_TF.GET_ROW_SET(rowset);
     str := DBMS_TF.COL_TO_CHAR(rowset(1), 1)
END;</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AB5593F5-D1FF-4676-927E-8000EA2A226E" name="GUID-AB5593F5-D1FF-4676-927E-8000EA2A226E"></a><h4 id="ARPLS-GUID-AB5593F5-D1FF-4676-927E-8000EA2A226E" class="sect4"><span class="enumeration_section">169.9.3 </span>CSTORE_EXISTS Function
                  </h4>
                  <div>
                     <p>Returns TRUE if an item with a given key exists in the Store PTF Compilation State.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AB5593F5-D1FF-4676-927E-8000EA2A226E__GUID-B514DD79-74EE-4C04-9DA0-ED8D1D6D4E9B">Syntax</p><pre class="oac_no_warn" dir="ltr">FUNCTION CSTORE_EXISTS
  (key      IN VARCHAR2, 
   key_type IN PLS_INTEGER default NULL)
   return BOOLEAN;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB5593F5-D1FF-4676-927E-8000EA2A226E__GUID-382CD32B-FDC0-4B62-8E2E-2B578B7267A6">Parameters</p>
                        <div class="tblformal" id="GUID-AB5593F5-D1FF-4676-927E-8000EA2A226E__GUID-E049F941-6A91-4458-8FB4-E425244B62A6">
                           <p class="titleintable">Table 169-17 CSTORE_EXISTS Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CSTORE_EXISTS Function Parameters" summary="This table describes the parameters of DBMS_TF.CSTORE_EXISTS subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1047042e6535">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1047042e6538">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e6543" headers="d1047042e6535 ">
                                       <p><code class="codeph">key</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e6543 d1047042e6538 ">
                                       <p>A unique character key</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e6551" headers="d1047042e6535 ">
                                       <p><code class="codeph">key_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e6551 d1047042e6538 ">
                                       <p>The type of key (optional) Default : NULL</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB5593F5-D1FF-4676-927E-8000EA2A226E__GUID-29140E33-5587-4A5C-AFE9-FD45DD3EFA6A">Return Values</p>
                        <p> Returns TRUE if the key has an associated value. When the key_type is NULL (default), it returns TRUE if the key has an associated value of any of the supported type.</p>
                        <p>When a key_type parameter value is passed, it returns TRUE if the key and specified type of key has an associated value. Otherwise, it returns FALSE.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-AB5593F5-D1FF-4676-927E-8000EA2A226E__GUID-2D023F03-F7D9-4970-B597-1CFC7365D0B2">
                        <p class="titleinexample">Example 169-7 DBMS_TF.CSTORE_EXISTS Example</p>
                        <p>This code excerpt checks if an item with the key exists before reading it from the compilation store.</p><pre class="pre codeblock"><code>IF (DBMS_TF.CSTORE_EXISTS('min'||j)) THEN
    DBMS_TF.CSTORE_GET('min'||j, min_col);
END IF;</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-67C16F2C-8E61-4FF0-A426-FB7ECC5E05C0" name="GUID-67C16F2C-8E61-4FF0-A426-FB7ECC5E05C0"></a><h4 id="ARPLS-GUID-67C16F2C-8E61-4FF0-A426-FB7ECC5E05C0" class="sect4"><span class="enumeration_section">169.9.4 </span>CSTORE_GET Procedure
                  </h4>
                  <div>
                     <p>You can use the CSTORE_GET procedure to get the associated value for a given key stored for PTF Compilation State.</p>
                     <div class="section">
                        <p>CSTORE is the PTF compilation state management interface. The CSTORE interface is used to set and store key-value pairs during cursor compilation through the <code class="codeph">DBMS_TF.DESCRIBE</code> function.
                        </p>
                        <p>You can get the PTF compilation state during runtime procedures such as <code class="codeph">OPEN</code>, <code class="codeph">FETCH_ROWS</code> and <code class="codeph">CLOSE</code>.
                        </p>
                        <p>This procedure is overloaded. The <code class="codeph">DESCRIBE_T</code> supports specifying key-value pairs for these scalar types: <code class="codeph">VARCHAR2</code>, <code class="codeph">NUMBER</code>, <code class="codeph">DATE</code>, <code class="codeph">BOOLEAN</code>.
                        </p>
                        <p>See <a href="DBMS_TF.html#GUID-375CF300-0C4D-4EBD-8DC1-ACDB98B1BCBB__DBMS_TFCSTOREPREDEFINEDTYPES-24C5B880" title="This table describes predefined scalar supported types to use with the CSTORE subprograms.">Table 169-3</a> for more information.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-67C16F2C-8E61-4FF0-A426-FB7ECC5E05C0__GUID-BB24D653-4A75-471A-B3D8-96A6358DC41B">Syntax</p>
                        <p>Get the value associated with the key in the value out variable. The value type returned is one of the supported scalar types.</p><pre class="oac_no_warn" dir="ltr">
PROCEDURE CSTORE_GET(
   key   IN     VARCHAR2, 
   value IN OUT VARCHAR2);
</pre><pre class="oac_no_warn" dir="ltr">
PROCEDURE CSTORE_GET(
   key   IN     VARCHAR2, 
   value IN OUT NUMBER);
</pre><pre class="oac_no_warn" dir="ltr">
PROCEDURE CSTORE_GET(
   key   IN     VARCHAR2, 
   value IN OUT DATE);

</pre><pre class="oac_no_warn" dir="ltr">PROCEDURE CSTORE_GET(
   key   IN     VARCHAR2, 
   value IN OUT BOOLEAN);

</pre><p>When no specific key is passed as an input parameter, the entire collection of key values for that type that exist in the CSTORE is returned. </p><pre class="oac_no_warn" dir="ltr">PROCEDURE CSTORE_GET(key_value OUT CSTORE_CHR_T);

PROCEDURE CSTORE_GET(key_value OUT CSTORE_NUM_T);

PROCEDURE CSTORE_GET(key_value OUT CSTORE_BOL_T);

PROCEDURE CSTORE_GET(key_value OUT CSTORE_DAT_T);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-67C16F2C-8E61-4FF0-A426-FB7ECC5E05C0__GUID-BDF6D706-9B0C-45DA-B92B-51418D712969">Parameters</p>
                        <div class="tblformal" id="GUID-67C16F2C-8E61-4FF0-A426-FB7ECC5E05C0__GUID-6CF4FA16-4680-48D6-9AA5-7F8374B58A62">
                           <p class="titleintable">Table 169-18 DBMS_TF.CSTORE_GET Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF.CSTORE_GET Procedure Parameters" summary="This table describes the parameters of DBMS_TF.CSTORE_GET subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d1047042e6735">Parameter</th>
                                    <th align="left" valign="bottom" width="66%" id="d1047042e6738">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d1047042e6743" headers="d1047042e6735 ">
                                       <p><code class="codeph">key</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d1047042e6743 d1047042e6738 ">
                                       <p>A unique character key</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d1047042e6751" headers="d1047042e6735 ">
                                       <p><code class="codeph">value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d1047042e6751 d1047042e6738 ">
                                       <p>Value corresponding to the key for supported types</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d1047042e6759" headers="d1047042e6735 ">
                                       <p><code class="codeph">key_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d1047042e6759 d1047042e6738 ">
                                       <p>Key value</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D1C12B28-0D84-425B-8E1C-35650F434603" name="GUID-D1C12B28-0D84-425B-8E1C-35650F434603"></a><h4 id="ARPLS-GUID-D1C12B28-0D84-425B-8E1C-35650F434603" class="sect4"><span class="enumeration_section">169.9.5 </span>GET_COL Procedure
                  </h4>
                  <div>
                     <p>Get Read Column Values</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D1C12B28-0D84-425B-8E1C-35650F434603__GUID-4B297F54-9BD7-497E-A8AD-26E009D5D928">Syntax</p><pre class="oac_no_warn" dir="ltr">PROCEDURE GET_COL(
   columnId NUMBER,     
   collection IN OUT NOCOPY &lt;datatype&gt;);</pre><p>Where <span class="italic">&lt;datatype&gt;</span> can be any one of the supported types.
                        </p> See <a href="DBMS_TF.html#GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05__DBMS_TFSUPPORTEDTYPES-3ACFD083" title="This table describes supported types for DBMS_TF GET_COL and PUT_COL subprograms.">Table 169-1</a> for the list of supported types.
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D1C12B28-0D84-425B-8E1C-35650F434603__GUID-9F622732-8612-490B-A0D3-FB6087ED8594">Parameters</p>
                        <div class="tblformal" id="GUID-D1C12B28-0D84-425B-8E1C-35650F434603__GUID-4BC10455-50D6-46FF-9347-3A7A551EE450">
                           <p class="titleintable">Table 169-19 GET_COL Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_COL Procedure Parameters" summary="This table describes the parameters of DBMS_TF.GET_COL subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d1047042e6897">Parameter</th>
                                    <th align="left" valign="bottom" width="66%" id="d1047042e6900">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d1047042e6905" headers="d1047042e6897 ">
                                       <p><code class="codeph">columnid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d1047042e6905 d1047042e6900 ">
                                       <p>The id for the column</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d1047042e6913" headers="d1047042e6897 ">
                                       <p><code class="codeph"> collection</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d1047042e6913 d1047042e6900 ">
                                       <p>The data for the column</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D1C12B28-0D84-425B-8E1C-35650F434603__GUID-4B7FE523-0D10-4D56-9323-6914803881B0">Usage Notes</p>
                        <p>This procedure is used to get the read column values in the collection of scalar type. </p>
                        <p>The column numbers are in the get column order as created in <code class="codeph">DESCRIBE</code> method of PTF. 
                        </p>
                        <p>For the same ColumnId, <code class="codeph">GET_COL</code> and <code class="codeph">PUT_COL</code> may correspond to different column.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D1C12B28-0D84-425B-8E1C-35650F434603__DBMS_TF.GET_COLEXAMPLE-353A1FBA">
                        <p class="titleinexample">Example 169-8 DBMS_TF.GET_COL Example</p>
                        <p>This example is an excerpt of a fetch_rows procedure defined in the PTF implementation package.</p><pre class="pre codeblock"><code>PROCEDURE fetch_rows
IS
  col1 DBMS_TF.TAB_CLOB_T;
  col2 DBMS_TF.TAB_CLOB_T;
  out1 DBMS_TF.TAB_CLOB_T;
  out2 DBMS_TF.TAB_CLOB_T;
BEGIN
    DBMS_TF.GET_COL(1, col1);
    DBMS_TF.GET_COL(2, col2);

    FOR I IN 1 .. col1.COUNT LOOP
        out1(i) := 'ECHO-' || col1(i);
    END LOOP;

    FOR I IN 1 .. col2.COUNT LOOP
        out2(i) := 'ECHO-' || col2(i);
    END LOOP;

    DBMS_TF.PUT_COL(1, out1);
    DBMS_TF.PUT_COL(2, out2);
END; 
</code></pre><p>Note, invoking the DBMS_TF APIs directly is not allowed. An error is raised if an attempt is made to execute these procedures out of context.</p><pre class="oac_no_warn" dir="ltr">exec fetch_rows

ERROR at line 1:
ORA-62562: The API Get_Col can be called only during execution time of a polymorphic table function.
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-5E2C650E-1310-49A2-AF59-7E5B4D2497D2" name="GUID-5E2C650E-1310-49A2-AF59-7E5B4D2497D2"></a><h4 id="ARPLS-GUID-5E2C650E-1310-49A2-AF59-7E5B4D2497D2" class="sect4"><span class="enumeration_section">169.9.6 </span>GET_ENV Function
                  </h4>
                  <div>
                     <p>Returns information about the PTF runtime environment</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5E2C650E-1310-49A2-AF59-7E5B4D2497D2__GUID-BEAE260F-6986-405A-A162-CD1647E49124">Syntax</p><pre class="oac_no_warn" dir="ltr">FUNCTION GET_ENV 
         RETURN ENV_T;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5E2C650E-1310-49A2-AF59-7E5B4D2497D2__GUID-479DE382-48BF-4F7B-B72E-5C1DCB66D68C">Return Values</p>
                        <p>Returns information about the PTF runtime environment.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5E2C650E-1310-49A2-AF59-7E5B4D2497D2__GET_ENVEXAMPLE-353A67C6">
                        <p class="titleinexample">Example 169-9 DBMS_TF.GET_ENV Example</p>
                        <p>This line shows how you could initialize a local variable env of type ENV_T with the PTF execution information in a <code class="codeph">FETCH_ROWS</code> implementation procedure.
                        </p><pre class="pre codeblock"><code>env         DBMS_TF.ENV_T  := DBMS_TF.GET_ENV();</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4F4DCBFA-78D1-4573-ADE9-A435469C2908" name="GUID-4F4DCBFA-78D1-4573-ADE9-A435469C2908"></a><h4 id="ARPLS-GUID-4F4DCBFA-78D1-4573-ADE9-A435469C2908" class="sect4"><span class="enumeration_section">169.9.7 </span>GET_ROW_SET Procedure
                  </h4>
                  <div>
                     <p>Get Read Column Values</p>
                     <div class="section">
                        <p>The <code class="codeph">FETCH_ROW</code> procedure can call the <code class="codeph">GET_ROW_SET</code> procedure to read the input rowset set of column values in the collection of supported scalar type. This procedure is overloaded.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4F4DCBFA-78D1-4573-ADE9-A435469C2908__GUID-13C5FAA9-80A0-4DD3-80CA-F2BE2E998907">Syntax</p><pre class="oac_no_warn" dir="ltr"> PROCEDURE GET_ROW_SET(
   rowset    OUT NOCOPY ROW_SET_T);</pre><pre class="oac_no_warn" dir="ltr"> PROCEDURE GET_ROW_SET(
   rowset    OUT NOCOPY ROW_SET_T, 
   row_count OUT        PLS_INTEGER);</pre><pre class="oac_no_warn" dir="ltr"> PROCEDURE GET_ROW_SET(
   rowset    OUT NOCOPY ROW_SET_T, 
   row_count OUT        PLS_INTEGER,
   col_count OUT        PLS_INTEGER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4F4DCBFA-78D1-4573-ADE9-A435469C2908__GUID-561BFE79-8E8F-48E5-97F1-D242EA673E06">Parameters</p>
                        <div class="tblformal" id="GUID-4F4DCBFA-78D1-4573-ADE9-A435469C2908__GUID-21354576-178B-46A0-A07B-773E6B821E35">
                           <p class="titleintable">Table 169-20 GET_ROW_SET Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_ROW_SET Procedure Parameters" summary="This table describes the parameters of DBMS_TF.GET_ROW_SET subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1047042e7182">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1047042e7185">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e7190" headers="d1047042e7182 ">
                                       <p><code class="codeph">rowset</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e7190 d1047042e7185 ">
                                       <p>The collection of data and metadata</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e7198" headers="d1047042e7182 ">
                                       <p><code class="codeph">row_count</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e7198 d1047042e7185 ">
                                       <p>The number of rows in the columns</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e7206" headers="d1047042e7182 ">
                                       <p><code class="codeph">col_count</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e7206 d1047042e7185 ">
                                       <p>The number of columns</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4F4DCBFA-78D1-4573-ADE9-A435469C2908__DBMS_TF.GET_ROW_SETEXAMPLE-353ABC3E">
                        <p class="titleinexample">Example 169-10 DBMS_TF.GET_ROW_SET Example</p>
                        <p>This example is an excerpt from a PTF implementation package for demonstration purpose.</p><pre class="pre codeblock"><code>PROCEDURE fetch_rows(new_name IN VARCHAR2 DEFAULT 'PTF_CONCATENATE')
AS
  rowset      DBMS_TF.ROW_SET_T;
  accumulator DBMS_TF.TAB_VARCHAR2_T;
  row_count   PLS_INTEGER;

  FUNCTION get_value(col  PLS_INTEGER,
                     ROW  PLS_INTEGER)
  RETURN VARCHAR2
  AS
    col_type  PLS_INTEGER := rowset(col).description.TYPE;
  BEGIN
      CASE col_type
        WHEN DBMS_TF.TYPE_VARCHAR2 THEN
          RETURN NVL(rowset(col).TAB_VARCHAR2 (ROW), 'empty');
        ELSE
          RAISE_APPLICATION_ERROR(-20201, 'Non-Varchar Type='||col_type);
      END CASE;
  END;
BEGIN
    DBMS_TF.GET_ROW_SET(rowset, row_count);

    IF ( rowset.count = 0 ) THEN
      RETURN;
    END IF;

    FOR row_num IN 1 .. row_count LOOP
        accumulator(row_num) := 'empty';
    END LOOP;

    FOR col_num IN 1 .. rowset.count LOOP
        FOR row_num IN 1 .. row_count LOOP
            accumulator(row_num) := accumulator(row_num) || get_value(col_num, row_num);
        END LOOP;
    END LOOP;
    -- Pushout the accumulator
    DBMS_TF.PUT_COL(1, accumulator);
END; 
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div class="sect4"><a id="GUID-218BB245-0878-4139-9E8C-1231A52F7E40" name="GUID-218BB245-0878-4139-9E8C-1231A52F7E40"></a><h5 id="ARPLS-GUID-218BB245-0878-4139-9E8C-1231A52F7E40" class="sect5"><span class="enumeration_section">169.9.7.1 </span>Stack Polymorphic Table Function Example
                     </h5>
                     <div>
                        <p>The stack PTF example unpivots the non-null values of the specified numeric columns by converting each column value into a new row.</p>
                        <div class="example" id="GUID-218BB245-0878-4139-9E8C-1231A52F7E40__GUID-4C96DD2D-1E9F-432F-8A07-E51BD2A7ADC1">
                           <p class="titleinexample">Example 169-11 Stack Polymorphic Table Function Example</p>
                           <div class="infoboxnote" id="GUID-218BB245-0878-4139-9E8C-1231A52F7E40__GUID-6A29C86D-1690-4E54-9D2D-E59F3A93BCCB">
                              <p class="notep1">Live SQL:</p>
                              <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/arpls/ptf/ptfstack.html" target="_blank">Stack Polymorphic Table Function</a></p>
                           </div>
                           <p>Create the PTF implementation package stack_p.</p>
                           <div class="p">The parameters are :
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p> tab - Input table</p>
                                 </li>
                                 <li>
                                    <p>col - The names of numeric (input) table columns to stack</p>
                                 </li>
                              </ul> 
                           </div><pre class="pre codeblock"><code>CREATE PACKAGE stack_p AS

  FUNCTION  describe(tab  IN OUT dbms_tf.table_t, 
                     col         dbms_tf.columns_t)
            RETURN dbms_tf.describe_t;

  PROCEDURE fetch_rows;

END stack_p; 
</code></pre><p>Create the PTF implementation package body stack_p.</p>
                           <p>This PTF produces two new columns, <code class="codeph">COLUMN_NAME</code> and <code class="codeph">COLUMN_VALUE</code>, where the former contains the name of the unpivoted column and the latter contains the numeric value of that column. Additionally, the unpivoted  columns are removed from the PTF's output. 
                           </p><pre class="pre codeblock"><code>CREATE PACKAGE BODY stack_p AS

  FUNCTION  describe(tab  IN OUT dbms_tf.table_t, 
                     col         dbms_tf.columns_t)
            RETURN dbms_tf.describe_t  AS
  BEGIN
    FOR i IN 1 .. tab.column.count LOOP
      FOR j IN 1 .. col.count LOOP
        IF (tab.column(i).description.name = col(j) AND
            tab.column(i).description.TYPE = dbms_tf.type_number) THEN
          tab.column(i).pass_through := false;
          tab.column(i).for_read     := true;
        END IF;
      END LOOP;
    END LOOP;

    RETURN dbms_tf.describe_t(
             new_columns =&gt; dbms_tf.columns_new_t(
               1 =&gt; dbms_tf.column_metadata_t(name =&gt; 'COLUMN_NAME', 
                                              TYPE =&gt; dbms_tf.type_varchar2),
               2 =&gt; dbms_tf.column_metadata_t(name =&gt; 'COLUMN_VALUE',
                                              TYPE =&gt; dbms_tf.type_number)),
             row_replication =&gt; true);
  END;

  PROCEDURE fetch_rows  AS
    env    dbms_tf.env_t := dbms_tf.get_env();
    rowset dbms_tf.row_set_t;
    colcnt PLS_INTEGER;
    rowcnt PLS_INTEGER;
    repfac dbms_tf.tab_naturaln_t;
    namcol dbms_tf.tab_varchar2_t;
    valcol dbms_tf.tab_number_t; 
  BEGIN 
    dbms_tf.get_row_set(rowset, rowcnt, colcnt);

    FOR i IN 1 .. rowcnt LOOP 
      repfac(i) := 0; 
    END LOOP;

    FOR r IN 1 .. rowcnt LOOP
      FOR c IN 1 .. colcnt LOOP
        IF rowset(c).tab_number(r) IS NOT NULL THEN
          repfac(r)                    := repfac(r) + 1;
          namcol(nvl(namcol.last+1,1)) := 
            INITCAP(regexp_replace(env.get_columns(c).name, '^"|"$'));
          valcol(NVL(valcol.last+1,1)) := rowset(c).tab_number(r);
        END IF;
      END LOOP;
    END LOOP;

    dbms_tf.row_replication(replication_factor =&gt; repfac);
    dbms_tf.put_col(1, namcol);
    dbms_tf.put_col(2, valcol);

  END;

END stack_p; 
</code></pre><p>Create the standalone PTF named stack. Specify exactly one formal argument of type <code class="codeph">TABLE</code>, specify the return type of the PTF as <code class="codeph">TABLE</code>, specify a Row Semantics PTF type, and indicate the PTF implementation package to use is stack_p.
                           </p><pre class="pre codeblock"><code>CREATE FUNCTION stack(tab TABLE, 
                      col columns)
                  RETURN TABLE  
PIPELINED ROW POLYMORPHIC USING stack_p;
</code></pre><p>For all employees in departments 10 and 30, report values of columns <code class="codeph">MGR</code>, <code class="codeph">SAL,</code> and <code class="codeph">COMM</code> ordered by department number and employee name.
                           </p><pre class="pre codeblock"><code>SELECT   deptno, ename, column_name, column_value
FROM     stack(scott.emp, COLUMNS(mgr, sal, comm)) 
WHERE    deptno IN (10, 30)
ORDER BY deptno, ename;</code></pre><pre class="oac_no_warn" dir="ltr">    DEPTNO ENAME      COLUMN_NAME     COLUMN_VALUE
---------- ---------- --------------- ------------
        10 CLARK      Mgr                     7839
        10 CLARK      Sal                     2450
        10 KING       Sal                     5000
        10 MILLER     Sal                     1300
        10 MILLER     Mgr                     7782
        30 ALLEN      Comm                     300
        30 ALLEN      Mgr                     7698
        30 ALLEN      Sal                     1600
        30 BLAKE      Mgr                     7839
        30 BLAKE      Sal                     2850
        30 JAMES      Sal                      950
        30 JAMES      Mgr                     7698
        30 MARTIN     Comm                    1400
        30 MARTIN     Mgr                     7698
        30 MARTIN     Sal                     1250
        30 TURNER     Comm                       0
        30 TURNER     Sal                     1500
        30 TURNER     Mgr                     7698
        30 WARD       Comm                     500
        30 WARD       Mgr                     7698
        30 WARD       Sal                     1250
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E151DA71-DBD2-4B80-AD2E-71D830283BE3" name="GUID-E151DA71-DBD2-4B80-AD2E-71D830283BE3"></a><h4 id="ARPLS-GUID-E151DA71-DBD2-4B80-AD2E-71D830283BE3" class="sect4"><span class="enumeration_section">169.9.8 </span>GET_XID Function
                  </h4>
                  <div>
                     <p>Returns a unique execution id that can be used by the PTF to index any cursor-execution specific runtime state.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E151DA71-DBD2-4B80-AD2E-71D830283BE3__GUID-E6838868-B0DE-4C62-86CE-349290D96BF6">Syntax</p><pre class="oac_no_warn" dir="ltr">FUNCTION GET_XID
      RETURN XID_T; 
  </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E151DA71-DBD2-4B80-AD2E-71D830283BE3__GUID-6753C984-87DF-49FC-9C5F-A854D8CB38CB">Return Values</p>
                        <p> A unique execution id that can be used by the PTF to index  any cursor-execution specific runtime state.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E151DA71-DBD2-4B80-AD2E-71D830283BE3__DBMS_TF.GET_XIDEXAMPLE-353B353D">
                        <p class="titleinexample">Example 169-12 DBMS_TF.GET_XID Example</p>
                        <p>This is an excerpt of code showing an invocation of GET_XID to initialize a local variable indexed using the execution id to a zero value.</p><pre class="pre codeblock"><code>PROCEDURE open IS
BEGIN
  xst(DBMS_TF.GET_XID()) := 0;
END;</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-93002459-D3C7-4846-9E20-012F58AB3B3D" name="GUID-93002459-D3C7-4846-9E20-012F58AB3B3D"></a><h4 id="ARPLS-GUID-93002459-D3C7-4846-9E20-012F58AB3B3D" class="sect4"><span class="enumeration_section">169.9.9 </span>PUT_COL Procedure
                  </h4>
                  <div>
                     <p>Put Column Values</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-93002459-D3C7-4846-9E20-012F58AB3B3D__GUID-7EB69B1E-9F83-4AAF-8F8A-843B80FE93CF">Syntax</p><pre class="oac_no_warn" dir="ltr">PROCEDURE PUT_COL(
   columnid NUMBER,     
   collection IN &lt;datatype&gt;);</pre><p>Where <span class="italic">&lt;datatype&gt;</span> can be any one of the supported types.
                        </p> See <a href="DBMS_TF.html#GUID-92C604B3-D0F9-4306-AD2D-48CA202B3C05__DBMS_TFSUPPORTEDTYPES-3ACFD083" title="This table describes supported types for DBMS_TF GET_COL and PUT_COL subprograms.">Table 169-1</a> for the list of supported types.
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93002459-D3C7-4846-9E20-012F58AB3B3D__GUID-9F622732-8612-490B-A0D3-FB6087ED8594">Parameters</p>
                        <div class="tblformal" id="GUID-93002459-D3C7-4846-9E20-012F58AB3B3D__GUID-4BC10455-50D6-46FF-9347-3A7A551EE450">
                           <p class="titleintable">Table 169-21 PUT_COL Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PUT_COL Procedure Parameters" summary="This table describes the parameters of DBMS_TF.PUT_COL subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1047042e7607">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1047042e7610">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e7615" headers="d1047042e7607 ">
                                       <p><code class="codeph">columnid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e7615 d1047042e7610 ">
                                       <p>The id for the column </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e7623" headers="d1047042e7607 ">
                                       <p><code class="codeph"> collection</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e7623 d1047042e7610 ">
                                       <p>The data for the column</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93002459-D3C7-4846-9E20-012F58AB3B3D__GUID-4B7FE523-0D10-4D56-9323-6914803881B0">Usage Notes</p>
                        <p>This procedure is used to put the read column values in the  collection of scalar type. </p>
                        <p> The collection of scalar type should be of supported type only.</p>
                        <p>The column numbers are in the get column order as created in <code class="codeph">DESCRIBE</code> method of PTF. 
                        </p>
                        <p>For the same columnid, <code class="codeph">GET_COL</code> and <code class="codeph">PUT_COL</code> may correspond to different column.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-5C861282-03EE-420F-90D6-B01EB18A744D" name="GUID-5C861282-03EE-420F-90D6-B01EB18A744D"></a><h5 id="ARPLS-GUID-5C861282-03EE-420F-90D6-B01EB18A744D" class="sect5"><span class="enumeration_section">169.9.9.1 </span>Rand_col Polymorphic Table Function Example
                     </h5>
                     <div>
                        <p>The rand_col PTF appends specified number of random-valued columns to the output.</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-5C861282-03EE-420F-90D6-B01EB18A744D__GUID-B7754859-0A09-4EDA-8B2C-0566489203DB">
                           <p class="titleinexample">Example 169-13 Rand_col Polymorphic Table Function Example</p>
                           <div class="infoboxnote" id="GUID-5C861282-03EE-420F-90D6-B01EB18A744D__GUID-4694EB6C-C095-464F-8E84-09810037F68B">
                              <p class="notep1">Live SQL:</p>
                              <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/arpls/ptf/ptfrdncol.html" target="_blank">Rand_col Polymorphic Table Function</a></p>
                           </div>
                           <p> This rand_col PTF example appends col_count number of random-valued columns to the output.  Optionally, the caller can restrict the random values to a numeric range  by specifying [low, high]. The new columns are named "RAND_<span class="italic">&lt;n&gt;</span>”
                           </p>
                           <p>Create the PTF implementation package rand_col_p.</p>
                           <p>The parameters are :</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>tab : Input table</p>
                              </li>
                              <li>
                                 <p>col_count (optional) : Number of random-valued columns to generate [Default = 1] </p>
                              </li>
                              <li>
                                 <p>low  (optional) : Lower bound for the random numbers  [Default = Null]</p>
                              </li>
                              <li>
                                 <p>high (optional) : Upper bound for the random numbers [Default = Null]</p>
                              </li>
                           </ul><pre class="pre codeblock"><code>CREATE PACKAGE rand_col_p AS

  FUNCTION describe(tab       IN OUT DBMS_TF.table_t, 
                    col_count        NATURALN DEFAULT 1,  
                    low              NUMBER   DEFAULT NULL, 
                    high             NUMBER   DEFAULT NULL) 
           RETURN DBMS_TF.describe_t;

  PROCEDURE fetch_rows(col_count NATURALN DEFAULT 1,  
                       low       NUMBER   DEFAULT NULL, 
                       high      NUMBER   DEFAULT NULL);

END rand_col_p; </code></pre><p>Create the PTF implementation package body rand_col_p.</p>
                           <p>The parameter col_count is a 'shape-determining' parameter and thus must be a constant (no binds, correlations, or expressions). By defining the type of col_count to be <code class="codeph">NATURALN</code>, which has an implicit  <code class="codeph">NOT NULL</code> constraint, we guarantee that a cursor with non-constant value  for this parameter will get a compilation error.
                           </p><pre class="pre codeblock"><code>CREATE PACKAGE BODY rand_col_p AS
  col_name_prefix CONSTANT dbms_id := 'RAND_';

  FUNCTION describe(tab       IN OUT DBMS_TF.table_t, 
                    col_count        NATURALN DEFAULT 1,  
                    low              NUMBER   DEFAULT NULL, 
                    high             NUMBER   DEFAULT NULL) 
           RETURN DBMS_TF.describe_t
  AS 
    cols DBMS_TF.columns_new_t;
  BEGIN 
    FOR i IN 1 .. col_count LOOP
     cols(i):= DBMS_TF.column_metadata_t(name=&gt;col_name_prefix||i, TYPE=&gt;DBMS_TF.type_number);
    END LOOP;

    RETURN DBMS_TF.describe_t(new_columns =&gt; cols);
  END;

  PROCEDURE fetch_rows(col_count NATURALN DEFAULT 1,  
                       low       NUMBER   DEFAULT NULL, 
                       high      NUMBER   DEFAULT NULL) 
  AS
    row_count CONSTANT PLS_INTEGER := DBMS_TF.get_env().row_count;
    col       DBMS_TF.tab_number_t;
  BEGIN
    FOR c IN 1 .. col_count LOOP
      FOR i IN 1 .. row_count LOOP
        col(i) :=  CASE WHEN (low IS NULL OR high IS NULL)
                        THEN dbms_random.VALUE 
	                     ELSE dbms_random.VALUE(low, high) 	                
	                 END;
      END LOOP;
      DBMS_TF.put_col(c, col);
    END LOOP;
  END;

END rand_col_p; </code></pre><p>Create the standalone rand_col PTF. Specify exactly one formal argument of type TABLE, specify the return type of the PTF as TABLE, specify a Row Semantics PTF type, and indicate the PTF implementation package to use is rand_col_p.</p><pre class="pre codeblock"><code>CREATE FUNCTION rand_col(tab TABLE, 
                         col_count NATURALN DEFAULT 1,  
                         low       NUMBER   DEFAULT NULL, 
                         high      NUMBER   DEFAULT NULL)
                  RETURN TABLE 
                  PIPELINED ROW POLYMORPHIC USING rand_col_p;</code></pre><p>Invoke the rand_col PTF to display all columns of table SCOTT.DEPT with one produced RAND_1 column.</p><pre class="pre codeblock"><code>  SELECT * 
    FROM rand_col(scott.dept);</code></pre><pre class="oac_no_warn" dir="ltr">    DEPTNO DNAME          LOC               RAND_1
---------- -------------- ------------- ----------
        10 ACCOUNTING     NEW YORK      .738666262
        20 RESEARCH       DALLAS        .093256312
        30 SALES          CHICAGO       .992944835
        40 OPERATIONS     BOSTON        .397948124
</pre><p>Invoke the rand_col PTF to display all columns of table SCOTT.DEPT with two produced RAND_1 and RAND_2 columns.</p><pre class="pre codeblock"><code>  SELECT * 
    FROM rand_col(scott.dept, col_count =&gt; 2);</code></pre><pre class="oac_no_warn" dir="ltr">    DEPTNO DNAME          LOC               RAND_1     RAND_2
---------- -------------- ------------- ---------- ----------
        10 ACCOUNTING     NEW YORK      .976521361 .209802028
        20 RESEARCH       DALLAS        .899577891  .10050334
        30 SALES          CHICAGO       .277238362 .110736583
        40 OPERATIONS     BOSTON        .989839995 .164822363
</pre><p>For all employees for which their job is not being a SALESMAN, display the employee name, job, and produce three RAND columns generating random values between —10 and 10.</p><pre class="pre codeblock"><code>  SELECT ename, job, rand_1, rand_2, rand_3
    FROM   rand_col(scott.emp, col_count =&gt; 3, low =&gt; -10, high =&gt; +10)
    WHERE  job != 'SALESMAN';
</code></pre><pre class="oac_no_warn" dir="ltr">ENAME      JOB           RAND_1     RAND_2     RAND_3
---------- --------- ---------- ---------- ----------
SMITH      CLERK     8.91760464 6.67366638 -9.2789076
JONES      MANAGER   6.78612961 -1.8617958  6.5282227
BLAKE      MANAGER   7.59545803 5.22269017 -2.7966401
CLARK      MANAGER   -6.4747304 -7.3650276 3.28388872
SCOTT      ANALYST   6.80492435 -3.2271045 -.97099797
KING       PRESIDENT -9.3161177 6.27762154 -1.8184785
ADAMS      CLERK     -1.6618848 3.13119089 8.06363075
JAMES      CLERK     2.86918245 -3.5187936 -.72913809
FORD       ANALYST   6.67038328 -7.4989893 1.99072598
MILLER     CLERK     -2.1574578 -8.5082989 -.56046716
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-549CEC61-3483-431C-86A2-D088E135EF4F" name="GUID-549CEC61-3483-431C-86A2-D088E135EF4F"></a><h4 id="ARPLS-GUID-549CEC61-3483-431C-86A2-D088E135EF4F" class="sect4"><span class="enumeration_section">169.9.10 </span>PUT_ROW_SET Procedure
                  </h4>
                  <div>
                     <p>Writes a collection of new column values in the database.</p>
                     <div class="section">
                        <p>You can use this procedure to write all new columns in a collection of rows in the database. </p>
                        <p>This procedure is overloaded. Rows are not replicated by default. You can use the <code class="codeph">ROW_REPLICATION</code> procedure to set the replication factor.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-549CEC61-3483-431C-86A2-D088E135EF4F__GUID-D39E4E04-8C16-44D4-8279-12843F428D5A">Syntax</p>
                        <p>This syntax is used when rows are not replicated.</p><pre class="oac_no_warn" dir="ltr">PROCEDURE PUT_ROW_SET(
   rowset IN ROW_SET_T);
</pre><p>This syntax is used when the replication factor is a constant.</p><pre class="oac_no_warn" dir="ltr">  PROCEDURE PUT_ROW_SET(
   rowset             IN   ROW_SET_T,
   replication_factor IN   NATURALN);
</pre><p>This syntax is used when the replication factor is specified as an array with multiple values.</p><pre class="oac_no_warn" dir="ltr">PROCEDURE PUT_ROW_SET(
   rowset             IN   ROW_SET_T,
   replication_factor IN   TAB_NATURALN_T);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-549CEC61-3483-431C-86A2-D088E135EF4F__GUID-B87928BC-5FBA-42D3-9F10-4E6A9BB2F8E8">Parameters</p>
                        <div class="tblformal" id="GUID-549CEC61-3483-431C-86A2-D088E135EF4F__GUID-0BFCFDA4-745D-4BCE-B00E-B940AD42EB04">
                           <p class="titleintable">Table 169-22 PUT_ROW_SET Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PUT_ROW_SET Procedure Parameters" summary="This table describes the parameters of DBMS_TF.PUT_ROW_SET subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1047042e7933">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1047042e7936">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e7941" headers="d1047042e7933 ">
                                       <p><code class="codeph">rowset</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e7941 d1047042e7936 ">
                                       <p>The collection of data and metadata</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e7949" headers="d1047042e7933 ">
                                       <p><code class="codeph">replication_factor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e7949 d1047042e7936 ">
                                       <p>The replication factor per row</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-549CEC61-3483-431C-86A2-D088E135EF4F__DBMS_TF.PUT_ROW_SETEXAMPLE-353B8C15">
                        <p class="titleinexample">Example 169-14 DBMS_TF.PUT_ROW_SET Example</p>
                        <p>This code excerpt fetches a collection of rows and writes all new columns back to the database without any processing.</p><pre class="pre codeblock"><code>PROCEDURE fetch_rows
AS
  rowset DBMS_TF.ROW_SET_T;
BEGIN
    DBMS_TF.GET_ROW_SET(rowset);
    DBMS_TF.PUT_ROW_SET(rowset);
END; 
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div class="sect4"><a id="GUID-73409F70-2C85-4200-A280-76A2E7179B67" name="GUID-73409F70-2C85-4200-A280-76A2E7179B67"></a><h5 id="ARPLS-GUID-73409F70-2C85-4200-A280-76A2E7179B67" class="sect5"><span class="enumeration_section">169.9.10.1 </span>Split Polymorphic Table Function Example
                     </h5>
                     <div>
                        <p>The split PTF example splits each row of the input table into specified pieces.</p>
                        <div class="example" id="GUID-73409F70-2C85-4200-A280-76A2E7179B67__GUID-9470863B-8260-44A4-A299-2F03B0249D9E">
                           <p class="titleinexample">Example 169-15 Split Polymorphic Table Function Example</p>
                           <p>This PTF example splits each row of the input table into cnt pieces  dividing the values of the split columns.</p>
                           <div class="infoboxnote" id="GUID-73409F70-2C85-4200-A280-76A2E7179B67__GUID-E4CB9E3C-F782-4BA3-BDDF-4DC86AE29347">
                              <p class="notep1">Live SQL:</p>
                              <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/arpls/ptf/ptfsplit.html" target="_blank">Split Polymorphic Table Function</a></p>
                           </div>
                           <p>Create the PTF implementation package split_p.</p>
                           <div class="p">The parameters are :
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>tab - Input table</p>
                                 </li>
                                 <li>
                                    <p>col - The names of numeric (input) table columns to split</p>
                                 </li>
                                 <li>
                                    <p>cnt - The number of times each input row is to be split </p>
                                 </li>
                              </ul>
                           </div><pre class="pre codeblock"><code>CREATE PACKAGE split_p AS

  FUNCTION  describe(tab  IN OUT DBMS_TF.table_t, 
                     col         DBMS_TF.columns_t,
                     cnt         NATURALN) 
            RETURN DBMS_TF.describe_t;

  PROCEDURE fetch_rows(cnt NATURALN);

END split_p; 
</code></pre><p>Create the PTF implementation package body split_p. Each row of the input table is split into cnt pieces dividing the values of the split columns.</p><pre class="pre codeblock"><code>CREATE PACKAGE BODY split_p AS

  FUNCTION  describe(tab  IN OUT DBMS_TF.Table_t, 
                     col         DBMS_TF.Columns_t,
                     cnt         NATURALN) 
            RETURN DBMS_TF.describe_t 
  AS
    new_cols DBMS_TF.columns_new_t;
    col_id   PLS_INTEGER := 1;
  BEGIN
    FOR i IN 1 .. tab.column.count LOOP
      FOR j IN 1 .. col.count LOOP
        IF (tab.column(i).description.name = col(j) AND
            tab.column(i).description.TYPE = DBMS_TF.type_number) THEN
          tab.column(i).pass_through := FALSE;
          tab.column(i).for_read     := TRUE;
          new_cols(col_id) := tab.column(i).description;
          col_id := col_id + 1;
        END IF;
      END LOOP;
    END LOOP;

    RETURN DBMS_TF.describe_t(new_columns=&gt;new_cols, row_replication=&gt;true); 
  END;
  PROCEDURE fetch_rows(cnt NATURALN) 
  AS
    inp_rs DBMS_TF.row_set_t;
    out_rs DBMS_TF.row_set_t;
    rows   PLS_INTEGER;
  BEGIN 
    DBMS_TF.get_row_set(inp_rs, rows);

    FOR c IN 1 .. inp_rs.count() LOOP
      FOR r IN 1 .. rows LOOP
        FOR i IN 1 .. cnt LOOP
          out_rs(c).tab_number((r-1)*cnt+i) := inp_rs(c).tab_number(r)/cnt;
        END LOOP;
      END LOOP;
    END LOOP;

    DBMS_TF.put_row_set(out_rs, replication_factor =&gt; cnt);
  END;

END split_p; 
</code></pre><p>Create the standalone PTF named split. Specify exactly one formal argument of type <code class="codeph">TABLE</code>, specify the return type of the PTF as <code class="codeph">TABLE</code>, specify a Row Semantics PTF type, and indicate the PTF implementation package to use is split_p.
                           </p><pre class="pre codeblock"><code>CREATE FUNCTION split(tab TABLE, col columns, cnt NATURALN)
                  RETURN TABLE 
PIPELINED ROW POLYMORPHIC USING split_p;</code></pre><p>For all employees in department 30, display the <code class="codeph">ENAME</code>, <code class="codeph">SAL</code>, and <code class="codeph">COMM</code> columns. Invoke the split PTF with the <code class="codeph">COLUMNS</code> pseudo-operator to divide the value of <code class="codeph">SAL</code> and <code class="codeph">COMM</code> by 2 for each replicated row returned by the query. Each row is replicated twice.
                           </p><pre class="pre codeblock"><code>SELECT ename, sal, comm 
FROM   split(scott.emp, COLUMNS(sal, comm), cnt =&gt; 2) 
WHERE  deptno=30;</code></pre><pre class="oac_no_warn" dir="ltr">ENAME             SAL                COMM
---------- ---------- -------------------
ALLEN             800                 150
ALLEN             800                 150
WARD              625                 250
WARD              625                 250
MARTIN            625                 700
MARTIN            625                 700
BLAKE            1425
BLAKE            1425
TURNER            750                   0
TURNER            750                   0
JAMES             475
JAMES             475
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F0B21736-CDE8-45CD-B250-64984E1CDE20" name="GUID-F0B21736-CDE8-45CD-B250-64984E1CDE20"></a><h4 id="ARPLS-GUID-F0B21736-CDE8-45CD-B250-64984E1CDE20" class="sect4"><span class="enumeration_section">169.9.11 </span>ROW_REPLICATION Procedure
                  </h4>
                  <div>
                     <p>Sets the row replication factor either as a fixed value or as a value per row.</p>
                     <div class="section">
                        <p>This procedure is overloaded. A <code class="codeph">Row Semantics</code> polymorphic table function will either produce a single output row for a given input row (one-to-one), or it can produce more output rows for a given input rows (one-to-many), or it can produce no output rows (one-to-none). 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F0B21736-CDE8-45CD-B250-64984E1CDE20__GUID-D766757E-6368-4892-9CCC-51F7C449752B">Syntax</p>
                        <p>Sets the row replication factor as a fixed value.</p><pre class="oac_no_warn" dir="ltr"> PROCEDURE ROW_REPLICATION(
   replication_factor IN NATURALN);
</pre><p>Sets the row replication factor as a value per row.</p><pre class="oac_no_warn" dir="ltr"> PROCEDURE ROW_REPLICATION(
   replication_factor IN TAB_NATURALN_T);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F0B21736-CDE8-45CD-B250-64984E1CDE20__GUID-EEF27459-1B98-4A98-843C-321B73B4C0B6">Parameters</p>
                        <div class="tblformal" id="GUID-F0B21736-CDE8-45CD-B250-64984E1CDE20__GUID-1FA0B636-EBA9-4FBA-9013-63D69E4E137B">
                           <p class="titleintable">Table 169-23 ROW_REPLICATION Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ROW_REPLICATION Procedure Parameters" summary="This table describes the parameters of DBMS_TF.ROW_REPLICATION subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d1047042e8239">Parameter</th>
                                    <th align="left" valign="bottom" width="64%" id="d1047042e8242">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d1047042e8247" headers="d1047042e8239 ">
                                       <p><code class="codeph">replication_factor</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d1047042e8247 d1047042e8242 ">
                                       <p>The replication factor per row</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F0B21736-CDE8-45CD-B250-64984E1CDE20__REPLICATEPTFDBMS_TF.ROW_REPLICATION-353BCFE5">
                        <p class="titleinexample">Example 169-16 Replicate Polymorphic Table Function Example</p>
                        <p>This example creates a PTF that replicates each input row by the replication_factor that is given as a parameter. </p>
                        <div class="infoboxnote" id="GUID-F0B21736-CDE8-45CD-B250-64984E1CDE20__GUID-4E4DC866-AB80-4C56-B62E-DAEADC551A87">
                           <p class="notep1">Live SQL:</p>
                           <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/arpls/ptf/ptfrepl.html" target="_blank">Replicate Polymorphic Table Function</a></p>
                        </div>
                        <p>Create the PTF implementation package replicate_p.</p><pre class="pre codeblock"><code>CREATE PACKAGE replicate_p
AS
    
    FUNCTION Describe(tab IN OUT DBMS_TF.TABLE_T,
                      replication_factor NATURAL)
        RETURN DBMS_TF.describe_t;
    
    PROCEDURE Fetch_Rows(replication_factor NATURALN);

END replicate_p;
</code></pre><p>Create the PTF implementation package body replicate_p.  The PTF replicates each input row by the replication_factor that is given as a parameter. </p><pre class="pre codeblock"><code>CREATE PACKAGE body replicate_p
AS
    
    FUNCTION Describe(tab IN OUT DBMS_TF.Table_t
                     , replication_factor NATURAL)
        RETURN DBMS_TF.describe_t AS
    BEGIN
        RETURN DBMS_TF.describe_t(row_replication =&gt; True);
    END;
    
    PROCEDURE Fetch_Rows(replication_factor NATURALN)
    AS
    BEGIN
        DBMS_TF.ROW_REPLICATION(replication_factor);
    END;
END replicate_p;
</code></pre><p>Create a standalone PTF named replicate. Specify exactly one formal argument of type TABLE, specify the return type of the PTF as TABLE, specify a Row Semantics PTF type, and indicate the PTF implementation package to use is replicate_p.</p><pre class="pre codeblock"><code>CREATE FUNCTION replicate(tab TABLE,
                          replication_factor NATURAL)
    RETURN TABLE PIPELINED ROW POLYMORPHIC USING replicate_p;
</code></pre><p>This example sets the replication_factor to 2 which results in doubling the number of rows.</p><pre class="pre codeblock"><code> SELECT *
 FROM replicate(dept, replication_factor =&gt; 2);
</code></pre><pre class="oac_no_warn" dir="ltr">   DEPTNO DNAME          LOC
---------- -------------- -------------
        10 ACCOUNTING     NEW YORK
        10 ACCOUNTING     NEW YORK
        20 RESEARCH       DALLAS
        20 RESEARCH       DALLAS
        30 SALES          CHICAGO
        30 SALES          CHICAGO
        40 OPERATIONS     BOSTON
        40 OPERATIONS     BOSTON
</pre><p>This example sets the replication_factor to zero.</p><pre class="pre codeblock"><code>SELECT *
FROM replicate(dept, replication_factor =&gt; 0);
</code></pre><pre class="oac_no_warn" dir="ltr">no rows selected
</pre><p>Count the number of employees in each department. Invoke the replicate PTF to report from the <code class="codeph">SCOTT</code>.<code class="codeph">EMP</code> table to set the replication_factor to 1000000.
                        </p><pre class="pre codeblock"><code>SELECT deptno, COUNT(*)
FROM replicate(scott.emp, 1e6)
GROUP BY deptno;
</code></pre><pre class="oac_no_warn" dir="ltr">    DEPTNO   COUNT(*)
---------- ----------
        30    6000000
        10    3000000
        20    5000000
</pre><p>This sets the replication_factor to 1000000000.</p><pre class="pre codeblock"><code>SELECT COUNT(*)
FROM replicate(dual, 1e9);
</code></pre><pre class="oac_no_warn" dir="ltr">  COUNT(*)
----------
1000000000
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962" name="GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962"></a><h4 id="ARPLS-GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962" class="sect4"><span class="enumeration_section">169.9.12 </span>ROW_TO_CHAR Function
                  </h4>
                  <div>
                     <p>The ROW_TO_CHAR function converts a row data value to a string representation.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962__GUID-01561E6F-721B-499B-B7B9-BE8A5EC5A72A">Syntax</p><pre class="oac_no_warn" dir="ltr">FUNCTION ROW_TO_CHAR(
   rowset ROW_SET_T, 
   rid    PLS_INTEGER,
   format PLS_INTEGER DEFAULT FORMAT_JSON) 
   RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962__GUID-A80DDC0E-CA64-4179-B01B-CF51185C5243">Parameters</p>
                        <div class="tblformal" id="GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962__GUID-1B08D62B-9548-4A5A-B81C-8C457BE16EA5">
                           <p class="titleintable">Table 169-24 DBMS_TF.ROW_TO_CHAR Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF.ROW_TO_CHAR Function Parameters" summary="This table describes the parameters of DBMS_TF.ROW_TO_CHAR subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1047042e8416">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1047042e8419">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1047042e8424" headers="d1047042e8416 ">
                                       <p><code class="codeph">rowset</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1047042e8424 d1047042e8419 ">
                                       <p>The rowset whose value is to be converted</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1047042e8432" headers="d1047042e8416 ">
                                       <p><code class="codeph">rid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1047042e8432 d1047042e8419 ">
                                       <p>Row number</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1047042e8440" headers="d1047042e8416 ">
                                       <p><code class="codeph">format</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1047042e8440 d1047042e8419 ">
                                       <p>The string format (default is FORMAT_JSON)</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962__GUID-A0A7F519-7BE1-479C-96C3-C1DFCFBB30E8">Usage Notes</p>
                        <p>Only the JSON format is supported.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962__GUID-769835E1-057A-4D26-8EA8-8E48D5B441AB">Return Values</p>
                        <p>The string representation in JSON format.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E757C3C4-CAAD-419B-8022-1037FA0A4962__DBMS_TF.ROW_TO_CHAREXAMPLE-353C8705">
                        <p class="titleinexample">Example 169-17 DBMS_TF.ROW_TO_CHAR Example</p><pre class="oac_no_warn" dir="ltr"> PROCEDURE Fetch_Rows as 
   rowset DBMS_TF.ROW_SET_T;
   str    VARCHAR2(32000);
 BEGIN
   DBMS_TF.GET_ROW_SET(rowset);
   str := DBMS_TF.ROW_TO_CHAR(rowset, 1)
 END;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-672696D3-4280-4A0B-B0BD-2DCD2F540B6E" name="GUID-672696D3-4280-4A0B-B0BD-2DCD2F540B6E"></a><h4 id="ARPLS-GUID-672696D3-4280-4A0B-B0BD-2DCD2F540B6E" class="sect4"><span class="enumeration_section">169.9.13 </span>SUPPORTED_TYPE Function
                  </h4>
                  <div>
                     <p>This function tests if a specified type is supported with polymorphic table functions.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-672696D3-4280-4A0B-B0BD-2DCD2F540B6E__GUID-BE976FCF-AACC-4AFD-8C9D-50AE7041041C">Syntax</p><pre class="oac_no_warn" dir="ltr">FUNCTION SUPPORTED_TYPE(
   type_id PLS_INTEGER) 
   RETURN BOOLEAN;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-672696D3-4280-4A0B-B0BD-2DCD2F540B6E__GUID-D4E4AC29-251A-4ED6-9B27-ACCEE00304FC">Parameters</p>
                        <div class="tblformal" id="GUID-672696D3-4280-4A0B-B0BD-2DCD2F540B6E__GUID-BF5B0A62-5C82-46AA-861D-C49BE1FBCDE5">
                           <p class="titleintable">Table 169-25 DBMS_TF.SUPPORTED_TYPE Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF.SUPPORTED_TYPE Function Parameters" summary="This table describes the parameters of DBMS_TF.SUPPORTED_TYPE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="32%" id="d1047042e8572">Parameter</th>
                                    <th align="left" valign="bottom" width="68%" id="d1047042e8575">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d1047042e8580" headers="d1047042e8572 ">
                                       <p><code class="codeph">type_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d1047042e8580 d1047042e8575 ">
                                       <p>The type</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-672696D3-4280-4A0B-B0BD-2DCD2F540B6E__GUID-769835E1-057A-4D26-8EA8-8E48D5B441AB">Return Values</p>
                        <p>Returns TRUE if the type_id is a scalar supported by <code class="codeph">PUT_COL</code> and <code class="codeph">GET_COL</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-672696D3-4280-4A0B-B0BD-2DCD2F540B6E__GUID-12278FF8-2A89-4A55-AC2C-52F0B34662AF">
                           <p class="notep1">See Also:</p><a href="DBMS_TF.html#GUID-0F66E239-DE77-4C0E-AC76-D5B632AB8072" title="The echo PTF takes in a table and a list of columns and produces new columns with same values.">Echo Polymorphic Table Function Example</a> for an example of DBMS_TF.SUPPORTED_TYPE use.
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-83C57DB9-C8D8-4F3B-8D47-F2B850C597FA" name="GUID-83C57DB9-C8D8-4F3B-8D47-F2B850C597FA"></a><h4 id="ARPLS-GUID-83C57DB9-C8D8-4F3B-8D47-F2B850C597FA" class="sect4"><span class="enumeration_section">169.9.14 </span>TRACE Procedure
                  </h4>
                  <div>
                     <p>Prints data structures to help development  and problem diagnosis.</p>
                     <div class="section">
                        <p>This procedure is overloaded.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-83C57DB9-C8D8-4F3B-8D47-F2B850C597FA__GUID-9735088D-008D-4030-AB2C-345D78DF1395">Syntax</p><pre class="oac_no_warn" dir="ltr">PROCEDURE TRACE(
   msg          VARCHAR2, 
   with_id      BOOLEAN   DEFAULT FALSE, 
   separator    VARCHAR2  DEFAULT NULL,
   prefix       VARCHAR2  DEFAULT NULL);

PROCEDURE TRACE(
   rowset       IN ROW_SET_T); 

PROCEDURE TRACE(
   env          IN ENV_T);

PROCEDURE TRACE(
   columns_new  IN COLUMNS_NEW_T);

PROCEDURE trace(
   cols         IN COLUMNS_T);

PROCEDURE trace(
   columns_with_type  IN COLUMNS_WITH_TYPE_T);

PROCEDURE trace(
   tab          IN TABLE_T); 

PROCEDURE trace(
   col          IN COLUMN_METADATA_T); 
  </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-83C57DB9-C8D8-4F3B-8D47-F2B850C597FA__GUID-EAE3E7D9-D186-4B53-AEA8-62FAF193C274">Parameters</p>
                        <div class="tblformal" id="GUID-83C57DB9-C8D8-4F3B-8D47-F2B850C597FA__GUID-CBA16061-AF79-4B11-94E4-5BA1D9D2BFF6">
                           <p class="titleintable">Table 169-26 TRACE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TRACE Procedure Parameters" summary="This table describes the parameters of DBMS_TF.TRACE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1047042e8720">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1047042e8723">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8728" headers="d1047042e8720 ">
                                       <p><code class="codeph">msg</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8728 d1047042e8723 ">
                                       <p>Custom user tracing message</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8736" headers="d1047042e8720 ">
                                       <p><code class="codeph">with_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8736 d1047042e8723 ">
                                       <p>Include the unique execution ID in the trace?</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8744" headers="d1047042e8720 ">
                                       <p><code class="codeph">separator</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8744 d1047042e8723 ">
                                       <p>Specify a string to use to separate values</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8752" headers="d1047042e8720 ">
                                       <p><code class="codeph">prefix</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8752 d1047042e8723 ">
                                       <p>Specify a string to prefix the actual values</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8760" headers="d1047042e8720 ">
                                       <p><code class="codeph">rowset</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8760 d1047042e8723 ">
                                       <p>Data for a rowset</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8768" headers="d1047042e8720 ">
                                       <p><code class="codeph">env</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8768 d1047042e8723 ">
                                       <p>Metadata about the polymorphic table function execution state</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8776" headers="d1047042e8720 ">
                                       <p><code class="codeph">columns_new</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8776 d1047042e8723 ">
                                       <p>Collection for new columns</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8784" headers="d1047042e8720 ">
                                       <p><code class="codeph">cols</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8784 d1047042e8723 ">
                                       <p>Collection containing column names</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8792" headers="d1047042e8720 ">
                                       <p><code class="codeph">columns_with_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8792 d1047042e8723 ">
                                       <p>Collection containing columns metadata</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8800" headers="d1047042e8720 ">
                                       <p><code class="codeph">tab</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8800 d1047042e8723 ">
                                       <p>Table descriptor</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e8808" headers="d1047042e8720 ">
                                       <p><code class="codeph">col</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e8808 d1047042e8723 ">
                                       <p>Metadata about an existing table column or a new column produced</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-83C57DB9-C8D8-4F3B-8D47-F2B850C597FA__DBMS_TF.TRACEEXAMPLE-353CD740">
                        <p class="titleinexample">Example 169-18 DBMS_TF.TRACE Example</p>
                        <p>This example adds tracing to a fetch_rows procedure.</p><pre class="pre codeblock"><code>PROCEDURE fetch_rows
AS
   rowset DBMS_TF.ROW_SET_T;
BEGIN
   DBMS_TF.TRACE('IDENTITY_PACKAGE.Fetch_Rows()', with_id =&gt; TRUE);
   DBMS_TF.TRACE(rowset);
   DBMS_TF.GET_ROW_SET(rowset);
   DBMS_TF.TRACE(rowset);
   DBMS_TF.PUT_ROW_SET(rowset);
   DBMS_TF.TRACE(DBMS_TF.GET_ENV);
END; 
</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-FCF3B135-55C5-404E-A8FE-44FF12BD1C9D" name="GUID-FCF3B135-55C5-404E-A8FE-44FF12BD1C9D"></a><h4 id="ARPLS-GUID-FCF3B135-55C5-404E-A8FE-44FF12BD1C9D" class="sect4"><span class="enumeration_section">169.9.15 </span>XSTORE_CLEAR Procedure
                  </h4>
                  <div>
                     <p>Removes all key-value pairs from the XSTORE execution state.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FCF3B135-55C5-404E-A8FE-44FF12BD1C9D__GUID-6CFADA1F-32E4-4710-BB90-82FE78BF5DCD">Syntax</p><pre class="oac_no_warn" dir="ltr">PROCEDURE XSTORE_CLEAR;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-FD6EC54A-3A92-4A22-B227-007AB795DC83" name="GUID-FD6EC54A-3A92-4A22-B227-007AB795DC83"></a><h4 id="ARPLS-GUID-FD6EC54A-3A92-4A22-B227-007AB795DC83" class="sect4"><span class="enumeration_section">169.9.16 </span>XSTORE_EXISTS Function
                  </h4>
                  <div>
                     <p>Returns TRUE if an item with a given key exists in the XSTORE.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FD6EC54A-3A92-4A22-B227-007AB795DC83__GUID-E8C7FC61-A914-4894-8443-0DBA138245CA">Syntax</p><pre class="oac_no_warn" dir="ltr">FUNCTION XSTORE_EXISTS(
   key      IN VARCHAR2, 
   key_type IN PLS_INTEGER DEFAULT NULL)
  RETURN BOOLEAN;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FD6EC54A-3A92-4A22-B227-007AB795DC83__GUID-BDF6D706-9B0C-45DA-B92B-51418D712969">Parameters</p>
                        <div class="tblformal" id="GUID-FD6EC54A-3A92-4A22-B227-007AB795DC83__GUID-6CF4FA16-4680-48D6-9AA5-7F8374B58A62">
                           <p class="titleintable">Table 169-27 DBMS_TF.XSTORE_EXISTS Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF.XSTORE_EXISTS Function Parameters" summary="This table describes the parameters of DBMS_TF.XSTORE_EXISTS subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1047042e9029">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1047042e9032">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1047042e9037" headers="d1047042e9029 ">
                                       <p><code class="codeph">key</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1047042e9037 d1047042e9032 ">
                                       <p>A unique character key</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1047042e9045" headers="d1047042e9029 ">
                                       <p><code class="codeph">key_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1047042e9045 d1047042e9032 ">
                                       <p>The type of key (optional). Default : NULL</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FD6EC54A-3A92-4A22-B227-007AB795DC83__GUID-DAA012F4-901A-4319-BF4D-266DC1AB26C0">Return Values</p>
                        <p>Returns TRUE if the key has an associated value. When the key_type is NULL (default), it returns TRUE if the key has an associated value of any of the supported type.</p>
                        <p>When a key_type parameter value is passed, it returns TRUE if the key and specified type of key has an associated value. Otherwise, it returns FALSE.</p>
                        <div class="infoboxnotealso" id="GUID-FD6EC54A-3A92-4A22-B227-007AB795DC83__GUID-23182DA6-49E0-465C-808E-AB3F1C6EBC71">
                           <p class="notep1">See Also:</p>
                           <p><a href="DBMS_TF.html#GUID-44B1E12B-F063-492E-A878-293327A5ACEB__GUID-425E9AF1-350A-46AC-B146-A5F179744BA4" title="This table describes predefined scalar supported types to use with the XSTORE subprograms.">Table 169-6</a> for more information about supported key types.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-76E2CEBC-D30B-4062-A4E5-1C708FA1A312" name="GUID-76E2CEBC-D30B-4062-A4E5-1C708FA1A312"></a><h4 id="ARPLS-GUID-76E2CEBC-D30B-4062-A4E5-1C708FA1A312" class="sect4"><span class="enumeration_section">169.9.17 </span>XSTORE_GET Procedure
                  </h4>
                  <div>
                     <p>You can use the XSTORE_GET procedure to get the associated value for a given key stored for  PTF Execution State Management.</p>
                     <div class="section">
                        <p>XStore is the PTF execution state management interface. The XStore interface is used to set and store key-value pairs during PTF execution.</p>
                        <p>This procedure is overloaded. The XStore supports specifying key-value pairs for these scalar types: <code class="codeph">VARCHAR2</code>, <code class="codeph">NUMBER</code>, <code class="codeph">DATE</code>, <code class="codeph">BOOLEAN</code>.
                        </p>
                        <p>See <a href="DBMS_TF.html#GUID-44B1E12B-F063-492E-A878-293327A5ACEB__GUID-425E9AF1-350A-46AC-B146-A5F179744BA4" title="This table describes predefined scalar supported types to use with the XSTORE subprograms.">Table 169-6</a> for more information about supported key types.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-76E2CEBC-D30B-4062-A4E5-1C708FA1A312__GUID-BAB1EC41-CB89-4EE7-9081-6EC1A2960D56">Syntax</p><pre class="oac_no_warn" dir="ltr">PROCEDURE XSTORE_GET(
   key   IN VARCHAR2, 
   value IN OUT VARCHAR2);

PROCEDURE XSTORE_GET(
   key   IN VARCHAR2, 
   value IN OUT NUMBER);

PROCEDURE XSTORE_GET(
   key   IN VARCHAR2, 
   value IN OUT DATE);

PROCEDURE XSTORE_GET(
   key   IN VARCHAR2, 
   value IN OUT BOOLEAN);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-76E2CEBC-D30B-4062-A4E5-1C708FA1A312__GUID-DF0C7C4E-900D-404E-909B-2E6A490FDFA3">Parameters</p>
                        <div class="tblformal" id="GUID-76E2CEBC-D30B-4062-A4E5-1C708FA1A312__DBMS_TF.XSTORE_GETPROCEDUREPARAMETE-1F83644B">
                           <p class="titleintable">Table 169-28 DBMS_TF.XSTORE_GET Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF.XSTORE_GET Procedure Parameters" summary="This table describes the parameters of DBMS_TF.XSTORE_GET subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="32%" id="d1047042e9201">Parameter</th>
                                    <th align="left" valign="bottom" width="68%" id="d1047042e9204">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d1047042e9209" headers="d1047042e9201 ">
                                       <p><code class="codeph">key</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d1047042e9209 d1047042e9204 ">
                                       <p>A unique character key</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d1047042e9217" headers="d1047042e9201 ">
                                       <p><code class="codeph">value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d1047042e9217 d1047042e9204 ">
                                       <p>Value corresponding to the key for supported types</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-76E2CEBC-D30B-4062-A4E5-1C708FA1A312__GUID-B91C3A89-1CC9-49E1-88A7-D37DB928FF3B">Usage Notes</p>
                        <p>If the key is not found, the value is unchanged.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-C318D8C8-E80C-4671-B515-F3B22E073547" name="GUID-C318D8C8-E80C-4671-B515-F3B22E073547"></a><h5 id="ARPLS-GUID-C318D8C8-E80C-4671-B515-F3B22E073547" class="sect5"><span class="enumeration_section">169.9.17.1 </span>Row_num Polymorphic Table Function Example
                     </h5>
                     <div>
                        <p>The row_num PTF example appends a sequence column to a table.</p>
                        <div class="example" id="GUID-C318D8C8-E80C-4671-B515-F3B22E073547__GUID-3CD571B6-8AE5-4F59-8C2C-0C431F447533">
                           <p class="titleinexample">Example 169-19 Row_num Polymorphic Table Function Example</p>
                           <div class="infoboxnote" id="GUID-C318D8C8-E80C-4671-B515-F3B22E073547__GUID-CC06D16D-2292-4980-B61C-2EA4C869F8FD">
                              <p class="notep1">Live SQL:</p>
                              <p>You can view and run this example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/arpls/ptf/ptfrwnmx.html" target="_blank">Row_num Polymorphic Table Function</a></p>
                           </div>
                           <p>Create the PTF implementation package row_num_p.</p>
                           <div class="p">The parameters are :
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>tab - The input table</p>
                                 </li>
                                 <li>
                                    <p>ini - The initial value       (Default = 1)</p>
                                 </li>
                                 <li>
                                    <p>inc - The amount to increment (Default = 1)</p>
                                 </li>
                              </ul>
                           </div><pre class="pre codeblock"><code>CREATE PACKAGE row_num_p IS
  FUNCTION describe(tab IN OUT dbms_tf.table_t, 
                    ini NUMBER DEFAULT 1, 
                    inc NUMBER DEFAULT 1) 
           RETURN dbms_tf.describe_t;

  PROCEDURE fetch_rows(ini NUMBER DEFAULT 1, inc NUMBER DEFAULT 1);
END;</code></pre><p>This PTF accepts any input table and appends the sequence column <code class="codeph">ROW_ID</code>  to the table. The sequence values start with the specified value (ini) and  each time it is incremented by the specified value (inc).
                           </p><pre class="pre codeblock"><code>CREATE PACKAGE BODY row_num_p IS
  FUNCTION describe(tab IN OUT dbms_tf.table_t, 
                    ini NUMBER DEFAULT 1, 
                    inc NUMBER DEFAULT 1) 
           RETURN dbms_tf.describe_t AS
  BEGIN
    RETURN dbms_tf.describe_t(new_columns =&gt;
             dbms_tf.columns_new_t(1 =&gt;
               dbms_tf.column_metadata_t(name =&gt; 'ROW_ID', 
                                         TYPE =&gt; dbms_tf.type_number)));
  END;

  PROCEDURE fetch_rows(ini NUMBER DEFAULT 1, inc NUMBER DEFAULT 1) IS
    row_cnt CONSTANT PLS_INTEGER := dbms_tf.get_env().row_count;
    rid     NUMBER               := ini;
    col     dbms_tf.tab_number_t;
  BEGIN
    dbms_tf.xstore_get('rid', rid);
    FOR i IN 1 .. row_cnt LOOP col(i) := rid + inc*(i-1); END LOOP;
    dbms_tf.put_col(1, col);
    dbms_tf.xstore_set('rid', rid + inc*row_cnt);
  END;

 END;</code></pre><p>Create a standalone polymorphic table function named row_num. Specify exactly one formal argument of type <code class="codeph">TABLE</code>, specify the return type of the PTF as <code class="codeph">TABLE</code>, specify a Table Semantics PTF type, and indicate the PTF implementation package to use is row_num_p.
                           </p><pre class="pre codeblock"><code>CREATE FUNCTION row_num(tab TABLE,
                        ini NUMBER DEFAULT 1, 
                        inc NUMBER DEFAULT 1) 
                        RETURN TABLE
PIPELINED TABLE POLYMORPHIC USING row_num_p;</code></pre><p>The row_num PTF invocation reporting from the <code class="codeph">SCOTT</code>.<code class="codeph">DEPT</code> table produces a new column <code class="codeph">ROW_ID</code> with value starting at 1 and incremented by 1 in the row set.
                           </p><pre class="pre codeblock"><code>SELECT * FROM row_num(scott.dept);</code></pre><pre class="oac_no_warn" dir="ltr">DEPTNO DNAME          LOC               ROW_ID
------ -------------- ------------- ----------
    10 ACCOUNTING     NEW YORK               1
    20 RESEARCH       DALLAS                 2
    30 SALES          CHICAGO                3
    40 OPERATIONS     BOSTON                 4
</pre><p>The row_num PTF invocation reporting from the <code class="codeph">SCOTT</code>.<code class="codeph">DEPT</code> table produces a new column <code class="codeph">ROW_ID</code> with value starting at 100 and incremented by 1 in the row set.
                           </p><pre class="pre codeblock"><code>SELECT * FROM row_num(scott.dept, 100);</code></pre><pre class="oac_no_warn" dir="ltr">DEPTNO DNAME          LOC               ROW_ID
------ -------------- ------------- ----------
    10 ACCOUNTING     NEW YORK             100
    20 RESEARCH       DALLAS               101
    30 SALES          CHICAGO              102
    40 OPERATIONS     BOSTON               103
</pre><p>The row_num PTF invocation reporting from the <code class="codeph">SCOTT</code>.<code class="codeph">DEPT</code> table produces a new column <code class="codeph">ROW_ID</code> with value starting at 0 and decremented by 1 in the row set.
                           </p><pre class="pre codeblock"><code>SELECT * FROM row_num(scott.dept, ini =&gt; 0, inc =&gt; -1);</code></pre><pre class="oac_no_warn" dir="ltr">DEPTNO DNAME          LOC               ROW_ID
------ -------------- ------------- ----------
    10 ACCOUNTING     NEW YORK               0
    20 RESEARCH       DALLAS                -1
    30 SALES          CHICAGO               -2
    40 OPERATIONS     BOSTON                -3
</pre><p>The row_num PTF invocation reporting from the <code class="codeph">SCOTT</code>.<code class="codeph">EMP</code> table produces a new column <code class="codeph">ROW_ID</code> with value starting at 0 and incremented by 0.25 in the row set which is partitioned by department number and ordered by employee name.
                           </p><pre class="pre codeblock"><code>SELECT deptno, ename, job, sal, row_id
  FROM   row_num(scott.emp PARTITION BY deptno ORDER BY ename, ini =&gt; 0, inc =&gt; 0.25)
WHERE  deptno IN (10, 30);
</code></pre><pre class="oac_no_warn" dir="ltr">DEPTNO ENAME      JOB              SAL     ROW_ID
------ ---------- --------- ---------- ----------
    10 CLARK      MANAGER         2450          0
    10 KING       PRESIDENT       5000        .25
    10 MILLER     CLERK           1300         .5
    30 ALLEN      SALESMAN        1600          0
    30 BLAKE      MANAGER         2850        .25
    30 JAMES      CLERK            950         .5
    30 MARTIN     SALESMAN        1250        .75
    30 TURNER     SALESMAN        1500          1
    30 WARD       SALESMAN        1250       1.25
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BBDCEB07-0A20-4BF3-AF3D-3698B1A2ED9C" name="GUID-BBDCEB07-0A20-4BF3-AF3D-3698B1A2ED9C"></a><h4 id="ARPLS-GUID-BBDCEB07-0A20-4BF3-AF3D-3698B1A2ED9C" class="sect4"><span class="enumeration_section">169.9.18 </span>XSTORE_REMOVE Procedure
                  </h4>
                  <div>
                     <p>Removes an item associated with the given key and key_type. </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BBDCEB07-0A20-4BF3-AF3D-3698B1A2ED9C__GUID-3B75B48E-34F3-4996-8900-CAC415ECA140">Syntax</p><pre class="oac_no_warn" dir="ltr">PROCEDURE XSTORE_REMOVE(
   key      IN VARCHAR2, 
   key_type IN PLS_INTEGER DEFAULT NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BBDCEB07-0A20-4BF3-AF3D-3698B1A2ED9C__GUID-0641171C-C8D4-43A7-A2D5-BC67D288F321">Parameters</p>
                        <div class="tblformal" id="GUID-BBDCEB07-0A20-4BF3-AF3D-3698B1A2ED9C__GUID-64AF0644-5FE0-491F-BA91-BB30435E8E5D">
                           <p class="titleintable">Table 169-29 DBMS_TF.XSTORE_REMOVE Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF.XSTORE_REMOVE Function Parameters" summary="This table describes the parameters of DBMS_TF.XSTORE_REMOVE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="32%" id="d1047042e9529">Parameter</th>
                                    <th align="left" valign="bottom" width="68%" id="d1047042e9532">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d1047042e9537" headers="d1047042e9529 ">
                                       <p><code class="codeph">key</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d1047042e9537 d1047042e9532 ">
                                       <p>A unique character key</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d1047042e9545" headers="d1047042e9529 ">
                                       <p><code class="codeph">key_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d1047042e9545 d1047042e9532 ">
                                       <p>The type of key to remove (optional)</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BBDCEB07-0A20-4BF3-AF3D-3698B1A2ED9C__GUID-1FE13B8C-3785-4D86-8CFD-6D7A1FA3D2B2">Usage Notes</p>
                        <p>When a key_type parameter value is passed, it removes the  associated item for the key and specified type of key.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-C8E6D8B4-CD03-4948-90A5-26A22694896C" name="GUID-C8E6D8B4-CD03-4948-90A5-26A22694896C"></a><h4 id="ARPLS-GUID-C8E6D8B4-CD03-4948-90A5-26A22694896C" class="sect4"><span class="enumeration_section">169.9.19 </span>XSTORE_SET Procedure
                  </h4>
                  <div>
                     <p>Sets the value for the given key for PTF Execution State Management.</p>
                     <div class="section">
                        <p>You can use this procedure to store and item key-value pair in the XStore. This procedure is overloaded. The XStore supports specifying key-value pairs for these scalar types: VARCHAR2, NUMBER, DATE, BOOLEAN.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C8E6D8B4-CD03-4948-90A5-26A22694896C__GUID-A6882DB9-A0A1-415B-A439-1FC60F920D50">Syntax</p><pre class="oac_no_warn" dir="ltr">PROCEDURE XSTORE_SET (
   key   IN VARCHAR2, 
   value IN VARCHAR2);

PROCEDURE XSTORE_SET (
   key   IN VARCHAR2, 
   value IN NUMBER);

PROCEDURE XSTORE_SET (
   key   IN VARCHAR2, 
   value IN DATE);

PROCEDURE XSTORE_SET (
   key   IN VARCHAR2, 
   value IN BOOLEAN);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C8E6D8B4-CD03-4948-90A5-26A22694896C__GUID-3E31F6D2-BAB6-4209-8A3D-F1C1CDC9A94B">Parameters</p>
                        <div class="tblformal" id="GUID-C8E6D8B4-CD03-4948-90A5-26A22694896C__GUID-3140046D-BC6B-45FC-915E-0DDB67297D78">
                           <p class="titleintable">Table 169-30 DBMS_TF.XSTORE_SET Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_TF.XSTORE_SET Procedure Parameters" summary="This table describes the parameters of DBMS_TF.XSTORE_SET subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1047042e9670">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1047042e9673">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e9678" headers="d1047042e9670 ">
                                       <p><code class="codeph">key</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e9678 d1047042e9673 ">
                                       <p>A unique character key</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1047042e9686" headers="d1047042e9670 ">
                                       <p><code class="codeph">value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1047042e9686 d1047042e9673 ">
                                       <p>Value corresponding to the key for supported types</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C8E6D8B4-CD03-4948-90A5-26A22694896C__GUID-B2D38688-DB77-4188-A114-C7684E84267E">Usage Notes</p>
                        <p>If an item for a given key already exists, the value is replaced.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
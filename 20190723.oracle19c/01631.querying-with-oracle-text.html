<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Become familiar with Oracle Text querying and associated features.">
      <meta name="description" content="Become familiar with Oracle Text querying and associated features.">
      <title>Querying with Oracle Text</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Application Developer's Guide ">
      <meta property="og:description" content="Become familiar with Oracle Text querying and associated features.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Application Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96275-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="maintaining-oracle-text-indexes.html" title="Previous" type="text/html">
      <link rel="next" href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer's Guide">
    <meta name="dcterms.isVersionOf" content="CCAPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="maintaining-oracle-text-indexes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Application Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Querying with Oracle Text</li>
            </ol>
            <a id="GUID-7310390A-4E76-45D3-99E8-070692043E6B" name="GUID-7310390A-4E76-45D3-99E8-070692043E6B"></a><a id="CCAPP0400"></a>
            
            <h2 id="CCAPP-GUID-7310390A-4E76-45D3-99E8-070692043E6B" class="sect2"><span class="enumeration_chapter">6 </span> Querying with Oracle Text
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Become familiar with Oracle Text querying and associated features.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="querying-with-oracle-text.html#GUID-3EAE4D7D-C73B-4E19-BBF2-5EBE05C21D9C">Overview of Queries</a></p>
                  </li>
                  <li>
                     <p><a href="querying-with-oracle-text.html#GUID-D0633C95-0A90-47B8-8A7B-B134C0226B93" title="Oracle Text has various query features. You can use these query features in your query application.">Oracle Text Query Features</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9135"></a><div class="props_rev_3"><a id="GUID-3EAE4D7D-C73B-4E19-BBF2-5EBE05C21D9C" name="GUID-3EAE4D7D-C73B-4E19-BBF2-5EBE05C21D9C"></a><h3 id="CCAPP-GUID-3EAE4D7D-C73B-4E19-BBF2-5EBE05C21D9C" class="sect3"><span class="enumeration_section">6.1 </span>Overview of Queries
               </h3>
               <div>
                  <p>The basic Oracle Text query takes a query expression, usually a word with or without operators, as input. Oracle Text returns all documents (previously indexed) that satisfy the expression along with a relevance score for each document. You can use the scores to order the documents in the result set.</p>
                  <p>To enter an Oracle Text query, use the SQL <code class="codeph">SELECT</code> statement. Depending on the type of index, you use either the <code class="codeph">CONTAINS</code> or <code class="codeph">CATSEARCH</code> operator in the <code class="codeph">WHERE</code> clause. You can use these operators programatically wherever you can use the <code class="codeph">SELECT</code> statement, such as in PL/SQL cursors.
                  </p>
                  <p>Use the <code class="codeph">MATCHES</code> operator to classify documents with a <code class="codeph">CTXRULE</code> index.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-13F9B749-125B-40FD-9AFD-A636597447D0">Querying with CONTAINS</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-9A182607-C033-4B4A-8177-5E5C0DE2D520">Querying with CATSEARCH</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053">Querying with MATCHES</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-F0106274-B719-4F65-BB62-65D52E6BDFA2">Word and Phrase Queries</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-D8D4E361-E226-40AF-A539-F3C991D90CC4">Querying Stopwords</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F">ABOUT Queries and Themes</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9136"></a><div class="props_rev_3"><a id="GUID-13F9B749-125B-40FD-9AFD-A636597447D0" name="GUID-13F9B749-125B-40FD-9AFD-A636597447D0"></a><h4 id="CCAPP-GUID-13F9B749-125B-40FD-9AFD-A636597447D0" class="sect4"><span class="enumeration_section">6.1.1 </span>Querying with CONTAINS
                  </h4>
                  <div>
                     <p>When you create an index of type <code class="codeph">CONTEXT</code>, you must use the <code class="codeph">CONTAINS</code> operator to enter your query. This index is suitable for indexing collections of large coherent documents. 
                     </p>
                     <p>With the <code class="codeph">CONTAINS</code> operator, you can use a number of operators to define your search criteria. These operators enable you to enter logical, proximity, fuzzy, stemming, thesaurus, and wildcard searches. With a correctly configured index, you can also enter section searches on documents that have internal structure such as HTML and XML.
                     </p>
                     <p>With <code class="codeph">CONTAINS,</code> you can also use the <code class="codeph">ABOUT</code> operator to search on document themes.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-5BE34ED3-4B35-412A-BD53-E3F663B9EB8C">CONTAINS SQL Example</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-9B0E2AF2-9E20-41D2-86AB-D97B0639F16E">CONTAINS PL/SQL Example</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF">Structured Query with CONTAINS</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9137"></a><div class="props_rev_3"><a id="GUID-5BE34ED3-4B35-412A-BD53-E3F663B9EB8C" name="GUID-5BE34ED3-4B35-412A-BD53-E3F663B9EB8C"></a><h5 id="CCAPP-GUID-5BE34ED3-4B35-412A-BD53-E3F663B9EB8C" class="sect5"><span class="enumeration_section">6.1.1.1 </span>CONTAINS SQL Example
                     </h5>
                     <div>
                        <p>In the <code class="codeph">SELECT</code> statement, specify the query in the <code class="codeph">WHERE</code> clause with the <code class="codeph">CONTAINS</code> operator. Also specify the <code class="codeph">SCORE</code> operator to return the score of each hit in the hitlist. The following example shows how to enter a query:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), title from news WHERE CONTAINS(text, 'oracle', 1) &gt; 0;
</pre><p>You can order the results from the highest scoring documents to the lowest scoring documents by using the <code class="codeph">ORDER</code> <code class="codeph">BY</code> clause as follows:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), title from news 
           WHERE CONTAINS(text, 'oracle', 1) &gt; 0
           ORDER BY SCORE(1) DESC;
</pre><p>The <code class="codeph">CONTAINS</code> operator must always be followed by the &gt; 0 syntax, which specifies that the score value returned by the <code class="codeph">CONTAINS</code> operator must be greater than zero for the row to be returned.
                        </p>
                        <p>When the <code class="codeph">SCORE</code> operator is called in the <code class="codeph">SELECT</code> statement, the <code class="codeph">CONTAINS</code> operator must reference the score label value in the third parameter, as shown in the previous example. 
                        </p>
                     </div>
                  </div><a id="CCAPP9138"></a><div class="props_rev_3"><a id="GUID-9B0E2AF2-9E20-41D2-86AB-D97B0639F16E" name="GUID-9B0E2AF2-9E20-41D2-86AB-D97B0639F16E"></a><h5 id="CCAPP-GUID-9B0E2AF2-9E20-41D2-86AB-D97B0639F16E" class="sect5"><span class="enumeration_section">6.1.1.2 </span>CONTAINS PL/SQL Example
                     </h5>
                     <div>
                        <p>In a PL/SQL application, you can use a cursor to fetch the results of the query. </p>
                        <p>The following example enters a <code class="codeph">CONTAINS</code> query against the <code class="codeph">NEWS</code> table to find all articles that contain the word <span class="italic">oracle.</span> The titles and scores of the first ten hits are output.
                        </p><pre class="oac_no_warn" dir="ltr">declare 
  rowno number := 0; 
begin 
  for c1 in (SELECT SCORE(1) score, title FROM news 
              WHERE CONTAINS(text, 'oracle', 1) &gt; 0
              ORDER BY SCORE(1) DESC) 
  loop 
    rowno := rowno + 1; 
    dbms_output.put_line(c1.title||': '||c1.score); 
    exit when rowno = 10; 
  end loop; 
end; 
</pre><p>This example uses a cursor <code class="codeph">FOR</code> loop to retrieve the first ten hits. An alias <span class="italic">score</span> is declared for the return value of the <code class="codeph">SCORE</code> operator. The score and title are shown as output by using the cursor dot notation. 
                        </p>
                     </div>
                  </div><a id="CCAPP9139"></a><div class="props_rev_3"><a id="GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF" name="GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF"></a><h5 id="CCAPP-GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF" class="sect5"><span class="enumeration_section">6.1.1.3 </span>Structured Query with CONTAINS Example
                     </h5>
                     <div>
                        <p>A structured query, also called a mixed query, is a query that has one <code class="codeph">CONTAINS</code> predicate to query a text column and another predicate to query a structured data column. 
                        </p>
                        <p>To enter a structured query, specify the structured clause in the <code class="codeph">WHERE</code> condition of the <code class="codeph">SELECT</code> statement. 
                        </p>
                        <p>For example, the following <code class="codeph">SELECT</code> statement returns all articles that contain the word <span class="italic">oracle</span> written on or after October 1, 1997:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), title, issue_date from news 
           WHERE CONTAINS(text, 'oracle', 1) &gt; 0
           AND issue_date &gt;= ('01-OCT-97') 
           ORDER BY SCORE(1) DESC;</pre><div class="infoboxnote" id="GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF__GUID-8CF4D5B5-D07E-4C3C-8ECC-B9A984D16644">
                           <p class="notep1">Note:</p>
                           <p>Although you can enter structured queries with <code class="codeph">CONTAINS,</code> consider creating a <code class="codeph">CTXCAT</code> index and issuing the query with <code class="codeph">CATSEARCH,</code> which offers better structured query performance.
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="CCAPP9140"></a><div class="props_rev_3"><a id="GUID-9A182607-C033-4B4A-8177-5E5C0DE2D520" name="GUID-9A182607-C033-4B4A-8177-5E5C0DE2D520"></a><h4 id="CCAPP-GUID-9A182607-C033-4B4A-8177-5E5C0DE2D520" class="sect4"><span class="enumeration_section">6.1.2 </span>Querying with CATSEARCH
                  </h4>
                  <div>
                     <p>When you create an index of type <code class="codeph">CTXCAT</code>, you must use the <code class="codeph">CATSEARCH</code> operator to enter your query. This index is suitable when your application stores short text fragments in the text column and associated information in related columns. 
                     </p>
                     <p>For example, an application serving an online auction site includes a table that stores item descriptions in a text column and date and price information in other columns. With a <code class="codeph">CTXCAT</code> index, you can create b-tree indexes on one or more columns, so that query performance is generally faster for mixed queries. 
                     </p>
                     <p>The operators available for <code class="codeph">CATSEARCH</code> queries are limited to logical operations such as <code class="codeph">AND</code> or <code class="codeph">OR.</code> To define your structured criteria, use the following operators : greater than, less than, equality, <code class="codeph">BETWEEN,</code> and <code class="codeph">IN.</code></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA">CATSEARCH SQL Query</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-C9691A05-609A-47BC-99D4-7238E1304D61">CATSEARCH Example</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9141"></a><div class="props_rev_3"><a id="GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA" name="GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA"></a><h5 id="CCAPP-GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA" class="sect5"><span class="enumeration_section">6.1.2.1 </span>CATSEARCH SQL Query Example
                     </h5>
                     <div>
                        <p>A typical query with <code class="codeph">CATSEARCH</code> includes the following structured clause to find all rows that contain the word <span class="italic">camera</span> ordered by the <code class="codeph">bid_close</code> date:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT FROM auction WHERE CATSEARCH(title, 'camera', 'order by bid_close desc')&gt; 0;
</pre><p>The type of structured query tht you can enter depends on how you create your sub-indexes.</p>
                        <div class="infoboxnotealso" id="GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA__GUID-E46E5210-C8BB-4997-8930-D6A79C5DE474">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="creating-oracle-text-indexes.html#GUID-210F00C9-8866-466F-909F-71C672CF469B">Creating a CTXCAT Index</a>"</span></p>
                        </div>
                        <p>As shown in the previous example, you specify the structured part of a <code class="codeph">CATSEARCH</code> query with the third <code class="codeph">structured_query</code> parameter. The columns in the structured expression must have a corresponding subindex.
                        </p>
                        <p>For example, assuming that <code class="codeph">category_id</code> and <code class="codeph">bid_close</code> have a subindex in the <code class="codeph">ctxcat</code> index for the <code class="codeph">AUCTION</code> table, enter the following structured query:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT FROM auction WHERE CATSEARCH(title, 'camera', 'category_id=99 order by bid_close desc')&gt; 0;</pre></div>
                  </div><a id="CCAPP9142"></a><div class="props_rev_3"><a id="GUID-C9691A05-609A-47BC-99D4-7238E1304D61" name="GUID-C9691A05-609A-47BC-99D4-7238E1304D61"></a><h5 id="CCAPP-GUID-C9691A05-609A-47BC-99D4-7238E1304D61" class="sect5"><span class="enumeration_section">6.1.2.2 </span>CATSEARCH Example
                     </h5>
                     <div>
                        <p>The following example shows a field section search against a <code class="codeph">CTXCAT</code> index. It uses <code class="codeph">CONTEXT</code> grammar by means of a query template in a <code class="codeph">CATSEARCH</code> query.
                        </p><pre class="oac_no_warn" dir="ltr">-- Create and populate table
create table BOOKS (ID number, INFO varchar2(200), PUBDATE DATE);
 
insert into BOOKS values(1, '&lt;author&gt;NOAM CHOMSKY&lt;/author&gt;&lt;subject&gt;CIVIL
   RIGHTS&lt;/subject&gt;&lt;language&gt;ENGLISH&lt;/language&gt;&lt;publisher&gt;MIT
   PRESS&lt;/publisher&gt;', '01-NOV-2003');
 
insert into BOOKS values(2, '&lt;author&gt;NICANOR PARRA&lt;/author&gt;&lt;subject&gt;POEMS 
  AND ANTIPOEMS&lt;/subject&gt;&lt;language&gt;SPANISH&lt;/language&gt;
  &lt;publisher&gt;VASQUEZ&lt;/publisher&gt;', '01-JAN-2001');
 
insert into BOOKS values(1, '&lt;author&gt;LUC SANTE&lt;/author&gt;&lt;subject&gt;XML
  DATABASE&lt;/subject&gt;&lt;language&gt;FRENCH&lt;/language&gt;&lt;publisher&gt;FREE
  PRESS&lt;/publisher&gt;', '15-MAY-2002');
 
commit;
 </pre><pre class="oac_no_warn" dir="ltr">-- Create index set and section group
exec ctx_ddl.create_index_set('BOOK_INDEX_SET');
exec ctx_ddl.add_index('BOOK_INDEX_SET','PUBDATE');
 
exec ctx_ddl.create_section_group('BOOK_SECTION_GROUP',
      'BASIC_SECTION_GROUP');
exec ctx_ddl.add_field_section('BOOK_SECTION_GROUP','AUTHOR','AUTHOR');
exec ctx_ddl.add_field_section('BOOK_SECTION_GROUP','SUBJECT','SUBJECT');
exec ctx_ddl.add_field_section('BOOK_SECTION_GROUP','LANGUAGE','LANGUAGE');
exec ctx_ddl.add_field_section('BOOK_SECTION_GROUP','PUBLISHER','PUBLISHER'); 
 
-- Create index
create index books_index on books(info) indextype is ctxsys.ctxcat
  parameters('index set book_index_set section group book_section_group');
 
-- Use the index
-- Note that: even though CTXCAT index can be created with field sections, it
-- cannot be accessed using CTXCAT grammar (default for CATSEARCH).
-- We need to use query template with CONTEXT grammar to access field 
-- sections with CATSEARCH
 
select  id, info from books
where catsearch(info,
'&lt;query&gt;
      &lt;textquery grammar="context"&gt;
              NOAM within author and english within language
      &lt;/textquery&gt;
 &lt;/query&gt;',
'order by pubdate')&gt;0; </pre></div>
                  </div>
               </div><a id="CCAPP9143"></a><div class="props_rev_3"><a id="GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053" name="GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053"></a><h4 id="CCAPP-GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053" class="sect4"><span class="enumeration_section">6.1.3 </span>Querying with MATCHES
                  </h4>
                  <div>
                     <p>When you create an index of type <code class="codeph">CTXRULE,</code> you must use the <code class="codeph">MATCHES</code> operator to classify your documents. The <code class="codeph">CTXRULE</code> index is essentially an index on the set of queries that define your classifications.
                     </p>
                     <p>For example, if you have an incoming stream of documents that need to be routed according to content, you can create a set of queries that define your categories. You create the queries as rows in a text column. You can create this type of table with the <code class="codeph">CTX_CLS.TRAIN</code> procedure. 
                     </p>
                     <p>You then index the table to create a <code class="codeph">CTXRULE</code> index. When documents arrive, you use the <code class="codeph">MATCHES</code> operator to classify each document
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-13DDFE35-13E6-4885-B175-EA4A7207A540">MATCHES SQL Query</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD">MATCHES PL/SQL Example</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053__GUID-90CD6D95-2FE1-486E-B075-C8943807A8BF">
                        <p class="notep1">See Also:</p>
                        <p><a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text offers various approaches to document classification."> Classifying Documents in Oracle Text</a></p>
                     </div>
                  </div><a id="CCAPP9144"></a><div class="props_rev_3"><a id="GUID-13DDFE35-13E6-4885-B175-EA4A7207A540" name="GUID-13DDFE35-13E6-4885-B175-EA4A7207A540"></a><h5 id="CCAPP-GUID-13DDFE35-13E6-4885-B175-EA4A7207A540" class="sect5"><span class="enumeration_section">6.1.3.1 </span>MATCHES SQL Query
                     </h5>
                     <div>
                        <p>A <code class="codeph">MATCHES</code> query finds all rows in a query table that match a given document. Assuming that a <code class="codeph">querytable</code> table is associated with a <code class="codeph">CTXRULE</code> index, enter the following query:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT classification FROM querytable WHERE MATCHES(query_string,:doc_text) &gt; 0;
</pre><p>The <code class="codeph">:doc_text</code> bind variable contains the <code class="codeph">CLOB</code> document to be classified.
                        </p>
                        <p>Here is a simple example: </p><pre class="oac_no_warn" dir="ltr">   create table queries (
      query_id      number,
      query_string  varchar2(80)
    );

    insert into queries values (1, 'oracle');
    insert into queries values (2, 'larry or ellison');
    insert into queries values (3, 'oracle and text');
    insert into queries values (4, 'market share');

    create index queryx on queries(query_string)
      indextype is ctxsys.ctxrule;

    select query_id from queries
     where matches(query_string, 
                   'Oracle announced that its market share in databases 
                    increased over the last year.')&gt;0
</pre><p>This query returns queries 1 (the word <span class="italic">oracle</span> appears in the document) and 4 (the phrase <span class="italic">market share </span>appears in the document), but not 2 (neither the word <span class="italic">larry</span> nor the word <span class="italic">ellison</span> appears, and not 3 (there is no text in the document, so it does not match the query). 
                        </p>
                        <p>In this example, the document was passed in as a string for simplicity. Your document is typically passed in a bind variable.</p>
                        <p>The document text used in a <code class="codeph">MATCHES</code> query can be <code class="codeph">VARCHAR2</code> or <code class="codeph">CLOB.</code> It does not accept <code class="codeph">BLOB</code> input, so you cannot match filtered documents directly. Instead, you must filter the binary content to <code class="codeph">CLOB</code> by using <code class="codeph">AUTO_FILTER.</code> The following example makes two assumptions:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The document data is in the <code class="codeph">:doc_blob</code> bind variable.
                              </p>
                           </li>
                           <li>
                              <p>You have already defined <code class="codeph">my_policy</code> that <code class="codeph">CTX_DOC.POLICY_FILTER</code> can use.
                              </p>
                           </li>
                        </ul>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">  declare
    doc_text clob;
  begin
    -- create a temporary CLOB to hold the document text
    doc_text := dbms_lob.createtemporary(doc_text, TRUE, DBMS_LOB.SESSION);
 
    -- create a simple policy for this example
    ctx_ddl.create_preference(preference_name =&gt; 'fast_filter',
                        object_name       =&gt; 'AUTO_FILTER');
    ctx_ddl.set_attribute(preference_name =&gt; 'fast_filter',
                        attribute_name    =&gt; 'OUTPUT_FORMATTING',
                        attribute_value   =&gt; 'FALSE');
    ctx_ddl.create_policy(policy_name     =&gt; 'my_policy',
                        filter            =&gt; 'fast_filter);

    -- call ctx_doc.policy_filter to filter the BLOB to CLOB data
    ctx_doc.policy_filter('my_policy', :doc_blob, doc_text, FALSE);

    -- now do the matches query using the CLOB version
    for c1 in (select * from queries where matches(query_string, doc_text)&gt;0)
    loop
      -- do what you need to do here
    end loop;

    dbms_lob.freetemporary(doc_text);
  end;
</pre><p>The <code class="codeph">CTX_DOC.POLICY_FILTER</code> procedure filters the <code class="codeph">BLOB</code> into the <code class="codeph">CLOB</code> data, because you must get the text into a <code class="codeph">CLOB</code> to enter a <code class="codeph">MATCHES</code> query. It takes, as one argument, the name of a policy that you already created with <code class="codeph">CTX_DDL.CREATE_POLICY</code>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-13DDFE35-13E6-4885-B175-EA4A7207A540__GUID-3B600221-BF1E-41C2-A377-511F70DB2097">
                           <p class="notep1">See Also:</p>
                           <p><a href="../ccref/CTX_DOC-package.html#CCREF0700" target="_blank"><span class="italic">Oracle Text Reference</span></a> for information on <code class="codeph">CTX_DOC.POLICY_FILTER</code></p>
                        </div>
                        <p>If your file is text in the database character set, then you can create a <code class="codeph">BFILE</code> and load it to a <code class="codeph">CLOB</code> by using the <code class="codeph">DBMS_LOB.LOADFROMFILE</code> function, or you can use <code class="codeph">UTL_FILE</code> to read the file into a temp <code class="codeph">CLOB</code> locator. 
                        </p>
                        <p>If your file needs <code class="codeph">AUTO_FILTER</code> filtering, then you can load the file into a <code class="codeph">BLOB</code> instead and call <code class="codeph">CTX_DOC.POLICY_FILTER</code>, as previously shown. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-13DDFE35-13E6-4885-B175-EA4A7207A540__GUID-E323501E-3264-4C39-AEF5-B0D8A64A1DB2">
                           <p class="notep1">See Also:</p>
                           <p><a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text offers various approaches to document classification."> Classifying Documents in Oracle Text</a> for more extended classification examples
                           </p>
                        </div>
                     </div>
                  </div><a id="CCAPP9145"></a><div class="props_rev_3"><a id="GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD" name="GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD"></a><h5 id="CCAPP-GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD" class="sect5"><span class="enumeration_section">6.1.3.2 </span>MATCHES PL/SQL Examples
                     </h5>
                     <div>
                        <p>The following example assumes that the <code class="codeph">profiles</code> table of queries is associated with a <code class="codeph">CTXRULE</code> index. It also assumes that the <code class="codeph">newsfeed</code> table contains a set of news articles to be categorized.
                        </p>
                        <p>This example loops through the <code class="codeph">newsfeed</code> table, categorizing each article by using the <code class="codeph">MATCHES</code> operator. The results are stored in the <code class="codeph">results</code> table.
                        </p><pre class="oac_no_warn" dir="ltr">PROMPT  Populate the category table based on newsfeed articles
PROMPT
set serveroutput on;
declare
  mypk   number;
  mytitle varchar2(1000);
  myarticles clob;
  mycategory varchar2(100);
  cursor doccur is select pk,title,articles from newsfeed;
  cursor mycur is  select category from profiles where matches(rule, myarticles)&gt;0;  
  cursor rescur is select category, pk, title from results order by category,pk;

begin
  dbms_output.enable(1000000);
  open doccur;
  loop
    fetch doccur into mypk, mytitle, myarticles;
    exit when doccur%notfound;
    open mycur;
    loop
      fetch mycur into mycategory;
      exit when mycur%notfound;
      insert into results values(mycategory, mypk, mytitle);
    end loop;
    close mycur;
    commit;
  end loop;
  close doccur;
  commit;

end;
</pre><p>The following example displays the categorized articles by category.</p><pre class="oac_no_warn" dir="ltr">PROMPT  display the list of articles for every category
PROMPT
set serveroutput on;

declare
  mypk   number;
  mytitle varchar2(1000);
  mycategory varchar2(100);
  cursor catcur is select category from profiles order by category;
  cursor rescur is select pk, title from results where category=mycategory order by pk;

begin
  dbms_output.enable(1000000);
  open catcur;
  loop
    fetch catcur into mycategory;
    exit when catcur%notfound;
    dbms_output.put_line('********** CATEGORY: '||mycategory||' *************');
open rescur;
    loop
      fetch rescur into mypk, mytitle;
      exit when rescur%notfound;
dbms_output.put_line('**  ('||mypk||'). '||mytitle);
    end loop;
    close rescur;
    dbms_output.put_line('**');
dbms_output.put_line('*******************************************************');
  end loop;
  close catcur; 
end;</pre><div class="infoboxnotealso" id="GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD__GUID-1A429F59-A4C5-4BE2-A68A-2E7F01786480">
                           <p class="notep1">See Also:</p>
                           <p><a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text offers various approaches to document classification."> Classifying Documents in Oracle Text</a> for more extended classification examples
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="CCAPP9146"></a><div class="props_rev_3"><a id="GUID-F0106274-B719-4F65-BB62-65D52E6BDFA2" name="GUID-F0106274-B719-4F65-BB62-65D52E6BDFA2"></a><h4 id="CCAPP-GUID-F0106274-B719-4F65-BB62-65D52E6BDFA2" class="sect4"><span class="enumeration_section">6.1.4 </span>Word and Phrase Queries
                  </h4>
                  <div>
                     <p>A word query is a query on a word or phrase. For example, to find all the rows in your text table that contain the word <span class="italic">dog</span>, enter a query specifying <span class="italic">dog</span> as your query term.
                     </p>
                     <p>You can enter word queries with both <code class="codeph">CONTAINS</code> and <code class="codeph">CATSEARCH</code> SQL operators. However, phrase queries are interpreted differently.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">CONTAINS Phrase Queries:</span> If multiple words are contained in a query expression, separated only by blank spaces (no operators), the string of words is considered a phrase. Oracle Text searches for the entire string during a query. For example, to find all documents that contain the phrase <span class="italic">international law,</span> enter your query with the phrase <span class="italic">international law.</span></p>
                        </li>
                        <li>
                           <p><span class="bold">CATSEARCH Phrase Queries:</span> With the <code class="codeph">CATSEARCH</code> operator, you insert the <code class="codeph">AND</code> operator between words in phrases. For example, a query such as international law is interpreted as <span class="italic">international AND law.</span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="CCAPP9149"></a><div class="props_rev_3"><a id="GUID-D8D4E361-E226-40AF-A539-F3C991D90CC4" name="GUID-D8D4E361-E226-40AF-A539-F3C991D90CC4"></a><h4 id="CCAPP-GUID-D8D4E361-E226-40AF-A539-F3C991D90CC4" class="sect4"><span class="enumeration_section">6.1.5 </span>Querying Stopwords
                  </h4>
                  <div>
                     <p>Stopwords are words for which Oracle Text does not create an index entry. They are usually common words in your language that are unlikely to be searched. </p>
                     <p>Oracle Text includes a default list of stopwords for your language. This list is called a stoplist. For example, in English, the words <span class="italic">this</span> and <span class="italic">that</span> are defined as stopwords in the default stoplist. You can modify the default stoplist or create new stoplists with the <code class="codeph">CTX_DDL</code> package. You can also add stopwords after indexing with the <code class="codeph">ALTER INDEX</code> statement.
                     </p>
                     <p>You cannot query on a stopword itself or on a phrase composed of only stopwords. For example, a query on the word <span class="italic">this</span> returns no hits when <span class="italic">this</span> is defined as a stopword.
                     </p>
                     <p>Because the Oracle Text index records the position of stopwords even though it does not create an index entry for them, you can query phrases that contain stopwords as well as indexable words, such as <span class="italic">this boy talks to that girl</span>. 
                     </p>
                     <p>When you include a stopword within your query phrase, the stopword matches any word. For example, the following query assumes that <span class="italic">was</span> is a stopword. It matches phrases such as <span class="italic">Jack is big</span> and <span class="italic">Jack grew big.</span> It also matches <span class="italic">grew,</span> even though it is not a stopword.
                     </p><pre class="oac_no_warn" dir="ltr">'Jack was big'
</pre><p>Starting with Oracle Database 12<span class="italic">c</span> Release 2 (12.2), stopwords and unary operators on stopwords are ignored at the initial stages of a query result in different query results than earlier releases. For example, the following query does not return documents because <code class="codeph">the</code> is a stopword and the <code class="codeph">$</code> operator and the stopword are ignored during query processing:
                     </p><pre class="pre codeblock"><code>SQL&gt; select count(1) from tabx where contains(text,'$the')&gt;0; 
<span class="italic">&nbsp;.</span> 
<span class="italic">&nbsp;&nbsp;COUNT(1)</span> 
<span class="italic">&nbsp;----------</span> 
<span class="italic">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0</span></code></pre><p>The next query returns documents containing <code class="codeph">first</code> because the <code class="codeph">the</code> stopword and the <code class="codeph">$</code> operator are ignored.
                     </p><pre class="pre codeblock"><code>SQL&gt; select count(1) from tabx where contains(text,'first and $the')&gt;0; 
<span class="italic">&nbsp;.</span> 
<span class="italic">&nbsp;&nbsp;COUNT(1)</span> 
<span class="italic">&nbsp;----------</span> 
<span class="italic">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span></code></pre></div>
               </div><a id="CCAPP9685"></a><a id="CCAPP9150"></a><div class="props_rev_3"><a id="GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F" name="GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F"></a><h4 id="CCAPP-GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F" class="sect4"><span class="enumeration_section">6.1.6 </span>ABOUT Queries and Themes
                  </h4>
                  <div>
                     <p>An <code class="codeph">ABOUT</code> query is a query on a document theme. A document theme is a concept that is sufficiently developed in the text. For example, an <code class="codeph">ABOUT</code> query on <span class="italic">US politics</span> might return documents containing information about US presidential elections and US foreign policy. Documents need not contain the exact phrase <span class="italic">US politics</span> to be returned.
                     </p>
                     <p>During indexing, document themes are derived from the knowledge base, which is a hierarchical list of categories and concepts that represents a view of the world. Some examples of themes in the knowledge catalog are concrete concepts such as <span class="italic">jazz music,</span> <span class="italic">football,</span> or <span class="italic">Nelson Mandela.</span> Themes can also be abstract concepts such as <span class="italic">happiness</span> or <span class="italic">honesty.</span></p>
                     <p>During indexing, the system can also identify and index document themes that are sufficiently developed in the document but that do not exist in the knowledge base.</p>
                     <p>You can augment the knowledge base to define concepts and terms specific to your industry or query application. When you do so, <code class="codeph">ABOUT</code> queries are more precise for the added concepts. 
                     </p>
                     <p><code class="codeph">ABOUT</code> queries perform best when you create a theme component in your index. Theme components are created by default for English and French.
                     </p>
                     <div class="infoboxnotealso" id="GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F__GUID-F9E819D4-0F60-4579-AED7-72ABEDDDC73D">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0301" target="_blank"><span class="italic">Oracle Text Reference</span></a> 
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F__GUID-D03DCF69-4DA8-4F91-84C0-3784F0D3E6BC">Querying Stopthemes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Oracle Text enables you to query on themes with the <code class="codeph">ABOUT</code> operator. A stoptheme is a theme that is not to be indexed. You can add and remove stopthemes with the <code class="codeph">CTX_DDL</code> package. You can add stopthemes after indexing with the <code class="codeph">ALTER INDEX</code> statement.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D0633C95-0A90-47B8-8A7B-B134C0226B93" name="GUID-D0633C95-0A90-47B8-8A7B-B134C0226B93"></a><h3 id="CCAPP-GUID-D0633C95-0A90-47B8-8A7B-B134C0226B93" class="sect3"><span class="enumeration_section">6.2 </span>Oracle Text Query Features
               </h3>
               <div>
                  <p>Oracle Text has various query features. You can use these query features in your query application.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-97609E8B-1B57-44A0-B89B-93FB018CAD9D">Query Expressions</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4">Case-Sensitive Searching</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62">Query Feedback</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7">Query Explain Plan</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-156424C0-B89B-418B-BE22-1EF13B257FD4">Using a Thesaurus in Queries</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-705128B8-E8F0-40B3-A965-E531F87A9783">About Document Section Searching</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-57BA56DA-CDEC-442A-BF2B-CB8BFEA7C001">Using Query Templates</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3">Query Analysis</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446">Other Query Features</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9152"></a><div class="props_rev_3"><a id="GUID-97609E8B-1B57-44A0-B89B-93FB018CAD9D" name="GUID-97609E8B-1B57-44A0-B89B-93FB018CAD9D"></a><h4 id="CCAPP-GUID-97609E8B-1B57-44A0-B89B-93FB018CAD9D" class="sect4"><span class="enumeration_section">6.2.1 </span>Query Expressions
                  </h4>
                  <div>
                     <p>A query expression is everything in between the single quotes in the <code class="codeph">text_query</code> argument of the <code class="codeph">CONTAINS</code> or <code class="codeph">CATSEARCH</code> operator. The contents of a query expression in a <code class="codeph">CONTAINS</code> query differs from the contents of a <code class="codeph">CATSEARCH</code> operator.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C">CONTAINS Operators</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-A79E888C-D100-45BA-B604-BE84C21AA325">CATSEARCH Operator</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB">MATCHES Operator</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9153"></a><div class="props_rev_3"><a id="GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C" name="GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C"></a><h5 id="CCAPP-GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C" class="sect5"><span class="enumeration_section">6.2.1.1 </span>CONTAINS Operators
                     </h5>
                     <div>
                        <p>A <code class="codeph">CONTAINS</code> query expression can contain query operators that enable logical, proximity, thesaural, fuzzy, and wildcard searching. Querying with stored expressions is also possible. Within the query expression, you can use grouping characters to alter operator precedence. This book refers to these operators as the <code class="codeph">CONTEXT</code> grammar.
                        </p>
                        <p>With <code class="codeph">CONTAINS</code>, you can also use the <code class="codeph">ABOUT</code> query to query document themes.
                        </p>
                        <div class="infoboxnotealso" id="GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C__GUID-1541E5F7-5ADA-464D-9ED1-F57F79063BF0">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-7070C025-54E1-4FBB-8585-1FCBD525927D">The CONTEXT Grammar</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9154"></a><div class="props_rev_3"><a id="GUID-A79E888C-D100-45BA-B604-BE84C21AA325" name="GUID-A79E888C-D100-45BA-B604-BE84C21AA325"></a><h5 id="CCAPP-GUID-A79E888C-D100-45BA-B604-BE84C21AA325" class="sect5"><span class="enumeration_section">6.2.1.2 </span>CATSEARCH Operator
                     </h5>
                     <div>
                        <p>With the <code class="codeph">CATSEARCH</code> operator, you specify your query expression with the <code class="codeph">text_query</code> argument and your optional structured criteria with the <code class="codeph">structured_query</code> argument. The <code class="codeph">text_query</code> argument enables you to query words and phrases. You can use logical operations, such as logical and, or, and not. This book refers to these operators as the <code class="codeph">CTXCAT</code> grammar.
                        </p>
                        <p>If you want to use the much richer set of operators supported by the <code class="codeph">CONTEXT</code> grammar, you can use the query template feature with <code class="codeph">CATSEARCH.</code></p>
                        <p>With <code class="codeph">structured_query</code> argument, you specify your structured criteria. You can use the following SQL operations:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">=</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;=</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">&gt;=</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">&gt;</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">IN</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">BETWEEN</code></p>
                           </li>
                        </ul>
                        <p>You can also use the <code class="codeph">ORDER BY</code> clause to order your output.
                        </p>
                        <div class="infoboxnotealso" id="GUID-A79E888C-D100-45BA-B604-BE84C21AA325__GUID-5D0AEAE8-DEAE-4E1E-997E-A374B04B655F">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016">The CTXCAT Grammar</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9155"></a><div class="props_rev_3"><a id="GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB" name="GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB"></a><h5 id="CCAPP-GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB" class="sect5"><span class="enumeration_section">6.2.1.3 </span>MATCHES Operator
                     </h5>
                     <div>
                        <p>Unlike <code class="codeph">CONTAINS</code> and <code class="codeph">CATSEARCH,</code> <code class="codeph">MATCHES</code> does not take a query expression as input.
                        </p>
                        <p>Instead, the <code class="codeph">MATCHES</code> operator takes a document as input and finds all rows in a query (rule) table that match it. As such, you can use <code class="codeph">MATCHES</code> to classify documents according to the rules they match. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB__GUID-7AAC1A47-2BCF-4D28-9F9E-917CB15BD96F">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="querying-with-oracle-text.html#GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053">Querying with MATCHES</a>"</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="CCAPP9156"></a><div class="props_rev_3"><a id="GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4" name="GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4"></a><h4 id="CCAPP-GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4" class="sect4"><span class="enumeration_section">6.2.2 </span>Case-Sensitive Searching
                  </h4>
                  <div>
                     <p>Oracle Text supports case-sensitivity for word and <code class="codeph">ABOUT</code> queries.
                     </p>
                     <p>Word queries are <span class="italic">not</span> case-insensitive by default. This means that a query on the term <span class="italic">dog</span> returns the rows in your text table that contain the word <span class="italic">dog</span>, but not <span class="italic">Dog</span> or <span class="italic">DOG.</span></p>
                     <p>You can enable or disable case-sensitive searching with the <code class="codeph">MIXED_CASE</code> attribute in your <code class="codeph">BASIC_LEXER</code> index preference. With a case-sensitive index, your queries must be entered in exact case. For example, a query on <span class="italic">Dog</span> matches only documents with <span class="italic">Dog.</span> Documents with <span class="italic">dog</span> or <span class="italic">DOG</span> are not returned as hits.
                     </p>
                     <p>To enable case-insensitive searching, set  the <code class="codeph">MIXED_CASE</code> attribute in your <code class="codeph">BASIC_LEXER</code> index preference to <code class="codeph">NO.</code></p>
                     <div class="infoboxnote" id="GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4__GUID-20AF14C5-7A13-49B2-BFA7-37CACAFD9D74">
                        <p class="notep1">Note:</p>
                        <p>If you enable case-sensitivity for word queries and you query a phrase containing stopwords and indexable words, then you must specify the correct case for the stopwords. For example, a query on <span class="italic">the dog</span> does not return text that contains <span class="italic">The Dog,</span> assuming that <span class="italic">the</span> is a stopword.
                        </p>
                     </div>
                     <p><code class="codeph">ABOUT</code> queries give the best results when your query is formulated with proper case because the normalization of your query is based on the knowledge catalog. The knowledge catalog is case-sensitive. Attention to case is required, especially for words that have different meanings depending on case, such as <span class="italic">turkey </span>the bird and <span class="italic">Turkey</span> the country.
                     </p>
                     <p>However, you do not have to enter your query in exact case to obtain relevant results from an <code class="codeph">ABOUT</code> query. The system does its best to interpret your query. For example, if you enter a query of <code class="codeph">ORACLE</code> and the system does not find this concept in the knowledge catalog, the system might use <span class="italic">Oracle</span> as a related concept for lookup.
                     </p>
                  </div>
               </div><a id="CCAPP9160"></a><div class="props_rev_3"><a id="GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62" name="GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62"></a><h4 id="CCAPP-GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62" class="sect4"><span class="enumeration_section">6.2.3 </span>Query Feedback
                  </h4>
                  <div>
                     <p>Feedback provides broader-term, narrower term, and related term information for a specified query with a <code class="codeph">CONTEXT</code> index. You obtain this information programatically with the <code class="codeph">CTX_QUERY.HFEEDBACK</code> procedure.
                     </p>
                     <p>Broader term, narrower term, and related term information is useful for suggesting other query terms to the user in your query application.</p>
                     <p>The returned feedback information is obtained from the knowledge base and contains only those terms that are also in the index. This process increases the chances that terms returned from <code class="codeph">HFEEDBACK</code> produce hits over the currently indexed document set.
                     </p>
                     <div class="infoboxnotealso" id="GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62__GUID-7689B15D-940F-48F5-BEFE-9BBF8305C100">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_QUERY-package.html#CCREF0908" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about using <code class="codeph">CTX_QUERY.HFEEDBACK</code></p>
                     </div>
                  </div>
               </div><a id="CCAPP9161"></a><div class="props_rev_3"><a id="GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7" name="GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7"></a><h4 id="CCAPP-GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7" class="sect4"><span class="enumeration_section">6.2.4 </span>Query Explain Plan
                  </h4>
                  <div>
                     <p>Explain plan information provides a graphical representation of the parse tree for a <code class="codeph">CONTAINS</code> query expression. You can obtain this information programatically with the <code class="codeph">CTX_QUERY.EXPLAIN</code> procedure.
                     </p>
                     <p>Explain plan information tells you how a query is expanded and parsed without having the system execute the query. Obtaining explain information is useful for knowing the expansion for a particular stem, wildcard, thesaurus, fuzzy, soundex, or <code class="codeph">ABOUT</code> query. Parse trees also show the following information:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Order of execution</p>
                        </li>
                        <li>
                           <p><code class="codeph">ABOUT</code> query normalization
                           </p>
                        </li>
                        <li>
                           <p>Query expression optimization</p>
                        </li>
                        <li>
                           <p>Stopword transformations</p>
                        </li>
                        <li>
                           <p>Breakdown of composite-word tokens for supported languages</p>
                           <div class="infoboxnotealso" id="GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7__GUID-1B49A23F-039D-4DF6-914D-7D5FFC781FEF">
                              <p class="notep1">See Also:</p>
                              <p><a href="../ccref/CTX_QUERY-package.html#CCREF0906" target="_blank"><span class="italic">Oracle Text Reference</span></a> for more information about using <code class="codeph">CTX_QUERY.EXPLAIN</code></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="CCAPP9162"></a><div class="props_rev_3"><a id="GUID-156424C0-B89B-418B-BE22-1EF13B257FD4" name="GUID-156424C0-B89B-418B-BE22-1EF13B257FD4"></a><h4 id="CCAPP-GUID-156424C0-B89B-418B-BE22-1EF13B257FD4" class="sect4"><span class="enumeration_section">6.2.5 </span>Using a Thesaurus in Queries
                  </h4>
                  <div>
                     <p>Oracle Text enables you to define a thesaurus for your query application and process queries more intelligently.</p>
                     <p>Because users might not know which words represent a topic, you can define synonyms or narrower terms for likely query terms. You can use the thesaurus operators to expand your query to include thesaurus terms.</p>
                     <div class="infoboxnotealso" id="GUID-156424C0-B89B-418B-BE22-1EF13B257FD4__GUID-5D7A3A93-08E3-4473-B0B2-4C36C7EBF74D">
                        <p class="notep1">See Also:</p>
                        <p><a href="working-with-thesaurus-in-oracle-text.html#GUID-05C24323-568D-4952-9358-7C98D68B19BF" title="You can improve your query application with a thesaurus."> Working With a Thesaurus in Oracle Text</a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9163"></a><div class="props_rev_3"><a id="GUID-705128B8-E8F0-40B3-A965-E531F87A9783" name="GUID-705128B8-E8F0-40B3-A965-E531F87A9783"></a><h4 id="CCAPP-GUID-705128B8-E8F0-40B3-A965-E531F87A9783" class="sect4"><span class="enumeration_section">6.2.6 </span>Document Section Searching
                  </h4>
                  <div>
                     <p>Section searching enables you to narrow text queries down to sections within documents. </p>
                     <p>You can implement section searching when your documents have internal structure, such as HTML and XML documents. For example, you can define a section for the &lt;H1&gt; tag that enables you to query within this section by using the <code class="codeph">WITHIN</code> operator. 
                     </p>
                     <p>You can set the system to automatically create sections from XML documents.</p>
                     <p>You can also define attribute sections to search attribute text in XML documents.</p>
                     <div class="infoboxnote" id="GUID-705128B8-E8F0-40B3-A965-E531F87A9783__GUID-8B5F185E-88FB-490E-907F-EB8D59FE4B0F">
                        <p class="notep1">Note:</p>
                        <p>Section searching is supported for only word queries with a <code class="codeph">CONTEXT</code> index.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-705128B8-E8F0-40B3-A965-E531F87A9783__GUID-04335311-515D-4028-963D-1575987AFE11">
                        <p class="notep1">See Also:</p>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-9455DBD9-2C23-4CB0-A3C5-FB8B2033516A" title="You can use document sections in a text query application."> Searching Document Sections in Oracle Text</a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9164"></a><div class="props_rev_3"><a id="GUID-57BA56DA-CDEC-442A-BF2B-CB8BFEA7C001" name="GUID-57BA56DA-CDEC-442A-BF2B-CB8BFEA7C001"></a><h4 id="CCAPP-GUID-57BA56DA-CDEC-442A-BF2B-CB8BFEA7C001" class="sect4"><span class="enumeration_section">6.2.7 </span>Using Query Templates
                  </h4>
                  <div>
                     <p>Query <a id="d16071e2906" class="indexterm-anchor"></a>templates are an alternative to the existing query languages. Rather than passing a query string to <code class="codeph">CONTAINS</code> or <code class="codeph">CATSEARCH</code>, you pass a structured document that contains the query string in a tagged element. Within this structured document, or query template, you can enable additional query features.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-6CEBFF66-B74A-4739-A11D-BBC8E1927856">Query Rewrite</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-7DD2AF6B-88FD-40B7-A522-3F59309D3B35">Query Relaxation</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-636AC3D9-23D5-4E10-916D-AA45EC423547">Query Language</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD">Ordering By SDATA Sections</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4">Alternative and User-defined Scoring</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-58F6A035-9483-454B-BD8F-0AC933B93405">Alternative Grammar</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9165"></a><div class="props_rev_3"><a id="GUID-6CEBFF66-B74A-4739-A11D-BBC8E1927856" name="GUID-6CEBFF66-B74A-4739-A11D-BBC8E1927856"></a><h5 id="CCAPP-GUID-6CEBFF66-B74A-4739-A11D-BBC8E1927856" class="sect5"><span class="enumeration_section">6.2.7.1 </span>Query Rewrite
                     </h5>
                     <div>
                        <p>Query applications sometimes parse end-user queries, interpreting a query string in one or more ways by using different operator combinations. For example, if a user enters a query of <span class="italic">kukui nut,</span> your application enters the <span class="italic">{kukui nut}</span> and <span class="italic">{kukui or nut}</span> queries to increase recall.
                        </p>
                        <p>The <a id="d16071e3027" class="indexterm-anchor"></a>query rewrite feature enables you to submit a single query that expands the original query into the rewritten versions. The results are returned with no duplication.
                        </p>
                        <p>You specify your rewrite sequences with the query template feature. The rewritten versions of the query are executed efficiently with a single call to <code class="codeph">CONTAINS</code> or <code class="codeph">CATSEARCH.</code></p>
                        <p>The following template defines a query rewrite sequence. The query of <span class="italic">{kukui nut}</span> is rewritten as follows:
                        </p>
                        <p><span class="italic">{kukui} {nut}</span></p>
                        <p><span class="italic">{kukui} ; {nut}</span></p>
                        <p><span class="italic">{kukui}  AND {nut}</span></p>
                        <p><span class="italic">{kukui} ACCUM {nut}</span></p>
                        <p>The <a id="d16071e3058" class="indexterm-anchor"></a>following is the query rewrite template for these transformations: 
                        </p><pre class="oac_no_warn" dir="ltr">select id from docs where CONTAINS (text,
 '&lt;query&gt;
   &lt;textquery lang="ENGLISH" grammar="CONTEXT"&gt; kukui nut
     &lt;progression&gt;
       &lt;seq&gt;&lt;rewrite&gt;transform((TOKENS, "{", "}", " "))&lt;/rewrite&gt;&lt;/seq&gt;
       &lt;seq&gt;&lt;rewrite&gt;transform((TOKENS, "{", "}", " ; "))&lt;/rewrite&gt;&lt;/seq&gt;
       &lt;seq&gt;&lt;rewrite&gt;transform((TOKENS, "{", "}", "AND"))&lt;/rewrite&gt;&lt;/seq&gt;
       &lt;seq&gt;&lt;rewrite&gt;transform((TOKENS, "{", "}", "ACCUM"))&lt;/rewrite&gt;&lt;/seq&gt;
     &lt;/progression&gt;
   &lt;/textquery&gt;
  &lt;score datatype="INTEGER" algorithm="COUNT"/&gt;
&lt;/query&gt;')&gt;0;</pre></div>
                  </div><a id="CCAPP9166"></a><div class="props_rev_3"><a id="GUID-7DD2AF6B-88FD-40B7-A522-3F59309D3B35" name="GUID-7DD2AF6B-88FD-40B7-A522-3F59309D3B35"></a><h5 id="CCAPP-GUID-7DD2AF6B-88FD-40B7-A522-3F59309D3B35" class="sect5"><span class="enumeration_section">6.2.7.2 </span>Query Relaxation
                     </h5>
                     <div>
                        <p>The query relaxation feature enables your application to execute the most restrictive version of a query first and progressively relax the query until the required number of hits are obtained.</p>
                        <p>For example, your application searches first on <span class="italic">black pen</span> and then the query is relaxed to <span class="italic">black NEAR pen</span> to obtain more hits.
                        </p>
                        <p>The following query template defines a query relaxation sequence. The query of <span class="italic">black pen</span> is entered in sequence.
                        </p>
                        <p><span class="italic">{black} {pen}</span> 
                        </p>
                        <p><span class="italic">{black} NEAR {pen}</span>  
                        </p>
                        <p><span class="italic">{black} AND {pen}</span> 
                        </p>
                        <p><span class="italic">{black} ACCUM {pen}</span></p>
                        <p>The <a id="d16071e3163" class="indexterm-anchor"></a>following is the query relaxation template for these transformations: 
                        </p><pre class="oac_no_warn" dir="ltr">select id from docs where CONTAINS (text,
 '&lt;query&gt;
   &lt;textquery lang="ENGLISH" grammar="CONTEXT"&gt;
     &lt;progression&gt;
       &lt;seq&gt;{black} {pen}&lt;/seq&gt;
       &lt;seq&gt;{black} NEAR {pen}&lt;/seq&gt;
       &lt;seq&gt;{black} AND {pen}&lt;/seq&gt;
       &lt;seq&gt;{black} ACCUM {pen}&lt;/seq&gt;
     &lt;/progression&gt;
   &lt;/textquery&gt;
   &lt;score datatype="INTEGER" algorithm="COUNT"/&gt;
&lt;/query&gt;')&gt;0;
</pre><p>Query hits are returned in this sequence with no duplication as long as the application needs results.</p>
                        <p>Query relaxation is most effective when your application needs the top-N hits to a query, which you can obtain with the <code class="codeph">DOMAIN_INDEX_SORT</code> hint or in a PL/SQL cursor.
                        </p>
                        <p>Using query templating to relax a query is more efficient than reexecuting a query. </p>
                     </div>
                  </div><a id="CCAPP9167"></a><div class="props_rev_3"><a id="GUID-636AC3D9-23D5-4E10-916D-AA45EC423547" name="GUID-636AC3D9-23D5-4E10-916D-AA45EC423547"></a><h5 id="CCAPP-GUID-636AC3D9-23D5-4E10-916D-AA45EC423547" class="sect5"><span class="enumeration_section">6.2.7.3 </span>Query Language
                     </h5>
                     <div>
                        <p>When you use <code class="codeph">MULTI_LEXER</code> to index a column containing documents in different languages, you can specify which language lexer to use during querying. You do so by using the <a id="d16071e3250" class="indexterm-anchor"></a><code class="codeph">lang</code> parameter in the query template, which specifies the document-level lexer.
                        </p><pre class="oac_no_warn" dir="ltr">select id from docs where CONTAINS (text,
'&lt;query&gt;&lt;textquery lang="french"&gt;bon soir&lt;/textquery&gt;&lt;/query&gt;')&gt;0;</pre><div class="infoboxnotealso" id="GUID-636AC3D9-23D5-4E10-916D-AA45EC423547__GUID-C5285B7E-2091-4E6A-A4EE-11DCCBE9E05B">
                           <p class="notep1">See Also:</p>
                           <p><a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF0101" target="_blank"><span class="italic">Oracle Text Reference</span></a> for information on <code class="codeph">LANGUAGE</code> and <code class="codeph">lang</code> with ALTER INDEX and document sublexer
                           </p>
                        </div>
                     </div>
                  </div><a id="CCAPP9549"></a><div class="props_rev_3"><a id="GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD" name="GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD"></a><h5 id="CCAPP-GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD" class="sect5"><span class="enumeration_section">6.2.7.4 </span>Ordering by SDATA Sections
                     </h5>
                     <div>
                        <p>You can order the query results according to the content of <code class="codeph">SDATA</code> sections by using the <code class="codeph">&lt;order&gt;</code> and <code class="codeph">&lt;orderkey&gt;</code> elements of the query template. 
                        </p>
                        <p>In the following example, the first level of ordering is performed on the <code class="codeph">SDATA</code> <code class="codeph">price</code> section, which is sorted in ascending order. The second and third level of ordering are performed by the <code class="codeph">SDATA</code> <code class="codeph">pub_date</code> section and score, both of which are sorted in descending order.
                        </p><pre class="oac_no_warn" dir="ltr">select id from docs where CONTAINS (text, '
&lt;query&gt;
   &lt;textquery lang="ENGLISH" grammar="CONTEXT"&gt; Oracle &lt;/textquery&gt;
   &lt;score datatype="INTEGER" algorithm="COUNT"/&gt;
   &lt;order&gt;
       &lt;orderkey&gt; SDATA(price) ASC &lt;/orderkey&gt;
       &lt;orderkey&gt; SDATA(pub_date) DESC &lt;/orderKey&gt;
       &lt;orderkey&gt; Score DESC &lt;/orderkey&gt;
   &lt;/order&gt;
&lt;/query&gt;', 1)&gt;0;</pre><div class="infoboxnote" id="GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD__GUID-8B180FA2-8B02-42DF-982D-07219F52C411">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You can add additional <code class="codeph">SDATA</code> sections to an index. Refer to the <code class="codeph">ADD SDATA SECTION</code> parameter string under <code class="codeph">ALTER INDEX</code> in <a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF0101" target="_blank"><span class="italic">Oracle Text Reference</span>.</a></p>
                              </li>
                              <li>
                                 <p>Documents that were indexed before adding an <code class="codeph">SDATA</code> section do not reflect this new preference. Rebuild the index in this case.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD__GUID-F71A2212-CC8F-43FC-85EE-C443E0AD5400">
                           <p class="notep1">See Also:</p>
                           <p><a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF-GUID-827A6E7D-106E-4341-9398-2FF6ABB05E59" target="_blank"><span class="italic">Oracle Text Reference</span></a> for syntax of <code class="codeph">&lt;order&gt;</code> and <code class="codeph">&lt;orderkey&gt;</code> elements of the query template
                           </p>
                        </div>
                     </div>
                  </div><a id="CCAPP9168"></a><div class="props_rev_3"><a id="GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4" name="GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4"></a><h5 id="CCAPP-GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4" class="sect5"><span class="enumeration_section">6.2.7.5 </span>Alternative and User-Defined Scoring
                     </h5>
                     <div>
                        <p>You can use query templating to specify <a id="d16071e3471" class="indexterm-anchor"></a>alternative scoring algorithms. Those algorithms help you customize how <code class="codeph">CONTAINS</code> is scored. They also enable <code class="codeph">SDATA</code> to be used as part of the scoring expressions. In this way, you can mathematically define the scoring expression by using not only predefined scoring components, but also <code class="codeph">SDATA</code> components.
                        </p>
                        <p>With alternative user-defined scoring, you can specify:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Scoring expressions of terms by defining arithmetic expressions that define how the query should be scored, using</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>predefined scoring algorithms: <code class="codeph">DISCRETE</code>, <code class="codeph">OCCURRENCE</code>, <code class="codeph">RELEVANCE</code>, and <code class="codeph">COMPLETION</code></p>
                                 </li>
                                 <li>
                                    <p>arithmetic operations: plus, minus, multiply, divide</p>
                                 </li>
                                 <li>
                                    <p>arithmetic functions: <code class="codeph">ABS(n)</code>, finding the absolute value of <span class="italic">n</span> ; <code class="codeph">LOG(n)</code>, finding the base-10 logarithmic value of <span class="italic">n</span></p>
                                 </li>
                                 <li>
                                    <p>Numeric literals</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Scoring expressions at the term level</p>
                           </li>
                           <li>
                              <p>Terms that should not be taken into account when calculating the score</p>
                           </li>
                           <li>
                              <p>How the score from child elements of <code class="codeph">OR</code> and <code class="codeph">AND</code> operators should be merged
                              </p>
                           </li>
                           <li>
                              <p>Use </p>
                           </li>
                        </ul>
                        <p>You can also use the <code class="codeph">SDATA</code> that stores numeric or <code class="codeph">DATETIME</code> values to affect the final score of the document.
                        </p>
                        <p>The following example specifies an alternative scoring algorithm: </p><pre class="oac_no_warn" dir="ltr">select id from docs where CONTAINS (text,
'&lt;query&gt;        
 &lt;textquery grammar="CONTEXT" lang="english"&gt; mustang  &lt;/textquery&gt;     
 &lt;score datatype="float" algorithm="DEFAULT"/&gt;     
&lt;/query&gt;')&gt;0
</pre><p>The following query templating example includes <code class="codeph">SDATA</code> values as part of the final score:
                        </p><pre class="oac_no_warn" dir="ltr">select id from docs where CONTAINS (text,
'&lt;query&gt;
&lt;textquery grammar="CONTEXT" lang="english"&gt; mustang &lt;/textquery&gt;
&lt;score datatype="float" algorithm="DEFAULT" normalization_expr ="doc_score+SDATA(price)"/&gt;
&lt;/query&gt;')&gt;0"</pre><div class="infoboxnotealso" id="GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4__GUID-3D182C40-82C7-45A1-8802-B1D99CC90D1D">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE">Using DEFINESCORE and DEFINEMERGE for User-defined Scoring</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9169"></a><div class="props_rev_3"><a id="GUID-58F6A035-9483-454B-BD8F-0AC933B93405" name="GUID-58F6A035-9483-454B-BD8F-0AC933B93405"></a><h5 id="CCAPP-GUID-58F6A035-9483-454B-BD8F-0AC933B93405" class="sect5"><span class="enumeration_section">6.2.7.6 </span>Alternative Grammar
                     </h5>
                     <div>
                        <p><a id="d16071e3639" class="indexterm-anchor"></a>Query templating enables you to use the <code class="codeph">CONTEXT</code> grammar with <code class="codeph">CATSEARCH</code> queries and vice versa.
                        </p><pre class="oac_no_warn" dir="ltr">select id from docs where CONTAINS (text,
'&lt;query&gt; 
  &lt;textquery grammar="CTXCAT"&gt;San Diego&lt;/textquery&gt;
  &lt;score datatype="integer"/&gt;
&lt;/query&gt;')&gt;0;</pre></div>
                  </div>
               </div><a id="CCAPP9170"></a><div class="props_rev_3"><a id="GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3" name="GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3"></a><h4 id="CCAPP-GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3" class="sect4"><span class="enumeration_section">6.2.8 </span>Query Analysis
                  </h4>
                  <div>
                     <p>Oracle Text enables you to create a log of queries and to analyze the queries. For example, suppose you have an application that searches a database of large animals, and your analysis of its queries shows that users search for the word <span class="italic">mouse.</span> This analysis shows you that you should rewrite your application to avoid returning an unsuccessful search. Instead, a search for <span class="italic">mouse</span> redirects users to a database of small animals.
                     </p>
                     <p>With query analysis, you can find out:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Which queries were made</p>
                        </li>
                        <li>
                           <p>Which queries were successful</p>
                        </li>
                        <li>
                           <p>Which queries were unsuccessful</p>
                        </li>
                        <li>
                           <p>How many times each query was made</p>
                        </li>
                     </ul>
                     <p>You can combine these factors in various ways, such as determining the 50 most frequent unsuccessful queries made by your application. </p>
                     <p>You start query logging with <code class="codeph">CTX_OUTPUT.START_QUERY_LOG.</code> The query log contains all queries made to all <code class="codeph">CONTEXT</code> indexes that the program is using until a <code class="codeph">CTX_OUTPUT.END_QUERY_LOG</code> procedure is entered. Use <code class="codeph">CTX_REPORT.QUERY_LOG_SUMMARY</code> to get a report of queries.
                     </p>
                     <div class="infoboxnotealso" id="GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3__GUID-0F57BFF5-6838-48F2-82B8-8FB8013DE948">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a> for syntax and examples for these procedures
                        </p>
                     </div>
                  </div>
               </div><a id="CCAPP9503"></a><a id="CCAPP9171"></a><div class="props_rev_3"><a id="GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446" name="GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446"></a><h4 id="CCAPP-GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446" class="sect4"><span class="enumeration_section">6.2.9 </span>Other Query Features
                  </h4>
                  <div>
                     <p>In your query application, you can use other query features such as proximity searching. <a href="querying-with-oracle-text.html#GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446__BABGJEID" title="This table describes other Oracle Text query features.">Table 6-1</a> lists some of these features.
                     </p>
                     <div class="tblformal" id="GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446__BABGJEID">
                        <p class="titleintable">Table 6-1 Other Oracle Text Query Features</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Other Oracle Text Query Features" summary="This table describes other Oracle Text query features." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d16071e3858">Feature</th>
                                 <th align="left" valign="bottom" width="39%" id="d16071e3861">Description</th>
                                 <th align="left" valign="bottom" width="32%" id="d16071e3864">Implement With</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3869" headers="d16071e3858 ">
                                    <p>Case-Sensitive Searching</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3869 d16071e3861 ">
                                    <p>Enables you to search on words or phrases exactly as they are entered in the query. For example, a search on <span class="italic">Roman</span> returns documents that contain <span class="italic">Roman</span> and not <span class="italic">roman</span>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3869 d16071e3864 ">
                                    <p><code class="codeph">BASIC_LEXER</code> when you create the index
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3890" headers="d16071e3858 ">
                                    <p>Base-Letter Conversion</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3890 d16071e3861 ">
                                    <p>Queries words with or without diacritical marks such as tildes, accents, and umlauts. For example, with a Spanish base-letter index, a query of <span class="italic">energía</span> matches documents containing both <span class="italic">energía</span> and <span class="italic">energia</span>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3890 d16071e3864 ">
                                    <p><code class="codeph">BASIC_LEXER</code> when you create the index
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3911" headers="d16071e3858 ">
                                    <p>Word Decompounding</p>
                                    <p> (German and Dutch)</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3911 d16071e3861 ">
                                    <p>Enables searching on words that contain the specified term as subcomposite.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3911 d16071e3864 ">
                                    <p><code class="codeph">BASIC_LEXER</code> when you create the index
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3925" headers="d16071e3858 ">
                                    <p>Alternate Spelling </p>
                                    <p>(German, Dutch, and Swedish)</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3925 d16071e3861 ">
                                    <p>Searches on alternate spellings of words.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3925 d16071e3864 ">
                                    <p><code class="codeph">BASIC_LEXER</code> when you create the index
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3939" headers="d16071e3858 ">
                                    <p>Proximity Searching</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3939 d16071e3861 ">
                                    <p>Searches for words near one another.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3939 d16071e3864 ">
                                    <p><code class="codeph">NEAR</code> operator when you enter the query
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3951" headers="d16071e3858 ">
                                    <p>Expanded operator containing the functionality of <code class="codeph">PHRASE</code>, <code class="codeph">NEAR</code> and <code class="codeph">AND</code> operators. 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3951 d16071e3861 ">
                                    <p>Breaks a document into clumps based on the given query. Each clump is classified based on a primary feature, and is scored based on secondary features. The final document score adds clump scores such that the ordering of primary features determines the initial ordering of document scores.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3951 d16071e3864 ">
                                    <p><code class="codeph">NEAR2</code> operator when you enter the query
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3972" headers="d16071e3858 ">
                                    <p>Stemming</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3972 d16071e3861 ">
                                    <p>Searches for words with the same root as the specified term.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3972 d16071e3864 ">
                                    <p>$ operator at when you enter the query</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3982" headers="d16071e3858 ">
                                    <p>Fuzzy Searching</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3982 d16071e3861 ">
                                    <p>Searches for words that have a similar spelling as the specified term.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3982 d16071e3864 ">
                                    <p><code class="codeph">FUZZY</code> operator when you enter the query
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3994" headers="d16071e3858 ">
                                    <p>Query Explain Plan</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3994 d16071e3861 ">
                                    <p>Generates query parse information.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3994 d16071e3864 ">
                                    <p><code class="codeph">CTX_QUERY.EXPLAIN</code> PL/SQL procedure after you index
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4006" headers="d16071e3858 ">
                                    <p>Hierarchical Query Feedback</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4006 d16071e3861 ">
                                    <p>Generates broader term, narrower term and related term information for a query.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4006 d16071e3864 ">
                                    <p><code class="codeph">CTX_QUERY.HFEEDBACK</code> PL/SQL procedure after you index
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4018" headers="d16071e3858 ">
                                    <p>Browse index</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4018 d16071e3861 ">
                                    <p>Browses the words around a seed word in the index.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4018 d16071e3864 ">
                                    <p><code class="codeph">CTX_QUERY.BROWSE_WORDS</code> PL/SQL after you index
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4031" headers="d16071e3858 ">
                                    <p>Count hits</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4031 d16071e3861 ">
                                    <p>Counts the number of hits in a query.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4031 d16071e3864 ">
                                    <p><code class="codeph">CTX_QUERY.COUNT_HITS</code> PL/SQL procedure after you index
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4043" headers="d16071e3858 ">
                                    <p>Stored Query Expression</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4043 d16071e3861 ">
                                    <p>Stores the text of a query expression for later reuse in another query.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4043 d16071e3864 ">
                                    <p><code class="codeph">CTX_QUERY.STORE_SQE</code> PL/SQL procedure after you index
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4055" headers="d16071e3858 ">
                                    <p>Thesaural Queries</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4055 d16071e3861 ">
                                    <p>Uses a thesaurus to expand queries.</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4055 d16071e3864 ">
                                    <p>Thesaurus operators such as <code class="codeph">SYN</code> and <code class="codeph">BT</code> as well as the <code class="codeph">ABOUT</code> operator
                                    </p>
                                    <p>(Use <code class="codeph">CTX_THES</code> package to maintain the thesaurus.)
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
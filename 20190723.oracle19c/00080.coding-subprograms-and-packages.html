<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Coding PL/SQL Subprograms and Packages</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Development Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Development Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00">
      <meta name="dcterms.title" content="Database Development Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96334-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="plsql-for-application-developers.html" title="Previous" type="text/html">
      <link rel="next" href="plscope.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="plsql-for-application-developers.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="plscope.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Development Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="plsql-for-application-developers.html" property="item" typeof="WebPage"><span property="name">PL/SQL for Application Developers</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Coding PL/SQL Subprograms and Packages</li>
            </ol>
            <a id="GUID-18D5ADA3-97E1-4D71-8829-7C2F18DF6E2F" name="GUID-18D5ADA3-97E1-4D71-8829-7C2F18DF6E2F"></a><a id="ADFNS1029"></a><a id="ADFNS009"></a>
            
            <h2 id="ADFNS-GUID-18D5ADA3-97E1-4D71-8829-7C2F18DF6E2F" class="sect2"><span class="enumeration_chapter">13 </span>Coding PL/SQL Subprograms and Packages
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>PL/SQL subprograms and packages are the building blocks of Oracle Database applications. Oracle recommends that you implement your application as a package, for the reasons given in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00902" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a>.
               </p>
               <div class="section">
                  <p class="subhead1" id="GUID-18D5ADA3-97E1-4D71-8829-7C2F18DF6E2F__GUID-EF845E7B-3370-42AA-904D-5A8606465081">Topics:</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-037FB905-0E13-4729-840F-CF3DDC1028D9">Overview of PL/SQL Subprograms</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-29768EA9-170A-4038-B6EB-9821E33E5DF6">Overview of PL/SQL Packages</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-DF29C489-E8F5-4171-8CF1-AE86032111BF">Overview of PL/SQL Units</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-C0141D00-57EA-4957-9270-CCA83EE82C95">Creating PL/SQL Subprograms and Packages</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-165E6DFF-2BD3-4A69-A1F1-557F74D4B7C0">Altering PL/SQL Subprograms and Packages</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-49E5AD11-BFCE-4AA5-B309-C86A34502C88">Deprecating Packages, Subprograms, and Types</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-BAE76DFB-434F-499A-8D9A-8AB15C36AA40">Dropping PL/SQL Subprograms and Packages</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-53216323-38DB-4BE4-B2A9-E85DFCCBBB7A">Compiling PL/SQL Units for Native Execution</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-C898484A-4592-44F6-875D-C83B30E1DDAA">Invoking Stored PL/SQL Subprograms</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-C35B709B-EE78-4DB4-9B63-54EB8B4D639F" title="You can use the PRAGMA RESTRICT_REFERENCES clause when you create a PL/SQL package.">Invoking Stored PL/SQL Functions from SQL Statements</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-7D7E93D3-FD00-42C7-85D1-2B8965CA99D5" title="PL/SQL and Java code in the database can be debugged using Oracle SQL Developer, Oracle JDeveloper, and various third-party tools. The DBMS_DEBUG_JDWP package is used to establish connections between a database session and these debugger programs.">Debugging Stored Subprograms</a></p>
                  </li>
                  <li>
                     <p><a href="coding-subprograms-and-packages.html#GUID-819553BB-9DC8-45A6-88EC-8BAF797C634E">Package Invalidations and Session State</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-18D5ADA3-97E1-4D71-8829-7C2F18DF6E2F__GUID-713C90D8-FFF8-48D1-90CD-2204F6C0F50A">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS007" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about handling errors in PL/SQL subprograms and packages
                        </p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADDCI2120" target="_blank"><span class="italic">Oracle Database Data Cartridge Developer's Guide</span></a> for information about creating aggregate functions for complex data types such as multimedia data stored using object types, opaque types, and LOBs
                        </p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL791" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for information about application tracing tools, which can help you find problems in PL/SQL code
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADFNS1397"></a><div class="props_rev_3"><a id="GUID-037FB905-0E13-4729-840F-CF3DDC1028D9" name="GUID-037FB905-0E13-4729-840F-CF3DDC1028D9"></a><h3 id="ADFNS-GUID-037FB905-0E13-4729-840F-CF3DDC1028D9" class="sect3">Overview of PL/SQL Subprograms</h3>
               <div>
                  <p>The basic unit of a PL/SQL source program is the <span class="bold">block</span>, which groups related declarations and statements. A block has an optional declarative part, a required executable part, and an optional exception-handling part. A block can be either anonymous or named.
                  </p>
                  <p>A PL/SQL <span class="bold">subprogram</span> is a named block that can be invoked repeatedly. If the subprogram has parameters, then their values can differ for each invocation. 
                  </p>
                  <p>A subprogram is either a procedure or a function. Typically, you use a <span class="bold">procedure</span> to perform an action and a <span class="bold">function</span> to compute and return a value.
                  </p>
                  <p>A subprogram is also either a <span class="bold">nested subprogram</span> (created inside a PL/SQL block, which can be another subprogram), a <span class="bold">package subprogram</span> (declared in a package specification and defined in the package body), or a <span class="bold">standalone subprogram</span> (created at schema level). Package subprograms and standalone programs are <span class="bold">stored subprograms</span>. A stored subprogram is compiled and stored in the database, where many applications can invoke it.
                  </p>
                  <p>Stored subprograms are affected by the <code class="codeph">AUTHID</code> and <code class="codeph">ACCESSIBLE</code> <code class="codeph">BY</code> clauses. The <span class="bold"><code class="codeph">AUTHID</code></span> <span class="bold">clause</span> affects the name resolution and privilege checking of SQL statements that the subprogram issues at runtime. The <span class="bold"><code class="codeph">ACCESSIBLE</code></span> <span class="bold"><code class="codeph">BY</code></span> <span class="bold">clause</span> specifies a white list of PL/SQL units that can access the subprogram.
                  </p>
                  <p>A PL/SQL subprogram running on an Oracle Database instance can invoke an <span class="bold">external subprogram</span> written in a third-generation language (3GL). The 3GL subprogram runs in a separate address space from that of the database.
                  </p>
                  <p>PL/SQL lets you overload nested subprograms, package subprograms, and type methods. <span class="bold">Overloaded subprograms</span> have the same name but their formal parameters differ in either name, number, order, or data type family.
                  </p>
                  <p>Like a stored procedure, a <span class="bold">trigger</span> is a named PL/SQL unit that is stored in the database and can be invoked repeatedly. Unlike a stored procedure, you can enable and disable a trigger, but you cannot explicitly invoke it. While a trigger is enabled, the database automatically invokes it—that is, the trigger fires—whenever its triggering event occurs. While a trigger is disabled, it does not fire.
                  </p>
                  <div class="infoboxnotealso" id="GUID-037FB905-0E13-4729-840F-CF3DDC1028D9__GUID-AB62AEE9-DC8E-43D9-80C6-0633EA64B8AA">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS008" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for complete information about PL/SQL subprograms
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS141" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about PL/SQL blocks
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99900" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about subprograms
                           </p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-DF29C489-E8F5-4171-8CF1-AE86032111BF">Overview of PL/SQL Units</a> for information about PL/SQL units
                           </p>
                        </li>
                        <li>
                           <p><a href="external-procedures.html#GUID-230B2B41-2A6F-4756-AEC0-DBC99DCA8A37">Developing Applications with Multiple Programming Languages</a> for information about external subprograms
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00807" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about overloaded subprograms
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS020" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about triggers
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS1398"></a><div class="props_rev_3"><a id="GUID-29768EA9-170A-4038-B6EB-9821E33E5DF6" name="GUID-29768EA9-170A-4038-B6EB-9821E33E5DF6"></a><h3 id="ADFNS-GUID-29768EA9-170A-4038-B6EB-9821E33E5DF6" class="sect3">Overview of PL/SQL Packages</h3>
               <div>
                  <p>A PL/SQL <span class="bold">package</span> is a schema object that groups logically related PL/SQL types, variables, constants, subprograms, cursors, and exceptions. A package is compiled and stored in the database, where many applications can share its contents..
                  </p>
                  <p>A package always has a <span class="bold">specification</span>, which declares the <span class="bold">public items</span> that can be referenced from outside the package. Public items can be used or invoked by external users who have the <code class="codeph">EXECUTE</code> privilege for the package or the <code class="codeph">EXECUTE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code> privilege.
                  </p>
                  <p>If the public items include cursors or subprograms, then the package must also have a <span class="bold">body</span>. The body must define queries for public cursors and code for public subprograms. The body can also declare and define <span class="bold">private items</span> that cannot be referenced from outside the package, but are necessary for the internal workings of the package. Finally, the body can have an <span class="bold">initialization part</span>, whose statements initialize variables and do other one-time setup steps, and an exception-handling part. You can change the body without changing the specification or the references to the public items; therefore, you can think of the package body as a black box.
                  </p>
                  <p>In either the package specification or package body, you can map a package subprogram to an external Java or C subprogram by using a <span class="bold">call specification</span>, which maps the external subprogram name, parameter types, and return type to their SQL counterparts.
                  </p>
                  <p>The <span class="bold"><code class="codeph">AUTHID</code></span> <span class="bold">clause</span> of the package specification determines whether the subprograms and cursors in the package run with the privileges of their definer (the default) or invoker, and whether their unqualified references to schema objects are resolved in the schema of the definer or invoker.
                  </p>
                  <p>The <span class="bold"><code class="codeph">ACCESSIBLE</code></span> <span class="bold"><code class="codeph">BY</code></span> <span class="bold">clause</span> of the package specification lets you specify a white list" of PL/SQL units that can access the package. You use this clause in situations like these:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You implement a PL/SQL application as several packages—one package that provides the application programming interface (API) and helper packages to do the work. You want clients to have access to the API, but not to the helper packages. Therefore, you omit the <code class="codeph">ACCESSIBLE</code> <code class="codeph">BY</code> clause from the API package specification and include it in each helper package specification, where you specify that only the API package can access the helper package.
                        </p>
                     </li>
                     <li>
                        <p>You create a utility package to provide services to some, but not all, PL/SQL units in the same schema. To restrict use of the package to the intended units, you list them in the <code class="codeph">ACCESSIBLE</code> <code class="codeph">BY</code> clause in the package specification.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-29768EA9-170A-4038-B6EB-9821E33E5DF6__GUID-4C6FD4FE-3584-417E-8588-2B41AF1CF7D9">
                     <p class="notep1">Note:</p>
                     <p>Before you create your own package, check <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS-GUID-4AA6AA30-CAEE-4DCD-B214-9AD51D0229B4" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to see if Oracle supplies a package with the functionality that you need.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-29768EA9-170A-4038-B6EB-9821E33E5DF6__GUID-88A6C13D-E7D9-4069-9EA3-D6B77680DEF0">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-DF29C489-E8F5-4171-8CF1-AE86032111BF">Overview of PL/SQL Units</a> for information about PL/SQL units
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS009" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for complete information about PL/SQL packages
                           </p>
                        </li>
                        <li>
                           <p><a href="../lnpls/plsql-packages.html#LNPLS00902" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for the reasons to use packages
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS00901"></a><div class="props_rev_3"><a id="GUID-DF29C489-E8F5-4171-8CF1-AE86032111BF" name="GUID-DF29C489-E8F5-4171-8CF1-AE86032111BF"></a><h3 id="ADFNS-GUID-DF29C489-E8F5-4171-8CF1-AE86032111BF" class="sect3">Overview of PL/SQL Units</h3>
               <div>
                  <p>A PL/SQL unit is one of these:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>PL/SQL anonymous block</p>
                     </li>
                     <li>
                        <p><code class="codeph">FUNCTION</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">LIBRARY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">PACKAGE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">PACKAGE</code> <code class="codeph">BODY</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">PROCEDURE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">TRIGGER</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">TYPE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">TYPE</code> <code class="codeph">BODY</code></p>
                     </li>
                  </ul>
                  <p>PL/SQL units are affected by PL/SQL compilation parameters (a category of database initialization parameters). Different PL/SQL units—for example, a package specification and its body—can have different compilation parameter settings.</p>
                  <p>The <code class="codeph">AUTHID</code> property of a PL/SQL unit affects the name resolution and privilege checking of SQL statements that the unit issues at runtime. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-DF29C489-E8F5-4171-8CF1-AE86032111BF__GUID-40E99704-3DE6-4F44-8F02-D20DEEBBCC86">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS0121" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about PL/SQL units and compilation parameters
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00809" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about <code class="codeph">AUTHID</code> property
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS1423"></a><a id="ADFNS1422"></a><div class="props_rev_3"><a id="GUID-146CA35F-6890-4AC2-AE17-209173853465" name="GUID-146CA35F-6890-4AC2-AE17-209173853465"></a><h4 id="ADFNS-GUID-146CA35F-6890-4AC2-AE17-209173853465" class="sect4">PLSQL_OPTIMIZE_LEVEL Compilation Parameter</h4>
                  <div>
                     <p>The PL/SQL optimize level determines how much the PL/SQL optimizer can rearrange code for better performance. This level is set with the compilation parameter <code class="codeph">PLSQL_OPTIMIZE_LEVEL</code> (whose default value is 2).
                     </p>
                     <p>To change the PL/SQL optimize level for your session, use the SQL command <code class="codeph">ALTER</code> <code class="codeph">SESSION</code>. Changing the level for your session affects only subsequently created PL/SQL units. To change the level for an existing PL/SQL unit, use an <code class="codeph">ALTER</code> command with the <code class="codeph">COMPILE</code> clause.
                     </p>
                     <p>To display the current value of <code class="codeph">PLSQL_OPTIMIZE_LEVEL</code> for one or more PL/SQL units, use the static data dictionary view <code class="codeph">ALL_PLSQL_OBJECT_SETTINGS</code>.
                     </p>
                     <p><a href="coding-subprograms-and-packages.html#GUID-146CA35F-6890-4AC2-AE17-209173853465__BABJGEAA">Example 13-1</a> creates two procedures, displays their optimize levels, changes the optimize level for the session, creates a third procedure, and displays the optimize levels of all three procedures. Only the third procedure has the new optimize level. Then the example changes the optimize level for only one procedure and displays the optimize levels of all three procedures again.
                     </p>
                     <div class="infoboxnotealso" id="GUID-146CA35F-6890-4AC2-AE17-209173853465__GUID-5125DA1A-47A4-4A37-B1EA-347B3A52F8A0">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS01201" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the PL/SQL optimizer
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN10255" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about <code class="codeph">PLSQL_OPTIMIZE_LEVEL</code></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00901" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about <code class="codeph">ALTER</code> <code class="codeph">SESSION</code></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99974" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <code class="codeph">ALTER</code> commands for PL/SQL units
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20385" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about <code class="codeph">ALL_PLSQL_OBJECT_SETTINGS</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-146CA35F-6890-4AC2-AE17-209173853465__BABJGEAA">
                        <p class="titleinexample">Example 13-1 Changing PLSQL_OPTIMIZE_LEVEL</p>
                        <p>Create two procedures:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE p1 AUTHID DEFINER AS
BEGIN
  NULL;
END;
/
CREATE OR REPLACE PROCEDURE p2 AUTHID DEFINER AS
BEGIN
  NULL;
END;
/
</pre><p>Display the optimization levels of the two procedures:</p><pre class="oac_no_warn" dir="ltr">SELECT NAME, PLSQL_OPTIMIZE_LEVEL
FROM USER_PLSQL_OBJECT_SETTINGS
WHERE NAME LIKE 'P%' AND TYPE='PROCEDURE'
ORDER BY NAME;
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">NAME                           PLSQL_OPTIMIZE_LEVEL
------------------------------ --------------------
P1                                                2
P2                                                2
 
2 rows selected.
</pre><p>Change the optimization level for the session and create a third procedure:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">ALTER SESSION SET PLSQL_OPTIMIZE_LEVEL=1;</span>
 
CREATE OR REPLACE PROCEDURE p3 AUTHID DEFINER AS
BEGIN
  NULL;
END;
/
 </pre><p>Display the optimization levels of the three procedures:</p><pre class="oac_no_warn" dir="ltr">SELECT NAME, PLSQL_OPTIMIZE_LEVEL
FROM USER_PLSQL_OBJECT_SETTINGS
WHERE NAME LIKE 'P%' AND TYPE='PROCEDURE'
ORDER BY NAME;
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">NAME                           PLSQL_OPTIMIZE_LEVEL
------------------------------ --------------------
P1                                                2
P2                                                2
P3                                                1
 
3 rows selected.
</pre><p>Change the optimization level of procedure <code class="codeph">p1</code> to 3:
                        </p><pre class="oac_no_warn" dir="ltr"><span class="bold">ALTER PROCEDURE p1 COMPILE PLSQL_OPTIMIZE_LEVEL=3;</span>
 </pre><p>Display the optimization levels of the three procedures:</p><pre class="oac_no_warn" dir="ltr">SELECT NAME, PLSQL_OPTIMIZE_LEVEL
FROM USER_PLSQL_OBJECT_SETTINGS
WHERE NAME LIKE 'P%' AND TYPE='PROCEDURE'
ORDER BY NAME;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">NAME                           PLSQL_OPTIMIZE_LEVEL
------------------------------ --------------------
P1                                                3
P2                                                2
P3                                                1
 
3 rows selected.</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADFNS312"></a><a id="ADFNS311"></a><div class="props_rev_3"><a id="GUID-C0141D00-57EA-4957-9270-CCA83EE82C95" name="GUID-C0141D00-57EA-4957-9270-CCA83EE82C95"></a><h3 id="ADFNS-GUID-C0141D00-57EA-4957-9270-CCA83EE82C95" class="sect3">Creating PL/SQL Subprograms and Packages</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-C0141D00-57EA-4957-9270-CCA83EE82C95__GUID-E304962F-327C-4A16-A927-6CE0A2B86959">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-E605F1D2-71F2-43A4-A20F-794AC9EAEDFD">Privileges Needed to Create Subprograms and Packages</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-50BE2CE8-D203-4540-A1B4-72B13B42910C">Creating Subprograms and Packages</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-BB9E57B9-5A98-4CCA-A886-E84044C41752">PL/SQL Object Size Limits</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-32CE5470-A170-454A-A3E5-1E3EF2D70F96">PL/SQL Data Types</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-02AD5C8B-C803-4A4A-AF0F-BE87AB66ADF2">Returning Result Sets to Clients</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-A6887963-BE8C-4407-B5E4-68746E31A166">Returning Large Amounts of Data from a Function</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-F9C263DB-7843-4CB8-B7D8-E409E38939A4">PL/SQL Function Result Cache</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-7C76F50E-2DF7-4D46-BAD1-A46FAFA9A65A">Overview of Bulk Binding</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-AA03D3E8-BCAB-4146-ABB2-3D727C21EA1E">PL/SQL Dynamic SQL</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS328"></a><div class="props_rev_3"><a id="GUID-E605F1D2-71F2-43A4-A20F-794AC9EAEDFD" name="GUID-E605F1D2-71F2-43A4-A20F-794AC9EAEDFD"></a><h4 id="ADFNS-GUID-E605F1D2-71F2-43A4-A20F-794AC9EAEDFD" class="sect4">Privileges Needed to Create Subprograms and Packages</h4>
                  <div>
                     <p>To create a standalone subprogram or package in your own schema, you must have the <code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code> system privilege. To create a standalone subprogram or package in another schema, you must have the <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code> system privilege.
                     </p>
                     <p>If the subprogram or package that you create references schema objects, then you must have the necessary object privileges for those objects. These privileges must be granted to you explicitly, not through roles.</p>
                     <p>If the privileges of the owner of a subprogram or package change, then the subprogram or package must be reauthenticated before it is run. If a necessary object privilege for a referenced object is revoked from the owner of the subprogram or package, then the subprogram cannot run.</p>
                     <p>Granting the <code class="codeph">EXECUTE</code> privilege on a subprogram lets users run that subprogram under the security domain of the subprogram owner, so that the user need not be granted privileges to the objects that the subprogram references. The <code class="codeph">EXECUTE</code> privilege allows more disciplined and efficient security strategies for database applications and their users. Furthermore, it allows subprograms and packages to be stored in the data dictionary (in the <code class="codeph">SYSTEM</code> tablespace), where no quota controls the amount of space available to a user who creates subprograms and packages.
                     </p>
                     <div class="infoboxnotealso" id="GUID-E605F1D2-71F2-43A4-A20F-794AC9EAEDFD__GUID-F9D240EC-0598-4346-945C-BDB9327B41E2">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about system and object privileges
                              </p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-C898484A-4592-44F6-875D-C83B30E1DDAA">Invoking Stored PL/SQL Subprograms</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS327"></a><div class="props_rev_3"><a id="GUID-50BE2CE8-D203-4540-A1B4-72B13B42910C" name="GUID-50BE2CE8-D203-4540-A1B4-72B13B42910C"></a><h4 id="ADFNS-GUID-50BE2CE8-D203-4540-A1B4-72B13B42910C" class="sect4">Creating Subprograms and Packages</h4>
                  <div>
                     <div class="section">
                        <p>This topic explains how to create standalone subprograms and packages, using SQL Data Definition Language (DDL) statements.</p>
                        <p>The DDL statements for creating standalone subprograms and packages are:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code> <code class="codeph">BODY</code></p>
                              <p>The name of a package and the names of its public objects must be unique within the package schema. The package specification and body must have the same name. Package constructs must have unique names within the scope of the package, except for overloaded subprograms.</p>
                           </li>
                        </ul>
                        <p>Each of the preceding <code class="codeph">CREATE</code> statements has an optional <code class="codeph">OR</code> <code class="codeph">REPLACE</code> clause. Specify <code class="codeph">OR</code> <code class="codeph">REPLACE</code> to re-create an existing PL/SQL unit—that is, to change its declaration or definition without dropping it, re-creating it, and regranting object privileges previously granted on it. If you redefine a PL/SQL unit, the database recompiles it.
                        </p>
                        <div class="infoboxnote" id="GUID-50BE2CE8-D203-4540-A1B4-72B13B42910C__GUID-9F6B43E3-B55B-4733-8CF4-93A30E1C0ED3">
                           <p class="notep1">Caution:</p>
                           <p>A <code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code> statement does not issue a warning before replacing the existing PL/SQL unit.
                           </p>
                        </div>
                        <p>Using any text editor, create a text file that contains DDL statements for creating any number of subprograms and packages.</p>
                        <p>To run the DDL statements, use an interactive tool such as SQL*Plus. The SQL*Plus command <code class="codeph">START</code> or @ runs a script. For example, this SQL*Plus command runs the script <code class="codeph">my_app.sql</code>:
                        </p><pre class="oac_no_warn" dir="ltr">@my_app
</pre><p>Alternatively, you can create and run the DDL statements using SQL Developer.</p>
                        <div class="infoboxnotealso" id="GUID-50BE2CE8-D203-4540-A1B4-72B13B42910C__GUID-AAF8AD03-FD1F-4AF9-A6E1-611B609AB622">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQPUG015" target="_blank"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for information about runnings scripts in SQL*Plus
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=RPTUG-GUID-464C045C-FBDF-417A-A20B-037D294B3BDA" target="_blank"><span><cite>Oracle SQL Developer User's Guide</cite></span></a> for information about SQL Developer
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS-GUID-2FBCFBBE-6B42-4DB8-83F3-55B63B75B1EB" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about the following functions
                                 </p>
                                 <div class="p">
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code> <code class="codeph">BODY</code></p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS336"></a><div class="props_rev_3"><a id="GUID-BB9E57B9-5A98-4CCA-A886-E84044C41752" name="GUID-BB9E57B9-5A98-4CCA-A886-E84044C41752"></a><h4 id="ADFNS-GUID-BB9E57B9-5A98-4CCA-A886-E84044C41752" class="sect4">PL/SQL Object Size Limits</h4>
                  <div>
                     <p>The size limit for PL/SQL stored database objects such as subprograms, triggers, and packages is the size of the Descriptive Intermediate Attributed Notation for Ada (DIANA) code in the shared pool in bytes. The Linux and UNIX limit on the size of the flattened DIANA/code size is 64K but the limit might be 32K on desktop platforms.</p>
                     <p>The most closely related number that a user can access is <code class="codeph">PARSED_SIZE</code>, a column in the static data dictionary view <code class="codeph">*_OBJECT_SIZE</code>. The column <code class="codeph">PARSED_SIZE</code> gives the size of the DIANA in bytes as stored in the <code class="codeph">SYS.IDL_xxx$</code> tables. This is not the size in the shared pool. The size of the DIANA part of PL/SQL code (used during compilation) is significantly larger in the shared pool than it is in the system table.
                     </p>
                     <div class="infoboxnotealso" id="GUID-BB9E57B9-5A98-4CCA-A886-E84044C41752__GUID-2DA71BE4-E7CD-4CA3-AB01-F1437988A4CF">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS018" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about PL/SQL program limits and <code class="codeph">PARSED_SIZE</code></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23143" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about <code class="codeph">*_OBJECT_SIZE</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS1345"></a><a id="ADFNS975"></a><div class="props_rev_3"><a id="GUID-32CE5470-A170-454A-A3E5-1E3EF2D70F96" name="GUID-32CE5470-A170-454A-A3E5-1E3EF2D70F96"></a><h4 id="ADFNS-GUID-32CE5470-A170-454A-A3E5-1E3EF2D70F96" class="sect4">PL/SQL Data Types</h4>
                  <div>
                     <p>This topic introduces the PL/SQL data types and refers to other chapters or documents for more information.</p>
                     <p>Use the correct and most specific PL/SQL data type for each PL/SQL variable in your database application.</p>
                     <div class="infoboxnotealso" id="GUID-32CE5470-A170-454A-A3E5-1E3EF2D70F96__NOTE-133-CA7FAAFA">
                        <p class="notep1">See Also:</p>
                        <p><a href="sql-data-types.html#GUID-868098E7-024A-452D-9CAC-011F364FFA33">Using the Correct and Most Specific Data Type</a></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-32CE5470-A170-454A-A3E5-1E3EF2D70F96__GUID-2BDD096B-6C18-416A-8A6E-502501A941B8">Topics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-CB5650E9-A386-477B-A49D-F30A10821F76">PL/SQL Scalar Data Types</a></p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-5ADF59C6-7B31-402B-916F-A17CBC43BA34">PL/SQL Composite Data Types</a></p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-5BDB686D-13C3-4691-8EC1-39356D07F314">Abstract Data Types</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS1208"></a><a id="ADFNS1104"></a><div class="props_rev_3"><a id="GUID-CB5650E9-A386-477B-A49D-F30A10821F76" name="GUID-CB5650E9-A386-477B-A49D-F30A10821F76"></a><h5 id="ADFNS-GUID-CB5650E9-A386-477B-A49D-F30A10821F76" class="sect5">PL/SQL Scalar Data Types</h5>
                     <div>
                        <p><span class="bold">Scalar data types</span> store values that have no internal components.
                        </p>
                        <p>A scalar data type can have subtypes. A <span class="bold">subtype</span> is a data type that is a subset of another data type, which is its <span class="bold">base type</span>. A subtype has the same valid operations as its base type. A data type and its subtypes comprise a <span class="bold">data type family</span>.
                        </p>
                        <p>PL/SQL predefines many types and subtypes in the package <code class="codeph">STANDARD</code> and lets you define your own subtypes.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-CB5650E9-A386-477B-A49D-F30A10821F76__GUID-BA22B303-EB19-492A-8A78-2856A2CDE6A9">Topics:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-0727699E-567B-4D41-8171-A587465B74FA">SQL Data Types</a></p>
                              </li>
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-85A8D1FE-A8AC-4200-94C1-0B44671A35F5">BOOLEAN Data Type</a></p>
                              </li>
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-3950315C-B55C-4BD0-ADA6-BBEF2184B4A6">PLS_INTEGER and BINARY_INTEGER Data Types</a></p>
                              </li>
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-C73CB1E0-15BE-449E-866E-7879D3699A7D">REF CURSOR Data Type</a></p>
                              </li>
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-A95F2E40-8D7D-489C-91CA-B4E8A647CF25">User-Defined PL/SQL Subtypes</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-CB5650E9-A386-477B-A49D-F30A10821F76__GUID-17B712DE-456E-4F0C-8F5F-7F8831163757">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS003" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for a complete description of scalar PL/SQL data types
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS2163" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for the predefined PL/SQL data types and subtypes, grouped by data type family
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS987"></a><a id="ADFNS1209"></a><a id="ADFNS0002"></a><div class="props_rev_3"><a id="GUID-0727699E-567B-4D41-8171-A587465B74FA" name="GUID-0727699E-567B-4D41-8171-A587465B74FA"></a><h6 id="ADFNS-GUID-0727699E-567B-4D41-8171-A587465B74FA" class="sect6">SQL Data Types</h6>
                        <div>
                           <p>The PL/SQL data types include the SQL data types.</p>
                           <div class="infoboxnotealso" id="GUID-0727699E-567B-4D41-8171-A587465B74FA__NOTE-123-CA802033">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="sql-data-types.html#GUID-9EC05CBD-6D83-436F-B532-556DFD5FC4F2">Using SQL Data Types in Database Applications</a> for information about how to use the SQL data types in database applications
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS286" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about SQL data types
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div><a id="ADFNS1210"></a><div class="props_rev_3"><a id="GUID-85A8D1FE-A8AC-4200-94C1-0B44671A35F5" name="GUID-85A8D1FE-A8AC-4200-94C1-0B44671A35F5"></a><h6 id="ADFNS-GUID-85A8D1FE-A8AC-4200-94C1-0B44671A35F5" class="sect6">BOOLEAN Data Type</h6>
                        <div>
                           <p>The <code class="codeph">BOOLEAN</code> data type stores <span class="bold">logical values</span>, which are the Boolean values <code class="codeph">TRUE</code> and <code class="codeph">FALSE</code> and the value <code class="codeph">NULL</code>. <code class="codeph">NULL</code> represents an unknown value. 
                           </p>
                           <div class="infoboxnotealso" id="GUID-85A8D1FE-A8AC-4200-94C1-0B44671A35F5__NOTE-132-CA80E81C">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS348" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about the <code class="codeph">BOOLEAN</code> data type
                              </p>
                           </div>
                        </div>
                     </div><a id="ADFNS1211"></a><div class="props_rev_3"><a id="GUID-3950315C-B55C-4BD0-ADA6-BBEF2184B4A6" name="GUID-3950315C-B55C-4BD0-ADA6-BBEF2184B4A6"></a><h6 id="ADFNS-GUID-3950315C-B55C-4BD0-ADA6-BBEF2184B4A6" class="sect6">PLS_INTEGER and BINARY_INTEGER Data Types</h6>
                        <div>
                           <p>The PL/SQL data types <code class="codeph">PLS_INTEGER</code> and <code class="codeph">BINARY_INTEGER</code> are identical. For simplicity, this guide uses <code class="codeph">PLS_INTEGER</code> to mean both <code class="codeph">PLS_INTEGER</code> and <code class="codeph">BINARY_INTEGER</code>.
                           </p>
                           <p>The <code class="codeph">PLS_INTEGER</code> data type stores signed integers in the range -2,147,483,648 through 2,147,483,647, represented in 32 bits.
                           </p>
                           <p>The <code class="codeph">PLS_INTEGER</code> data type has these advantages over the <code class="codeph">NUMBER</code> data type and <code class="codeph">NUMBER</code> subtypes:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">PLS_INTEGER</code> values require less storage.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PLS_INTEGER</code> operations use hardware arithmetic, so they are faster than <code class="codeph">NUMBER</code> operations, which use library arithmetic.
                                 </p>
                              </li>
                           </ul>
                           <p>For efficiency, use <code class="codeph">PLS_INTEGER</code> values for all calculations in its range.
                           </p>
                           <div class="infoboxnotealso" id="GUID-3950315C-B55C-4BD0-ADA6-BBEF2184B4A6__NOTE-136-CA817609">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS319" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about the <code class="codeph">PLS_INTEGER</code> data type
                              </p>
                           </div>
                        </div>
                     </div><a id="ADFNS1316"></a><div class="props_rev_3"><a id="GUID-C73CB1E0-15BE-449E-866E-7879D3699A7D" name="GUID-C73CB1E0-15BE-449E-866E-7879D3699A7D"></a><h6 id="ADFNS-GUID-C73CB1E0-15BE-449E-866E-7879D3699A7D" class="sect6">REF CURSOR Data Type</h6>
                        <div>
                           <p><code class="codeph">REF</code> <code class="codeph">CURSOR</code> is the data type of a cursor variable.
                           </p>
                           <p>A <span class="bold">cursor variable</span> is like an explicit cursor, except that:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>It is not limited to one query.</p>
                                 <p>You can open a cursor variable for a query, process the result set, and then use the cursor variable for another query.</p>
                              </li>
                              <li>
                                 <p>You can assign a value to it.</p>
                              </li>
                              <li>
                                 <p>You can use it in an expression.</p>
                              </li>
                              <li>
                                 <p>It can be a subprogram parameter.</p>
                                 <p>You can use cursor variables to pass query result sets between subprograms.</p>
                              </li>
                              <li>
                                 <p>It can be a host variable.</p>
                                 <p>You can use cursor variables to pass query result sets between PL/SQL stored subprograms and their clients.</p>
                              </li>
                              <li>
                                 <p>It cannot accept parameters.</p>
                                 <p>You cannot pass parameters to a cursor variable, but you can pass whole queries to it.</p>
                              </li>
                           </ul>
                           <p>A cursor variable has this flexibility because it is a pointer; that is, its value is the address of an item, not the item itself.</p>
                           <div class="infoboxnotealso" id="GUID-C73CB1E0-15BE-449E-866E-7879D3699A7D__NOTE-135-CA819974">
                              <p class="notep1">See Also:</p>
                              <p><a href="../lnpls/static-sql.html#LNPLS00605" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about the <code class="codeph">REF</code> <code class="codeph">CURSOR</code> data type and cursor variables
                              </p>
                           </div>
                        </div>
                     </div><a id="ADFNS1317"></a><div class="props_rev_3"><a id="GUID-A95F2E40-8D7D-489C-91CA-B4E8A647CF25" name="GUID-A95F2E40-8D7D-489C-91CA-B4E8A647CF25"></a><h6 id="ADFNS-GUID-A95F2E40-8D7D-489C-91CA-B4E8A647CF25" class="sect6">User-Defined PL/SQL Subtypes</h6>
                        <div>
                           <p>PL/SQL lets you define your own subtypes. The base type can be any scalar PL/SQL type, including a previously defined user-defined subtype.</p>
                           <p>Subtypes can:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Provide compatibility with ANSI/ISO data types</p>
                              </li>
                              <li>
                                 <p>Show the intended use of data items of that type</p>
                              </li>
                              <li>
                                 <p>Detect out-of-range values</p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-A95F2E40-8D7D-489C-91CA-B4E8A647CF25__NOTE-134-CA81C96E">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99935" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about user-defined PL/SQL subtypes
                              </p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ADFNS1318"></a><div class="props_rev_3"><a id="GUID-5ADF59C6-7B31-402B-916F-A17CBC43BA34" name="GUID-5ADF59C6-7B31-402B-916F-A17CBC43BA34"></a><h5 id="ADFNS-GUID-5ADF59C6-7B31-402B-916F-A17CBC43BA34" class="sect5">PL/SQL Composite Data Types</h5>
                     <div>
                        <p><span class="bold">Composite data types</span> have internal components. The PL/SQL composite data types are collections and records.
                        </p>
                        <p>In a <span class="bold">collection</span>, the internal components always have the same data type, and are called <span class="bold">elements</span>. You can access each element of a collection variable by its unique index. PL/SQL has three collection types—associative array, <code class="codeph">VARRAY</code> (variable-size array), and nested table.
                        </p>
                        <p>In a <span class="bold">record</span>, the internal components can have different data types, and are called <span class="bold">fields</span>. You can access each field of a record variable by its name.
                        </p>
                        <p>You can create a collection of records, and a record that contains collections.</p>
                        <div class="infoboxnotealso" id="GUID-5ADF59C6-7B31-402B-916F-A17CBC43BA34__NOTE-135-CA8252A4">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS005" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about PL/SQL composite data types
                           </p>
                        </div>
                     </div>
                  </div><a id="ADFNS1323"></a><div class="props_rev_3"><a id="GUID-5BDB686D-13C3-4691-8EC1-39356D07F314" name="GUID-5BDB686D-13C3-4691-8EC1-39356D07F314"></a><h5 id="ADFNS-GUID-5BDB686D-13C3-4691-8EC1-39356D07F314" class="sect5">Abstract Data Types</h5>
                     <div>
                        <p>An Abstract Data Type (ADT) consists of a data structure and subprograms that manipulate the data. In the static data dictionary view <code class="codeph">*_OBJECTS</code>, the <code class="codeph">OBJECT_TYPE</code> of an ADT is <code class="codeph">TYPE</code>. In the static data dictionary view <code class="codeph">*_TYPES</code>, the <code class="codeph">TYPECODE</code> of an ADT is <code class="codeph">OBJECT</code>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-5BDB686D-13C3-4691-8EC1-39356D07F314__FORMOREINFORMATIONABOUTADTSSEEORACL-CA832B17">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS163" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about ADTs
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADFNS1034"></a><a id="ADFNS00903"></a><div class="props_rev_3"><a id="GUID-02AD5C8B-C803-4A4A-AF0F-BE87AB66ADF2" name="GUID-02AD5C8B-C803-4A4A-AF0F-BE87AB66ADF2"></a><h4 id="ADFNS-GUID-02AD5C8B-C803-4A4A-AF0F-BE87AB66ADF2" class="sect4">Returning Result Sets to Clients</h4>
                  <div>
                     <div class="section">
                        <p>In PL/SQL, as in traditional database programming, you use cursors to process query result sets. A <span class="bold">cursor</span> is a pointer to a private SQL area that stores information about processing a specific <code class="codeph">SELECT</code> or DML statement.
                        </p>
                        <div class="infoboxnote" id="GUID-02AD5C8B-C803-4A4A-AF0F-BE87AB66ADF2__GUID-FCFAFDFC-CBEC-4CA1-85AF-80EF46CDEBE7">
                           <p class="notep1">Note:</p>
                           <p>The cursors that this section discusses are session cursors. A <span class="bold">session cursor</span> lives in session memory until the session ends, when it ceases to exist. Session cursors are different from the cursors in the private SQL area of the program global area (PGA).
                           </p>
                        </div>
                        <p>A cursor that is constructed and managed by PL/SQL is an <span class="bold">implicit cursor</span>. A cursor that you construct and manage is an <span class="bold">explicit cursor</span>. The only advantage of an explicit cursor over an implicit cursor is that with an explicit cursor, you can limit the number of fetched rows.
                        </p>
                        <p>A <span class="bold">cursor variable</span> is a pointer to a cursor. That is, its value is the address of a cursor, not the cursor itself. Therefore, a cursor variable has more flexibility than an explicit cursor. However, a cursor variable also has costs that an explicit cursor does not.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-02AD5C8B-C803-4A4A-AF0F-BE87AB66ADF2__GUID-B1A28F23-A99A-4854-9B56-66845FD28CFA">Topics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-AF17F2B9-0A52-45F1-AC79-D2D7B90D240A">Advantages of Cursor Variables</a></p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-DC5BA056-14C7-45B1-A145-091618CEDA56">Disadvantages of Cursor Variables</a></p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-0C7A9F09-7626-4EB2-948C-14BF002803EB">Returning Query Results Implicitly</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-02AD5C8B-C803-4A4A-AF0F-BE87AB66ADF2__GUID-1301F66C-6EF9-4368-BB83-743FCF96281D">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00605" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for general information about cursor variables, and query set result processing with implicit and explicit cursors
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00602" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about how to limit the number of rows and the collection size in bulk collect statements
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI16367" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for information about using cursor variables in OCI
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPCC3218" target="_blank"><span class="italic">Pro*C/C++ Programmer's Guide</span></a> for information about using cursor variables in Pro*C/C++
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPCB371" target="_blank"><span class="italic">Pro*COBOL Programmer's Guide</span></a> for information about using cursor variables in Pro*COBOL
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC28151" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for information about using cursor variables in JDBC
                                 </p>
                              </li>
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-A6887963-BE8C-4407-B5E4-68746E31A166">Returning Large Amounts of Data from a Function</a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1239" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about PGA
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS159"></a><div class="props_rev_3"><a id="GUID-AF17F2B9-0A52-45F1-AC79-D2D7B90D240A" name="GUID-AF17F2B9-0A52-45F1-AC79-D2D7B90D240A"></a><h5 id="ADFNS-GUID-AF17F2B9-0A52-45F1-AC79-D2D7B90D240A" class="sect5">Advantages of Cursor Variables</h5>
                     <div>
                        <p>A cursor variable is like an explicit cursor except that:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>It is not limited to one query.</p>
                              <p>You can open a cursor variable for a query, process the result set, and then use the cursor variable for another query.</p>
                           </li>
                           <li>
                              <p>You can assign a value to it.</p>
                           </li>
                           <li>
                              <p>You can use it in an expression.</p>
                           </li>
                           <li>
                              <p>It can be a subprogram parameter.</p>
                              <p>You can use cursor variables to pass query result sets between subprograms.</p>
                           </li>
                           <li>
                              <p>It can be a host variable.</p>
                              <p>You can use cursor variables to pass query result sets between PL/SQL stored subprograms and their clients.</p>
                           </li>
                           <li>
                              <p>It cannot accept parameters.</p>
                              <p>You cannot pass parameters to a cursor variable, but you can pass whole queries to it. The queries can include variables.</p>
                           </li>
                        </ul>
                        <p>The preceding characteristics give cursor variables these advantages:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Encapsulation</p>
                              <p>Queries are centralized in the stored subprogram that opens the cursor variable.</p>
                           </li>
                           <li>
                              <p>Easy maintenance</p>
                              <p>If you must change the cursor, then you must change only the stored subprogram, not every application that invokes the stored subprogram.</p>
                           </li>
                           <li>
                              <p>Convenient security</p>
                              <p>The application connects to the server with the user name of the application user. The application user must have <code class="codeph">EXECUTE</code> permission on the stored subprogram that opens the cursor, but need not have <code class="codeph">READ</code> permission on the queried tables.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADFNS176"></a><a id="ADFNS160"></a><div class="props_rev_3"><a id="GUID-DC5BA056-14C7-45B1-A145-091618CEDA56" name="GUID-DC5BA056-14C7-45B1-A145-091618CEDA56"></a><h5 id="ADFNS-GUID-DC5BA056-14C7-45B1-A145-091618CEDA56" class="sect5">Disadvantages of Cursor Variables</h5>
                     <div>
                        <p>If you need not use a cursor variable, then use an implicit or explicit cursor, for both better performance and ease of programming.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-DC5BA056-14C7-45B1-A145-091618CEDA56__GUID-C430C599-2DC4-4FD5-A556-83238D1C7E56">Topics:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-18ADFDA2-10D5-4AEB-9BB6-BBB2C37092C7">Parsing Penalty for Cursor Variable</a></p>
                              </li>
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-DCCFD17D-2086-4F08-A1DF-4632DBACA3B7">Multiple-Row-Fetching Penalty for Cursor Variable</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-DC5BA056-14C7-45B1-A145-091618CEDA56__GUID-81B8BB9E-0F26-4284-986E-7E6083072E0A">
                              <p class="notep1">Note:</p>
                              <p> The examples in these topics include <code class="codeph">TKPROF</code> reports.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-DC5BA056-14C7-45B1-A145-091618CEDA56__NOTE-1333-CAB82171">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGSQL809" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for instructions for producing <code class="codeph">TKPROF</code> reports
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS178"></a><a id="ADFNS177"></a><div class="props_rev_3"><a id="GUID-18ADFDA2-10D5-4AEB-9BB6-BBB2C37092C7" name="GUID-18ADFDA2-10D5-4AEB-9BB6-BBB2C37092C7"></a><h6 id="ADFNS-GUID-18ADFDA2-10D5-4AEB-9BB6-BBB2C37092C7" class="sect6">Parsing Penalty for Cursor Variable</h6>
                        <div>
                           <p>When you close an explicit cursor, the cursor closes from your perspective—that is, you cannot use it where an open cursor is required—but PL/SQL caches the explicit cursor in an open state. If you reexecute the statement associated with the cursor, then PL/SQL uses the cached cursor, thereby avoiding a parse.</p>
                           <p>Avoiding a parse can significantly reduce CPU use, and the caching of explicit cursors is transparent to you; it does not affect your programming. PL/SQL does not reduce your supply of available open cursors. If your program must open another cursor but doing so would exceed the init.ora setting of <code class="codeph">OPEN_CURSORS</code>, then PL/SQL closes cached cursors.
                           </p>
                           <p>PL/SQL cannot cache a cursor variable in an open state. Therefore, a cursor variable has a parsing penalty.</p>
                           <p>In <a href="coding-subprograms-and-packages.html#GUID-18ADFDA2-10D5-4AEB-9BB6-BBB2C37092C7__BABJIJBE">Example 13-2</a>, the procedure opens, fetches from, and closes an explicit cursor and then does the same with a cursor variable. The anonymous block calls the procedure 10 times. The <code class="codeph">TKPROF</code> report shows that both queries were run 10 times, but the query associated with the explicit cursor was parsed only once, while the query associated with the cursor variable was parsed 10 times.
                           </p>
                           <div class="example" id="GUID-18ADFDA2-10D5-4AEB-9BB6-BBB2C37092C7__BABJIJBE">
                              <p class="titleinexample">Example 13-2 Parsing Penalty for Cursor Variable</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE p AUTHID DEFINER IS
  CURSOR e_c IS <span class="bold">SELECT * FROM DUAL d1</span>;  -- <span class="bold">explicit cursor</span>
  c_v SYS_REFCURSOR;                    -- <span class="bold">cursor variable</span>
  rec DUAL%ROWTYPE;
BEGIN
  OPEN e_c;                             -- <span class="bold">explicit cursor</span>
  FETCH e_c INTO rec;
  CLOSE e_c;

  OPEN c_v FOR <span class="bold">SELECT * FROM DUAL d2</span>;   -- <span class="bold">cursor variable</span>
  FETCH c_v INTO rec;
  CLOSE c_v;
END;
/
BEGIN
  FOR i IN 1..10 LOOP                   -- execute p 10 times
     p;
  END LOOP;
</pre><p><code class="codeph">TKPROF</code> report is similar to:
                              </p><pre class="oac_no_warn" dir="ltr"><span class="bold">SELECT * FROM DUAL D1;</span>
 
call     count
------- ------
<span class="bold">Parse</span>        <span class="bold">1</span>
Execute     10
Fetch       10
------- ------
total       <span class="bold">21</span>
****************
<span class="bold">SELECT * FROM DUAL D2;</span>
 
 
call     count
------- ------
<span class="bold">Parse</span>       <span class="bold">10</span>
Execute     10
Fetch       10
------- ------
total       <span class="bold">30</span></pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="ADFNS217"></a><a id="ADFNS215"></a><div class="props_rev_3"><a id="GUID-DCCFD17D-2086-4F08-A1DF-4632DBACA3B7" name="GUID-DCCFD17D-2086-4F08-A1DF-4632DBACA3B7"></a><h6 id="ADFNS-GUID-DCCFD17D-2086-4F08-A1DF-4632DBACA3B7" class="sect6">Multiple-Row-Fetching Penalty for Cursor Variable</h6>
                        <div>
                           <p><a href="coding-subprograms-and-packages.html#GUID-DCCFD17D-2086-4F08-A1DF-4632DBACA3B7__BABEBAJF">Example 13-3</a> creates a table that has more than 7,000 rows and fetches all of those rows twice, first with an implicit cursor (fetching arrays) and then with a cursor variable (fetching individual rows). The code for the implicit cursor is simpler than the code for the cursor variable, and the <code class="codeph">TKPROF</code> report shows that it also performs better.
                           </p>
                           <p>Although you could use the cursor variable to fetch arrays, you would need much more code. Specifically, you would need code to do the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Define the types of the collections into which you will fetch the arrays</p>
                              </li>
                              <li>
                                 <p>Explicitly bulk collect into the collections</p>
                              </li>
                              <li>
                                 <p>Loop through the collections to process the fetched data</p>
                              </li>
                              <li>
                                 <p>Close the explicitly opened cursor variable</p>
                              </li>
                           </ul>
                           <div class="example" id="GUID-DCCFD17D-2086-4F08-A1DF-4632DBACA3B7__BABEBAJF">
                              <p class="titleinexample">Example 13-3 Array Fetching Penalty for Cursor Variable</p>
                              <p>Create table to query and display its number of rows:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t AS
  SELECT * FROM ALL_OBJECTS;
 
SELECT COUNT(*) FROM t;
 </pre><p>Result is similar to:</p><pre class="oac_no_warn" dir="ltr">  COUNT(*)
----------
     70788
</pre><p>Perform equivalent operations with an implicit cursor and a cursor variable:</p><pre class="oac_no_warn" dir="ltr">DECLARE
  c_v SYS_REFCURSOR;
  rec t%ROWTYPE;
BEGIN
  FOR x IN (<span class="bold">SELECT * FROM t exp_cur</span>) LOOP  -- <span class="bold">implicit cursor</span>
    NULL;
  END LOOP;
 
  OPEN c_v FOR <span class="bold">SELECT * FROM t cur_var</span>;    -- <span class="bold">cursor variable</span>
 
  LOOP
    FETCH c_v INTO rec;
    EXIT WHEN c_v%NOTFOUND;
  END LOOP;
 
  CLOSE c_v;
END;
/
</pre><p><code class="codeph">TKPROF</code> report is similar to:
                              </p><pre class="oac_no_warn" dir="ltr"><span class="bold">SELECT * FROM T EXP_CUR</span>

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.00       0.00          0          0          0           0
Execute      1      0.00       0.00          0          0          0           0
<span class="bold">Fetch      722</span>      0.23       0.23          0       <span class="bold">1748</span>          0       <span class="bold">72198</span>
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total      724      0.23       0.23          0       1748          0       72198
********************************************************************************
<span class="bold">SELECT * FROM T CUR_VAR</span>

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.00       0.00          0          0          0           0
Execute      1      0.00       0.00          0          0          0           0
<span class="bold">Fetch    72199</span>      0.40       0.42          0      <span class="bold">72203</span>          0       <span class="bold">72198</span>
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total    72201      0.40       0.42          0      72203          0       72198</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div><a id="ADFNS1035"></a><div class="props_rev_3"><a id="GUID-0C7A9F09-7626-4EB2-948C-14BF002803EB" name="GUID-0C7A9F09-7626-4EB2-948C-14BF002803EB"></a><h5 id="ADFNS-GUID-0C7A9F09-7626-4EB2-948C-14BF002803EB" class="sect5">Returning Query Results Implicitly</h5>
                     <div>
                        <div class="section">
                           <p>A stored subprogram can return a query result implicitly to either the client program or the subprogram's immediate caller by invoking the <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> procedure. After <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> returns the result, only the recipient can access it.
                           </p>
                           <div class="infoboxnote" id="GUID-0C7A9F09-7626-4EB2-948C-14BF002803EB__GUID-19E1938F-37CA-47C4-87A0-519F710403B0">
                              <p class="notep1">Note:</p>
                              <p>To return implicitly the result of a query executed with dynamic SQL, the subprogram must execute the query with <code class="codeph">DBMS_SQL</code> procedures, not the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement. The reason is that the cursors that the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement returns to the subprogram are closed when the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement completes. 
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-0C7A9F09-7626-4EB2-948C-14BF002803EB__NOTE-1314-CAB834F0">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS2174" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about <code class="codeph">DBMS_SQL</code>.<code class="codeph">RETURN_RESULT</code> procedure
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS01108" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about using <code class="codeph">DBMS_SQL</code> procedures for dynamic SQL
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADFNS00909"></a><div class="props_rev_3"><a id="GUID-A6887963-BE8C-4407-B5E4-68746E31A166" name="GUID-A6887963-BE8C-4407-B5E4-68746E31A166"></a><h4 id="ADFNS-GUID-A6887963-BE8C-4407-B5E4-68746E31A166" class="sect4">Returning Large Amounts of Data from a Function</h4>
                  <div>
                     <div class="section">
                        <p>In a data warehousing environment, you might use PL/SQL functions to transform large amounts of data. You might pass the data through a series of transformations, each performed by a different function. PL/SQL table functions let you perform such transformations without significant memory overhead or the need to store the data in tables between each transformation stage. These functions can accept and return multiple rows, can return rows as they are ready rather than all at once, and can be parallelized.</p>
                        <div class="infoboxnotealso" id="GUID-A6887963-BE8C-4407-B5E4-68746E31A166__GUID-49F58F21-0A6D-4B68-AACE-910961D23D9E">
                           <p class="notep1">See Also:</p>
                           <p><a href="../lnpls/plsql-optimization-and-tuning.html#LNPLS01210" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about performing multiple transformations with pipelined table functions
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS333"></a><div class="props_rev_3"><a id="GUID-F9C263DB-7843-4CB8-B7D8-E409E38939A4" name="GUID-F9C263DB-7843-4CB8-B7D8-E409E38939A4"></a><h4 id="ADFNS-GUID-F9C263DB-7843-4CB8-B7D8-E409E38939A4" class="sect4">PL/SQL Function Result Cache</h4>
                  <div>
                     <p>Using the PL/SQL function result cache can save significant space and time. Each time a result-cached PL/SQL function is invoked with different parameter values, those parameters and their result are stored in the cache. Subsequently, when the same function is invoked with the same parameter values, the result is retrieved from the cache, instead of being recomputed. Because the cache is stored in a shared global area (SGA), it is available to any session that runs your application.</p>
                     <p>If a database object that was used to compute a cached result is updated, the cached result becomes invalid and must be recomputed.</p>
                     <p>The best candidates for result-caching are functions that are invoked frequently but depend on information that changes infrequently or never.</p>
                     <div class="infoboxnotealso" id="GUID-F9C263DB-7843-4CB8-B7D8-E409E38939A4__NOTE-134-CAB88EBF">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00817" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about the PL/SQL function result cache
                        </p>
                     </div>
                  </div>
               </div><a id="ADFNS1055"></a><a id="ADFNS343"></a><div class="props_rev_3"><a id="GUID-7C76F50E-2DF7-4D46-BAD1-A46FAFA9A65A" name="GUID-7C76F50E-2DF7-4D46-BAD1-A46FAFA9A65A"></a><h4 id="ADFNS-GUID-7C76F50E-2DF7-4D46-BAD1-A46FAFA9A65A" class="sect4">Overview of Bulk Binding</h4>
                  <div>
                     <p>Oracle Database uses two engines to run PL/SQL units. The PL/SQL engine runs the procedural statements and the SQL engine runs the SQL statements. Every SQL statement causes a context switch between the two engines. You can greatly improve the performance of your database application by minimizing the number of context switches for each PL/SQL unit.</p>
                     <p>When a SQL statement runs inside a loop that uses collection elements as bind variables, the large number of context switches required can cause poor performance. Collections include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Associative arrays</p>
                        </li>
                        <li>
                           <p>Variable-size arrays</p>
                        </li>
                        <li>
                           <p>Nested tables</p>
                        </li>
                        <li>
                           <p>Host arrays</p>
                        </li>
                     </ul>
                     <p><strong class="term">Binding</strong> is the assignment of values to PL/SQL variables in SQL statements. <strong class="term">Bulk binding</strong> is binding an entire collection at once. Bulk binds pass the entire collection between the two engines in a single operation.
                     </p>
                     <p>Typically, bulk binding improves performance for SQL statements that affect four or more database rows. The more rows affected by a SQL statement, the greater the performance gain from bulk binding. Consider using bulk binding to improve the performance of DML and <code class="codeph">SELECT</code> <code class="codeph">INTO</code> statements that reference collections and <code class="codeph">FOR</code> loops that reference collections and return DML.
                     </p>
                     <div class="infoboxnote" id="GUID-7C76F50E-2DF7-4D46-BAD1-A46FAFA9A65A__GUID-E1BF2E17-7B29-4EC4-B55B-9E2E32B8E096">
                        <p class="notep1">Note:</p>
                        <p>Parallel DML statements are disabled with bulk binding.</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-7C76F50E-2DF7-4D46-BAD1-A46FAFA9A65A__GUID-9E9EC32D-13DB-4555-998D-CF3694BC8A34">Topics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-BA80F211-00AB-4238-8E1B-42DEDCE8F9F0">DML Statements that Reference Collections</a></p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-49868DBC-12CF-4AC7-96A0-EC91AEA55074">SELECT Statements that Reference Collections</a></p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-36285186-64C9-4074-AF2D-0884D3B8DC49">FOR Loops that Reference Collections and Return DML</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-7C76F50E-2DF7-4D46-BAD1-A46FAFA9A65A__GUID-1BE08EE1-1324-4D02-958D-75EE42FECF05">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS01205" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about bulk binding, including how to handle exceptions that occur during bulk binding operations
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS930" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about parallel DML statements
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS346"></a><a id="ADFNS345"></a><div class="props_rev_3"><a id="GUID-BA80F211-00AB-4238-8E1B-42DEDCE8F9F0" name="GUID-BA80F211-00AB-4238-8E1B-42DEDCE8F9F0"></a><h5 id="ADFNS-GUID-BA80F211-00AB-4238-8E1B-42DEDCE8F9F0" class="sect5">DML Statements that Reference Collections</h5>
                     <div>
                        <p>A bulk bind, which uses the <code class="codeph">FORALL</code> keyword, can improve the performance of <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> statements that reference collection elements.
                        </p>
                        <p>The PL/SQL block in <a href="coding-subprograms-and-packages.html#GUID-BA80F211-00AB-4238-8E1B-42DEDCE8F9F0__BABDJIJG">Example 13-4</a> increases the salary for employees whose manager's ID number is 7902, 7698, or 7839, with and without bulk binds. Without bulk bind, PL/SQL sends a SQL statement to the SQL engine for each updated employee, leading to context switches that slow performance.
                        </p>
                        <div class="infoboxnotealso" id="GUID-BA80F211-00AB-4238-8E1B-42DEDCE8F9F0__GUID-73CF69B3-3FD7-4D95-90B3-105A578FA8FF">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS879" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about the <code class="codeph">FORALL</code> statement
                           </p>
                        </div>
                        <div class="example" id="GUID-BA80F211-00AB-4238-8E1B-42DEDCE8F9F0__BABDJIJG">
                           <p class="titleinexample">Example 13-4 DML Statements that Reference Collections</p><pre class="oac_no_warn" dir="ltr">DECLARE
  TYPE numlist IS VARRAY (100) OF NUMBER;
  id NUMLIST := NUMLIST(7902, 7698, 7839);
BEGIN
  <span class="bold">-- Efficient method, using bulk bind:</span>
  
  <span class="bold">FORALL</span> i IN id.FIRST..id.LAST
  UPDATE EMPLOYEES
  SET SALARY = 1.1 * SALARY
  WHERE MANAGER_ID = id(i);
 
 <span class="bold">-- Slower method:</span>
 
 <span class="bold">FOR</span> i IN id.FIRST..id.LAST <span class="bold">LOOP</span>
    UPDATE EMPLOYEES
    SET SALARY = 1.1 * SALARY
    WHERE MANAGER_ID = id(i);
 <span class="bold">END LOOP;</span>
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADFNS348"></a><a id="ADFNS347"></a><div class="props_rev_3"><a id="GUID-49868DBC-12CF-4AC7-96A0-EC91AEA55074" name="GUID-49868DBC-12CF-4AC7-96A0-EC91AEA55074"></a><h5 id="ADFNS-GUID-49868DBC-12CF-4AC7-96A0-EC91AEA55074" class="sect5">SELECT Statements that Reference Collections</h5>
                     <div>
                        <p>The <code class="codeph">BULK</code> <code class="codeph">COLLECT</code> clause can improve the performance of queries that reference collections. You can use <code class="codeph">BULK</code> <code class="codeph">COLLECT</code> with tables of scalar values, or tables of <code class="codeph">%TYPE</code> values.
                        </p>
                        <div class="infoboxnotealso" id="GUID-49868DBC-12CF-4AC7-96A0-EC91AEA55074__GUID-48FDFD48-0337-4C4F-BBD4-592FE478CD6B">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS891" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about the <code class="codeph">BULK</code> <code class="codeph">COLLECT</code> clause
                           </p>
                        </div>
                        <p>The PL/SQL block in <a href="coding-subprograms-and-packages.html#GUID-49868DBC-12CF-4AC7-96A0-EC91AEA55074__BABGEDJB">Example 13-5</a> queries multiple values into PL/SQL tables, with and without bulk binds. Without bulk bind, PL/SQL sends a SQL statement to the SQL engine for each selected employee, leading to context switches that slow performance.
                        </p>
                        <div class="example" id="GUID-49868DBC-12CF-4AC7-96A0-EC91AEA55074__BABGEDJB">
                           <p class="titleinexample">Example 13-5 SELECT Statements that Reference Collections</p><pre class="oac_no_warn" dir="ltr">DECLARE
  TYPE var_tab IS TABLE OF VARCHAR2(20)
  INDEX BY PLS_INTEGER;
  
  empno    VAR_TAB;
  ename    VAR_TAB;
  counter  NUMBER;
  
  CURSOR c IS
    SELECT EMPLOYEE_ID, LAST_NAME
    FROM EMPLOYEES
    WHERE MANAGER_ID = 7698;
BEGIN
 <span class="bold">-- Efficient method, using bulk bind:</span>
 
 SELECT EMPLOYEE_ID, LAST_NAME <span class="bold">BULK COLLECT</span>
 INTO empno, ename
 FROM EMPLOYEES
 WHERE MANAGER_ID = 7698;
 
 <span class="bold">-- Slower method:</span>
 
 counter := 1;
 
 <span class="bold">FOR</span> rec IN c <span class="bold">LOOP</span>
    empno(counter) := rec.EMPLOYEE_ID;
    ename(counter) := rec.LAST_NAME;
    counter := counter + 1;
 <span class="bold">END LOOP;</span>
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADFNS350"></a><a id="ADFNS99880"></a><div class="props_rev_3"><a id="GUID-36285186-64C9-4074-AF2D-0884D3B8DC49" name="GUID-36285186-64C9-4074-AF2D-0884D3B8DC49"></a><h5 id="ADFNS-GUID-36285186-64C9-4074-AF2D-0884D3B8DC49" class="sect5">FOR Loops that Reference Collections and Return DML</h5>
                     <div>
                        <p>You can use the <code class="codeph">FORALL</code> keyword with the <code class="codeph">BULK</code> <code class="codeph">COLLECT</code> keywords to improve the performance of <code class="codeph">FOR</code> loops that reference collections and return DML.
                        </p>
                        <div class="infoboxnotealso" id="GUID-36285186-64C9-4074-AF2D-0884D3B8DC49__GUID-D563DB6B-DB75-482F-864B-6D16206FEF8D">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS899" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about use the <code class="codeph">BULK</code> <code class="codeph">COLLECT</code> clause with the <code class="codeph">RETURNING</code> <code class="codeph">INTO</code> clause
                           </p>
                        </div>
                        <p>The PL/SQL block in <a href="coding-subprograms-and-packages.html#GUID-36285186-64C9-4074-AF2D-0884D3B8DC49__BABIBDGI">Example 13-6</a> updates the <code class="codeph">EMPLOYEES</code> table by computing bonuses for a collection of employees. Then it returns the bonuses in a column called <code class="codeph">bonus_list_inst</code>. The actions are performed with and without bulk binds. Without bulk bind, PL/SQL sends a SQL statement to the SQL engine for each updated employee, leading to context switches that slow performance.
                        </p>
                        <div class="example" id="GUID-36285186-64C9-4074-AF2D-0884D3B8DC49__BABIBDGI">
                           <p class="titleinexample">Example 13-6 FOR Loops that Reference Collections and Return DML</p><pre class="oac_no_warn" dir="ltr">DECLARE
  TYPE emp_list IS VARRAY(100) OF EMPLOYEES.EMPLOYEE_ID%TYPE;
  empids emp_list := emp_list(182, 187, 193, 200, 204, 206);
  
  TYPE bonus_list IS TABLE OF EMPLOYEES.SALARY%TYPE;
  bonus_list_inst  bonus_list;
  
BEGIN
  <span class="bold">-- Efficient method, using bulk bind:</span>
 
 <span class="bold">FORALL</span> i IN empids.FIRST..empids.LAST
 UPDATE EMPLOYEES
 SET SALARY = 0.1 * SALARY
 WHERE EMPLOYEE_ID = empids(i)
 <span class="bold">RETURNING SALARY BULK COLLECT INTO bonus_list_inst;</span>
 
 -- Slower method:
 
 <span class="bold">FOR</span> i IN empids.FIRST..empids.LAST <span class="bold">LOOP</span>
   UPDATE EMPLOYEES
   SET SALARY = 0.1 * SALARY
   WHERE EMPLOYEE_ID = empids(i)
   <span class="bold">RETURNING SALARY INTO bonus_list_inst(i);</span>
 <span class="bold">END LOOP;</span>
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADFNS1320"></a><div class="props_rev_3"><a id="GUID-AA03D3E8-BCAB-4146-ABB2-3D727C21EA1E" name="GUID-AA03D3E8-BCAB-4146-ABB2-3D727C21EA1E"></a><h4 id="ADFNS-GUID-AA03D3E8-BCAB-4146-ABB2-3D727C21EA1E" class="sect4">PL/SQL Dynamic SQL</h4>
                  <div>
                     <p><span class="bold">Dynamic SQL</span> is a programming methodology for generating and running SQL statements at runtime. It is useful when writing general-purpose and flexible programs like dynamic query systems, when writing programs that must run database definition language (DDL) statements, or when you do not know at compile time the full text of a SQL statement or the number or data types of its input and output variables.
                     </p>
                     <p>If you do not need dynamic SQL, then use static SQL, which has these advantages:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Successful compilation verifies that static SQL statements reference valid database objects and that the necessary privileges are in place to access those objects.</p>
                        </li>
                        <li>
                           <p>Successful compilation creates schema object dependencies.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-AA03D3E8-BCAB-4146-ABB2-3D727C21EA1E__NOTE-134-CAB8EF16">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="schema-object-dependency.html#GUID-488AF7D9-EDEB-4589-A503-FDE31CE55B60">Understanding Schema Object Dependency</a> for information about schema object dependency
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS011" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about dynamic SQL
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS006" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about static SQL
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS329"></a><div class="props_rev_3"><a id="GUID-165E6DFF-2BD3-4A69-A1F1-557F74D4B7C0" name="GUID-165E6DFF-2BD3-4A69-A1F1-557F74D4B7C0"></a><h3 id="ADFNS-GUID-165E6DFF-2BD3-4A69-A1F1-557F74D4B7C0" class="sect3">Altering PL/SQL Subprograms and Packages</h3>
               <div>
                  <div class="section">
                     <p>To alter the name of a stored standalone subprogram or package, you must drop it and then create it with the new name. For example:</p><pre class="oac_no_warn" dir="ltr">CREATE PROCEDURE <span class="bold">p</span> IS BEGIN NULL; END;
/
DROP PROCEDURE p
/
CREATE PROCEDURE <span class="bold">p1</span> IS BEGIN NULL; END;
/
</pre><p>To alter a stored standalone subprogram or package without changing its name, you can replace it with a new version with the same name by including <code class="codeph">OR</code> <code class="codeph">REPLACE</code> in the <code class="codeph">CREATE</code> statement. For example:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE <span class="bold">OR REPLACE</span> PROCEDURE <span class="bold">p1</span> IS
BEGIN
  DBMS_OUTPUT.PUT_LINE('Hello, world!');
END;
/</pre><div class="infoboxnote" id="GUID-165E6DFF-2BD3-4A69-A1F1-557F74D4B7C0__GUID-A1CE0172-E9A2-4DFF-AB7E-79DA834150B4">
                        <p class="notep1">Note:</p>
                        <p><code class="codeph">ALTER</code> statements (such as <code class="codeph">ALTER</code> <code class="codeph">FUNCTION</code>, <code class="codeph">ALTER</code> <code class="codeph">PROCEDURE</code>, and <code class="codeph">ALTER</code> <code class="codeph">PACKAGE</code>) do not alter the declarations or definitions of existing PL/SQL units, they recompile only the units.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-165E6DFF-2BD3-4A69-A1F1-557F74D4B7C0__NOTE-1316-CAB91EB1">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-BAE76DFB-434F-499A-8D9A-8AB15C36AA40">Dropping PL/SQL Subprograms and Packages</a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99974" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about <code class="codeph">ALTER</code> statements
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-49E5AD11-BFCE-4AA5-B309-C86A34502C88" name="GUID-49E5AD11-BFCE-4AA5-B309-C86A34502C88"></a><h3 id="ADFNS-GUID-49E5AD11-BFCE-4AA5-B309-C86A34502C88" class="sect3">Deprecating Packages, Subprograms, and Types</h3>
               <div>
                  <p></p>
                  <div class="section">As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2), you can use the <code class="codeph">DEPRECATE</code> pragma to communicate that a package, subprogram, or type has been deprecated or superseded by a new interface. When a unit is compiled that makes a reference to a deprecated element, a compilation warning is issued. To mark a PL/SQL unit as deprecated, use the <code class="codeph">DEPRECATE</code> pragma.
                     <div class="infoboxnotealso" id="GUID-49E5AD11-BFCE-4AA5-B309-C86A34502C88__NOTE-1414-CAB9615F">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS-GUID-D2DAD89D-C537-4666-A8A7-2836EB77A0E5" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about <code class="codeph">DEPRECATE</code> pragma
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS330"></a><div class="props_rev_3"><a id="GUID-BAE76DFB-434F-499A-8D9A-8AB15C36AA40" name="GUID-BAE76DFB-434F-499A-8D9A-8AB15C36AA40"></a><h3 id="ADFNS-GUID-BAE76DFB-434F-499A-8D9A-8AB15C36AA40" class="sect3">Dropping PL/SQL Subprograms and Packages</h3>
               <div>
                  <div class="section">
                     <p>To drop stored standalone subprograms, use these statements:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">DROP</code> <code class="codeph">FUNCTION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DROP</code> <code class="codeph">PROCEDURE</code></p>
                        </li>
                     </ul>
                     <p>To drop a package (specification and body) or only its body, use the <code class="codeph">DROP</code> <code class="codeph">PACKAGE</code> statement.
                     </p>
                     <div class="infoboxnotealso" id="GUID-BAE76DFB-434F-499A-8D9A-8AB15C36AA40__NOTE-1323-CAB99175">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99993" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about <code class="codeph">DROP</code> <code class="codeph">FUNCTION</code></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99991" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about <code class="codeph">DROP</code> <code class="codeph">PROCEDURE</code></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99992" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> <code class="codeph">DROP</code> <code class="codeph">PACKAGE</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS00902"></a><div class="props_rev_3"><a id="GUID-53216323-38DB-4BE4-B2A9-E85DFCCBBB7A" name="GUID-53216323-38DB-4BE4-B2A9-E85DFCCBBB7A"></a><h3 id="ADFNS-GUID-53216323-38DB-4BE4-B2A9-E85DFCCBBB7A" class="sect3">Compiling PL/SQL Units for Native Execution</h3>
               <div>
                  <div class="section">
                     <p>You can usually speed up PL/SQL units—your own and those that Oracle supplies—by compiling them into native code (processor-dependent system code), which is stored in the SYSTEM tablespace.</p>
                     <p>PL/SQL units compiled into native code run in all server environments, including the shared server configuration (formerly called "multithreaded server") and Oracle Real Application Clusters (Oracle RAC).</p>
                     <p>Whether to compile a PL/SQL unit into native code depends on where you are in the development cycle and what the PL/SQL unit does.</p>
                     <div class="infoboxnote" id="GUID-53216323-38DB-4BE4-B2A9-E85DFCCBBB7A__GUID-C2B31DF5-81D3-4FC0-9372-44F09E174D6F">
                        <p class="notep1">Note:</p>
                        <p>To compile Java packages and classes for native execution, use the <code class="codeph">ncomp</code> tool.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-53216323-38DB-4BE4-B2A9-E85DFCCBBB7A__NOTE-1316-CABA503A">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS01209" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about compiling PL/SQL units for native execution
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDEV01200" target="_blank"><span class="italic">Oracle Database Java Developer's Guide</span></a> 
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS1038"></a><a id="ADFNS00906"></a><div class="props_rev_3"><a id="GUID-C898484A-4592-44F6-875D-C83B30E1DDAA" name="GUID-C898484A-4592-44F6-875D-C83B30E1DDAA"></a><h3 id="ADFNS-GUID-C898484A-4592-44F6-875D-C83B30E1DDAA" class="sect3">Invoking Stored PL/SQL Subprograms</h3>
               <div>
                  <div class="section">
                     <p>Stored PL/SQL subprograms can be invoked from many different environments. For example:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Interactively, using an Oracle Database tool</p>
                        </li>
                        <li>
                           <p>From the body of another subprogram</p>
                        </li>
                        <li>
                           <p>From the body of a trigger</p>
                        </li>
                        <li>
                           <p>From within an application (such as a SQL*Forms or a precompiler)</p>
                        </li>
                     </ul>
                     <p>Stored PL/SQL functions (but not procedures) can also be invoked from within SQL statements.</p>
                     <p>When you invoke a subprogram owned by another user:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You must include the name of the owner in the invocation. For example:</p><pre class="oac_no_warn" dir="ltr">EXECUTE <span class="bold">jdoe</span>.Fire_emp (1043);
EXECUTE <span class="bold">jdoe</span>.Hire_fire.Fire_emp (1043);
</pre></li>
                        <li>
                           <p>The <code class="codeph">AUTHID</code> property of the subprogram affects the name resolution and privilege checking of SQL statements that the subprogram issues at runtime.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C898484A-4592-44F6-875D-C83B30E1DDAA__GUID-5217FDF6-9D5D-4BEA-A7EB-B169660AA8E1">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-445A213F-ED71-49B2-9E7E-852E36762D06">Privileges Required to Invoke a Stored Subprogram</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-FECA0AE1-034A-45EB-849A-56761004B54B">Invoking a Subprogram Interactively from Oracle Tools</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-A4C492D5-54F8-4A4F-BC52-486A136FFC56">Invoking a Subprogram from Another Subprogram</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-F5F8AD0C-4B45-459D-BBD5-BA8F07E19025">Invoking a Remote Subprogram</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C898484A-4592-44F6-875D-C83B30E1DDAA__GUID-A176FB40-68F2-4BBA-9569-B36D9D317A74">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS008" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about <code class="codeph">AUTHID</code> property, subprogram invocation, parameters, and definer's and invoker's rights
                              </p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-TRIGGER-statement.html#LNPLS2006" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about coding the body of a trigger
                              </p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-C35B709B-EE78-4DB4-9B63-54EB8B4D639F" title="You can use the PRAGMA RESTRICT_REFERENCES clause when you create a PL/SQL package.">Invoking Stored PL/SQL Functions from SQL Statements</a></p>
                           </li>
                           <li>
                              <p><a href="../lnoci/binding-and-defining-in-oci.html#LNOCI16365" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for information about invoking PL/SQL subprograms from OCI applications
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPCC3422" target="_blank"><span class="italic">Pro*C/C++ Programmer's Guide</span></a> for information about invoking PL/SQL subprograms from Pro*C/C++
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPCB006" target="_blank"><span class="italic">Pro*COBOL Programmer's Guide</span></a> for information about invoking PL/SQL subprograms from Pro*COBOL
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC28076" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for information about invoking PL/SQL subprograms from JDBC applications
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS370"></a><div class="props_rev_3"><a id="GUID-445A213F-ED71-49B2-9E7E-852E36762D06" name="GUID-445A213F-ED71-49B2-9E7E-852E36762D06"></a><h4 id="ADFNS-GUID-445A213F-ED71-49B2-9E7E-852E36762D06" class="sect4">Privileges Required to Invoke a Stored Subprogram</h4>
                  <div>
                     <p>You do not need privileges to invoke:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Standalone subprograms that you own</p>
                        </li>
                        <li>
                           <p>Subprograms in packages that you own</p>
                        </li>
                        <li>
                           <p>Public standalone subprograms</p>
                        </li>
                        <li>
                           <p>Subprograms in public packages</p>
                        </li>
                     </ul>
                     <p>To invoke a stored subprogram owned by another user, you must have the <code class="codeph">EXECUTE</code> privilege for the standalone subprogram or for the package containing the package subprogram, or you must have the <code class="codeph">EXECUTE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code> system privilege. If the subprogram is remote, then you must be granted the <code class="codeph">EXECUTE</code> privilege or <code class="codeph">EXECUTE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code> system privilege directly, not through a role.
                     </p>
                     <div class="infoboxnotealso" id="GUID-445A213F-ED71-49B2-9E7E-852E36762D06__GUID-48CBB2C2-175E-44E9-BD4C-FE18D759E55F">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about system and object privileges
                        </p>
                     </div>
                  </div>
               </div><a id="ADFNS372"></a><a id="ADFNS373"></a><a id="ADFNS371"></a><div class="props_rev_3"><a id="GUID-FECA0AE1-034A-45EB-849A-56761004B54B" name="GUID-FECA0AE1-034A-45EB-849A-56761004B54B"></a><h4 id="ADFNS-GUID-FECA0AE1-034A-45EB-849A-56761004B54B" class="sect4">Invoking a Subprogram Interactively from Oracle Tools</h4>
                  <div>
                     <div class="section">
                        <p>You can invoke a subprogram interactively from an Oracle Database tool, such as SQL*Plus. </p>
                        <div class="infoboxnotealso" id="GUID-FECA0AE1-034A-45EB-849A-56761004B54B__GUID-C0057587-7B9E-4214-A21F-44C7DE7441F0">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQPUG043" target="_blank"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for information about the <code class="codeph">EXECUTE</code> command
                                 </p>
                              </li>
                              <li>
                                 <p>Your tools documentation for information about performing similar operations using your development tool</p>
                              </li>
                           </ul>
                        </div>
                        <p><a href="coding-subprograms-and-packages.html#GUID-FECA0AE1-034A-45EB-849A-56761004B54B__BABFDDBJ">Example 13-7</a> uses SQL*Plus to create a procedure and then invokes it in two different ways.
                        </p>
                        <p>Some interactive tools allow you to create session variables, which you can use for the duration of the session. Using SQL*Plus, <a href="coding-subprograms-and-packages.html#GUID-FECA0AE1-034A-45EB-849A-56761004B54B__BABFJFJC">Example 13-8</a> creates, uses, and prints a session variable.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FECA0AE1-034A-45EB-849A-56761004B54B__BABFDDBJ">
                        <p class="titleinexample">Example 13-7 Invoking a Subprogram Interactively with SQL*Plus</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE salary_raise (
  employee  EMPLOYEES.EMPLOYEE_ID%TYPE,
  increase  EMPLOYEES.SALARY%TYPE
)
IS
BEGIN
  UPDATE EMPLOYEES
  SET SALARY = SALARY + increase
  WHERE EMPLOYEE_ID = employee;
END;
/
 </pre><p>Invoke procedure from within anonymous block:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  <span class="bold">salary_raise(205, 200);</span>
END;
/
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">PL/SQL procedure successfully completed.
 </pre><p>Invoke procedure with <code class="codeph">EXECUTE</code> statement:
                        </p><pre class="oac_no_warn" dir="ltr"><span class="bold">EXECUTE salary_raise(205, 200);</span>
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">PL/SQL procedure successfully completed.
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-FECA0AE1-034A-45EB-849A-56761004B54B__BABFJFJC">
                        <p class="titleinexample">Example 13-8 Creating and Using a Session Variable with SQL*Plus</p><pre class="oac_no_warn" dir="ltr">-- Create function for later use:

CREATE OR REPLACE FUNCTION get_job_id (
  emp_id  EMPLOYEES.EMPLOYEE_ID%TYPE
) RETURN EMPLOYEES.JOB_ID%TYPE
IS
  job_id  EMPLOYEES.JOB_ID%TYPE;
BEGIN
  SELECT JOB_ID INTO job_id
  FROM EMPLOYEES
  WHERE EMPLOYEE_ID = emp_id;
 
  RETURN job_id;
END;
/
<span class="bold">-- Create session variable:</span>
 
<span class="bold">VARIABLE job VARCHAR2(10);</span>
 
<span class="bold">-- Run function and store returned value in session variable:</span>
 
<span class="bold">EXECUTE :job := get_job_id(204);</span>
 
PL/SQL procedure successfully completed.
 </pre><p>SQL*Plus command:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">PRINT job;</span>
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">JOB</span>
<span class="bold">--------------------------------</span>
<span class="bold">PR_REP</span></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS375"></a><a id="ADFNS374"></a><div class="props_rev_3"><a id="GUID-A4C492D5-54F8-4A4F-BC52-486A136FFC56" name="GUID-A4C492D5-54F8-4A4F-BC52-486A136FFC56"></a><h4 id="ADFNS-GUID-A4C492D5-54F8-4A4F-BC52-486A136FFC56" class="sect4">Invoking a Subprogram from Another Subprogram</h4>
                  <div>
                     <div class="section">
                        <p>A subprogram or a trigger can invoke another stored subprogram. In <a href="coding-subprograms-and-packages.html#GUID-A4C492D5-54F8-4A4F-BC52-486A136FFC56__BABGJHII">Example 13-9</a>, the procedure <code class="codeph">print_mgr_name</code> invokes the procedure <code class="codeph">print_emp_name</code>.
                        </p>
                        <p>Recursive subprogram invocations are allowed (that is, a subprogram can invoke itself).</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A4C492D5-54F8-4A4F-BC52-486A136FFC56__BABGJHII">
                        <p class="titleinexample">Example 13-9 Invoking a Subprogram from Within Another Subprogram</p><pre class="oac_no_warn" dir="ltr">-- Create procedure that takes employee's ID and prints employee's name:
 
CREATE OR REPLACE <span class="bold">PROCEDURE print_emp_name</span> (
  emp_id  EMPLOYEES.EMPLOYEE_ID%TYPE
)
IS
  fname  EMPLOYEES.FIRST_NAME%TYPE;
  lname  EMPLOYEES.LAST_NAME%TYPE;
BEGIN
  SELECT FIRST_NAME, LAST_NAME
  INTO fname, lname
  FROM EMPLOYEES
  WHERE EMPLOYEE_ID = emp_id;
 
  DBMS_OUTPUT.PUT_LINE (
    'Employee #' || emp_id || ':  ' || fname || ' ' || lname
  );
END;
/
 
-- Create procedure that takes employee's ID and prints manager's name:
 
CREATE OR REPLACE <span class="bold">PROCEDURE print_mgr_name</span> (
  emp_id  EMPLOYEES.EMPLOYEE_ID%TYPE
)
IS
  mgr_id  EMPLOYEES.MANAGER_ID%TYPE;
BEGIN
  SELECT MANAGER_ID
  INTO mgr_id
  FROM EMPLOYEES
  WHERE EMPLOYEE_ID = emp_id;
 
 DBMS_OUTPUT.PUT_LINE (
   'Manager of employee #' || emp_id || ' is:  '
 );
 
 <span class="bold">print_emp_name(mgr_id);</span>
END;
/
 </pre><p>Invoke procedures:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  print_emp_name(200);
  print_mgr_name(200);
END;
/
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Employee #200:  Jennifer Whalen
Manager of employee #200 is:
Employee #101:  Neena Kochhar</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS1039"></a><a id="ADFNS00907"></a><div class="props_rev_3"><a id="GUID-F5F8AD0C-4B45-459D-BBD5-BA8F07E19025" name="GUID-F5F8AD0C-4B45-459D-BBD5-BA8F07E19025"></a><h4 id="ADFNS-GUID-F5F8AD0C-4B45-459D-BBD5-BA8F07E19025" class="sect4">Invoking a Remote Subprogram</h4>
                  <div>
                     <div class="section">
                        <p>A <span class="bold">remote subprogram</span> is stored on a different database from its invoker. A remote subprogram invocation must include the subprogram name, a database link to the database on which the subprogram is stored, and an actual parameter for every formal parameter (even if the formal parameter has a default value).
                        </p>
                        <p>For example, this SQL*Plus statement invokes the stored standalone procedure <code class="codeph">fire_emp1</code>, which is referenced by the local database link named <code class="codeph">boston_server</code>:
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE fire_emp1@boston_server(1043);</pre><div class="infoboxnote" id="GUID-F5F8AD0C-4B45-459D-BBD5-BA8F07E19025__GUID-6CA41C89-AC2A-497F-B136-829CC6768494">
                           <p class="notep1">Note:</p>
                           <p>Although you can invoke remote package subprograms, you cannot directly access remote package variables and constants.</p>
                        </div>
                        <div class="infoboxnote" id="GUID-F5F8AD0C-4B45-459D-BBD5-BA8F07E19025__GUID-2823C873-5EDF-4B5A-8EA9-E8B0712F6466">
                           <p class="notep1">Caution:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Remote subprogram invocations use runtime binding. The user account to which you connect depends on the database link. (Stored subprograms use compile-time binding.)</p>
                              </li>
                              <li>
                                 <p>If a local subprogram invokes a remote subprogram, and a time-stamp mismatch is found during execution of the local subprogram, then the remote subprogram is not run, and the local subprogram is invalidated. For more information, see <a href="schema-object-dependency.html#GUID-5DDF2B74-A9B4-40D4-ABFE-175F11544F3D">Dependencies Among Local and Remote Database Procedures</a>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F5F8AD0C-4B45-459D-BBD5-BA8F07E19025__GUID-54BAF7E0-18BE-42F7-96E7-CDB27BCE1C10">Topics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-94B53C2E-D329-4B95-BB59-C05476FA2DFA">Synonyms for Remote Subprograms</a></p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-B486CBF0-A1E9-4B2E-8BDE-5DE66B7B2BF2">Transactions That Invoke Remote Subprograms</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-F5F8AD0C-4B45-459D-BBD5-BA8F07E19025__GUID-9A8C35AB-AB72-400D-B6C2-F2FFAB7290DF">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="schema-object-dependency.html#GUID-5DDF2B74-A9B4-40D4-ABFE-175F11544F3D">Dependencies Among Local and Remote Database Procedures</a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS007" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about handling errors in subprograms
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS377"></a><div class="props_rev_3"><a id="GUID-94B53C2E-D329-4B95-BB59-C05476FA2DFA" name="GUID-94B53C2E-D329-4B95-BB59-C05476FA2DFA"></a><h5 id="ADFNS-GUID-94B53C2E-D329-4B95-BB59-C05476FA2DFA" class="sect5">Synonyms for Remote Subprograms</h5>
                     <div>
                        <p>A <span class="bold">synonym</span> is an alias for a schema object. You can create a synonym for a remote subprogram name and database link, and then use the synonym to invoke the subprogram. For example:
                        </p><pre class="oac_no_warn" dir="ltr"><span class="bold">CREATE SYNONYM synonym1 for fire_emp1@boston_server;</span>
EXECUTE <span class="bold">synonym1</span>(1043);</pre><div class="infoboxnote" id="GUID-94B53C2E-D329-4B95-BB59-C05476FA2DFA__GUID-8A37FA94-8F11-40E0-9157-C836AEEF71E7">
                           <p class="notep1">Note:</p>
                           <p>You cannot create a synonym for a package subprogram, because it is not a schema object (its package is a schema object).</p>
                        </div>
                        <p>Synonyms provide both data independence and location transparency. Using the synonym, a user can invoke the subprogram without knowing who owns it or where it is. However, a synonym is not a substitute for privileges—to use the synonym to invoke the subprogram, the user still needs the necessary privileges for the subprogram.</p>
                        <p>Granting a privilege on a synonym is equivalent to granting the privilege on the base object. Similarly, granting a privilege on a base object is equivalent to granting the privilege on all synonyms for the object.</p>
                        <p>You can create both private and public synonyms. A private synonym is in your schema and you control its availability to others. A public synonym belongs to the user group <code class="codeph">PUBLIC</code> and is available to every database user.
                        </p>
                        <p>Use public synonyms sparingly because they make database consolidation more difficult.</p>
                        <p>If you do not want to use a synonym, you can create a local subprogram to invoke the remote subprogram. For example:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE local_procedure
  (arg IN NUMBER)
AS
BEGIN
  <span class="bold">fire_emp1@boston_server(arg);</span>
END;
/
DECLARE
  arg NUMBER;
BEGIN
  <span class="bold">local_procedure(arg);</span>
END;
/</pre><div class="infoboxnotealso" id="GUID-94B53C2E-D329-4B95-BB59-C05476FA2DFA__GUID-D2B0F51C-96AB-4837-99E6-9E5B9362B872">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT711" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for general information about synonyms
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT88883" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for examples of public synonym
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01401" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">CREATE</code> <code class="codeph">SYNONYM</code> statement
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">GRANT</code> statement
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADFNS378"></a><div class="props_rev_3"><a id="GUID-B486CBF0-A1E9-4B2E-8BDE-5DE66B7B2BF2" name="GUID-B486CBF0-A1E9-4B2E-8BDE-5DE66B7B2BF2"></a><h5 id="ADFNS-GUID-B486CBF0-A1E9-4B2E-8BDE-5DE66B7B2BF2" class="sect5">Transactions That Invoke Remote Subprograms</h5>
                     <div>
                        <p>A remote subprogram invocation is assumed to update a database. Therefore, a transaction that invokes a remote subprogram requires a two-phase commit (even if the remote subprogram does not update a database). If the transaction is rolled back, then the work done by the remote subprogram is also rolled back.</p>
                        <p>With respect to the statements <code class="codeph">COMMIT</code>, <code class="codeph">ROLLBACK</code>, and <code class="codeph">SAVEPOINT</code>, a remote subprogram differs from a local subprogram in these ways:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the transaction starts on a database that is not an Oracle database, then the remote subprogram cannot run these statements.</p>
                              <p>This situation can occur in Oracle XA applications, which are not recommended. For details, see <a href="xa.html#GUID-1DAB062F-F796-4424-9FFD-9756688AC5B7">Developing Applications with Oracle XA</a>.
                              </p>
                           </li>
                           <li>
                              <p>After running one of these statements, the remote subprogram cannot start its own distributed transactions.</p>
                              <p>A <strong class="term">distributed transaction</strong> updates two or more databases. Statements in the transaction are sent to the different databases, and the transaction succeeds or fails as a unit. If the transaction fails on any database, then it must be rolled back (either to a savepoint or completely) on all databases. Consider this when creating subprograms that perform distributed updates.
                              </p>
                           </li>
                           <li>
                              <p>If the remote subprogram does not commit or roll back its work, then the work is implicitly committed when the database link is closed. Until then, the remote subprogram is considered to be performing a transaction. Therefore, further invocations to the remote subprogram are not allowed.</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1040"></a><a id="ADFNS00908"></a><div class="props_rev_3"><a id="GUID-C35B709B-EE78-4DB4-9B63-54EB8B4D639F" name="GUID-C35B709B-EE78-4DB4-9B63-54EB8B4D639F"></a><h3 id="ADFNS-GUID-C35B709B-EE78-4DB4-9B63-54EB8B4D639F" class="sect3">Invoking Stored PL/SQL Functions from SQL Statements</h3>
               <div>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-C35B709B-EE78-4DB4-9B63-54EB8B4D639F__GUID-D50D5F17-4132-4C0D-9ED6-290A7ACA208F">
                        <p class="notep1">Caution:</p>
                        <p>Because SQL is a declarative language, rather than an imperative (or procedural) one, you cannot know how many times a function invoked by a SQL statement will run—even if the function is written in PL/SQL, an imperative language.</p>
                        <p>If your application requires that a function be executed a certain number of times, do not invoke that function from a SQL statement. Use a cursor instead.</p>
                        <p>For example, if your application requires that a function be called for each selected row, then open a cursor, select rows from the cursor, and call the function for each row. This technique guarantees that the number of calls to the function is the number of rows fetched from the cursor.</p>
                        <p>For general information about cursors, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00602" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a>.
                        </p>
                     </div>
                     <p>These SQL statements can invoke PL/SQL stored functions:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">INSERT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">UPDATE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DELETE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">SELECT</code></p>
                           <p>(<code class="codeph">SELECT</code> can also invoke a PL/SQL function declared and defined in its <code class="codeph">WITH</code> clause.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CALL</code></p>
                           <p>(<code class="codeph">CALL</code> can also invoke a PL/SQL stored procedure.)
                           </p>
                        </li>
                     </ul>
                     <p>To invoke a PL/SQL function from a SQL statement, you must either own or have the <code class="codeph">EXECUTE</code> privilege on the function. To select from a view defined with a PL/SQL function, you must have <code class="codeph">READ</code> or <code class="codeph">SELECT</code> privilege on the view. No separate <code class="codeph">EXECUTE</code> privileges are needed to select from the view.
                     </p>
                     <div class="infoboxnote" id="GUID-C35B709B-EE78-4DB4-9B63-54EB8B4D639F__GUID-FA5097E1-F7E8-4577-B2EF-A0551B08D74F">
                        <p class="notep1">Note:</p>
                        <p>The <code class="codeph">AUTHID</code> property of the PL/SQL function can also affect the privileges that you need to invoke the function from a SQL statement, because <code class="codeph">AUTHID</code> affects the name resolution and privilege checking of SQL statements that the unit issues at runtime. For details, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00809" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a>.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C35B709B-EE78-4DB4-9B63-54EB8B4D639F__GUID-D82C3BAF-4B07-4283-9A73-2642F909B44B">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-88C59874-0A18-4AF8-A231-88ED3D41FAA0">Why Invoke PL/SQL Functions from SQL Statements?</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-6AFBEB39-08CB-45F4-86EA-51ED4E6ADA30">Where PL/SQL Functions Can Appear in SQL Statements</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-E562FA4E-B8A1-4B47-A102-A65E26100F3F">When PL/SQL Functions Can Appear in SQL Expressions</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-69A02381-FE34-42D9-8A19-9AA8A51514C6" title="You can use the PRAGMA RESTRICT_REFERENCES clause when you create a PL/SQL package.">Controlling Side Effects of PL/SQL Functions Invoked from SQL Statements</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C35B709B-EE78-4DB4-9B63-54EB8B4D639F__NOTE-1342-CABE192A">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF55665" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about <code class="codeph">SELECT</code> statement
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS008" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for general information about invoking subprograms, including passing parameters
                              </p>
                              <p></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS379"></a><div class="props_rev_3"><a id="GUID-88C59874-0A18-4AF8-A231-88ED3D41FAA0" name="GUID-88C59874-0A18-4AF8-A231-88ED3D41FAA0"></a><h4 id="ADFNS-GUID-88C59874-0A18-4AF8-A231-88ED3D41FAA0" class="sect4">Why Invoke PL/SQL Functions from SQL Statements?</h4>
                  <div>
                     <p>Invoking PL/SQL functions in SQL statements can:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Increase user productivity by extending SQL</p>
                           <p>Expressiveness of the SQL statement increases where activities are too complex, too awkward, or unavailable with SQL.</p>
                        </li>
                        <li>
                           <p>Increase query efficiency</p>
                           <p>Functions in the <code class="codeph">WHERE</code> clause of a query can filter data using criteria that must otherwise be evaluated by the application.
                           </p>
                        </li>
                        <li>
                           <p>Manipulate character strings to represent special data types (for example, latitude, longitude, or temperature)</p>
                        </li>
                        <li>
                           <p>Provide parallel query execution</p>
                           <p>If the query is parallelized, then SQL statements in your PL/SQL subprogram might also run in parallel (using the parallel query option).</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS380"></a><div class="props_rev_3"><a id="GUID-6AFBEB39-08CB-45F4-86EA-51ED4E6ADA30" name="GUID-6AFBEB39-08CB-45F4-86EA-51ED4E6ADA30"></a><h4 id="ADFNS-GUID-6AFBEB39-08CB-45F4-86EA-51ED4E6ADA30" class="sect4">Where PL/SQL Functions Can Appear in SQL Statements</h4>
                  <div>
                     <p>A PL/SQL function can appear in a SQL statement wherever a SQL function or an expression can appear in a SQL statement. For example:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Select list of the <code class="codeph">SELECT</code> statement
                           </p>
                        </li>
                        <li>
                           <p>Condition of the <code class="codeph">WHERE</code> or <code class="codeph">HAVING</code> clause
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CONNECT</code> <code class="codeph">BY</code>, <code class="codeph">START</code> <code class="codeph">WITH</code>, <code class="codeph">ORDER</code> <code class="codeph">BY</code>, or <code class="codeph">GROUP</code> <code class="codeph">BY</code> clause
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">VALUES</code> clause of the <code class="codeph">INSERT</code> statement
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SET</code> clause of the <code class="codeph">UPDATE</code> statement
                           </p>
                        </li>
                     </ul>
                     <p>A PL/SQL table function (which returns a collection of rows) can appear in a <code class="codeph">SELECT</code> statement instead of:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Column name in the <code class="codeph">SELECT</code> list
                           </p>
                        </li>
                        <li>
                           <p>Table name in the <code class="codeph">FROM</code> clause
                           </p>
                        </li>
                     </ul>
                     <p>A PL/SQL function cannot appear in these contexts, which require unchanging definitions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CHECK</code> constraint clause of a <code class="codeph">CREATE</code> or <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement
                           </p>
                        </li>
                        <li>
                           <p>Default value specification for a column</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS382"></a><a id="ADFNS381"></a><div class="props_rev_3"><a id="GUID-E562FA4E-B8A1-4B47-A102-A65E26100F3F" name="GUID-E562FA4E-B8A1-4B47-A102-A65E26100F3F"></a><h4 id="ADFNS-GUID-E562FA4E-B8A1-4B47-A102-A65E26100F3F" class="sect4">When PL/SQL Functions Can Appear in SQL Expressions</h4>
                  <div>
                     <p>To be invoked from a SQL expression, a PL/SQL function must satisfy these requirements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>It must be either a user-defined aggregate function or a row function.</p>
                        </li>
                        <li>
                           <p>Its formal parameters must be <code class="codeph">IN</code> parameters, not <code class="codeph">OUT</code> or <code class="codeph">IN</code> <code class="codeph">OUT</code> parameters.
                           </p>
                        </li>
                     </ul>
                     <p>The function in <a href="coding-subprograms-and-packages.html#GUID-E562FA4E-B8A1-4B47-A102-A65E26100F3F__CIHGHHCE">Example 13-10</a> satisfies the preceding requirements.
                     </p>
                     <div class="example" id="GUID-E562FA4E-B8A1-4B47-A102-A65E26100F3F__CIHGHHCE">
                        <p class="titleinexample">Example 13-10 PL/SQL Function in SQL Expression (Follows Rules)</p><pre class="oac_no_warn" dir="ltr">DROP TABLE payroll;  -- in case it exists
CREATE TABLE payroll (
  srate  NUMBER,
  orate  NUMBER,
  acctno NUMBER
);
 
CREATE OR REPLACE <span class="bold">FUNCTION gross_pay</span> (
  emp_id  <span class="bold">IN NUMBER</span>,
  st_hrs  <span class="bold">IN NUMBER</span> := 40,
  ot_hrs  <span class="bold">IN NUMBER</span> := 0
) <span class="bold">RETURN NUMBER</span>
IS
  st_rate  NUMBER;
  ot_rate  NUMBER;
BEGIN
  SELECT srate, orate
  INTO st_rate, ot_rate
  FROM payroll
  WHERE acctno = emp_id;
 
 RETURN st_hrs * st_rate + ot_hrs * ot_rate;
END gross_pay;
/</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS1041"></a><a id="ADFNS384"></a><div class="props_rev_3"><a id="GUID-69A02381-FE34-42D9-8A19-9AA8A51514C6" name="GUID-69A02381-FE34-42D9-8A19-9AA8A51514C6"></a><h4 id="ADFNS-GUID-69A02381-FE34-42D9-8A19-9AA8A51514C6" class="sect4">Controlling Side Effects of PL/SQL Functions Invoked from SQL Statements</h4>
                  <div>
                     <div class="section">
                        <p>A subprogram has <span class="bold">side effects</span> if it changes anything except the values of its own local variables. For example, a subprogram that changes any of the following has side effects:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Its own <code class="codeph">OUT</code> or <code class="codeph">IN</code> <code class="codeph">OUT</code> parameter
                              </p>
                           </li>
                           <li>
                              <p>A global variable</p>
                           </li>
                           <li>
                              <p>A public variable in a package</p>
                           </li>
                           <li>
                              <p>A database table</p>
                           </li>
                           <li>
                              <p>The database</p>
                           </li>
                           <li>
                              <p>The external state (by invoking <code class="codeph">DBMS_OUTPUT</code> or sending e‐mail, for example)
                              </p>
                           </li>
                        </ul>
                        <p>Side effects can prevent the parallelization of a query, yield order-dependent (and therefore, indeterminate) results, or require that package state be maintained across user sessions.</p>
                        <p>Some side effects are not allowed in a function invoked from a SQL query or DML statement.</p>
                        <p>Before Oracle Database 8<span class="italic">g</span> Release 1 (8.1), application developers used <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> to assert the <span class="bold">purity</span> (freedom from side effects) of a function. This pragma remains available for backward compatibility, but do not use it in new applications. Instead, specify the optimizer hints <code class="codeph">DETERMINISTIC</code> and <code class="codeph">PARALLEL_ENABLE</code> when you create the function.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69A02381-FE34-42D9-8A19-9AA8A51514C6__GUID-50FD9864-E615-4FE9-A6EB-843F164C163B">Topics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-035E5BD6-A547-4E88-9C41-52575A4298FE">Restrictions on Functions Invoked from SQL Statements</a></p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-5E6ED839-367B-4884-BE4D-1AB851AECA22">PL/SQL Functions Invoked from Parallelized SQL Statements</a></p>
                           </li>
                           <li>
                              <p><a href="coding-subprograms-and-packages.html#GUID-2FBBF442-399F-4A03-B66E-0C1E5C6A9736" title="You can use the PRAGMA RESTRICT_REFERENCES clause when you create a PL/SQL package.">PRAGMA RESTRICT_REFERENCES</a> (deprecated)
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-69A02381-FE34-42D9-8A19-9AA8A51514C6__NOTE-1342-CABEB337">
                           <p class="notep1">See Also:</p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS01370" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about <code class="codeph">DETERMINISTIC</code> and <code class="codeph">PARALLEL_ENABLE</code> optimizer hints
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS385"></a><div class="props_rev_3"><a id="GUID-035E5BD6-A547-4E88-9C41-52575A4298FE" name="GUID-035E5BD6-A547-4E88-9C41-52575A4298FE"></a><h5 id="ADFNS-GUID-035E5BD6-A547-4E88-9C41-52575A4298FE" class="sect5">Restrictions on Functions Invoked from SQL Statements</h5>
                     <div>
                        <div class="infoboxnote" id="GUID-035E5BD6-A547-4E88-9C41-52575A4298FE__GUID-CDD9E820-24C6-42C0-89CA-8C79832CBCB6">
                           <p class="notep1">Note:</p>
                           <p>The restrictions on functions invoked from SQL statements also apply to triggers fired by SQL statements.</p>
                        </div>
                        <p>If a SQL statement invokes a function, and the function runs a new SQL statement, then the execution of the new statement is logically embedded in the context of the statement that invoked the function. To ensure that the new statement is safe in this context, Oracle Database enforces these restrictions on the function:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the SQL statement that invokes the function is a query or DML statement, then the function cannot end the current transaction, create or rollback to a savepoint, or <code class="codeph">ALTER</code> the system or session.
                              </p>
                           </li>
                           <li>
                              <p>If the SQL statement that invokes the function is a query or parallelized DML statement, then the function cannot run a DML statement or otherwise modify the database.</p>
                           </li>
                           <li>
                              <p>If the SQL statement that invokes the function is a DML statement, then the function can neither read nor modify the table being modified by the SQL statement that invoked the function.</p>
                           </li>
                        </ul>
                        <p>The restrictions apply regardless of how the function runs the new SQL statement. For example, they apply to new SQL statements that the function:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Invokes from PL/SQL, whether embedded directly in the function body, run using the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement, or run using the <code class="codeph">DBMS_SQL</code> package
                              </p>
                           </li>
                           <li>
                              <p>Runs using JDBC</p>
                           </li>
                           <li>
                              <p>Runs with OCI using the callback context from within an external C function</p>
                           </li>
                        </ul>
                        <p>To avoid these restrictions, ensure that the execution of the new SQL statement is not logically embedded in the context of the SQL statement that invokes the function. For example, put the new SQL statement in an autonomous transaction or, in OCI, create a new connection for the external C function rather than using the handle provided by the <code class="codeph">OCIExtProcContext</code> argument.
                        </p>
                        <div class="infoboxnotealso" id="GUID-035E5BD6-A547-4E88-9C41-52575A4298FE__NOTE-128-CABF011E">
                           <p class="notep1">See Also:</p>
                           <p><a href="sql-processing-for-application-developers.html#GUID-BA46A896-4998-4E3C-ACAE-334B8716BC26">Autonomous Transactions</a></p>
                        </div>
                     </div>
                  </div><a id="ADFNS387"></a><div class="props_rev_3"><a id="GUID-5E6ED839-367B-4884-BE4D-1AB851AECA22" name="GUID-5E6ED839-367B-4884-BE4D-1AB851AECA22"></a><h5 id="ADFNS-GUID-5E6ED839-367B-4884-BE4D-1AB851AECA22" class="sect5">PL/SQL Functions Invoked from Parallelized SQL Statements</h5>
                     <div>
                        <p>When Oracle Database runs a <span class="bold">parallelized</span> SQL statement, multiple processes work simultaneously to run the single SQL statement. When a parallelized SQL statement invokes a function, each process might invoke its own copy of the function, for only the subset of rows that the process handles.
                        </p>
                        <p>Each process has its own copy of package variables. When parallel execution begins, the package variables are initialized for each process as if a user were logging into the system; the package variable values are not copied from the original login session. Changes that one process makes to package variables do not automatically propagate to the other processes or to the original login session. Java <code class="codeph">STATIC</code> class attributes are similarly initialized and modified independently in each process. A function can use package and Java <code class="codeph">STATIC</code> variables to accumulate a value across the various rows that it encounters. Therefore, Oracle Database does not parallelize the execution of user-defined functions by default.
                        </p>
                        <p>Before Oracle Database 8<span class="italic">g</span> Release 1 (8.1):
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If a parallelized query invoked a user-defined function, then the execution of the function could be parallelized if <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> asserted both <code class="codeph">RNPS</code> and <code class="codeph">WNPS</code> for the function—that is, that the function neither referenced package variables nor changed their values.
                              </p>
                              <p>Without this assertion, the execution of a standalone PL/SQL function (but not a C or Java function) could be parallelized if Oracle Database determined that the function neither referenced package variables nor changed their values.</p>
                           </li>
                           <li>
                              <p>If a parallelized DML statement invoked a user-defined function, then the execution of the function could be parallelized if <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> asserted <code class="codeph">RNDS</code>, <code class="codeph">WNDS</code>, <code class="codeph">RNPS</code> and <code class="codeph">WNPS</code> for the function—that is, that the function neither referenced nor changed the values of either package variables or database tables.
                              </p>
                              <p>Without this assertion, the execution of a standalone PL/SQL function (but not a C or Java function) could be parallelized if Oracle Database determined that the function neither referenced nor changed the values of either package variables or database tables.</p>
                           </li>
                        </ul>
                        <p>As of Oracle Database 8<span class="italic">g</span> Release 1 (8.1), if a parallelized SQL statement invokes a user-defined function, then the execution of a function can be parallelized in these situations:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The function was created with <code class="codeph">PARALLEL_ENABLE</code>.
                              </p>
                           </li>
                           <li>
                              <p>Before Oracle Database 8<span class="italic">g</span> Release 1 (8.1), the database recognized the function as parallelizable.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADFNS389"></a><a id="ADFNS1042"></a><a id="ADFNS388"></a><div class="props_rev_3"><a id="GUID-2FBBF442-399F-4A03-B66E-0C1E5C6A9736" name="GUID-2FBBF442-399F-4A03-B66E-0C1E5C6A9736"></a><h5 id="ADFNS-GUID-2FBBF442-399F-4A03-B66E-0C1E5C6A9736" class="sect5">PRAGMA RESTRICT_REFERENCES</h5>
                     <div>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-2FBBF442-399F-4A03-B66E-0C1E5C6A9736__GUID-2FB7F43B-F70F-486E-81BC-033C0CBA3598">
                              <p class="notep1">Note:</p>
                              <p><code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> is deprecated. In new applications, Oracle recommends using <code class="codeph">DETERMINISTIC</code> and <code class="codeph">PARALLEL_ENABLE</code> (explained in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS01370" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a>) instead of <code class="codeph">RESTRICT_REFERENCES</code>.
                              </p>
                           </div>
                           <p>In existing PL/SQL applications, you can either remove <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> or continue to use it, even with new functionality, to ease integration with the existing code. For example:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>When it is impossible or impractical to completely remove <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> from existing code.
                                 </p>
                                 <p>For example, if subprogram S1 depends on subprogram S2, and you do not remove the pragma from S1, then you might need the pragma in S2 to compile S1.</p>
                              </li>
                              <li>
                                 <p>When replacing <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> with <code class="codeph">PARALLEL_ENABLE</code> and <code class="codeph">DETERMINISTIC</code> in existing code would negatively affect the action of new, dependent code.
                                 </p>
                              </li>
                           </ul>
                           <p>To used <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> to assert the purity of a function: In the package specification (not the package body), anywhere after the function declaration, use this syntax:
                           </p><pre class="oac_no_warn" dir="ltr">PRAGMA RESTRICT_REFERENCES (<span class="italic">function_name</span>, <span class="italic">assertion</span> [, <span class="italic">assertion</span>]... );
</pre><p>Where <span class="italic"><code class="codeph">assertion</code></span> is one of the following:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-2FBBF442-399F-4A03-B66E-0C1E5C6A9736__GUID-DE38865C-25D8-44D2-B0B5-3740239952D9">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table summarizes the assertions of the RESTRICT_REFERENCES pragma." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="14%" id="d58669e8533">Assertion</th>
                                    <th align="left" valign="bottom" width="86%" id="d58669e8536">Meaning</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d58669e8541" headers="d58669e8533 ">
                                       <p><code class="codeph">RNPS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="86%" headers="d58669e8541 d58669e8536 ">
                                       <p>The function reads no package state (does not reference the values of package variables)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d58669e8549" headers="d58669e8533 ">
                                       <p><code class="codeph">WNPS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="86%" headers="d58669e8549 d58669e8536 ">
                                       <p>The function writes no package state (does not change the values of package variables).</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d58669e8557" headers="d58669e8533 ">
                                       <p><code class="codeph">RNDS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="86%" headers="d58669e8557 d58669e8536 ">
                                       <p>The function reads no database state (does not query database tables).</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d58669e8565" headers="d58669e8533 ">
                                       <p><code class="codeph">WNDS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="86%" headers="d58669e8565 d58669e8536 ">
                                       <p>The function writes no database state (does not modify database tables).</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d58669e8573" headers="d58669e8533 ">
                                       <p><code class="codeph">TRUST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="86%" headers="d58669e8573 d58669e8536 ">
                                       <p>Trust that no SQL statement in the function body violates any assertion made for the function. For more information, see <a href="coding-subprograms-and-packages.html#GUID-3C2C075A-1425-44C4-9A69-C0BAB8E1BAD1">Specifying the Assertion TRUST</a>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p>If you do not specify <code class="codeph">TRUST</code>, and a SQL statement in the function body violates an assertion that you do specify, then the PL/SQL compiler issues an error message when it parses a violating statement.
                           </p>
                           <p>Assert the highest purity level (the most assertions) that the function allows, so that the PL/SQL compiler never rejects the function unnecessarily.</p>
                           <div class="infoboxnote" id="GUID-2FBBF442-399F-4A03-B66E-0C1E5C6A9736__GUID-E840C982-2A8A-42B9-B090-6706C294629C">
                              <p class="notep1">Note:</p>
                              <p>If the function invokes subprograms, then either specify <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code> for those subprograms also or specify <code class="codeph">TRUST</code> in either the invoking function or the invoked subprograms.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-2FBBF442-399F-4A03-B66E-0C1E5C6A9736__GUID-E61495AC-DBF8-4121-A67B-47091C5BAA9D">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS01339" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2FBBF442-399F-4A03-B66E-0C1E5C6A9736__GUID-0F68FF68-AA2B-4C7A-885B-CF10B59A5B2F">Topics:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-3C2C075A-1425-44C4-9A69-C0BAB8E1BAD1">Specifying the Assertion TRUST</a></p>
                              </li>
                              <li>
                                 <p><a href="coding-subprograms-and-packages.html#GUID-2B125FF5-DD29-413B-89BC-52BC15AA0616">Differences between Static and Dynamic SQL Statements</a></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div class="sect5"><a id="GUID-43642F83-8A51-42FD-AB01-E41DF38A6B5D" name="GUID-43642F83-8A51-42FD-AB01-E41DF38A6B5D"></a><h6 id="ADFNS-GUID-43642F83-8A51-42FD-AB01-E41DF38A6B5D" class="sect6">Example: PRAGMA RESTRICT_REFERENCES</h6>
                        <div>
                           <p>You can use the <code class="codeph">PRAGMA RESTRICT_REFERENCES</code> clause when you create a PL/SQL package.
                           </p>
                           <p><a href="coding-subprograms-and-packages.html#GUID-43642F83-8A51-42FD-AB01-E41DF38A6B5D__CIHEIHCD">Example 13-11</a> creates a function that neither reads nor writes database or package state, and asserts that is has the maximum purity level.
                           </p>
                           <div class="example" id="GUID-43642F83-8A51-42FD-AB01-E41DF38A6B5D__CIHEIHCD">
                              <p class="titleinexample">Example 13-11 PRAGMA RESTRICT_REFERENCES</p><pre class="oac_no_warn" dir="ltr">DROP TABLE accounts; -- in case it exists
CREATE TABLE accounts (
  acctno   INTEGER,
  balance  NUMBER
);
 
INSERT INTO accounts (acctno, balance)
VALUES (12345, 1000.00);
 
CREATE OR REPLACE PACKAGE finance AS
  <span class="bold">FUNCTION compound_</span> (
    years  IN NUMBER,
    amount IN NUMBER,
    rate   IN NUMBER
   ) RETURN NUMBER;
  <span class="bold">PRAGMA RESTRICT_REFERENCES (compound_, WNDS, WNPS, RNDS, RNPS)</span>;
END finance;
/
CREATE PACKAGE BODY finance AS
  <span class="bold">FUNCTION compound_</span> (
    years  IN NUMBER,
    amount IN NUMBER,
    rate   IN NUMBER
   ) RETURN NUMBER
   IS
   BEGIN
     RETURN amount * POWER((rate / 100) + 1, years);
   END compound_;
  <span class="bold">-- No pragma in package body</span>
END finance;
/
DECLARE
  interest NUMBER;
BEGIN
  SELECT finance.compound_(5, 1000, 6)
  INTO interest
  FROM accounts
  WHERE acctno = 12345;
END;
/</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="ADFNS392"></a><a id="ADFNS391"></a><a id="ADFNS390"></a><div class="props_rev_3"><a id="GUID-3C2C075A-1425-44C4-9A69-C0BAB8E1BAD1" name="GUID-3C2C075A-1425-44C4-9A69-C0BAB8E1BAD1"></a><h6 id="ADFNS-GUID-3C2C075A-1425-44C4-9A69-C0BAB8E1BAD1" class="sect6">Specifying the Assertion TRUST</h6>
                        <div>
                           <div class="section">
                              <p>When <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT</code> <code class="codeph">REFERENCES</code> specifies <code class="codeph">TRUST</code>, the PL/SQL compiler does not check the subprogram body for violations.
                              </p>
                              <p><code class="codeph">TRUST</code> makes it easier for a subprogram that uses <code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT</code> <code class="codeph">REFERENCES</code> to invoke subprograms that do not use it.
                              </p>
                              <p>If your PL/SQL subprogram invokes a C or Java subprogram, then you must specify <code class="codeph">TRUST</code> for either the PL/SQL subprogram (as in <a href="coding-subprograms-and-packages.html#GUID-3C2C075A-1425-44C4-9A69-C0BAB8E1BAD1__BABBAGBC">Example 13-12</a>) or the C or Java subprogram (as in <a href="coding-subprograms-and-packages.html#GUID-3C2C075A-1425-44C4-9A69-C0BAB8E1BAD1__BABDCDFI">Example 13-13</a>), because the PL/SQL compiler cannot check a C or Java subprogram for violations at runtime.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-3C2C075A-1425-44C4-9A69-C0BAB8E1BAD1__BABBAGBC">
                              <p class="titleinexample">Example 13-12 PRAGMA RESTRICT REFERENCES with TRUST on Invoker</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE p IS
  PROCEDURE java_sleep (milli_seconds IN NUMBER)
  AS LANGUAGE JAVA NAME 'java.lang.Thread.sleep(long)';
  
  <span class="bold">FUNCTION f</span> (n NUMBER) RETURN NUMBER;
  <span class="bold">PRAGMA RESTRICT_REFERENCES(f,WNDS,TRUST);</span>
END p;
/
CREATE OR REPLACE PACKAGE BODY p IS
  <span class="bold">FUNCTION f</span> (
    n NUMBER
  ) RETURN NUMBER
  IS
  BEGIN
    <span class="bold">java_sleep(n);</span>
     RETURN n;
  END f;
END p;
/</pre></div>
                           <!-- class="example" -->
                           <div class="example" id="GUID-3C2C075A-1425-44C4-9A69-C0BAB8E1BAD1__BABDCDFI">
                              <p class="titleinexample">Example 13-13 PRAGMA RESTRICT REFERENCES with TRUST on Invokee</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE p IS
  <span class="bold">PROCEDURE java_sleep</span> (milli_seconds IN NUMBER)
  AS LANGUAGE JAVA NAME 'java.lang.Thread.sleep(long)';
  <span class="bold">PRAGMA RESTRICT_REFERENCES(java_sleep,WNDS,TRUST)</span>;
  
  FUNCTION f (n NUMBER) RETURN NUMBER;
END p;
/
CREATE OR REPLACE PACKAGE BODY p IS
  <span class="bold">FUNCTION f</span> (
    n NUMBER
   ) RETURN NUMBER
   IS
   BEGIN
     <span class="bold">java_sleep(n);</span>
     RETURN n;
   END f;
END p;
/</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="ADFNS393"></a><div class="props_rev_3"><a id="GUID-2B125FF5-DD29-413B-89BC-52BC15AA0616" name="GUID-2B125FF5-DD29-413B-89BC-52BC15AA0616"></a><h6 id="ADFNS-GUID-2B125FF5-DD29-413B-89BC-52BC15AA0616" class="sect6">Differences Between Static and Dynamic SQL Statements</h6>
                        <div>
                           <p>A static <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> statement does not violate <code class="codeph">RNDS</code> if it does not explicitly read a database state (such as a table column). A dynamic <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> statement always violate <code class="codeph">RNDS</code>, regardless of whether it explicitly reads a database state.
                           </p>
                           <p>The following <code class="codeph">INSERT</code> statement violates <code class="codeph">RNDS</code> if it is executed dynamically, but not if it is executed statically:
                           </p><pre class="oac_no_warn" dir="ltr">INSERT INTO my_table values(3, 'BOB');
</pre><p>The following <code class="codeph">UPDATE</code> statement always violates <code class="codeph">RNDS</code>, whether it is executed statically or dynamically, because it explicitly reads the column <code class="codeph">name</code> of <code class="codeph">my_table</code>:
                           </p><pre class="oac_no_warn" dir="ltr">UPDATE my_table SET id=777 WHERE name='BOB';</pre></div>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1037"></a><a id="ADFNS99873"></a><div class="props_rev_3"><a id="GUID-7D7E93D3-FD00-42C7-85D1-2B8965CA99D5" name="GUID-7D7E93D3-FD00-42C7-85D1-2B8965CA99D5"></a><h3 id="ADFNS-GUID-7D7E93D3-FD00-42C7-85D1-2B8965CA99D5" class="sect3">Analyzing and Debugging Stored Subprograms</h3>
               <div>
                  <div class="section">
                     <p>To compile a stored subprogram, you must fix any syntax errors in the code. To ensure that the subprogram works correctly, performs well, and recovers from errors, you might need to do additional debugging. Such debugging might involve:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Adding extra output statements to verify execution progress and check data values at certain points within the subprogram.</p>
                           <p>To output the value of variables and expressions, use the <code class="codeph">PUT</code> and <code class="codeph">PUT_LINE</code> subprograms in the Oracle package <code class="codeph">DBMS_OUTPUT</code>.
                           </p>
                        </li>
                        <li>
                           <p>Analyzing the program and its execution in greater detail by running PL/Scope, the PL/SQL hierarchical profiler, or a debugger</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7D7E93D3-FD00-42C7-85D1-2B8965CA99D5__GUID-53D8B04D-CD37-4460-B9C3-68BE44A92C84">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-BAAD5B8A-02C5-4BDE-A7D4-3FA89755946A">PL/Scope</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-D3AB64E2-6E43-4B2A-A80C-2BE0438D7957">PL/SQL Hierarchical Profiler</a></p>
                        </li>
                        <li>
                           <p><a href="coding-subprograms-and-packages.html#GUID-42D1C32E-BCC0-46B3-94D4-E2341F776BF7" title="PL/SQL and Java code in the database can be debugged using Oracle SQL Developer, Oracle JDeveloper, and various third-party tools. The DBMS_DEBUG_JDWP package is used to establish connections between a database session and these debugger programs.">Debugging PL/SQL and Java</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-7D7E93D3-FD00-42C7-85D1-2B8965CA99D5__GUID-C1AE4F5F-B5FF-477C-9EC8-F1B76A3A8A5C">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS007" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about handling errors in PL/SQL subprograms and packages
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS036" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about <code class="codeph">DBMS_OUTPUT</code> package
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS362"></a><div class="props_rev_3"><a id="GUID-BAAD5B8A-02C5-4BDE-A7D4-3FA89755946A" name="GUID-BAAD5B8A-02C5-4BDE-A7D4-3FA89755946A"></a><h4 id="ADFNS-GUID-BAAD5B8A-02C5-4BDE-A7D4-3FA89755946A" class="sect4">PL/Scope</h4>
                  <div>
                     <p>PL/Scope lets you develop powerful and effective PL/Scope source code tools that increase PL/SQL developer productivity by minimizing time spent browsing and understanding source code.</p>
                     <p>For more information about PL/Scope, see <a href="plscope.html#GUID-24109CB5-7BB9-48B2-AD7A-39458AA13C0C" title="PL/Scope is a compiler-driven tool that collects PL/SQL and SQL identifiers as well as SQL statements usage in PL/SQL source code. By default, PUBLIC has SELECT privileges on various system tables and views, and EXECUTE privileges on various PL/SQL objects. By default, PL/Scope does not collect data for identifiers and statements in the PL/SQL source program. To enable and control what is collected, set the PL/SQL compilation parameter PLSCOPE_SETTINGS.PL/Scope usages are the verbs that describe actions performed on behalf of the identifier. Every identifier usage is given a numeric ID that is unique within the code unit.&nbsp; This is the USAGE_ID of the identifier.Identifier usages can be contexts for other identifier usages.&nbsp; This creates a one to many parent-child relationship among the usages. The USAGE_ID of the parent context usage is the USAGE_CONTEXT_ID for the child usages.The DBA_STATEMENTS static dictionary views family describes the SQL statements collected by PL/Scope. PL/Scope statement types represent the SQL statements used in PL/SQL.Each row in the DBA_STATEMENTS view represents a unique location of a SQL statement in the PL/SQL unit. This is equivalent to unique keys within a compilation unit.Statements can act as a context for other statements or identifiers. Statements can also be in the context of other statements or identifiers.Every SQL statement has a unique PL/Scope signature that identifies that instance of the statement in all the PL/SQL units.In addition to the PL/Scope data dictionary views, the following static dictionary views are most useful for PL/SQL programmers and are most often referenced in queries related to PL/SQL code management reports. This is not an exhaustive list of all static data dictionary views.">Using PL/Scope</a>.
                     </p>
                  </div>
               </div><a id="ADFNS363"></a><div class="props_rev_3"><a id="GUID-D3AB64E2-6E43-4B2A-A80C-2BE0438D7957" name="GUID-D3AB64E2-6E43-4B2A-A80C-2BE0438D7957"></a><h4 id="ADFNS-GUID-D3AB64E2-6E43-4B2A-A80C-2BE0438D7957" class="sect4">PL/SQL Hierarchical Profiler</h4>
                  <div>
                     <p>The PL/SQL hierarchical profiler reports the dynamic execution profile of your PL/SQL program, organized by subprogram calls. It accounts for SQL and PL/SQL execution times separately. Each subprogram-level summary in the dynamic execution profile includes information such as number of calls to the subprogram, time spent in the subprogram itself, time spent in the subprogram subtree (that is, in its descendent subprograms), and detailed parent-children information.</p>
                     <p>You can browse the generated HTML reports in any browser. The browser's navigational capabilities, combined with well chosen links, provide a powerful way to analyze performance of large applications, improve application performance, and lower development costs.</p>
                     <div class="infoboxnotealso" id="GUID-D3AB64E2-6E43-4B2A-A80C-2BE0438D7957__NOTE-123-CABF8F4E">
                        <p class="notep1">See Also:</p>
                        <p><a href="hierarchical-profiler.html#GUID-B2E3A739-08C6-4648-A65F-1D093A0DADDE" title="Understanding DBMS_HPROF.ANALYZE SQL-level reports.">Using the PL/SQL Hierarchical Profiler</a> for more information about PL/SQL hierarchical profiler
                        </p>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-42D1C32E-BCC0-46B3-94D4-E2341F776BF7" name="GUID-42D1C32E-BCC0-46B3-94D4-E2341F776BF7"></a><h4 id="ADFNS-GUID-42D1C32E-BCC0-46B3-94D4-E2341F776BF7" class="sect4">Debugging PL/SQL and Java</h4>
                  <div>
                     <p>PL/SQL and Java code in the database can be debugged using Oracle SQL Developer, Oracle JDeveloper, and various third-party tools.  The DBMS_DEBUG_JDWP package is used to establish connections between a database session and these debugger programs. </p>
                     <p>It is possible to investigate a problem occurring in a long running test, or in a production environment by connecting to the session to debug from another session. While debugging a session, it is possible to inspect the state of in-scope variables and to examine the database state as the session being debugged sees it during an uncommitted transaction. When stopped at a breakpoint, it is possible for the debugging user to issue SQL commands, and run PL/SQL code invoking stored PL/SQL subprograms in an anonymous block if necessary.</p>
                     <div class="infoboxnotealso" id="GUID-42D1C32E-BCC0-46B3-94D4-E2341F776BF7__ORACLEDATABASEPLSQLLANGUAGEREFERENC-5CDDDDEB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=RPTUG-GUID-2DCC7144-A46F-4361-9B09-955E1154D7CB" target="_blank"><span class="italic">Oracle SQL Developer User’s Guide</span></a> for more information about running and debugging functions and procedures
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDEV13192" target="_blank"><span class="italic">Oracle Database Java Developer's Guide</span></a> for information about using the Java Debug Wire Protocol  (JDWP) PL/SQL Debugger 
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS-GUID-AFF566A0-9E90-4218-B5C6-A74C3BF1CE14" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_DEBUG_JDWP</code> package
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN-GUID-AFF714A6-946A-4568-9B99-6EF82C7DC447" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">V$PLSQL_DEBUGGABLE_SESSIONS</code> view
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADFNS313"></a><div class="props_rev_3"><a id="GUID-58B89FA9-16ED-47A5-A5F8-5685552322C3" name="GUID-58B89FA9-16ED-47A5-A5F8-5685552322C3"></a><h5 id="ADFNS-GUID-58B89FA9-16ED-47A5-A5F8-5685552322C3" class="sect5">Compiling Code for Debugging</h5>
                     <div>
                        <div class="section">
                           <p>A debugger can stop on individual code lines and access variables only in code compiled with debug information generated.</p>
                           <p>To compile a PL/SQL unit with debug information generated, set the compilation parameter <code class="codeph">PLSQL_OPTIMIZE_LEVEL</code> to 1 (the default value is 2).
                           </p>
                           <div class="infoboxnote" id="GUID-58B89FA9-16ED-47A5-A5F8-5685552322C3__GUID-F6DB71E1-CD72-4BA2-9A33-365FFCBDE506">
                              <p class="notep1">Note:</p>
                              <p>The PL/SQL compiler never generates debug information for code hidden with the PL/SQL <code class="codeph">wrap</code> utility.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-58B89FA9-16ED-47A5-A5F8-5685552322C3__NOTE-1314-CABFB063">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS016" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <code class="codeph">wrap</code> utility
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="coding-subprograms-and-packages.html#GUID-DF29C489-E8F5-4171-8CF1-AE86032111BF">Overview of PL/SQL Units</a> for information about PL/SQL units
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN10255" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about <code class="codeph">PLSQL_OPTIMIZE_LEVEL</code></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS366"></a><div class="props_rev_3"><a id="GUID-5C7978B5-2C67-496B-9B36-3A05357D428A" name="GUID-5C7978B5-2C67-496B-9B36-3A05357D428A"></a><h5 id="ADFNS-GUID-5C7978B5-2C67-496B-9B36-3A05357D428A" class="sect5">Privileges for Debugging PL/SQL and Java Stored Subprograms</h5>
                     <div>
                        <p>For a session to connect to a debugger, the effective user at the time of the connect operation must have the <code class="codeph">DEBUG CONNECT SESSION</code> , <code class="codeph">DEBUG CONNECT ANY</code>, or appropriate <code class="codeph">DEBUG CONNECT ON USER</code> privilege. The effective user might be the owner of a DR subprogram involved in making the connect call.
                        </p>
                        <p>When a session connects to a debugger, the session login user and the enabled session-level roles are fixed as the privilege environment for that debugging connection. The privileges needed for debugging must be granted to that combination of user and roles on the relevant code. The privileges are:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To display and change variables declared in a PL/SQL package specification or Java public variables: either <code class="codeph">EXECUTE</code> or <code class="codeph">DEBUG</code>.
                              </p>
                           </li>
                           <li>
                              <p>To display and change private variables, or to breakpoint and run code lines step by step: <code class="codeph">DEBUG</code></p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-5C7978B5-2C67-496B-9B36-3A05357D428A__GUID-BB0C4918-849C-4726-8118-93B90E2A9D35">
                           <p class="notep1">Caution:</p>
                           <p>The <code class="codeph">DEBUG</code> privilege allows a debugging session to do anything that the subprogram being debugged could have done if that action had been included in its code.
                           </p>
                        </div>
                        <p>Granting the <code class="codeph">DEBUG</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code> system privilege is equivalent to granting the <code class="codeph">DEBUG</code> privilege on all objects in the database. Objects owned by <code class="codeph">SYS</code> are included if the value of the <code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code> parameter is <code class="codeph">TRUE</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-5C7978B5-2C67-496B-9B36-3A05357D428A__GUID-358DFD51-D237-473F-8199-66E96F6A5521">
                           <p class="notep1">Caution:</p>
                           <p>Granting the <code class="codeph">DEBUG</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code> privilege, or granting the <code class="codeph">DEBUG</code> privilege on any object owned by <code class="codeph">SYS</code>, grants complete rights to the database.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-5C7978B5-2C67-496B-9B36-3A05357D428A__GUID-9827B4FC-2FD5-480F-AE1F-DAE4A1CD0844">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about system and object privileges
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../jjdev/database-contents-Oracle-JVM-security.html#JJDEV13344" target="_blank"><span class="italic">Oracle Database Java Developer's Guide</span></a> for information about privileges for debugging Java subprograms
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_DEBUG_JDWP.html#ARPLS-GUID-200AB599-E581-4CB7-A062-57B43986037D" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the DBMS_DEBUG_JDWP package security model
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1032"></a><a id="ADFNS1033"></a><a id="ADFNS341"></a><div class="props_rev_3"><a id="GUID-819553BB-9DC8-45A6-88EC-8BAF797C634E" name="GUID-819553BB-9DC8-45A6-88EC-8BAF797C634E"></a><h3 id="ADFNS-GUID-819553BB-9DC8-45A6-88EC-8BAF797C634E" class="sect3">Package Invalidations and Session State</h3>
               <div>
                  <p>Each session that references a package object has its own instance of the corresponding package, including persistent state for any public and private variables, cursors, and constants. If any of the session's instantiated packages (specification or body) are invalidated, then all package instances in the session are invalidated and recompiled. Therefore, the session state is lost for all package instances in the session.</p>
                  <p>When a package in a given session is invalidated, the session receives ORA-04068 the first time it tries to use any object of the invalid package instance. The second time a session makes such a package call, the package is reinstantiated for the session without error. However, if you handle this error in your application, be aware of the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For optimal performance, Oracle Database returns this error message only when the package state is discarded. When a subprogram in one package invokes a subprogram in another package, the session state is lost for both packages.</p>
                     </li>
                     <li>
                        <p>If a server session traps ORA-04068, then ORA-04068 is not raised for the client session. Therefore, when the client session tries to use an object in the package, the package is not reinstantiated. To reinstantiate the package, the client session must either reconnect to the database or recompile the package.</p>
                     </li>
                  </ul>
                  <p>In most production environments, DDL operations that can cause invalidations are usually performed during inactive working hours; therefore, this situation might not be a problem for end-user applications. However, if package invalidations are common in your system during working hours, then you might want to code your applications to handle this error when package calls are made.</p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-28215E66-071A-4AC3-9FDA-A009A0EB6A88" name="GUID-28215E66-071A-4AC3-9FDA-A009A0EB6A88"></a><h3 id="ADFNS-GUID-28215E66-071A-4AC3-9FDA-A009A0EB6A88" class="sect3">Example: Raising an ORA-04068 Error</h3>
               <div>
                  <p>You can use the <code class="codeph">RAISE</code> clause to raise exceptions.
                  </p>
                  <p>In <a href="coding-subprograms-and-packages.html#GUID-28215E66-071A-4AC3-9FDA-A009A0EB6A88__BABCFFEC">Example 13-14</a>, the <code class="codeph">RAISE</code> statement raises the current exception, ORA-04068, which is the cause of the exception being handled, ORA-06508. ORA-04068 is not trapped.
                  </p>
                  <div class="example" id="GUID-28215E66-071A-4AC3-9FDA-A009A0EB6A88__BABCFFEC">
                     <p class="titleinexample">Example 13-14 Raising ORA-04068</p><pre class="oac_no_warn" dir="ltr">PROCEDURE p IS
  package_exception EXCEPTION;
  PRAGMA EXCEPTION_INIT (package_exception, -6508);
BEGIN
 ...
EXCEPTION
  WHEN package_exception THEN
    <span class="bold">RAISE;</span>
END;
/
</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-BDFBDCC9-FDD4-41DB-9930-456A793D9AF4" name="GUID-BDFBDCC9-FDD4-41DB-9930-456A793D9AF4"></a><h3 id="ADFNS-GUID-BDFBDCC9-FDD4-41DB-9930-456A793D9AF4" class="sect3">Example: Trapping ORA-04068</h3>
               <div>
                  <p>You can use the <code class="codeph">RAISE</code> statement in a package definition to trap errors.
                  </p>
                  <p>In <a href="coding-subprograms-and-packages.html#GUID-BDFBDCC9-FDD4-41DB-9930-456A793D9AF4__BABIFBBB">Example 13-15</a>, the <code class="codeph">RAISE</code> statement raises the exception ORA-20001 in response to ORA-06508, instead of the current exception, ORA-04068. ORA-04068 is trapped. When this happens, the ORA-04068 error is masked, which stops the package from being reinstantiated.
                  </p>
                  <div class="example" id="GUID-BDFBDCC9-FDD4-41DB-9930-456A793D9AF4__BABIFBBB">
                     <p class="titleinexample">Example 13-15 Trapping ORA-04068</p><pre class="oac_no_warn" dir="ltr">PROCEDURE p IS
  package_exception EXCEPTION;
  other_exception   EXCEPTION;
  PRAGMA EXCEPTION_INIT (package_exception, -6508);
  PRAGMA EXCEPTION_INIT (other_exception, -20001);
BEGIN
 ...
EXCEPTION
  WHEN package_exception THEN
    ...
    <span class="bold">RAISE other_exception;</span>
END;
/
</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Memory Guard is implemented as a daemon running as an MBean in a J2EE container managed by Cluster Ready Services (CRS).">
      <meta name="description" content="Memory Guard is implemented as a daemon running as an MBean in a J2EE container managed by Cluster Ready Services (CRS).">
      <title>Memory Guard Architecture</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User’s Guide">
      <meta property="og:description" content="Memory Guard is implemented as a daemon running as an MBean in a J2EE container managed by Cluster Ready Services (CRS).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96320-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="memory-guard-overview.html" title="Previous" type="text/html">
      <link rel="next" href="enabling-memory-guard-oracle-rac-environment.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide">
    <meta name="dcterms.isVersionOf" content="ATNMS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="memory-guard-overview.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="enabling-memory-guard-oracle-rac-environment.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="automatic-problem-solving.html" property="item" typeof="WebPage"><span property="name">Automatic Problem Solving</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="purpose-memory-guard.html" property="item" typeof="WebPage"><span property="name">Resolving Memory Stress</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Memory Guard Architecture</li>
            </ol>
            <a id="GUID-32CEC3E8-755D-4A43-85FE-C9B35120FEC1" name="GUID-32CEC3E8-755D-4A43-85FE-C9B35120FEC1"></a>
            
            <h2 id="ATNMS-GUID-32CEC3E8-755D-4A43-85FE-C9B35120FEC1" class="sect2"><span class="enumeration_section">11.2 </span>Memory Guard Architecture
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Memory Guard is implemented as a daemon running as an MBean in a J2EE container managed by Cluster Ready Services (CRS).</p>
               <p>Memory Guard is hosted on the <code class="codeph">qosmserver</code> resource that runs on any cluster node for high availability.
               </p>
               <div class="p">
                  <div class="figure" id="GUID-32CEC3E8-755D-4A43-85FE-C9B35120FEC1__GUID-FF317C13-8E5A-4E99-ABA3-A5458E3EC6F2">
                     <p class="titleinfigure">Figure 11-1 Memory Guard Architecture</p><img src="img/mg-architecture.png" alt="Description of Figure 11-1 follows" title="Description of Figure 11-1 follows" longdesc="img_text/mg-architecture.html"><br><a href="img_text/mg-architecture.html">Description of "Figure 11-1 Memory Guard Architecture"</a></div>
                  <!-- class="figure" -->
               </div>
               <p>Cluster Health Monitor sends a metrics stream to Memory Guard that provides real-time information about memory resources for the cluster nodes. This information includes the following:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>Amount of available memory</p>
                  </li>
                  <li>
                     <p>Amount of memory currently in use</p>
                  </li>
               </ul>
               <p>After getting memory resource information, Memory Guard collects the cluster topology from Oracle Clusterware. Memory Guard uses cluster topology and memory metrics to identify database nodes that have memory stress. Memory is considered stressed when the free memory is less than a certain threshold.</p>
               <p>Memory Guard then stops the database services managed by Oracle Clusterware on the stressed node transactionally. Memory Guard relieves the memory stress without affecting already running sessions and their associated transactions. After completion, the memory used by these processes starts freeing up and adding to the pool of the available memory on the node. When Memory Guard detects that the amount of available memory is more than the threshold, it restarts the services on the affected node. </p>
               <p>While a service is stopped on a stressed node, the listener redirects new connections for that service to other nodes that provide the same service for non-singleton database instances. However, for the policy-managed databases, the last instance of a service is not stopped to ensure availability.</p>
               <div class="infoboxnote" id="GUID-32CEC3E8-755D-4A43-85FE-C9B35120FEC1__GUID-0B595FA8-80E4-42F1-9D21-84BAA1F580A8">
                  <p class="notep1">Note:</p>
                  <p>Memory Guard can start or stop the services for databases in the <strong class="term">Open</strong> state. Memory Guard does not manage the default database service and does not act while upgrading or downgrading a database.
                  </p>
               </div>
            </div>
            <div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="purpose-memory-guard.html#GUID-5EBC917F-2810-469D-9DAE-EA6EB2F123D8" title="Memory Guard continuously monitors and ensures the availability of cluster nodes by preventing the nodes from being evicted when the nodes are stressed due to lack of memory.">Resolving Memory Stress</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>
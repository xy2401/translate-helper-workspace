<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">
      <meta name="description" content="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">
      <title>Using the Pre-Upgrade Information Tool for Oracle Database</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Upgrade Guide">
      <meta property="og:description" content="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Upgrade Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00">
      <meta name="dcterms.title" content="Database Upgrade Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96252-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="prerequisites-for-preparing-oracle-home-on-windows.html" title="Previous" type="text/html">
      <link rel="next" href="testing-upgraded-production-oracle-database.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="prerequisites-for-preparing-oracle-home-on-windows.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="testing-upgraded-production-oracle-database.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Upgrade Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="tasks-prepare-upgrade-oracle-database.html" property="item" typeof="WebPage"><span property="name"> Preparing to Upgrade Oracle Database </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using the Pre-Upgrade Information Tool for Oracle Database</li>
            </ol>
            <a id="GUID-C0219AF1-AD43-4097-B358-E53E48958647" name="GUID-C0219AF1-AD43-4097-B358-E53E48958647"></a>
            
            <h2 id="UPGRD-GUID-C0219AF1-AD43-4097-B358-E53E48958647" class="sect2">Using the Pre-Upgrade Information Tool for Oracle Database</h2>
         </header>
         <div class="ind">
            <div>
               <p>Review these topics to understand and to use the Pre-Upgrade information tool (<code>preupgrade.jar</code>).
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C4B1F17F-D133-4A6A-B5D8-8244604C2B74">About the Pre-Upgrade Information Tool</a><br>Run the Pre-Upgrade Information Tool on your earlier release Oracle Database to determine if it is ready for upgrading.
                  </li>
                  <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-B6EDBCBE-CD3C-464D-9B7B-97DE8A655AE4">Preupgrade Scripts Generated By the Pre-Upgrade Information Tool</a><br>You can run preupgrade scripts that the Pre-Upgrade Information Tool generates to fix many issues before you upgrade to the new Oracle Database release.
                  </li>
                  <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-ADF44356-F67C-4E95-912B-9DD13FF26888">Postupgrade Scripts Generated By the Pre-Upgrade Information Tool</a><br>After the upgrade, you can run the postupgrade scripts that the Pre-Upgrade Information Tool generates to complete fixups of your upgrade target database.
                  </li>
                  <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-DCB43F8E-87F1-4F5D-A6EB-388755BAC952">Setting Up Environment Variables for the Pre-Upgrade Information Tool</a><br>Before you run the Pre-Upgrade Information Tool, set up the user environment variables for the Oracle user that runs the tool. 
                  </li>
                  <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0">Pre-Upgrade Information Tool (preupgrade.jar) Command</a><br>Use Pre-Upgrade Information Tool (<code>preupgrade.jar</code>) commands to check your system before upgrades. 
                  </li>
                  <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-AEA50E7D-48B8-4EB0-A416-130C2A804F4A">Output of the Pre-Upgrade Information Tool</a><br>The Pre-Upgrade Information Tool (<code>preupgrade.jar</code>) creates fixup scripts and log files in the output directory that you specify with the DIR command-line option. 
                  </li>
                  <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-0C496815-1826-4E28-8437-36FA549000F9">Pre-Upgrade Information Tool Output Example</a><br>In this example, you can see how the Pre-Upgrade Information Tool displays recommended fixes, but does not carry out fixes automatically.
                  </li>
                  <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-DC0F9DF2-4001-48E5-AC18-4F2FA10B869E">Pre-Upgrade Information Tool Warnings and Recommendations for Oracle Database</a><br>Analyze any Pre-Upgrade Information Tool warnings before you upgrade to the new release of Oracle Database. For each item that the tool reports, it provides you with information about how to fix the issue or warning.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="tasks-prepare-upgrade-oracle-database.html#GUID-733D2563-A42D-4366-9FCD-DABD25D0E2DF" title="Complete preupgrade tasks and checks to assist you with completing a successful upgrade.">Preparing to Upgrade Oracle Database</a></p>
                  </div>
               </div>
            </div>
            <a id="UPGRD52783"></a><div class="props_rev_3"><a id="GUID-C4B1F17F-D133-4A6A-B5D8-8244604C2B74" name="GUID-C4B1F17F-D133-4A6A-B5D8-8244604C2B74"></a><h3 id="UPGRD-GUID-C4B1F17F-D133-4A6A-B5D8-8244604C2B74" class="sect3">About the Pre-Upgrade Information Tool</h3>
               <div>
                  <p>Run the Pre-Upgrade Information Tool on your earlier release Oracle Database to determine if it is ready for upgrading.</p>
                  <p>To help to ensure a successful upgrade, Oracle strongly recommends that you run the Pre-Upgrade Information Tool before you begin your upgrade, and use the preupgrade and postupgrade scripts that it generates to help to assist you with fixing any issues that the tool discovers. </p>
                  <p>Oracle Database 12<span class="italic">c</span> and later releases use the<code>preupgrade.jar</code> Pre-Upgrade Information Tool. You can run the tool from the operating system command line. In previous Oracle Database releases, the Pre-Upgrade Information Tool was run within SQL*Plus as a SQL file. The Pre-Upgrade Information Tool creates preupgrade scripts, which fix issues before you start an upgrade, and postupgrade scripts, which fix issues after an upgrade is completed.
                  </p>
                  <p>The Pre-Upgrade Information Tool (<code>preupgrade.jar</code>) creates the following files:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The log file <code class="codeph">preupgrade.log</code>. 
                        </p>
                        <p>The log file contains the output of the Pre-Upgrade Information Tool.</p>
                     </li>
                     <li>
                        <p>The <code class="codeph">preupgrade_fixups_<span class="variable" translate="no">pdbname</span>.sql</code> (for PDBs, where <code class="codeph"><span class="variable" translate="no">pdbname</span></code> is the name of the PDB) or <code class="codeph">preupgrade_fixups.sql</code> script (Non-CDB databases). 
                        </p>
                        <p>Before you run the upgrade, you can run the preupgrade fixups script manually in SQL*Plus to resolve many of the issues identified by the preupgrade tool.</p>
                     </li>
                     <li>
                        <p>The <code class="codeph">postupgrade_fixups_<span class="variable" translate="no">pdbname</span>.sql</code> (for PDBs, where <code class="codeph"><span class="variable" translate="no">pdbname</span></code> is the name of the PDB) or <code class="codeph">postupgrade_fixups.sql</code> script (Non-CDB databases). 
                        </p>
                        <p>You can run this script to fix issues after the database upgrade is completed.</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C0219AF1-AD43-4097-B358-E53E48958647" title="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">Using the Pre-Upgrade Information Tool for Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-B6EDBCBE-CD3C-464D-9B7B-97DE8A655AE4" name="GUID-B6EDBCBE-CD3C-464D-9B7B-97DE8A655AE4"></a><h3 id="UPGRD-GUID-B6EDBCBE-CD3C-464D-9B7B-97DE8A655AE4" class="sect3">Preupgrade Scripts Generated By the Pre-Upgrade Information Tool</h3>
               <div>
                  <p>You can run preupgrade scripts that the Pre-Upgrade Information Tool generates to fix many issues before you upgrade to the new Oracle Database release.</p>
                  <p>The location of the <code class="codeph">preupgrade_fixups.sql</code> and log files depends on how you set output folders, or define the Oracle base environment variable. 
                  </p>
                  <p>If you specify an output directory by using the <code>dir</code> option with the Pre-Upgrade Information Tool, then the output logs and files are placed under that directory in the file path /<code>cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code>, where <code class="codeph"><span class="variable" translate="no">dbunique_name</span></code> is the name of your source Oracle Database. If you do not specify an output directory when you run the Pre-Upgrade Information Tool, then the output is directed to one of the following default locations:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you do not specify an output directory with <code class="codeph">DIR</code>, but you have set an Oracle base environment variable, then the generated scripts and log files are created in the following file path: 
                        </p>
                        <p><code><span class="variable" translate="no">Oracle-base</span>/cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code></p>
                     </li>
                     <li>
                        <p>If you do not specify an output directory, and you have not defined an Oracle base environment variable, then the generated scripts and log files are created in the following file path: </p>
                        <p><code class="codeph"><span class="variable" translate="no">Oracle-home</span>/cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code></p>
                     </li>
                  </ul>
                  <p>The fixup scripts that the Pre-Upgrade Information Tool creates depend on whether your source database is a Non-CDB database, or a CDB database: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A log file (<code class="codeph">preupgrade.log</code>).
                        </p>
                        <p>The log file contains log output for the Pre-Upgrade Information Tool.</p>
                     </li>
                     <li>
                        <p>Pre-upgrade fixups SQL scripts, depending on your source database type:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Non-CDB</span>: <code class="codeph">preupgrade_fixups.sql</code></p>
                           </li>
                           <li>
                              <p><span class="bold">CDB</span>: Two different sets of scripts: 
                              </p>
                              <ol>
                                 <li>
                                    <p><code class="codeph">preupgrade_fixups.sql</code>: A consolidated script for all PDBs. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>Multiple <code class="codeph">preupgrade_fixups_<span class="variable" translate="no">pdbname</span>.sql</code> scripts, where<code class="codeph"><span class="variable" translate="no">pdbname</span></code> is the name of the PDB for which a script is generated: Individual scripts, which you run on specific PDBs.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ul>
                        <p>Run the scripts either by using <code class="codeph">catcon.pl</code>, or by using SQL*Plus commands. You must run these scripts to fix issues before you start the database upgrade. The scripts resolve many of the issues identified by the preupgrade tool. 
                        </p>
                        <p>Each issue that the scripts identify includes a description of the problem, and a task that you can carry out to resolve the problem. The preupgrade tool itself does not make changes to your database to correct errors. However, you can run the scripts that it generates to correct identified errors. The scripts fix only those issues that an automated script can fix safely. Preupgrade issues that the automated script cannot fix safely typically require DBA knowledge of user applications. You can address those issues manually.</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C0219AF1-AD43-4097-B358-E53E48958647" title="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">Using the Pre-Upgrade Information Tool for Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-ADF44356-F67C-4E95-912B-9DD13FF26888" name="GUID-ADF44356-F67C-4E95-912B-9DD13FF26888"></a><h3 id="UPGRD-GUID-ADF44356-F67C-4E95-912B-9DD13FF26888" class="sect3">Postupgrade Scripts Generated By the Pre-Upgrade Information Tool</h3>
               <div>
                  <p>After the upgrade, you can run the postupgrade scripts that the Pre-Upgrade Information Tool generates to complete fixups of your upgrade target database.</p>
                  <p>The Pre-Upgrade Information Tool generates postupgrade fixup scripts, which you can run after the upgrade to fix issues that can be fixed after the upgrade. </p>
                  <p>The location of the postupgrade SQL scripts and log files depends on how you set output folders, or define the Oracle base environment variable. The postupgrade fixup scripts are placed in the same directory path as the preupgrade fixup scripts. </p>
                  <p>If you specify an output directory by using the <code>dir</code> option with the Pre-Upgrade Information Tool, then the output logs and files are placed under that directory in the file path /<code>cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code>, where <code class="codeph"><span class="variable" translate="no">dbunique_name</span></code> is the name of your source Oracle Database. If you do not specify an output directory when you run the Pre-Upgrade Information Tool, then the output is directed to one of the following default locations:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you do not specify an output directory with <code class="codeph">DIR</code>, but you have set an Oracle base environment variable, then the generated scripts and log files are created in the following file path: 
                        </p>
                        <p><code><span class="variable" translate="no">Oracle-base</span>/cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code></p>
                     </li>
                     <li>
                        <p>If you do not specify an output directory, and you have not defined an Oracle base environment variable, then the generated scripts and log files are created in the following file path: </p>
                        <p><code class="codeph"><span class="variable" translate="no">Oracle-home</span>/cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code></p>
                     </li>
                  </ul>
                  <p>The postupgrade fixup scripts that the Pre-Upgrade Information Tool creates depend on whether your source database is a Non-CDB database, or a CDB database: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Non-CDB</span>: <code>postupgrade_fixups.sql</code></p>
                     </li>
                     <li>
                        <p><span class="bold">CDB</span>: Two different sets of scripts:
                        </p>
                        <ol>
                           <li>
                              <p><code class="codeph">postupgrade_fixups.sql</code>: A consolidated script for all PDBs
                              </p>
                           </li>
                           <li>
                              <p>Multiple <code class="codeph">postupgrade_fixups_<span class="variable" translate="no">pdbname</span>.sql</code> scripts, where<code class="codeph"><span class="variable" translate="no">pdbname</span></code> is the name of the PDB for which a script is generated: Individual scripts, which you run on specific PDBs.
                              </p>
                           </li>
                        </ol>
                     </li>
                  </ul>
                  <p>Postupgrade issues that the automatic script cannot fix safely typically require DBA knowledge of user applications. You can address those issues manually.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-ADF44356-F67C-4E95-912B-9DD13FF26888__GUID-4760329F-B09A-4CDC-86C1-230F9F065A04">Guidelines for Running Postupgrade Fixup Scripts for Non-CDB Databases</p>
                     <p>Oracle recommends that when you run the postupgrade scripts, you set the system to spool results to a log file so you can read the output. However, do not spool results to the <code>admin</code> directory:
                     </p>
                     <p>After you run postupgrade scripts, you can run the Post-Upgrade Status Tool to check the status of your server. </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-54415206-25BF-46EE-BAF4-1AA6FCEB90B2">Running Postupgrade Fixup Scripts</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C0219AF1-AD43-4097-B358-E53E48958647" title="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">Using the Pre-Upgrade Information Tool for Oracle Database</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-DCB43F8E-87F1-4F5D-A6EB-388755BAC952" name="GUID-DCB43F8E-87F1-4F5D-A6EB-388755BAC952"></a><h3 id="UPGRD-GUID-DCB43F8E-87F1-4F5D-A6EB-388755BAC952" class="sect3">Setting Up Environment Variables for the Pre-Upgrade Information Tool</h3>
               <div>
                  <p>Before you run the Pre-Upgrade Information Tool, set up the user environment variables for the Oracle user that runs the tool. </p>
                  <div class="section">
                     <p>You must set up the user environment variables for the Pre-Upgrade Information Tool. This example shows how to use shell commands to set up user environment variables to point to an earlier release Oracle home. For multitenant architecture upgrades, you must also open up all the PDBs that you want the tool to analyze. </p>
                     <p>In this example, the operating system is Linux or Unix, the system identifier is <code class="codeph">sales01</code>, and the earlier release Oracle home path is <code>/u01/app/oracle/product/12.1.0/dbhome_1</code></p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Log in as the Oracle installation owner (<code class="codeph">oracle</code>).</span></li>
                     <li class="stepexpand"><span>Set up the user environment variables to point to the earlier release Oracle home that you want to upgrade. </span><div>
                           <p>For example:</p><pre class="pre codeblock"><code>$ export ORACLE_HOME=/u01/app/oracle/product/12.1.0/dbhome_1
$ export ORACLE_BASE=/u01/app/oracle
$ export ORACLE_SID=sales01
$ export PATH=.:$ORACLE_HOME/bin:$PATH</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>(Multitenant architecture upgrades): If you are running the Pre-Upgrade Information Tool in a CDB, then use the command <code class="codeph">alter pluggable database all open</code> to open the PDBs so that the tool can analyze them.</span><div>
                           <div class="p">For example: Log in to the database and enter the following command to open all PDBs:<pre class="pre codeblock"><code>$ sqlplus \ as SYSDBA
.
.
.
SQL&gt; alter pluggable database all open;</code></pre></div>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C0219AF1-AD43-4097-B358-E53E48958647" title="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">Using the Pre-Upgrade Information Tool for Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0" name="GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0"></a><h3 id="UPGRD-GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0" class="sect3">Pre-Upgrade Information Tool (preupgrade.jar) Command</h3>
               <div>
                  <p>Use Pre-Upgrade Information Tool (<code>preupgrade.jar</code>) commands to check your system before upgrades. 
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0__GUID-034099AD-5549-40AA-B2BE-98594B2E6328">Prerequisites</p>
                     <p>The Pre-Upgrade Information Tool is in the new release Oracle home, in the file path <code>ORACLE_HOME/rdbms/admin/preupgrade.jar</code>. Oracle has configured it with the system checks necessary for the new Oracle Database release. However, the checks that the tool performs are carried out on the earlier release Oracle Database home. Set up the Oracle user environment variables so that they point to the earlier release Oracle home.
                     </p>
                     <p>Run the Pre-Upgrade Information Tool by using the Java version in your earlier release Oracle home. For multitenant architecture (CDB and PDB) upgrades, open up all the PDBs that you want the tool to analyze before you run the tool. </p>
                     <p>Set the environment variables for your user account to point to the earlier release ORACLE_HOME, ORACLE_BASE, and ORACLE_SID. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0__GUID-EB69E65A-1126-4198-90CA-1ADAD4DDBDDF">File Path</p>
                     <p>The <code>preupgrade.jar</code> file is located in the new Oracle home:
                     </p><pre class="pre codeblock"><code><span class="variable" translate="no">New_release_Oracle_home</span>/rdbms/admin/preupgrade.jar</code></pre><p>You can also copy the <code>preupgrade.jar</code> binaries to a path of your choosing. For example:
                     </p><code>/tmp/preupgrade.jar</code></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0__GUID-2F848E93-ADBC-47F5-B8D0-AA30DA00A739">Syntax</p><pre class="pre codeblock"><code>$<span class="variable" translate="no">Earlier_release_Oracle_home</span>/jdk/bin/java -jar $<span class="variable" translate="no">New_release_Oracle_home</span>
/rdbms/admin/preupgrade.jar [FILE|TERMINAL] [TEXT|XML] [DIR <span class="variable" translate="no">output_dir</span>] </code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0__GUID-1825913F-43A2-43D7-B050-C88808E7676C">Options</p>
                     <div class="tblformal" id="GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0__GUID-77D9FF92-BDC4-4F2A-A48A-C5A4F31F78DE">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Pre-Upgrade Information Tool (preupgrade.jar) command syntax options. This table shows the command-line option, and describes its purpose. " frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d13104e914">Command Option</th>
                                 <th align="left" valign="bottom" width="20%" id="d13104e916">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e920" headers="d13104e914 ">
                                    <p><code class="codeph">FILE|TERMINAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e920 d13104e916 ">
                                    <p>Script output location. Use FILE to direct script output to a file. Use TERMINAL to direct output to the terminal. If you do not specify a value, then the default is FILE. If you specify TERMINAL, then screen output is directed to the display, and scripts and logs are placed in the output directory path. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e928" headers="d13104e914 ">
                                    <p><code class="codeph">TEXT|XML</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e928 d13104e916 ">
                                    <p>Output type. Use TEXT to specify text output. Use XML to specify XML output. If you do not specify an output type, then the default is text. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e936" headers="d13104e914 ">
                                    <p><code class="codeph">DIR <span class="variable" translate="no">output_dir</span></code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e936 d13104e916 ">
                                    <p>Directs the output to a specific directory. If you do not specify an output directory with the <code class="codeph">DIR</code> option, then the output is directed to one of the following default locations:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>If you do not specify an output directory with <code class="codeph">DIR</code>, but you define an <code class="codeph"><span class="variable" translate="no">ORACLE_BASE</span></code> environment variable, then the generated scripts and log files are created.
                                          </p>
                                       </li>
                                       <li>
                                          <p>If you do not specify an output directory, and <code class="codeph"><span class="variable" translate="no">ORACLE_BASE</span></code> is not defined, then the generated scripts and log files are created in the following path:
                                          </p>
                                          <p><code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span>/cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e975" headers="d13104e914 ">
                                    <p><code class="codeph">-c "pdb1 pdb2 pdb3"</code> (Windows)
                                    </p>
                                    <p><code class="codeph">-c 'pdb1 pdb2 pdb3'</code> (Linux and UNIX)
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e975 d13104e916 ">
                                    <p>Specifies a list of containers inside a CDB that you want to include for processing (a "White list"). Provide a space-delimited list of PDBs that you want processed. To specify the list, use single quotes on Linux and UNIX operating systems, and use double quotes on Windows systems.</p>
                                    <p>If you do not specify either <code class="codeph">-c</code> or <code class="codeph">-C</code>, then all PDBs in a CDB are processed. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e996" headers="d13104e914 ">
                                    <p><code class="codeph">-C "pdb1 pdb2 pdb3"</code> (Windows)
                                    </p>
                                    <p><code class="codeph">-C 'pdb1 pdb2 pdb3'</code> (Linux and UNIX)
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e996 d13104e916 ">
                                    <p>Specifies a list of containers inside a CDB that you want to exclude from processing (a "Black list"). Provide a space-delimited list of PDBs that you want to exclude from processing. To specify the list, use single quotes on Linux and UNIX operating systems, and use double quotes on Windows systems.</p>
                                    <p>If you do not specify either <code class="codeph">-c</code> or <code class="codeph">-C</code>, then all PDBs in a CDB are processed. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e1017" headers="d13104e914 ">
                                    <p><code class="codeph">-loadonly</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e1017 d13104e916 ">
                                    <p>Loads the DBMS_PREUP package into the database when it is in READ WRITE mode, without carrying out any other action. </p>
                                    <p>Use this parameter to prepare a given Non-CDB or CDB database so that the DBMS_PREUP package is loaded when you run the Pre-Upgrade Information Tool, and the DB (DB or Container) is in READ-ONLY mode. If you want use the tool to analyze a database in read-only mode, then you must use this command to load the DBMS_PREUP package into the database while it is in READ WRITE mode, before you set it to READ-ONLY mode.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e1027" headers="d13104e914 ">
                                    <p><code class="codeph">-p <span class="variable" translate="no">password</span></code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e1027 d13104e916 ">
                                    <p>Provides the password for the user.</p>
                                    <p>If you do not use operating system authentication to connect to the database, then use the <code class="codeph">-p</code> option to specify a password on the command line. If a username is specified on the command line with <code class="codeph">-u</code>, but no password specified with <code class="codeph">-p</code>, then the tool prompts you for a password.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e1048" headers="d13104e914 ">
                                    <p><code class="codeph">-u <span class="variable" translate="no">username</span></code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e1048 d13104e916 ">
                                    <p>Provides the user name of the user that you want to use to connect as SYSDBA to the database that you want to check. Use this option only if you do not use operating system authentication to connect to the database</p>
                                    <p>For example, You log in as a user that is not a member of the OSDBA group for the database that you want to check. In that case, the user account does not have operating system authentication privileges for the SYSDBA system privilege. Use the <code class="codeph">-u</code> and <code class="codeph">-p</code> option to provide data dictionary authentication to log in as a user with SYSDBA system privileges.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e1066" headers="d13104e914 ">
                                    <p><code class="codeph">-oh <span class="variable" translate="no">oracle_home</span></code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e1066 d13104e916 ">
                                    <p>Specifies an Oracle home that you want to check. Provide the path of the Oracle home that you want to check.</p>
                                    <p>If you do not specify an Oracle home path to check, then the Pre-Upgrade Information Tool defaults to the path specified by the user environment variable for the Oracle home. That variable is $ORACLE_HOME on Linux and UNIX systems, and %ORACLE_HOME% on Windows systems.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e1078" headers="d13104e914 ">
                                    <p><code class="codeph">-sid <span class="variable" translate="no">system_identifier</span></code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e1078 d13104e916 ">
                                    <p>Specifies an Oracle system identifier that you want to check. Provide the ORACLE_SID of the database that you want to check.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d13104e1088" headers="d13104e914 ">
                                    <p><code class="codeph">-help</code></p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d13104e1088 d13104e916 ">
                                    <p>Displays the command-line syntax help text. </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0__GUID-509A5AF8-6AA0-4BEF-A19F-368136F7F067">
                     <p class="titleinexample">Example 2-4 Non-CDB In the Source Oracle Home Example</p>
                     <ol>
                        <li>
                           <p>Set your user environment variables to point to the earlier release Oracle home.</p><pre class="pre codeblock"><code>$ export ORACLE_HOME=/u01/app/oracle/product/12.1.0/dbhome_1
$ export ORACLE_BASE=/u01/app/oracle
$ export ORACLE_SID=sales01
$ export PATH=.:$ORACLE_HOME/bin:$PATH
</code></pre></li>
                        <li>
                           <p>Run the new release Oracle Database Pre-Upgrade Information Tool on the earlier release Oracle Database server using the environment settings you have set to the earlier release Oracle home. For example:</p><pre class="pre codeblock"><code>$ORACLE_HOME/jdk/bin/java -jar /u01/app/oracle/product/19.0.0/rdbms/admin/preupgrade.jar TERMINAL TEXT</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-C4941221-8DC4-4DF8-A773-9F8B3FECF7D0__GUID-3AC85097-7AE7-4DE7-9FD6-788ADA4208BC">
                     <p class="titleinexample">Example 2-5 CDB in a Source Oracle Home</p>
                     <ol>
                        <li>
                           <p>Open all the pluggable databases</p><pre class="pre codeblock"><code>SQL&gt; alter pluggable database all open;</code></pre></li>
                        <li>
                           <p>Set your user environment variables to point to the earlier release Oracle home.</p><pre class="pre codeblock"><code>$ export ORACLE_HOME=/u01/app/oracle/product/12.1.0/dbhome_1
$ export ORACLE_BASE=/u01/app/oracle
$ export ORACLE_SID=sales01
$ export PATH=.:$ORACLE_HOME/bin:$PATH
</code></pre></li>
                        <li>
                           <p>Run the Pre-Upgrade Information Tool with an inclusion list, using the <code class="codeph">-c</code> option. In this example, the inclusion list is PDB1 and PDB2, and the command is run on a Linux or UNIX system. The output of the command is displayed to the terminal, and the output is displayed as text. 
                           </p><pre class="pre codeblock"><code>$ORACLE_HOME/jdk/bin/java -jar /u01/app/oracle/product/19.0.0/dbhome_1/rdbms/admin/preupgrade.jar TERMINAL TEXT -c 'pdb1 pdb2'</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C0219AF1-AD43-4097-B358-E53E48958647" title="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">Using the Pre-Upgrade Information Tool for Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-AEA50E7D-48B8-4EB0-A416-130C2A804F4A" name="GUID-AEA50E7D-48B8-4EB0-A416-130C2A804F4A"></a><h3 id="UPGRD-GUID-AEA50E7D-48B8-4EB0-A416-130C2A804F4A" class="sect3">Output of the Pre-Upgrade Information Tool</h3>
               <div>
                  <p>The Pre-Upgrade Information Tool (<code>preupgrade.jar</code>) creates fixup scripts and log files in the output directory that you specify with the DIR command-line option. 
                  </p>
                  <p>When you run the Pre-Upgrade Information Tool, it generates the following files inside the directory that you specify as the output directory. </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-AEA50E7D-48B8-4EB0-A416-130C2A804F4A__GUID-F1B28A2F-8B84-4D41-B9F5-0059134B4723">Log File (preupgrade.log)</p>
                     <p>The file <code class="codeph">preupgrade.log</code> is the report that the Pre-Upgrade Information Tool generates whenever you run the command with the FILE option. The log file contains all the tool recommendations and requirements for upgrade. The log file is located in the following path, where <code class="codeph"><span class="variable" translate="no">timestamp</span></code> is the date and time when the command is run: <code>$ORACLE_BASE/cfgtoollogs/dbua/upgrade<span class="variable" translate="no">timestamp</span>/SID/</code>. If you run the command with the TERMINAL option, then the content of this file is output to the display. Refer to the section "Pre-Upgrade Information Tool Output Example" for an example of a log file.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEA50E7D-48B8-4EB0-A416-130C2A804F4A__GUID-F932C578-E36D-4D22-A10C-9EDB2B747258">XML DBUA File (upgrade.xml)</p>
                     <p>If you specify XML file output on the Pre-Upgrade Information Tool command line, then it generates the <code class="codeph">upgrade.xml</code> file instead of <code class="codeph">preupgrade.log</code>. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEA50E7D-48B8-4EB0-A416-130C2A804F4A__GUID-228F46A5-E2AF-4FD8-AB23-FFECEDFE632F">Preupgrade Fixup File (preupgrade_fixups.sql) and Postupgrade Fixup File (postupgrade_fixups.sql)</p>
                     <p>The Pre-Upgrade Information Tool identifies issues that can block or hinder an upgrade.  </p>
                     <p>Some issues require a DBA to resolve, because it is not possible for the automated script to understand the specific goals of your application. However, other issues do not present any difficulty in resolving. In these cases, the Pre-Upgrade Information Tool automatically generates scripts that contain the SQL statements necessary to resolve the issues. Using these scripts can perform, track, and simplify the work that DBAs must do to resolve potential upgrade issues. The SQL statements that resolve issues before upgrade are placed in the <code class="codeph">preupgrade_fixups.sql</code> script. The SQL statements that resolve issues after upgrade are placed in the <code class="codeph">postupgrade_fixups.sql</code> script. When you run the Pre-Upgrade Information tool on a multitenant architecture Oracle Database, you can run the consolidated scripts <code>preupgrade_fixups.sql</code> script and <code>postupgrade_fixups.sql</code> across all the containers. Run the consolidated scripts using <code>catcon.pl</code>.
                     </p>
                     <p> Both of these fixup files are generated in the output directory that you specify with the Pre-Upgrade Information Tool <code class="codeph">DIR</code> command-line option. 
                     </p>
                     <p>The script carries out the following steps to resolve pre-upgrade or post-upgrade issues: </p>
                     <ol>
                        <li>
                           <p>For each issue that the Pre-Upgrade Information Tool identifies, it reruns the individual Pre-Upgrade Information Tool check again, to determine if the issue is still present. </p>
                        </li>
                        <li>
                           <div class="p">If the issue is present, then the tool does one of the following, depending on whether there is a fixup routine for the issue:
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If there is an Oracle-supplied fixup routine for that issue, then the script executes that fixup routine. It then reruns the Pre-Upgrade Information Tool check again, to confirm that the issue is resolved. If the issue is resolved, then the script displays a message that the issue is resolved.</p>
                                 </li>
                                 <li>
                                    <p>If there is no Oracle-supplied fixup routine, then the script displays a message that the issue is still present.</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <p>Review the issues that the script indicates are still present after it completes its checks. Resolve all the issues marked <samp class="sysout">Required</samp> before upgrading. You can choose to resolve recommended fixes and informational fixes. You can rerun the <code class="codeph">preupgrade_fixups.sql</code> and <code class="codeph">postupgrade_fixups.sql</code> scripts as many times as you want to. You can use the scripts as a progress report to track remaining issues as part of your issue resolution plan.
                     </p>
                     <p>After you resolve issues identified by the Preupgrade fixup and Postupgrade fixup scripts, Oracle recommends that you rerun the Pre-Upgrade Information Tool (<code class="codeph">preupgrade.jar</code>) one more time before upgrade. Running the tool one more time helps to confirm that you have resolved all issues that you intend to address.
                     </p>
                     <p>If you are checking a multitenant environment system (CDBs and PDBs), then the <code class="codeph">preupgrade_fixups.sql</code> and <code class="codeph">postupgrade_fixups.sql</code> scripts contain a rollup of the fixup code for all the individual PDBs. They are coded so that only the code for the current PDB runs. You can run the same script in each PDB. The script fixes only the issues in that PDB. As a result, it is easy to use the <code class="codeph">preupgrade_fixups.sql</code> and <code class="codeph">postupgrade_fixups.sql</code> with <code class="codeph">catcon.pl</code> to run fixups across an entire CDB.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-0C496815-1826-4E28-8437-36FA549000F9">Pre-Upgrade Information Tool Output Example</a></li>
                        <li><a href="oracle-database-upgrade-utilities.html#GUID-7935BC31-8818-4757-A6E7-A180C3E95A62">Scripts for Upgrading Oracle Database</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C0219AF1-AD43-4097-B358-E53E48958647" title="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">Using the Pre-Upgrade Information Tool for Oracle Database</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52881"></a><div class="props_rev_3"><a id="GUID-0C496815-1826-4E28-8437-36FA549000F9" name="GUID-0C496815-1826-4E28-8437-36FA549000F9"></a><h3 id="UPGRD-GUID-0C496815-1826-4E28-8437-36FA549000F9" class="sect3">Pre-Upgrade Information Tool Output Example</h3>
               <div>
                  <p>In this example, you can see how the Pre-Upgrade Information Tool displays recommended fixes, but does not carry out fixes automatically.</p>
                  <p>You have control over how and when the fixup scripts are run.</p>
                  <p>The following example shows the output that is generated and written to <code>preupgrade.log</code> by running the Oracle Database 18c Pre-Upgrade Information Tool on a release 12.2.0.1 CDB: 
                  </p><pre class="pre codeblock"><code>$ java -jar preupgrade.jar TEXT TERMINAL
Report generated by Oracle Database Pre-Upgrade Information Tool Version
18.0.0.0.0 on 2018-06-13T15:08:45

Upgrade-To version: 18.0.0.0.0

=======================================
Status of the database prior to upgrade
=======================================
      Database Name:  CDB2
     Container Name:  CDB$ROOT
       Container ID:  1
            Version:  12.2.0.1.0
         Compatible:  12.2.0
          Blocksize:  8192
           Platform:  Linux x86 64-bit
      Timezone File:  26
  Database log mode:  NOARCHIVELOG
           Readonly:  FALSE
            Edition:  EE

  Oracle Component                       Upgrade Action    Current Status
  ----------------                       --------------    --------------
  Oracle Server                          [to be upgraded]  VALID         
  JServer JAVA Virtual Machine           [to be upgraded]  VALID         
  Oracle XDK for Java                    [to be upgraded]  VALID         
  Real Application Clusters              [to be upgraded]  OPTION OFF    
  Oracle Workspace Manager               [to be upgraded]  VALID         
  Oracle Label Security                  [to be upgraded]  VALID         
  Oracle XML Database                    [to be upgraded]  VALID         
  Oracle Java Packages                   [to be upgraded]  VALID         

==============
BEFORE UPGRADE
==============

  REQUIRED ACTIONS
  ================
  None

  RECOMMENDED ACTIONS
  ===================
  1.  Run 12.2.0.1.0 $ORACLE_HOME/rdbms/admin/utlrp.sql to recompile invalid
      objects.  You can view the individual invalid objects with
      
        SET SERVEROUTPUT ON;
        EXECUTE DBMS_PREUP.INVALID_OBJECTS;
      
      3 objects are INVALID.
      
      There should be no INVALID objects in SYS/SYSTEM or user schemas before
      database upgrade.

  2.  Review and remove any unnecessary HIDDEN/UNDERSCORE parameters.
      
      The database contains the following initialization parameters whose name
      begins with an underscore:
      
      _exclude_seed_cdb_view
      
      Remove hidden parameters before database upgrade unless your application
      vendors and/or Oracle Support state differently.  Changes will need to be
      made in the pfile/spfile.

  3.  (AUTOFIXUP) Gather stale data dictionary statistics prior to database
      upgrade in off-peak time using:
      
        EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS;
      
      Dictionary statistics do not exist or are stale (not up-to-date).
      
      Dictionary statistics help the Oracle optimizer find efficient SQL
      execution plans and are essential for proper upgrade timing. Oracle
      recommends gathering dictionary statistics in the last 24 hours before
      database upgrade.
      
      For information on managing optimizer statistics, refer to the 12.2.0.1
      Oracle Database SQL Tuning Guide.

  INFORMATION ONLY
  ================
  4.  To help you keep track of your tablespace allocations, the following
      AUTOEXTEND tablespaces are expected to successfully EXTEND during the
      upgrade process.
      
                                                 Min Size
      Tablespace                        Size     For Upgrade
      ----------                     ----------  -----------
      SYSAUX                             550 MB       616 MB
      SYSTEM                             700 MB      1117 MB
      TEMP                                22 MB       150 MB
      UNDOTBS1                           315 MB       433 MB
      
      Minimum tablespace sizes for upgrade are estimates.

  5.  No action needed.
      
      Using default parallel upgrade options, this CDB with 1 PDBs will first
      upgrade the CDB$ROOT, and then upgrade at most 1 PDBs at a time using 2
      parallel processes per PDB.
      
      The number of PDBs upgraded in parallel and the number of parallel
      processes per PDB can be adjusted as described in Database Upgrade Guide.

  ORACLE GENERATED FIXUP SCRIPT
  =============================
  All of the issues in database CDB2 container CDB$ROOT
  which are identified above as BEFORE UPGRADE "(AUTOFIXUP)" can be resolved by
  executing the following from within the container

    SQL&gt;@/u01/app/oracle/cfgtoollogs/CDB2/preupgrade/preupgrade_fixups.sql

=============
AFTER UPGRADE
=============

  REQUIRED ACTIONS
  ================
  None

  RECOMMENDED ACTIONS
  ===================
  6.  Upgrade the database time zone file using the DBMS_DST package.
      
      The database is using time zone file version 26 and the target 18.0.0.0.0
      release ships with time zone file version 31.
      
      Oracle recommends upgrading to the desired (latest) version of the time
      zone file.  For more information, refer to "Upgrading the Time Zone File
      and Timestamp with Time Zone Data" in the 18.0.0.0.0 Oracle Database
      Globalization Support Guide.

  7.  (AUTOFIXUP) Gather dictionary statistics after the upgrade using the
      command:
      
        EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS;
      
      Oracle recommends gathering dictionary statistics after upgrade.
      
      Dictionary statistics provide essential information to the Oracle
      optimizer to help it find efficient SQL execution plans. After a database
      upgrade, statistics need to be re-gathered as there can now be tables
      that have significantly changed during the upgrade or new tables that do
      not have statistics gathered yet.

  8.  Gather statistics on fixed objects after the upgrade and when there is a
      representative workload on the system using the command:
      
        EXECUTE DBMS_STATS.GATHER_FIXED_OBJECTS_STATS;
      
      This recommendation is given for all preupgrade runs.
      
      Fixed object statistics provide essential information to the Oracle
      optimizer to help it find efficient SQL execution plans.  Those
      statistics are specific to the Oracle Database release that generates
      them, and can be stale upon database upgrade.
      
      For information on managing optimizer statistics, refer to the 12.2.0.1
      Oracle Database SQL Tuning Guide.

  ORACLE GENERATED FIXUP SCRIPT
  =============================
  All of the issues in database CDB2 container CDB$ROOT
  which are identified above as AFTER UPGRADE "(AUTOFIXUP)" can be resolved by
  executing the following from within the container

    SQL&gt;@/u01/app/oracle/cfgtoollogs/CDB2/preupgrade/postupgrade_fixups.sql


Report generated by Oracle Database Pre-Upgrade Information Tool Version
18.0.0.0.0 on 2018-06-13T15:08:58

Upgrade-To version: 18.0.0.0.0

=======================================
Status of the database prior to upgrade
=======================================
      Database Name:  CDB2
     Container Name:  PDB$SEED
       Container ID:  2
            Version:  12.2.0.1.0
         Compatible:  12.2.0
          Blocksize:  8192
           Platform:  Linux x86 64-bit
      Timezone File:  26
  Database log mode:  NOARCHIVELOG
           Readonly:  TRUE
            Edition:  EE

  Oracle Component                       Upgrade Action    Current Status
  ----------------                       --------------    --------------
  Oracle Server                          [to be upgraded]  VALID         
  Real Application Clusters              [to be upgraded]  OPTION OFF    
  Oracle Workspace Manager               [to be upgraded]  VALID         
  Oracle XML Database                    [to be upgraded]  VALID         

==============
BEFORE UPGRADE
==============

  REQUIRED ACTIONS
  ================
  None

  RECOMMENDED ACTIONS
  ===================
  1.  Run 12.2.0.1.0 $ORACLE_HOME/rdbms/admin/utlrp.sql to recompile invalid
      objects.  You can view the individual invalid objects with
      
        SET SERVEROUTPUT ON;
        EXECUTE DBMS_PREUP.INVALID_OBJECTS;
      
      6 objects are INVALID.
      
      There should be no INVALID objects in SYS/SYSTEM or user schemas before
      database upgrade.

  2.  Review and remove any unnecessary HIDDEN/UNDERSCORE parameters.
      
      The database contains the following initialization parameters whose name
      begins with an underscore:
      
      _exclude_seed_cdb_view
      
      Remove hidden parameters before database upgrade unless your application
      vendors and/or Oracle Support state differently.  Changes will need to be
      made in the pfile/spfile.

  3.  (AUTOFIXUP) Gather stale data dictionary statistics prior to database
      upgrade in off-peak time using:
      
        EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS;
      
      Dictionary statistics do not exist or are stale (not up-to-date).
      
      Dictionary statistics help the Oracle optimizer find efficient SQL
      execution plans and are essential for proper upgrade timing. Oracle
      recommends gathering dictionary statistics in the last 24 hours before
      database upgrade.
      
      For information on managing optimizer statistics, refer to the 12.2.0.1
      Oracle Database SQL Tuning Guide.

  4.  (AUTOFIXUP) Gather statistics on fixed objects prior the upgrade.
      
      None of the fixed object tables have had stats collected.
      
      Gathering statistics on fixed objects, if none have been gathered yet, is
      recommended prior to upgrading.
      
      For information on managing optimizer statistics, refer to the 12.2.0.1
      Oracle Database SQL Tuning Guide.

  INFORMATION ONLY
  ================
  5.  To help you keep track of your tablespace allocations, the following
      AUTOEXTEND tablespaces are expected to successfully EXTEND during the
      upgrade process.
      
                                                 Min Size
      Tablespace                        Size     For Upgrade
      ----------                     ----------  -----------
      SYSAUX                             235 MB       500 MB
      SYSTEM                             210 MB       584 MB
      TEMP                                20 MB       150 MB
      UNDOTBS1                           210 MB       412 MB
      
      Minimum tablespace sizes for upgrade are estimates.

  6.  No action needed.
      
      Using default parallel upgrade options, this CDB with 1 PDBs will first
      upgrade the CDB$ROOT, and then upgrade at most 1 PDBs at a time using 2
      parallel processes per PDB.
      
      The number of PDBs upgraded in parallel and the number of parallel
      processes per PDB can be adjusted as described in Database Upgrade Guide.

  ORACLE GENERATED FIXUP SCRIPT
  =============================
  All of the issues in database CDB2 container PDB$SEED
  which are identified above as BEFORE UPGRADE "(AUTOFIXUP)" can be resolved by
  executing the following from within the container

    SQL&gt;@/u01/app/oracle/cfgtoollogs/CDB2/preupgrade/preupgrade_fixups.sql

=============
AFTER UPGRADE
=============

  REQUIRED ACTIONS
  ================
  None

  RECOMMENDED ACTIONS
  ===================
  7.  Upgrade the database time zone file using the DBMS_DST package.
      
      The database is using time zone file version 26 and the target 18.0.0.0.0
      release ships with time zone file version 31.
      
      Oracle recommends upgrading to the desired (latest) version of the time
      zone file.  For more information, refer to "Upgrading the Time Zone File
      and Timestamp with Time Zone Data" in the 18.0.0.0.0 Oracle Database
      Globalization Support Guide.

  8.  (AUTOFIXUP) Gather dictionary statistics after the upgrade using the
      command:
      
        EXECUTE DBMS_STATS.GATHER_DICTIONARY_STATS;
      
      Oracle recommends gathering dictionary statistics after upgrade.
      
      Dictionary statistics provide essential information to the Oracle
      optimizer to help it find efficient SQL execution plans. After a database
      upgrade, statistics need to be re-gathered as there can now be tables
      that have significantly changed during the upgrade or new tables that do
      not have statistics gathered yet.

  9.  Gather statistics on fixed objects after the upgrade and when there is a
      representative workload on the system using the command:
      
        EXECUTE DBMS_STATS.GATHER_FIXED_OBJECTS_STATS;
      
      This recommendation is given for all preupgrade runs.
      
      Fixed object statistics provide essential information to the Oracle
      optimizer to help it find efficient SQL execution plans.  Those
      statistics are specific to the Oracle Database release that generates
      them, and can be stale upon database upgrade.
      
      For information on managing optimizer statistics, refer to the 12.2.0.1
      Oracle Database SQL Tuning Guide.

  ORACLE GENERATED FIXUP SCRIPT
  =============================
  All of the issues in database CDB2 container PDB$SEED
  which are identified above as AFTER UPGRADE "(AUTOFIXUP)" can be resolved by
  executing the following from within the container

    SQL&gt;@/u01/app/oracle/cfgtoollogs/CDB2/preupgrade/postupgrade_fixups.sql


==================
PREUPGRADE SUMMARY
==================
  /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/preupgrade.log
  /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/preupgrade_fixups.sql
  /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/postupgrade_fixups.sql

Execute fixup scripts across the entire CDB:

Before upgrade:

1. Execute preupgrade fixups with the below command
$ORACLE_HOME/perl/bin/perl -I$ORACLE_HOME/perl/lib -I$ORACLE_HOME/rdbms/admin $ORACLE_HOME/rdbms/admin/catcon.pl -l /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/ -b preup_CDB2 /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/preupgrade_fixups.sql

2. Review logs under /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/

After the upgrade:

1. Execute postupgrade fixups with the below command
$ORACLE_HOME/perl/bin/perl -I$ORACLE_HOME/perl/lib -I$ORACLE_HOME/rdbms/admin $ORACLE_HOME/rdbms/admin/catcon.pl -l /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/ -b postup_CDB2 /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/postupgrade_fixups.sql

2. Review logs under /u01/app/oracle/cfgtoollogs/CDB2/preupgrade/

Preupgrade complete: 2018-06-13T15:09:00</code></pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C0219AF1-AD43-4097-B358-E53E48958647" title="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">Using the Pre-Upgrade Information Tool for Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52784"></a><div class="props_rev_3"><a id="GUID-DC0F9DF2-4001-48E5-AC18-4F2FA10B869E" name="GUID-DC0F9DF2-4001-48E5-AC18-4F2FA10B869E"></a><h3 id="UPGRD-GUID-DC0F9DF2-4001-48E5-AC18-4F2FA10B869E" class="sect3">Pre-Upgrade Information Tool Warnings and Recommendations for Oracle Database</h3>
               <div>
                  <p>Analyze any Pre-Upgrade Information Tool warnings before you upgrade to the new release of Oracle Database. For each item that the tool reports, it provides you with information about how to fix the issue or warning.</p>
                  <p>For more detailed information , refer to My Oracle Support note 472937.1 for information about installed database components and schemas. Refer to My Oracle Support note 753041.1 for information about diagnosing components with <code class="codeph">NON VALID</code> status. 
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C2D486E3-BA9E-408B-8E0B-B3717932013F">Updating Access Control Lists and Network Utility Packages</a><br>Use this procedure to update access control lists (ACLs) and Network Utility Packages.
                     </li>
                     <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-3A3CF5F6-C123-4AAE-AADA-B4280C6EC410">Evaluate Dependencies and Add ACLs for Network Utility Packages</a><br>You can receive a warning about network utility package dependencies. Use this procedure to evaluate the dependencies, and provide access by adding the appropriate access control lists (ACLs).
                     </li>
                     <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-BA1C2912-3F72-4544-BEF4-F626C026567B">About Database Links with Passwords from Earlier Oracle Database Releases</a><br>This information is important only for downgrading to your original database release after performing the upgrade. 
                     </li>
                     <li class="ulchildlink"><a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-88B53A2B-23C3-46F4-90A1-9AE5FD836BCE">About Oracle Database Warnings for TIMESTAMP WITH TIME ZONE Data Type</a><br>Oracle Database upgrades include updated time zone data types, which may affect existing <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data types.
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=472937.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=472937.1</a></li>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;iid=753041.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=753041.1</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-C0219AF1-AD43-4097-B358-E53E48958647" title="Review these topics to understand and to use the Pre-Upgrade information tool (preupgrade.jar).">Using the Pre-Upgrade Information Tool for Oracle Database</a></p>
                     </div>
                  </div>
               </div><a id="UPGRD52786"></a><div class="props_rev_3"><a id="GUID-C2D486E3-BA9E-408B-8E0B-B3717932013F" name="GUID-C2D486E3-BA9E-408B-8E0B-B3717932013F"></a><h4 id="UPGRD-GUID-C2D486E3-BA9E-408B-8E0B-B3717932013F" class="sect4">Updating Access Control Lists and Network Utility Packages</h4>
                  <div>
                     <p>Use this procedure to update access control lists (ACLs) and Network Utility Packages.</p>
                     <p>Starting with Oracle Database 12<span class="italic">c</span>, the access control of the UTL packages is implemented using Oracle Database Real Application Security. UTL packages include UTL_TCP, UTL_SMTP, UTL_MAIL, UTL_HTTP, and UTL_INADDR. The access control does not require Oracle XML DB.
                     </p>
                     <ol>
                        <li>
                           <p>Ensure that the logged-in user has the <code class="codeph">connect</code> privilege for the host and port specified by <code class="codeph">DBMS_LDAP.init</code>. There is new behavior for the <code class="codeph">DBMS_LDAP</code> PL/SQL package and the <code class="codeph">HttpUriType</code> type. Because of this new behavior, you must create or update access control lists (ACLs) after you upgrade to the new Oracle Database release.
                           </p>
                           <p>For example, if your application depends on the <code class="codeph">DBMS_LDAP</code> package, then the error "ORA-24247: network access denied by access control list (ACL)" can occur. To avoid this error, the logged-in user must have the <code class="codeph">connect</code> privilege for the host and port specified by <code class="codeph">DBMS_LDAP.init</code>.
                           </p>
                        </li>
                        <li>
                           <p>If you have any of the following packages installed, then you can be required to reinstall these packages after upgrade:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">UTL_TCP</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">UTL_SMTP</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">UTL_MAIL</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">UTL_HTTP</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">UTL_INADDR</code></p>
                              </li>
                           </ul>
                           <p>Ensure that you have the latest version of these packages for the new Oracle Database release.</p>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C2D486E3-BA9E-408B-8E0B-B3717932013F__GUID-D7167C78-0D52-465B-8BA4-DBC9043347AE">
                        <p class="notep1">See Also:</p>
                        <p><a href="../dbfsg/configuring-application-privileges-and-access-contol-lists.html#DBFSG99821" target="_blank"><span class="italic">Oracle Database Real Application Security Administrator's and Developer's Guide</span></a> for information about configuring access control lists
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-DC0F9DF2-4001-48E5-AC18-4F2FA10B869E" title="Analyze any Pre-Upgrade Information Tool warnings before you upgrade to the new release of Oracle Database. For each item that the tool reports, it provides you with information about how to fix the issue or warning.">Pre-Upgrade Information Tool Warnings and Recommendations for Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD52787"></a><div class="props_rev_3"><a id="GUID-3A3CF5F6-C123-4AAE-AADA-B4280C6EC410" name="GUID-3A3CF5F6-C123-4AAE-AADA-B4280C6EC410"></a><h4 id="UPGRD-GUID-3A3CF5F6-C123-4AAE-AADA-B4280C6EC410" class="sect4">Evaluate Dependencies and Add ACLs for Network Utility Packages</h4>
                  <div>
                     <p>You can receive a warning about network utility package dependencies. Use this procedure to evaluate the dependencies, and provide access by adding the appropriate access control lists (ACLs).</p>
                     <ol>
                        <li>
                           <p>Run the Pre-Upgrade Information Tool.</p>
                        </li>
                        <li>
                           <p>Check the output from the Pre-Upgrade Information Tool (<code class="codeph">preupgrade.jar</code>) for warning messages, such as the following example:
                           </p><pre class="oac_no_warn" dir="ltr">WARNING: --&gt; Database contains schemas with objects dependent on network packages.
.... Refer to the Database Upgrade Guide for instructions to configure Network ACLs.
.... USER WKSYS has dependent objects.
.... USER SYSMAN has dependent objects.
.... USER FLOWS_010600 has dependent objects.
.</pre></li>
                        <li>
                           <p>Query the view <code class="codeph">DBA_DEPENDENCIES</code> to obtain more information about the dependencies. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DBA_DEPENDENCIES
WHERE referenced_name IN ('UTL_TCP','UTL_SMTP','UTL_MAIL','UTL_HTTP','UTL_INADDR','DBMS_LDAP')
  AND owner NOT IN ('SYS','PUBLIC','ORDPLUGINS');
</pre></li>
                        <li>
                           <p>To ensure that the new access controls are part of your upgrade testing, prepare a post-upgrade script to make the scripts available in your database environment.</p>
                           <p>Use the package <code class="codeph">DBMS_NETWORK_ACL_ADMIN</code> to update your database access control lists (ACLs). You use this package to create, assign, and add privileges to the new access controls so that the updated access control packages can work as they did in prior releases. Refer to the example script provided in <cite>Oracle Database Real Application Security Administrator’s and Developer’s Guide</cite> to see how to use <code class="codeph">DBMS_NETWORK_ACL_ADMIN</code> to update your access control list.
                           </p>
                        </li>
                        <li>
                           <p>After the upgrade, grant specific required privileges. Access is based on the usage in the original database.</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../dbfsg/configuring-application-privileges-and-access-contol-lists.html#DBFSG99821" target="_blank"><span><cite>Oracle Database Real Application Security Administrator's and Developer's Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-DC0F9DF2-4001-48E5-AC18-4F2FA10B869E" title="Analyze any Pre-Upgrade Information Tool warnings before you upgrade to the new release of Oracle Database. For each item that the tool reports, it provides you with information about how to fix the issue or warning.">Pre-Upgrade Information Tool Warnings and Recommendations for Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="UPGRD52788"></a><div class="props_rev_3"><a id="GUID-BA1C2912-3F72-4544-BEF4-F626C026567B" name="GUID-BA1C2912-3F72-4544-BEF4-F626C026567B"></a><h4 id="UPGRD-GUID-BA1C2912-3F72-4544-BEF4-F626C026567B" class="sect4">About Database Links with Passwords from Earlier Oracle Database Releases</h4>
                  <div>
                     <p>This information is important only for downgrading to your original database release after performing the upgrade. </p>
                     <p>During the upgrade to the new Oracle Database release, any passwords in database links are encrypted.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To downgrade to the release from which you upgraded, you must drop all of the database links with encrypted passwords before the downgrade. Consequently, the database links are nonexistent in the downgraded database.</p>
                        </li>
                        <li>
                           <p>If you must be able to downgrade to your original release, then save the information about affected database links from the <code class="codeph">SYS.LINK$</code> table, so that you can recreate the database links after the downgrade.
                           </p>
                        </li>
                        <li>
                           <p>For information about earlier releases, refer to the original documentation for the Oracle Database release from which you upgraded. Also refer to your platform-specific <cite>Oracle Database Installation Guide</cite> for the earlier release.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-BA1C2912-3F72-4544-BEF4-F626C026567B__GUID-F9A8F22A-FB98-46A1-BDF8-7394C8566F3E">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/distributed-database-concepts.html#ADMIN12101" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about authentication and database links
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-DC0F9DF2-4001-48E5-AC18-4F2FA10B869E" title="Analyze any Pre-Upgrade Information Tool warnings before you upgrade to the new release of Oracle Database. For each item that the tool reports, it provides you with information about how to fix the issue or warning.">Pre-Upgrade Information Tool Warnings and Recommendations for Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD52790"></a><a id="UPGRD52789"></a><div class="props_rev_3"><a id="GUID-88B53A2B-23C3-46F4-90A1-9AE5FD836BCE" name="GUID-88B53A2B-23C3-46F4-90A1-9AE5FD836BCE"></a><h4 id="UPGRD-GUID-88B53A2B-23C3-46F4-90A1-9AE5FD836BCE" class="sect4">About Oracle Database Warnings for TIMESTAMP WITH TIME ZONE Data Type</h4>
                  <div>
                     <p>Oracle Database upgrades include updated time zone data types, which may affect existing <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data types.
                     </p>
                     <p>The time zone files supplied with Oracle Database 12<span class="italic">c</span> are updated to reflect changes in transition rules for some time zone regions. The changes may affect existing <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data types.
                     </p>
                     <p>Oracle recommends that you ensure that you have the latest time zone files before you upgrade the database. If the time zone file version of the database you are upgrading is not the most recent version of the time zone file available for the new release of Oracle Database, then the Pre-Upgrade Information Tool displays a warning and describes how to proceed. The following table describes the warnings and summarizes how to resolve a mismatch in time zone file versions.</p>
                     <div class="infoboxnote" id="GUID-88B53A2B-23C3-46F4-90A1-9AE5FD836BCE__GUID-E81E4FB3-22D0-4259-A924-282865809324">
                        <p class="notep1">Caution:</p>
                        <p>The <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data stored in the database can become corrupted during the upgrade if there is a time zone file version mismatch.
                        </p>
                     </div>
                     <div class="tblformal" id="GUID-88B53A2B-23C3-46F4-90A1-9AE5FD836BCE__BABEIGDJ">
                        <p class="titleintable">Table 2-1 Choices for Fixing the Time Zone File Version</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Choices for Fixing the Time Zone File Version" summary="This table describes how to handle warnings if the time zone file version on the database being upgraded is older or newer than the version provided with the Oracle Database release you just installed." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d13104e2095">Time Zone Version On the Database Being Upgraded</th>
                                 <th align="left" valign="bottom" width="70%" id="d13104e2098">When to Fix the Time Zone Files</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d13104e2103" headers="d13104e2095 ">
                                    <p>Earlier than the most current version included in the new database release and the Pre-Upgrade Information Tool displays "Database is using a time zone file older than version <span class="variable" translate="no">n</span>."
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d13104e2103 d13104e2098 ">
                                    <p>After completing the database upgrade.</p>
                                    <p>Use the <code class="codeph">DBMS_DST</code> PL/SQL package and follow the instructions in "Steps to Upgrade Time Zone File and Timestamp with Time Zone Data. Refer to the following document:
                                    </p>
                                    <p><a href="../nlspg/datetime-data-types-and-time-zone-support.html#NLSPG261" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d13104e2124" headers="d13104e2095 ">
                                    <p>Later than the version included in the new database release and the Pre-Upgrade Information Tool displays "Database is using a time zone file greater than version <span class="variable" translate="no">n</span>."
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d13104e2124 d13104e2098 ">
                                    <p>Before beginning the database upgrade.</p>
                                    <p>You must patch the Oracle home by using an <code class="codeph">RDBMS DST</code> patch with the appropriate patch for the time zone file version in use. Apply the patch for each database that you want to upgrade. Otherwise, the upgrade script terminates without upgrading the database. The <code class="codeph">RDBMS DST</code> patches are available from My Oracle Support note ID 412160.1.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../arpls/DBMS_DST.html#ARPLS234" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                           <li><a href="https://support.oracle.com/rs?type=doc&amp;id=1509653.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=1509653.1</a></li>
                           <li><a href="https://support.oracle.com/rs?type=doc&amp;id=412160.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=412160.1</a></li>
                           <li><a href="../nlspg/datetime-data-types-and-time-zone-support.html#NLSPG259" target="_blank"><span><cite>Oracle Database Globalization Support Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="using-preupgrade-information-tool-for-oracle-database.html#GUID-DC0F9DF2-4001-48E5-AC18-4F2FA10B869E" title="Analyze any Pre-Upgrade Information Tool warnings before you upgrade to the new release of Oracle Database. For each item that the tool reports, it provides you with information about how to fix the issue or warning.">Pre-Upgrade Information Tool Warnings and Recommendations for Oracle Database</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
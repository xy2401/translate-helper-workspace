<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="DBMS_AW_STATS contains subprograms for managing optimizer statistics for cubes and dimensions. Generating the statistics does not have a significant performance cost.">
      <meta name="description" content="DBMS_AW_STATS contains subprograms for managing optimizer statistics for cubes and dimensions. Generating the statistics does not have a significant performance cost.">
      <title>DBMS_AW_STATS</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="DBMS_AW_STATS contains subprograms for managing optimizer statistics for cubes and dimensions. Generating the statistics does not have a significant performance cost.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_AUTO_TASK_ADMIN.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_CAPTURE_ADM.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_AUTO_TASK_ADMIN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_CAPTURE_ADM.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_AW_STATS</li>
            </ol>
            <a id="GUID-CD60E488-79D3-4373-AB3C-959F1E72B3C8" name="GUID-CD60E488-79D3-4373-AB3C-959F1E72B3C8"></a><a id="ARPLS217"></a><a id="ARPLS217"></a>
            
            <h2 id="ARPLS-GUID-CD60E488-79D3-4373-AB3C-959F1E72B3C8" class="sect2"><span class="enumeration_chapter">32 </span>DBMS_AW_STATS
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_AW_STATS</code> contains subprograms for managing optimizer statistics for cubes and dimensions. Generating the statistics does not have a significant performance cost.
               </p>
               <div class="infoboxnotealso" id="GUID-CD60E488-79D3-4373-AB3C-959F1E72B3C8__GUID-D6180EFB-961E-42F6-B9B8-53421D636CC5">
                  <p class="notep1">See Also:</p>
                  <p><a href="../olaug/administering-oracle-olap.html#OLAUG701" target="_blank"><span class="italic">Oracle OLAP User's Guide</span></a> regarding use of the OLAP option to support business intelligence and analytical applications
                  </p>
               </div>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_AW_STATS.html#GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7" title="Cubes and dimensions are first class data objects that support multidimensional analytics. They are stored in a container called an analytic workspace. Multidimensional objects and analytics are available with the OLAP option to Oracle Database.">Using DBMS_AW_STATS</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_AW_STATS.html#GUID-C1977789-CB4A-418D-9385-AB32759110F0" title="DBMS_AW_STATS uses the ANALYZE and CLEAR procedures.">Summary of DBMS_AW_STATS Subprograms</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS65458"></a><a id="ARPLS65458"></a><div class="props_rev_3"><a id="GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7" name="GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7"></a><h3 id="ARPLS-GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7" class="sect3"><span class="enumeration_section">32.1 </span>Using DBMS_AW_STATS
               </h3>
               <div>
                  <p>Cubes and dimensions are first class data objects that support multidimensional analytics. They are stored in a container called an analytic workspace. Multidimensional objects and analytics are available with the OLAP option to Oracle Database. </p>
                  <div class="section">
                     <p>Optimizer statistics are used to create execution plans for queries that join two cube views or join a cube view to a table or a view of a table. They are also used for query rewrite to cube materialized views. You need to generate the statistics only for these types of queries.</p>
                     <p>Queries against a single cube do not use optimizer statistics. These queries are automatically optimized within the analytic workspace.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS65459"></a><a id="ARPLS65460"></a><a id="ARPLS65460"></a><a id="ARPLS65459"></a><div class="props_rev_3"><a id="GUID-C1977789-CB4A-418D-9385-AB32759110F0" name="GUID-C1977789-CB4A-418D-9385-AB32759110F0"></a><h3 id="ARPLS-GUID-C1977789-CB4A-418D-9385-AB32759110F0" class="sect3"><span class="enumeration_section">32.2 </span>Summary of DBMS_AW_STATS Subprograms
               </h3>
               <div>
                  <p><code class="codeph">DBMS_AW_STATS</code> uses the ANALYZE and CLEAR procedures. 
                  </p>
                  <div class="tblformal" id="GUID-C1977789-CB4A-418D-9385-AB32759110F0__GUID-FD0A1167-D2B3-477D-AECF-EEE0084DBAF5">
                     <p class="titleintable">Table 32-1 DBMS_AW_STATS Package Subprograms</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_AW_STATS Package Subprograms" summary="Descriptions of DBMS_AW_STATS subprograms" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d159992e322">Subprogram</th>
                              <th align="left" valign="bottom" width="69%" id="d159992e325">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d159992e330" headers="d159992e322 ">
                                 <p><a href="DBMS_AW_STATS.html#GUID-16CACCE3-E813-42E4-8019-E47BE00C5239" title="This procedure generates optimizer statistics on a cube or a cube dimension.">ANALYZE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d159992e330 d159992e325 ">
                                 <p>Generates optimizer statistics on cubes and cube dimensions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d159992e342" headers="d159992e322 ">
                                 <p><a href="DBMS_AW_STATS.html#GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362" title="This procedure clears the statistics generated by the ANALYZE procedure.">CLEAR Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d159992e342 d159992e325 ">
                                 <p>Clears optimizer statistics from cubes and cube dimensions.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS65461"></a><a id="ARPLS65462"></a><a id="ARPLS65462"></a><a id="ARPLS65461"></a><div class="props_rev_3"><a id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239" name="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239"></a><h4 id="ARPLS-GUID-16CACCE3-E813-42E4-8019-E47BE00C5239" class="sect4"><span class="enumeration_section">32.2.1 </span>ANALYZE Procedure
                  </h4>
                  <div>
                     <p>This procedure generates optimizer statistics on a cube or a cube dimension. </p>
                     <div class="section">
                        <p>These statistics are used to generate some execution plans, as described in <span class="q">"<a href="DBMS_AW_STATS.html#GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7" title="Cubes and dimensions are first class data objects that support multidimensional analytics. They are stored in a container called an analytic workspace. Multidimensional objects and analytics are available with the OLAP option to Oracle Database.">Using DBMS_AW_STATS</a>"</span>.
                        </p>
                        <p>For a cube, the statistics are for all of the measures and calculated measures associated with the cube. These statistics include:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The average length of data values</p>
                           </li>
                           <li>
                              <p>The length of the largest data value</p>
                           </li>
                           <li>
                              <p>The minimum value</p>
                           </li>
                           <li>
                              <p>The number of distinct values</p>
                           </li>
                           <li>
                              <p>The number of null values</p>
                           </li>
                        </ul>
                        <p>For a dimension, the statistics are for the dimension and its attributes, levels, and hierarchies. These statistics include:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The average length of a value</p>
                           </li>
                           <li>
                              <p>The length of the largest value</p>
                           </li>
                           <li>
                              <p>The minimum value</p>
                           </li>
                           <li>
                              <p>The maximum value</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-8F3D5C0F-9A11-4DA1-82F9-8B9F702545C7">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_AW_STATS.ANALYZE
     (inname       IN VARCHAR2);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-C346E18E-2B56-4EDE-A6FE-2F74FADBDCC4">Parameters</p>
                        <div class="tblformal" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-AC22F8BE-8502-47BA-80DD-FD1887D0097E">
                           <p class="titleintable">Table 32-2 ANALYZE Procedure Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ANALYZE Procedure Parameters " summary="This table describes the parameters of the DBMS_AW_STATS.ANALYZE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d159992e507">Parameter</th>
                                    <th align="left" valign="bottom" width="81%" id="d159992e510">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d159992e515" headers="d159992e507 ">
                                       <p><code class="codeph">inname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d159992e515 d159992e510 ">
                                       <p>The qualified name of a cube or a dimension. </p>
                                       <p>For a cube, the format of a qualified name is <span class="italic"><code class="codeph">owner.cube_name</code></span>. 
                                       </p>
                                       <p>For a dimension, the format is <span class="italic"><code class="codeph">owner.dimension_name</code></span>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-08BA8826-049F-45B4-ACD5-A06CC99F5279">Usage Notes</p>
                        <p>Always analyze the dimensions first, then the cube.</p>
                        <p>After analyzing a dimension, analyze all cubes that use that dimension.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-4CC0AB52-9AD6-4F3D-902F-2A250988A070">Example</p>
                        <p>This sample script generates optimizer statistics on <code class="codeph">UNITS_CUBE</code> and its dimensions.
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
     DBMS_AW_STATS.ANALYZE('time');
     DBMS_AW_STATS.ANALYZE('customer');
     DBMS_AW_STATS.ANALYZE('product');
     DBMS_AW_STATS.ANALYZE('channel');
     DBMS_AW_STATS.ANALYZE('units_cube');
END;
/
</pre><p>The following statements create and display an execution plan for a<code class="codeph">SELECT</code> statement that joins columns from <code class="codeph">UNITS_CUBE_VIEW</code>, <code class="codeph">CUSTOMER_PRIMARY_VIEW</code>, and the <code class="codeph">ACCOUNTS</code> table:
                        </p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR SELECT 
     cu.long_description customer,
     a.city city,
     a.zip_pc zip,
     cu.level_name "LEVEL",
     round(f.sales) sales
/* From dimension views and cube view */
FROM time_calendar_view t,
     product_primary_view p,
     customer_view cu,
     channel_view ch,
     units_cube_view f,
     account a
/* Create level filters instead of GROUP BY */
WHERE t.long_description = '2004'
    AND p.level_name ='TOTAL'
    AND cu.customer_account_id like 'COMP%'
    AND ch.level_name = 'TOTAL'
/* Join dimension views to cube view */
    AND t.dim_key = f.TIME
    AND p.dim_key = f.product
    AND cu.dim_key = f.customer
    AND ch.dim_key = f.channel
    AND a.account_id = cu.customer_account_id
ORDER BY zip;
</pre><pre class="oac_no_warn" dir="ltr">SQL&gt;  SELECT plan_table_output FROM TABLE(dbms_xplan.display());
 
PLAN_TABLE_OUTPUT
-------------------------------------------------------------------------------------------------
Plan hash value: 3890178023
 
-----------------------------------------------------------------------------------------------
| Id  | Operation                        | Name       | Rows  | Bytes | Cost (%CPU)| Time     |
-----------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                 |            |     1 |    89 |     6  (34)| 00:00:01 |
|   1 |  SORT ORDER BY                   |            |     1 |    89 |     6  (34)| 00:00:01 |
|*  2 |   HASH JOIN                      |            |     1 |    89 |     5  (20)| 00:00:01 |
|   3 |    JOINED CUBE SCAN PARTIAL OUTER|            |       |       |            |          |
|   4 |     CUBE ACCESS                  | UNITS_CUBE |       |       |            |          |
|   5 |     CUBE ACCESS                  | CHANNEL    |       |       |            |          |
|   6 |     CUBE ACCESS                  | CUSTOMER   |       |       |            |          |
|   7 |     CUBE ACCESS                  | PRODUCT    |       |       |            |          |
|*  8 |     CUBE ACCESS                  | TIME       |     1 |    55 |     2   (0)| 00:00:01 |
|*  9 |    TABLE ACCESS FULL             | ACCOUNT    |     3 |   102 |     2   (0)| 00:00:01 |
-----------------------------------------------------------------------------------------------
 
Predicate Information (identified by operation id):
---------------------------------------------------
 
   2 - access("A"."ACCOUNT_ID"=SYS_OP_ATG(VALUE(KOKBF$),39,40,2))
   8 - filter(SYS_OP_ATG(VALUE(KOKBF$),16,17,2)='2004' AND
              SYS_OP_ATG(VALUE(KOKBF$),39,40,2) LIKE 'COMP%' AND
              SYS_OP_ATG(VALUE(KOKBF$),47,48,2)='TOTAL' AND
              SYS_OP_ATG(VALUE(KOKBF$),25,26,2)='TOTAL')
   9 - filter("A"."ACCOUNT_ID" LIKE 'COMP%')
 
Note
-----
   - dynamic statistics used for this statement
 
30 rows selected.</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65463"></a><a id="ARPLS65464"></a><a id="ARPLS65464"></a><a id="ARPLS65463"></a><div class="props_rev_3"><a id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362" name="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362"></a><h4 id="ARPLS-GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362" class="sect4"><span class="enumeration_section">32.2.2 </span>CLEAR Procedure
                  </h4>
                  <div>
                     <p>This procedure clears the statistics generated by the ANALYZE procedure.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362__GUID-D0355268-79CD-432F-A2E9-EBA77193D882">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_AW_STATS.CLEAR (
          inname        IN  VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362__GUID-6931AB36-0084-4FFD-856E-100FF7E2B299">Parameters</p>
                        <div class="tblformal" id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362__GUID-D88D1270-7036-4B02-B0C5-56DBB4B27CE2">
                           <p class="titleintable">Table 32-3 CLEAR Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CLEAR Procedure Parameters" summary="This table describes the parameters of the DBMS_AW_STATS.CLEAR subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d159992e676">Parameter</th>
                                    <th align="left" valign="bottom" width="80%" id="d159992e679">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d159992e684" headers="d159992e676 ">
                                       <p><code class="codeph">inname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d159992e684 d159992e679 ">
                                       <p>The qualified name of a cube or a dimension. </p>
                                       <p>For a cube, the format of a qualified name is <span class="italic"><code class="codeph">owner.cube_name</code></span>. 
                                       </p>
                                       <p>For a dimension, the format is <span class="italic"><code class="codeph">owner.dimension_name</code></span>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362__GUID-9400CF48-F89E-46AA-8A45-58F84590A4B2">Examples</p>
                        <p>The following scripts clears the statistics from <code class="codeph">UNITS_CUBE</code> and its dimensions.
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
     DBMS_AW_STATS.clear('units_cube');
     DBMS_AW_STATS.clear('time');
     DBMS_AW_STATS.clear('customer');
     DBMS_AW_STATS.clear('product');
     DBMS_AW_STATS.clear('channel');
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
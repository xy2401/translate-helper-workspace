<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="There are a number of steps involved in creating a logical standby database, including prerequisites and post-creation tasks.">
      <meta name="description" content="There are a number of steps involved in creating a logical standby database, including prerequisites and post-creation tasks.">
      <title>Creating a Logical Standby Database</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="There are a number of steps involved in creating a logical standby database, including prerequisites and post-creation tasks.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96244-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="creating-oracle-data-guard-physical-standby.html" title="Previous" type="text/html">
      <link rel="next" href="creating-oracle-data-guard-far-sync-instance.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="SBYDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-oracle-data-guard-physical-standby.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="creating-oracle-data-guard-far-sync-instance.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">  Concepts and Administration </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Creating a Logical Standby Database </li>
            </ol>
            <a id="GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E" name="GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E"></a><a id="SBYDB00300"></a>
            
            <h2 id="SBYDB-GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E" class="sect2"><span class="enumeration_chapter">4 </span> Creating a Logical Standby Database 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>There are a number of steps involved in creating a logical standby database, including prerequisites and post-creation tasks.</p>
               <p>See the following topics for information about creating a logical standby database. <a id="d10791e72" class="indexterm-anchor"></a><a id="d10791e76" class="indexterm-anchor"></a></p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579" title="Before you create a logical standby database, you must first ensure the primary database is properly configured.">Prerequisite Conditions for Creating a Logical Standby Database</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027" title="These are the tasks you perform to create a logical standby database.">Step-by-Step Instructions for Creating a Logical Standby Database</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C">Post-Creation Steps</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2" title="You can create a logical standby of a multitenant container database (CDB) just as you can create a logical standby of a regular primary database.">Creating a Logical Standby of a CDB</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E__GUID-F13D846B-013D-42F8-B9F4-C658F70C212D">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN11117" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about creating and using server parameter files
                        </p>
                     </li>
                     <li>
                        <p>Oracle Enterprise Manager Cloud Control online help system for information about using the Oracle Data Guard broker graphical user interface (GUI) to automatically create a logical standby database.</p>
                     </li>
                  </ul>
               </div>
               <div class="infoboxnote" id="GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E__GUID-311085FA-B5ED-4CA6-9D06-3A7C0249ED76">
                  <p class="notep1">Note:</p>
                  <p>If you are working in a multitenant container database (CDB) environment, then see <a href="creating-oracle-data-guard-logical-standby.html#GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2" title="You can create a logical standby of a multitenant container database (CDB) just as you can create a logical standby of a regular primary database.">Creating a Logical Standby of a CDB</a> for information about behavioral differences from non-CDB environments. For instance, in a CDB environment, many DBA views have analogous CDB views that you should use instead. For example, the view <code class="codeph">CDB_LOGSTDBY_NOT_UNIQUE</code> contains the same data as shown in <code class="codeph">DBA_LOGSTDBY_NOT_UNIQUE</code> view, but it has an additional column indicating the PDB name.
                  </p>
               </div>
            </div><a id="SBYDB5020"></a><a id="SBYDB4730"></a><div class="props_rev_3"><a id="GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579" name="GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579"></a><h3 id="SBYDB-GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579" class="sect3"><span class="enumeration_section">4.1 </span>Prerequisite Conditions for Creating a Logical Standby Database
               </h3>
               <div>
                  <p>Before you create a logical standby database, you must first ensure the primary database is properly configured.</p>
                  <p>Perform the following tasks on the primary database to prepare for logical standby database creation:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-5F1713AF-8813-4132-A9F7-D91A84231C9C" title="Before setting up a logical standby database, ensure the logical standby database can maintain the data types and tables in your primary database.">Determine Support for Data Types and Storage Attributes for Tables</a></p>
                     </li>
                     <li>
                        <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-C238335E-8383-43F1-B5B1-709A2A619C30" title="The ROWIDs contained in the redo records generated by the primary database cannot be used to identify the corresponding row in the logical standby database.">Ensure Table Rows in the Primary Database Can Be Uniquely Identified</a></p>
                     </li>
                  </ul>
                  <p>A logical standby database uses standby redo logs (SRLs) for redo received from the primary database, and also writes to online redo logs (ORLs) as it applies changes to the standby database. Thus, logical standby databases often require additional <code class="codeph">ARC</code><span class="italic">n</span> processes to simultaneously archive SRLs and ORLs. Additionally, because archiving of ORLs takes precedence over archiving of SRLs, a greater number of SRLs may be needed on a logical standby during periods of very high workload.
                  </p>
                  <div class="infoboxnote" id="GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579__GUID-2FB1B496-0F09-4C15-BA29-8E87292802DA">
                     <p class="notep1">Note:</p>Logical standby databases must be run in <code class="codeph">ARCHIVELOG</code> mode for standby redo log archival to be performed. 
                     <p>See <a href="../admin/managing-archived-redo-log-files.html#ADMIN008" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about archiving.
                     </p>
                  </div>
               </div><a id="SBYDB4731"></a><div class="props_rev_3"><a id="GUID-5F1713AF-8813-4132-A9F7-D91A84231C9C" name="GUID-5F1713AF-8813-4132-A9F7-D91A84231C9C"></a><h4 id="SBYDB-GUID-5F1713AF-8813-4132-A9F7-D91A84231C9C" class="sect4"><span class="enumeration_section">4.1.1 </span>Determine Support for Data Types and Storage Attributes for Tables
                  </h4>
                  <div>
                     <p>Before setting up a logical standby database, ensure the logical standby database can maintain the data types and tables in your primary database.</p>
                     <div class="section">
                        <p>See <a href="data-type-ddl-support-on-logical-standby-databases.html#GUID-291FD74A-165A-4E80-9E1F-66996F1FC6CA" title="It is important to identify unsupported database objects on the primary database before you create a logical standby database.">Unsupported Tables</a> for information about specific SQL queries you can use to determine if there are any unsupported data types or storage attributes.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB00308"></a><div class="props_rev_3"><a id="GUID-C238335E-8383-43F1-B5B1-709A2A619C30" name="GUID-C238335E-8383-43F1-B5B1-709A2A619C30"></a><h4 id="SBYDB-GUID-C238335E-8383-43F1-B5B1-709A2A619C30" class="sect4"><span class="enumeration_section">4.1.2 </span>Ensure Table Rows in the Primary Database Can Be Uniquely Identified
                  </h4>
                  <div>
                     <p>The ROWIDs contained in the redo records generated by the primary database cannot be used to identify the corresponding row in the logical standby database.</p>
                     <div class="section">
                        <p>This is because the physical organization in a logical standby database is different from that of the primary database, even though the logical standby database is created from a backup copy of the primary database.</p>
                        <p>Oracle uses primary-key or unique-constraint/index supplemental logging to logically identify a modified row in the logical standby database. When database-wide primary-key and unique-constraint/index supplemental logging is enabled, each <code class="codeph">UPDATE</code> statement also writes the column values necessary in the redo log to uniquely identify the modified row in the logical standby database.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If a table has a primary key defined, then the primary key is logged along with the modified columns as part of the <code class="codeph">UPDATE</code> statement to identify the modified row.
                              </p>
                           </li>
                           <li>
                              <p>In the absence of a primary key, the shortest nonnull unique-constraint/index is logged along with the modified columns as part of the <code class="codeph">UPDATE</code> statement to identify the modified row.
                              </p>
                           </li>
                           <li>
                              <p>If there is no primary key and no nonnull unique constraint/index, then all columns with a declared maximum length of 4000 bytes are logged as part of the <code class="codeph">UPDATE</code> statement to help identify the modified row. There are some requirements and restrictions with respect to supported data types. See the following sections for more information:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="data-type-ddl-support-on-logical-standby-databases.html#GUID-BD53979B-3120-45CD-803F-2E6675A9DAFD" title="Logical standby databases support several table storage types.">Supported Table Storage Types</a></p>
                                 </li>
                                 <li>
                                    <p><a href="data-type-ddl-support-on-logical-standby-databases.html#GUID-55806A96-6216-41A2-AB52-20704DAAF5C7" title="If a table contains only these datatypes, then logical standby does not support it.">Unsupported Table Storage Types</a></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>A function-based index, even though it is declared as unique, cannot be used to uniquely identify a modified row. However, logical standby databases support replication of tables that have function-based indexes defined, as long as modified rows can be uniquely identified.</p>
                           </li>
                        </ul>
                        <p>Oracle recommends that you add a primary key or a nonnull unique index to tables in the primary database, whenever possible, to ensure that SQL Apply can efficiently apply redo data updates to the logical standby database.</p>
                        <p>Perform the following steps to ensure SQL Apply can uniquely identify rows of each table being replicated in the logical standby database.</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Query the <code class="codeph">DBA_LOGSTDBY_NOT_UNIQUE</code> view to display a list of tables that SQL Apply may not be able to uniquely identify. For example:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT OWNER, TABLE_NAME FROM DBA_LOGSTDBY_NOT_UNIQUE
  2&gt; WHERE (OWNER, TABLE_NAME) NOT IN 
  3&gt; (SELECT DISTINCT OWNER, TABLE_NAME FROM DBA_LOGSTDBY_UNSUPPORTED) 
  4&gt; AND BAD_COLUMN = 'Y';
</pre><p>This query may take a few minutes to run.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If your application ensures the rows in a table are unique, then you can create a disabled primary key <code class="codeph">RELY</code> constraint on the table. This avoids the overhead of maintaining a primary key on the primary database.</span></li>
                     </ol>
                     <div class="section">
                        <p>To create a disabled <code class="codeph">RELY</code> constraint on a primary database table, <a id="d10791e491" class="indexterm-anchor"></a>use the <code class="codeph">ALTER TABLE</code> statement with a <code class="codeph">RELY DISABLE</code> clause. The following example creates a disabled <code class="codeph">RELY</code> constraint on a table named <code class="codeph">mytab</code>, for which rows can be uniquely identified using the <code class="codeph">id</code> and <code class="codeph">name</code> columns:
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLE mytab ADD PRIMARY KEY (id, name) RELY DISABLE;
</pre><p>When you specify the <code class="codeph">RELY</code> constraint, the system assumes that rows are unique. Because you are telling the system to rely on the information, but are not validating it on every modification done to the table, you must be careful to select columns for the disabled <code class="codeph">RELY</code> constraint that uniquely identify each row in the table. If such uniqueness is not present, then SQL Apply does not correctly maintain the table.
                        </p>
                        <p>To improve the performance of SQL Apply, add a unique-constraint/index to the columns to identify the row on the logical standby database. Failure to do so results in full table scans during <code class="codeph">UPDATE</code> or <code class="codeph">DELETE</code> statements carried out on the table by SQL Apply.
                        </p>
                        <div class="infoboxnotealso" id="GUID-C238335E-8383-43F1-B5B1-709A2A619C30__GUID-713EB1CD-C32C-4D2F-919A-5348816FB65B">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../refrn/DBA_LOGSTDBY_NOT_UNIQUE.html#REFRN23123" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">DBA_LOGSTDBY_NOT_UNIQUE</code> view
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=SQLRF01001" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">ALTER TABLE</code> statement syntax
                                 </p>
                              </li>
                              <li>
                                 <p><a href="managing-oracle-data-guard-logical-standby-databases.html#GUID-10287018-12F8-4727-AB2D-C720571AF4B6" title="On the primary database, if a table does not have a primary key or a unique index and you are certain the rows are unique, then create a primary key RELY constraint.">Create a Primary Key RELY Constraint</a>  for information about <code class="codeph">RELY</code> constraints and actions you can take to increase performance on a logical standby database
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB5021"></a><a id="SBYDB00310"></a><div class="props_rev_3"><a id="GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027" name="GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027"></a><h3 id="SBYDB-GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027" class="sect3"><span class="enumeration_section">4.2 </span>Step-by-Step Instructions for Creating a Logical Standby Database
               </h3>
               <div>
                  <p>These are the tasks you perform to create a logical standby database.</p>
                  <div class="tblformalwide" id="GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027__BEIFEFEE">
                     <p class="titleintable">Table 4-1 Creating a Logical Standby Database</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Creating a Logical Standby Database" summary="This 2 column table describes the steps to create a logical standby database. Column 1 is the task. Column 2 is the database. " width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="49%" id="d10791e670">Task</th>
                              <th align="left" valign="bottom" width="51%" id="d10791e673">Database</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e678" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-39D01B49-BA52-488E-B418-4BCFDE7692AF" title="You create a logical standby database by first creating a physical standby database and then transitioning it to a logical standby database.">Create a Physical Standby Database</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e678 d10791e673 ">
                                 <p>Primary</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e690" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-CDD78A3A-EB1C-493D-A0EF-ED6EBABDF0B7" title="You can run Redo Apply on the new physical standby database for any length of time before converting it to a logical standby database.">Stop Redo Apply on the Physical Standby Database</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e690 d10791e673 ">
                                 <p>Standby</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e702" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-BA252F0F-B5B9-4AA6-8593-250A7FA7283F" title="As part of creating a logical standby database, you must prepare the primary database to support a logical standby.">Prepare the Primary Database to Support a Logical Standby Database</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e702 d10791e673 ">
                                 <p>Primary</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e714" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-69BC7C26-F66F-4CB5-BBF6-08350C3E615F" title="There are some necessary tasks you must perform to prepare the physical standby database to transition to a logical standby database.">Transition to a Logical Standby Database</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e714 d10791e673 ">
                                 <p>Standby</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e726" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-68777C01-83F6-4CCF-9BA2-547ED180138D" title="Use an ALTER DATABASE SQL statement to open the newly created logical standby.">Open the Logical Standby Database</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e726 d10791e673 ">
                                 <p>Standby</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e741" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-930CFC64-4EFD-4CF3-A5D0-062FBBD069E1" title="After you create a logical standby database, it is important to verify that it is performing properly.">Verify the Logical Standby Database Is Performing Properly</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e741 d10791e673 ">
                                 <p>Standby</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="SBYDB4732"></a><div class="props_rev_3"><a id="GUID-39D01B49-BA52-488E-B418-4BCFDE7692AF" name="GUID-39D01B49-BA52-488E-B418-4BCFDE7692AF"></a><h4 id="SBYDB-GUID-39D01B49-BA52-488E-B418-4BCFDE7692AF" class="sect4"><span class="enumeration_section">4.2.1 </span>Creating a Logical Standby Task 1: Create a Physical Standby Database
                  </h4>
                  <div>
                     <p>You create a logical standby database by first creating a physical standby database and then transitioning it to a logical standby database. </p>
                     <div class="section">
                        <p>Follow the instructions in <a href="creating-oracle-data-guard-physical-standby.html#GUID-B511FB6E-E3E7-436D-94B5-071C37550170" title="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration."> Creating a Physical Standby Database </a> to create a physical standby database.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4733"></a><div class="props_rev_3"><a id="GUID-CDD78A3A-EB1C-493D-A0EF-ED6EBABDF0B7" name="GUID-CDD78A3A-EB1C-493D-A0EF-ED6EBABDF0B7"></a><h4 id="SBYDB-GUID-CDD78A3A-EB1C-493D-A0EF-ED6EBABDF0B7" class="sect4"><span class="enumeration_section">4.2.2 </span>Creating a Logical Standby Task 2: Stop Redo Apply on the Physical Standby Database
                  </h4>
                  <div>
                     <p>You can run Redo Apply on the new physical standby database for any length of time before converting it to a logical standby database.</p>
                     <div class="section">
                        <p>However, before converting to a logical standby database, stop Redo Apply on the physical standby database. Stopping Redo Apply is necessary to avoid applying changes past the redo that contains the LogMiner dictionary (described in <a href="creating-oracle-data-guard-logical-standby.html#GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" title="A LogMiner dictionary must be built into the redo data so that the LogMiner component of SQL Apply can properly interpret changes it sees in the redo.">Build a Dictionary in the Redo Data</a>).
                        </p>
                        <p>To stop Redo Apply, issue the following statement on the physical standby database:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4734"></a><div class="props_rev_3"><a id="GUID-BA252F0F-B5B9-4AA6-8593-250A7FA7283F" name="GUID-BA252F0F-B5B9-4AA6-8593-250A7FA7283F"></a><h4 id="SBYDB-GUID-BA252F0F-B5B9-4AA6-8593-250A7FA7283F" class="sect4"><span class="enumeration_section">4.2.3 </span>Creating a Logical Standby Task 3: Prepare the Primary Database to Support a Logical Standby Database
                  </h4>
                  <div>
                     <p>As part of creating a logical standby database, you must prepare the primary database to support a logical standby.</p>
                     <p>See the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-408C8876-F7CC-4112-9C08-58352577ECB4" title="You may have to modify certain parameters when you prepare to switch the role of a primary database.">Prepare the Primary Database for Role Transitions</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" title="A LogMiner dictionary must be built into the redo data so that the LogMiner component of SQL Apply can properly interpret changes it sees in the redo.">Build a Dictionary in the Redo Data</a></p>
                        </li>
                     </ul>
                  </div><a id="SBYDB5022"></a><a id="SBYDB4735"></a><div class="props_rev_3"><a id="GUID-408C8876-F7CC-4112-9C08-58352577ECB4" name="GUID-408C8876-F7CC-4112-9C08-58352577ECB4"></a><h5 id="SBYDB-GUID-408C8876-F7CC-4112-9C08-58352577ECB4" class="sect5"><span class="enumeration_section">4.2.3.1 </span>Prepare the Primary Database for Role Transitions
                     </h5>
                     <div>
                        <p>You may have to modify certain parameters when you prepare to switch the role of a primary database.</p>
                        <div class="section">
                           <p>In <a href="creating-oracle-data-guard-physical-standby.html#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" title="On the primary database, you define initialization parameters that control redo transport services while the database is in the primary role.">Set Primary Database Initialization Parameters</a>, you set up several standby role initialization parameters to take effect when the primary database is transitioned to the <span class="italic">physical</span> standby role.
                           </p>
                           <div class="infoboxnote" id="GUID-408C8876-F7CC-4112-9C08-58352577ECB4__GUID-D5FB5416-B7D7-48AA-834B-6195A83E89A2">
                              <p class="notep1">Note:</p>
                              <p>This step is necessary only if you plan to perform switchovers.</p>
                           </div>
                           <p>If you plan to transition the primary database to the <span class="italic">logical</span> standby role, then you must also modify the parameters shown in bold typeface in <a href="creating-oracle-data-guard-logical-standby.html#GUID-408C8876-F7CC-4112-9C08-58352577ECB4__I91919">Example 4-1</a>, so that no parameters need to change after a role transition:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Change the <code class="codeph">VALID_FOR</code> attribute in the original <code class="codeph">LOG_ARCHIVE_DEST_1</code> destination to archive redo data only from the online redo log and not from the standby redo log.
                                 </p>
                              </li>
                              <li>
                                 <p>Include the <code class="codeph">LOG_ARCHIVE_DEST_3</code> destination on the primary database. This parameter only takes effect when the primary database is transitioned to the logical standby role.
                                 </p>
                              </li>
                           </ul>
                           <p>The following table describes the archival processing defined by the changed initialization parameters shown in <a href="creating-oracle-data-guard-logical-standby.html#GUID-408C8876-F7CC-4112-9C08-58352577ECB4__I91919">Example 4-1</a>.
                           </p>
                           <div class="tblformalwide" id="GUID-408C8876-F7CC-4112-9C08-58352577ECB4__GUID-DBB3E671-47EA-4401-88EE-691B17BFA568">
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This 3 column table describes how archiving behavior for the Chicago database is controlled by LOG_ARCHIVE_DEST_n parameter when in the primary or the logical standby database role.." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="28%" id="d10791e1138">LOG_ARCHIVE_DEST_n</th>
                                       <th align="left" valign="bottom" width="33%" id="d10791e1141">When the Chicago Database Is Running in the Primary Role</th>
                                       <th align="left" valign="bottom" width="38%" id="d10791e1144">When the Chicago Database Is Running in the Logical Standby Role</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="28%" id="d10791e1149" headers="d10791e1138 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_1</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1149 d10791e1141 ">
                                          <p>Directs archiving of redo data generated by the primary database from the local online redo log files to the local archived redo log files in <code class="codeph">/arch1/chicago/</code>.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d10791e1149 d10791e1144 ">
                                          <p>Directs archiving of redo data generated by the logical standby database from the local online redo log files to the local archived redo log files in <code class="codeph">/arch1/chicago/</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="28%" id="d10791e1166" headers="d10791e1138 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_3</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1166 d10791e1141 ">
                                          <p>Is ignored; <code class="codeph">LOG_ARCHIVE_DEST_3</code> is valid only when <code class="codeph">chicago</code> is running in the standby role.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d10791e1166 d10791e1144 ">
                                          <p>Directs archiving of redo data from the standby redo log files to the local archived redo log files in <code class="codeph">/arch2/chicago/</code>.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-408C8876-F7CC-4112-9C08-58352577ECB4__I91919">
                           <p class="titleinexample">Example 4-1 Primary Database: Logical Standby Role Initialization Parameters</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1=
 'LOCATION=/arch1/chicago/ 
  VALID_FOR=(<span class="bold">ONLINE_LOGFILES</span>,ALL_ROLES)
  DB_UNIQUE_NAME=chicago'
<span class="bold">LOG_ARCHIVE_DEST_3=</span>
 <span class="bold">'LOCATION=/arch2/chicago/</span>
  <span class="bold">VALID_FOR=(STANDBY_LOGFILES,STANDBY_ROLE)</span> 
  <span class="bold">DB_UNIQUE_NAME=chicago'</span>
<span class="bold">LOG_ARCHIVE_DEST_STATE_3=ENABLE</span>
</pre><p>To dynamically set these initialization parameters, use the SQL <code class="codeph">ALTER SYSTEM SET</code> statement and include the <code class="codeph">SCOPE=BOTH</code> clause so that the changes take effect immediately and persist after the database is shut down and started up again.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="SBYDB4736"></a><div class="props_rev_3"><a id="GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" name="GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3"></a><h5 id="SBYDB-GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" class="sect5"><span class="enumeration_section">4.2.3.2 </span>Build a Dictionary in the Redo Data
                     </h5>
                     <div>
                        <p>A LogMiner dictionary must be built into the redo data so that the LogMiner component of SQL Apply can properly interpret changes it sees in the redo.</p>
                        <div class="section">
                           <p>As part of building the LogMiner dictionary, supplemental logging is automatically set up to log primary key and unique-constraint/index columns. The supplemental logging information ensures each update contains enough information to logically identify each row that is modified by the statement. </p>
                           <p>To build the LogMiner dictionary, issue the following statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.BUILD;
</pre><p>The <code class="codeph">DBMS_LOGSTDBY.BUILD</code> procedure waits for all existing transactions to complete. Long-running transactions executed on the primary database affect the timeliness of this command.
                           </p>
                           <div class="infoboxnote" id="GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3__GUID-5E22C5B2-F247-423F-9A26-C172D71B2BF0">
                              <p class="notep1">Note:</p>
                              <p>In databases created using Oracle Database 11<span class="italic">g</span> Release 2 (11.2) or later, supplemental logging information is automatically propagated to any existing physical standby databases. However, for databases in earlier releases, or if the database was created using an earlier release and then upgraded to 11.2, you must check whether supplemental logging is enabled at the physical standby(s) if it is also enabled at the primary database. If it is not enabled at the physical standby(s), then before performing a switchover or failover, you must enable supplemental logging on all existing physical standby databases. To do so, issue the following SQL statement on each physical standby:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt;  ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (PRIMARY KEY, UNIQUE INDEX) COLUMNS;</pre><p>If you do not do this, then any logical standby that is also in the same Oracle Data Guard configuration is unusable if a switchover or failover is performed to one of the physical standby databases. If a switchover or failover has already occurred and supplemental logging was not enabled, then you must recreate all logical standby databases.</p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3__GUID-3927954B-64E8-437B-BFA0-FB0E76B39EE5">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">DBMS_LOGSTDBY.BUILD</code> PL/SQL package in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ARPLS66834" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">UNDO_RETENTION</code> initialization parameter in <a href="../refrn/UNDO_RETENTION.html#REFRN10225" target="_blank"><span class="italic">Oracle Database Reference</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="SBYDB4737"></a><div class="props_rev_3"><a id="GUID-69BC7C26-F66F-4CB5-BBF6-08350C3E615F" name="GUID-69BC7C26-F66F-4CB5-BBF6-08350C3E615F"></a><h4 id="SBYDB-GUID-69BC7C26-F66F-4CB5-BBF6-08350C3E615F" class="sect4"><span class="enumeration_section">4.2.4 </span>Creating a Logical Standby Task 4: Transition to a Logical Standby Database
                  </h4>
                  <div>
                     <p>There are some necessary tasks you must perform to prepare the physical standby database to transition to a logical standby database.</p>
                     <p>The following topics describe these tasks:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8" title="The redo logs contain the information necessary to convert your physical standby database to a logical standby database.">Convert to a Logical Standby Database</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739">Adjust Initialization Parameters for the Logical Standby Database</a></p>
                        </li>
                     </ul>
                  </div><a id="SBYDB4738"></a><div class="props_rev_3"><a id="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8" name="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8"></a><h5 id="SBYDB-GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8" class="sect5"><span class="enumeration_section">4.2.4.1 </span>Convert to a Logical Standby Database
                     </h5>
                     <div>
                        <p>The redo logs contain the information necessary to convert your physical standby database to a logical standby database.</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8__GUID-1D8D1ACD-06B1-47AC-8FAD-5AB07FE8F633">
                              <p class="notep1">Note:</p>
                              <p>If you have an Oracle RAC physical standby database, then shut down all but one instance, set <code class="codeph">CLUSTER_DATABASE</code> to <code class="codeph">FALSE</code>, and start the standby database as a single instance in <code class="codeph">MOUNT EXCLUSIVE</code> mode, as follows:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET CLUSTER_DATABASE=FALSE SCOPE=SPFILE;
SQL&gt; SHUTDOWN ABORT;
SQL&gt; STARTUP MOUNT EXCLUSIVE; </pre></div>
                           <p>To continue applying redo data to the physical standby database until it is ready to convert to a logical standby database, issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; <a id="d10791e1559" class="indexterm-anchor"></a>ALTER DATABASE RECOVER TO LOGICAL STANDBY <span class="italic">db_name</span>;
</pre><p>For <span class="italic">db_name</span>, specify a database name that is different from the primary database to identify the new logical standby database. If you are using a server parameter file (spfile) at the time you issue this statement, then the database updates the file with appropriate information about the new logical standby database. If you are not using an spfile, then the database issues a message reminding you to set the name of the <code class="codeph">DB_NAME</code> parameter after shutting down the database.
                           </p>
                           <div class="infoboxnote" id="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8__GUID-EF5F2825-F586-4617-9E53-192099643DDA">
                              <p class="notep1">Note:</p>
                              <p>If you are creating a logical standby database in the context of performing a rolling upgrade<a id="d10791e1578" class="indexterm-anchor"></a> of Oracle software with a physical standby database, then issue the following command instead:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER TO LOGICAL STANDBY KEEP IDENTITY;
</pre><p>A logical standby database created with the <code class="codeph">KEEP IDENTITY</code> clause<a id="d10791e1590" class="indexterm-anchor"></a> retains the same <code class="codeph">DB_NAME</code> and <code class="codeph">DBID</code> as that of its primary database. Such a logical standby database can only participate in one switchover operation, and thus should only be created in the context of a rolling upgrade with a physical standby database.
                              </p>
                              <p>The <code class="codeph">KEEP IDENTITY</code> clause is available only if the database being upgraded is running Oracle Database release 11.1 or later.
                              </p>
                           </div>
                           <p>The statement waits, applying redo data until the LogMine<a id="d10791e1606" class="indexterm-anchor"></a><a id="d10791e1610" class="indexterm-anchor"></a>r dictionary is found in the log files. This may take several minutes, depending on how long it takes redo generated in <a href="creating-oracle-data-guard-logical-standby.html#GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" title="A LogMiner dictionary must be built into the redo data so that the LogMiner component of SQL Apply can properly interpret changes it sees in the redo.">Build a Dictionary in the Redo Data</a> to be transmitted to the standby database, and how much redo data needs to be applied. If a dictionary build is not successfully performed on the primary database, then this command never completes. You can cancel the SQL statement by issuing the <a id="d10791e1622" class="indexterm-anchor"></a><a id="d10791e1626" class="indexterm-anchor"></a><code class="codeph">ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL</code> statement from another SQL session.
                           </p>
                           <div class="infoboxnote" id="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8__GUID-4B5A4365-5F88-4AAD-8F1E-DF9E45A5219A">
                              <p class="notep1">Caution:</p>
                              <p>In releases prior to Oracle Database 11<span class="italic">g</span>, you needed to create a new password file before you opened the logical standby database. This is no longer needed. Creating a new password file at the logical standby database causes redo transport services to not work properly.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB5023"></a><a id="SBYDB4739"></a><div class="props_rev_3"><a id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739" name="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739"></a><h5 id="SBYDB-GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739" class="sect5"><span class="enumeration_section">4.2.4.2 </span>Adjust Initialization Parameters for the Logical Standby Database
                     </h5>
                     <div>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__GUID-B8EC917A-CE11-414F-8F36-3D612E811DA8">
                              <p class="notep1">Note:</p>
                              <p>If you started with an Oracle RAC physical standby database, then set <code class="codeph">CLUSTER_DATABASE</code> back to <code class="codeph">TRUE</code>, as follows:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET CLUSTER_DATABASE=TRUE SCOPE=SPFILE; </pre></div>
                           <p>On the logical standby database, shutdown the instance and issue the <code class="codeph">STARTUP MOUNT</code> statement to start and mount the database. Do not open the database; it should remain closed to user access until later in the creation process. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SHUTDOWN;
SQL&gt; STARTUP MOUNT;
</pre><p>You need to modify the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameters because, unlike physical standby databases, logical standby databases are open databases that generate redo data and have multiple log files (online redo log files, archived redo log files, and standby redo log files). It is good practice to specify separate local destinations for:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Archived redo log files that store redo data generated by the logical standby database. In <a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">Example 4-2</a>, this is configured as the <code class="codeph">LOG_ARCHIVE_DEST_1=LOCATION=/arch1/boston</code> destination.
                                 </p>
                              </li>
                              <li>
                                 <p>Archived redo log files that store redo data received from the primary database. In <a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">Example 4-2</a>, this is configured as the <code class="codeph">LOG_ARCHIVE_DEST_3=LOCATION=/arch2/boston</code> destination.
                                 </p>
                              </li>
                           </ul>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">Example 4-2</a> shows the initialization parameters that were modified for the logical standby database. The parameters shown are valid for the Boston logical standby database when it is running in either the primary or standby database role.
                           </p>
                           <div class="infoboxnote" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__GUID-8941C4D9-CA66-4639-8C05-D2E8AF4317AE">
                              <p class="notep1">Note:</p>
                              <p>If database compatibility is set to 11.1 or later, you can use the fast recovery area to store remote archived logs. To do this, you need to set only the following parameters (assuming you have already set the <code class="codeph">DB_RECOVERY_FILE_DEST</code> and <code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code> parameters):
                              </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1=
  'LOCATION=USE_DB_RECOVERY_FILE_DEST
   DB_UNIQUE_NAME=boston'</pre><p>Because you are using the fast recovery area, it is not necessary to specify the <code class="codeph">VALID_FOR</code> parameter. Its default value is (<code class="codeph">ALL_LOGFILES,ALL_ROLES</code>) and that is the desired behavior in this case.  <code class="codeph">LOG_ARCHIVE_DEST_1</code> is used for all log files, both online (primary) and standby.
                              </p>
                           </div>
                           <p>The following table describes the archival processing defined by the initialization parameters shown in <a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">Example 4-2</a>.
                           </p>
                           <div class="tblformalwide" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__GUID-B07FCDBE-0319-41D0-B92F-2C10A2DF7765">
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This 3 column table describes the archival processing when the Boston database is in the primary and in the logical standby database role." width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="30%" id="d10791e1804">LOG_ARCHIVE_DEST_n</th>
                                       <th align="left" valign="bottom" width="33%" id="d10791e1807">When the Boston Database Is Running in the Primary Role</th>
                                       <th align="left" valign="bottom" width="37%" id="d10791e1810">When the Boston Database Is Running in the Logical Standby Role</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d10791e1815" headers="d10791e1804 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_1</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1815 d10791e1807 ">
                                          <p>Directs archival of redo data generated by the primary database from the local online redo log files to the local archived redo log files in <code class="codeph">/arch1/boston/</code>.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="37%" headers="d10791e1815 d10791e1810 ">
                                          <p>Directs archival of redo data generated by the logical standby database from the local online redo log files to the local archived redo log files in <code class="codeph">/arch1/boston/</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d10791e1832" headers="d10791e1804 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_2</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1832 d10791e1807 ">
                                          <p>Directs transmission of redo data to the remote logical standby database <code class="codeph">chicago</code>.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="37%" headers="d10791e1832 d10791e1810 ">
                                          <p>Is ignored; <code class="codeph">LOG_ARCHIVE_DEST_2</code> is valid only when <code class="codeph">boston</code> is running in the primary role.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d10791e1852" headers="d10791e1804 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_3</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1852 d10791e1807 ">
                                          <p>Is ignored; <code class="codeph">LOG_ARCHIVE_DEST_3</code> is valid only when <code class="codeph">boston</code> is running in the standby role.
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="37%" headers="d10791e1852 d10791e1810 ">
                                          <p>Directs archival of redo data received from the primary database to the local archived redo log files in <code class="codeph">/arch2/boston/</code>.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnote" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__GUID-4D1D29EB-4F20-40D8-BDBE-FB85AC68CC9B">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">DB_FILE_NAME_CONVERT</code> initialization parameter is not honored once a physical standby database is converted to a logical standby database. If necessary, register a skip handler and provide SQL Apply with a replacement DDL string to execute by converting the path names of the primary database data files to the standby data file path names. See the <a href="../arpls/DBMS_LOGSTDBY.html#ARPLS363" target="_blank"><code class="codeph">DBMS_LOGSTDBY</code></a> package for information about the <code class="codeph">SKIP</code> procedure.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">
                           <p class="titleinexample">Example 4-2 Modifying Initialization Parameters for a Logical Standby Database</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1=
  'LOCATION=/arch1/boston/
   VALID_FOR=(ONLINE_LOGFILES,ALL_ROLES)
   DB_UNIQUE_NAME=boston'
LOG_ARCHIVE_DEST_2=
  'SERVICE=chicago ASYNC
   VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE)
   DB_UNIQUE_NAME=chicago'
LOG_ARCHIVE_DEST_3=
  'LOCATION=/arch2/boston/
   VALID_FOR=(STANDBY_LOGFILES,STANDBY_ROLE)
   DB_UNIQUE_NAME=boston'
LOG_ARCHIVE_DEST_STATE_1=ENABLE
LOG_ARCHIVE_DEST_STATE_2=ENABLE
LOG_ARCHIVE_DEST_STATE_3=ENABLE
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="SBYDB4740"></a><div class="props_rev_3"><a id="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D" name="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D"></a><h4 id="SBYDB-GUID-68777C01-83F6-4CCF-9BA2-547ED180138D" class="sect4"><span class="enumeration_section">4.2.5 </span>Creating a Logical Standby Task 5: Open the Logical Standby Database
                  </h4>
                  <div>
                     <p>Use an <code class="codeph">ALTER DATABASE</code> SQL statement to open the newly created logical standby.
                     </p>
                     <div class="section">
                        <p>For example, issue the following statement (do not supply the <code class="codeph">RESETLOGS</code> option if the logical standby was created using the <code class="codeph">KEEP</code> <code class="codeph">IDENTITY</code> option):
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE OPEN RESETLOGS;
</pre><div class="infoboxnote" id="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D__GUID-F2C47D1B-C918-419C-9E78-8F5BE945DEBB">
                           <p class="notep1">Note:</p>
                           <p>If you started with an Oracle RAC physical standby database, then you can start up all other standby instances at this point.</p>
                        </div>
                        <div class="infoboxnote" id="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D__GUID-B64C5B78-0AAA-4321-817F-B9460BEDAAF3">
                           <p class="notep1">Caution:</p>
                           <p>If you are co-locating the logical standby database on the same computer system as the primary database, then you must issue the following SQL statement before starting SQL Apply for the first time, so that SQL Apply skips the file operations performed at the primary database. The reason this is necessary is that SQL Apply has access to the same directory structure as the primary database, and data files that belong to the primary database could possibly be damaged if SQL Apply attempted to re-execute certain file-specific operations.</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP('ALTER TABLESPACE');
</pre><p>The <code class="codeph">DB_FILENAME_CONVERT</code> parameter that you set up while co-locating the physical standby database on the same system as the primary database, is ignored by SQL Apply. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ARPLS363" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about <code class="codeph">DBMS_LOGSTDBY.SKIP</code> and equivalent behavior in the context of a logical standby database.
                           </p>
                        </div>
                        <p>Because this is the first time the database is being opened, the database's global name is adjusted automatically to match the new <code class="codeph">DB_NAME</code> initialization parameter. (This is not true if the logical standby was created using the <code class="codeph">KEEP</code> <code class="codeph">IDENTITY</code> option.)
                        </p>
                        <div class="infoboxnote" id="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D__GUID-43C93E0C-DBE7-4812-9330-96376901BC11">
                           <p class="notep1">Note:</p>
                           <p>If you are creating the logical standby database to perform a rolling upgrade of the Oracle Database software, and you are concerned about updates to objects that may not be supported by SQL Apply, then Oracle recommends that you use the <code class="codeph">DBMS_LOGSTDBY</code> PL/SQL procedure. At the logical standby database, run the following procedures to capture and record the information as events in the <code class="codeph">DBA_LOGSTDBY_EVENTS</code> table:
                           </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_LOGSTDBY.APPLY_SET('MAX_EVENTS_RECORDED',
DBMS_LOGSTDBY.MAX_EVENTS);

EXEC DBMS_LOGSTDBY.APPLY_SET('RECORD_UNSUPPORTED_OPERATIONS', 'TRUE');
</pre><p>This captures information about any transactions running on the primary that are not supported by logical standby. When the upgrade is complete and before you switch production to the new version, check this table. If nothing is recorded, then you know everything was replicated. If something is recorded, then you can choose to either take corrective action or abandon the upgrade. </p>
                           <p><span class="bold">See Also:</span></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="managing-oracle-data-guard-logical-standby-databases.html#GUID-D6EEF87A-211C-476C-9CBC-126858F7026A" title="The DBA_LOGSTDBY_EVENTS view can be thought of as a circular log containing the most recent interesting events that occurred in the context of SQL Apply.">Customizing Logging of Events in the DBA_LOGSTDBY_EVENTS View</a> for more information about the <code class="codeph">DBA_LOGSTDBY_EVENTS</code> view
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_LOGSTDBY.html#ARPLS363" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for complete information about the <code class="codeph">DBMS_LOGSTDBY</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>Issue the following statement to begin applying redo data to the logical standby database: <a id="d10791e2062" class="indexterm-anchor"></a><a id="d10791e2068" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">SQL&gt;  <a id="d10791e2074" class="indexterm-anchor"></a><a id="d10791e2078" class="indexterm-anchor"></a><a id="d10791e2082" class="indexterm-anchor"></a>ALTER DATABASE START LOGICAL STANDBY APPLY IMMEDIATE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4741"></a><div class="props_rev_3"><a id="GUID-930CFC64-4EFD-4CF3-A5D0-062FBBD069E1" name="GUID-930CFC64-4EFD-4CF3-A5D0-062FBBD069E1"></a><h4 id="SBYDB-GUID-930CFC64-4EFD-4CF3-A5D0-062FBBD069E1" class="sect4"><span class="enumeration_section">4.2.6 </span>Creating a Logical Standby Task 6: Verify the Logical Standby Database Is Performing Properly
                  </h4>
                  <div>
                     <p>After you create a logical standby database, it is important to verify that it is performing properly.</p>
                     <div class="section">
                        <p>See the following topics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p> <a href="oracle-data-guard-redo-transport-services.html#GUID-0EC71C7D-A80B-40AA-93E5-28BB7E24ED31" title="An Oracle Data Guard configuration requires that Oracle redo transport services be configured and monitored."> Redo Transport Services</a></p>
                           </li>
                           <li>
                              <p><a href="managing-oracle-data-guard-logical-standby-databases.html#GUID-4177C717-4244-4E33-ACE7-15D53EAB2443" title="An understanding of these concepts will help you to successfully manage a logical standby database."> Managing a Logical Standby Database</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB4742"></a><div class="props_rev_3"><a id="GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C" name="GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C"></a><h3 id="SBYDB-GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C" class="sect3"><span class="enumeration_section">4.3 </span>Creating a Logical Standby: Post-Creation Steps
               </h3>
               <div>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C__GUID-A811AFEC-58F3-443D-996E-AA3FEF5BC345">
                        <p class="notep1">Note:</p>
                        <p>The conversion of the physical standby database to a logical standby database happens in two phases:</p>
                        <ol>
                           <li>
                              <p>As part of the  <code class="codeph">ALTER DATABASE RECOVER TO LOGICAL STANDBY</code> statement (unless you have specified the <code class="codeph">KEEP IDENTITY</code> clause), the DBID of the database is changed.
                              </p>
                           </li>
                           <li>
                              <p>As part of the first successful invocation of <code class="codeph">ALTER DATABASE START LOGICAL STANDBY APPLY </code>statement, the control file is updated to make it consistent with that of the newly created logical standby database. 
                              </p>
                              <p>After you have successfully invoked the <code class="codeph">ALTER DATABASE START LOGICAL STANDBY APPLY</code> statement, take a full backup of the logical standby database, because the backups taken from the primary database cannot be used to restore the logical standby database.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <p>At this point, the logical standby database is running and can provide the maximum performance level of data protection. The following list describes additional preparations you can take on the logical standby database:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Upgrade the data protection mode</p>
                           <p>The Oracle Data Guard configuration is initially set up in the maximum performance mode (the default). </p>
                        </li>
                        <li>
                           <p>Enable Flashback Database</p>
                           <p>Flashback Database removes the need to re-create the primary database after a failover. Flashback Database enables you to return a database to its state at a time in the recent past much faster than traditional point-in-time recovery, because it does not require restoring data files from backup nor the extensive application of redo data. You can enable Flashback Database on the primary database, the standby database, or both.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C__GUID-B6358017-F28E-4EF0-AFD4-AC8617E35C79">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="examples-of-using-oracle-data-guard.html#GUID-1163448F-6B18-4A44-AA8D-7CDF0D1360FB" title="After a failover occurs, the original primary database can no longer participate in the Oracle Data Guard configuration until it is repaired and established as a standby database in the new configuration.">Converting a Failed Primary Into a Standby Database Using Flashback Database</a> and <a href="examples-of-using-oracle-data-guard.html#GUID-BAA5ED38-29A0-4E8D-8435-AA083D19C13E" title="If an error occurrs on the primary database in an Oracle Data Guard configuration in which the standby database is using real-time apply, then the same error is applied on the standby database. if Flashback Database is enabled, you can revert the primary and standby databases back to their pre-error condition.">Using Flashback Database After Issuing an Open Resetlogs Statement</a> for scenarios showing how to use Flashback Database in an Oracle Data Guard environment.
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV71000" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about Flashback Database
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SBYDB5139"></a><div class="props_rev_3"><a id="GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2" name="GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2"></a><h3 id="SBYDB-GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2" class="sect3"><span class="enumeration_section">4.4 </span>Creating a Logical Standby of a CDB
               </h3>
               <div>
                  <p>You can create a logical standby of a multitenant container database (CDB) just as you can create a logical standby of a regular primary database.</p>
                  <p> The following are some of the behavioral differences to be aware of when you create and use a logical standby of a CDB:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The database role is defined at the CDB level, not at the pluggable database (PDB) container level.</p>
                     </li>
                     <li>
                        <p>If you execute a switchover or failover operation, then the entire CDB undergoes the role change.</p>
                     </li>
                     <li>
                        <p>Any DDL related to role changes must be executed while connected to the root container of the CDB.</p>
                     </li>
                     <li>
                        <p>As with a regular logical standby, a logical standby of a CDB operates a single pool of processes that mine the redo stream once, but the responsibility is shared for updating all of the PDBs and the root container of the CDB.</p>
                     </li>
                     <li>
                        <p>You are not required to have the same set of PDBs at the primary and standby. However, only tables that exist in the same container at both the primary and standby are replicated.</p>
                     </li>
                     <li>
                        <p>In general, logical standby PL/SQL interfaces which modify global configuration attributes, such as <code class="codeph">DBMS_LOGSTDBY.APPLY_SET</code>, are executed in the root container. However, <code class="codeph">DBMS_LOGSTDBY.INSTANTIATE_TABLE</code> must be called inside the container where the table of interest resides, and the <code class="codeph">DBMS_LOGSTDBY.SKIP</code> procedure must be called inside the container of interest.
                        </p>
                     </li>
                     <li>
                        <p>Logical standby views are enhanced to provide container names where appropriate. Many DBA views have analogous CDB views whose names begin with CDB. For example, the view <code class="codeph">CDB_LOGSTDBY_NOT_UNIQUE</code> contains the same data as shown in <code class="codeph">DBA_LOGSTDBY_NOT_UNIQUE</code> view, but it has an additional column indicating the PDB name. When the <code class="codeph">CDB_LOGSTDBY_NOT_UNIQUE</code> view is queried in the root it shows data for all databases in the CDB. 
                        </p>
                     </li>
                     <li>
                        <p>In a logical standby of a CDB, the syntax of SQL statements is generally the same as for noncontainer databases. However, the effect of some statements, including the following, may be different:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ALTER DATABASE RECOVER TO LOGICAL STANDBY</code> functions only in the CDB; it is not allowed in a PDB.
                              </p>
                           </li>
                           <li>
                              <p>A role is associated with an entire CDB; individual PDBs do not have their own roles. Therefore, the following role change DDL associated with logical standbys affect the entire CDB: </p>
                              <p><code class="codeph">ALTER DATABASE [PREPARE|COMMIT] TO SWITCHOVER</code> 
                              </p>
                              <p><code class="codeph">ALTER DATABASE ACTIVATE LOGICAL STANDBY</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER DATABASE [START|STOP] LOGICAL STANDBY APPLY</code> functions only in the root container and affects the entire CDB. This statement is not allowed on a PDB.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER DATABASE GUARD</code> functions only in the root container and affects the entire CDB. For example, if an <code class="codeph">ALTER DATABASE GUARD ALL</code> statement is issued, then user activity in the root and in all PDBs is restricted.
                              </p>
                           </li>
                           <li>
                              <p>To administer a multitenant environment, you must have the <code class="codeph">CDB_DBA</code> role.
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2__GUID-22CA4301-DC88-4EC8-A090-D7966107018F">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=CNCPT89249" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about CDBs
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ARPLS66850" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about using the <code class="codeph">DBMS_LOGSTDBY.SKIP</code> procedure in containers
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
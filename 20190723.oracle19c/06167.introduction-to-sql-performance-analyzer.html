<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can run SQL Performance Analyzer on a production system or a test system that closely resembles the production system.">
      <meta name="description" content="You can run SQL Performance Analyzer on a production system or a test system that closely resembles the production system.">
      <title>Introduction to SQL Performance Analyzer</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Testing Guide ">
      <meta property="og:description" content="You can run SQL Performance Analyzer on a production system or a test system that closely resembles the production system.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Testing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96279-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="sql-performance-analyzer.html" title="Previous" type="text/html">
      <link rel="next" href="creating-an-analysis-task.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide">
    <meta name="dcterms.isVersionOf" content="RATUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sql-performance-analyzer.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="creating-an-analysis-task.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Testing Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-performance-analyzer.html" property="item" typeof="WebPage"><span property="name"> SQL Performance Analyzer </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Introduction to SQL Performance Analyzer </li>
            </ol>
            <a id="GUID-860FC707-B281-4D81-8B43-1E3857194A72" name="GUID-860FC707-B281-4D81-8B43-1E3857194A72"></a><a id="RATUG240"></a><a id="RATUG166"></a>
            
            <h2 id="RATUG-GUID-860FC707-B281-4D81-8B43-1E3857194A72" class="sect2"><span class="enumeration_chapter">2 </span> Introduction to SQL Performance Analyzer 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div><span>You can run SQL Performance Analyzer on a production system or a test system that closely resembles the production system.</span> Testing a system change on a production system will impact the system's throughput because SQL Performance Analyzer must execute the SQL statements that you are testing. Any global changes made on the system to test the performance effect may also affect other users of the system. If the system change does not impact many sessions or SQL statements, then running SQL Performance Analyzer on the production system may be acceptable. However, for systemwide changes—such as a database upgrade—using a production system is not recommended. Instead, consider running SQL Performance Analyzer on a separate test system so that you can test the effects of the system change without affecting the production system. Using a test system also ensures that other workloads running on the production system will not affect the analysis performed by SQL Performance Analyzer. Running SQL Performance Analyzer on a test system is the recommended approach and the methodology described here. If you choose to run the SQL Performance Analyzer on the production system, then substitute the production system for the test system where applicable.
               </div>
               <p>Analyzing the SQL performance effect of system changes using <a id="d3574e87" class="indexterm-anchor"></a><a id="d3574e91" class="indexterm-anchor"></a>SQL Performance Analyzer involves the following steps, as illustrated in <a href="introduction-to-sql-performance-analyzer.html#GUID-860FC707-B281-4D81-8B43-1E3857194A72__CHDJADEJ">Figure 2-1</a>:
               </p>
               <div class="figure" id="GUID-860FC707-B281-4D81-8B43-1E3857194A72__CHDJADEJ">
                  <p class="titleinfigure">Figure 2-1 SQL Performance Analyzer Workflow</p><img src="img/ratug002.gif" width="497" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" longdesc="img_text/ratug002.html"><br><a href="img_text/ratug002.html">Description of "Figure 2-1 SQL Performance Analyzer Workflow"</a></div>
               <!-- class="figure" -->
               <ol>
                  <li>
                     <p>Capture the SQL workload that you intend to analyze and store it in a SQL tuning set, as described in <span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-3828F92F-62BC-4A5E-8303-9720DCCB64B4" title="Before running SQL Performance Analyzer, capture a set of SQL statements on the production system that represents the SQL workload which you intend to analyze.">Capturing the SQL Workload</a>"</span>.
                     </p>
                  </li>
                  <li>
                     <p>If you plan to use a test system separate from your production system, then perform the following steps:</p>
                     <ol type="a">
                        <li>
                           <p>Set up the test system to match the production environment as closely as possible.</p>
                        </li>
                        <li>
                           <p>Transport the SQL tuning set to the test system.</p>
                        </li>
                     </ol>
                  </li>
                  <li id="GUID-860FC707-B281-4D81-8B43-1E3857194A72__BHCIFFDF">
                     <p>On the test system, create a SQL Performance Analyzer task, as described in <span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-9EF13018-5EDB-4B60-85F8-187DF25EECFF" title="After the SQL workload is captured and transported to the test system, and the initial database environment is properly configured, you can run SQL Performance Analyzer to analyze the effects of a system change on SQL performance.">Creating a SQL Performance Analyzer Task</a>"</span>.
                     </p>
                  </li>
                  <li>
                     <p>Build the pre-change SQL trial by test executing or generating execution plans for the SQL statements stored in the SQL tuning set, as described in <span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-310A0AA6-38C9-49A1-97C1-9BED682E654A" title="Create a pre-change SQL trial before making the system change.">Measuring the Pre-Change SQL Performance</a>"</span></p>
                  </li>
                  <li>
                     <p>Perform the system change, as described in <span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-176E2C1A-5A09-4CDC-9974-1B47129DA08E" title="Make the change whose effect on SQL performance you intend to measure. SQL Performance Analyzer can analyze the effect of many types of system changes.">Making a System Change</a>"</span></p>
                  </li>
                  <li id="GUID-860FC707-B281-4D81-8B43-1E3857194A72__CHDBJBIC">
                     <p>Build the post-change SQL trial by re-executing the SQL statements in the SQL tuning set on the post-change test system, as described in <span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-7BE65E91-0C7B-4740-8114-4DAC76CDDB28" title="After performing the system change, create a post-change SQL trial.">Measuring the Post-Change SQL Performance</a>"</span></p>
                  </li>
                  <li>
                     <p>Compare and analyze the pre-change and post-change versions of performance data, and generate a report to identify the SQL statements that have improved, remained unchanged, or regressed after the system change, as described in <span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-F07105CA-0DFA-4102-A8FE-1C11AD201528" title="SQL Performance Analyzer compares the performance of SQL statements before and after the change and produces a report identifying any changes in execution plans or performance of the SQL statements.">Comparing Performance Measurements</a>"</span></p>
                  </li>
                  <li id="GUID-860FC707-B281-4D81-8B43-1E3857194A72__CHDEGIFG">
                     <p>Tune any regressed SQL statements that are identified, as described in <span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-9D5A985E-0BB0-43FA-955A-599B2E6A58AA" title="If the performance analysis performed by SQL Performance Analyzer reveals regressed SQL statements, then you can make changes to remedy the problem.">Fixing Regressed SQL Statements</a>"</span>.
                     </p>
                  </li>
                  <li id="GUID-860FC707-B281-4D81-8B43-1E3857194A72__BHCGDEFB">
                     <p>Ensure that the performance of the tuned SQL statements is acceptable by repeating steps <a href="introduction-to-sql-performance-analyzer.html#GUID-860FC707-B281-4D81-8B43-1E3857194A72__CHDBJBIC">6</a> through <a href="introduction-to-sql-performance-analyzer.html#GUID-860FC707-B281-4D81-8B43-1E3857194A72__CHDEGIFG">8</a> until your performance goals are met.
                     </p>
                     <p>For each comparison, you can use any previous SQL trial as the pre-change SQL trial and the current SQL trial as the post-change SQL trial. For example, you may want to compare the first SQL trial to the current SQL trial to assess the total change, or you can compare the most recent SQL trial to the current SQL trial to assess just the most recent change.</p>
                  </li>
               </ol>
               <div class="infoboxnote" id="GUID-860FC707-B281-4D81-8B43-1E3857194A72__GUID-C0576332-2067-4176-AAAF-F13F524C3C44">
                  <p class="notep1">Note:</p>
                  <p>Oracle Enterprise Manager provides automated workflows for steps <a href="introduction-to-sql-performance-analyzer.html#GUID-860FC707-B281-4D81-8B43-1E3857194A72__BHCIFFDF">3</a> through <a href="introduction-to-sql-performance-analyzer.html#GUID-860FC707-B281-4D81-8B43-1E3857194A72__BHCGDEFB">9</a> to simplify this process.
                  </p>
               </div>
               <div class="infoboxnote" id="GUID-860FC707-B281-4D81-8B43-1E3857194A72__GUID-C33F4953-A579-4581-BABA-57C5A6F9B5B9">
                  <p class="notep1">Note:</p>
                  <p>Data visibility and privilege requirements may differ when using SQL Performance Analyzer with pluggable databases (PDBs).</p>
               </div>
               <div class="infoboxnotealso" id="GUID-860FC707-B281-4D81-8B43-1E3857194A72__GUID-9AEE68BB-11EB-4DFD-AE04-8B01EC7EE3B8">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-15E99CE8-282C-4A7E-BD3B-B7C2B93DE0C1" title="After you have captured the SQL workload into a SQL tuning set on the production system, you can conduct SQL Performance Analyzer analysis on the same database where the workload was captured or on a different database.">Setting Up the Test System</a>"</span></p>
                     </li>
                     <li>
                        <p>For information about how manageability features—including SQL Performance Analyzer—work in a multitenant container database (CDB), see <a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN13885" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="RATUG167"></a><div class="props_rev_3"><a id="GUID-3828F92F-62BC-4A5E-8303-9720DCCB64B4" name="GUID-3828F92F-62BC-4A5E-8303-9720DCCB64B4"></a><h3 id="RATUG-GUID-3828F92F-62BC-4A5E-8303-9720DCCB64B4" class="sect3"><span class="enumeration_section">2.1 </span>Capturing the SQL Workload
               </h3>
               <div>
                  <p>Before running SQL Performance Analyzer, capture a set of SQL statements on the production system that represents the SQL workload which you intend to analyze.</p>
                  <p>The captured SQL statements should include the following information:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>SQL text</p>
                     </li>
                     <li>
                        <p>Execution environment</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>SQL binds, which are bind values needed to execute a SQL statement and generate accurate execution statistics</p>
                           </li>
                           <li>
                              <p>Parsing schema under which a SQL statement can be compiled</p>
                           </li>
                           <li>
                              <p>Compilation environment, including initialization parameters under which a SQL statement is executed</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Number of times a SQL statement was executed</p>
                     </li>
                  </ul>
                  <p>Capturing a SQL workload has a negligible performance impact on your production system and should not affect throughput. A SQL workload that contains more SQL statements will better represent the state of the application or database. This will enable SQL Performance Analyzer to more accurately forecast the potential impact of system changes on the SQL workload. Therefore, you should capture as many SQL statements as possible. Ideally, you should capture all SQL statements that are either called by the application or are running on the database.</p>
                  <p>You can store captured SQL statements in a SQL tuning set and use it as an input source for SQL Performance Analyzer. A SQL tuning set<a id="d3574e333" class="indexterm-anchor"></a> is a database object that includes one or more SQL statements, along with their execution statistics and execution context. SQL statements can be loaded into a SQL tuning set from different sources, including the cursor cache, Automatic Workload Repository (AWR), SQL trace files, and existing SQL tuning sets. Capturing a SQL workload using a SQL tuning set enables you to:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Store the SQL text and any necessary auxiliary information in a single, persistent database object</p>
                     </li>
                     <li>
                        <p>Populate, update, delete, and select captured SQL statements in the SQL tuning set</p>
                     </li>
                     <li>
                        <p>Load and merge content from various data sources, such as the Automatic Workload Repository (AWR) or the cursor cache</p>
                     </li>
                     <li>
                        <p>Export the SQL tuning set from the system where the SQL workload is captured and import it into another system</p>
                     </li>
                     <li>
                        <p>Reuse the SQL workload as an input source for other advisors, such as the SQL Tuning Advisor and the SQL Access Advisor</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-3828F92F-62BC-4A5E-8303-9720DCCB64B4__GUID-E1798EE6-9EC1-4AAC-9656-6321F067651F">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/ratug&amp;id=TDPPT162" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> for information about creating SQL tuning sets using Oracle Enterprise Manager
                           </p>
                        </li>
                        <li>
                           <p><a href="../tgsql/managing-sql-tuning-sets.html#TGSQL516" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for information about creating SQL tuning sets using APIs
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG168"></a><div class="props_rev_3"><a id="GUID-15E99CE8-282C-4A7E-BD3B-B7C2B93DE0C1" name="GUID-15E99CE8-282C-4A7E-BD3B-B7C2B93DE0C1"></a><h3 id="RATUG-GUID-15E99CE8-282C-4A7E-BD3B-B7C2B93DE0C1" class="sect3"><span class="enumeration_section">2.2 </span>Setting Up the Test System
               </h3>
               <div>
                  <div><span>After you have captured the SQL workload into a SQL tuning set on the production system, you can conduct SQL Performance Analyzer analysis on the same database where the workload was captured or on a different database.</span> Because the analysis is resource-intensive, it is recommended that you capture the workload on a production database and transport it to a separate test database where the analysis can be performed. To do so, export the SQL tuning set from the production system and import it into a separate system where the system change will be tested.
                  </div>
                  <p><a id="d3574e462" class="indexterm-anchor"></a>There are many ways to create a test database. For example, you can use the <code class="codeph">DUPLICATE</code> command of Recovery Manager (RMAN), Oracle Data Pump, or transportable tablespaces. Oracle recommends using RMAN because it can create the test database from pre-existing backups or from the active production datafiles. The production and test databases can reside on the same host or on different hosts.
                  </p>
                  <p>You should configure the test database environment to match the database environment of the production system as closely as possible. In this way, SQL Performance Analyzer can more accurately forecast the effect of the system change on SQL performance.</p>
                  <p>After the test system is properly configured, export the SQL tuning set from the production system to a staging table, then import it from the staging table into the test system.</p>
                  <div class="infoboxnotealso" id="GUID-15E99CE8-282C-4A7E-BD3B-B7C2B93DE0C1__GUID-FCCCC9F1-43EA-4FF7-89CD-32A022FF2B0D">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../bradv/rman-duplicating-databases.html#BRADV-GUID-F31F9FCE-B610-49EB-B9DB-44B9AA4E838F" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about duplicating databases using RMAN
                           </p>
                        </li>
                        <li>
                           <p><a href="../tdppt/tuning-sql-statements.html#TDPPT159" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> for information about transporting SQL tuning sets using Oracle Enterprise Manager
                           </p>
                        </li>
                        <li>
                           <p><a href="../tgsql/managing-sql-tuning-sets.html#TGSQL516" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for information about transporting SQL tuning sets using APIs
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG169"></a><div class="props_rev_3"><a id="GUID-9EF13018-5EDB-4B60-85F8-187DF25EECFF" name="GUID-9EF13018-5EDB-4B60-85F8-187DF25EECFF"></a><h3 id="RATUG-GUID-9EF13018-5EDB-4B60-85F8-187DF25EECFF" class="sect3"><span class="enumeration_section">2.3 </span>Creating a SQL Performance Analyzer Task
               </h3>
               <div>
                  <p>After the SQL workload is captured and transported to the test system, and the initial database environment is properly configured, you can run SQL Performance Analyzer to analyze the effects of a system change on SQL performance.</p>
                  <p>To run SQL Performance Analyzer, you must first create a SQL Performance Analyzer task. A task is a container that encapsulates all of the data about a complete SQL Performance Analyzer analysis. A SQL Performance Analyzer analysis comprises of at least two SQL trials and a comparison. A <a id="d3574e580" class="indexterm-anchor"></a>SQL trial encapsulates the execution performance of a SQL tuning set under specific environmental conditions. When creating a SQL Performance Analyzer task, you will need to select a <a id="d3574e585" class="indexterm-anchor"></a>SQL tuning set as its input source. When building SQL trials using the test execute or explain plan methods, the SQL tuning set will be used as the source for SQL statements. The SQL Performance Analyzer analysis will show the impact of the environmental differences between the two trials.
                  </p>
                  <div class="infoboxnotealso" id="GUID-9EF13018-5EDB-4B60-85F8-187DF25EECFF__GUID-F0D0111C-5886-4697-AEBA-3F6822284773">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="creating-an-analysis-task.html#GUID-41CB8DDE-01C8-42BF-AD16-3494D4648A63" title="Once you have captured a SQL workload that you want to analyze into a SQL tuning set (STS), you can run SQL Performance Analyzer to analyze the effects of a system change on SQL performance.">Creating an Analysis Task</a> for information about how to create a SQL Performance Analyzer task
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG170"></a><div class="props_rev_3"><a id="GUID-310A0AA6-38C9-49A1-97C1-9BED682E654A" name="GUID-310A0AA6-38C9-49A1-97C1-9BED682E654A"></a><h3 id="RATUG-GUID-310A0AA6-38C9-49A1-97C1-9BED682E654A" class="sect3"><span class="enumeration_section">2.4 </span>Measuring the Pre-Change SQL Performance
               </h3>
               <div>
                  <div><span>Create a pre-change SQL trial before making the system change.</span> You can use the following methods to generate the performance data needed for a SQL trial with SQL Performance Analyzer:
                  </div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Test execute</p>
                        <p>This method test executes SQL statements through SQL Performance Analyzer. This can be done on the database running SPA Performance Analyzer or on a remote database.</p>
                     </li>
                     <li>
                        <p>Explain plan</p>
                        <p>This method generates execution plans only for SQL statements through SQL Performance Analyzer. This can be done on the database running SPA Performance Analyzer or on a remote database. Unlike the <code class="codeph">EXPLAIN PLAN</code> statement, SQL trials using the explain plan method take bind values into account and generate the actual execution plan.
                        </p>
                     </li>
                     <li>
                        <p>Convert SQL tuning set</p>
                        <p>This method converts the execution statistics and plans stored in a SQL tuning set. This is only supported for APIs.</p>
                     </li>
                  </ul>
                  <p>The test execute method runs each of the SQL statements contained in the workload to completion. During execution, SQL Performance Analyzer generates execution plans and computes execution statistics for each SQL statement in the workload. Each SQL statement in the SQL tuning set is executed separately from other SQL statements, without preserving their initial order of execution or concurrency. This is done at least twice for each SQL statement, for as many times as possible until the execution times out (up to a maximum of 10 times). The first execution is used to warm the buffer cache. All subsequent executions are then used to calculate the run-time execution statistics for the SQL statement based on their averages. The actual number of times that the SQL statement is executed depends on how long it takes to execute the SQL statement. Long-running SQL statement will only be executed a second time, and the execution statistics from this execution will be used. Other (faster-running) SQL statements are executed multiple times, and their execution statistics are averaged over these executions (statistics from the first execution are not used in the calculation). By averaging statistics over multiple executions, SQL Performance Analyzer can calculate more accurate execution statistics for each SQL statement. To avoid a potential impact to the database, DDLs are not supported. By default, only the query portion of DMLs is executed. Using APIs, you can execute the full DML by using the <code class="codeph">EXECUTE_FULLDML</code> task parameter. Parallel DMLs are not supported and the query portion is not executed unless the parallel hints are removed.
                  </p>
                  <p>Depending on its size, executing a SQL workload can be time and resource intensive. With the explain plan method, you can choose to generate execution plans only, without collecting execution statistics. This technique shortens the time to run the trial and lessens the effect on system resources, but a comprehensive performance analysis is not possible because only the execution plans will be available during the analysis. However, unlike generating a plan with the <code class="codeph">EXPLAIN PLAN</code> command, SQL Performance Analyzer provides bind values to the optimizer when generating execution plans, which provides a more reliable prediction of what the plan will be when the SQL statement is executed.
                  </p>
                  <p>In both cases, you can execute the SQL workload remotely on a separate database using a database link. SQL Performance Analyzer will establish a connection to the remote database using the database link, execute the SQL statements on that database, collect the execution plans and run-time statistics for each SQL statement, and store the results in a SQL trial on the local database that can be used for later analysis. This method is useful in cases where you want to:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Test a database upgrade</p>
                     </li>
                     <li>
                        <p>Execute the SQL workload on a system running another version of Oracle Database</p>
                     </li>
                     <li>
                        <p>Store the results from the SQL Performance Analyzer analysis on a separate test system</p>
                     </li>
                     <li>
                        <p>Perform testing on multiple systems with different hardware configurations</p>
                     </li>
                     <li>
                        <p>Use the newest features in SQL Performance Analyzer even if you are using an older version of Oracle Database on your production system</p>
                     </li>
                  </ul>
                  <p>Once the SQL workload is executed, the resulting execution plans and run-time statistics are stored in a <a id="d3574e739" class="indexterm-anchor"></a>SQL trial.
                  </p>
                  <p>You can also build a SQL trial using the execution statistics and plan stored in a SQL tuning set. While this method is only supported for APIs, it may be useful in cases where you have another method to run your workload (such as Database Replay or another application testing tool), and you do not need SQL Performance Analyzer to drive the workload on the test system. In such cases, if you capture a SQL tuning set during your test runs, you can build SQL trials from these SQL tuning sets using SQL Performance Analyzer to view a more comprehensive analysis report. Unlike a standard SQL Performance Analyzer report—which has only one execution plan in each trial and one set of execution statistics generated by executing the SQL statement with one set of binds—you can generate a report that compares SQL trials built from SQL tuning sets that show all execution plans from both trials with potentially many different sets of binds across multiple executions.</p>
                  <div class="infoboxnotealso" id="GUID-310A0AA6-38C9-49A1-97C1-9BED682E654A__GUID-3A24AF9C-D825-417A-98ED-D1AC483EAE9B">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="creating-a-pre-change-sql-trial.html#GUID-34F13B73-7FFA-4E5E-862E-2D38128ED582" title="After creating a SQL Performance Analyzer task and selecting a SQL tuning set as the input source, you need to establish the initial environment on the test system.">Creating a Pre-Change SQL Trial</a> for information about how to measure the pre-change performance
                           </p>
                        </li>
                        <li>
                           <p><a href="testing-a-database-upgrade.html#GUID-41A30909-3D5B-4A53-A757-B3497498D36B" title="SQL Performance Analyzer supports testing database upgrades from Oracle9i and later releases to Oracle Database 10g Release 2 or newer releases.">Testing a Database Upgrade</a> for information about executing a SQL workload on a remote system to test a database upgrade
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG171"></a><div class="props_rev_3"><a id="GUID-176E2C1A-5A09-4CDC-9974-1B47129DA08E" name="GUID-176E2C1A-5A09-4CDC-9974-1B47129DA08E"></a><h3 id="RATUG-GUID-176E2C1A-5A09-4CDC-9974-1B47129DA08E" class="sect3"><span class="enumeration_section">2.5 </span>Making a System Change
               </h3>
               <div><span>Make the change whose effect on SQL performance you intend to measure. SQL Performance Analyzer can analyze the effect of many types of system changes.</span> For example, you can test a database upgrade, new index creation, initialization parameter changes, or optimizer statistics refresh. If you are running SQL Performance Analyzer on the production system, then consider making a change using a private session to avoid affecting the rest of the system.
               </div>
            </div><a id="RATUG172"></a><div class="props_rev_3"><a id="GUID-7BE65E91-0C7B-4740-8114-4DAC76CDDB28" name="GUID-7BE65E91-0C7B-4740-8114-4DAC76CDDB28"></a><h3 id="RATUG-GUID-7BE65E91-0C7B-4740-8114-4DAC76CDDB28" class="sect3"><span class="enumeration_section">2.6 </span>Measuring the Post-Change SQL Performance
               </h3>
               <div>
                  <div><span>After performing the system change, create a post-change SQL trial.</span> It is highly recommended that you create the post-change SQL trial using the same method as the pre-change SQL trial. Once built, the post-change SQL trial represents a new set of performance data that can be used to compare to the pre-change version. The results are stored in a new, or post-change, SQL trial.
                  </div>
                  <div class="infoboxnotealso" id="GUID-7BE65E91-0C7B-4740-8114-4DAC76CDDB28__GUID-25CD8698-05C9-4985-BDA7-1B5957D42864">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="creating-a-post-change-sql-trial.html#GUID-CE3A1060-2BD8-4EA9-81F8-E101CD9AD9D5" title="After computing the pre-change SQL performance data, you can perform the system change on the test system.">Creating a Post-Change SQL Trial</a> for information about how to measure the post-change performance
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG173"></a><div class="props_rev_3"><a id="GUID-F07105CA-0DFA-4102-A8FE-1C11AD201528" name="GUID-F07105CA-0DFA-4102-A8FE-1C11AD201528"></a><h3 id="RATUG-GUID-F07105CA-0DFA-4102-A8FE-1C11AD201528" class="sect3"><span class="enumeration_section">2.7 </span>Comparing Performance Measurements
               </h3>
               <div>
                  <p>SQL Performance Analyzer compares the performance of SQL statements before and after the change and produces a report identifying any changes in execution plans or performance of the SQL statements.</p>
                  <p>SQL Performance Analyzer measures the impact of system changes both on the overall execution time of the SQL workload and on the response time of every individual SQL statement in the workload. By default, SQL Performance Analyzer uses elapsed time as a metric for comparison. Alternatively, you can choose the metric for comparison from a variety of available SQL run-time statistics, including:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>CPU time</p>
                     </li>
                     <li>
                        <p>User I/O time</p>
                     </li>
                     <li>
                        <p>Buffer gets</p>
                     </li>
                     <li>
                        <p>Physical I/O</p>
                     </li>
                     <li>
                        <p>Optimizer cost</p>
                     </li>
                     <li>
                        <p>I/O interconnect bytes</p>
                     </li>
                     <li>
                        <p>Any combination of these metrics in the form of an expression</p>
                     </li>
                  </ul>
                  <p>If you chose to generate explain plans only in the SQL trials, then SQL Performance Analyzer will use the optimizer cost stored in the SQL execution plans.</p>
                  <p>Once the comparison is complete, the resulting data is generated into a SQL Performance Analyzer <a id="d3574e1054" class="indexterm-anchor"></a>report that compares the pre-change and post-change SQL performance. The SQL Performance Analyzer report can be viewed as an HTML, text, or active report. Active reports provides in-depth reporting using an interactive user interface that enables you to perform detailed analysis even when disconnected from the database or Oracle Enterprise Manager.
                  </p>
                  <div class="infoboxnotealso" id="GUID-F07105CA-0DFA-4102-A8FE-1C11AD201528__GUID-86F1CEF9-6451-4EC1-936A-4EC17EC54751">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-848B84A7-CB08-4728-9E3A-CBDD70E89E63" title="After the post-change SQL performance data is built, you can compare the performance data collected in the pre-change SQL trial to the post-change SQL trial by running a comparison analysis using SQL Performance Analyzer.">Comparing SQL Trials</a> for information about comparing performance measurements and reporting
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG174"></a><div class="props_rev_3"><a id="GUID-9D5A985E-0BB0-43FA-955A-599B2E6A58AA" name="GUID-9D5A985E-0BB0-43FA-955A-599B2E6A58AA"></a><h3 id="RATUG-GUID-9D5A985E-0BB0-43FA-955A-599B2E6A58AA" class="sect3"><span class="enumeration_section">2.8 </span>Fixing Regressed SQL Statements
               </h3>
               <div>
                  <div><span>If the performance analysis performed by SQL Performance Analyzer reveals regressed SQL statements, then you can make changes to remedy the problem.</span> For example, you can fix regressed SQL by running SQL Tuning Advisor or using SQL plan baselines. You can then repeat the process of executing the SQL statements and comparing its performance to the first execution. Repeat these steps until you are satisfied with the outcome of the analysis.
                  </div>
                  <div class="infoboxnotealso" id="GUID-9D5A985E-0BB0-43FA-955A-599B2E6A58AA__GUID-C47077CD-86EA-47F0-99A0-B334C3F230F9">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-848B84A7-CB08-4728-9E3A-CBDD70E89E63" title="After the post-change SQL performance data is built, you can compare the performance data collected in the pre-change SQL trial to the post-change SQL trial by running a comparison analysis using SQL Performance Analyzer.">Comparing SQL Trials</a> for information about fixing regressed SQL statements
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Oracle Flashback Technology</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Development Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Development Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00">
      <meta name="dcterms.title" content="Database Development Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96334-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="advanced-part.html" title="Previous" type="text/html">
      <link rel="next" href="application-architecture.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="advanced-part.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="application-architecture.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Development Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-part.html" property="item" typeof="WebPage"><span property="name">Advanced Topics for Application Developers</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Oracle Flashback Technology</li>
            </ol>
            <a id="GUID-03D1CAAE-D940-444A-8771-B1BC636D105D" name="GUID-03D1CAAE-D940-444A-8771-B1BC636D105D"></a><a id="ADFNS1069"></a><a id="ADFNS1008"></a>
            
            <h2 id="ADFNS-GUID-03D1CAAE-D940-444A-8771-B1BC636D105D" class="sect2"><span class="enumeration_chapter">19 </span>Using Oracle Flashback Technology
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how to use Oracle Flashback Technology in database applications.</p>
               <div class="section">
                  <p class="subhead1" id="GUID-03D1CAAE-D940-444A-8771-B1BC636D105D__GUID-FCFE9B61-1D9A-4A0A-9483-D7F6945E940E">Topics:</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="flashback.html#GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876">Overview of Oracle Flashback Technology</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-779FB434-F3EA-4334-8B2A-A328555B5AFF">Configuring Your Database for Oracle Flashback Technology</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E">Using Oracle Flashback Query (SELECT AS OF)</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039">Using Oracle Flashback Version Query</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D">Using Oracle Flashback Transaction Query</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063">Using Oracle Flashback Transaction Query with Oracle Flashback Version Query</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691">Using DBMS_FLASHBACK Package</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-43425A2F-5932-4310-B387-C08D5331A74F">Using Flashback Transaction</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-06AA782A-3F79-4235-86D5-2D136485F093">Using Flashback Data Archive</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-0DAA9454-D91A-46AC-A8E0-510670672F19">General Guidelines for Oracle Flashback Technology</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA">Performance Guidelines for Oracle Flashback Technology</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-DECBC705-B421-4861-A341-E07EBB883AC9">Multitenant Container Database Restrictions for Oracle Flashback Technology</a></p>
                  </li>
               </ul>
            </div><a id="ADFNS1070"></a><a id="ADFNS01001"></a><div class="props_rev_3"><a id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876" name="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876"></a><h3 id="ADFNS-GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876" class="sect3">Overview of Oracle Flashback Technology</h3>
               <div>
                  <p>Oracle Flashback Technology is a group of Oracle Database features that let you view past states of database objects or to return database objects to a previous state without using point-in-time media recovery.</p>
                  <p>With flashback features, you can:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Perform queries that return past data</p>
                     </li>
                     <li>
                        <p>Perform queries that return metadata that shows a detailed history of changes to the database</p>
                     </li>
                     <li>
                        <p>Recover tables or rows to a previous point in time</p>
                     </li>
                     <li>
                        <p>Automatically track and archive transactional data changes</p>
                     </li>
                     <li>
                        <p>Roll back a transaction and its dependent transactions while the database remains online</p>
                     </li>
                  </ul>
                  <p>Oracle Flashback features use the Automatic Undo Management (AUM) system to obtain metadata and historical data for transactions. They rely on <strong class="term">undo data</strong>, which are records of the effects of individual transactions. For example, if a user runs an <code class="codeph">UPDATE</code> statement to change a salary from 1000 to 1100, then Oracle Database stores the value 1000 in the undo data.
                  </p>
                  <p>Undo data is persistent and survives a database shutdown. It is retained for the time specified by <code class="codeph">undo_retention</code>, or up to the tuned undo retention in the presence of Automatic Undo Management (AUM). By using flashback features, you can use undo data to query past data or recover from logical damage. Besides using it in flashback features, Oracle Database uses undo data to perform these actions:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Roll back active transactions</p>
                     </li>
                     <li>
                        <p>Recover terminated transactions by using database or process recovery</p>
                     </li>
                     <li>
                        <p>Provide read consistency for SQL queries</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876__GUID-D68E454A-8FAC-4CFB-B827-6C344C2D38C9">
                     <p class="notep1">Note:</p>
                     <p>After executing a <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement, wait at least 15 seconds to commit any transactions, to ensure that Oracle Flashback features (especially Oracle Flashback Version Query) reflect those transactions.
                     </p>
                  </div>
                  <div class="infoboxnote" id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876__GUID-FBD3ADC9-C9A4-4DCA-8C61-419C57426AD4">
                     <p class="notep1">Note:</p>
                     <p>Oracle Database recommends to avoid the usage of <code class="codeph">versions_starttime</code>, <code class="codeph">versions_endtime</code> or <code class="codeph">scn_to_timestamp</code> columns in 
                     </p>
                     <p><code class="codeph">VERSIONS</code> queries (including <code class="codeph">CTAS</code> queries) to improve the performance.
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876__GUID-085A8492-72A8-43AB-847F-43819862187A">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="flashback.html#GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55">Application Development Features</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E">Database Administration Features</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876__FORADDITIONALGENERALINFORMATIONABOU-CADB9C11">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1439" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about flashback features
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS599"></a><a id="ADFNS364"></a><a id="ADFNS604"></a><a id="ADFNS623"></a><a id="ADFNS624"></a><a id="ADFNS625"></a><a id="ADFNS598"></a><div class="props_rev_3"><a id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55" name="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55"></a><h4 id="ADFNS-GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55" class="sect4">Application Development Features</h4>
                  <div>
                     <p>In application development, you can use these flashback features to report historical data or undo erroneous changes. (You can also use these features interactively as a database user or administrator.)</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-CA81BED0-3487-4A9F-ABE5-8EE3947F1508">Oracle Flashback Query</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use this feature to retrieve data for an earlier time that you specify with the <code class="codeph">AS</code> <code class="codeph">OF</code> clause of the <code class="codeph">SELECT</code> statement. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__FORMOREINFORMATIONSEEUSINGORACLEFLA-CADBF787">
                           <p class="notep1">See Also:</p>
                           <p><a href="flashback.html#GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E">Using Oracle Flashback Query (SELECT AS OF)</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-9F42FBD8-3B4D-4468-94E2-C37882F3CB99">Oracle Flashback Version Query</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use this feature to retrieve metadata and historical data for a specific time interval (for example, to view all the rows of a table that ever existed during a given time interval). Metadata for each row version includes start and end time, type of change operation, and identity of the transaction that created the row version. To create an Oracle Flashback Version Query, use the <code class="codeph">VERSIONS</code> <code class="codeph">BETWEEN</code> clause of the <code class="codeph">SELECT</code> statement. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__FORMOREINFORMATIONSEEUSINGORACLEFLA-CADC0449">
                           <p class="notep1">See Also:</p>
                           <p><a href="flashback.html#GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039">Using Oracle Flashback Version Query</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-851E5C4F-8CCF-4B21-A34B-E2E968DB4724">Oracle Flashback Transaction Query</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use this feature to retrieve metadata and historical data for a given transaction or for all transactions in a given time interval. To perform an Oracle Flashback Transaction Query, select from the static data dictionary view <code class="codeph">FLASHBACK_TRANSACTION_QUERY</code>. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGORACLEFLASHBACKTRANSACTIONQUER-CADC0F8A">
                           <p class="notep1">See Also:</p>
                           <p><a href="flashback.html#GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D">Using Oracle Flashback Transaction Query</a>.
                           </p>
                        </div>
                        <p>Typically, you use Oracle Flashback Transaction Query with an Oracle Flashback Version Query that provides the transaction IDs for the rows of interest.</p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGORACLEFLASHBACKTRANSACTIONQUER-CADC1987">
                           <p class="notep1">See Also:</p>
                           <p><a href="flashback.html#GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063">Using Oracle Flashback Transaction Query with Oracle Flashback Version Query</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-69A9D99E-F677-4433-ACDD-36F7D625EC81">DBMS_FLASHBACK Package</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use this feature to set the internal Oracle Database clock to an earlier time so that you can examine data that was current at that time, or to roll back a transaction and its dependent transactions while the database remains online.</p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGDBMS_FLASHBACKPACKAGE-CADC2A94">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="flashback.html#GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__BJFIIEAA">Flashback Transaction</a></p>
                              </li>
                              <li>
                                 <p><a href="flashback.html#GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691">Using DBMS_FLASHBACK Package</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__BJFIIEAA">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-1F735DFA-C42D-4848-A9C0-1314FFB4A349">Flashback Transaction</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use Flashback Transaction to roll back a transaction and its dependent transactions while the database remains online. This recovery operation uses undo data to create and run the corresponding compensating transactions that return the affected data to its original state. (Flashback Transaction is part of <code class="codeph">DBMS_FLASHBACK</code> package). 
                        </p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGDBMS_FLASHBACKPACKAGE.-CADC4377">
                           <p class="notep1">See Also:</p>
                           <p><a href="flashback.html#GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691">Using DBMS_FLASHBACK Package</a>.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-9D48BD97-77F7-455E-8826-A17C155101D6">Flashback Data Archive</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use Flashback Data Archive to automatically track and archive historical versions of changes to tables enabled for flashback archive, ensuring SQL-level access to the versions of database objects without getting a snapshot-too-old error. </p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGFLASHBACKDATAARCHIVE.-CADC496E">
                           <p class="notep1">See Also:</p>
                           <p><a href="flashback.html#GUID-06AA782A-3F79-4235-86D5-2D136485F093">Using Flashback Data Archive</a>.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS606"></a><a id="ADFNS607"></a><a id="ADFNS608"></a><a id="ADFNS605"></a><div class="props_rev_3"><a id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E" name="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E"></a><h4 id="ADFNS-GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E" class="sect4">Database Administration Features</h4>
                  <div>
                     <p>These flashback features are primarily for data recovery. Typically, you use these features only as a database administrator.</p>
                     <p>This chapter focuses on the <a href="flashback.html#GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55">Application Development Features</a>. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E__ORACLEDATABASEADMINISTRATORSGUIDEOR-CADCC0D6">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN015" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=BRADV80055" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E__GUID-B42F260A-A693-4D82-957A-4972B6D1B71B">Oracle Flashback Table</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use this feature to restore a table to its state at a previous point in time. You can restore a table while the database is on line, undoing changes to only the specified table.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E__GUID-8857E1F7-DC17-4615-8BF0-4B30FD57907D">Oracle Flashback Drop</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use this feature to recover a dropped table. This feature reverses the effects of a <code class="codeph">DROP</code> <code class="codeph">TABLE</code> statement.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E__GUID-4CE51EEE-B818-4DE1-84FC-6834501DD702">Oracle Flashback Database</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use this feature to quickly return the database to an earlier point in time, by using the recovery area. This is fast, because you do not have to restore database backups.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS01002"></a><div class="props_rev_3"><a id="GUID-779FB434-F3EA-4334-8B2A-A328555B5AFF" name="GUID-779FB434-F3EA-4334-8B2A-A328555B5AFF"></a><h3 id="ADFNS-GUID-779FB434-F3EA-4334-8B2A-A328555B5AFF" class="sect3">Configuring Your Database for Oracle Flashback Technology</h3>
               <div>
                  <div class="section">
                     <p>Before you can use flashback features in your application, you or your database administrator must perform the configuration tasks described in these topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="flashback.html#GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3">Configuring Your Database for Automatic Undo Management</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-EBC8258B-03D9-4037-8B31-1A2EE4C73FCF">Configuring Your Database for Oracle Flashback Transaction Query</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000">Configuring Your Database for Flashback Transaction</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1">Enabling Oracle Flashback Operations on Specific LOB Columns</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C">Granting Necessary Privileges</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS609"></a><div class="props_rev_3"><a id="GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3" name="GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3"></a><h4 id="ADFNS-GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3" class="sect4">Configuring Your Database for Automatic Undo Management</h4>
                  <div>
                     <div class="section">
                        <p>To configure your database for Automatic Undo Management (AUM), you or your database administrator must:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Create an undo tablespace with enough space to keep the required data for flashback operations.</p>
                              <p>The more often users update the data, the more space is required. The database administrator usually calculates the space requirement.</p>
                           </li>
                           <li>
                              <p>Enable AUM, as explained in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN013" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a>. Set these database initialization parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">UNDO_MANAGEMENT</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">UNDO_TABLESPACE</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">UNDO_RETENTION</code></p>
                                 </li>
                              </ul>
                              <p>For a fixed-size undo tablespace, Oracle Database automatically tunes the system to give the undo tablespace the best possible undo retention.</p>
                              <p>For an automatically extensible undo tablespace, Oracle Database retains undo data longer than the longest query duration and the low threshold of undo retention specified by the <code class="codeph">UNDO_RETENTION</code> parameter.
                              </p>
                              <div class="infoboxnote" id="GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3__GUID-45DE2398-98F5-419C-8364-B37B7D35FA7C">
                                 <p class="notep1">Note:</p>
                                 <p>You can query <code class="codeph">V$UNDOSTAT</code>.<code class="codeph">TUNED_UNDORETENTION</code> to determine the amount of time for which undo is retained for the current undo tablespace.
                                 </p>
                              </div>
                              <p>Setting <code class="codeph">UNDO_RETENTION</code> does not guarantee that unexpired undo data is not discarded. If the system needs more space, Oracle Database can overwrite unexpired undo with more recently generated undo data.
                              </p>
                           </li>
                           <li>
                              <p>Specify the <code class="codeph">RETENTION</code> <code class="codeph">GUARANTEE</code> clause for the undo tablespace to ensure that unexpired undo data is not discarded.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3__GUID-B8514A50-E871-4484-A63B-427DCA491228">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN013" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about creating an undo tablespace and enabling AUM
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN30295" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about <code class="codeph">V$UNDOSTAT</code></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS610"></a><div class="props_rev_3"><a id="GUID-EBC8258B-03D9-4037-8B31-1A2EE4C73FCF" name="GUID-EBC8258B-03D9-4037-8B31-1A2EE4C73FCF"></a><h4 id="ADFNS-GUID-EBC8258B-03D9-4037-8B31-1A2EE4C73FCF" class="sect4">Configuring Your Database for Oracle Flashback Transaction Query</h4>
                  <div>
                     <div class="section">
                        <p>To configure your database for the Oracle Flashback Transaction Query feature, you or your database administrator must:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Ensure that Oracle Database is running with version 10.0 compatibility.</p>
                           </li>
                           <li>
                              <p>Enable supplemental logging:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS611"></a><div class="props_rev_3"><a id="GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000" name="GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000"></a><h4 id="ADFNS-GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000" class="sect4">Configuring Your Database for Flashback Transaction</h4>
                  <div>
                     <div class="section">
                        <p>To configure your database for the Flashback Transaction feature, you or your database administrator must:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>With the database mounted but not open, enable <code class="codeph">ARCHIVELOG</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ARCHIVELOG;
</pre></li>
                           <li>
                              <p>Open at least one archive log:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM ARCHIVE LOG CURRENT;
</pre></li>
                           <li>
                              <p>If not done, enable minimal and primary key supplemental logging:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;
ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (PRIMARY KEY) COLUMNS;
</pre></li>
                           <li>
                              <p>If you want to track foreign key dependencies, enable foreign key supplemental logging:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (FOREIGN KEY) COLUMNS;</pre></li>
                        </ul>
                        <div class="infoboxnote" id="GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000__GUID-C0F0D2F1-A657-4466-B6F4-B57FC8C2933A">
                           <p class="notep1">Note:</p>
                           <p>If you have very many foreign key constraints, enabling foreign key supplemental logging might not be worth the performance penalty.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS612"></a><div class="props_rev_3"><a id="GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1" name="GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1"></a><h4 id="ADFNS-GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1" class="sect4">Enabling Oracle Flashback Operations on Specific LOB Columns</h4>
                  <div>
                     <div class="section">
                        <p>To enable flashback operations on specific LOB columns of a table, use the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement with the <code class="codeph">RETENTION</code> option.
                        </p>
                        <p>Because undo data for LOB columns can be voluminous, you must define which LOB columns to use with flashback operations.</p>
                        <div class="infoboxnotealso" id="GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1__GUID-6ACA95C8-A69B-4CF1-8B34-C4FE392E3DFC">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADLOB101" target="_blank"><span class="italic">Oracle Database SecureFiles and Large Objects Developer's Guide</span></a> to learn about LOB storage and the <code class="codeph">RETENTION</code> parameter
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS614"></a><a id="ADFNS615"></a><a id="ADFNS616"></a><a id="ADFNS617"></a><a id="ADFNS613"></a><div class="props_rev_3"><a id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C" name="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C"></a><h4 id="ADFNS-GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C" class="sect4">Granting Necessary Privileges</h4>
                  <div>
                     <div class="section">
                        <p>You or your database administrator must grant privileges to users, roles, or applications that must use these flashback features. </p>
                        <div class="infoboxnotealso" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__FORINFORMATIONABOUTTHEGRANTSTATEMEN-CADD3A45">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">GRANT</code> statement
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__GUID-C4D6BF66-E34F-44EF-9D17-CFB68139801D">For Oracle Flashback Query and Oracle Flashback Version Query</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To allow access to specific objects during queries, grant <code class="codeph">FLASHBACK</code> and either <code class="codeph">READ</code> or <code class="codeph">SELECT</code> privileges on those objects.
                        </p>
                        <p>To allow queries on all tables, grant the <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> privilege.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__GUID-A54C42FA-15A0-4AA1-8D8E-CD6B2AA88507">For Oracle Flashback Transaction Query</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Grant the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TRANSACTION</code> privilege.
                        </p>
                        <p>To allow execution of undo SQL code retrieved by an Oracle Flashback Transaction Query, grant <code class="codeph">SELECT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and <code class="codeph">INSERT</code> privileges for specific tables.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__GUID-56BB5AAB-C32E-4C18-B6F4-00398387AAC1">For DBMS_FLASHBACK Package</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To allow access to the features in the <code class="codeph">DBMS_FLASHBACK</code> package, grant the <code class="codeph">EXECUTE</code> privilege on <code class="codeph">DBMS_FLASHBACK</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__GUID-C8B20D79-DC3F-48E3-AADD-FF36BBCC916C">For Flashback Data Archive</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To allow a specific user to enable Flashback Data Archive on tables, using a specific Flashback Data Archive, grant the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> object privilege on that Flashback Data Archive to that user. To grant the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> object privilege, you must either be logged on as <code class="codeph">SYSDBA</code> or have <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code> system privilege.
                        </p>
                        <p>To allow execution of these statements, grant the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code> system privilege:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DROP</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code></p>
                           </li>
                        </ul>
                        <p>To grant the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code> system privilege, you must be logged on as <code class="codeph">SYSDBA</code>.
                        </p>
                        <p>To create a default Flashback Data Archive, using either the <code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> or <code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement, you must be logged on as <code class="codeph">SYSDBA</code>.
                        </p>
                        <p>To disable Flashback Data Archive for a table that has been enabled for Flashback Data Archive, you must either be logged on as <code class="codeph">SYSDBA</code> or have the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code> system privilege.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS1071"></a><a id="ADFNS01003"></a><div class="props_rev_3"><a id="GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E" name="GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E"></a><h3 id="ADFNS-GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E" class="sect3">Using Oracle Flashback Query (SELECT AS OF)</h3>
               <div>
                  <div class="section">
                     <p>To use Oracle Flashback Query, use a <code class="codeph">SELECT</code> statement with an <code class="codeph">AS</code> <code class="codeph">OF</code> clause. Oracle Flashback Query retrieves data as it existed at an earlier time. The query explicitly references a past time through a time stamp or System Change Number (SCN). It returns committed data that was current at that point in time.
                     </p>
                     <p>Uses of Oracle Flashback Query include:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Recovering lost data or undoing incorrect, committed changes.</p>
                           <p>For example, if you mistakenly delete or update rows, and then commit them, you can immediately undo the mistake.</p>
                        </li>
                        <li>
                           <p>Comparing current data with the corresponding data at an earlier time.</p>
                           <p>For example, you can run a daily report that shows the change in data from yesterday. You can compare individual rows of table data or find intersections or unions of sets of rows.</p>
                        </li>
                        <li>
                           <p>Checking the state of transactional data at a particular time.</p>
                           <p>For example, you can verify the account balance of a certain day.</p>
                        </li>
                        <li>
                           <p>Selecting data that was valid at a particular time or at any time within a user-defined valid time period.</p>
                           <p>For example, you can find employees with valid employee information as of a particular timestamp or between a specified start and end time in the specified valid time period. (For more information, see <a href="design_basics.html#GUID-53F19441-81F3-4A4D-923C-464CAE0964D3">Temporal Validity Support</a>.)
                           </p>
                        </li>
                        <li>
                           <p>Simplifying application design by removing the need to store some kinds of temporal data.</p>
                           <p>Oracle Flashback Query lets you retrieve past data directly from the database.</p>
                        </li>
                        <li>
                           <p>Applying packaged applications, such as report generation tools, to past data.</p>
                        </li>
                        <li>
                           <p>Providing self-service error correction for an application, thereby enabling users to undo and correct their errors.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E__GUID-EF0D44C4-4969-4AB5-8230-A1540466408A">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="flashback.html#GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8">Example: Examining and Restoring Past Data</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE">Guidelines for Oracle Flashback Query</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E__FORMOREINFORMATIONABOUTTHESELECTASO-CADD8969">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01702" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">SELECT</code> <code class="codeph">AS</code> <code class="codeph">OF</code> statement 
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS619"></a><a id="ADFNS620"></a><a id="ADFNS618"></a><div class="props_rev_3"><a id="GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8" name="GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8"></a><h4 id="ADFNS-GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8" class="sect4">Example: Examining and Restoring Past Data</h4>
                  <div>
                     <p>Suppose that you discover at 12:30 PM that the row for employee Chung was deleted from the <code class="codeph">employees</code> table, and you know that at 9:30AM the data for Chung was correctly stored in the database. You can use Oracle Flashback Query to examine the contents of the table at 9:30 AM to find out what data was lost. If appropriate, you can restore the lost data.
                     </p>
                     <p><a href="flashback.html#GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8__BABHIHFF">Example 19-1</a> retrieves the state of the record for <code class="codeph">Chung</code> at 9:30AM, April 4, 2004:
                     </p>
                     <div class="example" id="GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8__BABHIHFF">
                        <p class="titleinexample">Example 19-1 Retrieving a Lost Row with Oracle Flashback Query</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees
AS OF TIMESTAMP
TO_TIMESTAMP('2004-04-04 09:30:00', 'YYYY-MM-DD HH:MI:SS')
WHERE last_name = 'Chung';
</pre><p><a href="flashback.html#GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8__BABJJCFE">Example 19-2</a> restores Chung's information to the <code class="codeph">employees</code> table:
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8__BABJJCFE">
                        <p class="titleinexample">Example 19-2 Restoring a Lost Row After Oracle Flashback Query</p><pre class="oac_no_warn" dir="ltr">INSERT INTO employees (
  SELECT * FROM employees
  AS OF TIMESTAMP
  TO_TIMESTAMP('2004-04-04 09:30:00', 'YYYY-MM-DD HH:MI:SS')
  WHERE last_name = 'Chung'
);</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS621"></a><div class="props_rev_3"><a id="GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE" name="GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE"></a><h4 id="ADFNS-GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE" class="sect4">Guidelines for Oracle Flashback Query</h4>
                  <div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can specify or omit the <code class="codeph">AS</code> <code class="codeph">OF</code> clause for each table and specify different times for different tables.
                           </p>
                           <div class="infoboxnote" id="GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE__GUID-E43E43D9-13F9-4F95-8E60-EB2D935660E6">
                              <p class="notep1">Note:</p>
                              <p>If a table is a Flashback Data Archive and you specify a time for it that is earlier than its creation time, the query returns zero rows for that table, rather than causing an error.</p>
                           </div>
                        </li>
                        <li>
                           <p>You can use the <code class="codeph">AS</code> <code class="codeph">OF</code> clause in queries to perform data definition language (DDL) operations (such as creating and truncating tables) or data manipulation language (DML) statements (such as <code class="codeph">INSERT</code> and <code class="codeph">DELETE</code>) in the same session as Oracle Flashback Query.
                           </p>
                        </li>
                        <li>
                           <p>To use the result of Oracle Flashback Query in a DDL or DML statement that affects the current state of the database, use an <code class="codeph">AS</code> <code class="codeph">OF</code> clause inside an <code class="codeph">INSERT</code> or <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> statement.
                           </p>
                        </li>
                        <li>
                           <p>If a possible 3-second error (maximum) is important to Oracle Flashback Query in your application, use an SCN instead of a time stamp. See <a href="flashback.html#GUID-0DAA9454-D91A-46AC-A8E0-510670672F19">General Guidelines for Oracle Flashback Technology</a>.
                           </p>
                        </li>
                        <li>
                           <p>You can create a view that refers to past data by using the <code class="codeph">AS</code> <code class="codeph">OF</code> clause in the <code class="codeph">SELECT</code> statement that defines the view.
                           </p>
                           <p>If you specify a relative time by subtracting from the current time on the database host, the past time is recalculated for each query. For example:</p><pre class="oac_no_warn" dir="ltr">CREATE VIEW hour_ago AS
  SELECT * FROM employees
    AS OF TIMESTAMP (SYSTIMESTAMP - INTERVAL '60' MINUTE);
</pre><p><code class="codeph">SYSTIMESTAMP</code> refers to the time zone of the database host environment.
                           </p>
                        </li>
                        <li>
                           <p>You can use the <code class="codeph">AS</code> <code class="codeph">OF</code> clause in self-joins, or in set operations such as <code class="codeph">INTERSECT</code> and <code class="codeph">MINUS</code>, to extract or compare data from two different times.
                           </p>
                           <p>You can store the results by preceding Oracle Flashback Query with a <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> or <code class="codeph">INSERT</code> <code class="codeph">INTO</code> <code class="codeph">TABLE</code> <code class="codeph">SELECT</code> statement. For example, this query reinserts into table <code class="codeph">employees</code> the rows that existed an hour ago:
                           </p><pre class="oac_no_warn" dir="ltr">INSERT INTO employees
    (SELECT * FROM employees
     AS OF TIMESTAMP (SYSTIMESTAMP - INTERVAL '60' MINUTE)
    MINUS SELECT * FROM employees;
</pre><p><code class="codeph">SYSTIMESTAMP</code> refers to the time zone of the database host environment.
                           </p>
                        </li>
                        <li>
                           <p>You can use the <code class="codeph">AS</code> <code class="codeph">OF</code> clause in queries to check for data that was valid at a particular time.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE__GUID-6989D7BA-FF19-4781-86BB-5CD26A6B975F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="design_basics.html#GUID-53F19441-81F3-4A4D-923C-464CAE0964D3">Temporal Validity Support</a></p>
                           </li>
                           <li>
                              <p><a href="flashback.html#GUID-06AA782A-3F79-4235-86D5-2D136485F093">Using Flashback Data Archive</a> for information about Flashback Data Archives
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS622"></a><a id="ADFNS01004"></a><div class="props_rev_3"><a id="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039" name="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039"></a><h3 id="ADFNS-GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039" class="sect3">Using Oracle Flashback Version Query</h3>
               <div>
                  <div class="section">
                     <p>Use Oracle Flashback Version Query to retrieve the different versions of specific rows that existed during a given time interval. A row version is created whenever a <code class="codeph">COMMIT</code> statement is executed.
                     </p>
                     <div class="infoboxnote" id="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039__GUID-5F6D784C-46C6-4B26-8D9B-D7862B2E072D">
                        <p class="notep1">Note:</p>
                        <p>After executing a <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement, wait at least 15 seconds to commit any transactions, to ensure that Oracle Flashback Version Query reflects those transactions.
                        </p>
                     </div>
                     <p>Specify Oracle Flashback Version Query using the <code class="codeph">VERSIONS</code> <code class="codeph">BETWEEN</code> clause of the <code class="codeph">SELECT</code> statement. The syntax is either:
                     </p><pre class="oac_no_warn" dir="ltr">VERSIONS BETWEEN { SCN | TIMESTAMP } <span class="italic"><code class="codeph">start</code></span> AND <span class="italic"><code class="codeph">end</code></span>
</pre><p>where <span class="italic"><code class="codeph">start</code></span> and <span class="italic"><code class="codeph">end</code></span> are expressions representing the start and end, respectively, of the time interval to be queried. The time interval includes (<span class="italic"><code class="codeph">start</code></span> and <span class="italic"><code class="codeph">end</code></span>). 
                     </p>
                     <p>or:</p><pre class="oac_no_warn" dir="ltr">VERSIONS PERIOD FOR <span class="italic">user_valid_time</span> [ BETWEEN TIMESTAMP <span class="italic"><code class="codeph">start</code></span> AND <span class="italic"><code class="codeph">end</code></span> ]
</pre><p>where <span class="italic"><code class="codeph">user_valid_time</code></span> refers to the user-specified valid time period, as explained in <a href="design_basics.html#GUID-53F19441-81F3-4A4D-923C-464CAE0964D3">Temporal Validity Support</a>.
                     </p>
                     <p>Oracle Flashback Version Query returns a table with a row for each version of the row that existed at any time during the specified time interval. Each row in the table includes pseudocolumns of metadata about the row version, which can reveal when and how a particular change (perhaps erroneous) occurred to your database.</p>
                     <p><a href="flashback.html#GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039__G1020732" title="This table summarizes the pseudocolumns of Flashback Version Query rows.">Table 19-1</a> describes the pseudocolumns of metadata about the row version. The <code class="codeph">VERSIONS_*</code> pseudocolumns have values only for transaction-time Flashback Version Queries (that is, queries with the clause <code class="codeph">BETWEEN</code> <code class="codeph">TIMESTAMP</code> <span class="italic"><code class="codeph">start</code></span> <code class="codeph">AND</code> <span class="italic"><code class="codeph">end</code></span>).
                     </p>
                     <div class="tblformal" id="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039__G1020732">
                        <p class="titleintable">Table 19-1  Oracle Flashback Version Query Row Data Pseudocolumns</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title=" Oracle Flashback Version Query Row Data Pseudocolumns" summary="This table summarizes the pseudocolumns of Flashback Version Query rows." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d111972e2489">Pseudocolumn Name </th>
                                 <th align="left" valign="bottom" width="79%" id="d111972e2492">Description </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d111972e2497" headers="d111972e2489 ">
                                    <p><code class="codeph">VERSIONS_STARTSCN</code></p>
                                    <p><code class="codeph">VERSIONS_STARTTIME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="79%" headers="d111972e2497 d111972e2492 ">
                                    <p>Starting System Change Number (SCN) or <code class="codeph">TIMESTAMP</code> when the row version was created. This pseudocolumn identifies the time when the data first had the values reflected in the row version. Use this pseudocolumn to identify the past target time for Oracle Flashback Table or Oracle Flashback Query.
                                    </p>
                                    <p>If this pseudocolumn is <code class="codeph">NULL</code>, then the row version was created before <span class="italic"><code class="codeph">start</code></span>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d111972e2520" headers="d111972e2489 ">
                                    <p><code class="codeph">VERSIONS_ENDSCN</code></p>
                                    <p><code class="codeph">VERSIONS_ENDTIME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="79%" headers="d111972e2520 d111972e2492 ">
                                    <p>SCN or <code class="codeph">TIMESTAMP</code> when the row version expired.
                                    </p>
                                    <p>If this pseudocolumn is <code class="codeph">NULL</code>, then either the row version was current at the time of the query or the row corresponds to a <code class="codeph">DELETE</code> operation.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d111972e2542" headers="d111972e2489 ">
                                    <p><code class="codeph">VERSIONS_XID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="79%" headers="d111972e2542 d111972e2492 ">
                                    <p>Identifier of the transaction that created the row version.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d111972e2550" headers="d111972e2489 ">
                                    <p><code class="codeph">VERSIONS_OPERATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="79%" headers="d111972e2550 d111972e2492 ">
                                    <p>Operation performed by the transaction: <code class="codeph">I</code> for insertion, <code class="codeph">D</code> for deletion, or <code class="codeph">U</code> for update. The version is that of the row that was inserted, deleted, or updated; that is, the row after an <code class="codeph">INSERT </code>operation, the row before a <code class="codeph">DELETE</code> operation, or the row affected by an <code class="codeph">UPDATE</code> operation.
                                    </p>
                                    <p>For user updates of an index key, Oracle Flashback Version Query might treat an <code class="codeph">UPDATE</code> operation as two operations, <code class="codeph">DELETE</code> plus <code class="codeph">INSERT</code>, represented as two version rows with a <code class="codeph">D</code> followed by an <code class="codeph">I</code> <code class="codeph">VERSIONS_OPERATION</code>.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>A given row version is valid starting at its time <code class="codeph">VERSIONS_START*</code> up to, but not including, its time <code class="codeph">VERSIONS_END*</code>. That is, it is valid for any time <span class="italic">t</span> such that <code class="codeph">VERSIONS_START*</code> <span class="bold">&lt;=</span> <span class="italic">t</span> <span class="bold">&lt;</span> <code class="codeph">VERSIONS_END*</code>. For example, this output indicates that the salary was 10243 from September 9, 2002, included, to November 25, 2003, excluded.
                     </p><pre class="oac_no_warn" dir="ltr">VERSIONS_START_TIME     VERSIONS_END_TIME     SALARY
-------------------     -----------------     ------
09-SEP-2003             25-NOV-2003           10243
</pre><p>Here is a typical use of Oracle Flashback Version Query:</p><pre class="oac_no_warn" dir="ltr">SELECT versions_startscn, versions_starttime,
       versions_endscn, versions_endtime,
       versions_xid, versions_operation,
       last_name, salary
  FROM employees
  VERSIONS BETWEEN TIMESTAMP
      TO_TIMESTAMP('2008-12-18 14:00:00', 'YYYY-MM-DD HH24:MI:SS')
  AND TO_TIMESTAMP('2008-12-18 17:00:00', 'YYYY-MM-DD HH24:MI:SS')
  WHERE first_name = 'John';
</pre><p>You can use <code class="codeph">VERSIONS_XID</code> with Oracle Flashback Transaction Query to locate this transaction's metadata, including the SQL required to undo the row change and the user responsible for the change.
                     </p>
                     <p>Flashback Version Query allows index-only access only with IOTs (index-organized tables), but index fast full scan is not allowed.</p>
                     <div class="infoboxnotealso" id="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039__GUID-EFC77F2C-E339-4E16-B1ED-5A9B437C0FEE">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01702" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a>for information about Oracle Flashback Version Query pseudocolumns and the syntax of the <code class="codeph">VERSIONS</code> clause
                              </p>
                           </li>
                           <li>
                              <p><a href="flashback.html#GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D">Using Oracle Flashback Transaction Query</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS01005"></a><div class="props_rev_3"><a id="GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D" name="GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D"></a><h3 id="ADFNS-GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D" class="sect3">Using Oracle Flashback Transaction Query</h3>
               <div>
                  <div class="section">
                     <p>Use Oracle Flashback Transaction Query to retrieve metadata and historical data for a given transaction or for all transactions in a given time interval. Oracle Flashback Transaction Query queries the static data dictionary view <code class="codeph">FLASHBACK_TRANSACTION_QUERY</code>, whose columns are described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN29086" target="_blank"><span class="italic">Oracle Database Reference</span></a>.
                     </p>
                     <p>The column <code class="codeph">UNDO_SQL</code> shows the SQL code that is the logical opposite of the DML operation performed by the transaction. You can usually use this code to reverse the logical steps taken during the transaction. However, there are cases where the <code class="codeph">UNDO_SQL</code> code is not the exact opposite of the original transaction. For example, a <code class="codeph">UNDO_SQL</code> <code class="codeph">INSERT</code> operation might not insert a row back in a table at the same <code class="codeph">ROWID</code> from which it was deleted.
                     </p>
                     <p>This statement queries the <code class="codeph">FLASHBACK_TRANSACTION_QUERY</code> view for transaction information, including the transaction ID, the operation, the operation start and end SCNs, the user responsible for the operation, and the SQL code that shows the logical opposite of the operation:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT xid, operation, start_scn, commit_scn, logon_user, undo_sql
FROM flashback_transaction_query
WHERE xid = HEXTORAW('000200030000002D');
</pre><p>This statement uses Oracle Flashback Version Query as a subquery to associate each row version with the <code class="codeph">LOGON_USER</code> responsible for the row data change:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT xid, logon_user
FROM flashback_transaction_query
WHERE xid IN (
  SELECT versions_xid FROM employees VERSIONS BETWEEN TIMESTAMP
  TO_TIMESTAMP('2003-07-18 14:00:00', 'YYYY-MM-DD HH24:MI:SS') AND
  TO_TIMESTAMP('2003-07-18 17:00:00', 'YYYY-MM-DD HH24:MI:SS')
);</pre><div class="infoboxnote" id="GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D__GUID-70943774-9713-4087-9B22-53D0508CC0A8">
                        <p class="notep1">Note:</p>
                        <p>If you query <code class="codeph">FLASHBACK_TRANSACTION_QUERY</code> without specifying <code class="codeph">XID</code> in the <code class="codeph">WHERE</code> clause, the query scans many unrelated rows, degrading performance.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D__GUID-A4F63316-8FD0-4C60-ACB2-2DB6F07D8B10">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=BRADV81517" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide.</span></a> for information about how a database administrator can use Flashback Table to restore an entire table, rather than individual rows
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN01512" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about how a database administrator can use Flashback Table to restore an entire table, rather than individual rows
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS1006"></a><div class="props_rev_3"><a id="GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063" name="GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063"></a><h3 id="ADFNS-GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063" class="sect3">Using Oracle Flashback Transaction Query with Oracle Flashback Version Query</h3>
               <div>
                  <div class="section">
                     <p>In this example, a database administrator does this:</p><pre class="oac_no_warn" dir="ltr">DROP TABLE emp;
CREATE TABLE emp (
  empno   NUMBER PRIMARY KEY,
  empname VARCHAR2(16),
  salary  NUMBER
);
INSERT INTO emp (empno, empname, salary) VALUES (111, 'Mike', 555);
COMMIT;

DROP TABLE dept;
CREATE TABLE dept (
  deptno   NUMBER,
  deptname VARCHAR2(32)
);
INSERT INTO dept (deptno, deptname) VALUES (10, 'Accounting');
COMMIT;
</pre><p>Now <code class="codeph">emp</code> and <code class="codeph">dept</code> have one row each. In terms of row versions, each table has one version of one row. Suppose that an erroneous transaction deletes <code class="codeph">empno</code> <code class="codeph">111</code> from table <code class="codeph">emp</code>:
                     </p><pre class="oac_no_warn" dir="ltr">UPDATE emp SET salary = salary + 100 WHERE empno = 111;
INSERT INTO dept (deptno, deptname) VALUES (20, 'Finance');
DELETE FROM emp WHERE empno = 111;
COMMIT;
</pre><p>Next, a transaction reinserts <code class="codeph">empno</code> <code class="codeph">111</code> into the <code class="codeph">emp</code> table with a new employee name:
                     </p><pre class="oac_no_warn" dir="ltr">INSERT INTO emp (empno, empname, salary) VALUES (111, 'Tom', 777);
UPDATE emp SET salary = salary + 100 WHERE empno = 111;
UPDATE emp SET salary = salary + 50 WHERE empno = 111;
COMMIT;
</pre><p>The database administrator detects the application error and must diagnose the problem. The database administrator issues this query to retrieve versions of the rows in the <code class="codeph">emp</code> table that correspond to empno <code class="codeph">111</code>. The query uses Oracle Flashback Version Query pseudocolumns:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT versions_xid XID, versions_startscn START_SCN,
  versions_endscn END_SCN, versions_operation OPERATION,
  empname, salary
FROM emp
VERSIONS BETWEEN SCN MINVALUE AND MAXVALUE
WHERE empno = 111;
</pre><p>Results are similar to:</p><pre class="oac_no_warn" dir="ltr">XID               START_SCN    END_SCN O EMPNAME              SALARY
---------------- ---------- ---------- - ---------------- ----------
09001100B2200000   10093466            I Tom                     927
030002002B210000   10093459            D Mike                    555
0800120096200000   10093375   10093459 I Mike                    555
 
3 rows selected.
</pre><p>The results table rows are in descending chronological order. The third row corresponds to the version of the row in the table <code class="codeph">emp</code> that was inserted in the table when the table was created. The second row corresponds to the row in <code class="codeph">emp</code> that the erroneous transaction deleted. The first row corresponds to the version of the row in <code class="codeph">emp</code> that was reinserted with a new employee name.
                     </p>
                     <p>The database administrator identifies transaction <code class="codeph">030002002B210000</code> as the erroneous transaction and uses Oracle Flashback Transaction Query to audit all changes made by this transaction:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT  xid, start_scn, commit_scn, operation, logon_user, undo_sql
FROM flashback_transaction_query
WHERE xid = HEXTORAW('<span class="bold">000200030000002D</span>');
</pre><p>Results are similar to:</p><pre class="oac_no_warn" dir="ltr">XID               START_SCN COMMIT_SCN OPERATION LOGON_USER
---------------- ---------- ---------- --------- ------------------------------
UNDO_SQL
--------------------------------------------------------------------------------
 
030002002B210000   10093452   10093459 DELETE    HR
insert into "HR"."EMP"("EMPNO","EMPNAME","SALARY") values ('111','Mike','655');
 
030002002B210000   10093452   10093459 INSERT    HR
delete from "HR"."DEPT" where ROWID = 'AAATjuAAEAAAAJrAAB';
 
030002002B210000   10093452   10093459 UPDATE    HR
update "HR"."EMP" set "SALARY" = '555' where ROWID = 'AAATjsAAEAAAAJ7AAA';
 
030002002B210000   10093452   10093459 BEGIN     HR
 
 
4 rows selected.
</pre><p>To make the result of the next query easier to read, the database administrator uses these SQL*Plus commands:</p><pre class="oac_no_warn" dir="ltr">COLUMN operation FORMAT A9
COLUMN table_name FORMAT A10
COLUMN table_owner FORMAT A11
</pre><p>To see the details of the erroneous transaction and all subsequent transactions, the database administrator performs this query:</p><pre class="oac_no_warn" dir="ltr">SELECT xid, start_scn, commit_scn, operation, table_name, table_owner
FROM flashback_transaction_query
WHERE table_owner = 'HR'
AND start_timestamp &gt;=
  TO_TIMESTAMP ('2002-04-16 11:00:00','YYYY-MM-DD HH:MI:SS');
</pre><p>Results are similar to:</p><pre class="oac_no_warn" dir="ltr">XID               START_SCN COMMIT_SCN OPERATION TABLE_NAME TABLE_OWNER
---------------- ---------- ---------- --------- ---------- -----------
02000E0074200000   10093435   10093446 INSERT    DEPT       HR
030002002B210000   10093452   10093459 DELETE    EMP        HR
030002002B210000   10093452   10093459 INSERT    DEPT       HR
030002002B210000   10093452   10093459 UPDATE    EMP        HR
0800120096200000   10093374   10093375 INSERT    EMP        HR
09001100B2200000   10093462   10093466 UPDATE    EMP        HR
09001100B2200000   10093462   10093466 UPDATE    EMP        HR
09001100B2200000   10093462   10093466 INSERT    EMP        HR
 
8 rows selected.
</pre><div class="infoboxnote" id="GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063__GUID-A85FE82C-1F7E-4349-AACE-6A9A377A9F41">
                        <p class="notep1">Note:</p>
                        <p>Because the preceding query does not specify the <code class="codeph">XID</code> in the <code class="codeph">WHERE</code> clause, it scans many unrelated rows, degrading performance.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS01009"></a><div class="props_rev_3"><a id="GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691" name="GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691"></a><h3 id="ADFNS-GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691" class="sect3">Using DBMS_FLASHBACK Package</h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">DBMS_FLASHBACK</code> package provides the same functionality as Oracle Flashback Query, but Oracle Flashback Query is sometimes more convenient.
                     </p>
                     <p>The <code class="codeph">DBMS_FLASHBACK</code> package acts as a time machine: you can turn back the clock, perform normal queries as if you were at that earlier time, and then return to the present. Because you can use the <code class="codeph">DBMS_FLASHBACK</code> package to perform queries on past data without special clauses such as <code class="codeph">AS</code> <code class="codeph">OF</code> or <code class="codeph">VERSIONS</code> <code class="codeph">BETWEEN</code>, you can reuse existing PL/SQL code to query the database at earlier times.
                     </p>
                     <p>You must have the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_FLASHBACK</code> package.
                     </p>
                     <p>To use the <code class="codeph">DBMS_FLASHBACK</code> package in your PL/SQL code:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Specify a past time by invoking either <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">ENABLE_AT_TIME</code> or <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">ENABLE_AT_SYSTEM_CHANGE_NUMBER</code>.</span></li>
                     <li class="stepexpand"><span>Perform regular queries (that is, queries without special flashback-feature syntax such as <code class="codeph">AS</code> <code class="codeph">OF</code>). Do not perform DDL or DML operations.</span><div>
                           <p>The database is queried at the specified past time.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Return to the present by invoking <code class="codeph">DBMS_FLASHBACK.DISABLE</code>.</span><div>
                           <p>You must invoke <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">DISABLE</code> before invoking <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">ENABLE_AT_TIME</code> or <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">ENABLE_AT_SYSTEM_CHANGE_NUMBER</code> again. You cannot nest enable/disable pairs.
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>To use a cursor to store the results of queries, open the cursor before invoking <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">DISABLE</code>. After storing the results and invoking <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">DISABLE</code>, you can:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Perform <code class="codeph">INSERT</code> or <code class="codeph">UPDATE</code> operations to modify the current database state by using the stored results from the past.
                           </p>
                        </li>
                        <li>
                           <p>Compare current data with the past data. After invoking <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">DISABLE</code>, open a second cursor. Fetch from the first cursor to retrieve past data; fetch from the second cursor to retrieve current data. You can store the past data in a temporary table and then use set operators such as <code class="codeph">MINUS</code> or <code class="codeph">UNION</code> to contrast or combine the past and current data.
                           </p>
                        </li>
                     </ul>
                     <p>You can invoke <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">GET_SYSTEM_CHANGE_NUMBER</code> at any time to get the current System Change Number (SCN). <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">GET_SYSTEM_CHANGE_NUMBER</code> returns the current SCN regardless of previous invocations of <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">ENABLE</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691__GUID-EDCCFEAF-536C-4139-B996-1BBDBB891FE4">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS142" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for details of the <code class="codeph">DBMS_FLASHBACK</code> package
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS1073"></a><a id="ADFNS1010"></a><div class="props_rev_3"><a id="GUID-43425A2F-5932-4310-B387-C08D5331A74F" name="GUID-43425A2F-5932-4310-B387-C08D5331A74F"></a><h3 id="ADFNS-GUID-43425A2F-5932-4310-B387-C08D5331A74F" class="sect3">Using Flashback Transaction</h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">TRANSACTION_BACKOUT</code> procedure rolls back a transaction and its dependent transactions while the database remains online. This recovery operation uses undo data to create and run the <span class="bold">compensating transactions</span> that return the affected data to its original state.
                     </p>
                     <p>The transactions being rolled back are subject to these restrictions:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>They cannot have performed DDL operations that changed the logical structure of database tables.</p>
                        </li>
                        <li>
                           <p>They cannot use Large Object (LOB) Data Types:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">BFILE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">BLOB</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">CLOB</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">NCLOB</code></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>They cannot use features that LogMiner does not support.</p>
                           <p>The features that LogMiner supports depends on the value of the <code class="codeph">COMPATIBLE</code> initialization parameter for the database that is rolling back the transaction. The default value is the release number of the most recent major release.
                           </p>
                           <p>Flashback Transaction inherits SQL data type support from LogMiner. Therefore, if LogMiner fails due to an unsupported SQL data type in a the transaction, Flashback Transaction fails too.</p>
                           <p>Some data types, though supported by LogMiner, do not generate undo information as part of operations that modify columns of such types. Therefore, Flashback Transaction does not support tables containing these data types. These include tables with BLOB, CLOB and XML type.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-43425A2F-5932-4310-B387-C08D5331A74F__GUID-A08AFCA6-0CAF-49E3-A9B6-946A8C5780D3">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SBYDB00305" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for information about data type and DDL support on a logical standby database
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF50994" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about LOB data types
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SUTIL019" target="_blank"><span class="italic">Oracle Database Utilities</span></a> for information about LogMiner
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11112" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about the <code class="codeph">COMPATIBLE</code> initialization parameter
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-43425A2F-5932-4310-B387-C08D5331A74F__GUID-16F4E208-C19E-475E-998B-65D41E225B80">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="flashback.html#GUID-94AF779C-E12E-4953-B25A-5370EFE3A279">Dependent Transactions</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648">TRANSACTION_BACKOUT Parameters</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-B1449BF8-678C-4AB5-96EB-884AE428BD46">TRANSACTION_BACKOUT Reports</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS1074"></a><div class="props_rev_3"><a id="GUID-94AF779C-E12E-4953-B25A-5370EFE3A279" name="GUID-94AF779C-E12E-4953-B25A-5370EFE3A279"></a><h4 id="ADFNS-GUID-94AF779C-E12E-4953-B25A-5370EFE3A279" class="sect4">Dependent Transactions</h4>
                  <div>
                     <p>In the context of Flashback Transaction, transaction 2 can depend on transaction 1 in any of these ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Write-after-write dependency</span></p>
                           <p>Transaction 1 changes a row of a table, and later transaction 2 changes the same row.</p>
                        </li>
                        <li>
                           <p><span class="bold">Primary key dependency</span></p>
                           <p>A table has a primary key constraint on column c. In a row of the table, column c has the value v. Transaction 1 deletes that row, and later transaction 2 inserts a row into the same table, assigning the value v to column c.</p>
                        </li>
                        <li>
                           <p><span class="bold">Foreign key dependency</span></p>
                           <p>In table b, column b1 has a foreign key constraint on column a1 of table a. Transaction 1 changes a value in a1, and later transaction 2 changes a value in b1.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS627"></a><a id="ADFNS626"></a><div class="props_rev_3"><a id="GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648" name="GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648"></a><h4 id="ADFNS-GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648" class="sect4">TRANSACTION_BACKOUT Parameters</h4>
                  <div>
                     <div class="section">
                        <p>The parameters of the <code class="codeph">TRANSACTION_BACKOUT</code> procedure are:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Number of transactions to be backed out</p>
                           </li>
                           <li>
                              <p>List of transactions to be backed out, identified either by name or by XID</p>
                           </li>
                           <li>
                              <p>Time hint, if you identify transactions by name</p>
                              <p>Specify a time that is earlier than any transaction started.</p>
                           </li>
                           <li>
                              <p>Backout option from <a href="flashback.html#GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648__G4913725" title="This table summarizes the Flashback TRANSACTION_BACKOUT options.">Table 19-2</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648__G4913725">
                        <p class="titleintable">Table 19-2 Flashback TRANSACTION_BACKOUT Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Flashback TRANSACTION_BACKOUT Options" summary="This table summarizes the Flashback TRANSACTION_BACKOUT options." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d111972e3761">Option</th>
                                 <th align="left" valign="bottom" width="74%" id="d111972e3764">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d111972e3769" headers="d111972e3761 ">
                                    <p><code class="codeph">CASCADE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d111972e3769 d111972e3764 ">
                                    <p>Backs out specified transactions and all dependent transactions in a post-order fashion (that is, children are backed out before parents are backed out).</p>
                                    <p>Without <code class="codeph">CASCADE</code>, if any dependent transaction is not specified, an error occurs.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d111972e3782" headers="d111972e3761 ">
                                    <p><code class="codeph">NOCASCADE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d111972e3782 d111972e3764 ">
                                    <p>Default. Backs out specified transactions, which are expected to have no dependent transactions. First dependent transactions causes an error and appears in <code class="codeph">*_FLASHBACK_TXN_REPORT</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d111972e3793" headers="d111972e3761 ">
                                    <p><code class="codeph">NOCASCADE_FORCE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d111972e3793 d111972e3764 ">
                                    <p>Backs out specified transactions, ignoring dependent transactions. Server runs undo SQL statements for specified transactions in reverse order of commit times.</p>
                                    <p>If no constraints break and you are satisfied with the result, you can commit the changes; otherwise, you can roll them back.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d111972e3803" headers="d111972e3761 ">
                                    <p><code class="codeph">NONCONFLICT_ONLY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d111972e3803 d111972e3764 ">
                                    <p>Backs out changes to nonconflicting rows of the specified transactions. Database remains consistent, but transaction atomicity is lost.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">TRANSACTION_BACKOUT</code> analyzes the transactional dependencies, performs DML operations, and generates reports. <code class="codeph">TRANSACTION_BACKOUT</code> does not commit the DML operations that it performs as part of transaction backout, but it holds all the required locks on rows and tables in the right form, preventing other dependencies from entering the system. To make the transaction backout permanent, you must explicitly commit the transaction.
                        </p>
                        <div class="infoboxnotealso" id="GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648__FORTHESYNTAXOFTHETRANSACTION_BACKOU-CAF3EA82">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS66407" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for syntax of the <code class="codeph">TRANSACTION_BACKOUT</code> procedure and detailed parameter descriptions
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS628"></a><div class="props_rev_3"><a id="GUID-B1449BF8-678C-4AB5-96EB-884AE428BD46" name="GUID-B1449BF8-678C-4AB5-96EB-884AE428BD46"></a><h4 id="ADFNS-GUID-B1449BF8-678C-4AB5-96EB-884AE428BD46" class="sect4">TRANSACTION_BACKOUT Reports</h4>
                  <div>
                     <div class="section">
                        <p>To see the reports that <code class="codeph">TRANSACTION_BACKOUT</code> generates, query the static data dictionary views <code class="codeph">*_FLASHBACK_TXN_STATE</code> and <code class="codeph">*_FLASHBACK_TXN_REPORT</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS629"></a><div class="props_rev_3"><a id="GUID-86D7C7BA-0542-45B6-9D43-3BD13C975113" name="GUID-86D7C7BA-0542-45B6-9D43-3BD13C975113"></a><h5 id="ADFNS-GUID-86D7C7BA-0542-45B6-9D43-3BD13C975113" class="sect5">*_FLASHBACK_TXN_STATE</h5>
                     <div>
                        <div class="section">
                           <p>The static data dictionary view <code class="codeph">*_FLASHBACK_TXN_STATE</code> shows whether a transaction is active or backed out. If a transaction appears in this view, it is backed out.
                           </p>
                           <p><code class="codeph">*_FLASHBACK_TXN_STATE</code> is maintained atomically for compensating transactions. If a compensating transaction is backed out, all changes that it made are also backed out, and <code class="codeph">*_FLASHBACK_TXN_STATE</code> reflects this. For example, if compensating transaction <code class="codeph">ct</code> backs out transactions <code class="codeph">t1</code> and <code class="codeph">t2</code>, then <code class="codeph">t1</code> and <code class="codeph">t2</code> appear in <code class="codeph">*_FLASHBACK_TXN_STATE</code>. If <code class="codeph">ct</code> itself is later backed out, the effects of <code class="codeph">t1</code> and <code class="codeph">t2</code> are reinstated, and <code class="codeph">t1</code> and <code class="codeph">t2</code> disappear from <code class="codeph">*_FLASHBACK_TXN_STATE</code>.
                           </p>
                           <div class="infoboxnotealso" id="GUID-86D7C7BA-0542-45B6-9D43-3BD13C975113__GUID-09C7540E-7068-46E7-9AB5-27851262264A">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23588" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about <code class="codeph">*_FLASHBACK_TXN_STATE</code></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS630"></a><div class="props_rev_3"><a id="GUID-789658E2-21E6-4301-97CF-FC722F3445D5" name="GUID-789658E2-21E6-4301-97CF-FC722F3445D5"></a><h5 id="ADFNS-GUID-789658E2-21E6-4301-97CF-FC722F3445D5" class="sect5">*_FLASHBACK_TXN_REPORT</h5>
                     <div>
                        <div class="section">
                           <p>The static data dictionary view <code class="codeph">*_FLASHBACK_TXN_REPORT</code> provides a detailed report for each backed-out transaction.
                           </p>
                           <div class="infoboxnotealso" id="GUID-789658E2-21E6-4301-97CF-FC722F3445D5__GUID-F4399864-CFBB-4391-8166-BA1FFCD4399A">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23587" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about <code class="codeph">*_FLASHBACK_TXN_REPORT</code></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1075"></a><a id="ADFNS01011"></a><div class="props_rev_3"><a id="GUID-06AA782A-3F79-4235-86D5-2D136485F093" name="GUID-06AA782A-3F79-4235-86D5-2D136485F093"></a><h3 id="ADFNS-GUID-06AA782A-3F79-4235-86D5-2D136485F093" class="sect3">Using Flashback Data Archive</h3>
               <div>
                  <div class="section">
                     <p>A Flashback Data Archive provides the ability to track and store transactional changes to a table over its lifetime. A Flashback Data Archive is useful for compliance with record stage policies and audit reports.</p>
                     <p>A Flashback Data Archive consists of one or more tablespaces or parts thereof. You can have multiple Flashback Data Archives. If you are logged on as <code class="codeph">SYSDBA</code>, you can specify a default Flashback Data Archive for the system. A Flashback Data Archive is configured with retention time. Data archived in the Flashback Data Archive is retained for the retention time specified when the Flashback Data Archive was created.
                     </p>
                     <p>By default, Flashback Data Archive is not enabled for any tables. You can enable Flashback Data Archive for a table if all of these conditions are true:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You have the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> object privilege on the Flashback Data Archive to use for that table.
                           </p>
                        </li>
                        <li>
                           <p>The table is not nested, temporary, remote, or external.</p>
                        </li>
                        <li>
                           <p>The table contains neither <code class="codeph">LONG</code> nor nested columns.
                           </p>
                        </li>
                        <li>
                           <p>The table does not use any of these Flashback Data Archive reserved words as column names:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">STARTSCN</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">ENDSCN</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">RID</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">XID</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OP</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OPERATION</code></p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>You cannot enable Flashback Data Archive on a nested table, temporary table, external table, materialized view, Advanced Query (AQ) table, or non-table object.</p>
                     <p>After Flashback Data Archive is enabled for a table, you can disable it only if you either have the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code> system privilege or you are logged on as <code class="codeph">SYSDBA</code>.
                     </p>
                     <p>When choosing a Flashback Data Archive for a specific table, consider the data retention requirements for the table and the retention times of the Flashback Data Archives on which you have the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> object privilege.
                     </p>
                     <p>Effective with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), Flashback Data Archive is enhanced to include the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">User context tracking</span>. The metadata information for tracking transactions can include (if the feature is enabled) the user context, which makes it easier to determine which user made which changes to a table.
                           </p>
                           <p>To set the user context level (determining how much user context is to be saved), use the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS74566" target="_blank"><code class="codeph">DBMS_FLASHBACK_ARCHIVE.SET_CONTEXT_LEVEL</code></a> procedure. To access the context information, use the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS74555" target="_blank"><code class="codeph">DBMS_FLASHBACK_ARCHIVE.GET_SYS_CONTEXT</code></a> function.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Database hardening</span>. This feature enables you to associate a set of tables together in an "application", and then enable Flashback Data Archive on all those tables with a single command. Also, database hardening enables you to lock all the tables with a single command, preventing any DML on those tables until they are subsequently unlocked. Database hardening is designed to make it easier to use Flashback Data Archive to track and protect the security-sensitive tables for an application.
                           </p>
                           <p>To register an application for database hardening, use the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS74562" target="_blank"><code class="codeph">DBMS_FLASHBACK_ARCHIVE.REGISTER_APPLICATION</code></a> procedure, which is described in <span class="italic">Oracle Database PL/SQL Packages and Types Reference</span>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-06AA782A-3F79-4235-86D5-2D136485F093__GUID-FD8940DD-95FA-407F-AF49-EC8E4A5566B7">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="flashback.html#GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308">Creating a Flashback Data Archive</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037">Altering a Flashback Data Archive</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-5E8447E3-3122-47C8-A791-125D784C51FC">Dropping a Flashback Data Archive</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-51570960-CB42-4A13-BE80-00EB84E765B0">Specifying the Default Flashback Data Archive</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41">Enabling and Disabling Flashback Data Archive</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D">DDL Statements on Tables Enabled for Flashback Data Archive</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F">Viewing Flashback Data Archive Data</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-3386EBA7-91D8-432A-B92F-F1546700FE08">Flashback Data Archive Scenarios</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-06AA782A-3F79-4235-86D5-2D136485F093__NOTE-1342-CAF66260">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS72463" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about <code class="codeph">DBMS_FLASHBACK_ARCHIVE</code> package
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS632"></a><a id="ADFNS631"></a><div class="props_rev_3"><a id="GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308" name="GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308"></a><h4 id="ADFNS-GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308" class="sect4">Creating a Flashback Data Archive</h4>
                  <div>
                     <div class="section">
                        <p>Create a Flashback Data Archive with the <code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement, specifying:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Name of the Flashback Data Archive</p>
                           </li>
                           <li>
                              <p>Name of the first tablespace of the Flashback Data Archive</p>
                           </li>
                           <li>
                              <p>(Optional) Maximum amount of space that the Flashback Data Archive can use in the first tablespace</p>
                              <p>The default is unlimited. Unless your space quota on the first tablespace is also unlimited, you must specify this value; otherwise, error ORA-55621 occurs.</p>
                           </li>
                           <li>
                              <p>Retention time (number of days that Flashback Data Archive data for the table is guaranteed to be stored)</p>
                           </li>
                           <li>
                              <p>(Optional) Whether to optimize the storage of data in the history tables maintained in the Flashback Data Archive, using <code class="codeph">[NO]</code> <code class="codeph">OPTIMIZE</code> <code class="codeph">DATA</code>.
                              </p>
                              <p>The default is <code class="codeph">NO</code> <code class="codeph">OPTIMIZE</code> <code class="codeph">DATA</code>.
                              </p>
                           </li>
                        </ul>
                        <p>If you are logged on as <code class="codeph">SYSDBA</code>, you can also specify that this is the default Flashback Data Archive for the system. If you omit this option, you can still make this Flashback Data Archive as default at a later stage.
                        </p>
                        <p>Oracle recommends that all users who must use Flashback Data Archive have unlimited quota on the Flashback Data Archive tablespace; however, if this is not the case, you must grant sufficient quota on that tablespace to those users.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308__GUID-4773BC71-C8BC-4CFB-B0F1-077FB00B6C66">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Create a default Flashback Data Archive named <code class="codeph">fla1</code> that uses up to 10 G of tablespace <code class="codeph">tbs1</code>, whose data are retained for one year:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE FLASHBACK ARCHIVE DEFAULT fla1 TABLESPACE tbs1
  QUOTA 10G RETENTION 1 YEAR;
</pre></li>
                           <li>
                              <p>Create a Flashback Data Archive named <code class="codeph">fla2</code> that uses tablespace <code class="codeph">tbs2</code>, whose data are retained for two years:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE FLASHBACK ARCHIVE fla2 TABLESPACE tbs2 RETENTION 2 YEAR;
</pre></li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308__NOTE-1243-CAF81924">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF20008" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement
                                 </p>
                              </li>
                              <li>
                                 <p><a href="flashback.html#GUID-51570960-CB42-4A13-BE80-00EB84E765B0">Specifying the Default Flashback Data Archive</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS634"></a><a id="ADFNS633"></a><div class="props_rev_3"><a id="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037" name="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037"></a><h4 id="ADFNS-GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037" class="sect4">Altering a Flashback Data Archive</h4>
                  <div>
                     <div class="section">
                        <p>With the <code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement, you can:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Change the retention time of a Flashback Data Archive</p>
                           </li>
                           <li>
                              <p>Purge some or all of its data</p>
                           </li>
                           <li>
                              <p>Add, modify, and remove tablespaces</p>
                              <div class="infoboxnote" id="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037__GUID-38D3C1BE-8AB8-4FA4-8E72-AFB53201CE20">
                                 <p class="notep1">Note:</p>
                                 <p>Removing all tablespaces of a Flashback Data Archive causes an error.</p>
                              </div>
                           </li>
                        </ul>
                        <p>If you are logged on as <code class="codeph">SYSDBA</code>, you can also use the <code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement to make a specific file the default Flashback Data Archive for the system.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037__GUID-25121B22-97F7-4AA9-B7E3-882F0DD13112">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Make Flashback Data Archive <code class="codeph">fla1</code> the default Flashback Data Archive:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 SET DEFAULT;
</pre></li>
                           <li>
                              <p>To Flashback Data Archive <code class="codeph">fla1</code>, add up to 5 G of tablespace <code class="codeph">tbs3</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 ADD TABLESPACE tbs3 QUOTA 5G;
</pre></li>
                           <li>
                              <p>To Flashback Data Archive <code class="codeph">fla1</code>, add as much of tablespace <code class="codeph">tbs4</code> as needed:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 ADD TABLESPACE tbs4;
</pre></li>
                           <li>
                              <p>Change the maximum space that Flashback Data Archive <code class="codeph">fla1</code> can use in tablespace <code class="codeph">tbs3</code> to 20 G:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 MODIFY TABLESPACE tbs3 QUOTA 20G;
</pre></li>
                           <li>
                              <p>Allow Flashback Data Archive <code class="codeph">fla1</code> to use as much of tablespace <code class="codeph">tbs1</code> as needed:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 MODIFY TABLESPACE tbs1;
</pre></li>
                           <li>
                              <p>Change the retention time for Flashback Data Archive <code class="codeph">fla1</code> to two years:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 MODIFY RETENTION 2 YEAR;
</pre></li>
                           <li>
                              <p>Remove tablespace <code class="codeph">tbs2</code> from Flashback Data Archive <code class="codeph">fla1</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 REMOVE TABLESPACE tbs2;
</pre><p>(Tablespace <code class="codeph">tbs2</code> is not dropped.)
                              </p>
                           </li>
                           <li>
                              <p>Purge all historical data from Flashback Data Archive <code class="codeph">fla1</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 PURGE ALL;
</pre></li>
                           <li>
                              <p>Purge all historical data older than one day from Flashback Data Archive <code class="codeph">fla1</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1
  PURGE BEFORE TIMESTAMP (SYSTIMESTAMP - INTERVAL '1' DAY);
</pre></li>
                           <li>
                              <p>Purge all historical data older than SCN 728969 from Flashback Data Archive <code class="codeph">fla1</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 PURGE BEFORE SCN 728969;
</pre></li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037__FORMOREINFORMATIONABOUTTHEALTERFLAS-CAF873C3">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF20009" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS636"></a><a id="ADFNS635"></a><div class="props_rev_3"><a id="GUID-5E8447E3-3122-47C8-A791-125D784C51FC" name="GUID-5E8447E3-3122-47C8-A791-125D784C51FC"></a><h4 id="ADFNS-GUID-5E8447E3-3122-47C8-A791-125D784C51FC" class="sect4">Dropping a Flashback Data Archive</h4>
                  <div>
                     <div class="section">
                        <p>Drop a Flashback Data Archive with the <code class="codeph">DROP</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement. Dropping a Flashback Data Archive deletes its historical data, but does not drop its tablespaces.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5E8447E3-3122-47C8-A791-125D784C51FC__GUID-0635D20D-C12E-4FA7-9EE6-F2BA23CD3014">Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Remove Flashback Data Archive <code class="codeph">fla1</code> and all its historical data, but not its tablespaces:
                        </p><pre class="oac_no_warn" dir="ltr">DROP FLASHBACK ARCHIVE fla1;
</pre><p><a href="../sqlrf/DROP-FLASHBACK-ARCHIVE.html#SQLRF20010" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">DROP</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS637"></a><div class="props_rev_3"><a id="GUID-51570960-CB42-4A13-BE80-00EB84E765B0" name="GUID-51570960-CB42-4A13-BE80-00EB84E765B0"></a><h4 id="ADFNS-GUID-51570960-CB42-4A13-BE80-00EB84E765B0" class="sect4">Specifying the Default Flashback Data Archive</h4>
                  <div>
                     <div class="section">
                        <p>By default, the system has no default Flashback Data Archive. If you are logged on as <code class="codeph">SYSDBA</code>, you can specify default Flashback Data Archive in either of these ways:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Specify the name of an existing Flashback Data Archive in the <code class="codeph">SET</code> <code class="codeph">DEFAULT</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement. For example:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 SET DEFAULT;
</pre><p>If <code class="codeph">fla1</code> does not exist, an error occurs.
                              </p>
                           </li>
                           <li>
                              <p>Include <code class="codeph">DEFAULT</code> in the <code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement when you create a Flashback Data Archive. For example:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE FLASHBACK ARCHIVE DEFAULT fla2 TABLESPACE tbs1
  QUOTA 10G RETENTION 1 YEAR;
</pre></li>
                        </ul>
                        <p>The default Flashback Data Archive for the system is the default Flashback Data Archive for every user who does not have his or her own default Flashback Data Archive.</p>
                        <div class="infoboxnotealso" id="GUID-51570960-CB42-4A13-BE80-00EB84E765B0__GUID-3AD582E6-8D71-474C-9FD9-4E9380847AEF">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../sqlrf/CREATE-FLASHBACK-ARCHIVE.html#SQLRF20008" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> statement
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF00802" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS639"></a><a id="ADFNS638"></a><div class="props_rev_3"><a id="GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41" name="GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41"></a><h4 id="ADFNS-GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41" class="sect4">Enabling and Disabling Flashback Data Archive</h4>
                  <div>
                     <div class="section">
                        <p>By default, Flashback Data Archive is disabled for any table. You can enable Flashback Data Archive for a table if you have the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> object privilege on the Flashback Data Archive to use for that table.
                        </p>
                        <p>To enable Flashback Data Archive for a table, include the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> clause in either the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement. In the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> clause, you can specify the Flashback Data Archive where the historical data for the table are stored. The default is the default Flashback Data Archive for the system. If you specify a nonexistent Flashback Data Archive, an error occurs.
                        </p>
                        <p>If you enable Flashback Data Archive for a table, but AUM is disabled, error ORA-55614 occurs when you try to modify the table.</p>
                        <p>If a table has Flashback Data Archive enabled, and you try to enable it again with a different Flashback Data Archive, an error occurs.</p>
                        <p>After Flashback Data Archive is enabled for a table, you can disable it only if you either have the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code> system privilege or you are logged on as <code class="codeph">SYSDBA</code>. To disable Flashback Data Archive for a table, specify <code class="codeph">NO</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> in the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement. (It is unnecessary to specify <code class="codeph">NO</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> in the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement, because that is the default.)
                        </p>
                        <p>After enabling Flashback Data Archive on a table, Oracle recommends waiting at least 20 seconds before inserting data into the table, and waiting up to 5 minutes before using Flashback Query on the table.</p>
                        <div class="infoboxnotealso" id="GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41__GUID-358FA1FA-3A42-48CE-B66B-31F757CDCD10">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF30014" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> clause of the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement, including restrictions on its use
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41__GUID-56D00A7D-1967-4633-9AD3-9BAE3B7D7514">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Create table <code class="codeph">employee</code> and store the historical data in the default Flashback Data Archive:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee (EMPNO NUMBER(4) NOT NULL, ENAME VARCHAR2(10),
  JOB VARCHAR2(9), MGR NUMBER(4)) FLASHBACK ARCHIVE;
</pre></li>
                           <li>
                              <p>Create table <code class="codeph">employee</code> and store the historical data in the Flashback Data Archive <code class="codeph">fla1</code>:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee (EMPNO NUMBER(4) NOT NULL, ENAME VARCHAR2(10),
  JOB VARCHAR2(9), MGR NUMBER(4)) FLASHBACK ARCHIVE fla1;
</pre></li>
                           <li>
                              <p>Enable Flashback Data Archive for the table <code class="codeph">employee</code> and store the historical data in the default Flashback Data Archive:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee FLASHBACK ARCHIVE;
</pre></li>
                           <li>
                              <p>Enable Flashback Data Archive for the table <code class="codeph">employee</code> and store the historical data in the Flashback Data Archive <code class="codeph">fla1</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee FLASHBACK ARCHIVE fla1;
</pre></li>
                           <li>
                              <p>Disable Flashback Data Archive for the table <code class="codeph">employee</code>:
                              </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE employee NO FLASHBACK ARCHIVE;
</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS640"></a><div class="props_rev_3"><a id="GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D" name="GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D"></a><h4 id="ADFNS-GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D" class="sect4">DDL Statements on Tables Enabled for Flashback Data Archive</h4>
                  <div>
                     <p>Flashback Data Archive supports only these DDL statements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement that does any of the following:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Adds, drops, renames, or modifies a column</p>
                              </li>
                              <li>
                                 <p>Adds, drops, or renames a constraint</p>
                              </li>
                              <li>
                                 <p>Drops or truncates a partition or subpartition operation</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code> statement
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">RENAME</code> statement that renames a table
                           </p>
                        </li>
                     </ul>
                     <p>Flashback Data Archive does not support DDL statements that move, split, merge, or coalesce partitions or subpartitions, move tables, or convert <code class="codeph">LONG</code> columns to <code class="codeph">LOB</code> columns.
                     </p>
                     <p>For example, the following DDL statements cause error ORA-55610 when used on a table enabled for Flashback Data Archive:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement that includes an <code class="codeph">UPGRADE</code> <code class="codeph">TABLE</code> clause, with or without an <code class="codeph">INCLUDING</code> <code class="codeph">DATA</code> clause
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement that moves or exchanges a partition or subpartition operation
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DROP</code> <code class="codeph">TABLE</code> statement
                           </p>
                        </li>
                     </ul>
                     <p>If you must use unsupported DDL statements on a table enabled for Flashback Data Archive, use the <code class="codeph">DBMS_FLASHBACK_ARCHIVE</code>.<code class="codeph">DISASSOCIATE_FBA</code> procedure to disassociate the base table from its Flashback Data Archive. To reassociate the Flashback Data Archive with the base table afterward, use the <code class="codeph">DBMS_FLASHBACK_ARCHIVE</code>.<code class="codeph">REASSOCIATE_FBA</code> procedure. Also, to drop a table enabled for Flashback Data Archive, you must first disable Flashback Data Archive on the table by using the <code class="codeph">ALTER TABLE ... NO FLASHBACK ARCHIVE</code> clause.
                     </p>
                     <div class="infoboxnotealso" id="GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D__GUID-8E5FB68C-F9B0-40E1-876F-430760618AE3">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01707" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code> statement
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01608" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">RENAME</code> statement
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/DROP-TABLE.html#SQLRF01806" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">DROP</code> <code class="codeph">TABLE</code> statement
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS72463" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_FLASHBACK_ARCHIVE</code> package
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS642"></a><a id="ADFNS641"></a><div class="props_rev_3"><a id="GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F" name="GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F"></a><h4 id="ADFNS-GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F" class="sect4">Viewing Flashback Data Archive Data</h4>
                  <div>
                     <div class="section">
                        <p><a href="flashback.html#GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F__BJFJFFJD" title="This table summarizes the static data dictionary views that display information about Flashback Data Archives.">Table 19-3</a> lists and briefly describes the static data dictionary views that you can query for information about Flashback Data Archive files.
                        </p>
                        <div class="tblformal" id="GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F__BJFJFFJD">
                           <p class="titleintable">Table 19-3 Static Data Dictionary Views for Flashback Data Archive Files</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Static Data Dictionary Views for Flashback Data Archive Files" summary="This table summarizes the static data dictionary views that display information about Flashback Data Archives." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="39%" id="d111972e5893">View</th>
                                    <th align="left" valign="bottom" width="61%" id="d111972e5896">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d111972e5901" headers="d111972e5893 ">
                                       <p><code class="codeph">*_FLASHBACK_ARCHIVE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d111972e5901 d111972e5896 ">
                                       <p>Displays information about Flashback Data Archive files.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d111972e5909" headers="d111972e5893 ">
                                       <p><code class="codeph">*_FLASHBACK_ARCHIVE_TS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d111972e5909 d111972e5896 ">
                                       <p>Displays tablespaces of Flashback Data Archive files.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d111972e5917" headers="d111972e5893 ">
                                       <p><code class="codeph">*_FLASHBACK_ARCHIVE_TABLES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d111972e5917 d111972e5896 ">
                                       <p>Displays information about tables that are enabled for Data Flashback Archive files.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F__GUID-8F1FC4B2-CE16-471C-BDB4-3F8ACF434625">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN26719" target="_blank"><span class="italic">Oracle Database Reference</span></a> for detailed information about <code class="codeph">*_FLASHBACK_ARCHIVE</code></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23720" target="_blank"><span class="italic">Oracle Database Reference</span></a> for detailed information about <code class="codeph">*_FLASHBACK_ARCHIVE_TS</code></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN26715" target="_blank"><span class="italic">Oracle Database Reference</span></a> for detailed information about <code class="codeph">*_FLASHBACK_ARCHIVE_TABLES</code></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS643"></a><div class="props_rev_3"><a id="GUID-3386EBA7-91D8-432A-B92F-F1546700FE08" name="GUID-3386EBA7-91D8-432A-B92F-F1546700FE08"></a><h4 id="ADFNS-GUID-3386EBA7-91D8-432A-B92F-F1546700FE08" class="sect4">Flashback Data Archive Scenarios</h4>
                  <div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="flashback.html#GUID-4BB5C910-ADEC-4975-9D87-F8003EC9C687">Scenario: Using Flashback Data Archive to Enforce Digital Shredding</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-ED0F756B-99FA-4B2F-94B5-744687EDB0F3">Scenario: Using Flashback Data Archive to Access Historical Data</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-74B7EA4F-CF41-4633-A24E-66F7B89C6443">Scenario: Using Flashback Data Archive to Generate Reports</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-AEB6257D-3277-4740-A576-08F275A75C42">Scenario: Using Flashback Data Archive for Auditing</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-E7372F07-2795-42CA-A1BC-8799CE8659AA">Scenario: Using Flashback Data Archive to Recover Data</a></p>
                        </li>
                     </ul>
                  </div><a id="ADFNS644"></a><div class="props_rev_3"><a id="GUID-4BB5C910-ADEC-4975-9D87-F8003EC9C687" name="GUID-4BB5C910-ADEC-4975-9D87-F8003EC9C687"></a><h5 id="ADFNS-GUID-4BB5C910-ADEC-4975-9D87-F8003EC9C687" class="sect5">Scenario: Using Flashback Data Archive to Enforce Digital Shredding</h5>
                     <div>
                        <p>Your company wants to "shred" (delete) historical data changes to the <code class="codeph">Taxes</code> table after ten years. When you create the Flashback Data Archive for <code class="codeph">Taxes</code>, you specify a retention time of ten years:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE FLASHBACK ARCHIVE taxes_archive TABLESPACE tbs1 RETENTION 10 YEAR;
</pre><p>When history data from transactions on <code class="codeph">Taxes</code> exceeds the age of ten years, it is purged. (The <code class="codeph">Taxes</code> table itself, and history data from transactions less than ten years old, are not purged.)
                        </p>
                     </div>
                  </div><a id="ADFNS645"></a><div class="props_rev_3"><a id="GUID-ED0F756B-99FA-4B2F-94B5-744687EDB0F3" name="GUID-ED0F756B-99FA-4B2F-94B5-744687EDB0F3"></a><h5 id="ADFNS-GUID-ED0F756B-99FA-4B2F-94B5-744687EDB0F3" class="sect5">Scenario: Using Flashback Data Archive to Access Historical Data</h5>
                     <div>
                        <p>You want to be able to retrieve the inventory of all items at the beginning of the year from the table <code class="codeph">inventory</code>, and to be able to retrieve the stock price for each symbol in your portfolio at the close of business on any specified day of the year from the table <code class="codeph">stock_data</code>.
                        </p>
                        <p>Create a default Flashback Data Archive named <code class="codeph">fla1</code> that uses up to 10 G of tablespace <code class="codeph">tbs1</code>, whose data are retained for five years (you must be logged on as <code class="codeph">SYSDBA</code>):
                        </p><pre class="oac_no_warn" dir="ltr">CREATE FLASHBACK ARCHIVE DEFAULT fla1 TABLESPACE tbs1
  QUOTA 10G RETENTION 5 YEAR;
</pre><p>Enable Flashback Data Archive for the tables <code class="codeph">inventory</code> and <code class="codeph">stock_data</code>, and store the historical data in the default Flashback Data Archive:
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE inventory FLASHBACK ARCHIVE;
ALTER TABLE stock_data FLASHBACK ARCHIVE;
</pre><p>To retrieve the inventory of all items at the beginning of the year 2007, use this query:</p><pre class="oac_no_warn" dir="ltr">SELECT product_number, product_name, count FROM inventory AS OF
  TIMESTAMP TO_TIMESTAMP ('2007-01-01 00:00:00', 'YYYY-MM-DD HH24:MI:SS');
</pre><p>To retrieve the stock price for each symbol in your portfolio at the close of business on July 23, 2007, use this query:</p><pre class="oac_no_warn" dir="ltr">SELECT symbol, stock_price FROM stock_data AS OF
  TIMESTAMP TO_TIMESTAMP ('2007-07-23 16:00:00', 'YYYY-MM-DD HH24:MI:SS')
  WHERE symbol IN my_portfolio;</pre></div>
                  </div><a id="ADFNS646"></a><div class="props_rev_3"><a id="GUID-74B7EA4F-CF41-4633-A24E-66F7B89C6443" name="GUID-74B7EA4F-CF41-4633-A24E-66F7B89C6443"></a><h5 id="ADFNS-GUID-74B7EA4F-CF41-4633-A24E-66F7B89C6443" class="sect5">Scenario: Using Flashback Data Archive to Generate Reports</h5>
                     <div>
                        <p>You want users to be able to generate reports from the table <code class="codeph">investments</code>, for data stored in the past five years.
                        </p>
                        <p>Create a default Flashback Data Archive named <code class="codeph">fla2</code> that uses up to 20 G of tablespace <code class="codeph">tbs1</code>, whose data are retained for five years (you must be logged on as <code class="codeph">SYSDBA</code>):
                        </p><pre class="oac_no_warn" dir="ltr">CREATE FLASHBACK ARCHIVE DEFAULT fla2 TABLESPACE tbs1
  QUOTA 20G RETENTION 5 YEAR;
</pre><p>Enable Flashback Data Archive for the table <code class="codeph">investments</code>, and store the historical data in the default Flashback Data Archive:
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE investments FLASHBACK ARCHIVE;
</pre><p>Lisa wants a report on the performance of her investments at the close of business on December 31, 2006. She uses this query:</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM investments AS OF
  TIMESTAMP TO_TIMESTAMP ('2006-12-31 16:00:00', 'YYYY-MM-DD HH24:MI:SS')
  WHERE name = 'LISA';</pre></div>
                  </div><a id="ADFNS648"></a><div class="props_rev_3"><a id="GUID-AEB6257D-3277-4740-A576-08F275A75C42" name="GUID-AEB6257D-3277-4740-A576-08F275A75C42"></a><h5 id="ADFNS-GUID-AEB6257D-3277-4740-A576-08F275A75C42" class="sect5">Scenario: Using Flashback Data Archive for Auditing</h5>
                     <div>
                        <p>A medical insurance company must audit a medical clinic. The medical insurance company has its claims in the table <code class="codeph">Billings</code>, and creates a default Flashback Data Archive named <code class="codeph">fla4</code> that uses up to 100 G of tablespace <code class="codeph">tbs1</code>, whose data are retained for 10 years:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE FLASHBACK ARCHIVE DEFAULT fla4 TABLESPACE tbs1
  QUOTA 100G RETENTION 10 YEAR;
</pre><p>The company enables Flashback Data Archive for the table <code class="codeph">Billings</code>, and stores the historical data in the default Flashback Data Archive:
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE Billings FLASHBACK ARCHIVE;
</pre><p>On May 1, 2007, clients were charged the wrong amounts for some diagnoses and tests. To see the records as of May 1, 2007, the company uses this query:</p><pre class="oac_no_warn" dir="ltr">SELECT date_billed, amount_billed, patient_name, claim_Id,
  test_costs, diagnosis FROM Billings AS OF TIMESTAMP
  TO_TIMESTAMP('2007-05-01 00:00:00', 'YYYY-MM-DD HH24:MI:SS');</pre></div>
                  </div><a id="ADFNS649"></a><div class="props_rev_3"><a id="GUID-E7372F07-2795-42CA-A1BC-8799CE8659AA" name="GUID-E7372F07-2795-42CA-A1BC-8799CE8659AA"></a><h5 id="ADFNS-GUID-E7372F07-2795-42CA-A1BC-8799CE8659AA" class="sect5">Scenario: Using Flashback Data Archive to Recover Data</h5>
                     <div>
                        <p>An end user recovers from erroneous transactions that were previously committed in the database. The undo data for the erroneous transactions is no longer available, but because the required historical information is available in the Flashback Data Archive, Flashback Query works seamlessly.</p>
                        <p>Lisa manages a software development group whose product sales are doing well. On November 3, 2007, she decides to give all her level-three employees who have more than two years of experience a salary increase of 10% and a promotion to level four. Lisa asks her HR representative, Bob, to make the changes.</p>
                        <p>Using the HR web application, Bob updates the <code class="codeph">employee</code> table to give Lisa's level-three employees a 10% raise and a promotion to level four. Then Bob finishes his work for the day and leaves for home, unaware that he omitted the requirement of two years of experience in his transaction. A few days later, Lisa checks to see if Bob has done the updates and finds that everyone in the group was given a raise! She calls Bob immediately and asks him to correct the error.
                        </p>
                        <p>At first, Bob thinks he cannot return the employee table to its prior state without going to the backups. Then he remembers that the <code class="codeph">employee</code> table has Flashback Data Archive enabled.
                        </p>
                        <p>First, he verifies that no other transaction modified the <code class="codeph">employee</code> table after his: The commit time stamp from the transaction query corresponds to Bob's transaction, two days ago.
                        </p>
                        <p>Next, Bob uses these statements to return the <code class="codeph">employee</code> table to the way it was before his erroneous change:
                        </p><pre class="oac_no_warn" dir="ltr">DELETE EMPLOYEE WHERE MANAGER = 'LISA JOHNSON';
INSERT INTO EMPLOYEE
  SELECT * FROM EMPLOYEE
    AS OF TIMESTAMP (SYSTIMESTAMP - INTERVAL '2' DAY)
      WHERE MANAGER = 'LISA JOHNSON';
</pre><p>Bob then reexecutes the update that Lisa had requested.</p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS01012"></a><div class="props_rev_3"><a id="GUID-0DAA9454-D91A-46AC-A8E0-510670672F19" name="GUID-0DAA9454-D91A-46AC-A8E0-510670672F19"></a><h3 id="ADFNS-GUID-0DAA9454-D91A-46AC-A8E0-510670672F19" class="sect3">General Guidelines for Oracle Flashback Technology</h3>
               <div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">ENABLE</code> and <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">DISABLE</code> procedures around SQL code that you do not control, or when you want to use the same past time for several consecutive queries.
                        </p>
                     </li>
                     <li>
                        <p>Use Oracle Flashback Query, Oracle Flashback Version Query, or Oracle Flashback Transaction Query for SQL code that you write, for convenience. An Oracle Flashback Query, for example, is flexible enough to do comparisons and store results in a single query.</p>
                     </li>
                     <li>
                        <p>To obtain an SCN to use later with a flashback feature, use <code class="codeph">DBMS_FLASHBACK</code>.<code class="codeph">GET_SYSTEM_CHANGE_NUMBER</code>.
                        </p>
                     </li>
                     <li>
                        <p>To compute or retrieve a past time to use in a query, use a function return value as a time stamp or SCN argument. For example, add or subtract an <code class="codeph">INTERVAL</code> value to the value of the <code class="codeph">SYSTIMESTAMP</code> function.
                        </p>
                     </li>
                     <li>
                        <p>Use Oracle Flashback Query, Oracle Flashback Version Query, and Oracle Flashback Transaction Query locally or remotely. An example of a remote Oracle Flashback Query is:</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees@some_remote_host AS OF 
    TIMESTAMP (SYSTIMESTAMP - INTERVAL '60' MINUTE);
</pre></li>
                     <li>
                        <p>To ensure database consistency, perform a <code class="codeph">COMMIT</code> or <code class="codeph">ROLLBACK</code> operation before querying past data.
                        </p>
                     </li>
                     <li>
                        <p>Remember that all flashback processing uses the current session settings, such as national language and character set, not the settings that were in effect at the time being queried.</p>
                     </li>
                     <li>
                        <p>Remember that DDLs that alter the structure of a table (such as drop/modify column, move table, drop partition, truncate table/partition, and add constraint) invalidate any existing undo data for the table. If you try to retrieve data from a time before such a DDL executed, error ORA-01466 occurs. DDL operations that alter the storage attributes of a table (such as <code class="codeph">PCTFREE</code>, <code class="codeph">INITRANS</code>, and <code class="codeph">MAXTRANS</code>) do not invalidate undo data.
                        </p>
                     </li>
                     <li>
                        <p>To query past data at a precise time, use an SCN. If you use a time stamp, the actual time queried might be up to 3 seconds earlier than the time you specify. Oracle Database uses SCNs internally and maps them to time stamps at a granularity of 3 seconds.</p>
                        <p>For example, suppose that the SCN values 1000 and 1005 are mapped to the time stamps 8:41 AM and 8:46 AM, respectively. A query for a time between 8:41:00 and 8:45:59 AM is mapped to SCN 1000; an Oracle Flashback Query for 8:46 AM is mapped to SCN 1005. Therefore, if you specify a time that is slightly after a DDL operation (such as a table creation) Oracle Database might use an SCN that is immediately before the DDL operation, causing error ORA-01466.</p>
                     </li>
                     <li>
                        <p>You cannot retrieve past data from a dynamic performance (<code class="codeph">V$</code>) view. A query on such a view returns current data.
                        </p>
                     </li>
                     <li>
                        <p>You can perform queries on past data in static data dictionary views, such as <code class="codeph">*_TABLES</code>.
                        </p>
                     </li>
                     <li>
                        <p>You can enable optimization of data storage for history tables maintained by Flashback Data Archive by specifying <code class="codeph">OPTIMIZE</code> <code class="codeph">DATA</code> when creating or altering a Flashback Data Archive.
                        </p>
                        <p><code class="codeph">OPTIMIZE</code> <code class="codeph">DATA</code> optimizes the storage of data in history tables by using any of these features:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Advanced Row Compression</p>
                           </li>
                           <li>
                              <p>Advanced LOB Compression</p>
                           </li>
                           <li>
                              <p>Advanced LOB Deduplication</p>
                           </li>
                           <li>
                              <p>Segment-level compression tiering</p>
                           </li>
                           <li>
                              <p>Row-level compression tiering</p>
                           </li>
                        </ul>
                        <p>The default is not to optimize the storage of data in history tables.</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-0DAA9454-D91A-46AC-A8E0-510670672F19__IMPORTINGUSER-GENERATEDHISTORYCANLE-09803154">
                     <p class="notep1">Caution:</p>
                     <p>Importing user-generated history can lead to inaccurate, or unreliable results. This procedure should only be used after consulting with Oracle Support.</p>
                  </div>
               </div>
            </div><a id="ADFNS01013"></a><div class="props_rev_3"><a id="GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA" name="GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA"></a><h3 id="ADFNS-GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA" class="sect3">Performance Guidelines for Oracle Flashback Technology</h3>
               <div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the <code class="codeph">DBMS_STATS</code> package to generate statistics for all tables involved in an Oracle Flashback Query. Keep the statistics current. Oracle Flashback Query uses the cost-based optimizer, which relies on these statistics.
                        </p>
                     </li>
                     <li>
                        <p>Minimize the amount of undo data that must be accessed. Use queries to select small sets of past data using indexes, not to scan entire tables. If you must scan a full table, add a parallel hint to the query.</p>
                        <p>The performance cost in I/O is the cost of paging in data and undo blocks that are not in the buffer cache. The performance cost in CPU use is the cost of applying undo information to affected data blocks. When operating on changes in the recent past, flashback operations are CPU-bound.</p>
                        <p>Oracle recommends that you have enough buffer cache, so that the versions query for the archiver finds the undo data in the buffer cache. Buffer cache access is significantly faster than disk access.</p>
                     </li>
                     <li>
                        <p>If very large transactions (such as affecting more than 1 million rows) are performed on tracked tables, set the large pool size high enough (at least 1 GB) for Parallel Query not to have to allocate new chunks out of the SGA.</p>
                     </li>
                     <li>
                        <p>For Oracle Flashback Version Query, use index structures. Oracle Database keeps undo data for index changes and data changes. Performance of index lookup-based Oracle Flashback Version Query is an order of magnitude faster than the full table scans that are otherwise needed.</p>
                     </li>
                     <li>
                        <p>In an Oracle Flashback Transaction Query, the <code class="codeph">xid</code> column is of the type <code class="codeph">RAW(8)</code>. To take advantage of the index built on the <code class="codeph">xid</code> column, use the <code class="codeph">HEXTORAW</code> conversion function: <code class="codeph">HEXTORAW(xid)</code>. 
                        </p>
                     </li>
                     <li>
                        <p>An Oracle Flashback Query against a materialized view does not take advantage of query rewrite optimization.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA__NOTE-132-CAFE29F4">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGDBA558" target="_blank"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for information about setting the large pool size
                     </p>
                  </div>
               </div>
            </div><a id="ADFNS98765"></a><div class="props_rev_3"><a id="GUID-DECBC705-B421-4861-A341-E07EBB883AC9" name="GUID-DECBC705-B421-4861-A341-E07EBB883AC9"></a><h3 id="ADFNS-GUID-DECBC705-B421-4861-A341-E07EBB883AC9" class="sect3">Multitenant Container Database Restrictions for Oracle Flashback Technology</h3>
               <div>
                  <p>These Oracle Flashback Technology features are unavailable for a multitenant container database (CDB):</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), Flashback Data Archive (FDA) is not supported in a CDB.
                        </p>
                        <p>For Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), this restriction is removed.
                        </p>
                     </li>
                     <li>
                        <p>Flashback Transaction Query is not supported in a CDB.</p>
                     </li>
                     <li>
                        <p>Flashback Transaction Backout is not supported in a CDB.</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
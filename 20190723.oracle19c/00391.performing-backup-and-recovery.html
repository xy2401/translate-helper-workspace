<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter introduces you to Oracle Database backup and recovery with Oracle Recovery Manager (RMAN). After reading this chapter, you should be familiar with the basic concepts of Oracle Database backup and recovery operations, know how to implement a disk-based backup strategy, and perform simple repairs to database files.">
      <meta name="description" content="This chapter introduces you to Oracle Database backup and recovery with Oracle Recovery Manager (RMAN). After reading this chapter, you should be familiar with the basic concepts of Oracle Database backup and recovery operations, know how to implement a disk-based backup strategy, and perform simple repairs to database files.">
      <title>Performing Backup and Recovery</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="2 Day DBA">
      <meta property="og:description" content="This chapter introduces you to Oracle Database backup and recovery with Oracle Recovery Manager (RMAN). After reading this chapter, you should be familiar with the basic concepts of Oracle Database backup and recovery operations, know how to implement a disk-based backup strategy, and perform simple repairs to database files.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="2 Day DBA">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="2-day-dba.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T23:13:13-07:00">
      <meta name="dcterms.title" content="2 Day DBA">
      <meta name="dcterms.dateCopyrighted" content="2004, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96197-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-schema-objects.html" title="Previous" type="text/html">
      <link rel="next" href="monitoring-and-tuning-the-database.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADMQS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-schema-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="monitoring-and-tuning-the-database.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2 Day DBA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Performing Backup and Recovery</li>
            </ol>
            <a id="GUID-C6EEB732-9548-4814-8558-8B903DD74759" name="GUID-C6EEB732-9548-4814-8558-8B903DD74759"></a><a id="ADMQS009"></a>
            
            <h2 id="ADMQS-GUID-C6EEB732-9548-4814-8558-8B903DD74759" class="sect2"><span class="enumeration_chapter">9 </span> Performing Backup and Recovery
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter introduces you to Oracle Database backup and recovery with Oracle Recovery Manager (RMAN). After reading this chapter, you should be familiar with the basic concepts of Oracle Database backup and recovery operations, know how to implement a disk-based backup strategy, and perform simple repairs to database files.</p>
               <p>This chapter contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF" title="The focus in Oracle Database backup and recovery is on the physical backup of database files, which permits you to reconstruct your database.">Overview of Database Backup and Recovery</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC" title="To back up your database means to make copies of your data files, control file, and archived redo log files (if your database runs in ARCHIVELOG mode). Restoring a database means copying the physical files that comprise the database from a backup medium, typically disk or tape, to their original or to new locations.">Database Backup and Recovery Concepts</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" title="This section explains how to set up your database to take advantage of Oracle suggested backup strategies.">Configuring Your Database for Basic Backup and Recovery</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692" title="This section describes how to back up your database with Oracle Recovery Manager (RMAN). The Oracle suggested strategy for disk-only backups provides efficient daily backup of the database.">Backing Up Your Database</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3" title="Backup reports contain summary and detailed information about past backup jobs run by Oracle Recovery Manager (RMAN).">Displaying Backup Reports</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-83CED39F-DC23-4539-9668-32C89676904E" title="As part of a backup strategy, you must manage database backups.">Managing Backups</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523" title="The Oracle advised recovery feature uses Data Recovery Advisor, which is an Oracle Database feature that automatically diagnoses data failures, determines and presents appropriate repair options, and performs repairs if requested by the user.">Performing Oracle Advised Recovery</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6" title="User-Directed Recovery enables you to use flashback features and perform restore operations and recovery procedures.">Performing User-Directed Recovery</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-37FEAC3A-99F6-441F-93EE-55C4D69728F3" title="Oracle By Example (OBE) has a series on the Oracle Database 2 Day DBA guide. This OBE steps you through the tasks in this section, and includes annotated screenshots.">Performing Backup and Recovery: Oracle By Example Series</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-C6EEB732-9548-4814-8558-8B903DD74759__GUID-72416527-40C2-4B27-861F-97151DCF5A01">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../bradv/introduction-backup-recovery.html#BRADV8001" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information about using RMAN to perform advanced backup and recovery operations
                        </p>
                     </li>
                     <li>
                        <p><a href="../rcmrf/about-rman-commands.html#RCMRF001" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for the syntax and semantics of RMAN commands
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADMQS091"></a><div class="props_rev_3"><a id="GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF" name="GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF"></a><h3 id="ADMQS-GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF" class="sect3"><span class="enumeration_section">9.1 </span>Overview of Database Backup and Recovery
               </h3>
               <div>
                  <p>The focus in Oracle Database backup and recovery is on the physical backup of database files, which permits you to reconstruct your database.</p>
                  <p>Oracle Recovery Manager (RMAN), a command-line tool, is the method preferred by Oracle for efficiently backing up and recovering your Oracle database. The files protected by the backup and recovery facilities built into RMAN include data files, control files, server parameter files, and archived redo log files. With these files you can reconstruct your database. RMAN is designed to work intimately with the server, providing block-level corruption detection during backup and restore. RMAN optimizes performance and space consumption during backup with file multiplexing and backup set compression, and integrates with leading tape and storage media products. The backup mechanisms work at the physical level to protect against file damage, such as the accidental deletion of a data file or the failure of a disk drive. RMAN can also be used to perform point-in-time recovery to recover from logical failures when other techniques such as flashback cannot be used.</p>
                  <p>Logical backups, such as exporting database objects such as tables or tablespaces, are a useful supplement to physical backups, but cannot protect your whole database. An effective backup strategy must be based on physical backups.</p>
                  <p><a id="d37040e163" class="indexterm-anchor"></a>The Oracle Database flashback features provide a range of physical and logical data recovery tools as efficient, easy-to-use alternatives to physical and logical backups. The flashback features enable you to reverse the effects of unwanted database changes without restoring data files from backup.
                  </p>
                  <p>This section provides links to the following flashback features that are documented in <a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV80055" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a>: 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV81517" target="_blank">Oracle Flashback Table</a>, which enables you to revert a table to its contents at a time in the recent past
                        </p>
                     </li>
                     <li>
                        <p><a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV81511" target="_blank">Oracle Flashback Drop</a>, which enables you to retrieve deleted (dropped) database tables
                        </p>
                     </li>
                     <li>
                        <p><a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV81330" target="_blank">Oracle Flashback Database</a>, which enables you to revert the entire database to a past point in time
                        </p>
                     </li>
                  </ul>
                  <p>The first two features operate at the logical level, whereas the last feature operates at the physical level. None of the preceding features requires advance preparation such as creating logical exports to allow for retrieval of your lost data, but Oracle Flashback Database requires the advance preparation of enabling the feature. You can use all of the features while your database is available. <a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV80055" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> discusses the flashback features of Oracle Database at greater length.
                  </p>
                  <div class="infoboxnote" id="GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF__GUID-99AA82AF-75BC-42DA-A0D6-E8961A92AA85">
                     <p class="notep1">Note:</p>
                     <p><a id="d37040e205" class="indexterm-anchor"></a>Oracle Flashback Database does not recover missing data files.
                     </p>
                  </div>
               </div><a id="ADMQS12547"></a><div class="props_rev_3"><a id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF" name="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF"></a><h4 id="ADMQS-GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF" class="sect4"><span class="enumeration_section">9.1.1 </span>Overview of Backing Up and Recovering CDBs and PDBs
                  </h4>
                  <div>
                     <p>When using the multitenant architecture, you can perform backup and recovery operations on a whole multitenant container database (CDB), the root, or one or more pluggable databases (PDBs).</p>
                     <p>The Oracle Recovery Manager (RMAN) commands used to backup and recover CDBs and PDBs are the same as those used for non-CDBs, with minor variations in the syntax. The backup and recovery operations performed on non-CDBs can also be performed on CDBs and PDBs. This includes the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Full and incremental backups</p>
                        </li>
                        <li>
                           <p>Complete and point-in-time recovery (PITR)</p>
                        </li>
                        <li>
                           <p>Flashback Database</p>
                        </li>
                        <li>
                           <p>Reporting operations (such as listing backups and cross-checking backups)</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-23311206-0FD1-45CF-ABE6-FF21443891C1">About Connecting to CDBs and PDBs</p>
                        <p>You can connect to the root in one of the following ways<span class="italic">:</span></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect using operating system authentication</p>
                              <p>You are connected to the root as the <code class="codeph">SYS</code> user with the <code class="codeph">SYSDBA</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>Connect locally as a common user</p>
                           </li>
                           <li>
                              <p>Connect as a common user through Oracle Net Services</p>
                           </li>
                        </ul>
                        <p>To connect as <code class="codeph">TARGET</code> to a PDB, use one of the following techniques:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect with a net service name that resolves to a database service for that PDB</p>
                           </li>
                           <li>
                              <p>Connect locally as a common user or local user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-7044D023-C459-48E3-8EF3-AEF6B720C687">
                           <p class="notep1">Note:</p>
                           <p>Certain operations are not available when you connect directly to a PDB. See <a href="../bradv/starting-interacting-with-rman-client.html#BRADV673" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for a list of these operations.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-2896EAD5-1495-4E0E-8808-F0E578615D92">
                           <p class="notep1">See Also:</p>
                           <p>The following sections in the <span class="italic">Oracle Database Backup and Recovery User’s Guide</span> provide detailed information about backing up and recovering PDBs:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../bradv/starting-interacting-with-rman-client.html#BRADV674" target="_blank">Connecting as Target to the Root</a></p>
                              </li>
                              <li>
                                 <p><a href="../bradv/starting-interacting-with-rman-client.html#BRADV678" target="_blank">Connecting as Target to a PDB</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADMQS12548"></a><div class="props_rev_3"><a id="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA" name="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA"></a><h5 id="ADMQS-GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA" class="sect5"><span class="enumeration_section">9.1.1.1 </span>Backup and Complete Recovery of CDBs
                     </h5>
                     <div>
                        <p>To perform backup and complete recovery operations on a whole multitenant container database (CDB), you connect as <code class="codeph">TARGET</code> to the root.
                        </p>
                        <p>The connection must be established as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                        </p>
                        <p>After you connect to the root, the same commands that are used to perform operations on non-CDBs are used to perform backup and complete recovery on the entire CDB.</p>
                        <div class="infoboxnotealso" id="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA__GUID-0E8DB322-6D1C-45E8-BB77-C97FF2F6462D">
                           <p class="notep1">See Also:</p>
                           <p>The following sections in the <span class="italic">Oracle Database Backup and Recovery User’s Guide</span> provide detailed information about performing backup and complete recovery of CDBs:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV731" target="_blank">Backing Up a Whole CDB</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV746" target="_blank">Performing Complete Recovery of a Whole CDB</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="../bradv/validating-database-files-backups.html#BRADV744" target="_blank">Validating a Whole CDB</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="../bradv/reporting-rman-operations.html#BRADV740" target="_blank">Reporting in CDBs</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADMQS12549"></a><div class="props_rev_3"><a id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9" name="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9"></a><h5 id="ADMQS-GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9" class="sect5"><span class="enumeration_section">9.1.1.2 </span>Backup and Complete Recovery of PDBs
                     </h5>
                     <div>
                        <p>You can perform backup and complete recovery operations on a single pluggable database (PDB) or on multiple PDBs.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-03E9FC40-D724-42A2-979B-E384614B3194">Backups of PDBs</p>
                           <p>When relocating a PDB or cloning a non-CDB as a PDB, you may want to retain the use of preplugin backups. For preplugin backups to be usable in the destination CDB, metadata about the preplugin backups must be exported to the RMAN repository of the destination CDB.</p>
                           <p>The technique for making the backups usable depends on the type of operation:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Creating a PDB by cloning a non-CDB</p>
                                 <p>When the non-CDB is opened in read/write mode, you must execute the <code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code> procedure as the last step before cloning. When plugging in the non-CDB as a PDB to a destination CDB, the operation copies the backup metadata of the source non-CDB into the data dictionary of the destination CDB.
                                 </p>
                              </li>
                              <li>
                                 <p>Relocating a PDB to another CDB</p>
                                 <p>When you unplug the source PDB, the backup metadata is automatically exported. Therefore, you do not need to execute <code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code>.
                                 </p>
                              </li>
                           </ul>
                           <p>Preplugin backups are usable only on the destination CDB into which you plug in the source non-CDB or PDB.</p>
                           <div class="infoboxnote" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-14EC2F20-25FD-46E5-B660-08E142EA5DDA">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../bradv/rman-backup-concepts.html#GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> to learn about preplugin backups
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../bradv/backing-up-database.html#GUID-7F9F8913-2838-4066-A000-048B35A70EA4" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> to learn how to create a preplugin backup of the whole database
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_PDB.html#ARPLS-GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about the <code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code> procedure
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-113341CA-36C3-4A19-9D48-28311F5199F5">Syntax for Backup Commands</p>
                           <p>Although the Oracle Recovery Manager (RMAN) commands are the same, the syntax used to perform operations on multiple PDBs contains some modifications.</p>
                           <p>To perform backup and complete recovery operations on a single PDB, you can connect as <code class="codeph">TARGET</code> to either of the following containers:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>PDB</p>
                                 <p>In this case, use the same commands that you would use to backup or recover non-CDBs. For example, to back up a PDB, use the <code class="codeph">BACKUP DATABASE</code> command.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CDB$ROOT</code></p>
                                 <p>In this case, use the <code class="codeph">PLUGGABLE DATABASE</code> clause in your RMAN commands. The following command backs up the PDB <code class="codeph">hrpdb</code> when connected to the root:
                                 </p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hrpdb;
</code></pre><p>To perform backup and complete recovery operations on multiple PDBs using a single command, you must connect to the root. Use the <code class="codeph">PLUGGABLE DATABASE</code> clause followed by the list of PDBs on which you want to perform the operation. The following example backs up the PDBs <code class="codeph">hrpdb</code>, <code class="codeph">salespdb</code>, and <code class="codeph">invpdb</code> when connected to the root:
                                 </p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hrpdb, salespdb, invpdb;
</code></pre></li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-4E01344D-6B49-4FBF-8395-9605412A055C">
                              <p class="notep1">See Also:</p>
                              <p>The following sections in the <span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span> provide detailed information about backing up and recovering PDBs:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="../bradv/starting-interacting-with-rman-client.html#BRADV678" target="_blank">Connecting as Target to a PDB</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/starting-interacting-with-rman-client.html#BRADV674" target="_blank">Connecting as Target to the Root</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/backing-up-database.html#BRADV735" target="_blank">Backing Up PDBs with RMAN</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/rman-complete-database-recovery.html#BRADV749" target="_blank">Performing Complete Recovery of PDBs with RMAN</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/validating-database-files-backups.html#BRADV745" target="_blank">Validating PDBs</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/reporting-rman-operations.html#BRADV741" target="_blank">Reporting in PDBs</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371" name="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371"></a><h5 id="ADMQS-GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371" class="sect5"><span class="enumeration_section">9.1.1.3 </span>Point-in-Time Recovery in a Multitenant Environment
                     </h5>
                     <div>
                        <p>You can perform point-in-time recovery of the whole multitenant container database (CDB) or a particular pluggable database (PDB).</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-93074757-54F6-4470-BCE4-43CE56EF9567">Point-in-Time Recovery of a CDB</p>
                           <p>To perform point-in-time recovery of a CDB, you must meet the following prerequisites:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You must be logged in to the root container as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                 </p>
                              </li>
                              <li>
                                 <p>The CDB must be mounted.</p>
                              </li>
                           </ul>
                           <p>When performing the recovery operation, use the same commands that you use for non-CDBs.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-7D545C99-9B2F-4430-8EA6-5C793E9E1B3C">Point-in-Time Recovery of a PDB</p>
                           <p>When a PDB is closed in an open or closed CDB, you can recover the PDB to a past point in time. The technique depends on the undo mode of the CDB. The following table describes the differences.</p>
                           <div class="tblformal" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-A94D6BE0-70C8-48A5-A26B-71339F50A4D6">
                              <p class="titleintable">Table 9-1 Differences in Point-in-Time Recovery Techniques</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="Differences in Point-in-Time Recovery Techniques" summary="This table describes the differences between point-in-time recovery techniques depending on the undo mode of the PDB." frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d37040e629">Undo Mode</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e631">Auxiliary Instance Used?</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e633">Connect as TARGET to ...</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e635">RMAN Commands to Use for Recovery</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d37040e639" headers="d37040e629 ">
                                          <p>Shared</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e639 d37040e631 ">
                                          <p>Yes</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e639 d37040e633 ">
                                          <p>CDB root</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e639 d37040e635 ">
                                          <p>Include the <code class="codeph">PLUGGABLE DATABASE</code> clause to specify the PDB that must be recovered.
                                          </p>
                                          <p>RMAN uses an auxiliary destination to store temporary files created during recovery. If a fast recovery area has been configured, then it is used as the auxiliary destination. You can explicitly specify an auxiliary destination using the <code class="codeph">AUXILIARY DESTINATION</code> clause in the <code class="codeph">RECOVER</code> command.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d37040e663" headers="d37040e629 ">
                                          <p>Local</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e663 d37040e631 ">
                                          <p>No</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e663 d37040e633 ">
                                          <p>CDB root or PDB</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e663 d37040e635 ">
                                          <p>When connected to the PDB, use the same commands that you use for non-CDBs. When connected to the root, include the <code class="codeph">PLUGGABLE DATABASE</code> clause to specify the PDB that must be recovered.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnotealso" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-09656493-45FB-4E01-A254-BF570244313A">
                              <p class="notep1">See Also:</p>
                              <p>The following sections in the <span class="italic">Oracle Database Backup and Recovery User’s Guide</span> for more information about point-in-time recovery.
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" target="_blank">Overview of Restore Points in a Multitenant Environment</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" target="_blank">Creating CDB Restore Points</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-9363C4B9-48E5-470F-B13B-43FA56667978" target="_blank">Creating PDB Restore Points</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-031D9695-A9D2-4381-A840-39BD3CC19946" target="_blank">Performing Point-in-Time Recovery of CDBs and PDBs</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5" name="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5"></a><h5 id="ADMQS-GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5" class="sect5"><span class="enumeration_section">9.1.1.4 </span>Flashback Database in a Multitenant Environment
                     </h5>
                     <div>
                        <p>You can perform a Flashback Database operation for a whole multitenant container database (CDB) or for a particular pluggable (PDB). </p>
                        <p>RMAN uses an auxiliary destination to store temporary files created during point-in-time recovery. By default, the fast recovery area is used as the auxiliary destination. You can explicitly specify an auxiliary destination using the <code class="codeph">AUXILIARY DESTINATION</code> clause in the <code class="codeph">RECOVER</code> command.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-CDF83CA0-4688-4CAC-8087-85EE0A77BF47">Flashback of CDBs</p>
                           <p>To perform Flashback Database for a CDB, you must meet the following prerequisites:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You must be connected to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                                 </p>
                              </li>
                              <li>
                                 <p>The CDB must be mounted.</p>
                              </li>
                           </ul>
                           <p>Specify the target point in time for the flashback operation using a CDB restore point, time expression, or SCN. A CDB restore point is accessible to every PDB within the CDB. However, the restore point does not reflect the PDB sub-incarnation of any of its PDBs.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-3548F0AE-1B06-4A22-B71F-7AD2FD0D0132">Flashback of PDBs</p>
                           <p>When a PDB is closed and the CDB is open, you can perform a flashback database operation for this PDB using the <code class="codeph">FLASHBACK DATABASE</code> command. Performing a Flashback Database operation on a particular PDB modifies only data files related to that PDB. The other PDBs in the CDB are not impacted and are available for use. Note that a PDB restore point is accessible only to the PDB in which it is defined and can be used for operations only on this PDB.
                           </p>
                           <div class="tblformal" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__DIFFERENCESINPOINT-IN-TIMERECOVERYT-3410F520">
                              <p class="titleintable">Table 9-2 Differences in Flashback Techniques</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="Differences in Flashback Techniques" summary="This table describes the differences between point-in-time recovery techniques depending on the undo mode of the PDB." frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d37040e790">CDB Undo Mode</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e792">Auxiliary Instance Used?</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e794">Connect as TARGET to ...</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e796">Commands</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d37040e800" headers="d37040e790 ">
                                          <p>Shared</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e800 d37040e792 ">
                                          <p>Yes</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e800 d37040e794 ">
                                          <p>CDB root</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e800 d37040e796 ">
                                          <p>Use the <code class="codeph">FLASHBACK PLUGGABLE DATABASE</code> command. You can only flash back to a clean PDB restore point.
                                          </p>
                                          <p>RMAN uses an auxiliary destination to store temporary files created during flashback. If a fast recovery area has been configured, then it is used as the auxiliary destination. You can explicitly specify an auxiliary destination using the <code class="codeph">AUXILIARY DESTINATION</code> clause in the <code class="codeph">FLASHBACK PLUGGABLE DATABASE</code> command.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d37040e824" headers="d37040e790 ">
                                          <p>Local</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e824 d37040e792 ">
                                          <p>No</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e824 d37040e794 ">
                                          <p>CDB root or PDB</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e824 d37040e796 ">
                                          <p>Use the <code class="codeph">FLASHBACK PLUGGABLE DATABASE</code> command. You can specify the target point in time for the flashback operation using a CDB restore point, PDB restore point, time expression, or target SCN.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnotealso" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-09656493-45FB-4E01-A254-BF570244313A">
                              <p class="notep1">See Also:</p>
                              <p>The following sections in the <span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span> for more information about flashback of CDBs and PDBs:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" target="_blank">Overview of Restore Points in a Multitenant Environment</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" target="_blank">Creating CDB Restore Points</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-9363C4B9-48E5-470F-B13B-43FA56667978" target="_blank">Creating PDB Restore Points</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV-GUID-8466CA3C-652A-4AAB-88EB-8815575D6266" target="_blank">Performing a Flashback Database Operation for a Whole CDB</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-C1215E86-9A7B-4EC9-9777-2A18BD627394" target="_blank">Performing a Flashback Database Operation for PDBs</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS0911"></a><div class="props_rev_3"><a id="GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC" name="GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC"></a><h3 id="ADMQS-GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC" class="sect3"><span class="enumeration_section">9.2 </span>Database Backup and Recovery Concepts
               </h3>
               <div>
                  <div><span>To <span class="bold">back up your database</span> means to make copies of your data files, control file, and archived redo log files (if your database runs in <code class="codeph">ARCHIVELOG</code> mode). <span class="bold">Restoring a database</span> means copying the physical files that comprise the database from a backup medium, typically disk or tape, to their original or to new locations.</span> <span class="bold">Database recovery</span> is the process of updating database files restored from a backup with the changes made to the database after the backup by applying incremental backups and redo logs to the restored files.
                  </div>
                  <p><a id="d37040e941" class="indexterm-anchor"></a></p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-F4305362-3C73-46C8-8B59-71149B6E259C" title="One of the important decisions you need to make as a DBA is to determine if the database must be run in ARCHIVELOG mode or NOARCHIVELOG mode. The mode you choose depends on your availability and reliability requirements.">ARCHIVELOG and NOARCHIVELOG Mode</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA" title="Oracle Recovery Manager (RMAN) maintains a record of database files and backups for each database on which it performs operations. This metadata is called the RMAN repository.">RMAN Repository</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-0A8FC1FE-0994-49A7-9F22-2E3F5FAEAF68" title="Database backups created by Oracle Recovery Manager (RMAN) are stored as image copies or backup sets.">Image Copies and Backup Sets</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-74D6A06A-EC88-4CF0-B486-7B68DE4A78E4" title="A full backup of a data file includes all used blocks of the data file. A full backup can be either an image copy or backup set.">Full Backups and Incremental Backups</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-74B864F7-2413-4142-BDB0-7B98BE960462" title="A backup is either consistent or inconsistent. To make a consistent backup, your database must have been shut down cleanly and remain closed for the duration of the backup.">Consistent and Inconsistent Backups</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E" title="If you restore the archived redo log files and data files, then you must perform media recovery before you can open the database.">Media Recovery</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" title="To simplify the management of backup and recovery files, you can create a fast recovery area for your database. The fast recovery area is an Oracle-managed directory, file system, or Oracle Automatic Storage Management disk group that provides a centralized storage location for backup and recovery files.">Fast Recovery Area</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC__GUID-EEC6B759-005E-4B73-B0AD-785F974D3860">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692" title="This section describes how to back up your database with Oracle Recovery Manager (RMAN). The Oracle suggested strategy for disk-only backups provides efficient daily backup of the database.">Backing Up Your Database</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV001" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for an overview of Oracle Recovery Manager (RMAN) architecture
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV002" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for more conceptual details about RMAN backups
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADMQS12467"></a><div class="props_rev_3"><a id="GUID-F4305362-3C73-46C8-8B59-71149B6E259C" name="GUID-F4305362-3C73-46C8-8B59-71149B6E259C"></a><h4 id="ADMQS-GUID-F4305362-3C73-46C8-8B59-71149B6E259C" class="sect4"><span class="enumeration_section">9.2.1 </span>ARCHIVELOG and NOARCHIVELOG Mode
                  </h4>
                  <div>
                     <div><span>One of the important decisions you need to make as a DBA is to determine if the database must be run in <code class="codeph">ARCHIVELOG</code> mode or <code class="codeph">NOARCHIVELOG</code> mode. The mode you choose depends on your availability and reliability requirements.</span> It also impacts the type of backup and recovery operations that you can perform.
                     </div>
                     <p>In <code class="codeph">NOARCHIVELOG</code> mode, the filled redo log groups that become inactive can be reused. This mode protects the database against instance failure, but not against media failure. In <code class="codeph">ARCHIVELOG</code> mode, filled groups of redo logs are archived. This mode protects the database from both instance and media failure, but may require additional hardware resources.
                     </p>
                     <div class="infoboxnotealso" id="GUID-F4305362-3C73-46C8-8B59-71149B6E259C__GUID-128420C3-01C0-4A89-990E-B35D2E5AE859">
                        <p class="notep1">See Also:</p>
                        <p>For a detailed discussion about <code class="codeph">ARCHIVELOG</code> and <code class="codeph">NOARCHIVELOG</code> mode, see <a href="../admin/managing-archived-redo-log-files.html#ADMIN11330" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="ADMQS09114"></a><div class="props_rev_3"><a id="GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA" name="GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA"></a><h4 id="ADMQS-GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA" class="sect4"><span class="enumeration_section">9.2.2 </span>RMAN Repository
                  </h4>
                  <div>
                     <div><span>Oracle Recovery Manager (RMAN) maintains a record of database files and backups for each database on which it performs operations. This metadata is called the <span class="bold">RMAN repository</span>.</span> When you request recovery of a database, RMAN uses the repository metadata to choose the most efficient backups needed for this restore and recovery.
                     </div>
                     <p>The primary location for the RMAN repository for a database is its control file. The importance of this metadata for RMAN is one more reason why protecting your control file is a vital part of your backup strategy. In some installations, a second copy of the RMAN repository is stored in a schema called the <span class="bold">recovery catalog</span>. The recovery catalog is located in a separate database and can store metadata for multiple target databases.
                     </p>
                     <p>It is recommended that you use a recovery catalog. Because a recovery catalog stores metadata history for longer than the control file, you can perform a recovery that goes further back in time than the history in the control file. Also, if the target control file and all backups are lost, then the RMAN metadata in the recovery catalog can be used.</p>
                     <div class="infoboxnotealso" id="GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA__GUID-220DB5BF-2D26-4B1D-AC61-79E7C11A8191">
                        <p class="notep1">See Also:</p>
                        <p>For more information about creating and managing a recovery catalog, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89646" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="ADMQS0926"></a><div class="props_rev_3"><a id="GUID-0A8FC1FE-0994-49A7-9F22-2E3F5FAEAF68" name="GUID-0A8FC1FE-0994-49A7-9F22-2E3F5FAEAF68"></a><h4 id="ADMQS-GUID-0A8FC1FE-0994-49A7-9F22-2E3F5FAEAF68" class="sect4"><span class="enumeration_section">9.2.3 </span>Image Copies and Backup Sets
                  </h4>
                  <div>
                     <p>Database backups created by Oracle Recovery Manager (RMAN) are stored as image copies or backup sets.</p>
                     <p><span class="bold">Image copies</span> are exact byte-for-byte copies of files. You can create an image copy by copying a file at the operating system level. Unlike copying files at the operating system level, however, image copies created through RMAN are recorded in the RMAN repository so that RMAN can use these copies during database restore operations and recovery. RMAN can restore files only if they are recorded in the RMAN repository. RMAN can create image copies only on disk.
                     </p>
                     <p><span class="bold">Backup sets</span> are logical entities produced by the RMAN <code class="codeph">BACKUP</code> command. This command can produce one or more backup sets on disk or tape devices. Although image copies cannot use all RMAN features, their advantages are that you can apply incremental backups to them (synthetic full backups) and you can use them directly in place without first copying them, for very fast restores.
                     </p>
                     <p><a id="d37040e1196" class="indexterm-anchor"></a><a id="d37040e1200" class="indexterm-anchor"></a>Each backup set contains one or more physical files called <span class="bold">backup pieces</span>. A backup piece stores the backup of one or more database files in a compact RMAN-specific format. One advantage of backup sets is that RMAN uses unused block compression to save space in backing up data files. Only those blocks in the data files that have been used to store data are included in the backup set. Backup sets can also be compressed, encrypted, sent to tape, and use advanced unused-space compression that is not available with datafile copies.
                     </p>
                  </div>
               </div><a id="ADMQS09311"></a><div class="props_rev_3"><a id="GUID-74D6A06A-EC88-4CF0-B486-7B68DE4A78E4" name="GUID-74D6A06A-EC88-4CF0-B486-7B68DE4A78E4"></a><h4 id="ADMQS-GUID-74D6A06A-EC88-4CF0-B486-7B68DE4A78E4" class="sect4"><span class="enumeration_section">9.2.4 </span>Full Backups and Incremental Backups
                  </h4>
                  <div>
                     <p>A <span class="bold">full backup</span> of a data file includes all used blocks of the data file. A full backup can be either an image copy or backup set.
                     </p>
                     <p>An <span class="bold">incremental backup</span><a id="d37040e1249" class="indexterm-anchor"></a><a id="d37040e1253" class="indexterm-anchor"></a><a id="d37040e1257" class="indexterm-anchor"></a> copies only those blocks in a data file that change between backups. A <span class="bold">level 0 incremental backup</span>, which copies all blocks in the data file, is used as a starting point for an incremental backup strategy.
                     </p>
                     <p>A <span class="bold">level 1 incremental backup</span> copies only images of blocks that have changed since the previous level 0 or level 1 incremental backup. Level 1 backups can be <span class="bold">cumulative</span>, in which case all blocks changed since the most recent level 0 backup are included, or <span class="bold">differential</span>, in which case only blocks changed since the most recent level 0 or level 1 incremental backup are included. 
                     </p>
                     <p>Incremental backups at level 0 can be either backup sets or image copies, but incremental backups at level 1 can only be backup sets.</p>
                     <p>A typical incremental strategy makes level 1 backups at regular intervals such as once each day.</p>
                     <p>During recovery, Oracle Recovery Manager (RMAN) will automatically apply both incremental backups and redo logs as required, to recover the database to the exact point in time desired.</p>
                  </div>
               </div><a id="ADMQS09111"></a><div class="props_rev_3"><a id="GUID-74B864F7-2413-4142-BDB0-7B98BE960462" name="GUID-74B864F7-2413-4142-BDB0-7B98BE960462"></a><h4 id="ADMQS-GUID-74B864F7-2413-4142-BDB0-7B98BE960462" class="sect4"><span class="enumeration_section">9.2.5 </span>Consistent and Inconsistent Backups
                  </h4>
                  <div>
                     <div><span>A backup is either consistent or inconsistent. To make a consistent backup, your database must have been shut down cleanly and remain closed for the duration of the backup.</span> All committed changes are written to the data files during the shut down process, so the data files are in a transaction-consistent state. When you restore your data files from a consistent backup, you can open the database immediately.
                     </div>
                     <p>If the database is in <code class="codeph">ARCHIVELOG</code> mode, then you can make inconsistent backups that are recoverable using archived redo log files. Open database backups are inconsistent because the online redo log files contain changes not yet applied to the data files. The online redo log files must be archived and then backed up with the data files to ensure recoverability.
                     </p>
                     <p>Despite the name, an inconsistent backup is as robust a form of backup as a consistent backup. The advantage of making inconsistent backups is that you can back up your database while the database is open for updates.</p>
                  </div>
               </div><a id="ADMQS09112"></a><div class="props_rev_3"><a id="GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E" name="GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E"></a><h4 id="ADMQS-GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E" class="sect4"><span class="enumeration_section">9.2.6 </span>Media Recovery
                  </h4>
                  <div>
                     <div><span>If you restore the archived redo log files and data files, then you must perform media recovery before you can open the database.</span> Any database transactions in the archived redo log files not reflected in the data files are applied to the data files, bringing them to a transaction-consistent state before the database is opened.
                     </div>
                     <p>Media recovery requires a control file, data files (typically restored from backup), and online and archived redo log files containing changes since the time the data files were backed up. Media recovery is most often used to recover from media failure, such as the loss of a file or disk, or a user error, such as the deletion of the contents of a table. </p>
                     <p>Media recovery can be a complete recovery or a point-in-time recovery. Complete recovery can apply to individual datafiles, tablespaces, or the entire database. Point-in-time recovery applies to the whole database (and also sometimes to individual tablespaces, with automation help from Oracle Recover Manager (RMAN)).</p>
                     <p>In a complete recovery, you restore backup data files and apply all changes from the archived and online redo log files to the data files. The database is returned to its state at the time of failure and can be opened with no loss of data.</p>
                     <p><a id="d37040e1373" class="indexterm-anchor"></a>In a point-in-time recovery, you return a database to its contents at a user-selected time in the past. You restore a backup of data files created before the target time and a complete set of archived redo log files from backup creation through the target time. Recovery applies changes between the backup time and the target time to the data files. All changes after the target time are discarded.
                     </p>
                     <p><a id="d37040e1381" class="indexterm-anchor"></a><a id="d37040e1385" class="indexterm-anchor"></a>RMAN enables you to perform both a complete and a point-in-time recovery of your database. However, this documentation focuses on complete recovery.
                     </p>
                     <div class="infoboxnotealso" id="GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E__GUID-66ABA140-FA26-4C22-9A0E-BFF5844EC16D">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6" title="User-Directed Recovery enables you to use flashback features and perform restore operations and recovery procedures.">Performing User-Directed Recovery</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV80055" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for more detailed information about point-in-time recovery
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADMQS09113"></a><div class="props_rev_3"><a id="GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" name="GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D"></a><h4 id="ADMQS-GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" class="sect4"><span class="enumeration_section">9.2.7 </span>Fast Recovery Area
                  </h4>
                  <div>
                     <div><span>To simplify the management of backup and recovery files, you can create a fast recovery area for your database. The fast recovery area is an Oracle-managed directory, file system, or Oracle Automatic Storage Management disk group that provides a centralized storage location for backup and recovery files.</span> Oracle creates archived logs and flashback logs in the fast recovery area. Oracle Recovery Manager (RMAN) can store its backup sets and image copies in the fast recovery area, and it uses it when restoring files during media recovery. The fast recovery area also acts as a disk cache for tape.
                     </div>
                     <p>Oracle Database automatically manages this storage, deleting files that are no longer needed. Periodically copying backups to tape frees space in the fast recovery area for other files.</p>
                     <p>When you issue the RMAN <code class="codeph">BACKUP</code> command without specifying a backup destination, RMAN automatically backs up to the fast recovery area if it is configured.
                     </p>
                     <p>Oracle recommends that you configure a fast recovery area to simplify backup management. Except as noted, this documentation assumes the use of a recovery area.</p>
                     <div class="infoboxnotealso" id="GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D__GUID-53A5532C-FF2B-44E8-B2E4-55080CCC9AAB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42" title="Oracle recommends placing the fast recovery area on a separate storage device from the working set of database files. Otherwise, the storage device becomes a single point of failure for your database.">Planning Space Usage and Location for the Fast Recovery Area</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-D6A541BF-A878-4B45-AFAC-1E921554731E">Configuring the Fast Recovery Area</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS092"></a><div class="props_rev_3"><a id="GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" name="GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22"></a><h3 id="ADMQS-GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" class="sect3"><span class="enumeration_section">9.3 </span>Configuring Your Database for Basic Backup and Recovery
               </h3>
               <div>
                  <p>This section explains how to set up your database to take advantage of Oracle suggested backup strategies.</p>
                  <p>To take maximum advantage of Oracle Database features that automatically manage backup and recovery files and operations, configure your database as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use a fast recovery area, which automates storage management for most backup-related files, and specify it as an archived redo log file destination.</p>
                     </li>
                     <li>
                        <p>Run the database in <code class="codeph">ARCHIVELOG</code> mode so you can perform online backups and have data recovery options such as complete and point-in-time media recovery.
                        </p>
                     </li>
                  </ul>
                  <p>You must also set several policies governing which files are backed up, what format is used to store backups on disk, and when files become eligible for deletion.</p>
                  <p>In a multitenant environment, you must connect to the root and configure backup and recovery settings for the whole multitenant container database (CDB). These settings are applicable to the root and to all pluggable databases (PDBs) in the CDB.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42" title="Oracle recommends placing the fast recovery area on a separate storage device from the working set of database files. Otherwise, the storage device becomes a single point of failure for your database.">Planning Space Usage and Location for the Fast Recovery Area</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015" title="This section describes the credentials required to perform backup and recovery and how to grant the SYSBACKUP privilege to database users.">Configuring Users to Perform Backup and Recovery</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-192720EF-64C7-465B-982A-F8AABFD81DC1">Configuring Recovery Settings</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-7A2DBE07-0CF7-45AB-A946-0DB44BD762E3" title="You can configure several backup-related settings and policies.">Configuring Backup Settings</a></p>
                     </li>
                  </ul>
               </div><a id="ADMQS0921"></a><div class="props_rev_3"><a id="GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42" name="GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42"></a><h4 id="ADMQS-GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42" class="sect4"><span class="enumeration_section">9.3.1 </span>Planning Space Usage and Location for the Fast Recovery Area
                  </h4>
                  <div>
                     <p>Oracle recommends placing the fast recovery area on a separate storage device from the working set of database files. Otherwise, the storage device becomes a single point of failure for your database.</p>
                     <p>The amount of storage space to allocate for the fast recovery area depends on the size and activity levels of your database and on your recovery objectives. Your objectives dictate what kinds of backups you use, when you make them, and how long to keep them.</p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA" title="Space management in the fast recovery area is governed by a backup retention policy. A retention policy determines when files are obsolete, meaning that they are no longer needed to meet your data recovery objectives.">About the Backup Retention Policy and the Fast Recovery Area</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-43325063-E502-4D5B-A2B2-431366B57691" title="As a general rule, the larger the fast recovery area, the more useful it is.">About the Fast Recovery Area Size</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS09211"></a><div class="props_rev_3"><a id="GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA" name="GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA"></a><h5 id="ADMQS-GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA" class="sect5"><span class="enumeration_section">9.3.1.1 </span>About the Backup Retention Policy and the Fast Recovery Area
                     </h5>
                     <div>
                        <p>Space management in the fast recovery area is governed by a backup retention policy. A retention policy determines when files are obsolete, meaning that they are no longer needed to meet your data recovery objectives.</p>
                        <p>Retention policies can be based on redundancy of backups or on a recovery window (period of time).</p>
                        <p>When using a policy based on redundancy, you specify how many full or level 0 backups of each data file and control file that Oracle Recovery Manager (RMAN) keeps. If the number of full or level 0 backups for a specific data file or control file exceeds the redundancy setting, then RMAN considers the extra backups as obsolete.</p>
                        <p>When using a recovery policy based on a period of time (or window), you specify a time interval in days. Files are obsolete only when they are no longer needed for complete recovery or point-in-time recovery to a system change number (SCN) within the window. Therefore, a recovery retention policy based on a window is recommended.</p>
                        <p>The default retention policy is a redundancy of 1. Even after files in the fast recovery area are obsolete, they are typically not deleted until space is needed for new files. If space permits, files recently moved to tape remain on disk to avoid restoring them from tape for a recovery. The automatic deletion of obsolete files and files moved to tape from the fast recovery area makes it a convenient archiving destination. Other destinations require manual deletion of logs.</p>
                        <div class="infoboxnotealso" id="GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA__GUID-83A4E317-167C-46F5-8822-59DE15A4C9D5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8" title="You can set the backup policies that govern control file and server parameter file backups, tablespaces to exclude from an entire database backup, and the backup retention policy.">Configuring Backup Policy Settings</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../bradv/configuring-rman-client-basic.html#BRADV89436" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for examples of configuring a redundancy-based policy.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADMQS09212"></a><div class="props_rev_3"><a id="GUID-43325063-E502-4D5B-A2B2-431366B57691" name="GUID-43325063-E502-4D5B-A2B2-431366B57691"></a><h5 id="ADMQS-GUID-43325063-E502-4D5B-A2B2-431366B57691" class="sect5"><span class="enumeration_section">9.3.1.2 </span>About the Fast Recovery Area Size
                     </h5>
                     <div>
                        <div><span>As a general rule, the larger the fast recovery area, the more useful it is.</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV8183" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> explains how to size the fast recovery area. Ideally, the fast recovery area should be large enough for copies of the data files, control files, online redo log files, and archived redo log files needed to recover the database, and also the copies of these backup files that are kept based on the retention policy.
                        </div>
                        <p>If your backup strategy includes incremental backups, then add enough space to the fast recovery area for these files. If you can move some backups to tape, then you can reduce the size of the fast recovery area. Note that retrieving files from tape causes longer database restore operations and recovery times.</p>
                        <div class="infoboxnotealso" id="GUID-43325063-E502-4D5B-A2B2-431366B57691__GUID-2CD4BCA8-4D06-4BAF-ABFB-8BB518BC63B3">
                           <p class="notep1">See Also:</p>
                           <p><a href="../bradv/maintaining-rman-backups.html#BRADV89616" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about handling a full fast recovery area
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADMQS12424"></a><div class="props_rev_3"><a id="GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015" name="GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015"></a><h4 id="ADMQS-GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015" class="sect4"><span class="enumeration_section">9.3.2 </span>Configuring Users to Perform Backup and Recovery
                  </h4>
                  <div>
                     <p>This section describes the credentials required to perform backup and recovery and how to grant the <code class="codeph">SYSBACKUP</code> privilege to database users.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D" title="To perform backup and recovery tasks with Oracle Recovery Manager (RMAN), you must connect to the target database as a user with the SYSDBA or SYSBACKUP administrative privilege.">Credentials Required to Perform Backup and Recovery</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E" title="As a database administrator, you can grant the SYSBACKUP privilege to any database user. When you do so, an entry is made for that user in the password file.">Granting the SYSBACKUP Privilege</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS0922"></a><div class="props_rev_3"><a id="GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D" name="GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D"></a><h5 id="ADMQS-GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D" class="sect5"><span class="enumeration_section">9.3.2.1 </span>Credentials Required to Perform Backup and Recovery
                     </h5>
                     <div>
                        <div><span>To perform backup and recovery tasks with Oracle Recovery Manager (RMAN), you must connect to the target database as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> administrative privilege.</span> The <code class="codeph">SYSBACKUP</code> privilege encompasses all the privileges required to back up and recover the database. Those privileges are a subset of the privileges included in the <code class="codeph">SYSDBA</code> administrative privilege.
                        </div>
                        <p>The following types of users have the <code class="codeph">SYSBACKUP</code> privilege.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">SYSBACKUP</code> user.
                              </p>
                              <p>When you install the database, the <code class="codeph">SYSBACKUP</code> user, with the <code class="codeph">SYSBACKUP</code> privilege, is created automatically.
                              </p>
                           </li>
                           <li>
                              <p>Database users to whom you grant the <code class="codeph">SYSBACKUP</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>Database host users who are members of the OSBACKUPDBA operating system group—for operating system authentication.</p>
                              <p>The OSBACKUPDBA group is assigned to a specific operating system group during database installation. For example, on UNIX and Linux systems, the <code class="codeph">backupdba</code> group is typically designated as the OSBACKUPDBA group. Host users in this group can connect to the target database using operating system authentication; they do not need to be defined as a database user.
                              </p>
                           </li>
                        </ul>
                        <p>For the Oracle suggested backup strategy described in this documentation, you use operation system authentication. Consult your operating system documentation for instructions for creating host users and adding them to the OSBACKUPDBA group.</p>
                        <div class="infoboxnote" id="GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D__GUID-4952411E-07F7-497A-8117-8486DA7A7FB4">
                           <p class="notep1">Note:</p>
                           <p>In previous releases, you needed the <code class="codeph">SYSDBA</code> administrative privilege to perform backup and recovery tasks. Starting with Oracle Database 12<span class="italic">c</span>, it is recommended that you use the <code class="codeph">SYSBACKUP</code> administrative privilege for backup and recovery operations.
                           </p>
                           <p>Oracle recommends that you do not use the <code class="codeph">SYSBACKUP</code> user. Instead, create a user and grant the <code class="codeph">SYSBACKUP</code> privilege to that user.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D__GUID-36375F85-71C2-4AD4-84AD-9114E2178BBC">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="getting-started-with-database-administration.html#GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7" title="The section describes how to start SQL*Plus and connect to the database from both the command line and the Windows Start menu.">Starting SQL*Plus and Connecting to the Database</a>"</span> for more information about operating system authentication
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E" title="As a database administrator, you can grant the SYSBACKUP privilege to any database user. When you do so, an entry is made for that user in the password file.">Granting the SYSBACKUP Privilege</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADMQS12426"></a><a id="ADMQS12425"></a><div class="props_rev_3"><a id="GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E" name="GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E"></a><h5 id="ADMQS-GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E" class="sect5"><span class="enumeration_section">9.3.2.2 </span>Granting the SYSBACKUP Privilege
                     </h5>
                     <div>
                        <p>As a database administrator, you can grant the <code class="codeph">SYSBACKUP</code> privilege to any database user. When you do so, an entry is made for that user in the password file.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E__GUID-C3946446-1EB8-4BB5-9E0E-34072D1F190B">To grant the SYSBACKUP privilege to an existing user:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Log into Oracle Enterprise Manager Database Express (EM Express) as user <code class="codeph">SYS</code>. Be sure to select the <code class="codeph">as</code> <code class="codeph">sysdba</code> check box on the Login page.</span><div>
                                 <p>See <span class="q">"<a href="getting-started-with-database-administration.html#GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4" title="The Database Home page is the main database management page in Oracle Enterprise Manager Database Express (EM Express).">Accessing the Database Home Page</a>."</span></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>From the Security menu, select <span class="bold">Users</span>.</span></li>
                           <li class="stepexpand"><span>On the Users page, click the name of the user to whom you want to grant the privilege.</span></li>
                           <li class="stepexpand"><span>On the Account Summary page, in the Privileges tab, click <span class="bold">Edit</span>.</span></li>
                           <li class="stepexpand"><span>In the Alter Privileges dialog box, scroll to the <code class="codeph">SYSBACKUP</code> privilege in the left-hand list, select it, and then click the <span class="bold">Right-Arrow</span> (<span class="bold">&gt;</span>) button.</span><div>
                                 <p>The <code class="codeph">SYSBACKUP</code> privilege appears in the right-hand list.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Click <span class="bold">OK</span>.</span></li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E__GUID-3F022E50-95D0-44C9-880F-206F9D213433">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="administering-user-accounts-and-security.html#GUID-D44F6873-123C-480E-AF2D-20A4670DA70A" title="You can use Oracle Enterprise Manager Database Express (EM Express) to grant privileges and roles to a user account.">Example: Granting Privileges and Roles to a User Account</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="managing-database-storage-structures.html#GUID-925B95ED-DEE9-4551-B9CA-59D88C1D3A3C__CDEEAFDD">Password File</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADMQS12428"></a><a id="ADMQS12427"></a><div class="props_rev_3"><a id="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" name="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903"></a><h4 id="ADMQS-GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" class="sect4"><span class="enumeration_section">9.3.3 </span>Connecting to the Target Database Using RMAN
                  </h4>
                  <div>
                     <div><span>To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.</span> A <span class="bold">target database</span> is the Oracle database that must be backed up or restored using RMAN. Connections to the target database require the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> administrative privilege.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903__GUID-428DEA34-EB57-4728-95AD-E885A62AB8F5">To connect to the target database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Open a command window.</span></li>
                        <li class="stepexpand"><span>Ensure that the <code class="codeph">ORACLE_SID</code> environment variable is set to the system identifier (SID) of the database.</span><div><pre class="oac_no_warn" dir="ltr">$ ORACLE_SID=prod; export ORACLE_SID
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Do one of the following:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>To connect as a database user who was granted the <code class="codeph">SYSBACKUP</code> privilege, enter the following command:
                                    </p><pre class="oac_no_warn" dir="ltr">rman target '"<span class="italic">username</span> as sysbackup"'
</pre><p>The single and double quotes are required. Enter the user's password when prompted.</p>
                                 </li>
                                 <li>
                                    <p>To connect with operating system authentication, ensure that you are logged in to the database host as a user who is in the OSBACKUPDBA group (typically the <code class="codeph">backupdba</code> group on UNIX and Linux systems), and enter the following command:
                                    </p><pre class="oac_no_warn" dir="ltr">rman target /
</pre><p>When you do not explicitly specify <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code>, you are connected to the target database with the <code class="codeph">SYSDBA</code> privilege.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903__GUID-ED9FB9AE-B501-49DF-9D47-2E2B12135048">
                           <p class="notep1">Note:</p>
                           <p>You can start RMAN on one database host and connect to a target database on another host. This is known as connecting to a remote database, and it requires that:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You supply a net service name in the connect string.</p>
                              </li>
                              <li>
                                 <p>Your user name be entered in the password file of the remote database to connect as <code class="codeph">SYSBACKUP</code>.
                                 </p>
                              </li>
                           </ul>
                           <p>Connecting to a remote database is outside the scope of this documentation. For more information, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89391" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a></p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903__GUID-3F0C9A2C-1D38-43B2-BAA0-A11625C904A5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV671" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about connecting to multitenant container databases (CDBs) and pluggable databases (PDBs)
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89391" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for more information about connecting to the target database
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015" title="This section describes the credentials required to perform backup and recovery and how to grant the SYSBACKUP privilege to database users.">Configuring Users to Perform Backup and Recovery</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="configuring-the-network-environment.html#GUID-9ED3270A-682A-42D5-A56A-90308E5C5030" title="This section describes the elements involved in client connections to the database.">Client Connections</a>"</span> for information about net service names.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADMQS099"></a><div class="props_rev_3"><a id="GUID-192720EF-64C7-465B-982A-F8AABFD81DC1" name="GUID-192720EF-64C7-465B-982A-F8AABFD81DC1"></a><h4 id="ADMQS-GUID-192720EF-64C7-465B-982A-F8AABFD81DC1" class="sect4"><span class="enumeration_section">9.3.4 </span>Configuring Recovery Settings
                  </h4>
                  <div>
                     <p>This section explains how to configure settings used for instance recovery, media recovery, and fast recovery. It includes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-D6A541BF-A878-4B45-AFAC-1E921554731E">Configuring the Fast Recovery Area</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0">Enabling Archiving of Redo Log Files</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE">Enabling Flashback Database</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12430"></a><a id="ADMQS12429"></a><div class="props_rev_3"><a id="GUID-D6A541BF-A878-4B45-AFAC-1E921554731E" name="GUID-D6A541BF-A878-4B45-AFAC-1E921554731E"></a><h5 id="ADMQS-GUID-D6A541BF-A878-4B45-AFAC-1E921554731E" class="sect5"><span class="enumeration_section">9.3.4.1 </span>Configuring the Fast Recovery Area
                     </h5>
                     <div>
                        <div class="section">
                           <p>If you did not specify a location for the fast recovery area during installation, the installation process automatically configures a fast recovery area in the Oracle base directory. Oracle recommends, however, that the fast recovery area be located on a separate storage device from the database files.</p>
                           <p>You can modify the following initialization parameters to relocate the fast recovery area and to adjust its size:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">DB_RECOVERY_FILE_DEST</code></p>
                                 <p>Specifies the location of the fast recovery area. This can be a file system directory or an Oracle Automatic Storage Management (Oracle ASM) disk group, but not a raw disk.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code></p>
                                 <p>Specifies the size of the fast recovery area, in bytes. </p>
                              </li>
                           </ul>
                           <p>The <code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code> parameter must be set before the <code class="codeph">DB_RECOVERY_FILE_DEST</code> parameter.
                           </p>
                           <p>You can set these parameters without having to shut down and restart the database. In an Oracle Real Application Clusters (Oracle RAC) database, all instances must have the same values for these initialization parameters. The location must be on a cluster file system, Oracle ASM, or a shared directory.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-D6A541BF-A878-4B45-AFAC-1E921554731E__GUID-78E7E36B-2420-4327-9706-E4FDA38E9C0D">To configure the fast recovery area:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>Assume that you want to want to place the fast recovery area in the directory <code class="codeph">/u02/oracle/fra</code> and you want its size to have an upper limit of 10 GB.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect Oracle Recovery Manager (RMAN) to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Specify the size of the fast recovery area using the following command:</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DB_RECOVERY_FILE_DEST_SIZE = 10G;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Specify the location of the fast recovery area using the following command:</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DB_RECOVERY_FILE_DEST = '/u02/oracle/fra';
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-D6A541BF-A878-4B45-AFAC-1E921554731E__GUID-27C2174A-D335-4D6D-9AD4-F1686F1D5B0A">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" title="To simplify the management of backup and recovery files, you can create a fast recovery area for your database. The fast recovery area is an Oracle-managed directory, file system, or Oracle Automatic Storage Management disk group that provides a centralized storage location for backup and recovery files.">Fast Recovery Area</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-43325063-E502-4D5B-A2B2-431366B57691" title="As a general rule, the larger the fast recovery area, the more useful it is.">About the Fast Recovery Area Size</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12432"></a><a id="ADMQS12431"></a><div class="props_rev_3"><a id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0" name="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0"></a><h5 id="ADMQS-GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0" class="sect5"><span class="enumeration_section">9.3.4.2 </span>Enabling Archiving of Redo Log Files
                     </h5>
                     <div>
                        <div class="section">
                           <p>To back up the database while it is open, or to be able to perform complete or point-in-time media recovery, you must enable the archiving of redo log files. To do so, you place the database in <code class="codeph">ARCHIVELOG</code> mode. You can determine if archiving of redo logs is enabled for the target database using the following query:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT LOG_MODE FROM V$DATABASE;
</pre><p>If you do not specify a destination to which the database should write archived log files, the database writes them to the fast recovery area. You can specify a different destination, or you can specify that multiple copies of each archived log file be written, each to a different destination. Redundant copies help ensure that archived log files are always available in the event of a failure at one of the destinations.</p>
                           <p>The following procedure assumes that you want to place archived log files in the directory <code class="codeph">/u02/oracle/logfiles</code>, and redundant copies of archived log file in the directory <code class="codeph">/u03/oracle/logfiles</code>. The redundant copies are optional.
                           </p>
                           <div class="infoboxnotewarn" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-CD63CE97-6981-4283-AEE9-53E50F2CAF04">
                              <p class="notep1">WARNING:</p>
                              <p>You must ensure that there is sufficient disk space at all times for archived log file destinations. If the database encounters a disk full error as it attempts to archive a log file, a fatal error occurs and the database stops responding. You can check the alert log for a disk full message.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-07015741-8BC5-4624-9FD0-06190D50B61C">To enable archiving of redo log files:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect Oracle Recovery Manager (RMAN) to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Shut down the database.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Back up the database.</span><div>
                                 <p>It is recommended that you always back up a database before making any major change to the database.</p>
                                 <p>See <span class="q">"<a href="performing-backup-and-recovery.html#GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" title="Whole backups of a database include the complete contents of all data files of the database, plus the control file, archived redo log files, and server parameter file. With these files, you can perform a complete recovery.">Performing a Whole Database Backup</a>."</span></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Start the instance and mount the database (do not open the database). To enable archiving, the database must be mounted but not open.</span><div><pre class="oac_no_warn" dir="ltr">STARTUP MOUNT;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Enter the following command to set the first archived log file destination:</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET LOG_ARCHIVE_DEST_1 = 'LOCATION=/u02/oracle/logfiles';
</pre><div class="infoboxnote" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-0A281760-8CB8-4E03-81CC-863D9E24CEA5">
                                    <p class="notep1">Note:</p>
                                    <p>The directory must exist.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>(Optional) Enter the following command to set the second archived log file destination:</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET LOG_ARCHIVE_DEST_2 = 'LOCATION=/u03/oracle/logfiles';
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Change the database archiving mode and then open the database for normal operations.</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ARCHIVELOG;
ALTER DATABASE OPEN;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Shutdown the database.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Back up the database.</span><div>
                                 <p>Because changing the archiving mode updates the control file, it is recommended that you create a new backup.</p>
                                 <p>See <span class="q">"<a href="performing-backup-and-recovery.html#GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" title="Whole backups of a database include the complete contents of all data files of the database, plus the control file, archived redo log files, and server parameter file. With these files, you can perform a complete recovery.">Performing a Whole Database Backup</a>."</span></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Start up the database normally.</span><div><pre class="oac_no_warn" dir="ltr">STARTUP;
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-5A5F4B60-03B4-4D93-A63F-FAC2C218D39D">
                              <p class="notep1">Note:</p>
                              <p>You cannot use backups from <span class="italic">before</span> the switch to <code class="codeph">ARCHIVELOG</code> mode to restore and recover the database to a point in time <span class="italic">after</span> the switch. Thus, if you do not <span class="italic">immediately</span> make a backup after switching, then you are running your database without a valid backup. See <span class="q">"<a href="performing-backup-and-recovery.html#GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9" title="Oracle Recovery Manager (RMAN) enables you to perform the different types of backups that are required by your backup strategy. This section discusses creating a whole database backup.">Performing and Scheduling Backups Using RMAN</a>"</span> to learn how to make database backups.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-2B0C78F8-1487-4316-988C-A2B1999D4BEE">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=ADMIN00801" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about setting initialization parameters for archived log file destinations
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E" title="If you restore the archived redo log files and data files, then you must perform media recovery before you can open the database.">Media Recovery</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="monitoring-and-tuning-the-database.html#GUID-002351F6-5C0A-411B-9E1E-869878AC16A1" title="The Database Home page enables you to monitor the state and workload of your database. It provides a central place for general database state information and is updated periodically.">Monitoring General Database State and Workload</a>"</span> for information about the alert log
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12434"></a><a id="ADMQS12433"></a><div class="props_rev_3"><a id="GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE" name="GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE"></a><h5 id="ADMQS-GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE" class="sect5"><span class="enumeration_section">9.3.4.3 </span>Enabling Flashback Database
                     </h5>
                     <div>
                        <div class="section">
                           <p>To revert the entire database to a prior point in time, you can either revert the entire database to a prior point in time by restoring a backup and doing point-in-time recovery, or you can enable Flashback Database. When you enable Flashback Database, the database generates flashback logs in the fast recovery area. These logs are used to flash back the database to a specified time. During usual operation, the database occasionally logs images of data blocks to the flashback logs. The database automatically creates, deletes, and resizes flashback logs.</p>
                           <p>Use the following command to check if Flashback Database is enabled for your target database:</p><pre class="oac_no_warn" dir="ltr">SELECT FLASHBACK_ON FROM V$DATABASE;
</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE__GUID-7D90B358-68D2-496D-96F0-321FB7854F19">To enable Flashback Database:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Ensure that you configure a fast recovery area and that the database is running in <code class="codeph">ARCHIVELOG</code> mode.</span></li>
                           <li class="stepexpand"><span>Connect Oracle Recovery Manager (RMAN) to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Optionally, specify the length of the desired flashback window (in minutes) by setting the <code class="codeph">DB_FLASHBACK_RETENTION_TARGET</code> initialization parameter.</span><div>
                                 <p>The default value for this parameter is 1440 minutes, which is one day. The following command specifies that the flashback window must be 3 days.</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DB_FLASHBACK_RETENTION_TARGET=4320;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Enable the Flashback Database feature for the whole database using the following command:</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE FLASHBACK ON;
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>You can also execute the commands in this section by connecting to the target database using SQL*Plus instead of RMAN.</p>
                           <div class="infoboxnotealso" id="GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE__GUID-50FF51A4-C0B0-4991-9122-55C719E87F45">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-D6A541BF-A878-4B45-AFAC-1E921554731E">Configuring the Fast Recovery Area</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0">Enabling Archiving of Redo Log Files</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488" title="Unlike the other flashback features, Oracle Flashback Database operates at a physical level. When you use Flashback Database, your current data files revert to their contents at a previous time.">Rewinding a Database Using Oracle Flashback Database</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../bradv/configuring-rman-client-basic.html#BRADV8183" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for more details about configuring a fast recovery area
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADMQS0925"></a><div class="props_rev_3"><a id="GUID-7A2DBE07-0CF7-45AB-A946-0DB44BD762E3" name="GUID-7A2DBE07-0CF7-45AB-A946-0DB44BD762E3"></a><h4 id="ADMQS-GUID-7A2DBE07-0CF7-45AB-A946-0DB44BD762E3" class="sect4"><span class="enumeration_section">9.3.5 </span>Configuring Backup Settings
                  </h4>
                  <div>
                     <div><span>You can configure several backup-related settings and policies.</span> For example, you can determine how backups are stored, which data is backed up, and how long backups are retained. You can also configure settings to optimize backup performance.
                     </div>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1" title="For disk-based backups, you can configure the default format for backups, the location on disk where backups are stored, whether backup tasks run in parallel, and whether backups are compressed.">Configuring Backup Device Settings</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8" title="You can set the backup policies that govern control file and server parameter file backups, tablespaces to exclude from an entire database backup, and the backup retention policy.">Configuring Backup Policy Settings</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603" title="You can configure Oracle Recovery Manager (RMAN) to automatically backup the control file and server parameter file with every backup.">Configuring Automatic Backups for the Control File and Server Parameter File</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB" title="Block changing tracking improves the performance of incremental backups by recording changed blocks in the block change tracking file.">Enabling Block Change Tracking</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12220"></a><a id="ADMQS09255"></a><div class="props_rev_3"><a id="GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1" name="GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1"></a><h5 id="ADMQS-GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1" class="sect5"><span class="enumeration_section">9.3.5.1 </span>Configuring Backup Device Settings
                     </h5>
                     <div>
                        <p>For disk-based backups, you can configure the default format for backups, the location on disk where backups are stored, whether backup tasks run in parallel, and whether backups are compressed.</p>
                        <div class="section">
                           <p>For tape backups, you can configure settings such as the number of tape drives and whether backups are compressed. On most platforms, you must integrate a media manager with the Oracle database to use sequential media for storage. </p>
                           <p>You can use Oracle Secure Backup, which supports both database and file system backups to tape, as your media manager. Oracle Secure Backup provides the same services for Oracle Recovery Manager (RMAN) as other third-party SBT interfaces. This section assumes that you make only disk backups.</p>
                           <p>Use the RMAN <code class="codeph">CONFIGURE</code> command to configure backup device settings such as the default backup type, disk location to which database files are backed up, and parallelism. Use the RMAN <code class="codeph">SHOW ALL</code> command to view the currently configured settings.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1__GUID-B8312042-FA42-4B2D-B273-648DDBC84C26">To configure backup device settings:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Specify that the default device used to store backups is disk. The following command directs RMAN to store backups to disk.</span><div><pre class="oac_no_warn" dir="ltr">CONFIGURE DEFAULT DEVICE TYPE TO DISK;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Specify that the backups must be stored on disk in the form of backup sets. Also set the parallelism to 1.</span><div><pre class="oac_no_warn" dir="ltr">CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO BACKUPSET PARALLELISM 1;
</pre><p>Backups on disk can be stored in the form of backup sets or image copies. Image copies are exact copies of database files. They are not stored in an RMAN-specific format and can be used as-is to perform recovery. Backup sets use an RMAN-specific format. With backup sets, RMAN uses unused block compression to save space by backing up only the blocks that contain data. RMAN can also encrypt backups and create incremental backups.</p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1__GUID-0CE1C350-BD9E-44E9-B2C9-4215E394056D">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV002" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for more information about image copies and backup sets
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV132" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about setting tape as the default device
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12221"></a><a id="ADMQS09252"></a><div class="props_rev_3"><a id="GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8" name="GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8"></a><h5 id="ADMQS-GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8" class="sect5"><span class="enumeration_section">9.3.5.2 </span>Configuring Backup Policy Settings
                     </h5>
                     <div>
                        <p>You can set the backup policies that govern control file and server parameter file backups, tablespaces to exclude from an entire database backup, and the backup retention policy.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8__GUID-A1B1CFAC-E6A2-4D34-928D-3527DDF402E1">To configure the backup policy settings:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect Oracle Recovery Manager (RMAN) to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Configure RMAN to automatically backup the control files and the server parameter as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603" title="You can configure Oracle Recovery Manager (RMAN) to automatically backup the control file and server parameter file with every backup.">Configuring Automatic Backups for the Control File and Server Parameter File</a>"</span>.</span></li>
                           <li class="stepexpand"><span>Configure backup optimization to save space in the fast recovery area. Optimization excludes unchanged files, such as read-only files and offline data files, that were previously backed up.</span><div><pre class="oac_no_warn" dir="ltr">CONFIGURE BACKUP OPTIMIZATION ON;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Configure the retention policy to specify how long the backups and archived redo logs must be retained for media recovery.</span><div>
                                 <p>The following command specifies that the backups and archived logs must be retained for 31 days.</p><pre class="oac_no_warn" dir="ltr">CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 31 DAYS;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Specify that archived logs can be automatically deleted only when they have been backed up to tape or are obsolete based on the retention policy by using the following command.</span><div><pre class="oac_no_warn" dir="ltr">CONFIGURE ARCHIVELOG DELETION POLICY TO NONE;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Enable block change tracking as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB" title="Block changing tracking improves the performance of incremental backups by recording changed blocks in the block change tracking file.">Enabling Block Change Tracking</a>"</span>.</span></li>
                           <li class="stepexpand"><span>Optionally, specify the tablespaces that must be excluded from backups. </span><div>
                                 <p>Excluding certain tablespaces from backups, such as read-only tablespaces or tablespaces that contain temporary or test data, enables you to save space.</p>
                                 <p>The following command excludes the tablespace <code class="codeph">example</code> from backups.
                                 </p><pre class="oac_no_warn" dir="ltr">CONFIGURE EXCLUDE FOR TABLESPACE example;
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8__GUID-2488B91E-ED1C-4CB0-AE12-C5D806D78A7C">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV8400" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about other methods of configuring the retention policy
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12436"></a><a id="ADMQS12435"></a><div class="props_rev_3"><a id="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603" name="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603"></a><h5 id="ADMQS-GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603" class="sect5"><span class="enumeration_section">9.3.5.3 </span>Configuring Automatic Backups for the Control File and Server Parameter File
                     </h5>
                     <div>
                        <div><span>You can configure Oracle Recovery Manager (RMAN) to automatically backup the control file and server parameter file with every backup.</span> This is referred to as an <span class="bold">autobackup</span>. The server parameter file and control file are critical to the database and RMAN. Creating automatic backups of the control file enables RMAN to recover the database even if the current control file and server parameter file are lost. The control file and server parameter file are relatively small compared to typical data files and, therefore, backing them up frequently results in relatively little storage overhead.
                        </div>
                        <div class="section">
                           <p><a id="d37040e2829" class="indexterm-anchor"></a></p>
                           <p>If the database runs in <code class="codeph">ARCHIVELOG</code> mode, then an autobackup is also taken whenever the database structure metadata in the control file changes. 
                           </p>
                           <div class="infoboxnote" id="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603__GUID-6DB6E232-535C-4856-BDBC-64AB4E45C4C7">
                              <p class="notep1">Note:</p>
                              <p>For multitenant container databases (CDBs), the control file and server parameter file autobackups are performed by default.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603__GUID-460C8D86-15D6-4333-8D26-60E683E20E68">To configure automatic backups for the control file and server parameter file:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Enter the following command:</span><div><pre class="oac_no_warn" dir="ltr">CONFIGURE CONTROLFILE AUTOBACKUP ON;
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>RMAN uses a default format to assign names for these backups.</p>
                           <div class="infoboxnotealso" id="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603__GUID-5E5C74DF-6A67-4D18-81BE-7178F25861FB">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89352" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for more information about configuring the format for backups
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12438"></a><a id="ADMQS12437"></a><div class="props_rev_3"><a id="GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB" name="GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB"></a><h5 id="ADMQS-GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB" class="sect5"><span class="enumeration_section">9.3.5.4 </span>Enabling Block Change Tracking
                     </h5>
                     <div>
                        <div><span>Block changing tracking improves the performance of incremental backups by recording changed blocks in the block change tracking file.</span> During an incremental backup, instead of scanning all data blocks to identify which blocks have changed, RMAN uses this file to identify the changed blocks that need to be backed up.
                        </div>
                        <div class="section">
                           <p>You can enable block change tracking when the database is either open or mounted. This section assumes that you intend to create the block change tracking file as an Oracle Managed File in the database area, which is where the database maintains active database files such as data files, control files, and online redo log files.</p>
                           <p>To determine if block change tracking is enabled, check the <code class="codeph">STATUS</code> and <code class="codeph">FILENAME</code> columns in the <code class="codeph">V$BLOCK_CHANGE_TRACKING</code> view, using the following statement from the SQL or RMAN prompt:
                           </p><pre class="oac_no_warn" dir="ltr"><code class="codeph">SELECT status, filename FROM V$BLOCK_CHANGE_TRACKING;</code>
</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB__GUID-9685884E-D6CE-40B8-9C4F-05F8882B0850">To enable block change tracking:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Determine the current location of the database data files by submitting the following query:</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt; SELECT NAME FROM V$DATAFILE;
 
NAME
-----------------------------------------------
/u01/app/oracle/oradata/orcl/system01.dbf
/u01/app/oracle/oradata/orcl/example01.dbf
/u01/app/oracle/oradata/orcl/sysaux01.dbf
/u01/app/oracle/oradata/orcl/undotbs01.dbf
/u01/app/oracle/oradata/orcl/users01.dbf
</pre><p>In this example, the query results show that data files are stored in the file system in the directory /u01/app/oracle/oradata/orcl. Data files might also be stored in an Oracle Automatic Storage Management disk group.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Set the <code class="codeph">DB_CREATE_FILE_DEST</code> initialization parameter to specify the location where new database files, including the block change tracking file, must be stored. You can specify the same directory shown in query results from the previous step, with the final portion of the path—the database SID—stripped, as shown in the following example, or designate a new directory. Any directory that you specify must have the write permission for the Oracle software owner.</span><div>
                                 <p>The following command specifies that new database files must be stored in the directory /u01/app/oracle/oradata/:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DB_CREATE_FILE_DEST = '/u01/app/oracle/oradata';
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Enable block change tracking for the database using the following command:</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ENABLE BLOCK CHANGE TRACKING;
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB__GUID-39F4BB8D-A364-48C2-A69C-7BACBB9C04AA">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=REFRN30030" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">V$BLOCK_CHANGE_TRACKING</code> view.
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=REFRN10034" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">DB_CREATE_FILE_DEST</code> initialization parameter
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS093"></a><div class="props_rev_3"><a id="GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692" name="GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692"></a><h3 id="ADMQS-GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692" class="sect3"><span class="enumeration_section">9.4 </span>Backing Up Your Database
               </h3>
               <div>
                  <div><span>This section describes how to back up your database with Oracle Recovery Manager (RMAN). The Oracle suggested strategy for disk-only backups provides efficient daily backup of the database.</span> This strategy enables you to quickly return your database to its state at any point during the previous 24 hours. For more flexible backup options, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89341" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.
                  </div>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5CDE633A-D0EA-4E45-8902-05C891887F82" title="This section includes topics about incrementally updated backups and backup tags.">Additional Backup Concepts</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9" title="Oracle Recovery Manager (RMAN) enables you to perform the different types of backups that are required by your backup strategy. This section discusses creating a whole database backup.">Performing and Scheduling Backups Using RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A" title="Use the LIST command to view information about backups stored in the Oracle Recovery Manager (RMAN) repository.">Displaying Backups Stored in the RMAN Repository</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019" title="As part of your backup strategy, you should periodically check whether your backups are intact and can be used to meet your recoverability objectives.">Validating Backups and Testing Your Backup Strategy</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692__GUID-5DD8E7BA-4685-425D-B0C9-53AB27CB784F">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC" title="To back up your database means to make copies of your data files, control file, and archived redo log files (if your database runs in ARCHIVELOG mode). Restoring a database means copying the physical files that comprise the database from a backup medium, typically disk or tape, to their original or to new locations.">Database Backup and Recovery Concepts</a>"</span></p>
                  </div>
               </div><a id="ADMQS0931"></a><div class="props_rev_3"><a id="GUID-5CDE633A-D0EA-4E45-8902-05C891887F82" name="GUID-5CDE633A-D0EA-4E45-8902-05C891887F82"></a><h4 id="ADMQS-GUID-5CDE633A-D0EA-4E45-8902-05C891887F82" class="sect4"><span class="enumeration_section">9.4.1 </span>Additional Backup Concepts
                  </h4>
                  <div>
                     <p>This section includes topics about incrementally updated backups and backup tags.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-939FF149-01ED-4C18-B223-026F4AF18137" title="Oracle Recovery Manager (RMAN) enables you to apply level 1 incremental backups to an older image copy of your data files. You can roll forward the copy to the point in time of the most recent level 1 incremental backup.">Incrementally Updated Backups: Rolling Forward Image Copies of Data Files</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-B101B981-CD73-449A-A801-F17174B7A90F" title="A tag is a text string that identifies a backup, either uniquely or as part of a group of backups.">Backup Tags</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS09313"></a><div class="props_rev_3"><a id="GUID-939FF149-01ED-4C18-B223-026F4AF18137" name="GUID-939FF149-01ED-4C18-B223-026F4AF18137"></a><h5 id="ADMQS-GUID-939FF149-01ED-4C18-B223-026F4AF18137" class="sect5"><span class="enumeration_section">9.4.1.1 </span>Incrementally Updated Backups: Rolling Forward Image Copies of Data Files
                     </h5>
                     <div>
                        <div><span>Oracle Recovery Manager (RMAN) enables you to apply level 1 incremental backups to an older image copy of your data files. You can roll forward the copy to the point in time of the most recent level 1 incremental backup.</span> All blocks changed since the image copy was created are overwritten with their new contents as of the time of the last level 1 incremental backup. The effect is to roll forward the file in time, so that its contents are equivalent, for the purposes of database recovery, to an image copy of the data file made at the time of the last incremental level 1 backup.
                        </div>
                        <p>Incorporating incrementally updated backups into your backup strategy shortens expected recovery times. Media recovery to the present time or to a point in time in the recent past can begin at the time of the last level 1 backup applied, rather than at the time of the last full database backup.</p>
                        <div class="infoboxnotealso" id="GUID-939FF149-01ED-4C18-B223-026F4AF18137__GUID-FF88347B-2F12-4595-BD8C-F3B513F752FF">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" title="The Oracle suggested backup strategy is based on incrementally updated backups. This strategy starts with an image copy of each data file and then rolls forward the image copies each day by applying an incremental level 1 backup.To use the Oracle suggested backup strategy, ensure that:This backup script implements the Oracle suggested backup strategy, enabling quick recovery to any time in the preceding 24 hours. This script can be used to back up a non-CDB or a whole multitenant container database (CDB).It is recommended that you run the script manually, to check for errors, before scheduling it. Your manual run of the script will start day one of the strategy, creating an incremental level 0 image copy of all datafiles.The following procedure uses the cron utility to schedule daily database backups at 2:00 a.m.">Using the Oracle Suggested Backup Strategy</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="ADMQS09314"></a><div class="props_rev_3"><a id="GUID-B101B981-CD73-449A-A801-F17174B7A90F" name="GUID-B101B981-CD73-449A-A801-F17174B7A90F"></a><h5 id="ADMQS-GUID-B101B981-CD73-449A-A801-F17174B7A90F" class="sect5"><span class="enumeration_section">9.4.1.2 </span>Backup Tags
                     </h5>
                     <div>
                        <div><span>A <span class="bold">tag</span> is a text string that identifies a backup, either uniquely or as part of a group of backups.</span> All Oracle Recovery Manager (RMAN) backups, including incremental backups, are labeled with a tag. For example, if you performed a full database backup every Saturday, then you could use the tag <code class="codeph">FULL_SAT</code> to identify this backup.
                        </div>
                        <p>You can use tags to refer to specific backups in RMAN commands. For example, you could issue a command to move the latest <code class="codeph">FULL_SAT</code> backup to tape. If you do not specify a tag, then RMAN creates a unique tag automatically.
                        </p>
                        <p>Because you can use tags to refer to different groups of backups, you can create different routines in your backup strategy that do not interfere with each other. When you schedule a backup job and give the job a name, the job name is the tag.</p>
                     </div>
                  </div>
               </div><a id="ADMQS0932"></a><div class="props_rev_3"><a id="GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9" name="GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9"></a><h4 id="ADMQS-GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9" class="sect4"><span class="enumeration_section">9.4.2 </span>Performing and Scheduling Backups Using RMAN
                  </h4>
                  <div>
                     <p>Oracle Recovery Manager (RMAN) enables you to perform the different types of backups that are required by your backup strategy. This section discusses creating a whole database backup.</p>
                     <p>You can also individually back up data files, control files, and archived redo log files. You can use some advanced RMAN features such as encrypting backups. For more information about these topics, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV8003" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9__GUID-422C8AB5-50FB-4439-B033-16E68198CC44">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV428" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about backing up multitenant conainer databases (CDBs) and pluggable databases (PDBs)
                        </p>
                     </div>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" title="Whole backups of a database include the complete contents of all data files of the database, plus the control file, archived redo log files, and server parameter file. With these files, you can perform a complete recovery.">Performing a Whole Database Backup</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" title="The Oracle suggested backup strategy is based on incrementally updated backups. This strategy starts with an image copy of each data file and then rolls forward the image copies each day by applying an incremental level 1 backup.To use the Oracle suggested backup strategy, ensure that:This backup script implements the Oracle suggested backup strategy, enabling quick recovery to any time in the preceding 24 hours. This script can be used to back up a non-CDB or a whole multitenant container database (CDB).It is recommended that you run the script manually, to check for errors, before scheduling it. Your manual run of the script will start day one of the strategy, creating an incremental level 0 image copy of all datafiles.The following procedure uses the cron utility to schedule daily database backups at 2:00 a.m.">Using the Oracle Suggested Backup Strategy</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-FBF51D7D-6BF2-42E0-A822-CC565A4B7549" title="When using the Oracle suggested backup strategy, the retention is dictated by the recovery and not by the configured retention.">About the Oracle Suggested Backup Strategy and Retention</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E" title="Customized strategies include backing up selected tablespaces, datafiles, and archived redo logs. Create a script that contains the commands required to implement your customized backup task and then schedule this backup task using the cron utility.">Scheduling Miscellaneous Backup Tasks</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12222"></a><a id="ADMQS12223"></a><a id="ADMQS09321"></a><div class="props_rev_3"><a id="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" name="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547"></a><h5 id="ADMQS-GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" class="sect5"><span class="enumeration_section">9.4.2.1 </span>Performing a Whole Database Backup
                     </h5>
                     <div>
                        <p>Whole backups of a database include the complete contents of all data files of the database, plus the control file, archived redo log files, and server parameter file. With these files, you can perform a complete recovery.</p>
                        <div class="section">
                           <p>While whole database backups can be an important element in your overall backup strategy, they are also a required step in some situations, such as when you enable or disable <code class="codeph">ARCHIVELOG</code> mode (see <span class="q">"<a href="performing-backup-and-recovery.html#GUID-192720EF-64C7-465B-982A-F8AABFD81DC1">Configuring Recovery Settings</a>"</span>). This section explains how to make whole database backups, both offline and online, to disk. Typically, you want to perform online backups to maximize database availability.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547__GUID-007D3A58-8B57-40E9-883C-1BF99A661FAD">To perform a whole database backup when the database is open:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></p>
                              </li>
                              <li>
                                 <p>Ensure that your database is in <code class="codeph">ARCHIVELOG</code> mode as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0">Enabling Archiving of Redo Log Files</a>."</span></p>
                                 <p>You can make online backups only if your database is running in <code class="codeph">ARCHIVELOG</code> mode.
                                 </p>
                              </li>
                              <li>
                                 <p>Back up the database, along with archived redo logs by using the following command:</p><pre class="oac_no_warn" dir="ltr">BACKUP DATABASE PLUS ARCHIVELOG;
</pre></li>
                           </ol>
                           <p>This backup is created on the default device that you configured for storing backups. If you did not configure a default device, then the backup is created in the fast recovery area. RMAN uses a default format while naming the backup sets that comprise the backup.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547__GUID-A858F994-A01D-4873-80A4-196E275CF54F">To perform a whole database backup when the database is closed:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Shut down the database and then mount the database using the following commands.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Back up the database using the following command:</span><div><pre class="oac_no_warn" dir="ltr">BACKUP DATABASE;
</pre><p>While backing up a database that is closed, you need not back up the archived log files because the database is in a consistent state at the time of backup. Therefore, no media recovery is required if you restore the database from this backup.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Open the database after the backup is complete.</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN;
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547__GUID-0161588C-74C8-4D2F-8B93-0A8DB21636B9">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV428" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about performing backups of multitenant container databases (CDBs) and pluggable databases (PDBs)
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3" title="Backup reports contain summary and detailed information about past backup jobs run by Oracle Recovery Manager (RMAN).">Displaying Backup Reports</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" title="To simplify the management of backup and recovery files, you can create a fast recovery area for your database. The fast recovery area is an Oracle-managed directory, file system, or Oracle Automatic Storage Management disk group that provides a centralized storage location for backup and recovery files.">Fast Recovery Area</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS09322"></a><div class="props_rev_3"><a id="GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" name="GUID-D77B0526-13F6-4570-9C74-6436B76DEA43"></a><h5 id="ADMQS-GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" class="sect5"><span class="enumeration_section">9.4.2.2 </span>Using the Oracle Suggested Backup Strategy
                     </h5>
                     <div>
                        <div class="section">
                           <p>The Oracle suggested backup strategy is a scheduled disk backup strategy that protects your data and provides efficient recoverability to any point in the user-specified recovery window (time period). It leverages the incrementally updated backup features to provide faster backups than whole database backups, and faster recoverability than is possible by applying multiple incremental backups to the last full backup.</p>
                           <p>After reading the introductory <span class="q">"<a href="performing-backup-and-recovery.html#GUID-6C74BAA8-9EE5-4446-AF92-F098BD19170A" title="The Oracle suggested backup strategy is based on incrementally updated backups. This strategy starts with an image copy of each data file and then rolls forward the image copies each day by applying an incremental level 1 backup.">About the Oracle Suggested Backup Strategy</a>"</span> topic, complete the following tasks described in this section to schedule a daily backup that implements the Oracle suggested backup strategy:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="performing-backup-and-recovery.html#GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1" title="To use the Oracle suggested backup strategy, ensure that:">Task 1 - Preparing to Use the Oracle Suggested Backup Strategy</a></p>
                              </li>
                              <li>
                                 <p><a href="performing-backup-and-recovery.html#GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D" title="This backup script implements the Oracle suggested backup strategy, enabling quick recovery to any time in the preceding 24 hours. This script can be used to back up a non-CDB or a whole multitenant container database (CDB).">Task 2 - Creating the Backup Script—UNIX and Linux</a></p>
                              </li>
                              <li>
                                 <p><a href="performing-backup-and-recovery.html#GUID-5C45D54D-B459-4449-B59C-D0213C024390" title="It is recommended that you run the script manually, to check for errors, before scheduling it. Your manual run of the script will start day one of the strategy, creating an incremental level 0 image copy of all datafiles.">Task 3 - Testing the Backup Script</a></p>
                              </li>
                              <li>
                                 <p><a href="performing-backup-and-recovery.html#GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315" title="The following procedure uses the cron utility to schedule daily database backups at 2:00 a.m.">Task 4 - Scheduling the Daily Backup—UNIX and Linux</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-D77B0526-13F6-4570-9C74-6436B76DEA43__GUID-0C9180C0-7411-40E5-86DF-870A6D2CE271">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-939FF149-01ED-4C18-B223-026F4AF18137" title="Oracle Recovery Manager (RMAN) enables you to apply level 1 incremental backups to an older image copy of your data files. You can roll forward the copy to the point in time of the most recent level 1 incremental backup.">Incrementally Updated Backups: Rolling Forward Image Copies of Data Files</a>"</span></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADMQS12224"></a><div class="props_rev_3"><a id="GUID-6C74BAA8-9EE5-4446-AF92-F098BD19170A" name="GUID-6C74BAA8-9EE5-4446-AF92-F098BD19170A"></a><h6 id="ADMQS-GUID-6C74BAA8-9EE5-4446-AF92-F098BD19170A" class="sect6"><span class="enumeration_section">9.4.2.2.1 </span>About the Oracle Suggested Backup Strategy
                        </h6>
                        <div>
                           <p>The Oracle suggested backup strategy is based on incrementally updated backups. This strategy starts with an image copy of each data file and then rolls forward the image copies each day by applying an incremental level 1 backup.</p>
                           <p>For each data file, the strategy calls for backups as follows:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>At the beginning of day 1 of the strategy (the time the first scheduled job actually runs), Oracle Recovery Manager (RMAN) creates an incremental level 0 image copy. It contains the data file contents at the beginning of day 1. </p>
                                 <p>If a recovery is required, then the archived redo log files from day 1 can be used to recover to any point during day 1.</p>
                              </li>
                              <li>
                                 <p>At the beginning of day 2, RMAN creates a differential incremental level 1 backup that contains the blocks changed during day 1.</p>
                                 <p>If a recovery is required, then RMAN can apply this incremental level 1 to roll forward the level 0 backup to the beginning of day 2. RMAN can use archived redo log files to recover to any point during day 2.</p>
                              </li>
                              <li>
                                 <p>At the beginning of each day <span class="italic">n </span>for day 3 and onward, RMAN applies the level 1 backup from the beginning of day <span class="italic">n</span>-1 to the level 0 backup. This action brings the data file copy to its state at the beginning of day <span class="italic">n</span>-1. Then, RMAN creates a new level 1 backup that contains the blocks changed during day <span class="italic">n</span>-1.
                                 </p>
                                 <p>If a recovery is required, then RMAN can apply this incremental level 1 backup to the data file rolled forward on day <span class="italic">n</span>-1 to the beginning of day <span class="italic">n</span>. RMAN can use archived redo log files to recover the database to any point during day <span class="italic">n</span>. 
                                 </p>
                              </li>
                           </ul>
                           <p>In this Oracle suggested backup strategy, the data file image copies and the level 1 incremental backups share the same tag. You can safely implement other backup strategies without interfering with the Oracle suggested backup strategy.</p>
                           <p>Oracle suggested backup strategies also use tape backups in addition to disk backups, but these are beyond the scope of this section.</p>
                        </div>
                     </div><a id="ADMQS12439"></a><div class="props_rev_3"><a id="GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1" name="GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1"></a><h6 id="ADMQS-GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1" class="sect6"><span class="enumeration_section">9.4.2.2.2 </span>Task 1 - Preparing to Use the Oracle Suggested Backup Strategy
                        </h6>
                        <div>
                           <p>To use the Oracle suggested backup strategy, ensure that:</p>
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The database is in <code class="codeph">ARCHIVELOG</code> mode.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The fast recovery area size is configured, or a default device for storing backups is configured.</p>
                                 </li>
                                 <li>
                                    <p>You have added a database host user to the OSBACKUPDBA operating system group, for operating system authentication.</p>
                                    <div class="infoboxnotealso" id="GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1__GUID-E9F19E3C-EAF4-4B8F-9C29-A5EB59D042B6">
                                       <p class="notep1">See Also:</p>
                                       <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" title="This section explains how to set up your database to take advantage of Oracle suggested backup strategies.">Configuring Your Database for Basic Backup and Recovery</a>"</span></p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMQS12440"></a><div class="props_rev_3"><a id="GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D" name="GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D"></a><h6 id="ADMQS-GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D" class="sect6"><span class="enumeration_section">9.4.2.2.3 </span>Task 2 - Creating the Backup Script—UNIX and Linux
                        </h6>
                        <div>
                           <p>This backup script implements the Oracle suggested backup strategy, enabling quick recovery to any time in the preceding 24 hours. This script can be used to back up a non-CDB or a whole multitenant container database (CDB).</p>
                           <div class="section">
                              <p><span class="bold">To create the backup script for UNIX and Linux</span>:
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Start a text editor and create and save a file with the following contents. Save the file in a directory that is accessible to the Oracle Database software and on which the Oracle software owner has the read permission.</p>
                                    <div class="infoboxnote" id="GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D__GUID-E6FC7183-16AB-4A9C-BDEC-454820F48A89">
                                       <p class="notep1">Note:</p>
                                       <p>In the following script, substitute the correct values for your installation for the <code class="codeph">ORACLE_HOME</code> and <code class="codeph">ORACLE_SID</code> environment variables.
                                       </p>
                                    </div><pre class="oac_no_warn" dir="ltr">#!/bin/sh
export ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1
export ORACLE_SID=orcl
PATH=$ORACLE_HOME/bin:$PATH
rman &lt;&lt;EOF
connect target /
RUN {
 ALLOCATE CHANNEL disk_iub DEVICE TYPE DISK;
 RECOVER COPY OF DATABASE WITH TAG daily_iub;
 BACKUP INCREMENTAL LEVEL 1 FOR RECOVER OF COPY WITH TAG daily_iub DATABASE;
}
exit
EOF</pre></li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMQS12441"></a><div class="props_rev_3"><a id="GUID-5C45D54D-B459-4449-B59C-D0213C024390" name="GUID-5C45D54D-B459-4449-B59C-D0213C024390"></a><h6 id="ADMQS-GUID-5C45D54D-B459-4449-B59C-D0213C024390" class="sect6"><span class="enumeration_section">9.4.2.2.4 </span>Task 3 - Testing the Backup Script
                        </h6>
                        <div>
                           <p>It is recommended that you run the script manually, to check for errors, before scheduling it. Your manual run of the script will start day one of the strategy, creating an incremental level 0 image copy of all datafiles.</p>
                           <div class="section">
                              <p><span class="bold">To test the backup script</span>:
                              </p>
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>Log in to the database host as a user who is a member of the OSBACKUPDBA operating system group (typically the <code class="codeph">backupdba</code> group).</span></li>
                              <li class="stepexpand"><span>In a command window, enter the following command:</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">full-script-path</span>
</pre><p>where <span class="italic"><code class="codeph">full-script-path</code></span> is the full path and file name of the script you created in Task 2.
                                    </p>
                                    <p>For example, if your script is in the file /u01/app/oracle/rman/daily_backup.sh, then enter this command:</p><pre class="oac_no_warn" dir="ltr">/u01/app/oracle/rman/daily_backup.sh
</pre></div>
                              </li>
                           </ol>
                           <div class="section">
                              <p>The script starts Oracle Recovery Manager (RMAN), which starts the backup. The output from RMAN includes warning messages similar to the following:</p><pre class="oac_no_warn" dir="ltr">...
no copy of datafile 1 found to recover
no copy of datafile 2 found to recover
...
no parent backup or copy of datafile 1 found
no parent backup or copy of datafile 2 found
...
</pre><p>These messages are normal for the first run of the script.</p>
                              <div class="infoboxnote" id="GUID-5C45D54D-B459-4449-B59C-D0213C024390__GUID-B1FCF2CF-A40B-418D-9EE2-A7D099ECF594">
                                 <p class="notep1">Note:</p>
                                 <p>For the second run of the script, the output includes only these warning messages:</p><pre class="oac_no_warn" dir="ltr">no copy of datafile 1 found to recover
no copy of datafile 2 found to recover
...
</pre><p>Again, these messages are normal. For the third and subsequent script runs, no further warning messages are output.</p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMQS09325"></a><div class="props_rev_3"><a id="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315" name="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315"></a><h6 id="ADMQS-GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315" class="sect6"><span class="enumeration_section">9.4.2.2.5 </span>Task 4 - Scheduling the Daily Backup—UNIX and Linux
                        </h6>
                        <div>
                           <p>The following procedure uses the <code class="codeph">cron</code> utility to schedule daily database backups at 2:00 a.m.
                           </p>
                           <div class="section">
                              <p><span class="bold">To schedule the Oracle-suggested disk backup strategy</span>:
                              </p>
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>Ensure that you are logged in to the database host as a user who is a member of the OSBACKUPDBA operating system group (typically the <code class="codeph">backupdba</code> group).</span><div>
                                    <p>The <code class="codeph">cron</code> job will run as this host user.
                                    </p>
                                 </div>
                              </li>
                              <li class="stepexpand"><span>Start a text editor, and create and save a file with the following contents into your home directory. Name the file .crontab. (Note the period at the front of the file name.)</span><div><pre class="oac_no_warn" dir="ltr">MAILTO=first.last@example.com
# MI HH DD MM DAY CMD
  00  2  *  *  *  <span class="italic">full-script-path</span>
</pre><p>where <span class="italic"><code class="codeph">full-script-path</code></span> is the full path and file name of the script you created in Task 2.
                                    </p>
                                    <p>For example, if the script is in the file /u01/app/oracle/rman/daily_backup.sh, then the .crontab file must contain:</p><pre class="oac_no_warn" dir="ltr">MAILTO=first.last@example.com
# MI HH DD MM DAY CMD
  00  2  *  *  *  /u01/app/oracle/rman/daily_backup.sh</pre><div class="infoboxnote" id="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315__GUID-3D5A8BE7-83B4-4800-8806-F2374EE9109F">
                                       <p class="notep1">Note:</p>
                                       <p>Supply the desired e-mail address in the <code class="codeph">MAILTO</code> line. This line is optional. Content written to stdout by the <code class="codeph">cron</code> job is e-mailed to this address at the completion of the job.
                                       </p>
                                    </div>
                                 </div>
                              </li>
                              <li class="stepexpand"><span>In a command window, change directory to your home directory and enter the following command:</span><div><pre class="oac_no_warn" dir="ltr">crontab .crontab
</pre><p>This creates a crontab file for this user from the contents of .crontab.</p>
                                    <div class="infoboxnote" id="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315__GUID-503726AA-B91D-4D3F-94B2-E01C0CF89DF0">
                                       <p class="notep1">Caution:</p>
                                       <p>The existing crontab file for this user is overwritten. If you want to preserve the contents of this file and add this new job, use this command, which enables you to edit the existing file:</p><pre class="oac_no_warn" dir="ltr">crontab -e</pre></div>
                                 </div>
                              </li>
                              <li class="stepexpand"><span>(Optional) Check the contents of the crontab file for this user with the following command:</span><div><pre class="oac_no_warn" dir="ltr">crontab -l

MAILTO=first.last@example.com
# MI HH DD MM DAY CMD
  00  2  *  *  *  /u01/app/oracle/rman/daily_backup.sh</pre></div>
                              </li>
                           </ol>
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315__GUID-3CD92BD5-27FF-483A-9917-D8EF8FE218DA">
                                 <p class="notep1">See Also:</p>
                                 <p>Your operating system documentation for a description of the crontab command and crontab files</p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="ADMQS12468"></a><div class="props_rev_3"><a id="GUID-FBF51D7D-6BF2-42E0-A822-CC565A4B7549" name="GUID-FBF51D7D-6BF2-42E0-A822-CC565A4B7549"></a><h5 id="ADMQS-GUID-FBF51D7D-6BF2-42E0-A822-CC565A4B7549" class="sect5"><span class="enumeration_section">9.4.2.3 </span>About the Oracle Suggested Backup Strategy and Retention
                     </h5>
                     <div>
                        <div><span>When using the Oracle suggested backup strategy, the retention is dictated by the recovery and not by the configured retention.</span> In order to get retention beyond 24 hours, you must change the RECOVER statement to something like:
                        </div><pre class="oac_no_warn" dir="ltr">RECOVER COPY OF DATABASE WITH TAG 'ORA_OEM_LEVEL_0' UNTIL TIME "SYSDATE-4";
</pre><p>The configured retention is not honored for either the retention or obsolete settings. So when using the Oracle suggested backup strategy, Oracle recommends that the default setting remains unchanged to avoid confusion:</p><pre class="oac_no_warn" dir="ltr">CONFIGURE RETENTION POLICY TO REDUNDANCY 1; # default</pre></div>
                  </div><a id="ADMQS09323"></a><div class="props_rev_3"><a id="GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E" name="GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E"></a><h5 id="ADMQS-GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E" class="sect5"><span class="enumeration_section">9.4.2.4 </span>Scheduling Miscellaneous Backup Tasks
                     </h5>
                     <div>
                        <div>In addition to implementing the Oracle suggested backup strategy described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" title="The Oracle suggested backup strategy is based on incrementally updated backups. This strategy starts with an image copy of each data file and then rolls forward the image copies each day by applying an incremental level 1 backup.To use the Oracle suggested backup strategy, ensure that:This backup script implements the Oracle suggested backup strategy, enabling quick recovery to any time in the preceding 24 hours. This script can be used to back up a non-CDB or a whole multitenant container database (CDB).It is recommended that you run the script manually, to check for errors, before scheduling it. Your manual run of the script will start day one of the strategy, creating an incremental level 0 image copy of all datafiles.The following procedure uses the cron utility to schedule daily database backups at 2:00 a.m.">Using the Oracle Suggested Backup Strategy</a>,"</span> you can use customized backup strategies that back up certain parts of your database.  <span>Customized strategies include backing up selected tablespaces, datafiles, and archived redo logs. Create a script that contains the commands required to implement your customized backup task and then schedule this backup task using the <code class="codeph">cron</code> utility.</span></div>
                        <p> </p>
                        <div class="infoboxnotealso" id="GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E__GUID-297BC868-7BFE-425F-9EDC-982598431E7A">
                           <p class="notep1">See Also:</p>
                           <p><a href="../bradv/backing-up-database.html#BRADV8003" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about performing customized backups 
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADMQS12443"></a><a id="ADMQS12444"></a><a id="ADMQS12442"></a><div class="props_rev_3"><a id="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A" name="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A"></a><h4 id="ADMQS-GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A" class="sect4"><span class="enumeration_section">9.4.3 </span>Displaying Backups Stored in the RMAN Repository
                  </h4>
                  <div>
                     <div><span>Use the <code class="codeph">LIST</code> command to view information about backups stored in the Oracle Recovery Manager (RMAN) repository.</span> The information includes backups of data files, individual tablespaces, archived redo log files, and control files. You can also use this command to display information about expired and obsolete backups.
                     </div>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A__GUID-7D8FE467-53EC-4BC0-B4E9-5B24698876B3">
                           <p class="notep1">See Also:</p>
                           <p><a href="../bradv/reporting-rman-operations.html#BRADV8136" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for more information about the <code class="codeph">LIST</code> command
                           </p>
                        </div>
                        <p>The syntax used to display backups of multitenant container databases (CDBs) and pluggable databases (PDBs), which has minor variations from that used for non-CDBs, is described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV631" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A__GUID-290E4F37-97F3-48A3-B5DF-E8D1FD274C46">To display all backups:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></p>
                           </li>
                           <li>
                              <p>Use the <code class="codeph">LIST</code> command to display a summary of all the backups, both backup sets and image copies.
                              </p><pre class="oac_no_warn" dir="ltr">LIST BACKUP SUMMARY;

List of Backups
===============
Key     TY LV S Device Type Completion Time #Pieces #Copies Compressed Tag
------- -- -- - ----------- --------------- ------- ------- ---------- ---
12      B  F  A DISK        28-MAR-12       1       1       NO         TAG20120328T051810
13      B  F  A DISK        28-MAR-12       1       1       NO         TAG20120328T051811
14      B  F  A DISK        28-MAR-12       1       1       NO         TAG20120328T051921
15      B  F  A DISK        28-MAR-12       1       1       NO         TAG20120328T051936
16      B  F  A DISK        28-MAR-12       1       1       NO         TAG20120328T052241
</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A__GUID-89A71C1B-C057-45F2-B3CC-C55DD59ACFE0">To display selected backups:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                        <li class="stepexpand"><span>Use the <code class="codeph">LIST BACKUP</code> or <code class="codeph">LIST COPY</code> command to display the specified backups, both backup sets and image copies.</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>For example, to list the backups of a particular datafile:</p><pre class="oac_no_warn" dir="ltr">LIST BACKUP OF DATAFILE 3;
LIST COPY OF DATAFILE '/orcl/oradata/trgt/system01.dbf';
</pre></li>
                                 <li>
                                    <p>To display backups sorted by the type of database file:</p><pre class="oac_no_warn" dir="ltr">LIST BACKUP BY FILE;

List of Datafile Backups
========================
File Key     TY LV S Ckp SCN    Ckp Time  #Pieces #Copies Compressed Tag
---- ------- -  -- - ---------- --------- ------- ------- ---------- ---
1    14      B  F  A 723546     28-MAR-12 1       1       NO         TAG20120328T051921
2    14      B  F  A 723546     28-MAR-12 1       1       NO         TAG20120328T051921
3    14      B  F  A 723546     28-MAR-12 1       1       NO         TAG20120328T051921
4    14      B  F  A 723546     28-MAR-12 1       1       NO         TAG20120328T051921
5    14      B  F  A 723546     28-MAR-12 1       1       NO         TAG20120328T051921

List of Control File Backups
===========================
CF Ckp SCN Ckp Time  BS Key  S #Pieces #Copies Compressed Tag
---------- --------- ------- - ------- ------- ---------- ---
723835     28-MAR-12 16      A 1       1       NO         TAG20120328T052241
723557     28-MAR-12 15      A 1       1       NO         TAG20120328T051936
723490     28-MAR-12 13      A 1       1       NO         TAG20120328T051811
</pre></li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS0933"></a><div class="props_rev_3"><a id="GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019" name="GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019"></a><h4 id="ADMQS-GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019" class="sect4"><span class="enumeration_section">9.4.4 </span>Validating Backups and Testing Your Backup Strategy 
                  </h4>
                  <div>
                     <div><span>As part of your backup strategy, you should periodically check whether your backups are intact and can be used to meet your recoverability objectives.</span> You can validate your backups in the following ways:
                     </div>
                     <p><a id="d37040e4043" class="indexterm-anchor"></a>You can validate your backups in the following ways:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Select specific backup sets or image copies in Oracle Recovery Manager (RMAN) and validate them. This technique indicates if a backup exists and can be restored. For this form of validation, use the steps described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D" title="Validating specific backups checks whether these backups exist and can be restored. It does not test whether the set of available backups meet your recoverability goals.">Validating Selected Backups</a>."</span></p>
                        </li>
                        <li>
                           <p>Specify database files and let RMAN select backups to use when restoring those files, as it would for an actual restore operation. This technique ensures that your available backups are sufficient to restore the database. For this form of validation, use the steps described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD" title="You can test whether a sufficient set of backups exists that can be used to restore the specified database files.">Validating Backups for Restore Operations</a>."</span></p>
                           <div class="infoboxnote" id="GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019__GUID-E3DDA227-C49A-4901-A418-8706338F5253">
                              <p class="notep1">Note:</p>
                              <p>Validating backups stored on tape can be time-consuming because the entire backup is read from tape.</p>
                           </div>
                        </li>
                     </ul>
                     <p>You can perform both forms of validation using RMAN. You should incorporate both forms of validation into your backup strategy to ensure that your recoverability goals are met by your available backups.</p>
                     <div class="infoboxnotealso" id="GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019__GUID-098E1D89-9B48-4893-9161-29EB1E7370B6">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV635" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about validating backups of multitenant container databases (CDBs) and pluggable databases (PDBs)
                        </p>
                     </div>
                  </div><a id="ADMQS12227"></a><a id="ADMQS09525"></a><div class="props_rev_3"><a id="GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D" name="GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D"></a><h5 id="ADMQS-GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D" class="sect5"><span class="enumeration_section">9.4.4.1 </span>Validating Selected Backups
                     </h5>
                     <div>
                        <div><span>Validating specific backups checks whether these backups exist and can be restored. It does not test whether the set of available backups meet your recoverability goals.</span> For example, image copies of data files for several tablespaces from your database may exist, each of which can be validated. If there are some tablespaces for which no valid backups exist, however, then you cannot restore and recover the database.
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D__GUID-540AB259-EEAE-48F8-842B-5044735640BA">To validate selected backups:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect Oracle Recovery Manager (RMAN) to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Validate the required backup.</span><div>
                                 <p>The following <code class="codeph">VALIDATE</code> command validates the datafile <code class="codeph">users_02.dbf</code>.
                                 </p><pre class="oac_no_warn" dir="ltr">VALIDATE DATAFILE '/ora112/oradata/users_02.dbf';

Starting validate at 27-MAR-12
using channel ORA_DISK_1
channel ORA_DISK_1: starting validation of datafile
channel ORA_DISK_1: specifying datafile(s) for validation
input datafile file number=00020 
name=/ora112/oradata/users_02.dbf
channel ORA_DISK_1: validation complete, elapsed time: 00:00:01

List of Datafiles
=================
File Status Marked Corrupt Empty Blocks Blocks Examined High SCN
---- ------ -------------- ------------ --------------- ----------
20   OK     0              248          256             618976

File Name: /ora112/oradata/users_02.dbf
Block Type Blocks Failing Blocks Processed
  ---------- -------------- ----------------
  Data       0              0
  Index      0              0
  Other      0              8

Finished validate at 27-MAR-12
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>When you suspect that one or more backup pieces in a backup set are missing or have been damaged, use the <code class="codeph">VALIDATE BACKUPSET</code> command to validate the backup set.
                           </p>
                           <div class="infoboxnotealso" id="GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D__GUID-B1BBB050-40DE-456C-8EC1-D3B6A488A453">
                              <p class="notep1">See Also:</p>
                              <p><a href="../bradv/validating-database-files-backups.html#BRADV8156" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for more information about validating backups
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12228"></a><a id="ADMQS0942"></a><div class="props_rev_3"><a id="GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD" name="GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD"></a><h5 id="ADMQS-GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD" class="sect5"><span class="enumeration_section">9.4.4.2 </span>Validating Backups for Restore Operations
                     </h5>
                     <div>
                        <div><span>You can test whether a sufficient set of backups exists that can be used to restore the specified database files.</span> After you specify which tablespaces to restore and, possibly, a time as of which to restore them, Oracle Recovery Manager (RMAN) selects a set of backups that contain the needed data. RMAN reads the selected backups in their entirety to confirm that they are not corrupt, but does not produce output files.
                        </div>
                        <div class="section">
                           <p>Validating the restoration of files tests whether the file can be restored given the available backups, but it does not test whether all backups of the specified object are valid. </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD__GUID-D6462B82-D0FB-4DA7-81AE-B3E96C19DF73">To verify whether specified database files can be restored:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Run the <code class="codeph">RESTORE … VALIDATE</code> command to determine if the required database files can be restored.</span><div>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>To determine if the whole database can be restored:</p><pre class="oac_no_warn" dir="ltr">RESTORE VALIDATE DATABASE;

Starting restore at 29-MAR-12
using target database control file instead of recovery catalog
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=129 device type=DISK
channel ORA_DISK_1: scanning datafile copy /ade/b/191802369/oracle/work/orcva/RDBMS/datafile/o1_mf_tbs_3_7q60nj4y_.dbf
channel ORA_DISK_1: starting validation of datafile backup set
channel ORA_DISK_1: reading from backup piece /ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_03_28/o1_mf_nnndf_TAG20120328T051921_7q60g9oc_.bkp
channel ORA_DISK_1: piece handle=/ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_03_28/o1_mf_nnndf_TAG20120328T051921_7q60g9oc_.bkp tag=TAG20120328T051921
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: validation complete, elapsed time: 00:00:04
Finished restore at 29-MAR-12
</pre></li>
                                    <li>
                                       <p>To determine if a specified tablespace can be restored:</p><pre class="oac_no_warn" dir="ltr">RESTORE TABLESPACE example VALIDATE;

Starting restore at 29-MAR-12
using channel ORA_DISK_1
channel ORA_DISK_1: starting validation of datafile backup set
channel ORA_DISK_1: reading from backup piece /ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_03_28/o1_mf_nnndf_TAG20120328T051921_7q60g9oc_.bkp
channel ORA_DISK_1: piece handle=/ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_03_28/o1_mf_nnndf_TAG20120328T051921_7q60g9oc_.bkp tag=TAG20120328T051921
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: validation complete, elapsed time: 00:00:01
Finished restore at 29-MAR-12
</pre></li>
                                    <li>
                                       <p>To determine if a datafile can be restored to a specified SCN:</p><pre class="oac_no_warn" dir="ltr">RESTORE DATAFILE 1 VALIDATE UNTIL SCN 23456;

Starting restore at 29-MAR-12
using channel ORA_DISK_1
channel ORA_DISK_1: starting validation of datafile backup set
channel ORA_DISK_1: reading from backup piece /ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_03_28/o1_mf_nnndf_TAG20120330T044454_7qc75qyd_.bkp
channel ORA_DISK_1: piece handle=/ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_03_28/o1_mf_nnndf_TAG20120330T044454_7qc75qyd_.bkp tag=TAG20120330T044454
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: validation complete, elapsed time: 00:00:03
Finished restore at 29-MAR-12
</pre></li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD__GUID-C31E0ED3-82AA-4F7B-B16A-D6F953128692">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=CNCPT88772" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for datafile recovery concepts
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../bradv/validating-database-files-backups.html#BRADV8156" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> to learn how to use the <code class="codeph">RESTORE</code> <code class="codeph">...</code> <code class="codeph">VALIDATE</code> command
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS12229"></a><a id="ADMQS096"></a><div class="props_rev_3"><a id="GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3" name="GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3"></a><h3 id="ADMQS-GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3" class="sect3"><span class="enumeration_section">9.5 </span>Displaying Backup Reports
               </h3>
               <div>
                  <div><span>Backup reports contain summary and detailed information about past backup jobs run by Oracle Recovery Manager (RMAN).</span> The view <code class="codeph">V$RMAN_BACKUP_JOB_DETAILS</code> contains information about backup jobs run by RMAN. This view contains information such as the time taken for the backup, when a job started and finished, and what type of backup was performed, and the status of the backup job.
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3__GUID-A4FE5A3A-61FB-4711-9EA5-654E9ADC4DA6">To display backup reports:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Use the following query to display the backup job history.</p><pre class="oac_no_warn" dir="ltr">SELECT SESSION_KEY,INPUT_TYPE,STATUS,START_TIME,END_TIME,ELAPSED_SECONDS/3600 hrs
FROM V$RMAN_BACKUP_JOB_DETAILS;

SESSION_KEY INPUT_TYPE    STATUS                  START_TIM END_TIME         HRS
----------- ------------- ----------------------- --------- --------- ----------
          8 DB FULL       FAILED                  27-MAR-12 27-MAR-12 1.64666666
         50 DB FULL       COMPLETED               28-MAR-12 28-MAR-12 .243055555
         69 DB FULL       COMPLETED               30-MAR-12 05-APR-12 147.176388
</pre><p><code class="codeph">SESSION_KEY</code> is the unique key for the RMAN session in which the backup job occurred.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADMQS095"></a><div class="props_rev_3"><a id="GUID-83CED39F-DC23-4539-9668-32C89676904E" name="GUID-83CED39F-DC23-4539-9668-32C89676904E"></a><h3 id="ADMQS-GUID-83CED39F-DC23-4539-9668-32C89676904E" class="sect3"><span class="enumeration_section">9.6 </span>Managing Backups
               </h3>
               <div>
                  <div><span>As part of a backup strategy, you must manage database backups.</span> A related task is managing the record of those backups in the Oracle Recovery Manager (RMAN) repository. RMAN simplifies these tasks.
                  </div>
                  <p>In a multitenant environment, you can manage backups for the whole multitenant container database (CDB) or for one or more pluggable databases (PDBs). The steps in this section are applicable to CDBs and PDBs, with minor modifications. To manage backups for the whole CDB, connect to the root and use the steps described in this section. To manage backups of a single PDB, connect to that PDB and use the steps described in this section. To manage backups of multiple PDBs using one command, connect to the root and use the 	<code class="codeph">PLUGGABLE DATABASE</code> clause followed by a list of PDBs.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C" title="An essential part of a backup and recovery strategy is managing backups after you create them. Backup management includes deleting obsolete backups and performing periodic checks to ensure that backups are available and usable.">About Backup Management</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495" title="Cross-checking a backup synchronizes the physical reality of backups with their logical records in the Oracle Recovery Manager (RMAN) repository.">Cross-Checking Backups</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E" title="Deleting expired backups removes from the Oracle Recovery Manager (RMAN) repository those backups that are listed as EXPIRED.">Deleting Expired Backups</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5" title="If one or more specific backups are unavailable because of a temporary condition, such as a disk drive that is temporarily offline or a tape stored offsite, then you can mark those backups as unavailable.">Marking Backups as Available or Unavailable</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370" title="This section explains how to delete obsolete backups, which are those no longer needed by the configured retention policy.">Deleting Obsolete Backups</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-59C29B1D-8536-4C43-B999-46CC5F61F430" title="It is important to monitor space usage in the fast recovery area to ensure that it is large enough to contain backups and other recovery-related files.">Monitoring Fast Recovery Area Space Usage</a></p>
                     </li>
                  </ul>
               </div><a id="ADMQS0951"></a><div class="props_rev_3"><a id="GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C" name="GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C"></a><h4 id="ADMQS-GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C" class="sect4"><span class="enumeration_section">9.6.1 </span>About Backup Management
                  </h4>
                  <div>
                     <p>An essential part of a backup and recovery strategy is managing backups after you create them. Backup management includes deleting obsolete backups and performing periodic checks to ensure that backups are available and usable.</p>
                     <p>A backup recorded in the Oracle Recovery Manager (RMAN) repository has one of the following status values:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Available, <a id="d37040e4405" class="indexterm-anchor"></a>meaning that the backup is still present on disk or tape, as recorded in the repository
                           </p>
                        </li>
                        <li>
                           <p>Expired, <a id="d37040e4413" class="indexterm-anchor"></a>meaning that the backup no longer exists on disk or tape, but is still listed in the repository
                           </p>
                        </li>
                        <li>
                           <p>Unavailable,<a id="d37040e4421" class="indexterm-anchor"></a> meaning that the backup is temporarily not available for data recovery operations (because, for example, it is stored on a tape that is stored offsite or on a disk that is currently not mounted)
                           </p>
                        </li>
                     </ul>
                     <p><a id="d37040e4427" class="indexterm-anchor"></a>Backups can also be obsolete. An obsolete backup is, based on the currently configured retention policy, no longer needed to satisfy data recovery goals. 
                     </p>
                     <p>Maintenance tasks that you can perform in RMAN include the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Viewing details about your backups</p>
                        </li>
                        <li>
                           <p>Cross-checking<a id="d37040e4441" class="indexterm-anchor"></a> your repository, which means checking whether backups listed in the repository exist and are accessible, and marking as expired any backups not accessible at the time of the cross-check
                           </p>
                        </li>
                        <li>
                           <p>Deleting the record of expired backups from your RMAN repository</p>
                        </li>
                        <li>
                           <p>Deleting obsolete backups from the repository and from the backup media</p>
                        </li>
                        <li>
                           <p>Validating backups to ensure that a given backup is available and not corrupted</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C__GUID-F2B5CFD0-0A20-4FE3-B0B7-A627350BD1A0">
                        <p class="notep1">Note:</p>
                        <p>If a backup no longer exists, then immediately delete the backup record from the RMAN repository. Without an accurate record of available backups, you may discover that you no longer have complete backups of your database when you must perform a recovery.</p>
                     </div>
                     <p>Some tasks, such as periodic cross-checks of your backups, should be among the regularly scheduled components of your backup strategy.</p>
                     <p>If you use a fast recovery area for backup storage, then many maintenance activities are reduced or eliminated. The automatic storage space management mechanisms delete backups and other files as needed, thereby satisfying storage space demands for ongoing database operations without compromising the retention policy. However, you must monitor space usage in the fast recovery area to ensure that it is large enough to contain backups and other recovery-related files. </p>
                  </div>
               </div><a id="ADMQS12230"></a><a id="ADMQS12231"></a><a id="ADMQS0953"></a><div class="props_rev_3"><a id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495" name="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495"></a><h4 id="ADMQS-GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495" class="sect4"><span class="enumeration_section">9.6.2 </span>Cross-Checking Backups
                  </h4>
                  <div>
                     <div><span>Cross-checking a backup synchronizes the physical reality of backups with their logical records in the Oracle Recovery Manager (RMAN) repository.</span> For example, if a backup on disk was deleted with an operating system command, then a cross-check detects this condition. After the cross-check, the RMAN repository correctly reflects the state of the backups.
                     </div>
                     <div class="section">
                        <p>Backups to disk are listed as available if they are still on disk in the location listed in the RMAN repository, and if they have no corruption in the file header. Backups on tape are listed as available if they are still on tape. The file headers on tape are not checked for corruption. Backups that are missing or corrupt are listed as expired.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495__GUID-66A38F2F-CDE0-4879-93A1-461D2ECEF289">To cross-check individual files:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></p>
                           </li>
                           <li>
                              <p>Display a summary of the existing backups to determine which backup you want to cross-check.</p><pre class="oac_no_warn" dir="ltr">LIST BACKUP SUMMARY;
</pre></li>
                           <li>
                              <p>Identify the backup that you want to cross-check from the output of the previous <code class="codeph">LIST</code> command.
                              </p>
                           </li>
                           <li>
                              <p>Cross-check the identified file using the <code class="codeph">CROSSCHECK</code> command.
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>To cross-check the backup set 1345:</p><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUPSET 1345;

using channel ORA_DISK_1
crosschecked backup piece: found to be 'AVAILABLE'
backup piece handle=/ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_04_05/o1_mf_annnn_TAG20120405T075520_7qvdlrsl_.bkp RECID=1345 STAMP=779788520
Crosschecked 1 objects
</pre></li>
                                 <li>
                                    <p>To cross-check the data files 1 and 5:</p><pre class="oac_no_warn" dir="ltr">CROSSCHECK DATAFILECOPY 1,5;
</pre></li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495__GUID-AB70A239-518C-4FB9-A034-4ACE8FD84866">To cross-check all files:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                        <li class="stepexpand"><span>To crosscheck all backup sets, use the following command:</span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495__GUID-021368D6-19CD-43E6-ABB8-6A9B54E8F2FE">
                           <p class="notep1">Note:</p>
                           <p>Cross-checking all backups in the RMAN repository may take a long time, especially for tape backups. A cross-check of all files, unlike cross-checking individual files, is handled as a scheduled job. </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495__GUID-08D6C0D3-B1F1-4AE2-9B36-BBC17270C321">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=RCMRF119" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for the syntax used to cross-check backups of multitenant container databases (CDBs) and pluggable databases (PDBs)
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADMQS12232"></a><a id="ADMQS0954"></a><div class="props_rev_3"><a id="GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E" name="GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E"></a><h4 id="ADMQS-GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E" class="sect4"><span class="enumeration_section">9.6.3 </span>Deleting Expired Backups
                  </h4>
                  <div>
                     <div><span>Deleting expired backups removes from the Oracle Recovery Manager (RMAN) repository those backups that are listed as <code class="codeph">EXPIRED</code>.</span> Expired backups are those found to be inaccessible during a cross-check. No attempt is made to delete the files containing the backup from disk or tape; this action updates only the RMAN repository.
                     </div>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E__GUID-7C1125F1-3AFA-4ED3-93E7-E8CA45DB5F28">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=RCMRF121" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for the syntax used to delete expired backups of multitenant container databases (CDBs) and pluggable databases (PDBs)
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E__GUID-A0D57101-934A-4759-8AD2-E75802E17ABD">To delete expired backups:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                        <li class="stepexpand"><span>Optionally, cross-check backup sets by using the following command:</span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUPSET;
</pre><p>Cross-checking backups before you delete expired backups provides RMAN with up-to-date information about which backups are expired.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Delete expired backups using the following command:</span><div><pre class="oac_no_warn" dir="ltr">DELETE EXPIRED BACKUP;
</pre><p>The expired backup sets and image copies are deleted from the RMAN repository.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS12233"></a><a id="ADMQS0955"></a><div class="props_rev_3"><a id="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5" name="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5"></a><h4 id="ADMQS-GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5" class="sect4"><span class="enumeration_section">9.6.4 </span>Marking Backups as Available or Unavailable
                  </h4>
                  <div>
                     <div><span>If one or more specific backups are unavailable because of a temporary condition, such as a disk drive that is temporarily offline or a tape stored offsite, then you can mark those backups as unavailable.</span> Oracle Recovery Manager (RMAN) does not use unavailable backups to restore or recover data.
                     </div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5__GUID-537A31E7-9609-41A4-A447-F995137DD989">
                           <p class="notep1">Note:</p>
                           <p>Backups stored in the fast recovery area cannot be marked as unavailable.</p>
                        </div>
                        <p>RMAN keeps the record of unavailable backups in the RMAN repository and does not delete backups listed as unavailable when you delete expired backups. If the unavailable backups become accessible again, then you can mark them as available.</p>
                        <div class="infoboxnotealso" id="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5__GUID-195AE008-F521-440A-9A8B-814D227D8DB0">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=RCMRF110" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for the syntax used for multitenant container databases (CDBs) and pluggable databases (PDBs)
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5__GUID-B56A771C-D9BC-4624-A34D-E4C4184548FA">To mark backups as available or unavailable:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                        <li class="stepexpand"><span>Optionally, cross-check backup sets by using the following command:</span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP;
</pre><p>Cross-checking backups before you delete expired backups provides RMAN with up-to-date information about which backups are expired.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Display a summary of the available backups.</span><div><pre class="oac_no_warn" dir="ltr">LIST BACKUP SUMMARY;

List of Backups
===============
Key TY LV S Device Type Completion Time #Pieces #Copies Compressed Tag
------- -- -- - ----------- --------------- ------- ------- ---------- ---
1 B A A DISK 24-FEB-07 1 1 NO TAG20070427T115348
3 B A A DISK 24-MAR-07 1 1 NO TAG20070427T115452
4 B F A DISK 24-APR-07 1 1 NO TAG20070427T115456
</pre></div>
                        </li>
                        <li class="stepexpand"><span>From the output of the <code class="codeph">LIST</code> command, identify the backup that you want to make available or unavailable. Use the value displayed in the Key column to identify a backup set.</span></li>
                        <li class="stepexpand"><span>Change the status of the identified backup to unavailable by using the <code class="codeph">CHANGE</code> command. </span><div>
                              <p>The following command marks the backup set 4 unavailable:</p><pre class="oac_no_warn" dir="ltr">CHANGE BACKUPSET 4 UNAVAILABLE;

changed backup piece available
backup piece handle=/ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_04_05/o1_mf_annnn_TAG20120405T075520_7qvdlrsl_.bkp RECID=23 STAMP=779788520
Changed 1 objects to AVAILABLE status
</pre><p>To mark the backup set 4 available, use the following command:</p><pre class="oac_no_warn" dir="ltr">CHANGE BACKUPSET 4 AVAILABLE;
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS12234"></a><a id="ADMQS0956"></a><div class="props_rev_3"><a id="GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370" name="GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370"></a><h4 id="ADMQS-GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370" class="sect4"><span class="enumeration_section">9.6.5 </span>Deleting Obsolete Backups
                  </h4>
                  <div>
                     <div><span>This section explains how to delete obsolete backups, which are those no longer needed by the configured retention policy.</span> If you use a fast recovery area as your only disk-based backup destination, then you never have to delete obsolete backups from disk. The fast recovery area keeps files as specified by the retention policy, and deletes them only when space is needed.
                     </div>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370__GUID-3D3B96AE-635A-474C-8BC4-F7F204776289">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=RCMRF121" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for the syntax used to delete obsolete backups of CDBs and PDBs
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370__GUID-1B814305-2658-4325-A3B1-02E11B285AFB">To delete obsolete backups:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                        <li class="stepexpand"><span>Delete all obsolete backups, including backup sets and image copies, using the following command:</span><div><pre class="oac_no_warn" dir="ltr">DELETE OBSOLETE;
</pre><p>RMAN displays the list of obsolete backups and asks for confirmation about deleting the listed backups.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS12106"></a><div class="props_rev_3"><a id="GUID-59C29B1D-8536-4C43-B999-46CC5F61F430" name="GUID-59C29B1D-8536-4C43-B999-46CC5F61F430"></a><h4 id="ADMQS-GUID-59C29B1D-8536-4C43-B999-46CC5F61F430" class="sect4"><span class="enumeration_section">9.6.6 </span>Monitoring Fast Recovery Area Space Usage 
                  </h4>
                  <div>
                     <div><span>It is important to monitor space usage in the fast recovery area to ensure that it is large enough to contain backups and other recovery-related files.</span> Oracle Database provides two views to monitor fast recovery area space usage, <code class="codeph">V$RECOVERY_FILE_DEST</code> and <code class="codeph">V$RECOVERY_AREA_USAGE</code>.
                     </div>
                     <div class="section">
                        <p>Use the <code class="codeph">V$RECOVERY_FILE_DEST</code> view to obtain the following information about the fast recovery area: total number of files, current location, disk quota, space in use, and space reclaimable by deleting files. The space details are in bytes. Querying <code class="codeph">V$RECOVERY_FILE_DEST</code> produces the following output.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM V$RECOVERY_FILE_DEST;

NAME         SPACE_LIMIT SPACE_USED SPACE_RECLAIMABLE NUMBER_OF_FILES
-------------- ----------- ---------- ----------------- ---------------
/mydisk/rcva 5368709120  109240320  256000            28
</pre><p>The <code class="codeph">V$RECOVERY_AREA_USAGE</code> view contains the percentage of disk quota used by different type of files, and the percentage of space that can be reclaimed by deleting files that are obsolete, redundant, or backed up to tape. Querying the <code class="codeph">V$RECOVER_AREA_USAGE</code> view produces the following output.
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM V$RECOVERY_AREA_USAGE;

FILE_TYPE    PERCENT_SPACE_USED  PERCENT_SPACE_RECLAIMABLE  NUMBER_OF_FILES
------------ ------------------  -------------------------  ---------------
CONTROLFILE        0                  0                         0
ONLINELOG          2                  0                         22
ARCHIVELOG         4.05              2.01                       31
BACKUPPIECE        3.94              3.86                       8
IMAGECOPY         15.64              10.43                      66
FLASHBACKLOG       .08                0                         1
</pre><div class="infoboxnotealso" id="GUID-59C29B1D-8536-4C43-B999-46CC5F61F430__GUID-2E3F2C5F-5DDC-4619-80BF-8E78FCAFA3F5">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" title="This section explains how to set up your database to take advantage of Oracle suggested backup strategies.">Configuring Your Database for Basic Backup and Recovery</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADMQS098"></a><div class="props_rev_3"><a id="GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523" name="GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523"></a><h3 id="ADMQS-GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523" class="sect3"><span class="enumeration_section">9.7 </span>Performing Oracle Advised Recovery
               </h3>
               <div>
                  <div><span>The Oracle advised recovery feature uses Data Recovery Advisor, which is an Oracle Database feature that automatically diagnoses data failures, determines and presents appropriate repair options, and performs repairs if requested by the user.</span> By providing a centralized tool for automated data repair, Data Recovery Advisor improves the manageability and reliability of an Oracle database.
                  </div>
                  <div class="infoboxnote" id="GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523__GUID-21EDB5FD-D0E4-4988-BE53-83FA77C9E4A4">
                     <p class="notep1">Note:</p>
                     <p>Data Recovery Advisor can only be used to diagnose and repair failures in multitenant container databases (CDBs). It is not supported for pluggable databases (PDBs).</p>
                  </div>
                  <p>RMAN provides a command-line interface to the Data Recovery Advisor. You can use following RMAN commands to diagnose and repair data failures for the Oracle Database, including for Oracle RAC databases:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">LIST FAILURE</code></p>
                        <p>Use this command to view problem statements for failures and the effect of these failures on database operations. Each failure is identified by a failure number.</p>
                     </li>
                     <li>
                        <p><code class="codeph">ADVISE FAILURE</code></p>
                        <p>Use this command to view repair options, including both automated and manual repair options.</p>
                     </li>
                     <li>
                        <p><code class="codeph">REPAIR FAILURE</code></p>
                        <p>Use this command to automatically repair failures listed by the most recent <code class="codeph">ADVISE FAILURE</code> command.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523__GUID-D1AEF4CD-AF6D-40B4-BD5C-9F62132BFED6">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV-GUID-9F467E37-DC05-494A-890E-439330493056" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about altering the status or priority of a failure by using the <code class="codeph">CHANGE FAILURE</code> command
                     </p>
                  </div>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-4678D9C4-7949-4050-A6DF-F52F79CEDC9F" title="In the context of Data Recovery Advisor, a health check is a diagnostic procedure run by the Health Monitor to assess the state of the database or its components. Health checks are invoked reactively when an error occurs. You can also invoke checks manually.">About Data Recovery Advisor</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5A23C991-FCB3-49E5-9B35-26859406999B" title="The recovery process begins when you either suspect or discover a failure. You can discover failures in many ways, including error messages, alerts, trace files, and health checks.">Using Data Recovery Advisor</a></p>
                     </li>
                  </ul>
               </div><a id="ADMQS100"></a><div class="props_rev_3"><a id="GUID-4678D9C4-7949-4050-A6DF-F52F79CEDC9F" name="GUID-4678D9C4-7949-4050-A6DF-F52F79CEDC9F"></a><h4 id="ADMQS-GUID-4678D9C4-7949-4050-A6DF-F52F79CEDC9F" class="sect4"><span class="enumeration_section">9.7.1 </span>About Data Recovery Advisor
                  </h4>
                  <div>
                     <p>In the context of Data Recovery Advisor, a health check is a diagnostic procedure run by the Health Monitor to assess the state of the database or its components. Health checks are invoked reactively when an error occurs. You can also invoke checks manually.</p>
                     <p>A <strong class="term">failure</strong> is a persistent data corruption detected by a health check. Failures are usually detected reactively. A database operation involving corrupted data results in an error, which automatically invokes a health check in the database. The check searches the database for failures related to the error. If failures are diagnosed, then they are recorded in the Automatic Diagnostic Repository (ADR).
                     </p>
                     <p>You can use Data Recovery Advisor to generate repair advice and repair failures only after failures have been detected by the database and stored in ADR. Data Recovery Advisor can report on and repair failures such as inaccessible files, physical and logical block corruptions, and I/O failures. Every failure has a failure priority: CRITICAL, HIGH, or LOW. Every failure also has a failure status of OPEN or CLOSED.</p>
                     <p>You can also use Data Recovery Advisor to view repair options. A <strong class="term">repair</strong> is an action that fixes one or more failures. Examples of repairs include block media recovery, data file media recovery, and Oracle Flashback Database. Typically, Data Recovery Advisor presents both automated and manual repair options. If appropriate, you can choose an automated repair option in order to perform a repair. In this case, Data Recovery Advisor verifies the repair success, and closes the relevant repaired failures.
                     </p>
                  </div>
               </div><a id="ADMQS12235"></a><a id="ADMQS0982"></a><div class="props_rev_3"><a id="GUID-5A23C991-FCB3-49E5-9B35-26859406999B" name="GUID-5A23C991-FCB3-49E5-9B35-26859406999B"></a><h4 id="ADMQS-GUID-5A23C991-FCB3-49E5-9B35-26859406999B" class="sect4"><span class="enumeration_section">9.7.2 </span>Using Data Recovery Advisor
                  </h4>
                  <div>
                     <div><span>The recovery process begins when you either suspect or discover a failure. You can discover failures in many ways, including error messages, alerts, trace files, and health checks.</span> You can then use Data Recovery Advisor to gain information and advice about failures and repair them automatically.
                     </div>
                     <div class="section">
                        <p>This section describes a scenario in which you use Data Recovery Advisor to repair a corrupted block.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A23C991-FCB3-49E5-9B35-26859406999B__GUID-B78CB97D-E6AF-463F-A36A-0A7D8996F076">To use the Oracle advised recovery strategy to automatically repair failures:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect Oracle Recovery Manager (RMAN) to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span><div>
                              <p>In a multitenant environment, connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>List all the failures know to the Data Recovery Advisor by running the following command:</span><div><pre class="oac_no_warn" dir="ltr">LIST FAILURE;

List of Database Failures
=========================
Failure ID Priority Status Time Detected Summary
---------- -------- ------ ------------- --------
142        HIGH     OPEN   23-APR-07     One or more non-system datafiles are
                                         missing
101        HIGH     OPEN   23-APR-07     Datafile 1: '/disk1/oradata/prod/
                                         system01.dbf' contains one or more  
                                         corrupt blocks
</pre><p>Wherever possible, RMAN consolidates failures while displaying the result of the <code class="codeph">LIST FAILURE</code> command. For example, if a data file contains multiple block failures, the <code class="codeph">LIST FAILURE</code> command consolidates and displays the repair options.
                              </p>
                              <div class="infoboxnotealso" id="GUID-5A23C991-FCB3-49E5-9B35-26859406999B__GUID-492284E4-0A3E-40ED-874E-BAA068D7F1EF">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89726" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about using the <code class="codeph">LIST FAILURE ... DETAIL</code> command to display failures individually
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If you suspect that some failures that have not been automatically diagnosed by the database exist, then check for corrupt blocks and missing data files by using the following command:</span><div><pre class="oac_no_warn" dir="ltr">VALIDATE DATABASE;
</pre><p>If a problem is detected during the validation, then RMAN triggers the execution of a failure assessment</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Determine repair options, both automatic and manual, by using the following command:</span><div><pre class="oac_no_warn" dir="ltr">ADVISE FAILURE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Fix the failures by using the following command:</span><div><pre class="oac_no_warn" dir="ltr">REPAIR FAILURE;
</pre><p>Automated repairs are performed by the Data Recovery Advisor. In certain cases, such as when no backups exist for a lost control file, the only repair option possible is the manual option.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADMQS094"></a><div class="props_rev_3"><a id="GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6" name="GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6"></a><h3 id="ADMQS-GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6" class="sect3"><span class="enumeration_section">9.8 </span>Performing User-Directed Recovery
               </h3>
               <div>
                  <div><span>User-Directed Recovery enables you to use flashback features and perform restore operations and recovery procedures.</span> For example, you can do the following:
                  </div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Repair unwanted changes to database objects with the logical flashback features</p>
                     </li>
                     <li>
                        <p>Rewind the entire database with Oracle Flashback Database</p>
                     </li>
                     <li>
                        <p>Completely restore and recover the database</p>
                     </li>
                     <li>
                        <p>Perform point-in-time recovery of the database or selected tablespaces</p>
                     </li>
                     <li>
                        <p>Perform block media recovery of data files that have corrupted blocks</p>
                     </li>
                  </ul>
                  <p>You can determine which parts of the database must be restored and recovered, including detecting situations such as corrupted database files before they affect database operations.</p>
                  <p>This section contains a few typical recovery examples so that you can become familiar with the performing whole database or object-level recovery using Oracle Recovery Manager (RMAN). Use the <code class="codeph">RESTORE</code> and <code class="codeph">RECOVER</code> commands to perform whole database or object-level recovery.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-18074BFE-AC22-4169-B321-774F1D1D5325" title="Oracle Flashback Table enables you to rewind one or more tables back to their contents at a previous time without affecting other database objects.">Rewinding a Table Using Oracle Flashback Table</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9" title="Oracle Flashback Drop enables you to reverse the effects of dropping (deleting) a table, returning the dropped table to the database along with dependent objects such as indexes and triggers.">Recovering a Dropped Table Using Oracle Flashback Drop</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488" title="Unlike the other flashback features, Oracle Flashback Database operates at a physical level. When you use Flashback Database, your current data files revert to their contents at a previous time.">Rewinding a Database Using Oracle Flashback Database</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F" title="This section demonstrates how to restore and recover the entire database using Oracle Recovery Manager (RMAN).">Restoring and Recovering the Database</a></p>
                     </li>
                  </ul>
               </div><a id="ADMQS0943"></a><div class="props_rev_3"><a id="GUID-18074BFE-AC22-4169-B321-774F1D1D5325" name="GUID-18074BFE-AC22-4169-B321-774F1D1D5325"></a><h4 id="ADMQS-GUID-18074BFE-AC22-4169-B321-774F1D1D5325" class="sect4"><span class="enumeration_section">9.8.1 </span>Rewinding a Table Using Oracle Flashback Table
                  </h4>
                  <div>
                     <div><span>Oracle Flashback Table enables you to rewind one or more tables back to their contents at a previous time without affecting other database objects.</span> Thus, you can recover from logical data corruptions such as table rows added or deleted accidentally. Unlike point-in-time recovery, the database remains available during the flashback operation.
                     </div>
                     <p>For this example, you use Flashback Table on the <code class="codeph">employees</code> table in the <code class="codeph">hr</code> schema. Assume that an erroneous update shortly after October 23, 2005 at 15:30:00 has changed the <code class="codeph">lastname</code> column for all employees to an empty string, and you must return the original <code class="codeph">lastname</code> values to the table.
                     </p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-64C48A91-42DF-4E07-834A-987802E1130D" title="Before you can use Flashback Table, you must ensure that row movement is enabled on the table to be flashed back, or returned to a previous state. Row movement indicates that rowids will change after the flashback occurs.">Enabling Row Movement on a Table</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-3132E637-78D5-4B3A-A88B-99F50159C479" title="In this example, you rewind the hr.employees table and its dependent tables to a previous point in time.">Performing a Flashback Table Operation</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12236"></a><a id="ADMQS09431"></a><div class="props_rev_3"><a id="GUID-64C48A91-42DF-4E07-834A-987802E1130D" name="GUID-64C48A91-42DF-4E07-834A-987802E1130D"></a><h5 id="ADMQS-GUID-64C48A91-42DF-4E07-834A-987802E1130D" class="sect5"><span class="enumeration_section">9.8.1.1 </span>Enabling Row Movement on a Table
                     </h5>
                     <div>
                        <div><span>Before you can use Flashback Table, you must ensure that row movement is enabled on the table to be <span class="italic">flashed back</span>, or returned to a previous state. Row movement indicates that rowids will change after the flashback occurs.</span> This restriction exists because if rowids before the flashback were stored by an application, then there is no guarantee that the rowids will correspond to the same rows after the flashback.
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-64C48A91-42DF-4E07-834A-987802E1130D__GUID-91A5E8DF-87A1-44BC-BC73-4AC2B568D179">To enable row movement on a table:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect Oracle Recovery Manager (RMAN) to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Enable row movement for all the objects that you want to rewind using Flashback Table.</span><div>
                                 <p>The following command enables row movement for the <code class="codeph">hr.employees</code> table.
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.employees ENABLE ROW MOVEMENT;
</pre><p>For this example, you must also enable row movement on the tables <code class="codeph">hr.jobs</code> and <code class="codeph">hr.departments.</code></p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADMQS12237"></a><a id="ADMQS09432"></a><div class="props_rev_3"><a id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479" name="GUID-3132E637-78D5-4B3A-A88B-99F50159C479"></a><h5 id="ADMQS-GUID-3132E637-78D5-4B3A-A88B-99F50159C479" class="sect5"><span class="enumeration_section">9.8.1.2 </span>Performing a Flashback Table Operation
                     </h5>
                     <div>
                        <p>In this example, you rewind the <code class="codeph">hr.employees</code> table and its dependent tables to a previous point in time.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479__GUID-60A4E64F-4EF8-4E19-A049-8CD653340A94">To perform the Flashback Table operation:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect Oracle Recovery Manager (RMAN) to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                           <li class="stepexpand"><span>Determine whether the table that you intend to flash back has dependencies on other tables. </span><div>
                                 <p>Use the following SQL query to determine the dependencies for the <code class="codeph">hr.employees</code>:
                                 </p><pre class="oac_no_warn" dir="ltr">SELECT other.owner, other.table_name 
    FROM sys.all_constraints this, sys.all_constraints other
    WHERE this.owner = 'HR'
      AND this.table_name = 'EMPLOYEES'
      AND this.r_owner = other.owner
      AND this.r_constraint_name = other.constraint_name
      AND this.constraint_type='R';

OWNER                          TABLE_NAME
------------------------------ ------------------------------
HR                             EMPLOYEES
HR                             JOBS
HR                             DEPARTMENTS
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Ensure that row movement is enabled for the table that you want to flash back and its dependent tables.</span><div>
                                 <p>In this example, row movement must be enabled for the tables <code class="codeph">hr.employees</code>, <code class="codeph">hr.jobs</code>, and <code class="codeph">hr.departments</code> using the steps described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-64C48A91-42DF-4E07-834A-987802E1130D" title="Before you can use Flashback Table, you must ensure that row movement is enabled on the table to be flashed back, or returned to a previous state. Row movement indicates that rowids will change after the flashback occurs.">Enabling Row Movement on a Table</a>."</span></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Identify the time, SCN, or restore point to which you want to return the table.</span><div>
                                 <p>In this example, we assume that the rows were accidentally inserted 5 minutes ago. Therefore, you must rollback to a timestamp that is 5 minutes before the current time.</p>
                                 <div class="infoboxnote" id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479__GUID-39FE8A50-36DF-47F8-846E-0C356D5B0BF0">
                                    <p class="notep1">Note:</p>
                                    <p>If you do not know the time at which the unwanted changes occurred, you can use the Oracle Flashback Version Query to review all recent changes to the target table. Use of this feature is beyond the scope of this documentation.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Verify that enough undo data exists to rewind the table to the specified target.</span><div>
                                 <p>Use the following query to determine how long undo data is being retained:</p><pre class="oac_no_warn" dir="ltr">SELECT NAME, VALUE/60 MINUTES_RETAINED 
    FROM V$PARAMETER
    WHERE NAME = 'undo_retention';

NAME             MINUTES_RETAINED
---------------  ----------------
undo_retention               15
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Use the <code class="codeph">FLASHBACK TABLE</code> statement to perform a flashback operation for the required tables.</span><div>
                                 <p>The following SQL statements return the tables <code class="codeph">hr.employees</code>, <code class="codeph">hr.jobs</code>, and <code class="codeph">hr.departments</code> to the specified time:
                                 </p><pre class="oac_no_warn" dir="ltr">FLASHBACK TABLE hr.employees TO TIMESTAMP TO_TIMESTAMP('2012-03-27 09:30:00', 'YYYY-MM-DD HH:MI:SS');

FLASHBACK TABLE hr.jobs TO TIMESTAMP TO_TIMESTAMP('2012-03-27 09:30:00', 'YYYY-MM-DD HH:MI:SS');

FLASHBACK TABLE hr.departments TO TIMESTAMP TO_TIMESTAMP('2012-03-27 09:30:00', 'YYYY-MM-DD HH:MI:SS');
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479__GUID-848A203C-265E-4D82-8C63-DC928FF63B00">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-18074BFE-AC22-4169-B321-774F1D1D5325" title="Oracle Flashback Table enables you to rewind one or more tables back to their contents at a previous time without affecting other database objects.">Rewinding a Table Using Oracle Flashback Table</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="performing-backup-and-recovery.html#GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523" title="The Oracle advised recovery feature uses Data Recovery Advisor, which is an Oracle Database feature that automatically diagnoses data failures, determines and presents appropriate repair options, and performs repairs if requested by the user.">Performing Oracle Advised Recovery</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADMQS0944"></a><div class="props_rev_3"><a id="GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9" name="GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9"></a><h4 id="ADMQS-GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9" class="sect4"><span class="enumeration_section">9.8.2 </span>Recovering a Dropped Table Using Oracle Flashback Drop
                  </h4>
                  <div>
                     <div><span>Oracle Flashback Drop enables you to reverse the effects of dropping (deleting) a table, returning the dropped table to the database along with dependent objects such as indexes and triggers.</span> This feature stores dropped objects in a recycle bin, from which they can be retrieved until the recycle bin is purged, either explicitly or because space is needed.
                     </div>
                     <p>As with Flashback Table, you can use Flashback Drop while the database is open. Also, you can perform the flashback without undoing changes in objects not affected by the Flashback Drop operation. Flashback Table is more convenient than forms of media recovery that require taking the database offline and restoring files from backup.</p>
                     <div class="infoboxnote" id="GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9__GUID-ECBB932F-71EB-45A6-89F4-E62A8FF69305">
                        <p class="notep1">Note:</p>
                        <p>For a table to be recoverable using Flashback Drop, it must reside in a locally managed tablespace. Also, you cannot recover tables in the <code class="codeph">SYSTEM</code> tablespaces with Flashback Drop, regardless of the tablespace type.
                        </p>
                     </div>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A" title="For the purpose of learning about Flashback Drop, you will create a new table named reg_hist and then drop it.">Dropping a Table</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905" title="The following procedure retrieves reg_hist from the recycle bin.">Retrieving a Dropped Table</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12238"></a><a id="ADMQS0945"></a><div class="props_rev_3"><a id="GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A" name="GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A"></a><h5 id="ADMQS-GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A" class="sect5"><span class="enumeration_section">9.8.2.1 </span>Dropping a Table
                     </h5>
                     <div>
                        <div><span>For the purpose of learning about Flashback Drop, you will create a new table named <code class="codeph">reg_hist</code> and then drop it.</span> The database places the table in the recycle bin so that it can be retrieved with the Flashback Drop feature.
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A__GUID-FBAEE39C-6185-4C2D-9979-5862A66872CE">To create and then drop a table:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect SQL*Plus to the <code class="codeph">hr</code> schema.</span></li>
                           <li class="stepexpand"><span>Create table <code class="codeph">reg_hist</code> based on the existing <code class="codeph">REGIONS</code> table in the <code class="codeph">hr</code> schema by using the following command:</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE reg_hist as SELECT * FROM REGIONS;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Drop the <code class="codeph">reg_hist</code> table using the following command:</span><div><pre class="oac_no_warn" dir="ltr">DROP TABLE REG_HIST;
</pre><p>Because Flashback is enabled for the database, the dropped table is stored in the recycle bin.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Display the tables in the <code class="codeph">hr</code> schema.</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM TAB;

TNAME                          TABTYPE  CLUSTERID
------------------------------ ------- ----------
BIN$ANbliLHaSiu02xI+zbvDvQ==$0  TABLE
COUNTRIES                       TABLE
DEPARTMENTS                     TABLE
EMPLOYEES                       TABLE
EMP_DETAILS_VIEW                VIEW
JOBS                            TABLE
JOB_HISTORY                     TABLE
LOCATIONS                       TABLE
REGIONS                         TABLE

9 rows selected.
</pre><p>The first name displayed in the command output, beginning with 'BIN', is the table that you just dropped. Because Flashback Database is enabled, the deleted table is still in the recycle bin and is therefore displayed in the command output.</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADMQS12239"></a><a id="ADMQS0946"></a><div class="props_rev_3"><a id="GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905" name="GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905"></a><h5 id="ADMQS-GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905" class="sect5"><span class="enumeration_section">9.8.2.2 </span>Retrieving a Dropped Table
                     </h5>
                     <div>
                        <div><span>The following procedure retrieves <code class="codeph">reg_hist</code> from the recycle bin.</span> This section assumes that you created and then dropped the <code class="codeph">reg_hist</code> table, as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A" title="For the purpose of learning about Flashback Drop, you will create a new table named reg_hist and then drop it.">Dropping a Table</a>."</span></div>
                        <div class="section">
                           <p class="subhead3" id="GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905__GUID-0860E76F-00FB-4A64-8A56-31D4D3ACA1CE">To perform the Flashback Drop operation:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect SQL*Plus to the <code class="codeph">hr</code> schema and obtain the name of the dropped table in the recycle bin. </span><div><pre class="oac_no_warn" dir="ltr">SHOW RECYCLEBIN;

ORIGINAL NAME  RECYCLEBIN NAME                OBJECT TYPE   DROP TIME
-------------- ------------------------------ ------------  -----------
REG_HIST       BIN$ANbliLHaSiu02xI+zbvDvQ==$0  TABLE      2012-03-26:16:51:54
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Retrieve the dropped table using the <code class="codeph">FLASHBACK TABLE … TO BEFORE DROP</code> command.</span><div>
                                 <p>The following command performs a flashback of the <code class="codeph">HR.REG_HIST</code> table.
                                 </p><pre class="oac_no_warn" dir="ltr">FLASHBACK TABLE HR.REG_HIST TO BEFORE DROP;
</pre><div class="infoboxnote" id="GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905__GUID-63DE9363-CAC2-4FB9-B126-3C44B8D10EB6">
                                    <p class="notep1">Note:</p>
                                    <p>When a table is retrieved from the recycle bin, all the dependent objects for the table that are in the recycle bin are retrieved with it. They cannot be retrieved separately.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If the retrieved table had referential constraints before it was placed in the recycle bin, then re-create them.</span><div>
                                 <p>This step must be performed manually because the recycle bin does not preserve referential constraints on a table.</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div><a id="ADMQS12240"></a><a id="ADMQS101"></a><div class="props_rev_3"><a id="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488" name="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488"></a><h4 id="ADMQS-GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488" class="sect4"><span class="enumeration_section">9.8.3 </span>Rewinding a Database Using Oracle Flashback Database
                  </h4>
                  <div>
                     <div><span>Unlike the other flashback features, Oracle Flashback Database operates at a physical level. When you use Flashback Database, your current data files revert to their contents at a previous time.</span> The result is similar to database point-in-time recovery, but Flashback Database can be much faster because it does not require you to restore and recover data files. Also, Flashback Database requires limited application of redo data as compared to media recovery.
                     </div>
                     <div class="section">
                        <p>Flashback Database uses flashback logs to access previous versions of data blocks and also uses some data in the archived redo log files. To have the option of using Flashback Database to repair your database, you must have configured the database to generate flashback logs as explained in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-192720EF-64C7-465B-982A-F8AABFD81DC1">Configuring Recovery Settings</a>."</span></p>
                        <div class="infoboxnote" id="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488__GUID-9B0CB5E6-7CA6-44D2-B850-20632E00A033">
                           <p class="notep1">Note:</p>
                           <p>You can use the Oracle Recovery Manager (RMAN) <code class="codeph">FLASHBACK DATABASE</code> command to rewind the entire multitenant container database (CDB) only, not individual pluggable databases (PDBs).
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488__GUID-DACDF0F8-8C68-466E-A83B-E62E17E40B24">To perform a Flashback Database operation:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                        <li class="stepexpand"><span>Identify the desired SCN, restore point, or point in time to which the flashback database must be performed. This example rewinds the database to a specified point in time.</span><div>
                              <div class="infoboxnotealso" id="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488__GUID-2EB1492D-1376-461C-B0D1-E60A1747D2C5">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89752" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about how to determine the SCN and then flashback the database to this SCN
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Shut down the database consistently, ensure that it is not opened by any instance, and then mount the database.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Flash back the database to the desired time.</span><div>
                              <p>In this example, you need to flashback the entire database to the time specified in the <code class="codeph">TIME</code> clause.
                              </p><pre class="oac_no_warn" dir="ltr">FLASHBACK DATABASE to TIME "TO_DATE('03/20/12','MM/DD/YY')";
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Open the database read-only and run some queries to verify the database contents.</span><div>
                              <p>The following command opens the database in read-only mode:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ ONLY;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>After confirming that the state of the database is as expected, make the database available for updates by opening it with the <code class="codeph">RESETLOGS</code> option.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
ALTER DATABASE OPEN RESETLOGS;
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS12241"></a><a id="ADMQS0941"></a><div class="props_rev_3"><a id="GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F" name="GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F"></a><h4 id="ADMQS-GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F" class="sect4"><span class="enumeration_section">9.8.4 </span>Restoring and Recovering the Database
                  </h4>
                  <div>
                     <div><span>This section demonstrates how to restore and recover the entire database using Oracle Recovery Manager (RMAN).</span> This example assumes that you are restoring and recovering your database after the loss of one or more data files, but you still have a usable server parameter file and control file. You can also use RMAN to restore a lost server parameter file or control file.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F__GUID-AF7793F1-8372-4867-9C18-2DC3741CA36B">To restore and recover the entire database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect RMAN to the target database as described in <span class="q">"<a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">Connecting to the Target Database Using RMAN</a>."</span></span></li>
                        <li class="stepexpand"><span>Ensure that the database is mounted, but not open.</span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restore the database using the following command:</span><div><pre class="oac_no_warn" dir="ltr">RESTORE DATABASE;
</pre><p>The data files from the RMAN backup are restored to their default locations.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Recover the database using the <code class="codeph">RECOVER</code> command.</span><div><pre class="oac_no_warn" dir="ltr">RECOVER DATABASE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Open the database using the following command:</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F__GUID-651C0CD3-1189-4422-B1B9-D780867D7B59">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV636" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about recovering multitenant container databases (CDBs) and pluggable databases (PDBs)
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV008" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for instructions for recovering a database when the control file and server parameter file are available only on backup
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89776" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about restoring data files to a location that is different from the default location
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADMQS097"></a><div class="props_rev_3"><a id="GUID-37FEAC3A-99F6-441F-93EE-55C4D69728F3" name="GUID-37FEAC3A-99F6-441F-93EE-55C4D69728F3"></a><h3 id="ADMQS-GUID-37FEAC3A-99F6-441F-93EE-55C4D69728F3" class="sect3"><span class="enumeration_section">9.9 </span>Performing Backup and Recovery: Oracle By Example Series
               </h3>
               <div>
                  <p>Oracle By Example (OBE) has a series on the <span class="italic">Oracle Database 2 Day DBA</span> guide. This OBE steps you through the tasks in this section, and includes annotated screenshots.
                  </p>
                  <div class="section">
                     <p>To view the Performing Backup and Recovery OBE, enter the following URL in your web browser:</p>
                     <p><a href="https://apexapps.oracle.com/pls/apex/f?p=44785:24:::NO:24:P24_CONTENT_ID:16832" target="_blank"><code class="codeph">https://apexapps.oracle.com/pls/apex/f?p=44785:24:::NO:24:P24_CONTENT_ID:16832</code></a></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>